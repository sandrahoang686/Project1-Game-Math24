!function(){window.siteDomain=location.origin||/^[^\/]+?[\/]{2}[^\/]+/.exec(location.href)[0];var e=[],t=function(t){e.push(t)},n=window;window.abTests={addShareInvite:{audiences:["allMembers"],experimentAllocation:1,experimentVersion:"v2",defaultWeight:1,defaults:{labelKey:"add-members-ellipsis"},autoTrack:!0,variations:[{name:"invite",weight:1,values:{labelKey:"invite-ellipsis"}}]},billingComponent:{audiences:["allMembers"],experimentAllocation:1,defaultWeight:1,defaults:{showNewBillingComponent:!1},variations:[{name:"billing",weight:1,values:{showNewBillingComponent:!0}}],autoTrack:!0},boardRecommendations:{name:"boardRecommendations",audiences:["englishMembers"],autoTrack:!0,experimentAllocation:1,defaultWeight:1,experimentVersion:"v2",defaults:{recommend:!1},variations:[{name:"recommendations",weight:1,values:{recommend:!0}}]},commentAndSubscribe:{name:"commentAndSubscribe",audiences:["allMembers","alphaMembers"],autoTrack:!0,experimentAllocation:{allMembers:.1,alphaMembers:1},defaultWeight:1,bucketVersion:"v2",experimentVersion:"v1",defaults:{subscribe:!1},variations:[{name:"subscribed",weight:1,values:{subscribe:!0}}]},embed:{audiences:["alphaEnglishMembers"],experimentVersion:"v1",experimentAllocation:1,defaultWeight:0,defaults:{showEmbed:!1},autoTrack:!0,variations:[{name:"showEmbed",weight:1,values:{showEmbed:!0}}]},globalNavBackButton:{name:"globalNavBackButton",audiences:["englishMembers"],experimentAllocation:1,defaultWeight:1,experimentVersion:"v1",defaults:{showBackButton:!1},autoTrack:!0,variations:[{name:"turnedOn",weight:1,values:{showBackButton:!0}}]},newMemberChargesPopup:{name:"newMemberChargesPopup",audiences:["allMembers"],autoTrack:!0,experimentAllocation:.1,defaultWeight:1,experimentVersion:"v1",defaults:{enabled:!1},variations:[{name:"control",weight:.5,values:{enabled:!1}},{name:"turnedOn",weight:.5,values:{enabled:!0}}]},northstar:{audiences:["alphaEnglishMembers","englishMembers"],experimentVersion:"v1",experimentAllocation:{alphaEnglishMembers:1,englishMembers:.1},defaultWeight:1,defaults:{bodyClass:""},autoTrack:!0,variations:[{name:"northstar",weight:1,values:{bodyClass:"northstar-base circle-avatars"}},{name:"northstar-square",weight:1,values:{bodyClass:"northstar-base"}},{name:"stable-circle-avatars",weight:1,values:{bodyClass:"circle-avatars"}}]},npsSurvey:{audiences:["allMembers"],experimentVersion:"v3",experimentAllocation:.2,defaultWeight:1,defaults:{showSurvey:!1},autoTrack:!0,variations:[{name:"showSurvey",weight:1,values:{showSurvey:!0}}]},nuxBanners:{audiences:["allMembers"],experimentVersion:"v2",experimentAllocation:0,defaultWeight:1,defaults:{showNuxBanners:!1},autoTrack:!0,variations:[{name:"turnedOn",weight:0,values:{showNuxBanners:!0}}]},powerUpRequestCTA:{audiences:["englishMembers"],experimentVersion:"v2",experimentAllocation:.3,defaultWeight:1,defaults:{showCTA:!1},autoTrack:!0,variations:[{name:"textOnly",weight:1,values:{showCTA:!0}}]},powerUpsExplanation:{name:"powerUpsExplanation",audiences:["englishMembers"],experimentAllocation:1,defaultWeight:1,experimentVersion:"v1",defaults:{explanationText:null},autoTrack:!0,variations:[{name:"explicitPowerUpNames",weight:1,values:{explanationText:"Calendar, Google Drive and more..."}},{name:"generalDescription",weight:1,values:{explanationText:"Apps, integrations and more..."}}]},powerUpSuggestions:{name:"powerUpSuggestions",audiences:["allMembers"],experimentAllocation:.1,defaultWeight:1,experimentVersion:"v1",defaults:{maxDismissalCount:3},autoTrack:!0,variations:[{name:"fiveDismissals",weight:1,values:{maxDismissalCount:5}}]},suggestBoardTemplate:{audiences:["englishMembers"],experimentAllocation:1,defaultWeight:1,bucketVersion:"v2",experimentVersion:"v1",defaults:{enabled:!1,hardStart:"2017-08-15 00:00:00"},variations:[{name:"enabled",weight:1,values:{enabled:!0}}]},teamMembersTabLayout:{audiences:["allMembers"],experimentVersion:"v1",experimentAllocation:.01,defaultWeight:1,defaults:{enabled:!1},autoTrack:!0,variations:[{name:"V1",weight:1,values:{enabled:!0}}]}},function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v;s=void 0,t(function(){return s=e(482)}),a=void 0,t(function(){return a=e(378)}),u=void 0,t(function(){return u=e(415)}),c=void 0,t(function(){return c=e(536)}),l=void 0,t(function(){return l=e(38)}),d=e("bluebird"),i=e("jquery"),m=e("moment"),v=e(48),f=e(132),p=e(238),o=e(216),g=function(e){var t;return t=parseInt(e,10),isNaN(t)?void 0:t},h=function(e,t){return null!=t?e(t):void 0},n.exports={routes:[["board/*path","oldBoardView"],["b/:shortLink(/*path)","boardView"],["card/board/(:slug/):idBoard/:cardComponent","oldCardView"],["card/(:slug/):idBoard/:cardComponent","oldCardView"],["c/:id(/*path)","cardView"]],boardView:function(e,t){var n,r,i,o,s,a,u,c;return null==t&&(t=""),o=t.split("/"),u=o[0],s=o[1],c=o[2],i=o[3],r=o[4],a={idBoard:e},"calendar"===s&&(n=m().startOf("day"),n.year(g(c)),n.month(h(p.sub(1),g(i))),n.date(g(r)),n.isValid()&&(a.calendarDate=n.toDate())),"member"===s&&null!=c&&(a.usernameBoardProfile=c),("calendar"===s||"member"===s||"power-ups"===s)&&(a.section=s),this.displayBoard(a).done()},oldBoardView:function(e){var t,n;return n={},t=e.split("/"),1===t.length?n.idBoard=t[0]:n.idBoard=t[1],3===t.length?n.section=t[2]:4===t.length&&(n.usernameBoardProfile=t[3]),this.displayBoard(n).done()},cardView:function(e,t){var n;return n=location.hash.length>1?location.hash.substr(1):null,this.displayBoard({idCard:e,highlight:n}).done()},oldCardView:function(e,t,n){var r,i;return i=function(e){return/^\d+$/.test(e)},r=i(n)?l.for("top-level","loadCardId",t,n).catch(o,function(){return null}):d.resolve(n),r.then(function(e){return function(n){return e.displayBoard({idBoard:t,idCard:n})}}(this)).done()},showCardDetail:function(e,t){var n,r,i,o,l,d,p,h;if(l=null!=t?t:{},i=l.highlight,p=l.runMethod,o=l.isNavigating,null!=e){if(!this.onBoardView(null!=(d=e.getBoard())?d.id:void 0)||e.modelCache!==this.getCurrentModelCache())return void this.navigate(this.getCardUrl(e,i),{trigger:!0});v("Card Front","Open Card Detail"),r=new u({modelCache:this.getCurrentModelCache(),model:e}),n=e.getBoard(),h=this.showingCalendar(e.getBoard()&&this.applicationView.existingSubviewOrUndefined(a,e.getBoard())),c.show({view:r,hide:function(e){return function(t){return s.clear(),t?void 0:(e.setBoardLocation(n.id,h?"calendar":void 0),e.title(n.get("name")))}}(this),isNavigating:o}),this.waitForId(e,function(t){return function(){return t.navigate(t.getCardUrl(e,i),{replace:t.onCardView(),trigger:!1})}}(this)),null!=p&&r[p](),null!=i&&r.highlight(i,!0)}}}},{}],2:[function(e,n,r){var i,o,s,a;o=void 0,t(function(){return o=e(38)}),s=e("underscore"),a=e(101),i=e(33),n.exports={routes:[["*splat","displayErrorPage"]],displayErrorPage:function(e){var t;return t=s.extend({errorType:"notFound"},e,{url:location.pathname+location.search,isLoggedIn:i.isLoggedIn()}),this.errorView({title:a("error"),data:t})}}},{}],3:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T;a=e(33),o=e(532),s=e(216),u=void 0,t(function(){return u=e(161)}),c=void 0,t(function(){return c=e(378)}),p=void 0,t(function(){return p=e(38)}),d=void 0,t(function(){return d=e(37)}),h=e(544),m=e("bluebird"),f=e(129),g=e("underscore"),i=e("jquery"),v=e(76),y=e(238),C=e(45),x=e(102),j=e("moment"),S=e(132),T=e(48),l=x("DisplayBoard",["ConfirmToView","CardNotFound","CardNotFoundOnThisBoard","BoardNotFound"]),b=function(e){return"board_"+e},w=function(e,t){var n,r;null==t&&(t=m.resolve()),r=p.for("top-level","loadBoardSecondary",e),n=p.for("top-level","loadBoardPluginData",e),m.all([r,n]).catch(s,function(){}).done()},k=function(e){var t;return t=p.for("top-level","loadCurrentBoardData",e),w(e,t),t.catch(s.Unconfirmed,function(){return m.reject(l.ConfirmToView())}).catch(s,function(){return m.reject(l.BoardNotFound())})},_=function(){return h.hold(),m.resolve().disposer(function(){return h.release()})},n.exports={showCardOnBoard:function(e,t,n,r){return m.try(function(){var t;return null!=(t=n.getCard(e))?(v(null!=t.get("idBoard")&&null!=t.get("idList")&&null!=t.get("name"),"Tried to display a card that was only partially loaded"),t):r(e).tap(function(e){e.get("idBoard")!==n.id&&m.reject(l.CardNotFoundOnThisBoard("",{idBoard:n.id}))})}).then(function(e){return function(n){return e.showCardDetail(n,{highlight:t})}}(this))},showBoardDetailView:function(e,t){return m.try(function(n){return function(){var r,i,o,s;return r=t.model,null!=(o=e.idCard)?n.showCardOnBoard(o,e.highlight,r,e.loadCardData):e.usernameBoardProfile&&null!=(s=r.modelCache.findOne("Member","username",e.usernameBoardProfile))?t.showMemberProfile(s):null!=(i=e.calendarDate)?t.showCalendar(i):(e.openListComposer&&t.openListComposer(),e.openCardComposerInFirstList&&g.defer(function(){return t.openCardComposerInFirstList()}),n.setBoardLocation(r.id,e.section))}}(this))},renderBoard:function(e,t){var n;return m.resolve(this.onBoardView(e.id)?(n=this.existingTopLevelView(c,e),n.closeDetailView(),n):(this.clearPreviousView(),this.setViewType(e),this.showHeader(),n=this.topLevelView(c,e,g.extend(t,{modelCache:e.modelCache})),i("#content").html(n.render().el),i("body").addClass("body-board-view"),n))},settingsFromQuery:function(){return g.chain(location.search.substr(1).split("&")).map(function(e){return e.split("=",2)}).filter(function(e){var t;return t=e[0],"menu"===t||"filter"===t}).map(function(e){var t,n;return t=e[0],n=e[1],[t,decodeURIComponent(n)]}).object().value()},displayBoard:function(e){var t,n,r,i,u,c;return C("controller",["boardView",e.idBoard]),c=Date.now(),r=e.idBoard,i=e.idCard,v(r||i,"Illegal invocation of displayBoard: requires one of idBoard, or idCard"),v(null==r||f.checkId(r)||f.isShortLink(r),'Illegal invocation of displayBoard: idBoard must be a board ID or a short link (got "'+r+'")'),v(null==i||f.checkId(i)||f.isShortLink(i),'Illegal invocation of displayBoard: idCard must be a card ID or a short link (got "'+i+'")'),u=g.once(function(e){return p.for("top-level","loadCardData",e).catch(s,function(){return m.reject(l.CardNotFound())})}),t=function(e){return function(t){var n;return n=t.model,new m(function(t){return e.waitForId(n,t)})}}(this),n=g.extend({loadCardData:u},e),m.using(this.getSpinner(),function(s){return function(){return p.release("top-level"),m.try(function(){return null!=i?u(i).call("get","idBoard"):r}).then(function(e){return m.props({loadStartTime:Date.now(),board:k(e),timingLabel:null!=p.getUpToDateBoard(e)?"Known Board":"New Board"})}).then(function(r){var i,o,a;return i=r.board,a=r.timingLabel,o=r.loadStartTime,T("Timing","Load",a,Date.now()-c),m.using(_(),function(){var r;return r=Date.now(),s.renderBoard(i,{section:e.section,settings:s.settingsFromQuery()}).tap(function(){return T("Timing","Load and Render",a,Date.now()-c),T("Timing","Render",a,Date.now()-r)}).tap(t).then(y(s,"showBoardDetailView",n))})}).catch(l.ConfirmToView,function(){return v(a.isLoggedIn(),"Got 401: 'Confirm to view' while not logged in"),S(d,"waitFor","Member",a.myId()).then(function(){return s.displayErrorPage(g.extend({errorType:"unconfirmedBoardNotFound"},a.me().toJSON()))})}).catch(l.CardNotFound,function(){return s.displayErrorPage({errorType:"cardNotFound"})}).catch(l.BoardNotFound,function(){return s.displayErrorPage({errorType:"boardNotFound"})}).catch(l.CardNotFoundOnThisBoard,function(t){var n;return n=t.idBoard,o.show("card does not exist","warning","doesnotexist",5e3),s.setBoardLocation(n,e.section)})}}(this))}}},{}],4:[function(e,n,r){var i,o,s,a,u,c,l;o=e(216),s=void 0,t(function(){return s=e(458)}),a=void 0,t(function(){return a=e(37)}),u=void 0,t(function(){return u=e(38)}),l=e(45),c=e("bluebird"),i=e("jquery"),n.exports={routes:[["e/:name/admin","enterpriseAdminDashboardView"]],displayEnterprisePage:function(e){var t,n,r;return t=e.enterpriseName,n=e.loadFn,r=e.viewClass,l("controller",["enterprise"]),c.using(this.getSpinner(),function(s){return function(){return u.release("top-level"),u.for("top-level",n,t).then(function(t){var n,o,u;return t.isRealEnterprise()?(s.clearPreviousView(),s.setViewType(t),o={modelCache:a},n=s.topLevelView(r,t,o),s.showHeader(),i("body").addClass("body-tabbed-page"),i("#content").html(n.render().el),u=t.get("displayName"),void s.setLocation({title:u,location:e.getLocation.call(s,t.get("name"))})):void s.displayErrorPage()}).catch(o,function(){s.displayErrorPage()})}}(this))},enterpriseAdminDashboardView:function(e){return this.displayEnterprisePage({enterpriseName:e,loadFn:"loadEnterprise",viewClass:s,getLocation:this.getEnterpriseAdminDashboardUrl}).done()}}},{}],5:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O;s=e(33),o=void 0,t(function(){return o=e(460)}),a=void 0,t(function(){return a=e(393)}),u=e(79),c=void 0,t(function(){return c=e(462)}),l=void 0,t(function(){return l=e(464)}),d=void 0,t(function(){return d=e(466)}),p=void 0,t(function(){return p=e(467)}),h=void 0,t(function(){return h=e(472)}),m=void 0,t(function(){return m=e(474)}),f=void 0,t(function(){return f=e(476)}),g=void 0,t(function(){return g=e(37)}),v=e(477),b=e(544),y=void 0,t(function(){return y=e(478)}),w=void 0,t(function(){return w=e(694)}),k=void 0,t(function(){return k=e(276)}),_=void 0,t(function(){return _=e(479)}),O=e(48),C=void 0,t(function(){return C=e(480)}),x=e(129),j=e("underscore"),i=e("jquery"),B=e(519),T=e(31),S=e(85),M=function(e){var t;return t=e.getPref("twoFactor"),(null!=t?t.enabled:void 0)&&t.needsNewBackups},n.exports={showHeader:function(e){var t,n,r,P,E,L,A;null==e&&(e={}),i("#header .header-user").remove(),i("#header .header-boards-button").remove(),i("#header #header-search").parent().remove(),i("#header-search").empty(),i(".header-banner").remove(),i("#header nav").remove(),L=s.me(),P=g,i("#header").empty().prepend(B.fill("header_logo")),window.top===window&&(e.promo||!s.isLoggedIn()?i("#header").append(B.fill("header_promo_nav")):(t=S("globalNavBackButton"),!this.onHome()&&t.get("showBackButton")&&i("#header").append(this.topLevelView(d,L,{modelCache:P}).render().el),i("#header").append(this.topLevelView(p,L,{modelCache:P}).render().el),e.noSearch||i("#header").append(this.topLevelView(w,L,{modelCache:P}).render().el),i("#header .header-woof").parent().remove(),i("#header").append(this.topLevelView(m,L,{modelCache:P}).render().el),A=function(e){return function(){return e._boardDrawerRendered?void 0:(e._boardDrawerRendered=!0,i("#boards-drawer").empty().append(new a({model:L,modelCache:P}).render().el))}}(this),k.getPinSidebar()?A():b.enqueue("render_boards_drawer",A)),i("#header").append(this.topLevelView(h,L,{modelCache:P}).render(e.promo).el),n=j.chain(T).pluck("code").filter(function(e){return 0!==e.indexOf("en")}).value(),/^(explorer-10|safari-[678])/.test(u.browserVersionStr)&&(O("Unsupported Browser Banner","Displayed",u.browserVersionStr),i("#header").after(this.topLevelView(c,L,{modelCache:P}).render().el)),null!=this.currentModel.get()&&x.hasValidInviteTokenFor(this.currentModel.get())?(e={modelCache:this.getCurrentModelCache()},this.onAnyBoardView()?e.idBoard=this.currentModel.get().id:this.onAnyOrganizationView()&&(e.idOrganization=this.currentModel.get().id),i("#header").after(this.topLevelView(f,L,e,this.currentModel.get().id).render().el)):s.isLoggedIn()?s.confirmed()?s.canLogIn()?(E=j.find(n,function(e){return s.me().shouldShowNewLanguageBannerFor(e)}))?i("#header").after(this.topLevelView(v,L,{modelCache:P,locale:E}).render().el):M(s.me())?i("#header").after(this.topLevelView(C,L,{modelCache:P}).render().el):(null!=(r=s.me().enterpriseWithRequiredConversion())||s.me().missedTransferDate())&&(e={modelCache:P,locale:E,enterprise:r},i("#header").after(this.topLevelView(o,L,e).render().el)):i("#header").after(this.topLevelView(_,L,{modelCache:P}).render().el):i("#header").after(this.topLevelView(l,L,{modelCache:P}).render().el):this.onAnyBoardView()&&this.currentModel.get().isPublic()&&i("#header").after(this.topLevelView(y,this.currentModel.get(),{modelCache:this.getCurrentModelCache()}).render().el),L.checkColorBlindMode())}}},{}],6:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N,V,$,R,z,U,F,q,H,K,W,G,J,Q,Y,X,Z,ee,te,ne=function(e,t){function n(){this.constructor=e}for(var r in t)re.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},re={}.hasOwnProperty;i=e("jquery"),o=void 0,t(function(){return o=e(532)}),a=void 0,t(function(){return a=e(217)}),u=void 0,t(function(){return u=e(288)}),c=void 0,t(function(){return c=e(482)}),l=e(33),d=e(234),p=void 0,t(function(){return p=e(161)}),h=void 0,t(function(){return h=e(378)}),f=void 0,t(function(){return f=e(536)}),g=e(83),v=void 0,t(function(){return v=e(86)}),b=e("hearsay"),y=void 0,t(function(){return y=e(95)}),w=e(20),_=void 0,t(function(){return _=e(203)}),k=void 0,t(function(){return k=e(37)}),C=void 0,t(function(){return C=e(38)}),x=void 0,t(function(){return x=e(205)}),j=void 0,t(function(){return j=e(207)}),S=void 0,t(function(){return S=e(540)}),T=void 0,t(function(){return T=e(542)}),M=e("bluebird"),G=void 0,t(function(){return G=e(226)}),B=void 0,t(function(){return B=e(275)}),O=void 0,t(function(){return O=e(276)}),Q=e(85),F=e(43),Z=e(48),E=e(129),P=e(520),L=e("underscore"),q=e(106),X=e(519),U=e(101),A=e(76),I=e(238),s=e(216),te=e("xtend"),$=e(42),J=function(e){return RegExp("^/"+E.escapeForRegex(e)+"/([a-zA-Z0-9]{8})(/|$)")},V=function(e){var t;return null!=(t=J("c").exec(e))?t[1]:void 0},N=function(e){var t;return null!=(t=J("b").exec(e))?t[1]:void 0},K=function(e,t){return e&&t&&e===t},z=function(e,t){var n,r,i,o;return i=V(e),o=V(t),K(i,o)?!0:(n=N(e),r=N(t),K(n,r)?!0:!1)},R=function(e,t){var n;return n=l.isLoggedIn()?C.for("header",e):M.resolve(null),n.then(function(){return C.triggerWaits(t)}).catch(s,function(e){throw F(new Error("headerLoad ApiError, err = "+e+", err.constructor.name = "+e.constructor.name)),e}).catch(s.Unauthenticated,function(e){return console.log("Error trying to load header")}).done()},q(g,m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ne(t,e),t.prototype.initialize=function(){return this._savedTitle="",this.currentModel=new b.Slot(null),this.currentModel.use()},t.prototype.start=function(){return R("loadHeaderData","headerData"),setTimeout(I(R,"loadBoardsMenuData","boardsData"),500),l.isLoggedIn()&&C.await("headerData").then(function(){var e,t;return l.me().loadNextSurveyDate(),e=null!=(t=Q("northstar"))?t.get("bodyClass"):void 0,e?i("body").addClass(e):void 0}).done(),P.addHandler({shortcut:function(e){return function(t){return t===w.QuestionMark?(e.navigate("shortcuts"),e.shortcutsView(),"Shortcuts page"):void 0}}(this)},{scope:"global"}),y.autoJoin().then(function(e){return e?QuickLoad.clear():void 0}).return()},t.prototype.viewType="none",t.prototype.topLevelView=function(e,t,n){return null==this.applicationView&&(this.applicationView=new u),null==n&&(n={}),null==n.modelCache&&(n.modelCache=this.getCurrentModelCache()),this.applicationView.subview(e,t,n)},t.prototype.existingTopLevelView=function(e,t){return this.applicationView.existingSubview(e,t)},t.prototype.existingTopLevelViewOrUndefined=function(e,t){var n;return null!=(n=this.applicationView)?n.existingSubviewOrUndefined(e,t):void 0},t.prototype.title=function(e){var t,n,r,i,o;return null!=e&&(this._savedTitle=e),i=x.unreadCount(k),o=i?"* ":"",t=o,(null!=(n=this._savedTitle)?n.length:void 0)>0&&(t+=this._savedTitle+" | "),t+="Trello",null!=(r=window.fluid)&&(r.dockBadge=i?i:null),v.setNotifications(i>0),document.title=t},t.prototype.setLocation=function(e){var t,n,r;r=e.title,t=e.location,n=e.options,null!=r&&this.title(r),t&&(/^#/.test(t)&&(t=t.substr(1)),this.navigate(t,n),this.location=t)},t.prototype.showingCalendar=function(e){return(null!=e?e.$(".calendar-wrapper").length:void 0)>0},t.prototype.setBoardLocation=function(e,t,n,r){var i;null==t&&(t=""),null==n&&(n=[]),i=k.get("Board",e).get("name"),this.setLocation({title:i,location:this.getBoardUrl(e,t,n),options:r})},t.prototype.saveMemberBoardProfileLocation=function(e,t){return this.setLocation({title:e.get("fullName"),location:this.getMemberBoardProfileUrl(e.get("username"),t)})},t.prototype.isOnSearchPage=function(){return"search"===this.currentPage},t.prototype.onAnyOrganizationView=function(){return this.currentModel.get()instanceof j},t.prototype.onOrganizationView=function(e){return this.onAnyOrganizationView()&&this.currentModel.get().id===e},t.prototype.onAnyBoardView=function(){return this.currentModel.get()instanceof p},t.prototype.onBoardView=function(e){return this.onAnyBoardView()?E.checkId(e)?this.currentModel.get().id===e:E.isShortLink(e)?this.currentModel.get().get("shortLink")===e:void 0:!1},t.prototype.onHome=function(){return"home"===this.currentPage},t.prototype.getCurrentBoardView=function(){return this.existingTopLevelViewOrUndefined(h,this.getCurrentBoard())},t.prototype.getCurrentBoard=function(){return this.onAnyBoardView()?this.currentModel.get():null},t.prototype.getCurrentModelCache=function(){return this.currentModelCache},t.prototype.saveBoardsView=function(){null==this.savedBoardViewInformation&&this.onAnyBoardView()&&(this.savedBoardViewInformation={idBoard:this.currentModel.get().id,path:/\/b\/[^\/]*\/(.*)/.exec(this.location)[1]})},t.prototype.loadBoardsView=function(){var e,t,n;if(this.savedBoardViewInformation)return n=this.savedBoardViewInformation,e=n.idBoard,t=n.path,this.boardView(e,t),delete this.savedBoardViewInformation},t.prototype.clearPreviousView=function(){var e;this.overBoardsPage&&(this.overBoardsPage=!1),B.setQuery(""),null!=(e=this.applicationView)&&e.remove(),delete this.applicationView,T.hide(),S.close(),f.isVisible&&f.hide(!0),i("#content").html(""),i("body").scrollTop("0").removeClass("body-single-column body-tabbed-page body-search-page body-board-view body-custom-board-background body-custom-board-background-tiled body-light-board-background body-dark-board-background body-default-header").css({"background-image":"","background-color":""},c.clear())},t.prototype.setViewType=function(e){var t;this.currentModel.get()instanceof p&&this.currentModel.get().markAsViewed(),L.isString(e)?(this.currentModelCache=k,this.currentModel.set(null)):(this.currentModelCache=e.modelCache,this.currentModel.set(e)),this.currentPage=e,this.currentModel.get()instanceof p?(t=this.currentModel.get(),this.waitForId(t,function(){return t.markAsViewed(),O.pushBoard(t.id)})):v.setBackground({useDefault:!0})},t.prototype.onCardView=function(){return/^c\/[a-zA-Z0-9]{8}(\/[^\/]+)?/.test(d.history.fragment)},t.prototype.organizationById=function(e){return C.for("top-level","loadOrgNameById",e).then(function(e){return function(t){return e.organizationBoardsView(t)}}(this)).catch(s,function(e){return function(){return e.displayErrorPage()}}(this)).done()},t.prototype.getSpinner=function(){return i(".header-logo").addClass("is-throbbing"),M.resolve().disposer(function(){i(".header-logo").removeClass("is-throbbing")})},t.prototype.syncError=function(e){var t,n,r,s,a,u;o.showHtml(X.fill("sync_error"),"error","modelSync"),this._reportedError||(this._reportedError=!0,r=/too (low|high)[\.:]\s+(\d+)\s[<>]\s(\d+)/.exec(e.message)||[],t=r[0],n=r[1],a=r[2],u=r[3],Z("Error","Sync Error",G.isUsingSocket()?"Using Socket":"Using AJAX",null!=r?"high"===n?"Too High":"Too Low":"Unknown",null!=r?Math.abs(parseInt(a,10)-parseInt(u,10)):void 0),s=Date.now()-(G.rpcCurrent.dateLastMessage||0),i.ajax({url:"/test-connection",timeout:3e3}).fail(function(e){return function(){return Z("Error","Sync Error Connectability","Unreachable",void 0,s)}}(this)).done(function(e){return function(){return Z("Error","Sync Error Connectability","Reachable",void 0,s)}}(this)))},t.prototype.focusContent=function(){return i("#content").attr("tabindex",-1).focus()},t}(d.Router)),H=d.History.prototype.navigate,ee=function(e){return""===e&&(e="boards"),"function"==typeof window.ga&&window.ga("send","pageview","/"+e),"function"==typeof window.sp?window.sp("trackPageView",null,$()):void 0},L.extend(d.History.prototype,{navigate:function(e,t){z(e,this.location.pathname)&&(t=te(t,{replace:!0})),H.call(this,e,t),ee(e)}}),D=[e(3),e(12),e(5),e(11),e(10),e(7),e(13),e(1),e(4),e(8),e(9),e(2)],W=L.chain(D).map(function(e){return L.extend(m.prototype,e),delete m.prototype.routes,e.routes}).compact().flatten(!0).value().reverse(),Y=new m,W.forEach(function(e){var t,n;return n=e[0],t=e[1],Y.route(n,t)}),n.exports=Y},{}],7:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f;i=e("jquery"),o=e(216),s=void 0,t(function(){return s=e(217)}),a=e(33),u=void 0,t(function(){return u=e(525)}),c=void 0,t(function(){return c=e(95)}),l=void 0,t(function(){return l=e(37)}),d=void 0,t(function(){return d=e(38)}),p=e(222),h=e("bluebird"),m=e("underscore"),f=function(e){var t,n,r,o,s;return n=i.cookie("invitation")||"",r=n.split(":"),s=r[0],t=r[1],o=r[2],s!==e&&(t=null),{id:t,secret:o}},n.exports={routes:[["invite/accept-board","handleBoardCookieInvitation"],["invite/accept-team","handleTeamCookieInvitation"]],_handleInvitation:function(e){var t,n,r,l,p,m,f,g,v,b;return l=e.id,p=e.loadModel,g=e.targetUrl,v=e.transferUrl,b=e.viewType,t=e.apiUrl,m=e.nameFromInvite,n=e.emailRestrictionsFromInvite,f=function(e){return function(){return d.await("headerData").then(function(){if(!a.isLoggedIn())throw o.Unauthorized();return p()}).then(function(){var t;if(null!=(t=g()))return e.navigate(t,{trigger:!0});throw o.Unauthorized()})}}(this),r=null!=t?s({url:t,type:"get"}):h.reject(o.NotFound()),h.using(this.getSpinner(),function(e){return function(){return i("#content").html('<div class="spinner loading"></div>'),c.autoJoin().then(function(){return f()}).catch(o.NotFound,o.Unauthorized,o.Unconfirmed,function(){var o;return e.clearPreviousView(),o=a.me(),null!=o&&e.setViewType(o),e.showHeader(),h.props({invite:r,member:a.isLoggedIn()?d.for("top-level","loadMemberLogins",a.myId()):void 0}).then(function(r){var a,l;return l=r.invite,a=e.topLevelView(u,o,{inviter:l.memberInviter,name:m(l),emailRestrictions:n(l),transferUrl:"function"==typeof v?v():void 0,willJoinOnConfirm:c.inQueue(t),fxJoin:function(){return s({method:"post",url:t}).then(f)},fxQueueJoin:function(){return c.add(t)}}),i("#content").html(a.render().el)})})}}(this))},handleBoardInvitation:function(e,t){var n;n=e&&t?"/1/board/"+e+"/invitationSecret/"+t:null,this._handleInvitation({loadModel:function(){if(e)return d.for("top-level","loadBoardData",e,p.currentBoardMinimal);throw o.BadRequest("invalid board shortLink")},targetUrl:function(t){return function(){var n;return null!=(n=l.get("Board",e))&&n.isMember(a.me())?t.getBoardUrl(n):null}}(this),viewType:"board-invitation-link",apiUrl:n,nameFromInvite:function(e){return e.board.name},emailRestrictionsFromInvite:function(){return[]}}).catch(o,function(e){return function(){return e.displayErrorPage({errorType:"boardInvitationNotFound"})}}(this)).done()},handleOrgInvitation:function(e,t){var n;n=e&&t?"/1/organization/"+e+"/invitationSecret/"+t:null,this._handleInvitation({loadModel:function(){if(e)return d.for("top-level","loadOrganizationData",e);throw o.BadRequest("invalid orgname")},targetUrl:function(t){return function(){var n;return null!=(n=l.findOne("Organization",function(t){return t.get("name")===e}))&&n.isMember(a.me())?t.getOrganizationUrl(e):null}}(this),transferUrl:function(){return"/"+e+"/transfer-account"},viewType:"org-invitation-link",apiUrl:n,nameFromInvite:function(e){return e.organization.displayName},emailRestrictionsFromInvite:function(e){var t,n;return null!=(t=null!=(n=e.organization.prefs)?n.orgInviteRestrict:void 0)?t:[]}}).catch(o,function(e){return function(t){return e.displayErrorPage({errorType:"orgInvitationNotFound"})}}(this)).done()},handleBoardCookieInvitation:function(){var e,t,n;return e=f("board"),n=e.id,t=e.secret,this.handleBoardInvitation(n,t)},handleTeamCookieInvitation:function(){var e,t,n;return t=f("organization"),e=t.id,n=t.secret,this.handleOrgInvitation(e,n)}}},{}],8:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S;s=e(33),a=void 0,t(function(){return a=e(536)}),_=e(101),u=void 0,t(function(){return u=e(203)}),c=void 0,t(function(){return c=e(572)}),l=void 0,t(function(){return l=e(576)}),d=void 0,t(function(){return d=e(578)}),p=void 0,t(function(){return p=e(584)}),h=void 0,t(function(){return h=e(589)}),m=void 0,t(function(){return m=e(590)}),f=void 0,t(function(){return f=e(37)}),g=void 0,t(function(){return g=e(38)}),v=e("bluebird"),S=e(118),i=e("jquery"),k=e(45),y=e("underscore"),w=e(76),o=e(216),C=e(85),j=e(51),b=e(129),x=null,n.exports={routes:[["","memberBoardsView"],[":username/cards","memberCardsView"],[":username/cards/:orgname","memberCardsView"],[":username/notifications","memberNotificationsView"]],displayMemberPage:function(e){var t,n,r,u,c,l,p,h,m,b,w;return b=e.username,c=e.loadFn,w=e.viewClass,r=e.getLocation,t=e.bodyClass,u=e.inDialogIfOnBoard,l=e.maxDialogWidth,h=e.product,p=e.orgname,m=e.titleKey,null==b&&(b=s.myUsername()),n=this.onAnyBoardView()&&u||this.overBoardsPage,k("controller",["memberBoardsView"]),v.using(this.getSpinner(),function(u){return function(){return g.release("top-level"),g.for("top-level",c,b).then(function(o){var c,l,g,v;n&&u.saveBoardsView(),n||u.clearPreviousView(),s.isMe(o)&&w===d?u.setViewType("home"):u.setViewType(o),v=s.isMe(o)&&null!=m?_(["page title",m]):o.get("fullName")+" ("+o.get("username")+")",u.setLocation({title:v,location:r.call(u,o.get("username"),h),options:{replace:!0}}),g={product:h,orgname:p,modelCache:f},n?(l=new w(y.extend({model:o},g)),c=null,null!=e.maxDialogWidth&&(c=e.maxDialogWidth),a.show({isNavigating:!0,view:l,maxWidth:c,hide:function(e){return e?void 0:u.loadBoardsView()}})):(l=u.topLevelView(w,o,g),u.showHeader(),t?i("body").addClass(t):i("body").addClass("body-tabbed-page"),i("#content").html(l.render().el),u.focusContent(),"function"==typeof l.getData&&l.getData())}).catch(o,function(){u.displayErrorPage()})}}(this))},memberBoardsView:function(){var e;return s.isLoggedIn()?(null==x&&(x=i.cookie("simulateNewUser")),e={username:"me",loadFn:"loadMemberBoardsData",viewClass:d,getLocation:this.getMemberBoardsUrl,titleKey:"boards"},this.displayMemberPage(e).then(S).done(),x||b.idToDate(s.myId())>b.dateBefore({minutes:3})?j.possibleNewSignup():void 0):this.displayErrorPage()},memberNotificationsView:function(e){return null==e&&(e="me"),s.isLoggedIn()?(e="me",this.displayMemberPage({username:e,loadFn:"loadNotificationData",viewClass:h,inDialogIfOnBoard:!0,maxDialogWidth:530,getLocation:this.getMemberNotificationsUrl,titleKey:"notifications"}).done()):this.displayErrorPage()},memberProfileView:function(e){return null==e&&(e="me"),this.displayMemberPage({username:e,loadFn:"loadMemberProfileData",viewClass:m,getLocation:this.getMemberProfileUrl,titleKey:"profile"}).done()},memberCardsView:function(e,t){return null==e&&(e="me"),this.displayMemberPage({username:e,loadFn:"loadMemberCardsData",viewClass:p,getLocation:function(e){return function(n){return e.getMemberCardsUrl(n,t)}}(this),titleKey:"cards",orgname:t}).done()},memberAccountView:function(e){return e="me",this.displayMemberPage({username:e,loadFn:"loadMemberAccountData",viewClass:c,getLocation:this.getMemberAccountUrl,titleKey:"settings"}).done()},memberBillingView:function(e){return e="me",this.displayMemberPage({username:e,loadFn:"loadMemberAccountData",viewClass:l,getLocation:this.getMemberBillingUrl,titleKey:"billing"}).done()}}},{}],9:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k;
s=e(33),a=void 0,t(function(){return a=e(536)}),u=void 0,t(function(){return u=e(203)}),c=void 0,t(function(){return c=e(37)}),l=void 0,t(function(){return l=e(38)}),d=void 0,t(function(){return d=e(207)}),p=void 0,t(function(){return p=e(635)}),h=void 0,t(function(){return h=e(639)}),m=void 0,t(function(){return m=e(643)}),f=void 0,t(function(){return f=e(644)}),g=void 0,t(function(){return g=e(652)}),i=e("jquery"),w=e(45),b=e("underscore"),y=e(238),v=e("bluebird"),_=e(132),o=e(216),k=e("xtend"),n.exports={routes:[["org/:id","organizationById"],[":name/members","organizationMembersView"],[":name/:username/cards","organizationMemberCardsView"],[":name/export","organizationExportView"]],organizationBoardsView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationBoardsData",additionalFns:{members:"loadOrganizationMemberGhost"},viewClass:m,getLocation:this.getOrganizationUrl}).done()},organizationMembersView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationMembersData",viewClass:g,getLocation:this.getOrganizationMembersUrl}).get("id").then(y(l,"loadOrganizationMembersExtraData")).done()},organizationMemberCardsView:function(e,t){return this.navigate(this.getOrganizationMemberCardsUrl(e,t),{trigger:!0})},organizationAccountView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationData",viewClass:p,getLocation:this.getOrganizationAccountUrl,membersOnly:!0}).done()},organizationExportView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationExportData",viewClass:f,getLocation:this.getOrganizationExportUrl,adminOnly:!0}).done()},organizationBillingView:function(e,t){return null==t&&(t={}),this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationData",viewClass:h,getLocation:this.getOrganizationBillingUrl,urlOptions:{returnUrl:t.returnUrl}}).done()},displayOrganizationPage:function(e){var t,n,r,d,p;return n=e.orgname,p=e.username,r=e.product,d=e.urlOptions,t=this.onAnyBoardView()&&e.inDialogIfOnBoard||this.overBoardsPage,w("controller",["organization"]),v.using(this.getSpinner(),function(h){return function(){return l.release("top-level"),l.for("top-level",e.loadFn,n).tap(function(t){var n;return v.all(b.values(null!=(n=e.additionalFns)?n:{}).map(function(e){return l[e](t.id,p)}))}).then(function(o){var l,m,f,g,v,y;return f=c.findOne(u,"username",p),!o.owned()&&e.adminOnly||!o.isMember(s.me())&&e.membersOnly||null!=e.businessClass&&!o.isFeatureEnabled(e.businessClass)?(h.organizationBoardsView(n),o):(t?h.saveBoardsView():h.clearPreviousView(),h.setViewType(o),g={urlOptions:d},f&&(g.member=f),null!=r&&(g.product=r),g.modelCache=h.getCurrentModelCache(),t?(m=null,null!=e.maxDialogWidth&&(m=e.maxDialogWidth),v=new e.viewClass(b.extend({model:o},g)),a.show({isNavigating:!0,view:v,maxWidth:m,hide:function(e){return e?void 0:h.loadBoardsView()}})):(v=h.topLevelView(e.viewClass,o,g),h.showHeader(),i("body").addClass("body-tabbed-page"),i("#content").html(v.render().el),h.focusContent()),y=o.get("displayName")+" ("+o.get("name")+")",l=e.getLocation.apply(h,f?[o.get("name"),f.get("username"),d]:r?[o.get("name"),r,d]:[o.get("name"),d]),h.setLocation({title:y,location:l}),o)}).catch(o.Unconfirmed,function(){return _(c,"waitFor","Member",s.myId()).then(function(){return h.displayErrorPage(b.extend({errorType:"unconfirmedOrgNotFound"},s.me().toJSON()))})}).catch(o,function(){return h.displayErrorPage()})}}(this))}}},{}],10:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y;o=e(33),s=void 0,t(function(){return s=e(617)}),u=void 0,t(function(){return u=e(459)}),a=void 0,t(function(){return a=e(536)}),c=void 0,t(function(){return c=e(203)}),l=void 0,t(function(){return l=e(37)}),d=void 0,t(function(){return d=e(38)}),p=e("bluebird"),h=void 0,t(function(){return h=e(694)}),m=void 0,t(function(){return m=e(275)}),f=e(129),i=e("jquery"),v=e(101),b=e(45),g=e("underscore"),y=e(519),n.exports={routes:[["shortcuts","shortcutsView"],["blank","blankView"],["select-org-to-upgrade","businessClassSelectOrgView"],["select-team-to-upgrade","businessClassSelectTeamView"],["search(?*query)","searchView"]],businessClassSelectOrgView:function(){this.navigate("/select-team-to-upgrade",{replace:!0,trigger:!0})},businessClassSelectTeamView:function(){var e;return e="/select-team-to-upgrade",o.isLoggedIn()?p.using(this.getSpinner(),function(t){return function(){return d.for("top-level","loadMyOrganizations").then(function(n){var r,o;return t.setViewType("select-org"),r=g.filter(n.organizationList.models,function(e){return!e.isPremium()}),1===r.length?void t.navigate("/"+r[0].get("name")+"/billing",{trigger:!0}):(t.setLocation({title:v("select organization to upgrade to business class"),location:e}),t.clearPreviousView(),o=t.topLevelView(s,n),t.showHeader(),i("#content").html(o.render().el))})}}(this)).done():void(window.location="/login?returnUrl="+e)},searchView:function(){return b("controller",["searchView"]),p.using(this.getSpinner(),function(e){return function(){return d.await("headerData").then(function(){var t,n,r,s,a;return o.isLoggedIn()?(e.setViewType("search"),e.clearPreviousView(),r=o.me(),t=l,s=f.getQueryParameter("q",""),n=e.topLevelView(h,r,{modelCache:t}),a=n.getResultsView(),m.setQuery(s),a.update(),e.showHeader({noSearch:!0}),i("body").addClass("body-search-page"),i("#content").append(n.render().el).append(a.render().el),void g.defer(function(){return n.focusInput()})):void e.displayErrorPage()})}}(this)).done()},blankView:function(){return p.using(this.getSpinner(),function(e){return function(){return d.await("headerData").then(function(){e.setViewType("blank"),e.clearPreviousView(),e.showHeader()})}}(this)).done()},shortcutsView:function(){d.waitFor("headerData",function(e){return function(){var t,n;return n=v("keyboard shortcuts"),t="shortcuts",e.onAnyBoardView()||e.overBoardsPage?(e.saveBoardsView(),a.show({html:y.fill("shortcuts"),maxWidth:550,hide:function(t){return t?void 0:e.loadBoardsView()}}),e.setLocation(n,t)):e.staticView({title:n,location:t,bodyClass:"body-single-column",template:function(){return y.fill("shortcuts")}})}}(this))},errorView:function(e){var t,n,r;return r=e.title,n=e.location,t=e.data,p.using(this.getSpinner(),function(e){return function(){return d.await("headerData").then(function(){var o;return e.setViewType("error"),e.clearPreviousView(),e.showHeader(),o=e.topLevelView(u,t),i("#content").append(o.render().el),e.focusContent(),e.setLocation({title:r,location:n})})}}(this)).done()},staticView:function(e){var t,n,r,o,s,a,u;return a=e.title,r=e.location,o=e.template,s=e.templateData,t=e.bodyClass,u=e.viewType,n=e.headerOpts,b("controller",[r+"View"]),p.using(this.getSpinner(),function(e){return function(){return d.await("headerData").then(function(){return e.setViewType(null!=u?u:r),e.clearPreviousView(),e.showHeader(n),o(s)}).then(function(n){return i("body").addClass(t),i("#content").html(n),e.focusContent(),e.setLocation({title:a,location:r})})}}(this)).done()}}},{}],11:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g;i=e("jquery"),u=e("underscore"),s=void 0,t(function(){return s=e(38)}),o=e(33),a=e("bluebird"),h=function(e){return e.toLowerCase().replace(/[-_()\[\]:,]/g," ").replace(/\s+/g," ")},l=function(e,t){var n;return n=h(t),u.find(e,function(e){return h(e.get("name"))===n})},g=function(e){return e.toLowerCase().split(/[-_ ]/)},f=function(e,t){var n;return n=g(t),u.find(e,function(e){var t;return t=g(h(e.get("name"))),u.all(n,function(e){return u.any(t,function(t){return 0===t.indexOf(e)})})})},p=function(e,t){var n;return n=g(t),u.find(e,function(e){var t;return t=h(e.get("name")),u.all(n,function(e){return-1!==t.indexOf(e)})})},m=function(e){return e.isOpen()},c=function(e){return-new Date(e.get("dateLastActivity"))},d=function(e){return e.replace(/[-_ ]+/g," ")},n.exports={routes:[["go/*search","quickBoard"],["to/*search","quickBoard"],["/*search","quickBoard"]],quickBoard:function(e){return e=decodeURIComponent(e),o.isLoggedIn()?void a.using(this.getSpinner(),function(t){return function(){return a.all([s.await("headerData").then(function(){return t.showHeader()}),a.try(function(){return e?s.for("top-level","loadQuickBoardsSearch",d(e)):void 0}),s.for("top-level","loadQuickBoardsData")]).then(function(){var n,r,i,s,a,u,h,g,v,b,y,w,_;for(b=o.me(),_=b.boardStarList.chain().invoke("getBoard").compact().filter(m).value(),y=b.boardList.chain().filter(m).sortBy(c).value(),w=b.organizationList.chain().pluck("boardList").pluck("models").flatten().filter(m).sortBy(c).value(),v=[l,f,p],i=[_,y,w],s=0,u=v.length;u>s;s++)for(g=v[s],a=0,h=i.length;h>a;a++)if(r=i[a],null!=(n=g(r,e)))return history.replaceState(null,null,t.getBoardUrl(n)+location.search),void t.displayBoard({idBoard:n.id});return t.navigate("/search?q="+encodeURIComponent(d(e)),{trigger:!0})})}}(this)).done():void(window.location="/login?returnUrl="+encodeURIComponent("//"+e))}}},{}],12:[function(e,n,r){var i,o,s,a;i=e(33),o=void 0,t(function(){return o=e(37)}),s=e(129),a=e("underscore"),n.exports={getSearchUrl:function(e){return"/search?q="+encodeURIComponent(e)},getOrganizationName:function(e){return a.isString(e)?e:e.get("name")},getOrganizationUrl:function(e){return"/"+this.getOrganizationName(e)},getEnterpriseAdminDashboardUrl:function(e){var t;return t=a.isString(e)?e:e.get("name"),"/e/"+t+"/admin"},_orgUrl:function(e,t,n){var r;return null==n&&(n={}),r=n.returnUrl?r="?returnUrl="+encodeURIComponent(n.returnUrl):"",""+this.getOrganizationUrl(e)+t+r},getOrganizationMemberCardsUrl:function(e,t){return this.getMemberCardsUrl(t,this.getOrganizationName(e))},getOrganizationAccountUrl:function(e){return this._orgUrl(e,"/account")},getOrganizationBillingUrl:function(e,t){return this._orgUrl(e,"/billing",t)},getOrganizationExportUrl:function(e){return this._orgUrl(e,"/export")},getOrganizationMembersUrl:function(e){return this._orgUrl(e,"/members")},getBoardUrl:function(e,t,n){var r,i,a,u,c,l,d;for(null==n&&(n=[]),null!=(null!=e?e.id:void 0)&&(e=e.id),i=o.get("Board",e),null!=(d=null!=i?i.get("url"):void 0)?r=s.relativeUrl(d):(c=null!=i?i.get("name"):void 0,r=c?"/board/"+s.makeSlug(c)+"/"+e:"/board/"+e),t&&(r+="/"+t),a=0,u=n.length;u>a;a++)l=n[a],r+="/"+l;return r},getBoardShortUrl:function(e,t){var n,r,i,a;return null!=(null!=e?e.id:void 0)&&(e=e.id),r=o.get("Board",e),null!=(a=null!=r?r.get("shortUrl"):void 0)?n=s.relativeUrl(a):(i=null!=r?r.get("shortLink"):void 0,n="/b/"+i),t&&(n+="/"+t),n},getBoardPowerUpsUrl:function(e){return this.getBoardUrl(e)+"?menu=power-ups"},getBoardPowerUpsUpgradeUrl:function(e){var t;return null!=(t=e.getOrganization())?this.getOrganizationBillingUrl(t,{returnUrl:this.getBoardPowerUpsUrl(e)}):"/business-class"},getMemberBoardProfileUrl:function(e,t){return[this.getBoardUrl(t),"member",e].join("/")},getMemberProfileUrl:function(e){return null==e&&(e=i.myUsername()),"/"+e},getMemberNotificationsUrl:function(e){return null==e&&(e=i.myUsername()),"/"+e+"/notifications"},getMemberBoardsUrl:function(e){return null==e&&(e=i.myUsername()),e===i.myUsername()?"/":"/"+e+"/boards"},getMemberCardsUrl:function(e,t){return null==e&&(e=i.myUsername()),t?"/"+e+"/cards/"+t:"/"+e+"/cards"},getMemberAccountUrl:function(e){return null==e&&(e=i.myUsername()),"/"+e+"/account"},getMemberBillingUrl:function(e){return null==e&&(e=i.myUsername()),"/"+e+"/billing"},getCardUrl:function(e,t){var n,r,i,o;return n=null!=(o=e.get("url"))?s.relativeUrl(o):(r=e.get("name"),this.getCardUrlWithoutModels(e.get("idBoard"),null!=(i=e.get("idShort"))?i:e.id,r)),t?[n,t].join("#"):n},getCardUrlWithoutModels:function(e,t,n){return null==t?null:s.isShortId(t)?"/card/"+s.makeSlug(n)+"/"+e+"/"+t:"/card/board/"+s.makeSlug(n)+"/"+e+"/"+t},getBoardInvitationLinkUrl:function(e,t){return"/invite/b/"+e.get("shortLink")+"/"+t+"/"+s.makeSlug(e.get("name"))},getOrganizationInvitationLinkUrl:function(e,t){return"/invite/"+e.get("name")+"/"+t},getActionUrl:function(e){var t,n;return n=e.isCommentLike()?"comment":"action",t=[n,e.id].join("-"),this.getCardUrl(e.getCard(),t)}}},{}],13:[function(e,n,r){var i,o,s,a,u,c,l,d;i=e("jquery"),o=e(216),s=void 0,t(function(){return s=e(217)}),a=e("bluebird"),u=e(112),c=e("underscore"),d=e(238),l=e(76),n.exports={routes:[[":name/account","userOrOrgAccountView"],[":name/billing(?*query)","userOrOrgBillingView"],[":name/billing/card","userOrOrgBillingCardView"],[":name/billing/card/:product","userOrOrgBillingCardView"],[":name(/)","userOrOrgProfileView"]],userOrOrgProfileView:function(e){null==e&&(e="me"),this.userOrOrgView(e,this.memberProfileView,this.organizationBoardsView)},userOrOrgAccountView:function(e){null==e&&(e="me"),this.userOrOrgView(e,this.memberAccountView,this.organizationAccountView)},userOrOrgBillingView:function(e){var t,n,r;null==e&&(e="me"),r=null!=(t=null!=(n=/returnUrl=([^&]+)/.exec(location.search))?n[1]:void 0)?decodeURIComponent(t):void 0,/^\/($|[a-zA-Z0-9])/.test(r)||(r=void 0),this.userOrOrgView(e,this.memberBillingView,this.organizationBillingView,{returnUrl:r})},userOrOrgBillingCardView:function(e,t){null==e&&(e="me"),this.navigate([e,"billing"].join("/"),{replace:!0,trigger:!0})},getViewData:function(e){var t,n;return t="typeof_"+e,null!=(n=u.get(t))?a.resolve(n):s({url:"/1/types/"+e}).tap(d(u,"set",t))},userOrOrgView:function(e,t,n,r){return null==r&&(r={}),this.getViewData(e).then(function(i){return function(o){var s;return s=function(){switch(o.type){case"member":return t;case"organization":return n}}(),l(null!=s,"/1/types/"+e+" resolved to "+o.type),s.call(i,e,r)}}(this)).catch(o.NotFound,function(e){return function(){return e.displayErrorPage()}}(this)).done()}}},{}],14:[function(e,t,n){var r,i;i="http://creativecommons.org/licenses/by/2.0/deed.en",r={unsplash:{name:"Unsplash"},photos:{name:"Photos"},patterns:{name:"Patterns and Textures"}},t.exports={blue:{type:"default",brightness:"dark",color:"#0079BF"},orange:{type:"default",brightness:"dark",color:"#D29034"},green:{type:"default",brightness:"dark",color:"#519839"},red:{type:"default",brightness:"dark",color:"#B04632"},purple:{type:"default",brightness:"dark",color:"#89609E"},pink:{type:"default",brightness:"dark",color:"#CD5A91"},lime:{type:"default",brightness:"dark",color:"#4BBF6B"},sky:{type:"default",brightness:"dark",color:"#00AECC"},grey:{type:"default",brightness:"dark",color:"#838C91"},mountain:{type:"premium",pack:r.photos,brightness:"light",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/mountain/171b0c9aea08e21f0020f359408b73e4/full.jpg",scaled:[{width:2400,height:1696,url:"https://a.trellocdn.com/images/backgrounds/mountain/46616ebeae7245d4a16cf00cf1e21e86/large.jpg"},{width:1024,height:724,url:"https://a.trellocdn.com/images/backgrounds/mountain/07627e0760eb74e7109a82057ac86881/medium.jpg"},{width:320,height:227,url:"https://a.trellocdn.com/images/backgrounds/mountain/da8d70dd70d666361767b9e30acdba65/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/62681247@N00/6575973407/",name:"jqmj (Queralt)",license:i}},cosmos:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/cosmos/92448e055514fdc92923c9b591aa31df/full.jpg",scaled:[{width:2047,height:1638,url:"https://a.trellocdn.com/images/backgrounds/cosmos/be5121d350dd3e3ac97e209c3a7fce58/large.jpg"},{width:1600,height:1280,url:"https://a.trellocdn.com/images/backgrounds/cosmos/f95acce485fc44f9a07853aa15965f90/medium.jpg"},{width:320,height:256,url:"https://a.trellocdn.com/images/backgrounds/cosmos/0646808c900b7409dbeb96d36f55e980/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/gsfc/6945160410/",name:"NASA Goddard Space Flight Center",license:i}},rain:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/rain/2e8209ee9f21d7147a24cac28ea61358/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/rain/9de9b88a694019ab77d129f1729b05b7/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/rain/b8ac88f9c4e8097c1ef8cc269d66e089/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/rain/e9147244c93e3990f361bc8123cacca9/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/vinothchandar/5243641910/",name:"Vinoth Chandar",license:i}},dew:{type:"premium",pack:r.photos,brightness:"light",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/dew/1d638bc56d179d5a8c35177305d4ea09/full.jpg",scaled:[{width:2400,height:1594,url:"https://a.trellocdn.com/images/backgrounds/dew/5b5f4c5cd0d7e144e40168345c8c6075/large.jpg"},{width:1024,height:680,url:"https://a.trellocdn.com/images/backgrounds/dew/3c8daf991e3132f453ad0c822175b34d/medium.jpg"},{width:320,height:212,url:"https://a.trellocdn.com/images/backgrounds/dew/71633df28ad4038a6fb6f647c1b29b27/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/jenny-pics/5584430423/",name:"Jenny Downing",license:i}},"snow-bokeh":{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/75b2ce11e6652e76ad0d3629d9886ca5/full.jpg",scaled:[{width:2400,height:1596,url:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/11fc1afae97ec97b3b46b149d701e180/large.jpg"},{width:1024,height:681,url:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/9f4c60883dec8b5aa5bc949607081505/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/d74c2d921e28c822e92b881b3e2cb10b/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/tabor-roeder/5337595458/",name:"Phil Roeder",license:i}},city:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/city/1bbbf09d491d444d207e5d8b792a86ba/full.jpg",scaled:[{width:2400,height:1594,url:"https://a.trellocdn.com/images/backgrounds/city/d23508735801f1190b365330eb8ec0a5/large.jpg"},{width:1024,height:680,url:"https://a.trellocdn.com/images/backgrounds/city/a7eea5e35c08388ec3da7dbc814f1da2/medium.jpg"},{width:320,height:212,url:"https://a.trellocdn.com/images/backgrounds/city/27e00a7bee7a783ae7568a819fa9bb97/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/nosha/2907855809/",name:"Nathan Siemers",license:i}},canyon:{type:"premium",pack:r.photos,brightness:"light",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/canyon/0c35d8049641c307de51cac7d449bf4e/full.jpg",scaled:[{width:2400,height:1596,url:"https://a.trellocdn.com/images/backgrounds/canyon/ee79179217e377e332d217cbe10405b4/large.jpg"},{width:1024,height:681,url:"https://a.trellocdn.com/images/backgrounds/canyon/976ada2d506ebb7c2f8708f2ccc47192/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/canyon/1478a9382a5ab8c493685223ff36e6f7/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/wolfgangstaudt/2252688630/",name:"Wolfgang Staudt",license:i}},ocean:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/ocean/4ce437330ab9d2fe40dd3d8504a143e6/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/ocean/ede6927e92b4515102b2d86e919c77fa/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/ocean/c8a238f606e3288c461fc7ea3daa36d9/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/ocean/2de3527d131722c66ec5315205d64104/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mattphipps/4635112852/",name:"MattJP",license:i}},river:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/river/b031ec422c9048f4b6fb3b53f80eba3c/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/river/801d937c765a9996d4eccf4aee6bfc36/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/river/67c2c39a74a32f383ffd10dc53ffb535/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/river/15967f866d002762d13d20d258140418/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/22746515@N02/3114276532/",name:"Bert Kaufmann",license:i}},fall:{type:"premium",pack:r.photos,discontinued:!0,fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/fall/72c32b15d265b78e7058896d4bc85c3b/full.jpg",scaled:[{width:2400,height:1596,url:"https://a.trellocdn.com/images/backgrounds/fall/a42f50fe10ff082519a499a2e86be1dc/large.jpg"},{width:1024,height:681,url:"https://a.trellocdn.com/images/backgrounds/fall/a999e10749c6db57a5acd9960324ed6f/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/fall/8c8e3c5c5eebeac446c7e19ee36d23ae/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mendhak/4107993637/",name:"mendhak",license:i}},snow:{type:"premium",pack:r.photos,discontinued:!0,fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/snow/d5dd0a98d6b0a7ebcaff02dad1535fab/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/snow/149d6adb0c746612aa21ec3c46455583/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/snow/147471be1b6fa8858c40febf9702795b/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/snow/da5f83eace8c3f4e13f1287cefd07956/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/zachd1_618/5386165480/",name:"Zach Dischner",license:i}},purty_wood_dark:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/7a14a57fef9435b0def0f613d0114334/purty_wood_dark.png",attribution:{url:"http://subtlepatterns.com/purty-wood/",name:"Richard Tabor",license:i}},"subtle-irongrip":{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/c9f15836db29df79c2a0092a6758d81e/subtle-irongrip.png",attribution:{url:"http://subtlepatterns.com/iron-grip/",name:"Tony Kinard",license:i}},"red-sweater":{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/17d3a6bc27bdcd05caeae11f67fa46d6/red-sweater.png",attribution:{url:"http://subtlepatterns.com/wild-oliva/",name:"Badhon Ebrahim",license:i}},hex:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/2e2cb18ce229869faec815b4d8fe2770/hex.png"},wave:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/bb289a4f00f13e8ca52e67afd11c1648/wave.png"},bricks:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/5e21dfb838e99d8a7c540a2b90d36f29/bricks.png"},"purple-blur":{type:"premium",pack:r.patterns,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/3a02eab932195316109bd905d3341323/purple-blur.png"},"orange-blur":{type:"premium",pack:r.patterns,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/07a3436eabfd187ee94ae8c578584d07/orange-blur.png"}}},{}],15:[function(e,t,n){t.exports={enabled:!0,id:"webinars-2016-10-20",icon:"information",dateExpires:"2016-10-20T16:00:00Z",locale:"en-US",message:"Upcoming Webinar: [Roadmaps and Retrospectives](https://trello.com/webinars)."}},{}],16:[function(e,t,n){t.exports={"app.box.com":"55a5d915446f517774210001","appear.in":"55a5d915446f517774210000","dropbox.com":"55a5d915446f517774210002","evernote.com":"55a5d915446f517774210003","github.com":"55a5d916446f517774210004","docs.google.com":"55a5d916446f517774210006","drive.google.com":"55a5d916446f517774210006","hangouts.google.com":"55a5d916446f517774210007","secure.helpscout.net":"55a5d917446f517774210008","force.com":"55a5d917446f517774210009","salesforce.com":"55a5d917446f517774210009","slack.com":"55a5d917446f51777421000a","twitter.com":"55a5d917446f51777421000b","zendesk.com":"56940ede94fd60cf95f7ce6a","join.me":"569411df90e3a6f655f73aaa","getcorrello.com":"568c2b6c7d2758a55ac48c98","fogbugz.com":"569d556febffd8769b0dc2ad","surveymonkey.com":"568c143d95adcd7308cbc3fb","publicate.it":"569d550d062c27feb4e6630c","app.intercom.io":"56cdf5f7071f133a93eb2363","app.screenful.me":"570262ea1100fa611d7e200a","pipedrive.com":"57c72026e3248df11df6621b","gmkr.io":"57dbc7dbc674083383e275a1","moxtra.com":"57e02011fd209122a72e85c3","includer.io":"57e22705114f96fa0aa532b0","cl.ly":"583f81ec5f46b0887c236afc","bitbucket.org":"588a331cc86ffbe08f5d2c67","realtimeboard.com":"5893c2b56bde057070fbc1b7","d.pr":"5894c177310f1e861bf12dc2","gitlab.com":"596d1abf23be1b7ab89cf4c4"}},{}],17:[function(e,t,n){t.exports={GOLD_UPGRADE:"GoldIntro",GOLD_RECOMMENDATION:"GoldEarned"}},{}],18:[function(e,t,n){var r,i,o,s,a,u,c;for(t.exports=r={},c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),o=0,s=c.length;s>o;o++)i=c[o],r[i.toLowerCase().charCodeAt(0)]=i,r[i.toUpperCase().charCodeAt(0)]=i;u={" ":"Space","?":"QuestionMark",",":"Comma",".":"Period","/":"ForwardSlash","<":"AngleLeft",">":"AngleRight",";":"Semicolon"};for(i in u)a=u[i],r[i.charCodeAt(0)]=a},{}],19:[function(e,t,n){var r;t.exports=r={8:"Backspace",9:"Tab",10:"LineFeed",13:"Enter",27:"Escape",46:"Delete",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown"}},{}],20:[function(e,t,n){var r,i,o,s,a,u,c,l,d;r=e(18),i=e(19),t.exports=o={Unknown:"Unknown"};for(d in r)c=r[d],o[c]=c;for(d in i)c=i[d],o[c]=c;for(l="0123456789".split(""),a=0,u=l.length;u>a;a++)s=l[a],o["_"+s]=o[s]},{}],21:[function(e,t,n){var r,i,o;i=e("underscore"),r=e(24),o=i.chain(r).values().max().value(),t.exports=o>Date.now()?"NewPowerUps_"+o.toISOString().substr(0,10):void 0},{}],22:[function(e,t,n){t.exports={calendar:"55a5d917446f517774210011",cardAging:"55a5d917446f517774210012",voting:"55a5d917446f517774210013"}},{}],23:[function(e,t,n){var r,i,o,s,a,u,c=[].slice;r=e(87),i=["additionalStickers","customStickers","additionalBoardBackgrounds","customBoardBackgrounds","largeAttachments","customEmoji","savedSearches"],a=c.call(i).concat(["crown"],["readSecrets"],["threePlugins"]),u=c.call(i).concat(["infinitePlugins"]),s={10:{shortName:"trelloGoldFromBC",name:"Trello Gold from BC",features:u},37:{shortName:"trelloGoldMonthly",name:"Trello Gold",interval:"monthly",price:5,features:a,yearlyEquivalent:38},38:{shortName:"trelloGoldYearly",name:"Trello Gold",interval:"yearly",price:45,features:a}},o={currentProducts:{monthly:"trelloGoldMonthly",yearly:"trelloGoldYearly"},extras:{currentPriceObjectForModel:function(e){var t,n;return t=this.currentProducts.monthly,n=this.currentProducts.yearly,{monthly:{productNumber:this.getProductNumber(t),price:this.getPrice(t),monthlyPrice:this.getPrice(t)},yearly:{productNumber:this.getProductNumber(n),price:this.getPrice(n),monthlyPrice:this.getPrice(n)/12,savePercent:this.getYearlyDiscountPercent(n,t)},billingStrategy:{flatRate:!0}}}}},t.exports=new r(s,o)},{}],24:[function(e,t,n){var r,i;r=e("underscore"),i={"55a5d917446f51777421000d":"2016-08-07","56d5e249a98895a9797bebb9":"2016-08-23","570262ea1100fa611d7e200a":"2016-08-23","56cdf5f7071f133a93eb2363":"2016-08-23","57b47fb862d25a30298459b1":"2016-08-23"},t.exports=r.chain(i).pairs().map(function(e){var t,n;return t=e[0],n=e[1],[t,new Date(Date.parse(n))]}).object().value()},{}],25:[function(e,t,n){var r,i,o,s,a,u,c,l=[].slice;r=e(87),i=["export","logo","observers","removal","activity","deactivated","orgCards","googleApps","orgMembersPage","superAdmins","prefs","inviteOrg","restrictVis","disableExternalMembers"],o=l.call(i).concat(["goldMembers"],["csvExport"],["shortExportHistory"]),s=l.call(o).concat(["tags"],["plugins"]),a=l.call(s).concat(["enterpriseUI"]),c={35:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:25,features:i,hidden:!0,prebill:!1,upgrade:!0,yearlyEquivalent:36},36:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:200,features:i,hidden:!0,upgrade:!0},39:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:50,features:i,hidden:!0,upgrade:!0,yearlyEquivalent:40},40:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:500,features:i,hidden:!0,upgrade:!0},96:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:5,features:o,perUser:!0,upgrade:!0,yearlyEquivalent:97},97:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:45,features:o,perUser:!0,upgrade:!0},98:{shortName:"businessClass3Monthly",name:"Business Class",interval:"monthly",price:10,features:s,perUser:!0,perActiveUser:!0,yearlyEquivalent:99},99:{shortName:"businessClass3Yearly",name:"Business Class",interval:"yearly",price:100,features:s,perUser:!0,perActiveUser:!0},100:{shortName:"enterprise",name:"Enterprise",interval:"yearly",price:0,features:a,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0},101:{shortName:"businessClass2PO",name:"Business Class v2 PO",interval:"yearly",price:0,features:o,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0,upgrade:!0},102:{shortName:"businessClass3PO",name:"Business Class v3 PO",interval:"yearly",price:0,features:s,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0},103:{shortName:"businessClass3x1Monthly",name:"Business Class",interval:"monthly",price:12.5,features:s,perUser:!0,perActiveUser:!0,yearlyEquivalent:104},104:{shortName:"businessClass3x1Yearly",name:"Business Class",interval:"yearly",price:119.99,features:s,perUser:!0,perActiveUser:!0},105:{shortName:"businessClass3x2Monthly",name:"Business Class",interval:"monthly",price:12.5,features:s,perUser:!0,perActiveUser:!1,yearlyEquivalent:106},106:{shortName:"businessClass3x2Yearly",name:"Business Class",interval:"yearly",price:119.99,features:s,perUser:!0,perActiveUser:!1},107:{shortName:"businessClass3x1PO",name:"Business Class v3.1 PO",interval:"yearly",price:0,features:s,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0},108:{shortName:"enterprise1x1TieredPricing",name:"Enterprise v1.1",interval:"yearly",price:0,features:a,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0},109:{shortName:"enterprise1x2SiteLicense",name:"Enterprise v1.2",interval:"yearly",price:0,features:a,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0}},u={globalFeatures:["logo"],currentProducts:{monthly:"businessClass3x2Monthly",yearly:"businessClass3x2Yearly"},extras:{BC1Products:[35,36,39,40],currentPriceObjectForModel:function(e){var t,n;return t=this.currentProducts.monthly,n=this.currentProducts.yearly,{monthly:{productNumber:this.getProductNumber(t),price:this.getPrice(t),totalPrice:e.totalPerUserPrice(t),monthlyPrice:this.getPrice(t),totalMonthlyPrice:e.totalPerUserPrice(t)},yearly:{productNumber:this.getProductNumber(n),price:this.getPrice(n),totalPrice:e.totalPerUserPrice(n),monthlyPrice:this.getPrice(n)/12,totalMonthlyPrice:e.totalPerUserPrice(n)/12,savePercent:this.getYearlyDiscountPercent(n,t)},billingStrategy:e.getBillingStrategy(n)}}}},t.exports=new r(c,u)},{}],26:[function(e,t,n){t.exports={ORG_TYPE_ENTERPRISE:"ORG_TYPE_ENTERPRISE",ORG_TYPE_BUSINESS_CLASS:"ORG_TYPE_BUSINESS_CLASS",ORG_TYPE_FREE:"ORG_TYPE_FREE"}},{}],27:[function(e,t,n){var r,i,o,s;r={"":"Q","":"W","":"E","":"R","":"T","":"Y","":"U","":"I","":"O","":"P","":"A","":"S","":"D","":"F","":"G","":"H","":"J","":"K","":"L","":";","":"Z","":"X","":"C","":"V","":"B","":"N","":"M","":"Comma","":"Period"},o={};for(i in r)s=r[i],o[i.charCodeAt(0)]=s;t.exports=o},{}],28:[function(e,t,n){t.exports=10},{}],29:[function(e,t,n){t.exports=80},{}],30:[function(e,t,n){t.exports={standard:{premium:!1,stickers:[{image:"check",url:"https://a.trellocdn.com/images/stickers/90e26477b42f93cf816eecc39c9a7067/check.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/90e26477b42f93cf816eecc39c9a7067/check.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/5168d92437a5fc166632f0006879d5ea/check%402x.png"}]},{image:"heart",url:"https://a.trellocdn.com/images/stickers/cc9d955a9ae38ff99b641f8e0ab719ed/heart.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/cc9d955a9ae38ff99b641f8e0ab719ed/heart.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/51a19b35bc5092e9e2761b479ce6105d/heart%402x.png"}]},{image:"warning",url:"https://a.trellocdn.com/images/stickers/f8832dabce0aabd9a3b550c6f571bbab/warning.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/f8832dabce0aabd9a3b550c6f571bbab/warning.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/e0197b2fb0cbd4a389d4ab5de9e1193a/warning%402x.png"}]},{image:"clock",url:"https://a.trellocdn.com/images/stickers/5bd7338f370c3fd7238d40410f200736/clock.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/5bd7338f370c3fd7238d40410f200736/clock.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/b678287abafc2d8c99f3dfa9b8e7a30c/clock%402x.png"}]},{image:"smile",url:"https://a.trellocdn.com/images/stickers/90a8856b7465d57b1ac30925181198b4/smile.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/90a8856b7465d57b1ac30925181198b4/smile.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/fa6754c4dd9625bdce765781c5c69635/smile%402x.png"}]},{image:"laugh",url:"https://a.trellocdn.com/images/stickers/31ce444242a6f930b52180a2a0d27813/laugh.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/31ce444242a6f930b52180a2a0d27813/laugh.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6a4570e57d1e3df870143fc016ed2f7d/laugh%402x.png"}]},{image:"huh",url:"https://a.trellocdn.com/images/stickers/405fd9e6997ac365e4da29d6e550cd3e/huh.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/405fd9e6997ac365e4da29d6e550cd3e/huh.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/4a513d5705f0f89b365f27ec05784147/huh%402x.png"}]},{image:"frown",url:"https://a.trellocdn.com/images/stickers/49afc75f79a5719a3871b3640a4d1e70/frown.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/49afc75f79a5719a3871b3640a4d1e70/frown.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/c414ef32894f9c9873142fc964ec4e08/frown%402x.png"}]},{image:"thumbsup",url:"https://a.trellocdn.com/images/stickers/ebab8d33a9e50bfb92724e51254be4fa/thumbsup.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ebab8d33a9e50bfb92724e51254be4fa/thumbsup.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6f6cea3566b6fbbc0067561b53f4048a/thumbsup%402x.png"}]},{image:"thumbsdown",url:"https://a.trellocdn.com/images/stickers/8accff79fb0229cb8940be8c35aa1838/thumbsdown.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/8accff79fb0229cb8940be8c35aa1838/thumbsdown.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/79d155c5163ee1a67509b789f98a858b/thumbsdown%402x.png"}]},{image:"star",url:"https://a.trellocdn.com/images/stickers/4c68ea50e4ffeeb97df52f7849f00845/star.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/4c68ea50e4ffeeb97df52f7849f00845/star.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/27460fa90f9753396db36bf60815e93a/star%402x.png"}]},{image:"rocketship",url:"https://a.trellocdn.com/images/stickers/484099c2f7dfcfe5fef9c4245fa2802a/rocketship.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/484099c2f7dfcfe5fef9c4245fa2802a/rocketship.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/5bd888e40e6e27bd733d37015857b218/rocketship%402x.png"}]}]},taco:{premium:!0,stickers:[{image:"taco-love",url:"https://a.trellocdn.com/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/06ddf78e10598774b89e3264d8e414da/taco-love%402x.png"}]},{image:"taco-confused",url:"https://a.trellocdn.com/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/06668f130b632bf4ba0dc7f492628e00/taco-confused%402x.png"}]},{image:"taco-cool",url:"https://a.trellocdn.com/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/8f4ac7820629d5aac2e2faca5b013e4c/taco-cool%402x.png"}]},{image:"taco-angry",url:"https://a.trellocdn.com/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/88141aecd4c8fbdc3ff11ef292b4526f/taco-angry%402x.png"}]},{image:"taco-celebrate",url:"https://a.trellocdn.com/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/905a89b9fb1f867747130360e6cbb4d4/taco-celebrate%402x.png"}]},{image:"taco-robot",url:"https://a.trellocdn.com/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png"
},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/e1ac5a98088053a8b1ae90cd8f3f056e/taco-robot%402x.png"}]},{image:"taco-alert",url:"https://a.trellocdn.com/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/60cf2c2b89c387f8c1ed92f301492b28/taco-alert%402x.png"}]},{image:"taco-active",url:"https://a.trellocdn.com/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/afe6f31288619ede4f82d516cad6a11e/taco-active%402x.png"}]},{image:"taco-money",url:"https://a.trellocdn.com/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/f0130dd81ed48f6e4626cbdc233b2fda/taco-money%402x.png"}]},{image:"taco-reading",url:"https://a.trellocdn.com/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/0c3110a4622a680fd4a9b63de14521da/taco-reading%402x.png"}]},{image:"taco-trophy",url:"https://a.trellocdn.com/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/9143546ce5c8a3e43736be79803ead39/taco-trophy%402x.png"}]},{image:"taco-sleeping",url:"https://a.trellocdn.com/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/9a51d634e8521dc0e19c09db4df95d8e/taco-sleeping%402x.png"}]},{image:"taco-pixel",url:"https://a.trellocdn.com/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/3751a48869a42911093b6eae9d0a7f8c/taco-pixel%402x.png"}]},{image:"taco-proto",url:"https://a.trellocdn.com/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/51def85cdcf3c1a58cb1ab2ac3749251/taco-proto%402x.png"}]},{image:"taco-embarrassed",url:"https://a.trellocdn.com/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/02663f87e33a2c79828098d1f2d9a086/taco-embarrassed%402x.png"}]},{image:"taco-clean",url:"https://a.trellocdn.com/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/7c593a77fe481b61a2cad4b74b2f8c1c/taco-clean%402x.png"}]}]},pete:{premium:!0,stickers:[{image:"pete-happy",url:"https://a.trellocdn.com/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/0663bc183a0cf0d039498cd8c5db8043/pete-happy%402x.png"}]},{image:"pete-love",url:"https://a.trellocdn.com/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6e461f2c1917d10063fb169a33bb1191/pete-love%402x.png"}]},{image:"pete-broken",url:"https://a.trellocdn.com/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6d84909328bf960bdfcab760e46c886f/pete-broken%402x.png"}]},{image:"pete-alert",url:"https://a.trellocdn.com/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/3453c1a26ddd1187e56431940c7aedfc/pete-alert%402x.png"}]},{image:"pete-talk",url:"https://a.trellocdn.com/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/217a5d2b04a6dea23726a7949dae9ac7/pete-talk%402x.png"}]},{image:"pete-vacation",url:"https://a.trellocdn.com/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/060295310e437200bf334ff7322eede1/pete-vacation%402x.png"}]},{image:"pete-confused",url:"https://a.trellocdn.com/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/7ff61659ad2cd4837aacd999aedcd233/pete-confused%402x.png"}]},{image:"pete-shipped",url:"https://a.trellocdn.com/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/0d9ff936d513aae5a67c8f9653a5c49e/pete-shipped%402x.png"}]},{image:"pete-busy",url:"https://a.trellocdn.com/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/35503951628d67da2c8aaabd49aaf769/pete-busy%402x.png"}]},{image:"pete-completed",url:"https://a.trellocdn.com/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/3197b9305f52b722df47abdb84c063f8/pete-completed%402x.png"}]},{image:"pete-space",url:"https://a.trellocdn.com/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/aa9cb8354739fb355a4abd1c977d975a/pete-space%402x.png"}]},{image:"pete-sketch",url:"https://a.trellocdn.com/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/3808b148cca5b1ed3da001b7c13d5110/pete-sketch%402x.png"}]},{image:"pete-ghost",url:"https://a.trellocdn.com/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/4a28ad313694864c5a661b964a9510ff/pete-ghost%402x.png"}]},{image:"pete-award",url:"https://a.trellocdn.com/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/43dd35d5e48a876a50fc6c63f53f005e/pete-award%402x.png"}]},{image:"pete-music",url:"https://a.trellocdn.com/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/df6a7a7b952e8826916f00e69b503af1/pete-music%402x.png"}]}]}}},{}],31:[function(e,t,n){t.exports=[{code:"cs",name:"etina"},{code:"de",name:"Deutsch"},{code:"en-AU",name:"English (AU)"},{code:"en-GB",name:"English (UK)"},{code:"en-US",name:"English (US)"},{code:"es",name:"Espaol"},{code:"fr",name:"Franais"},{code:"fr-CA",name:"Franais (Canada)"},{code:"it",name:"Italiano"},{code:"hu",name:"Magyar"},{code:"nl",name:"Nederlands"},{code:"nb",name:"Norsk (bokml)"},{code:"pl",name:"Polski"},{code:"pt-BR",name:"Portugus (Brasil)"},{code:"fi",name:"Suomi"},{code:"sv",name:"Svenska"},{code:"vi",name:"Ting Vit"},{code:"tr",name:"Trke"},{code:"ru",name:""},{code:"uk",name:""},{code:"th",name:""},{code:"zh-Hans",name:" ()"},{code:"zh-Hant",name:" ()"},{code:"ja",name:""}]},{}],32:[function(e,t,n){t.exports=[{id:"guide-1",bgcolor:"#FAF3C0",imgUrl1x:"https://a.trellocdn.com/images/tips/3a63a6244ef2e7ade4d645ca0830dc63/guide-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/eab001f563b4e3d8a5d1199cce807e59/guide-1%402x.png",url:"https://trello.com/guide?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=guide"},{id:"inspiration-1",bgcolor:"#298FCA",imgUrl1x:"https://a.trellocdn.com/images/tips/e1565bd541d2b56ec792b202bd420c54/inspiration-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/537647bd716153a10a3254e6912b623b/inspiration-1%402x.png",langs:["en-US","en-GB","en-AU","fr","pt-BR"],url:"https://trello.com/inspiration?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=inspiration"},{id:"power-ups-1",bgcolor:"#42548E",imgUrl1x:"https://a.trellocdn.com/images/tips/d7178bb1e5dc48fb4fe66ea30e772bed/power-ups-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/283ff0f7ee60508a0ea9267b27351402/power-ups-1%402x.png",url:"https://trello.com/power-ups?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=power-ups"},{id:"webinars-1",bgcolor:"#42548E",imgUrl1x:"https://a.trellocdn.com/images/tips/7e1a1e13b5deffa70d0e8ec4fda324cc/webinars-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/f1f39fe1384c4439d9326e23b378a492/webinars-1%402x.png",url:"https://trello.com/webinars?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=webinar"}]},{}],33:[function(e,n,r){var i,o,s,a;i=e("jquery"),o=void 0,t(function(){return o=e(203)}),s=void 0,t(function(){return s=e(37)}),a=e("underscore"),n.exports=new(function(){function e(){this.updateToken()}var t,n,r,u;return t="notLoggedIn",n=null,r=null,u="token"+window.location.port,e.prototype.isLoggedIn=function(){return n!==t},e.prototype.myId=function(){return n},e.prototype.myUsername=function(){var e;return null!=(e=this.me())?e.get("username"):void 0},e.prototype.myToken=function(){return r},e.prototype.me=function(){var e;return e=s.get("Member",n),null!=e||this.isLoggedIn()||(e=new o({id:t,notLoggedIn:!0},{modelCache:s}),s.add(e)),e},e.prototype.isMe=function(e){return(null!=e?e.id:void 0)?this.isMe(e.id):e===n},e.prototype.confirmed=function(){return this.me().get("confirmed")},e.prototype.canLogIn=function(){var e,t;return!a.isEmpty(null!=(e=null!=(t=this.me())?t.get("loginTypes"):void 0)?e:[])},e.prototype.updateToken=function(){var e;return e=i.cookie(u)||"",r!==e&&(r=e,n=r.split("/")[0]||t),n},e.prototype.logoutPost=function(){var e;return e=i("<input>").attr("name","dsc").val(i.cookie("dsc")),i("<form>").attr({method:"post",action:"/logout"}).append(e).css({display:"none"}).appendTo("body").submit()},e.prototype.removeToken=function(){return i.cookie(u,null,{path:"/"}),window.location.reload()},e}())},{}],34:[function(e,t,n){var r;r=e(129),t.exports=window.IdCache=new(function(){function e(){this._shortLinkToId={Card:{},Board:{}},this._idCardToIdBoard={}}return e.prototype.getId=function(e,t){if(r.checkId(t))return t;if(r.isShortLink(t))return this._shortLinkToId[e][t];throw new Error("Not a shortLink or id: "+t)},e.prototype.setId=function(e,t,n){if(!r.checkId(n))throw new Error("Not an id: "+n);if(!r.isShortLink(t))throw new Error("Not a shortLink: "+t);return this._shortLinkToId[e][t]=n},e.prototype.setCardId=function(e,t){return this.setId("Card",e,t)},e.prototype.setBoardId=function(e,t){return this.setId("Board",e,t)},e.prototype.getCardId=function(e){return this.getId("Card",e)},e.prototype.getBoardId=function(e){return this.getId("Board",e)},e}())},{}],35:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y=[].slice;r=e("jquery"),o=e(81),s=e(34),a=e(38),u=e("bluebird"),c=e(104),l=e("trello-markdown"),d=e(129),p=e("underscore"),g=e(519),v=e(141),m=e(101),f=e(259),b=e("xtend"),i=e(216),h=function(e,t){var n,r,i,o,s;if(null==t)return null;o=f(t),i=[t];for(n in e)if(r=e[n],p.isString(r)){if(r!==o[n])return null}else{if(!p.isRegExp(r))throw Error("invalid specification");if(null==(s=r.exec(o[n])))return null;i=i.concat(s.slice(1))}return i},t.exports=new(function(){function e(){}return e.prototype._knownUrls=[{key:"trello board",match:{protocol:location.protocol,host:location.host,pathname:/^\/b\/([a-zA-Z0-9]{8})(?:$|\/.*)/},previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://a.trellocdn.com/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",getText:function(e,t){var n,r,o,u;return n=e[0],u=e[1],null!=(r=null!=(o=t.get("Board",s.getBoardId(u)))?o.get("name"):void 0)?r:a.loadBoardName(u).catch(i.NotFound,i.Unauthorized,function(){return n})}},{key:"trello action",match:{protocol:location.protocol,host:location.host,pathname:/^\/c\/([a-zA-Z0-9]{8})(?:$|\/.*)/,hash:/^\#(?:comment|action)-([0-9a-f]{24})$/},previewClass:"attachment-thumbnail-preview-trello-logo",getShared:function(e,t){var n,r,i;return n=e[0],i=e[1],r=e[2],u.try(function(){var e;return null!=(e=t.get("Action",r))?e:a.loadAction(r)}).then(function(e){return null!=e?{action:e,memberCreator:t.get("Member",e.get("idMemberCreator"))}:{}})},getIcon:function(e,t,n){var r,i,o,s,a;return i=e[0],a=e[1],o=e[2],s=n.memberCreator,null!=(r=null!=s?s.get("avatarHash"):void 0)?[window.avatarDomain,r,"30.png"].join("/"):"https://a.trellocdn.com/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png"},getText:function(e,t,n){var r,i,s,a,u,l;return i=e[0],u=e[1],s=e[2],r=n.action,null==r?i:(l=p.chain(new o("action").getEntities(r.get("display"),null!=(a=r.get("data").card)?a.id:void 0)).map(function(e){var t,n;return n=e.type,t=e.text,"member"===n&&r.isCommentLike()?t+":":"comment"===n?c.comments.textInline(t):t}).join("").value(),v(l,64))}},{key:"trello card",match:{protocol:location.protocol,host:location.host,pathname:/^\/c\/([a-zA-Z0-9]{8})(?:$|\/.*)/},previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://a.trellocdn.com/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",getText:function(e,t){var n,r,o,u;return n=e[0],u=e[1],null!=(r=null!=(o=t.get("Card",s.getCardId(u)))?o.get("name"):void 0)?r:a.loadCardName(u).catch(i.NotFound,i.Unauthorized,function(){return n})}},{key:"fogbugz case",match:{protocol:/^https?:$/,host:/^([^\.]+)\.fogbugz\.com$/,pathname:/^\/f\/cases\/([\d]+)/},previewClass:"attachment-thumbnail-preview-fogbugz-logo",icon:"https://a.trellocdn.com/images/services/a1385c9ce999f8389ec7dc43c1b24b2c/fogbugz.png",getArgs:function(e){var t,n,r;return t=e[0],r=e[1],n=e[2],{caseNumber:n}}},{key:"kiln commit",match:{protocol:/^https?:$/,host:/^([^\.]+)\.(?:fogbugz\.com\/kiln|kilnhg\.com)$/,pathname:/^\/Code\/([^\/]+)\/([^\/]+)\/([^\/]+)\/History\/([^\/]+)/},previewClass:"attachment-thumbnail-preview-kiln-logo",icon:"https://a.trellocdn.com/images/services/6c1d65d72873b01d740adfbb9de22234/kiln.png",getText:function(e){var t,n,r,i,o,s;return t=e[0],s=e[1],i=e[2],o=e[3],n=e[4],r=e[5],"Group"===o?i+"  "+n+": "+r:i+"  "+o+"  "+n+": "+r},dataUrl:function(e){return e.replace(/\/Code\//,"/trello/Code/")},_processJSON:function(e,t){var n,r,i,o,s;if(null!=t.reviews)for(o=t.reviews,n=0,i=o.length;i>n;n++)s=o[n],s.status=m(["known services","kiln commit","status",s.sStatus]),s.url=e.replace(/\/Code\/.*$/,"/Review/"+s.sReview);return t.sAuthor&&(t.author=t.sAuthor.replace(/\s<.*$/,"")),t.hash&&(t.shortHash=t.hash.substr(0,6)),t.sDescription&&(r=new l({restrict:{block:["paragraph","newline"],inline:["break","email","emoji","url"]}}),t.shortCommitMessage=t.sDescription.split("\n")[0],t.commitMessageHtml=r.format(t.sDescription).output),t.url=e,t},previewHtml:function(e,t){return g.fill("kiln_changeset_preview",this._processJSON(e,t))},previewHtmlError:function(e,t){var n;return/unable to access/i.test(t)?(e=null!=(n=/^https?:\/\/[-a-z0-9\.]+(\/kiln)?/.exec(e))?n[0]:void 0,{login:m("known services.kiln commit.error")}):null},thumbnailHtml:function(e,t,n){return g.fill("kiln_changeset_thumbnail",b(this._processJSON(e,t),n))}},{key:"github commit",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/commit\/([^\/]{7,40})$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://a.trellocdn.com/images/services/8cab38550d1f23032facde191031d024/github.png",getText:function(e){var t,n,r,i;return t=e[0],i=e[1],r=e[2],n=e[3],i+"/"+r+": "+n.substr(0,7)}},{key:"github issue",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/issues\/(\d+)$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://a.trellocdn.com/images/services/8cab38550d1f23032facde191031d024/github.png",getArgs:function(e){var t,n,r,i;return t=e[0],i=e[1],r=e[2],n=e[3],{user:i,repo:r,number:n}}},{name:"GitHub Pull Request",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/pull\/(\d+)$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://a.trellocdn.com/images/services/8cab38550d1f23032facde191031d024/github.png",getArgs:function(e){var t,n,r,i;return t=e[0],i=e[1],r=e[2],n=e[3],{user:i,repo:r,number:n}},getText:function(e){var t,n,r,i;return t=e[0],i=e[1],r=e[2],n=e[3],i+"/"+r+": Pull Request "+n}}],e.prototype.interpret=function(e,t){var n,r,i,o,s;for(s=this._knownUrls,r=0,i=s.length;i>r;r++)if(n=s[r],null!=(o=h(n.match,e)))return function(e){var n,r,i,s,a,c,l,d;return c=e.key,l=e.name,s=e.getText,n=e.getArgs,d=e.previewClass,a=e.icon,i=e.getShared,r=e.getIcon,u.resolve("function"==typeof i?i(o,t):void 0).then(function(e){var i,p,h;return h=null!=s?s(o,t,e):(i=null!=(p="function"==typeof n?n(o,t):void 0)?p:{},m(["known services",c,"text"],i)),null!=r&&(a=r(o,t,e)),null==l&&(l=m(["known services",c,"name"])),u.props({name:l,previewClass:d,icon:a,text:h})})}(n);return u.resolve()},e.prototype._runHandler=function(){var e,t,n,i,o,s,a,u,c,l,d;for(u=arguments[0],d=arguments[1],e=4<=arguments.length?y.call(arguments,2,n=arguments.length-1):(n=2,[]),c=arguments[n++],l=this._knownUrls,i=0,s=l.length;s>i;i++)if(o=l[i],null!=h(o.match,d)&&null!=o[u])return a=o.match,t=o.dataUrl,void r.ajax({url:t(d),xhrFields:{withCredentials:!0},headers:{"X-Trello":"Is it me you're looking for?"},success:function(t){return c(null,o[u].apply(o,[d,t].concat(y.call(e))))},error:function(t,n,r){var i,s;return i=u+"Error",s="function"==typeof o[i]?o[i].apply(o,[d,r].concat(y.call(e))):void 0,c(null!=s?s:"could not load")}});c()},e.prototype.previewHtml=function(e,t){return this._runHandler("previewHtml",e,t)},e.prototype.thumbnailHtml=function(e,t,n){return this._runHandler("thumbnailHtml",e,t,n)},e}())},{}],36:[function(e,t,n){var r;r=e(33),t.exports={locales:[window.locale,"en-GB"]}},{}],37:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B=[].slice,O=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e(33),o=e(234),r=e(152),u=e(162),c=e(164),s=e(161),a=e(159),l=e(193),d=e(83),p=e(200),h=e(201),m=e(203),g=e(205),v=e(207),b=e(209),y=e(208),w=e("bluebird"),M=e(226),_=e(129),k=e("underscore"),S=e(45),T=e(106),j=e(238),C=e(76),x={Action:{type:r,test:j.eq("actions")},Card:{type:u,test:j.eq("cards")},Checklist:{type:c,test:j.eq("checklists")},Board:{type:s,test:function(e){return/^board($|s)/.test(e)}},BoardPlugin:{type:a,test:j.eq("boardPlugins")},Enterprise:{type:l,test:function(e){return/^enterprise/.test(e)}},Label:{type:p,test:j.eq("labels")},List:{type:h,test:function(e){return/^lists?/.test(e)}},Member:{type:m,test:function(e){return/^member/.test(e)&&"memberships"!==e&&"memberType"!==e&&"membershipCounts"!==e}},Notification:{type:g,test:j.eq("notifications")},Organization:{type:v,test:function(e){return/^organization/.test(e)}},Plugin:{type:b,test:function(e){return/^plugins?$/.test(e)}},PluginData:{type:y,test:j.eq("pluginData")}},T(d,f=function(){function e(){var e;this._cache={},this._locked=[],this._lockIndex=0,this._deltaQueue=[],this.uniqueId=k.uniqueId("mc");for(e in x)this._cache[e]={}}return e.prototype.get=function(e,t){var n;return k.isArray(t)?t.map(j(this,"get",e)):_.isShortLink(t)?this.findOne(e,"shortLink",t):(k.isString(e)||(e=e.prototype.typeName),null!=(n=this._cache[e])?n[t]:void 0)},e.prototype.find=function(){var e,t,n,r,i;return n=arguments[0],e=2<=arguments.length?B.call(arguments,1):[],1===e.length?(r=e[0],k.filter(this.all(n),r)):(t=e[0],i=e[1],this.find(n,function(e){return e.get(t)===i}))},e.prototype.findOne=function(){var e;return e=1<=arguments.length?B.call(arguments,0):[],k.first(this.find.apply(this,e))},e.prototype.waitFor=function(e,t,n){var r;return r=this.get(e,t),null!=r?n(null,r):this.once("add:"+e+":"+t,function(r){return function(){return r.waitFor(e,t,n)}}(this))},e.prototype.all=function(e){return k.isString(e)||(e=e.prototype.typeName),k.values(this._cache[e])},e.prototype.add=function(e){var t;e.id&&null!=this.get(e.typeName,e.id)||null!=x[e.typeName]&&(t=e.id?e.id:e.cid,this._cache[e.typeName][t]=e,this.stopListening(e),this.listenTo(e,"change",this.onModelChange),this.listenTo(e,"destroy",this.remove),this.waitForId(e,function(t){return function(n){return delete t._cache[e.typeName][e.cid],t._cache[e.typeName][n]=e,t.trigger("add:"+e.typeName+":"+n,e),"function"==typeof e.triggerCacheEvents?e.triggerCacheEvents(t,"add",e):void 0}}(this)),this.trigger("add:"+e.typeName,e))},e.prototype.onModelChange=function(e){var t,n,r;"function"==typeof e.triggerCacheEvents&&e.triggerCacheEvents(this,"change",e),this.trigger("change:"+e.typeName,e),n=e.changedAttributes();for(t in n)r=n[t],this.trigger("change:"+e.typeName+":"+t,e)},e.prototype.remove=function(e){var t,n,r,i;if(null!=e){if(e instanceof u)for(i=e.actionList.models,n=0,r=i.length;r>n;n++)t=i[n],this.remove(t);return delete this._cache[e.typeName][e.id],delete this._cache[e.typeName][e.cid],this.trigger("remove:"+e.typeName,e),null!=e.id&&this.trigger("remove:"+e.typeName+":"+e.id,e),"function"==typeof e.triggerCacheEvents&&e.triggerCacheEvents(this,"remove",e),this.stopListening(e),e.trigger("destroy"),e.destructor()}},e.prototype._update=function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f;if(null==n&&(n={}),k.isArray(t))return t.map(function(t){return function(r){return t._update(e,r,n)}}(this));if(t.deleted)return void this.remove(this.get(e,t.id));d=k.clone(t),u=function(){var e;e=[];for(a in n)s=n[a],a in d&&(i=d[a],delete d[a],e.push(j(s,i)));return e}();for(r in x){l=x[r],h=l.type,p=l.test;for(a in t)f=t[a],p(a)&&(this._update(r,f,n),delete d[a])}return o=k.isString(e)?this.get(e,t.id):e,null!=o?(this.unmarkModel(o),o.set(d),u.forEach(function(e){return e(o)}),o):(m=x[e])?(c=new m.type(d,{modelCache:this}),u.forEach(function(e){return e(c)}),c):t},e.prototype.lock=function(e){var t;return t=this._lockIndex++,S("MC",e+" took lock "+t),this._locked.push(t),t},e.prototype.locked=function(){return!k.isEmpty(this._locked)},e.prototype.unlock=function(e){return O.call(this._locked,e)>=0?(S("MC","gave lock "+e),this._locked=k.without(this._locked,e),this.locked()||this.processDeltas(),!0):!1},e.prototype.getLock=function(){return w.resolve(this.lock()).disposer(function(e){return function(t){return e.unlock(t)}}(this))},e.prototype.enqueueDelta=function(e,t,n,r){null==n&&(n={}),null==r&&(r=function(){}),k.isFunction(n)&&(r=n,n={}),S("MC","got an update for "+(k.isString(e)?e:e.typeName)),this.locked()?this._deltaQueue.push({modelOrType:e,delta:t,mappingRules:n,next:r}):r(null,this._update(e,t,n))},e.prototype.processDeltas=function(){var e,t,n,r,i,o,s,a,u,c,l,d,p;for(u=this._deltaQueue,this._deltaQueue=[],p=function(e){return!k.isString(e)&&null==e.id},S("MC","Running "+u.length+" updates"),t=0,r=u.length;r>t;t++)c=u[t],s=c.modelOrType,e=c.delta,o=c.mappingRules,a=c.next,p(s)&&a(null,this._update(s,e,o));for(d=[],n=0,i=u.length;i>n;n++)l=u[n],s=l.modelOrType,e=l.delta,o=l.mappingRules,a=l.next,p(s)||d.push(a(null,this._update(s,e,o)));return d},e.prototype.markModel=function(e,t){return e._marked=t},e.prototype.unmarkModel=function(e){return delete e._marked},e.prototype.isMarked=function(e,t){return e._marked===t},e.prototype.forEachModel=function(e){var t,n,r,i;for(i in this._cache){r=this._cache[i];for(t in r)n=r[t],e(n)}},e.prototype.mark=function(){var e;return e=k.uniqueId("mark"),this.forEachModel(function(t){return function(n){return t.markModel(n,e)}}(this)),e},e.prototype.sweep=function(e){this.forEachModel(function(t){return function(n){return t.isMarked(n,e)?t.remove(n):void 0}}(this))},e}()),k.extend(f.prototype,o.Events),t.exports=window.ModelCache=new f},{}],38:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N,V=[].slice;r=e("jquery"),i=e(152),s=e(161),a=e(162),u=e(193),c=e(34),l=e(201),d=e(203),p=e(37),m=e(205),f=e(207),v=e(209),g=e(222),b=e("bluebird"),L=e(226),w=e(115),A=e(52),_=e(129),k=e("underscore"),B=e("moment"),O=e(132),N=e("xtend"),T=e(238),O=e(132),j=e(76),o=e(216),S=function(e,t){var n,r;return r=e.query,n=e.mappingRules,{query:N(r,t),mappingRules:n}},P={},y=5,E=function(e){var t;return t=P,b.fromNode(function(n){return t=QuickLoad.load(e,n)}).catch(function(e){var t,n;return n=e[0],t=e[1],b.reject(o.fromResponse(n,t))}).tap(function(){return j(t!==P,"Promises resolved synchronously; didn't get preload information from QuickLoad")}).spread(function(e,n){return[e,n,t]})},M=function(e){var t;null!=e&&(t=Date.now()-e.start,A("quickload use",e.url,{int_key_1:"time saved",int_val_1:t}))},D=function(e){var t;null!=(t=e.getResponseHeader("X-Server-Time"))&&w.updateServerTime(parseInt(t,10))},I=function(e){return function(t){return b.try(function(){var n;return null!=(n=h.getUpToDateBoard(t))?n:e.call(h,t)})}},x={},C={},t.exports=window.ModelLoader=h={_history:[],_replaying:!1,_loadApiData:function(){var e,t,n,r,i,o,s,a,u,c,l,d;return s=arguments[0],t=arguments[1],u=arguments[2],e=4<=arguments.length?V.call(arguments,3):[],a=e[0],o=e[1],r=e[2],c=u.query,i=null!=(l=u.mappingRules)?l:{},k.isString(s)||(s=s.prototype.typeName),null==a&&(a=_.pluralize(s)+"/"+t),n=_.invitationTokens().join(","),k.isEmpty(n)||(c=k.extend({},c,{invitationTokens:n})),d=QuickLoad.makeUrl("/1/"+a,c),E(d).spread(function(e,t,n){return D(t),M(n),[e,t]}).tap(function(){return r?void 0:new b(function(e){return h.waitFor("headerData",e)})}).spread(function(e,t){return O(p,"enqueueDelta",s,e,i).then(function(e){var n;return o?(n=window.JSON.parse(t.getResponseHeader(o)),[e,n]):e})})},getUpToDateBoard:function(e){var t,n,r;return this.isReplaying()?null:(n=c.getBoardId(e),null==n?null:(t=p.get("Board",n),null==t?null:(r=L.getIxLastUpdate(t.id),null!=r?t:null)))},isReplaying:function(){return this._replaying},replay:function(){var e;return this._replaying=!0,e=p.mark(),b.map(this._history,function(e){return function(t){var n,r,i;return i=t.owner,r=t.loadName,n=t.args,e[r].apply(e,n)}}(this),{concurrency:y}).then(function(){return p.sweep(e)}).finally(function(e){return function(){return e._replaying=!1}}(this)).return()},record:function(){var e,t,n;if(n=arguments[0],t=arguments[1],e=3<=arguments.length?V.call(arguments,2):[],null!=n)return this._history.push({owner:n,loadName:t,args:e});throw Error("Unclaimed "+t)},for:function(){var e,t,n;return n=arguments[0],t=arguments[1],e=3<=arguments.length?V.call(arguments,2):[],this.record.apply(this,[n,t].concat(V.call(e))),this[t].apply(this,e)},release:function(e){this._history=k.reject(this._history,function(t){return t.owner===e})},loadHeaderData:function(){return this._loadApiData(d,"me",g.memberHeader,void 0,void 0,!0).then(function(e){return["Member",e,g.memberHeader.mappingRules]})},loadBoardsMenuData:function(){return this._loadApiData(d,"me",g.boardsMenuMinimal).then(function(e){return["Member",e,g.boardsMenuMinimal.mappingRules]})},loadBoardData:function(e,t){return this._loadApiData(s,e,t)},loadCardData:function(){var e,t,n,r;return e=2<=arguments.length?V.call(arguments,0,t=arguments.length-1):(t=0,[]),r=arguments[t++],n=e[0],null!=n?this._loadApiData(a,r,g.card,"boards/"+n+"/cards/"+r):this._loadApiData(a,r,g.card)},loadCardName:function(e){return this._loadApiData(a,e,{query:{fields:"name"}}).call("get","name")},loadCardId:function(e,t){return this._loadApiData(a,t,g.idCard,"boards/"+e+"/cards/"+t).get("id")},loadCardDetails:function(e,t){return this._loadApiData(a,e,S(g.cardDetails,{actions_limit:t}),"cards/"+e)},loadCardHideDetails:function(e,t){return this._loadApiData(a,e,S(g.cardDetails,{actions:"commentCard,copyCommentCard,createCard,copyCard",actions_limit:t}),"cards/"+e)},loadCardVoters:function(e){return this._loadApiData(a,e,g.cardVoters,"cards/"+e)},loadCardCopyData:function(e,t){return this._loadApiData(a,t,g.cardCopy,"boards/"+e+"/cards/"+t)},loadCardList:function(e){return this._loadApiData(l,e,g.cardList,"cards/"+e+"/list")},loadNotification:function(e){return this._loadApiData(m,e,{query:{fields:"all"}})},loadNotificationData:function(e){return this._loadApiData(d,e,g.memberNotifications)},loadMoreNotificationData:function(e,t){var n,r;return r={filter:"all",limit:10,display:!0,page:t},n="members/"+e+"/notifications",this._loadApiData(m,null,{query:r},n)},loadMemberBoardsData:function(e){return this._loadApiData(d,e,g.memberBoards)},loadMemberCardsData:function(e){return this._loadApiData(d,e,g.memberCards)},loadMemberCards:function(e,t){var n;return n={filter:"visible",stickers:!0,attachments:!0,members:!0},t&&(n.modifiedSince=t),this._loadApiData(a,null,{query:n},"members/"+e+"/cards")},loadMemberEmail:function(e){return this._loadApiData(d,e,{query:{fields:"email",invitationTokens:_.invitationTokens().join(",")}})},loadOrganizationMemberGhost:function(e,t){var n,r,i;return n=null!=(i=_.inviteTokenFor(e))?i.split("-")[0]:void 0,null==n?b.resolve({}):(r={fields:g.memberFields,invitationTokens:_.invitationTokens().join(",")},this._loadApiData(d,n,{query:r}).catch(o,function(){return{}}))},loadMyBoardsUnreadData:function(){return this._loadApiData(d,"me",g.memberUnreadBoards)},loadMoreActionData:function(){var e,t,n,r,o,s,a,u;return s=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3],e=5<=arguments.length?V.call(arguments,4):[],n=e[0],t=e[1],u={filter:"all",limit:o,page:a,display:!0},null!=n&&(u.idModels=n.join(",")),null!=t&&(u.filter=t),this._loadApiData(i,r,{query:u},s+"s/"+r+"/actions")},loadClosedCards:function(e,t){var n,r,i;return r=t.limit,n=t.before,i={stickers:!0,attachments:!0,pluginData:!0},null!=r&&(i.limit=r),null!=n&&(i.before=n),this._loadApiData(a,e,{query:i},"boards/"+e+"/cards/closed")},loadClosedBoards:function(){return this._loadApiData(s,null,{query:{filter:"closed"}},"members/me/boards")},loadArchivedLists:function(e){return this._loadApiData(s,e,g.archivedLists)},loadMemberPaidAccount:function(e){return this._loadApiData(d,e,g.memberPaidAccount)},loadMemberAccountData:function(e){return this._loadApiData(d,e,g.memberAccount)},loadMemberLogins:function(e){return this._loadApiData(d,e,{query:{fields:"email",logins:!0}})},loadMemberProfileData:function(e){var t,n;return n=g.memberProfile,t=g.memberProfile_daysBack,n.action_since=B().subtract(t,"days").toString(),this._loadApiData(d,e,g.memberProfile)},loadMemberCustomBackgrounds:function(e){return this._loadApiData(d,e,{query:{fields:"",boardBackgrounds:"custom"}})},loadMemberCustomStickers:function(e){return this._loadApiData(d,e,{query:{fields:"",customStickers:"all"}})},loadMemberCustomEmoji:function(e){return this._loadApiData(d,e,{query:{fields:"",customEmoji:"all"}})},_loadOrganizationPayload:function(e,t){return this._loadApiData(f,t,e)},loadOrganizationData:function(e){return this._loadOrganizationPayload(g.organization,e)},loadOrganizationBoardsData:function(e){return this._loadOrganizationPayload(g.organizationBoardsPage,e)},loadOrganizationPaidAccount:function(e){return this._loadOrganizationPayload(g.organizationPaidAccount,e)},loadOrganizationMinimal:function(e){return this._loadOrganizationPayload(g.organizationMinimal,e)},loadOrganizationMembersData:function(e){return this._loadOrganizationPayload(g.organizationMembers,e)},loadOrganizationMembersExtraData:function(e){return this._loadOrganizationPayload(g.organizationMembersExtra,e)},loadOrganizationMembersMinimal:function(e){return this._loadOrganizationPayload(g.organizationMembersMinimal,e)},loadOrganizationExportData:function(e){return this._loadOrganizationPayload(g.organizationExports,e)},loadOrganizationMemberMinimal:function(e,t){return this._loadApiData(d,t,g.memberMinimal)},loadMemberOrganizationsDeactivatedMembers:function(){return this._loadApiData(f,null,g.memberOrganizationDeactivatedMembers,"members/me/organizations")},loadOrgMemberCardData:function(e,t){var n;return n="organization/"+e+"/members/"+t+"/cards",this._loadApiData(a,e,g.orgMemberCards,n)},loadOrgNameById:function(e){var t;return t={fields:"name"},this._loadApiData(f,e,{query:t}).call("get","name")},loadCurrentBoardData:I(function(e){return this.loadBoardData(e,g.currentBoardMinimal)}),loadBoardSecondary:I(function(e){return this._loadApiData(s,e,g.currentBoardSecondary)}),loadBoardPluginData:I(function(e){return this._loadApiData(s,e,g.currentBoardPluginData)}),loadBoardName:function(e){var t;return t={fields:["name","closed"].join(",")},this._loadApiData(s,e,{query:t}).call("get","name")},loadMembersOfEnterprise:function(e,t){var n;return n=k.extend({fields:g.enterpriseMemberFields},t),this._loadApiData(d,e,{query:n},"enterprises/"+e+"/members","X-Trello-API-Query-Meta")},loadEnterprise:function(e,t){return null==t&&(t={organizations:"all"}),this._loadApiData(u,e,{query:t})},loadMyOrganizations:function(){return this.loadMemberOrganizations("me")},loadMemberOrganizations:function(e){return this._loadApiData(d,e,g.organizations)},loadSearchData:function(e){return this._loadApiData("search",null,{query:e},"search")},loadModel:function(e,t,n){return this._loadApiData(e,t,n)},loadBoardAvailablePlugins:function(e){return this._loadApiData(v,null,{query:{filter:"available"}},"boards/"+e+"/plugins")},loadBoardEnabledPlugins:function(e){return this._loadApiData(v,null,{query:{filter:"enabled"}},"boards/"+e+"/plugins")},loadQuickBoardsData:function(){return this._loadApiData(d,"me",g.memberQuickBoards)},loadQuickBoardsSearch:function(e){return this._loadApiData("search",null,{query:g.quickBoardsSearch.query(e)},"search")},loadAction:function(e){return this._loadApiData(i,e,g.action)},loadBCFeatures:function(e){return this._loadApiData(f,e,g.bcFeatures)},triggerWaits:function(e){var t,n,r,i,o;for(x[e]=!0,o=null!=(i=C[e])?i:[],n=0,r=o.length;r>n;n++)(t=o[n])();return delete C[e]},waitFor:function(e,t){return x[e]?t():(null!=C[e]?C[e]:C[e]=[]).push(t)},await:function(e){return new b(function(t){return function(n){return t.waitFor(e,n)}}(this))}}},{}],39:[function(e,t,n){var r;r=e("jquery"),r(document).ajaxSend(function(e,t,n){0===n.url.indexOf("/")&&t.setRequestHeader("X-Trello-Client-Version",window.clientVersion)})},{}],40:[function(e,t,n){var r,i,o,s;r=e("jquery"),i=e(33),s=e(150),t.exports=o={version:new s.Client(window.clientVersion),server:{version:"0.0.0",environment:"dev"},setServerVersion:function(e){var t,n;t=!1;for(n in this.server)this.server[n]!==e[n]&&(t=!0,this.server[n]=e[n]);return t?r(this).triggerHandler("change:serverVersion"):void 0;
},setServerVersionFromResponse:function(e){var t,n;return n=e.getResponseHeader("X-Trello-Version"),t=e.getResponseHeader("X-Trello-Environment"),null!=n&&(this.server.version=n),null!=t?this.server.environment=t:void 0}},Object.defineProperty(window,"TrelloVersion",{get:function(){return"Server: "+o.server.version+" ("+o.server.environment+")\nClient: "+o.version+" ("+i.me().get("channels").active+")"}})},{}],41:[function(e,t,n){var r,i,o;i=e(114),o=e("underscore"),r="error_history",t.exports={add:function(e){var t;return t=this.recent(),t.unshift(e),t=o.first(t,5),i.set(r,t)},recent:function(){var e;return null!=(e=i.get(r))?e:[]}}},{}],42:[function(e,t,n){var r,i,o;r=e(40),o=e(36).locales,i=o[0],t.exports=function(){return[{schema:"iglu:com.trello/web-context/jsonschema/1-0-4",data:{client_version:r.version.toString(),client_locale:i}}]}},{}],43:[function(e,t,n){var r,i,o,s;r=e("jquery"),i=e(33),o=e(79),s=e(41),t.exports=function(e,t,n,a){var u,c,l,d,p,h,m;p=window.clientVersion.split("-"),d=p[0],m=p[1],m=parseInt(m,10),u={head:d,version:m,patch:0},c={name:e.name,msg:e.message,url:t,line:n,col:a,stack:e.stack,ua:navigator.userAgent,browser:o.asString,language:null!=(h=navigator.language)?h:navigator.browserLanguage,clientVersion:u},i.isLoggedIn()&&(c.idMember=i.myId());try{r.post("/err",{errors:[c]}),s.add({timestamp:(new Date).toISOString(),stack:e.stack,name:e.name,msg:e.message,url:t})}catch(e){l=e}}},{}],44:[function(e,t,n){var r,i=[].slice;r=/hound=1/.test(document.cookie),t.exports=function(e){var t,n,o,s;if(r){n=" ",o=[];for(t in e)s=e[t],void 0!==s&&null!==s&&""!==s&&(n+="%c"+(t[0].toUpperCase()+t.substr(1))+":%c "+s+" ",o.push("color: #00f; font-weight: bold; background-color: #ddd; border-radius: 2px; padding: 0 2px;"),o.push("color: #444"));return console.log.apply(console,[n].concat(i.call(o)))}}},{}],45:[function(e,t,n){var r;r=e(46),t.exports=r.log.bind(r)},{}],46:[function(e,t,n){var r,i,o,s=[].slice;r=e("jquery"),i=e(114),o=e("underscore"),t.exports=window.Logger=new(function(){function e(){var e;this.enabled=null!=(e=i.get("loggers"))?e:{},this.historyMap={},this.logHistory=!1,this.timeSpent={},this.timing={}}return e.prototype.log=function(){var e,t,n,i;i=arguments[0],e=2<=arguments.length?s.call(arguments,1):[],("undefined"!=typeof console&&null!==console?console.log:void 0)&&(n=!1,0===e.length?(n=!0,e.push(i),i="all"):n=this.enabled.all||this.enabled[i],n&&(1===e.length&&o.isArray(e[0])&&(e=e[0]),e.unshift(i),e.unshift(new Date),r("body").is(".chrome")?console.log(e):console.dir(e)),this.logHistory&&(null==(t=this.historyMap)[i]&&(t[i]=[]),this.historyMap[i].push(e)))},e.prototype.enable=function(e){null==e&&(e="all"),this.enabled[e]=!0,this.save()},e.prototype.disable=function(e){null==e&&(e="all"),delete this.enabled[e],this.save()},e.prototype.disableAll=function(){this.enabled={},this.save()},e.prototype.enableAll=function(){this.enabled.all=!0,this.save()},e.prototype.history=function(e){var t,n,r,i;if(e in this.historyMap)for(i=this.historyMap[e],n=0,r=i.length;r>n;n++)t=i[n],"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(t)},e.prototype.list=function(){"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(o.keys(this.historyMap))},e.prototype.save=function(){i.set("loggers",this.enabled)},e.prototype.time=function(e){return this.timing[e]=performance.now()},e.prototype.endTime=function(e){var t,n;return n=performance.now()-this.timing[e],null==(t=this.timeSpent)[e]&&(t[e]=0),this.timeSpent[e]+=n},e}())},{}],47:[function(e,t,n){var r,i,o,s;r=e(33),i=e(25),o=e(129),s=e("moment"),t.exports=function(e,t,n){var a,u,c,l,d,p,h,m,f,g,v,b,y;return null==t&&(t="not specified"),n||(n="none given"),p=e.toJSON(),d=r.me().toJSON(),h=null!=(m=p.paidAccount)&&null!=(f=m.products)?f[0]:void 0,u={},u.ID=p.id,(null!=(g=p.paidAccount)?g.ixSubscriber:void 0)&&(u.ixSubscriber=null!=(v=p.paidAccount)?v.ixSubscriber:void 0),p.displayName&&(u["Organization Display Name"]=p.displayName),p.name&&(u["Organization Name"]=p.name),p.fullName?u["Full Name"]=p.fullName:u["Full Name"]=d.fullName,p.username?u.Username=p.username:u.Username=d.username,p.idBoards&&(u["# Boards"]=p.idBoards.length),p.memberships&&(u["# Members"]=p.memberships.length),null!=h&&(u["Next Billing Date"]=(c=null!=(b=p.paidAccount.billingDates)?b[h]:void 0)?s(new Date(c)).locale("en").format("LL"):"",i.isYearly(h)?u.Interval="Yearly":u.Interval="Monthly",u.Price=i.getPrice(h)),u["Trello Version"]=window.TrelloVersion.replace(/\s+/g," "),a=function(){var e;e=[];for(l in u)y=u[l],e.push(l+": "+y);return e}().join("\n"),o.bugzscout({me:d,project:"Sales",area:"Cancellations",forceNew:1,description:"Cancelled Business Class - "+u.Interval+"\n",extra:a+"\n\nReason: "+t+"\n\nDetails:\n\n"+n})}},{}],48:[function(e,t,n){var r,i,o;r=e(42),i=e(44),o=e(51),t.exports=function(e,t,n,s,a){var u;return"number"==typeof s&&(a=s,s=void 0),"function"==typeof window.ga&&window.ga("send","event",e,t,n,a),u=r(),"function"==typeof window.sp&&window.sp("trackStructEvent",e,t,n,s,a,u),o.push({event:"snowplow.event",snowplowEvent:{context:u,category:e,action:t,label:n,property:s,value:a}}),i({category:e,action:t,label:n,property:s,value:a})}},{}],49:[function(e,t,n){t.exports=function(e){return"function"==typeof window.sp?window.sp("trackUnstructEvent",{schema:"iglu:com.trello/debug-event/jsonschema/1-0-1",data:e}):void 0}},{}],50:[function(e,t,n){var r;r=e(44),t.exports=function(e,t,n){return"function"==typeof window.sp&&window.sp("trackUnstructEvent",{schema:"iglu:com.trello/experiment-event/jsonschema/1-0-0",data:{experiment_id:e,variation_id:t,assignment_id:n}}),r({experimentId:e,variationId:t,assignmentId:n})}},{}],51:[function(e,t,n){var r;r=function(e){var t;return null!=(t=window.dataLayer)?t.push(e):void 0},t.exports={possibleNewSignup:function(){return r({event:"trello.possibleNewSignup"})},push:r}},{}],52:[function(e,t,n){var r,i,o,s;r=e("underscore"),s=e(49),o=e(259),i=e(105),t.exports=function(e,t,n){var a,u,c;return u=o(t),a=/^\/1\/([^\/]*)/.exec(u.pathname)[1],c=u.query.slice(1),s(r.extend({debug_event_type:e,debug_action:a,string_key_1:"query 1",string_val_1:c.slice(0,255),string_key_2:"query 2",string_val_2:c.slice(255,510),string_key_3:"md5 query",string_val_3:i(c)},n))}},{}],53:[function(e,t,n){var r;r=e(42),t.exports=function(e,t,n,i,o,s,a){return"function"==typeof window.sp?window.sp("trackUnstructEvent",{schema:"iglu:com.trello/client-event/jsonschema/1-0-0",data:{ue_category:e,ue_verb:t,ue_dir_object:n,ue_prep_object:i,ue_ind_object:o,ue_method:s,ue_context:a}},r()):void 0}},{}],54:[function(e,t,n){var r;r=e("promise-queue"),r.configure(e("bluebird"))},{}],55:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w={}.hasOwnProperty;r=e("jquery"),i=e(532),o=e(215),s=e(33),a=e(79),u=e(6),c=e(536),l=e(97),d=e(20),p=e(539),h=e(542),m=e(276),f=e(129),g=e("underscore"),v=e(499),y=e(48),b=function(){var e,t,n,r;t={},r=null,e=0,n=function(){var e,n;for(n in t)w.call(t,n)&&(e=t[n])();r=null,t={}},window.requestAnimationFrame=function(i){var o;return o=e++,null==r&&(r=setTimeout(n)),t[o]=i,o},window.cancelAnimationFrame=function(e){delete t[e]}},r(document).ready(function(){var e,t;return r("meta[name=apple-itunes-app]").attr("content","app-id=461504587, app-argument="+location.href),"requestAnimationFrame"in window||b(),window.orientationchange=function(){return c.calcPos()},a.detectCustomWebkitScrollbars(),r.event.props.push("dataTransfer"),r.event.props.push("detail"),t=function(e,t,n,i){return r(document).on("click",e,function(e){var r,o;return r=function(){var r,s,a,u;for(a=[t,n,i],u=[],r=0,s=a.length;s>r;r++)o=a[r],null!=o&&(g.isFunction(o)?u.push(o.call(this,e)):u.push(o));return u}.call(this),y.apply(null,r)})},t(".js-home-via-logo","Header","Logo","Home"),t(".header-signup","Header","Sign Up"),r(document).on("click",".js-resend-confirmation-email",g.throttle(function(e){return function(){return o({type:"POST",url:"/resendValidate",data:{email:s.me().get("email")},success:function(){return i.flash("email sent","confirm")}})}}(this),6e4)),e=r(".window-overlay"),e.click(function(t){var n;if(!(t.button>0)){if(n=r(t.target).closest("a"),n.length>0&&"#"===n.attr("href"))return void f.stopPropagation(t);if(!r(t.target).is("a.focus-dummy")&&!r(t.target).hasClass("checkbox"))return h.isVisible?void h.hide():p.isEditing()?void p.cancelEdits():void(t.target===e[0]&&c.hide())}}),r(document).click(function(e){return r(e.target).closest(".js-react-root").length?void 0:v(e)}),r(document).keyup(function(e){var t,n;return n=l.getKey(e),n===d.Escape?(e.preventDefault(),t=u.getCurrentBoard(),m.hideUnpinnedSidebar(),p.isEditing()?p.cancelEdits():r(".new-comment").hasClass("focus")?r(".new-comment").removeClass("focus").find("textarea").blur():(r("input").blur(),r("textarea").blur())):void 0}),r(document).bind("dragstart",function(e){return r(e.target).closest(".ui-draggable, .js-draggable").length>0}),null!=window.fluid?y("FluidApp"):void 0})},{}],56:[function(e,t,n){var r,i,o,s,a,u,c;r=e(216),u=e(43),o=e(82),i=e("underscore"),s=e(238),a=function(e){return e instanceof r.Other||!(e instanceof r)},c=[],o.subscribe(i.debounce(function(e){var t,n,r,o,l;return 10===c.length?!1:(n=e.error,l=e.url,o=e.line,t=e.col,a(n)&&RegExp("https?://("+location.host+"|[a-z0-9]+\\.cloudfront\\.net|a.trellocdn.com)/").test(l)?(r=[n.message,l,o,t],i.any(c,s(i.isEqual,r))?!1:(u(n,l,o,t),c.push(r),!1)):!1)},1e3,!0))},{}],57:[function(e,t,n){window.testThatErrorReportingStillWorks=function(){return setTimeout(function(){throw new Error("Error reporting still works!")},1e3)}},{}],58:[function(e,t,n){var r,i;r=e(33),i=e(126),e(266),window.Promise=e("bluebird"),window.getAuthorization=function(){return{type:"cookie",token:r.myToken()}},e(247)},{}],59:[function(e,t,n){var r,i,o;r=e(33),o=e(51),"function"==typeof window.sp&&window.sp("newTracker","cf",window.snowplowCloudfrontServer,{appId:"web",cookieDomain:".trello.com",respectDoNotTrack:!0}),r.isLoggedIn()?("function"==typeof window.sp&&window.sp("setUserId",r.myId()),o.push({isLoggedIn:!0})):o.push({isLoggedIn:!1}),null!=(i=window.dataLayer)&&i.push({inApp:!0}),"function"==typeof window.sp&&window.sp(function(){var e;return o.push({event:"snowplow.loaded",snowplow:{domain_userid:null!=(e=this.cf)?e.getDomainUserId():void 0}})})},{}],60:[function(e,t,n){var r;r=e("intl"),r.__addLocaleData(e("intl-locale-data"))},{}],61:[function(e,t,n){var r,i,o,s,a,u,c,l=[].slice;r=e(37),u=e(226),o=e(76),i=e("underscore"),s=function(e,t,n){var r,a,u;return o(t.length>=1),r=t[0],u=2<=t.length?l.call(t,1):[],a=null!=e?i.clone(e):{},a[r]=0===u.length?n:s(a[r],u,n),a},c=function(e){var t,n,o;return null!=e.display?e:null==(t=r.get("Action",e.id))?e:"commentCard"!==t.get("type")?e:(n=null!=(o=e.data)?o.text:void 0,null==n?e:(e=i.clone(e),e.display=s(t.get("display"),["entities","comment","text"],n),e))},a=function(e){return null==e._id?e:(e=i.clone(e),null==e.id&&(e.id=e._id),delete e._id,e)},u.on("updateModels",function(e){var t,n,i,o,s;for(s=e.typeName,n=e.deltas,n=n.map(a),"Action"===s&&(n=n.map(c)),i=0,o=n.length;o>i;i++)t=n[i],r.enqueueDelta(s,t)}),u.on("deleteModels",function(e){var t,n,i,o,s,u;for(u=e.typeName,t=e.deltas,s=t.map(a),n=0,o=s.length;o>n;n++)i=s[n].id,r.enqueueDelta(u,{id:i,deleted:!0})})},{}],62:[function(e,t,n){var r,i;r=e("jquery"),i=e(94),r.getScript("https://apis.google.com/js/api.js",function(){return i.loadedAuth()})},{}],63:[function(e,t,n){window.knowsHowToLoadChannels=!0},{}],64:[function(e,t,n){var r,i,o,s,a,u;r=e("jquery"),i=e(79),o=e(97),s=e(20),a=e(129),"safari"===(u=i.browserStr)&&r(document).on("keydown",function(e){var t,n,i,u,c,l,d,p,h;h=o.getKey(e),h!==s.Tab||e.metaKey||e.shiftKey||e.ctrlKey||(c=r(e.target),c.attr("tabindex")&&(p=parseInt(c.attr("tabindex"),10),u=c.closest("body,.js-tab-parent"),i=u.find("[tabindex]"),t=null,n=null,l=1/0,d=1/0,i.each(function(){var e,i;return i=parseInt(r(this).attr("tabindex"),10),i>p&&l>i&&(l=i,t=r(this),e=!0),null==t&&d>i?(d=i,n=r(this)):void 0}),null==t&&(t=n),null!=t&&(a.stop(e),t.focus())))})},{}],65:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b;r=e(33),i=e(234),o=e(161),a=e(6),u=e(83),c=e(207),f=e(106),g=e(226),d=e("underscore"),v=function(e,t){var n;return e.length===(n=t.length)&&n===d.union(e,t).length},s=function(){function e(e){this.maxLength=e,this.contents=[]}return e.prototype.pushift=function(e){return this.contents=d.without(this.contents,e),this.contents.push(e),this.contents.length>this.maxLength?this.contents.shift():null},e.prototype.remove=function(e){return this.contents=d.without(this.contents,e)},e.prototype.map=function(e){return this.contents.map(e)},e}(),h=function(){return r.isLoggedIn()?[{modelType:"Member",idModel:r.myId(),tags:["messages","updates"]}]:[]},m=function(e){return[{modelType:"Organization",idModel:e.id,tags:["allActions","updates"]}]},p=function(e){var t;return[{modelType:"Board",idModel:e.id,tags:["clientActions","updates"]}].concat(null!=(t=e.getOrganization())?m(t):[])},f(u,l=function(){function e(){this.boards=new s(5),this.orgs=new s(1)}return d.extend(e.prototype,i.Events),e.prototype.addModel=function(e){this.waitForId(e,function(t){return function(){return e instanceof o&&t.syncBoard(e),e instanceof c&&t.syncOrg(e),t.ensureSubscriptions()}}(this))},e.prototype.removeModel=function(e){return e instanceof o&&this.boards.remove(e),e instanceof c&&this.orgs.remove(e),this.ensureSubscriptions()},e.prototype.syncBoard=function(e){var t;null!=(t=this.boards.pushift(e))&&this.stopListening(t),this.listenTo(e,"change:idOrganization",this.ensureSubscriptions),this.listenTo(e,"destroy deleting",function(t){return function(){return t.removeModel(e)}}(this))},e.prototype.syncOrg=function(e){this.orgs.pushift(e),this.listenTo(e,"destroy",function(t){return function(){return t.removeModel(e)}}(this))},e.prototype.ensureSubscriptions=function(){var e,t,n,r,i,o,s,a,u,c,l,f,b,y,w;for(e=d.flatten([h(),this.boards.map(p),this.orgs.map(m)]),y={},n=0,i=e.length;i>n;n++)s=e[n],o=s.modelType,r=s.idModel,w=s.tags,null==y[r]&&(y[r]={tags:[],modelType:o}),(a=y[r].tags).push.apply(a,w),y[r].tags=d.uniq(y[r].tags);u=g.currentSubscriptions;for(r in u)o=u[r].modelType,null==y[r]&&g.unsubscribe(o,r);c=g.currentSubscriptions;for(r in c)l=c[r],b=l.tags,o=l.modelType,null!=y[r]&&(t=y[r].tags,v(b,t)||g.unsubscribe(o,r));for(r in y)f=y[r],w=f.tags,o=f.modelType,null==g.currentSubscriptions[r]&&g.subscribe(o,r,w)},e}()),b=new l,a.currentModel.subscribe(function(e){null!=e?b.addModel(e):b.ensureSubscriptions()})},{}],66:[function(e,t,n){var r,i,o,s,a;i=e(33),r=e(216),s=e(82),s.subscribe(function(e){var t;t=e.error,t instanceof r.Unauthenticated&&i.logoutPost()}),a=i.updateToken(),o=setInterval(function(){var e;return e=i.updateToken(),e!==a&&window.location.reload(),a=e},3e3),window.addEventListener("beforeunload",function(){clearInterval(o)})},{}],67:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g;r=e("jquery"),i=e(234),o=e(40),s=e(6),a=e(80),c=e(607),u=e(107),d=e(228),l=e(542),g=e(52),p=e(129),h=e(151),f=e(519),m=e(43),e(39),e(96),r(function(){return"Production"===o.server.environment&&"trello.com"!==location.hostname&&m(Error("Site proxied as "+location.hostname)),setInterval(function(){a.update("body"),a.trigger("renderInterval")},1e4),d.start(),u.init(),s.start().then(function(){return i.history.start({pushState:!0})}),h.ensureRun(),QuickLoad.onRemove(function(e){return e.used?void 0:g("quickload unused",e.url)})})},{}],68:[function(e,t,n){var r,i,o,s;r=e("jquery"),i=e(155),o=e(129),s=e("underscore"),s.defer(function(){var e,t,n,s;return n=o.getMs({minutes:10+5*Math.random()}),s=null,t=("function"==typeof document.hasFocus?document.hasFocus():void 0)||!0,e=function(){return t&&(null==s||Date.now()-s>n)?(i.fetch(),s=Date.now()):void 0},r(window).on("focus",function(n){return t=!0,e()}),r(window).on("blur",function(e){return t=!1}),setInterval(e,n/4),e()})},{}],69:[function(e,t,n){var r;r=e("underscore"),r.mixin({mapObj:r.compose(r.object,r.map),count:function(e,t){var n,r,i,o;for(null==t&&(t=function(){return!0}),n=0,r=0,i=e.length;i>r;r++)o=e[r],t(o)&&n++;return n}})},{}],70:[function(e,t,n){var r,i;r=e("jquery"),i=e(151),r(function(){var e;return i.calc(),e=null,r(window).resize(function(){clearTimeout(e),e=setTimeout(function(){return i.calc()},200)})})},{}],71:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("underscore"),d={none:-1,new:0,processing:1,denied:2,good:3,overdue:4,disabled:5,cancelled:6,"change processing":7,"change denied":8,"change finished":9,authorizing:10,"product specific processing":11,"free trial":12,"pending product specific processing":13,"pending authorizing":14,deleted:15},l=i.invert(d),o=[3,4,7,8,9,11,12,13,14],c=[1,7,10,11,13,14],u=[4],a=[2,5],s=[6],t.exports=r={hasAccount:function(e){return null!=e&&e!==d.none},isActive:function(e){var t;return null!=e&&(t=Number(e.standing),p.call(o,t)>=0)&&!i.isEmpty(e.products)},isProcessing:function(e){var t;return r.hasAccount(e)&&(t=Number(e),p.call(c,t)>=0)},isProblem:function(e){return e===d.overdue},isCancelled:function(e){var t;return null==e?!1:(t=Number(e.standing),r.hasAccount(e.standing)&&(p.call(s,t)>=0||p.call(o,t)>=0&&p.call(c,t)<0&&i.isEmpty(e.products)))},willExpire:function(e){var t,n;return(null!=(t=e.products)?t[0]:void 0)in(null!=(n=e.expirationDates)?n:{})},needsCC:function(e){var t;return t=Number(e),p.call(a,t)>=0},isInactive:function(e){return r.hasAccount(e)&&!r.isActive(e)},standingName:function(e){return l[e]}}},{}],72:[function(e,t,n){var r,i,o,s,a,u;u=e(257),a=null,s=null,r=function(e){return"function"==typeof e?e():e},i=function(e,t){var n,r,i,o,s;if("."===e)return{val:t};if("object"!=typeof t||null===t)return{};for(s=t,o=e.split("."),n=0,i=o.length;i>n;n++){if(r=o[n],!(r in s))return{};s=s[r]}return{val:s}},o={mustacheRender:function(e,t,n){if(null==n&&(n={}),null!=a)throw new Error("Cannot nest calls to mustacheRender");return u.render(function(){s=n,a=[t];try{e()}finally{a=null,s=null}})},mustacheVar:function(e){var t,n,o;if(null==a)throw new Error("Attempt to render a mustache template outside of a mustacheRender");for(t=a.length-1;t>=0;t+=-1)if(o=a[t],n=i(e,o),n.hasOwnProperty("val"))return r(n.val);return""},mustachePartial:function(e){if(null==s)throw new Error("Attempt to render a mustache template outside of a mustacheRender");if(!(e in s))throw new Error("Unregistered partial "+e);return s[e]()},mustacheBlock:function(e,t){var n,r,i,o,s;if(s=this.mustacheVar(e),!s)return"";if(o=void 0,Array.isArray(s))for(n=0,r=s.length;r>n;n++)i=s[n],a.push(i),t(),a.pop();else"object"==typeof s?(a.push(s),o=t(),a.pop()):o=t();return o},mustacheBlockInverted:function(e,t){var n;return n=this.mustacheVar(e),n?"":t()}},t.exports=e(256)(u,o)},{}],73:[function(e,t,n){var r;t.exports=r=function(){function e(){}return e.prototype.isOpen=function(){return this.get("closed")===!1},e}()},{}],74:[function(e,t,n){var r,i=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t}(Error)},{}],75:[function(e,t,n){t.exports=function(e){return function(t,n){if(null==n&&(n="assertion failed"),!t)throw new e(n)}}},{}],76:[function(e,t,n){t.exports=e(75)(e(74))},{}],77:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=[].slice;a=e(238),s=e(76),f=e(253),o=e("underscore"),c=function(e,t){var n,r,i,o;for(n=e,r=0,o=t.length;o>r;r++){if(i=t[r],!n.hasOwnProperty(i))return void 0;n=n[i]}return n},l=function(e,t){var n;return n=c(e,t),null==n?void 0:(s("string"==typeof n,"key "+t.join(".")+" did not resolve to a string"),n)},r=function(){function e(e){this.key=e}return e}(),i=function(){function e(e){this.value=e}return e}(),m=function(e){return e.split(/(\{[^{}]+\})/).map(function(e){return 0===e.length?null:"{"===e[0]?new r(e.substr(1,e.length-2)):new i(e)}).filter(a.id)},h=f(function(e){return e([String],a.method("split",".")),e([Array],a.id)}),u=function(e,t,n){var r;return t=h(t),r=l(e,t),null==r?void 0:m(r)},p=function(e,t){return e.map(a.choke(1,t))},d=function(e,t){return function(){var n,o;return o=arguments[0],n=2<=arguments.length?v.call(arguments,1):[],p(o,f(function(o){return o([r],function(e){var r;return r=e.key,t.apply(null,[r].concat(v.call(n)))}),o([i],function(t){var r;return r=t.value,e.apply(null,[r].concat(v.call(n)))})}))}},g=function(){var e,t,n,r,i;return r=arguments[0],n=arguments[1],i=arguments[2],e=4<=arguments.length?v.call(arguments,3):[],t=u(r,n),null==t?void 0:i.apply(null,[t].concat(v.call(e)))},t.exports={normalizeKeyPath:h,lookup:u,makeVisitor:d,visit:g}},{}],78:[function(e,t,n){var r;r=function(){function e(){this.browser=this.searchString(this.dataBrowser)||"unknown-browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknown-browser-version",this.OS=this.searchString(this.dataOS)||"unknown-os"}return e.prototype.searchString=function(e){var t,n,r;for(n=0,r=e.length;r>n;n++)if(t=e[n],this.versionSearchString=t.versionSearch||t.identity,t.string&&-1!==t.string.indexOf(t.subString)||t.prop)return t.identity},e.prototype.searchVersion=function(e){var t;return t=e.indexOf(this.versionSearchString),-1!==t?parseFloat(e.substring(t+this.versionSearchString.length+1)):void 0},e.prototype.dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident/7",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],e.prototype.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],e}(),t.exports=new r},{}],79:[function(e,t,n){var r,i;r=e("jquery"),i=e(78),t.exports=new(function(){function e(){this.browserStr=i.browser.toLowerCase(),this.browserVersionStr=(i.browser+"-"+i.version).toLowerCase().replace(/\.\d+$/,""),this.osStr=i.OS.toLowerCase(),this.asString=this.browserStr+" "+this.browserVersionStr+" "+this.osStr,r(function(e){return function(){return r("body").addClass(e.asString)}}(this))}return e.prototype.isTouch=function(){return this.isAndroid()||this.isIos()},e.prototype.isAndroid=function(){return"android"===this.osStr},e.prototype.isIos=function(){var e;return"ipad"===(e=this.osStr)||"iphone"===e},e.prototype.isHighDPI=function(){return window.devicePixelRatio>1},e.prototype.isEmbeddedDocument=function(){return window.top!==window.self},e.prototype.allowsDynamicFavicon=function(){var e;return"chrome"===(e=this.browserStr)||"firefox"===e},e.prototype.respectsCrossDomainDownloadAttribute=function(){var e;return"chrome"===(e=this.browserStr)||"opera"===e},e.prototype.detectCustomWebkitScrollbars=function(){var e;try{return r("::-webkit-scrollbar"),e="body-webkit-scrollbars"}catch(t){return e="body-no-webkit-scrollbars"}finally{r("body").addClass(e)}},e}())},{}],80:[function(e,t,n){var r,i,o,s,a,u,c,l,d;r=e("jquery"),i=e(234),s=e(98),a=e(115),u=e(129),c=e("underscore"),d=e("moment"),l=e(101),t.exports=o={objToDate:function(e,t,n){var r;return c.isObject(e)&&(r=e,e=r.year,t=r.month,n=r.day),new Date(e,t-1,n)},dateToObj:function(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}},getStartOfWeek:function(e){return d(e).startOf("week").toDate()},getEndOfWeek:function(e){var t;return t=d(e).endOf("week"),6!==t.get("day")&&t.add(-1,"days").set("hour",23),t.toDate()},getDaysOfWeek:function(e){var t;return t=d(e).startOf("week"),[0,1,2,3,4,5,6].map(function(e){return t.clone().add(e,"days").toDate()})},getMidnightInt:function(e){return d(e).startOf("day").valueOf()},getFirstOfMonth:function(e){return d(e).startOf("month").toDate()},getLastOfMonth:function(e){return d(e).endOf("month").toDate()},isFirstOfMonth:function(e){return d(e).isSame(d(e).startOf("month"),"day")},isLastOfMonth:function(e){return d(e).isSame(d(e).endOf("month"),"day")},getDateDeltaString:function(e,t){return e=d(e),t=d(t),e.isSame(t,"day")?Math.abs(t.diff(e,"seconds"))<10?l("just now"):e.from(t):e.calendar(t)},getDaysUntil:function(e){var t;return e=d(o.dateToObj(e)),t=d(o.dateToObj(new Date)),e.diff(t,"days")},getDateWithSpecificTime:function(e,t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())},update:function(e){var t,n;t=new Date,n=function(n,i){return r(e).find(n).each(function(){var e,n,s;return e=r(this),n=e.data("date"),null==n&&(n=o.parse(e.attr("dt")),n=a.serverToClient(n),e.data("date",n)),s=o.getDateDeltaString(n,t),i(e,n,s)})},n(".js-date-title[dt]",function(e,t,n){e.attr("title",n)}),n(".date[dt], .date[data-date]",function(e,n,r){e.text(o.getDateDeltaString(n,t)),e.is("[title]")||e.attr("title",d(n).format("LLL"))})},parse:function(e){return null==e&&(e=""),d(e).toDate()},toDateString:function(e){var t,n,r;return e=d(e),r=d(),n=Math.abs(r.diff(e,"months"))>9,t=e.isSame(r,"year")&&!n,e.format(t?"llll":"ll")},validDate:function(e){return c.isDate(e)&&!isNaN(e.getTime())}},c.extend(o,i.Events)},{}],81:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=[].slice;o=e("underscore"),r=e(80),u=e(77),l=e(238),a=e(76),h=e(43),g={action:e("locale").actions,notification:e("locale").notifications},p=e(144),d=e(145),m=function(e,t,n){return null==n&&(n=!1),{type:"text",text:e,hideIfContext:n,idContext:t}},c=u.makeVisitor(m,function(e,t){return t.entities[e]}),f=u.makeVisitor(l.id,function(e,t){return t.hasOwnProperty(e)?t[e]:(h(new Error("substitution key "+e+" not found!")),"")}),v=function(e){var t,n,r,i;switch(t=o.clone(e),t.type){case"card":t.url=siteDomain+"/c/"+(null!=(n=t.shortLink)?n:t.id);break;case"board":t.url=siteDomain+"/b/"+(null!=(r=t.shortLink)?r:t.id);break;case"organization":t.url=siteDomain+"/"+(null!=(i=t.name)?i:t.id);break;case"attachment":null!=t.url&&(t.isTrelloAttachment=p(t.url),t.isTrello=d(t.url))}return t},s=function(e,t){return function(n){return n.type===e?t(n):n}},t.exports=i=function(){function e(e){this.visit=l(u.visit,g[e])}var t;return t=function(e,t){var n,r,i;return i=[e.translationKey],null==t?i:(n=o.find(o.pairs(e.entities),function(e){var n,r;return r=e[0],n=e[1],n.id===t}),null!=n?(r=n[0],[[e.translationKey,r].join("@")].concat(b.call(i))):i)},e.prototype.getEntities=function(e,n){var r;return"unknown"===e.translationKey?[]:(r=o.chain(t(e,n)).map(function(t){return function(n){return t.visit(n,c,e)}}(this)).compact().first().value(),null==r?(h(new Error("display key '"+e.translationKey+"' not found!")),[]):r.map(s("translatable",this._textFromTranslatable.bind(this))).map(s("relDate",this._localizedRelDate.bind(this))).map(v))},e.prototype._format=function(e,t){return null==t&&(t={}),this.visit(e,f,t).join("")},e.prototype._textFromTranslatable=function(e){var t;return t=this._format(e.translationKey),m(t,e.idContext,e.hideIfContext)},e.prototype._localizedRelDate=function(e){return o.defaults({current:this.relDateText(e.date)},e)},e.prototype.relDateText=function(e,t){var n,i,o;return null==t&&(t=new Date),n=new Date(e),i=r.getDateDeltaString(n,t),o=n>t?"notification_is_due":"notification_was_due",this._format(o,{period:i})},e}()},{}],82:[function(e,t,n){var r,i,o,s,a;i=e("hearsay"),o=e("bluebird"),s=e(76),a=new i.Emitter,a.use(),r=function(){function e(e,t,n,r){this.error=e,this.url=null!=t?t:document.location.href,this.line=null!=n?n:0,this.col=null!=r?r:0,s(null!=this.error)}return e}(),window.onerror=function(e,t,n,i,o){return null==o&&(o=new Error(e)),a.send(new r(o,t,n,i))},o.onPossiblyUnhandledRejection(function(e){return a.send(new r(e))}),t.exports=a},{}],83:[function(e,t,n){var r,i,o,s;i=e("bluebird"),o=e("underscore"),s=e(76),t.exports=r=function(){function e(){}return e.prototype.listenToOnce=function(e,t,n){var r,i;return i=null,r=function(){return n.apply(this,arguments),i()},i=function(n){return function(){return n.stopListening(e,t,r)}}(this),this.listenTo(e,t,r)},e.prototype.waitForId=function(e,t){return this.waitForAttr(e,"id",t)},e.prototype.waitForAttr=function(e,t,n){var r;if(3!==arguments.length)throw new Error("Wrong number of arguments to waitForAttr");null!=(r=e.get(t))?n(r):this.listenToOnce(e,"change:"+t,function(r){return function(){return r.waitForAttr(e,t,n)}}(this))},e.prototype.waitForAttrs=function(e,t,n){var r;if(3!==arguments.length)throw new Error("Wrong number of arguments to waitForAttrs");return r=t.map(function(t){return function(n){return new i(function(r){return t.waitForAttr(e,n,r)})}}(this)),i.all(r).then(function(e){return o.object(o.zip(t,e))}).tap(n).done()},e}()},{}],84:[function(e,t,n){var r,i,o;r=e(33),i=function(){var e;return null!=(e=r.me().get("channels"))?e.active:void 0},o=function(){return window.locale.match(/^en/)},t.exports={allMembers:function(){return!0},alphaMembers:function(){return"alpha"===i()},englishMembers:function(){return o()},alphaEnglishMembers:function(){return o()&&"alpha"===i()},betaEnglishMembers:function(){return o()&&"beta"===i()}}},{}],85:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),u=e("underscore"),c=e(84),i=e(33),y=e(105),b=e(102),k=e(50),s=b("SimpleTest",["InvalidExperimentName","InvalidExperimentAllocation"]),a=["northstarV1","embedV1","npsSurveyV3","nuxBannersV2","powerUpRequestCTAV2","teamMemberTabLayoutV1"],_={},o=1e3,h=function(e,t){return t&&(e+=t),parseInt(y(e).slice(0,8),16)},C=function(e){var t,n;return t=e.defaultWeight,n=e.variations,[{name:"control",weight:null!=t?t:t=1}].concat(n)},w=function(e,t){return u.find(C(e),{name:t})},g=function(e){var t,n;return t=C(e),n=t.filter(function(e){return e.weight>0}).reduce(function(e,t){return t.cumlWeight=t.weight+(null!=u.last(e)?u.last(e).cumlWeight:0),e.concat(t)},[])},l=function(e){var t;return t=e.audiences,t?t.some(function(e){return c[e]()}):!0},p=function(e){var t;return t=e.experimentAllocation,u.isNumber(t)?t:u.chain(t).pairs().map(function(e){return function(e){var t,n;return n=e[0],t=e[1],c[n]()?t:0}}(this)).max().value()},d=function(e){var t,n,r;return r=e.test,n=e.selectedVariation,t=e.identifier,{track:function(){return k(r.name+r.experimentVersion,null!=n?n.name:void 0,t)},inExperiment:null!=n,get:function(e){var t,i,o;return"variation"===e?null!=(t=null!=n?n.name:void 0)?t:"control":(null!=n&&null!=(i=n.values)?i.hasOwnProperty(e):void 0)?n.values[e]:(null!=(o=r.defaults)?o.hasOwnProperty(e):void 0)?r.defaults[e]:null}}},v=function(e,t){var n;return n=h(e.name+e.experimentVersion,"in"+t)%o,n<=p(e)*o},f={v1:function(e,t){var n,r,i,o;return o=g(e),r=Math.floor(u.last(o).cumlWeight/p(e)*100),n=h(e.name+e.experimentVersion,t)%r,
i=u.find(o,function(e){return 100*e.cumlWeight>=n})},v2:function(e,t){var n,r,i,s;return s=g(e),v(e,t)?(i=h(e.name+e.experimentVersion,"variation"+t)%o,n=u.last(s).cumlWeight,r=u.find(s,function(e){return e.cumlWeight/n*o>=i})):void 0}},m=function(e,t){var n,i,o,c,p,h,m,g,v;if(v=null!=(c=window.abTests)?c[e]:void 0,!v)throw s.InvalidExperimentName();if(null==v.name&&(v.name=e),v.experimentVersion=null!=(p=null!=(h=v.experimentVersion)?h.toUpperCase():void 0)?p:"",null==v.experimentAllocation&&(v.experimentAllocation=1),u.isNumber(v.experimentAllocation)){if(v.experimentAllocation>1||v.experimentAllocation<0)throw s.InvalidExperimentAllocation()}else if(u.isObject(v.experimentAllocation)&&u.any(u.values(v.experimentAllocation),function(e){return function(e){return!(e>=0&&1>=e)}}(this)))throw s.InvalidExperimentAllocation();return o=r.cookie("force_"+v.name),m=v.name+v.experimentVersion,n=x.call(a,m)>=0?"v1":"v2",g=o?w(v,o):l(v)?f[n](v,t):void 0,i=d({test:v,selectedVariation:g,identifier:t}),null!=g&&v.autoTrack===!0&&i.track(),i},t.exports=function(e,t){var n;return t=null!=t?t:i.me().id,n=u.compact([e,t]).join(":"),null!=_[n]?_[n]:_[n]=m(e,t)}},{}],86:[function(e,t,n){var r,i,o,s,a,u,c;r=e("jquery"),i=e(14),o=e(79),a=e(129),u=e("underscore"),c=e(105),s=e("bluebird"),t.exports=new(function(){function e(){this.settings={},this._update=u.debounce(this._update,100).bind(this),this._hasher=u.memoize(c)}var t;return t=function(e,t,n,r,i,o,s,a){return null==a&&(a=!0),null==o&&(o=5),e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),a&&e.stroke(),s?e.fill():void 0},e.prototype.drawFavicon=function(e){var n,r,o,s,a,u,c;if(n=document.createElement("canvas"),n.width=n.height=64,null==(r="function"==typeof n.getContext?n.getContext("2d"):void 0))throw Error("Can't render to the canvas!");return r.save(),null!=e?(t(r,0,0,64,64,8,!1,!1),r.clip(),this.settings.tiled?r.drawImage(e,0,0):(c=e.width,s=e.height,c>s?r.drawImage(e,0,0,64*c/s,64):r.drawImage(e,0,0,64,64*s/c))):(this.settings.useDefault?(o=r.createLinearGradient(0,0,0,32),o.addColorStop(0,"#298FCA"),o.addColorStop(1,"#0079BF"),r.fillStyle=o):r.fillStyle=null!=(u=this.settings.color)?u:i.blue.color,t(r,0,0,64,64,12,!0)),r.fillStyle="#fff",t(r,9,9,19,44,6,!0),t(r,36,9,19,29,6,!0),r.restore(),this.settings.hasNotifications&&(a=15,r.beginPath(),r.arc(64-a,a,a,0,2*Math.PI,!1),r.fillStyle="#EB5A46",r.fill(),r.lineWidth=4,r.strokeStyle="#FFFFFF",r.stroke(),r.closePath()),n.toDataURL("image/png")},e.prototype._update=function(){return o.allowsDynamicFavicon()?s.try(function(e){return function(){return null!=e.settings.url?new s(function(t,n){var r;return r=document.createElement("img"),r.setAttribute("crossorigin","anonymous"),r.onload=function(){return t(r)},r.onerror=function(e){return n(e)},r.src=e.settings.url+"?favicon"}):void 0}}(this)).then(function(e){return function(t){var n;return n=e.drawFavicon(t),r("#favicon").remove(),r("<link>").attr({id:"favicon",rel:"icon",type:"image/png",sizes:"64x64",href:n}).appendTo("head")}}(this)).catch(function(){}).done():void 0},e.prototype.setNotifications=function(e){return this.settings.hasNotifications=e,this._update()},e.prototype.setBackground=function(e){var t,n,r,i;return r=e.url,n=e.tiled,t=e.color,i=e.useDefault,this.settings.url=r,this.settings.tiled=n,this.settings.color=t,this.settings.useDefault=i,this._update()},e}())},{}],87:[function(e,t,n){var r,i,o,s,a=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("underscore"),o=e(76),s=e(238),t.exports=r=function(){function e(e,t){var n,r,s,a;null==t&&(t={}),this.products={},this.prices={},this.intervals={},this.productShortNames={},this.prebilledProducts={},this.productFeatures={},this.perUserProducts={},this.perActiveUserProducts={},this.purchaseOrderProducts={},this.globalFeatures=null!=(s=t.globalFeatures)?s:[],this.upgradeProducts=[],this.yearlyEquivalents={},o(t.currentProducts),this.currentProducts=t.currentProducts,i.extend(this,t.extras);for(n in e)a=e[n],r=parseInt(n,10),a=i.extend({interval:"monthly",hidden:!1,prebill:!0,perUser:!1,features:[],upgrade:!1},a),this.products[r]=a.name,a.hidden||(this.productShortNames[a.shortName]=r),this.prebilledProducts[r]=a.prebill,this.perUserProducts[r]=a.perUser,this.perActiveUserProducts[r]=a.perActiveUser,this.productFeatures[r]=a.features,this.prices[r]=a.price,this.intervals[r]=a.interval,this.upgradeProducts[r]=a.upgrade,this.yearlyEquivalents[r]=a.yearlyEquivalent,this.purchaseOrderProducts[r]=a.purchaseOrder}return e.prototype._convertToId=function(e){return i.isString(e)?/^\d+$/.test(e)?parseInt(e,10):this.productShortNames[e]:e},e.prototype.getProductNumber=function(e){return this._convertToId(e)},e.prototype.getPrice=function(e){return this.prices[this._convertToId(e)]},e.prototype.getInterval=function(e){return this.intervals[this._convertToId(e)]},e.prototype.isMonthly=function(e){return"monthly"===this.getInterval(e)},e.prototype.isYearly=function(e){return"yearly"===this.getInterval(e)},e.prototype.isPerActiveUser=function(e){return this.perActiveUserProducts[this._convertToId(e)]},e.prototype.isPerUser=function(e){return this.perUserProducts[this._convertToId(e)]},e.prototype.isPrebilled=function(e){return this.prebilledProducts[this._convertToId(e)]},e.prototype.isUpgrade=function(e){return this.upgradeProducts[this._convertToId(e)]},e.prototype.usesPurchaseOrder=function(e){return this.purchaseOrderProducts[this._convertToId(e)]},e.prototype.getYearlyEquivalent=function(e){return this.yearlyEquivalents[this._convertToId(e)]},e.prototype.getYearlyDiscountPercent=function(e,t){var n,r;return r=this.getPrice(e),n=12*this.getPrice(t),Math.round(100*(n-r)/n)},e.prototype.features=function(e){return null==e&&(e=[]),i.chain(e).map(s.lookup(this.productFeatures)).tap(function(t){return o(i.all(t,s.id),"FeatureSet::features called on an unrecognized product: "+e)}).flatten().unique().value()},e.prototype.hasProduct=function(e){return null==e&&(e=[]),i.any(e,function(e){return function(t){return t in e.products}}(this))},e.prototype.isFeatureEnabled=function(e,t){return a.call(this.globalFeatures,e)>=0||a.call(this.features(t),e)>=0},e}()},{}],88:[function(e,t,n){var r,i,o;r=e("underscore"),o=e(117),i=e(32),t.exports=r.filter(i,function(e){return o(["templates","tips",e.id])?e.langs?r.contains(e.langs,window.locale):!0:!1})},{}],89:[function(e,t,n){t.exports={number:e(91),taxRate:e(93),percentage:e(92),money:e(90)}},{}],90:[function(e,t,n){var r,i,o;r=e("intl"),o=e(36).locales,i=null,t.exports=function(e,t){return null==i&&(i=new r.NumberFormat(o[0],{minimumFractionDigits:2,maximumFractionDigits:2})),t?i.format(e):i.format(Math.floor(100*e)/100)}},{}],91:[function(e,t,n){var r,i,o;r=e("intl"),o=e(36).locales,i=null,t.exports=function(e){return null==i&&(i=new r.NumberFormat(o[0])),i.format(e)}},{}],92:[function(e,t,n){var r,i,o;r=e("intl"),o=e(36).locales,i=null,t.exports=function(e){return null==i&&(i=new r.NumberFormat(o[0],{style:"percent"})),i.format(e)}},{}],93:[function(e,t,n){var r,i,o;r=e("intl"),o=e(36).locales,i=null,t.exports=function(e){return null==i&&(i=new r.NumberFormat(o[0],{style:"percent",minimumFractionDigits:4,maximumFractionDigits:4})),i.format(e)}},{}],94:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e("jquery"),i=e(234),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.loadedAuth=function(){var e;return null!=(e=window.gapi)?e.load("auth",function(e){return function(){return e.loaded=!0,e.trigger("loaded"),e.authorize(!0)}}(this)):void 0},t.authorize=function(e,t){return this.validToken()?"function"==typeof t?t(null,this.oauthToken.access_token):void 0:gapi.auth.authorize({client_id:window.googleDriveClientId,scope:"https://www.googleapis.com/auth/drive.readonly",immediate:e},function(e){return function(n){var r;return!n||n.error?(e.oauthToken=null,"function"==typeof t?t(null!=(r=null!=n?n.error:void 0)?r:Error("Failed to request token")):void 0):(e.oauthToken=n,"function"==typeof t?t(null,e.oauthToken.access_token):void 0)}}(this))},t.validToken=function(){var e;return(null!=(e=this.oauthToken)?e.access_token:void 0)&&Date.now()/1e3<parseInt(this.oauthToken.expires_at)},t}(i.Events)},{}],95:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=[].slice;o=e(216),s=e(217),a=e(33),c=e(38),l=e("bluebird"),d=e(114),p=e("underscore"),i="autoJoinQueue",r="any",u=function(){function e(){}return e.prototype.getQueue=function(){var e;return null!=(e=d.get(i))?e:[]},e.prototype.setQueue=function(e){return d.set(i,e)},e.prototype.clearQueue=function(){return d.unset(i)},e.prototype._idMember=function(){return a.isLoggedIn()?a.myId():r},e.prototype._entryForUrl=function(e){return{url:e,idMember:this._idMember()}},e.prototype._matchesMember=function(e){return e===r||e===a.myId()},e.prototype.add=function(e){var t;return t=this.getQueue(),p.any(t,function(t){return function(n){return n.url===e&&t._matchesMember(n.id)}}(this))?void 0:this.setQueue(h.call(t).concat([this._entryForUrl(e)]))},e.prototype.inQueue=function(e){return p.any(this.getQueue(),function(t){return function(n){return n.url===e&&t._matchesMember(n.idMember)}}(this))},e.prototype.autoJoin=function(){var e;return e=this.getQueue(),0!==e.length&&a.isLoggedIn()?null!=this._runOnce?this._runOnce:this._runOnce=c.await("headerData").then(function(t){return function(){return a.me().get("confirmed")?l.map(e,function(e){var n,r,i;return i=e.url,r=e.target,n=e.idMember,t._matchesMember(n)?s({method:"post",url:i}).then(function(){return null}).catch(o,function(){return null}):e}).then(function(n){return n=p.compact(n),0===n.length?t.clearQueue():t.setQueue(n),n.length<e.length}):!1}}(this)):l.resolve(!1)},e}(),t.exports=new u},{}],96:[function(e,t,n){var r,i;r=e("jquery"),i=e(101),r.fn.format=function(e,t){return this.text(i(e,t,{raw:!0})),this},r.fn.formatHtml=function(e,t){return this.html(i(e,t)),this}},{}],97:[function(e,t,n){var r,i,o,s;o=e(20),r=e(18),i=e(19),s=e(27),t.exports={getKey:function(e){var t,n,a;switch(e.type){case"keydown":case"keyup":return null!=(n=i[e.which])?o[n]:o.Unknown;case"keypress":return null!=(t=null!=(a=r[e.which])?a:s[e.which])?o[t]:o.Unknown;default:throw Error("Can't getKey for this event")}},isArrow:function(e){return e===o.ArrowLeft||e===o.ArrowRight||e===o.ArrowUp||e===o.ArrowDown},isSubmitEvent:function(e){var t;if("keydown"!==e.type)throw Error("Checking for submit only works on keydown");return(t=this.getKey(e))===o.Enter||t===o.LineFeed},isForceSubmitEvent:function(e){return this.isSubmitEvent(e)&&(e.ctrlKey||e.metaKey)&&!e.shiftKey}}},{}],98:[function(e,t,n){var r,i,o,s,a,u,c,l,d=[].slice;r=e("jquery"),i=e("underscore"),o=e(238),s=function(e){return e.toLowerCase().split("-")},a=function(e,t){var n,r;return n=s(e),r=s(t),i.all(r,function(e,t){return n[t]===e})},u=function(e){var t,n,r,i;return e=e.split("@")[0],e=e.split(".")[0],t=e.split(/[-_]/),1===t.length?t[0]:(n=t[0],r=t[1],i=3<=t.length?d.call(t,2):[],[n,r.toUpperCase()].concat(d.call(i)).join("-"))},c=i.chain([r.cookie("lang"),navigator.language].concat(d.call(null!=(l=navigator.languages)?l:[]),[navigator.userLanguage],[navigator.browserLanguage],["en-GB"])).compact().map(function(e){return u(e)}).unique().value(),t.exports={preferred:c,matches:a,normalizeLocale:u,is:function(e){return a(c[0],e)},mostPreferred:function(e,t){return i.chain(e).map(function(e){return i.find(t,o(a,e))}).compact().first().value()}}},{}],99:[function(e,t,n){var r,i,o,s;s=e(117),o=e(101),r=e("underscore"),i=e("locale").counting,t.exports=function(e,t,n){var o;return null==n&&(n={}),o=r.extend({count:String(t)},n),s(["counts",e,i(t)],o)}},{}],100:[function(e,t,n){var r,i,o;r=e("underscore"),i=e(117),o=function(e){try{return JSON.parse(e).message}catch(e){return null}},t.exports=function(e){var t,n;return t=r.isString(e)?o(e)||e:null!=(null!=(n=e.responseJSON)?n.message:void 0)?e.responseJSON.message:null!=e.message?o(e.message)||e.message:e.responseText,i(["server error",t])||t}},{}],101:[function(e,t,n){var r,i;i=e(117),r=e(76),t.exports=function(e,t,n){var o;return o=i(e,t,n),r("string"==typeof o,"babble: key "+e+" not found"),o}},{}],102:[function(e,t,n){var r,i,o,s;o=e(246),r=e("underscore"),i=e(76),s="Error",t.exports=function(e,t){var n,r,a,u;for(n=o([e,s].join("::")),r=0,a=t.length;a>r;r++)u=t[r],i(u!==s,u+" is the reserved base name!"),i(!(u in n),"You can't use "+u+" as the name of a custom error"),n[u]=o([e,u].join("::"),{},n);return n}},{}],103:[function(e,t,n){var r;r=e(104),t.exports=new(function(){function e(){}return e.prototype.markdownAsHtml=function(e,t){return null==t&&(t={}),null==e&&(e=""),""===e?e:r.description.format(e,t).output},e.prototype.bytes=function(e){var t,n,r,i,o,s,a;if(null==e)return"Unknown Size";for(a=["B","KB","MB","GB"],t=e,r=n=0,i=a.length;i>n;r=++n){if(s=a[r],1024>t||r===a.length-1)return o=Math.round(100*t)/100,o+" "+s;t/=1024}return"unknown"},e}())},{}],104:[function(e,t,n){var r,i,o,s,a,u,c,l;r=e(33),i=e(162),o=e(6),s=e(37),u=e("trello-markdown"),c=e(129),l=e("underscore"),a=e("emoji-map"),t.exports=window.TFM=new(function(){function e(){var e;e={lookupEmoji:this.lookupEmoji,lookupCardInfo:this.lookupCardInfo,lookupMember:this.lookupMember},e.shouldOpenLinkInNewTab=c.isExternalURL,this.description=new u(e),this.comments=new u(l.extend({restrict:{block:["blockquote","code","fencedCode","hr","list","newline","paragraph"],inline:["atMention","autolink","break","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},e)),this.checkItems=new u(l.extend({inlineOnly:!0,restrict:{inline:["atMention","autolink","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},e))}return e.prototype.lookupEmoji=function(e,t){var n,r,i;return e=e.toLowerCase(),null!=(n=null!=(r=t.textData)&&null!=(i=r.emoji)?i[e]:void 0)?n:a[e]},e.prototype.lookupMember=function(e,t){var n,i,o,a;return e=e.toLowerCase(),"card"===e||"board"===e?[e,!0]:(i=function(){return s.findOne("Member","username",e)},n=function(){return s.findOne("Member",function(t){var n;return n=t.get("fullName"),n?l.chain(n.toLowerCase().split(/\s+/)).filter(function(e){return e.length>=2}).contains(e).value():!1})},o=null!=(a=i())?a:n(),null!=o?[o.get("fullName"),r.isMe(o)]:/^[a-z0-9_]{3,}/.test(e)?[e,!1]:[null,!1])},e.prototype.lookupCardInfo=function(e,t){var n,r,i,a,u;return e=parseInt(e,10),a=null!=t&&null!=(u=t.board)?u.id:void 0,null==a&&null!=(i=o.getCurrentBoard())&&(a=i.id),n=s.findOne("Card",function(t){return t.get("idBoard")===a&&t.get("idShort")===e}),null!=n?{title:n.get("name"),url:o.getCardUrl(n)}:(r="Card "+e,{title:r,url:o.getCardUrlWithoutModels(a,e,r)})},e}())},{}],105:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v;a=0,s=function(e){return m(f(v(e)))},f=function(e){return r(i(h(e),8*e.length))},m=function(e){var t,n,r,i,o;try{}catch(e){t=e,a=0}for(n=a?"0123456789ABCDEF":"0123456789abcdef",i="",o=void 0,r=0;r<e.length;)o=e.charCodeAt(r),i+=n.charAt(o>>>4&15)+n.charAt(15&o),r++;return i},v=function(e){var t,n,r,i;for(n="",t=-1,r=void 0,i=void 0;++t<e.length;)r=e.charCodeAt(t),i=t+1<e.length?e.charCodeAt(t+1):0,r>=55296&&56319>=r&&i>=56320&&57343>=i&&(r=65536+((1023&r)<<10)+(1023&i),t++),127>=r?n+=String.fromCharCode(r):2047>=r?n+=String.fromCharCode(192|r>>>6&31,128|63&r):65535>=r?n+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|63&r):2097151>=r&&(n+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|63&r));return n},h=function(e){var t,n;for(n=Array(e.length>>2),t=0;t<n.length;)n[t]=0,t++;for(t=0;t<8*e.length;)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32,t+=8;return n},r=function(e){var t,n;for(n="",t=0;t<32*e.length;)n+=String.fromCharCode(e[t>>5]>>>t%32&255),t+=8;return n},i=function(e,t){var n,r,i,o,s,a,u,h,m;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;)a=n,u=r,h=i,m=o,n=c(n,r,i,o,e[s+0],7,-680876936),o=c(o,n,r,i,e[s+1],12,-389564586),i=c(i,o,n,r,e[s+2],17,606105819),r=c(r,i,o,n,e[s+3],22,-1044525330),n=c(n,r,i,o,e[s+4],7,-176418897),o=c(o,n,r,i,e[s+5],12,1200080426),i=c(i,o,n,r,e[s+6],17,-1473231341),r=c(r,i,o,n,e[s+7],22,-45705983),n=c(n,r,i,o,e[s+8],7,1770035416),o=c(o,n,r,i,e[s+9],12,-1958414417),i=c(i,o,n,r,e[s+10],17,-42063),r=c(r,i,o,n,e[s+11],22,-1990404162),n=c(n,r,i,o,e[s+12],7,1804603682),o=c(o,n,r,i,e[s+13],12,-40341101),i=c(i,o,n,r,e[s+14],17,-1502002290),r=c(r,i,o,n,e[s+15],22,1236535329),n=l(n,r,i,o,e[s+1],5,-165796510),o=l(o,n,r,i,e[s+6],9,-1069501632),i=l(i,o,n,r,e[s+11],14,643717713),r=l(r,i,o,n,e[s+0],20,-373897302),n=l(n,r,i,o,e[s+5],5,-701558691),o=l(o,n,r,i,e[s+10],9,38016083),i=l(i,o,n,r,e[s+15],14,-660478335),r=l(r,i,o,n,e[s+4],20,-405537848),n=l(n,r,i,o,e[s+9],5,568446438),o=l(o,n,r,i,e[s+14],9,-1019803690),i=l(i,o,n,r,e[s+3],14,-187363961),r=l(r,i,o,n,e[s+8],20,1163531501),n=l(n,r,i,o,e[s+13],5,-1444681467),o=l(o,n,r,i,e[s+2],9,-51403784),i=l(i,o,n,r,e[s+7],14,1735328473),r=l(r,i,o,n,e[s+12],20,-1926607734),n=d(n,r,i,o,e[s+5],4,-378558),o=d(o,n,r,i,e[s+8],11,-2022574463),i=d(i,o,n,r,e[s+11],16,1839030562),r=d(r,i,o,n,e[s+14],23,-35309556),n=d(n,r,i,o,e[s+1],4,-1530992060),o=d(o,n,r,i,e[s+4],11,1272893353),i=d(i,o,n,r,e[s+7],16,-155497632),r=d(r,i,o,n,e[s+10],23,-1094730640),n=d(n,r,i,o,e[s+13],4,681279174),o=d(o,n,r,i,e[s+0],11,-358537222),i=d(i,o,n,r,e[s+3],16,-722521979),r=d(r,i,o,n,e[s+6],23,76029189),n=d(n,r,i,o,e[s+9],4,-640364487),o=d(o,n,r,i,e[s+12],11,-421815835),i=d(i,o,n,r,e[s+15],16,530742520),r=d(r,i,o,n,e[s+2],23,-995338651),n=p(n,r,i,o,e[s+0],6,-198630844),o=p(o,n,r,i,e[s+7],10,1126891415),i=p(i,o,n,r,e[s+14],15,-1416354905),r=p(r,i,o,n,e[s+5],21,-57434055),n=p(n,r,i,o,e[s+12],6,1700485571),o=p(o,n,r,i,e[s+3],10,-1894986606),i=p(i,o,n,r,e[s+10],15,-1051523),r=p(r,i,o,n,e[s+1],21,-2054922799),n=p(n,r,i,o,e[s+8],6,1873313359),o=p(o,n,r,i,e[s+15],10,-30611744),i=p(i,o,n,r,e[s+6],15,-1560198380),r=p(r,i,o,n,e[s+13],21,1309151649),n=p(n,r,i,o,e[s+4],6,-145523070),o=p(o,n,r,i,e[s+11],10,-1120210379),i=p(i,o,n,r,e[s+2],15,718787259),r=p(r,i,o,n,e[s+9],21,-343485551),n=g(n,a),r=g(r,u),i=g(i,h),o=g(o,m),s+=16;return Array(n,r,i,o)},u=function(e,t,n,r,i,s){return g(o(g(g(t,e),g(r,s)),i),n)},c=function(e,t,n,r,i,o,s){return u(t&n|~t&r,e,t,i,o,s)},l=function(e,t,n,r,i,o,s){return u(t&r|n&~r,e,t,i,o,s)},d=function(e,t,n,r,i,o,s){return u(t^n^r,e,t,i,o,s)},p=function(e,t,n,r,i,o,s){return u(n^(t|~r),e,t,i,o,s)},g=function(e,t){var n,r;return n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16),r<<16|65535&n},o=function(e,t){return e<<t|e>>>32-t},t.exports=s},{}],106:[function(e,t,n){var r=[].slice;t.exports=function(){var e,t,n,i,o,s,a,u,c;for(a=2<=arguments.length?r.call(arguments,0,t=arguments.length-1):(t=0,[]),e=arguments[t++],n=0,o=a.length;o>n;n++){s=a[n],u=s.prototype;for(i in u)c=u[i],e.prototype[i]=c}return e}},{}],107:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h;r=e("jquery"),i=e(234),s=e(114),a=e("underscore"),c=0,d=window.sessionStorage,p=null!=(l=null!=d?d.status:void 0)?l:"active",u=null,h=null,"undefined"!=typeof document.hidden?(u="hidden",h="visibilitychange"):"undefined"!=typeof document.mozHidden?(u="mozHidden",h="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(u="msHidden",h="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(u="webkitHidden",h="webkitvisibilitychange"),t.exports=o={init:function(){setInterval(o.check,1e4),r(window).focus(function(){return o.addActivity()}),r(document).bind("keydown mousedown",function(){o.addActivity()}),o.getHidden=null!=u?function(){return document[u]}:function(){return!1},null!=h&&r(document).bind(h,function(e){return function(){return o.trigger("visibilitychange")}}(this))},addActivity:function(){var e;e=(new Date).getTime(),c=e,s.set("lastActivity",c),o.setStatus("active")},check:function(){var e;e=(new Date).getTime()-Math.max(c,s.enabled()?parseInt(s.get("lastActivity")):0),e>3e5&&o.setStatus("idle")},setStatus:function(e){e!==p&&(p=e,d&&(d.status=p),o.trigger("setStatus",p))},getStatus:function(){return p}},a.extend(o,i.Events)},{}],108:[function(e,t,n){var r,i,o,s,a;r=e("jquery"),i=e("react"),o=e("react-dom"),s=e(520),a=e("underscore"),t.exports=i.createClass({displayName:"Wrapper",componentWillMount:function(){var e;return"function"==typeof(e=this.props.view).getData?e.getData():void 0},componentDidMount:function(){var e,t;return t=o.findDOMNode(this),e=this.props.view.render().el,r(t).append(e),s.addHandler(this.props.view,{scope:"popover_view"})},componentWillUnmount:function(){return s.removeHandler(this.props.view)},render:function(){return i.createElement("div",a.pick(this.props,["className"]))}})},{}],109:[function(e,t,n){var r,i,o;r=e("hearsay"),o=e("xtend"),i=e(238),t.exports=o(r.mixin,{componentWillUnmount:function(){return this.unsubscribe()},syncState:function(e){return this.subscribe(e,i(this,"setState"))}})},{}],110:[function(e,t,n){var r,i;r=e("react"),i=e("xtend"),t.exports=function(e,t){return null==t&&(t={}),function(n){return r.createElement(e,i(t,n))}}},{}],111:[function(e,t,n){var r,i,o=[].slice;i=e("underscore"),t.exports=r=function(){function e(){}return e.prototype.setTimeout=function(e,t){var n;return null==this._scheduled_timeouts&&(this._scheduled_timeouts=[]),this._scheduled_timeouts.push(n=setTimeout(e,t)),n},e.prototype.setInterval=function(e,t){var n;return null==this._scheduled_intervals&&(this._scheduled_intervals=[]),this._scheduled_intervals.push(n=setInterval(e,t)),n},e.prototype.requestAnimationFrame=function(e){var t;return null==this._scheduled_frameRequests&&(this._scheduled_frameRequests=[]),this._scheduled_frameRequests.push(t=requestAnimationFrame(e)),t},e.prototype.callback=function(e){var t;return t=null!=this._scheduled_callbacks?this._scheduled_callbacks:this._scheduled_callbacks=[],this._scheduled_callbacks.push(e),function(){var n,r;return n=1<=arguments.length?o.call(arguments,0):[],r=t.indexOf(e),-1!==r?(t.splice(r,1),e.apply(this,n)):void 0}},e.prototype.cancelScheduled=function(){var e,t,n,r,i,o,s,a,u,c,l,d,p;if(null!=this._scheduled_callbacks)for(;this._scheduled_callbacks.length;)this._scheduled_callbacks.pop();if(null!=this._scheduled_intervals)for(u=this._scheduled_intervals,t=0,o=u.length;o>t;t++)n=u[t],clearInterval(n);if(null!=this._scheduled_timeouts)for(c=this._scheduled_timeouts,r=0,s=c.length;s>r;r++)p=c[r],clearTimeout(p);if(null!=this._scheduled_frameRequests)for(d=null!=(l=this._scheduled_frameRequests)?l:[],i=0,a=d.length;a>i;i++)e=d[i],cancelAnimationFrame(e)},e.prototype.defer=function(e){return this.setTimeout(e,1)},e.prototype.debounce=function(e,t){return null==t&&(t=1),this.dynamicDebounce(e,function(){return t})},e.prototype.dynamicDebounce=function(e,t){var n,r;return n=this.setTimeout.bind(this),r=null,function(){var i,o;i=arguments,o=function(t){return function(){r=null,e.apply(t,i)}}(this),clearTimeout(r),r=n(o,t.apply(this,i))}},e.prototype.throttle=function(e,t,n){var r,o,s,a,u,c,l,d,p,h,m;return null==n&&(n={}),o=r=d=h=null,a=null!=(c=n.leading)?c:!0,m=null!=(l=n.trailing)?l:!0,p=this.setTimeout.bind(this),u=null,s=function(){return u=a?i.now():0,h=null,d=e.apply(o,r),o=r=null},function(){var n,c;return n=i.now(),null!=u||a||(u=n),c=t-(n-u),o=this,r=arguments,0>=c?(clearTimeout(h),h=null,u=n,d=e.apply(o,r),o=r=null):!h&&m&&(h=p(s,c)),d}},e}()},{}],112:[function(e,t,n){t.exports=e(113)(window.sessionStorage)},{}],113:[function(e,t,n){t.exports=function(e){return{enabled:function(){return null!=e},set:function(t,n){try{return null!=e?e[t]=JSON.stringify(n):void 0}catch(e){}},get:function(e){var t,n;if(n=this.getRaw(e),!n)return null;try{return JSON.parse(n)}catch(e){return t=e,null}},getRaw:function(t){return null!=e?e[t]:void 0},unset:function(t){return null!=this.getRaw(t)&&null!=e?delete e[t]:void 0}}}},{}],114:[function(e,t,n){t.exports=e(113)(window.localStorage)},{}],115:[function(e,t,n){var r,i;r=e(114),i=e(45),t.exports=new(function(){function e(){}return e.prototype.delta=r.get("serverTimeDelta"),e.prototype.updateServerTime=function(e){return this.delta=new Date(e)-new Date,r.set("serverTimeDelta",this.delta),i("time","delta",this.delta)},e.prototype.serverToClient=function(e){return new Date(new Date(e)-this.delta)},e}())},{}],116:[function(e,t,n){var r,i,o,s,a,u,c,l,d;r=e("jquery"),u=e("underscore"),i=e(234),c=e(143),l=e(493).getTypes,d=e(136),o=e(97),s=e(20),a=function(){function e(){this.value="",r(document).keydown(function(e){return function(t){var n,i,a;if(n=o.getKey(t),e.value&&(t.ctrlKey||t.metaKey)){if(r(t.target).is("#clipboard"))return void(n===s.C&&e.clearCut());if(!r(t.target).is("input:visible,textarea:visible")&&!(("function"==typeof window.getSelection&&null!=(i=window.getSelection())?i.toString():0)||(null!=(a=document.selection)?a.createRange().text:0)))return u.defer(function(){var t;return t=r("#clipboard-container"),t.empty().show(),r('<div id="clipboard" contenteditable="true"></div>').text(e.value).appendTo(t).focus().select(),d(document.getElementById("clipboard"))})}}}(this)),r(document).keyup(function(e){return function(t){var n;return e.isClipboard(t.target)&&(n=r("#clipboard").text(),""===n&&e.setCut(e.value)),e.checkForPastedImage()}}(this)),r(document).on("paste",function(e){return function(t){return u.isEmpty(l(t))||e.cancelPasteImage(),setTimeout(e.clearCut.bind(e),1)}}(this))}return e.prototype.set=function(e){this.value=e},e.prototype.setCut=function(e){try{localStorage.cut=e}catch(e){}},e.prototype.getCut=function(){try{return localStorage.cut}catch(e){}return null},e.prototype.clearCut=function(){try{delete localStorage.cut}catch(e){}},e.prototype.isCut=function(e){return e===this.getCut()},e.prototype.isClipboard=function(e){return"clipboard"===e.id},e.prototype.clear=function(){return r("#clipboard-container").empty().hide()},e.prototype.checkForPastedImage=function(){return clearTimeout(this.pasteImageTimeout),this.pasteImageTimeout=setTimeout(function(e){return function(){var t,n;t=r("#clipboard-container").find("img"),e.clear(),t.length>0&&(n=t.attr("src"),/^data:/.test(n)&&e.trigger("pasteImage",c(n)))}}(this),1)},e.prototype.cancelPasteImage=function(){return clearTimeout(this.pasteImageTimeout),this.clear()},e}(),u.extend(a.prototype,i.Events),t.exports=new a},{}],117:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m;u=e(36).locales,o=e(77),c=e(253),s=e(238),i=e(76),r=e("underscore"),d=r.clone(e("locale").strings),l=r.pick(e("locale"),"axis","exports","labels","templates","billing");for(a in l)p=l[a],i(!(a in d)),d[a]=p;m=o.makeVisitor(s.id,function(e,t,n){return null==n&&(n={}),i(t.hasOwnProperty(e),"'"+e+"' not found in "+JSON.stringify(t)),p=t[e],i("string"==typeof p,"I don't know how to convert values into strings. Please use a localized conversion function and pass me the string result."),n.raw?p:r.escape(p)}),h=s(o.visit,d),t.exports=function(e,t,n){var r;return null==t&&(t={}),null!=(r=h(e,m,t,n))?r.join(""):void 0}},{}],118:[function(e,t,n){var r,i,o;r=e(33),i=e("underscore"),o=e("moment"),t.exports=function(){var e,t,n,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C;if(r.isLoggedIn()){for(c=r.me(),k=function(e){var t,n,r,i,o;if(n=e+"",t=n.match(/\(([^\)]+)\)$/)||n.match(/([A-Z]+|UTC[+-]\d{4}) [\d]{4}$/))for(t=t[1],/\s/.test(t)&&(t=t.replace(/(\S)\S*/g,function(e,t){return t})),r=null!=(o=t.toUpperCase().match(/[A-Z]/g))?o:[],t=r.join("");t.length<2;)t+="?";else i=e.getTimezoneOffset(),t="UTC"+(0>i?"+":"-")+("00"+Math.floor(Math.abs(i)/60)).substr(-2)+":"+("00"+Math.abs(i)%60).substr(-2);return t},g=v=n=null,t=new Date,g=t.getTimezoneOffset(),w=k(t),h=6e4,s=a=0;12>=a;s=++a)if(t=o(t).add(30,"days").toDate(),t.getTimezoneOffset()!==g){n=t;break}if(null!=n){for(v=n.getTimezoneOffset(),d=(new Date).getTime(),l=n.getTime(),e=0;l>d+h/2&&30>e;)if(e++,p=Math.floor((d+l)/2),f=new Date(p).getTimezoneOffset(),f===g)d=p;else{if(f!==v)break;l=p}_=k(n),n=new Date(h*Math.floor(l/h)).toISOString()}m={},y={offsetCurrent:g,timezoneCurrent:w,offsetNext:v,timezoneNext:_,dateNext:n};for(u in y)C=y[u],null!=C&&(m[u]=C);return b=c.getPref("timezoneInfo"),i.isEqual(m,b)?void 0:c.run("timezoneInfo",m)}}},{}],119:[function(e,t,n){var r;r=e("underscore"),t.exports=function(e){var t;return t=r.reduce(e.split(","),function(e,t){var n,r,i;return i=t.split(":"),n=i[0],r=i[1],null!=r?(null==e[n]&&(e[n]=[]),e[n].push(r)):e[n]=!0,e},{}),function(e){var n,i;return n=t[e.get("type")],null==n?!1:n===!0?!0:(i=e.get("data").old,null!=i&&r.any(n,function(e){return null!=i[e]}))}}},{}],120:[function(e,t,n){var r=[].slice;t.exports=function(){var e,t,n,i,o,s,a,u,c,l,d,p;if(e=2<=arguments.length?r.call(arguments,0,n=arguments.length-1):(n=0,[]),l=arguments[n++],t=e[0],d=2<=e.length?r.call(e,1):[],null==t)return 0;if(d.length>0)for(i=o=0,a=t.length;a>o;i=++o)for(p=t[i],s=0,u=d.length;u>s;s++)if(c=d[s],c.length<=i||!l(p,c[i]))return i;return t.length}},{}],121:[function(e,t,n){var r;r=e("underscore"),t.exports=function(e,t){return r.reject(e,function(e){return e.id===t.id})}},{}],122:[function(e,t,n){var r;r=e("hearsay"),t.exports=function(e,t){return new r.ContinuousSignal(function(n){var r,i,o,s,a;return i=e.get(),r=Date.now(),n(i),o=null,s=function(e){return i=e,r=Date.now(),n(e)},t>0?(a=e.subscribe(function(e){var n;return clearTimeout(o),i!==e?(n=t-(Date.now()-r),0>=n?s(e):o=setTimeout(function(){return s(e)},n)):void 0}),function(){return a(),clearTimeout(o)}):(a=e.subscribe(function(e){return cancelAnimationFrame(o),o=requestAnimationFrame(function(){return n(e)})}),function(){return a(),cancelAnimationFrame(o)})})}},{}],123:[function(e,t,n){var r,i;r=e("underscore"),i=e(130),t.exports=function(e,t,n){var o;return null==n&&(n=function(e,t,n){return n}),(o=function(e,s){var a;return(a=t(e,s))?n(e,s,a):r.isArray(e)?e.map(o):i(e)?r.mapObject(e,o):e})(e)}},{}],124:[function(e,t,n){var r;t.exports=function(){try{return new window.CustomEvent("testEvent"),window.CustomEvent}catch(e){return r=function(e,t){var n;return null==t&&(t={bubbles:!1,cancelable:!1,detail:void 0}),n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},r.prototype=window.Event.prototype,r}}()},{}],125:[function(e,t,n){var r;r=e(124),t.exports=function(e,t,n){var i,o,s,a,u,c;for(i=new r(t,{bubbles:!1,cancelable:!1,detail:null!=(a=n.detail)?a:void 0}),u=!1,i.stopPropagation=function(){return u=!0,r.prototype.stopPropagation.apply(this,arguments)},o=0,s=e.length;s>o;o++)c=e[o],u||c.dispatchEvent(i)}},{}],126:[function(e,t,n){var r;r=e(124),t.exports=function(e,t,n){var i,o,s,a;return null==n&&(n={}),i=new r(t,{bubbles:null!=(o=n.bubbles)?o:!0,cancelable:null!=(s=n.cancelable)?s:!1,detail:null!=(a=n.detail)?a:void 0}),e.dispatchEvent(i)}},{}],127:[function(e,t,n){var r,i,o,s,a;o=e("underscore"),a=e(17),r=a.GOLD_RECOMMENDATION,i=a.GOLD_UPGRADE,s=function(e){return o.filter(e.get("credits"),function(e){var t;return!e.applied&&e.count>0&&("invitation"===(t=e.type)||"promoCode"===t)})},t.exports=function(e){var t,n,a,u;return e.isInAnyBCOrganization()?null:(n=e.isGold(),n&&!e.isDismissed(i)?{type:i}:e.isDismissed(r)?null:(t=s(e),(u=o.reduce(t,function(e,t){return e+t.count},0))?(u>12&&(u=12),a=o.chain(t).filter(function(e){return"invitation"===e.type&&null!=e.memberInvited}).pluck("memberInvited").pluck("fullName").value(),{invitedMemberNames:a,numCreditMonths:u,type:r}):null))}},{}],128:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=[].slice,j=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};p=e(114),h=e(129),m=e("underscore"),C=e(85),_=e(17),o=_.GOLD_RECOMMENDATION,s=_.GOLD_UPGRADE,k=e(26),
c=k.ORG_TYPE_ENTERPRISE,u=k.ORG_TYPE_BUSINESS_CLASS,l=k.ORG_TYPE_FREE,d=[c,u],i=[96,97,101],r={ENTERPRISE_UPGRADE:{type:"ENTERPRISE_UPGRADE",heading:"welcome heading ent",subheading:"welcome subheading-get set up",isUpgrade:!0,orgType:c,doesIncludeGold:!0,tips:[{key:"tip-power-ups",url:"https://trello.com/power-ups?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-member"},{key:"tip-team playbooks",url:"https://trello.com/teams?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-member"},{key:"tip-enterprise guide",url:"https://trello.com/guide/enterprise?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-member"}]},ENTERPRISE_UPGRADE_ADMIN:{type:"ENTERPRISE_UPGRADE_ADMIN",heading:"welcome heading ent",subheading:"welcome subheading-get set up",orgType:c,doesIncludeGold:!0,isUpgrade:!0,tips:[{key:"tip-set up enterprise",url:"https://trello.com/guide/enterprise?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-admin"},{key:"tip-power-ups",url:"https://trello.com/power-ups?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-admin"},{key:"tip-sso",url:"https://trello.com/guide/enterprise/sysadmin.html?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-upgrade-admin"}]},ENTERPRISE_JOIN:{type:"ENTERPRISE_JOIN",heading:"welcome heading ent",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:c,doesIncludeGold:!0,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-explore teams boards",url:"https://trello.com/guide/board_basics.html?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-onboard"},{key:"tip-get collaborative",url:"https://trello.com/guide/collaborate.html?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-onboard"}]},ENTERPRISE_INQUIRY:{type:"ENTERPRISE_INQUIRY",heading:"welcome heading",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:c,doesIncludeGold:!0,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-onboard team",url:"https://trello.com/guide/getting-started?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-setup"},{key:"tip-review guide",url:"https://trello.com/guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=ent-setup"}]},BC_UPGRADE:{type:"BC_UPGRADE",heading:"welcome heading bc",subheading:"welcome subheading-get set up",isUpgrade:!0,orgType:u,doesIncludeGold:!0,tips:[{key:"tip-power-ups",url:"https://trello.com/power-ups?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-member"},{key:"tip-how teams use trello",url:"https://trello.com/teams?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-member"},{key:"tip-bc guide",url:"http://help.trello.com/article/714-business-class-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-member"}]},BC_UPGRADE_ADMIN:{type:"BC_UPGRADE_ADMIN",heading:"welcome heading bc",subheading:"welcome subheading-get set up",isUpgrade:!0,orgType:u,doesIncludeGold:!0,tips:[{key:"tip-set up team",url:"http://help.trello.com/article/710-onboarding-to-business-class?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-admin"},{key:"tip-power-ups",url:"https://trello.com/power-ups?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-admin"},{key:"tip-bc guide",url:"http://help.trello.com/article/714-business-class-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-upgrade-admin"}]},BC_JOIN:{type:"BC_JOIN",heading:"welcome heading bc",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:u,doesIncludeGold:!0,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-explore how teams boards work",url:"https://trello.com/guide/board_basics?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-onboard"},{key:"tip-bc guide",url:"http://help.trello.com/article/714-business-class-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-onboard"}]},BC_SIGNUP:{type:"BC_SIGNUP",heading:"welcome heading bc",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:u,doesIncludeGold:!0,tips:[{key:"tip-open tutorial board",hasLink:!1},{key:"tip-share guide with team",url:"https://trello.com/guide/getting-started?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-setup"},{key:"tip-bc guide",url:"http://help.trello.com/article/714-business-class-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=bc-setup"}]},FREE_JOIN:{type:"FREE_JOIN",heading:"welcome heading",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:l,doesIncludeGold:!1,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-explore teams boards",url:"https://trello.com/guide/board_basics.html?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-onboard"},{key:"tip-get collaborative",url:"https://trello.com/guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-onboard"}]},FREE_SIGNUP:{type:"FREE_SIGNUP",heading:"welcome heading",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:l,doesIncludeGold:!1,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-create teams first board",url:"https://trello.com/guide/getting-started?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-setup"},{key:"tip-review guide",url:"https://trello.com/guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-setup"}]},NO_TEAM_NEW_MEMBER:{type:"NO_TEAM_NEW_MEMBER",heading:"welcome heading",subheading:"welcome subheading-get started",isUpgrade:!1,orgType:null,doesIncludeGold:!1,tips:[{key:"tip-open tutorial board",url:!1},{key:"tip-create team",url:"https://trello.com/guide/getting-started?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-create-team"},{key:"tip-review guide",url:"https://trello.com/guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=free-create-team"}]}},Object.keys(r).forEach(function(e){return function(e,t){return r[e].precedence=t}}(this)),a="nux-boards-page-banner",w=function(e){return function(e){var t;return t=h.idToDate(e.id),!e.isDismissed(a)&&t>h.dateBefore({weeks:2})&&t>1493824588e3}}(this),b=function(e){return function(e,t){return["nux-boards-page",e,t,"banner"].join("-")}}(this),f=function(e){return function(e,t){return m.any(t,function(t){return e.isDismissed(t)})}}(this),v=function(e){return function(e){return p.get("didMemberInquiryForEnterprise")===e.id}}(this),g=function(e){return function(){var e;return null!=(e=C("nuxBanners"))?e.get("showNuxBanners"):void 0}}(this),y=function(e){return function(e,t){var n,o,s,a,d,p,h,y,_,k;return h=t.owned(),s=b(u,t.id),p=b(l,t.id),_=w(e),t.belongsToRealEnterprise()?(a=t.get("idEnterprise"),d=b(c,a),y=e.get("idEnterprisesAdmin").indexOf(a)>=0,o=f(e,[s,p])||!_,k=function(){switch(!0){case y:return r.ENTERPRISE_UPGRADE_ADMIN;case!y&&o:return r.ENTERPRISE_UPGRADE;case!y&&!o&&g():return r.ENTERPRISE_JOIN;default:return null}}(),null===k?null:m.extend({id:d,idBannersToDismiss:[d,s,p]},k)):t.isPremium()?m.intersection(t.get("products"),i).length>0?null:(o=f(e,[p])||!_,k=function(){switch(!0){case h&&o:return r.BC_UPGRADE_ADMIN;case h&&!o&&g():return r.BC_SIGNUP;case!h&&o:return r.BC_UPGRADE;case!h&&g():return r.BC_JOIN;default:return null}}(),null===k?null:m.extend({id:s,idBannersToDismiss:[s,p]},k)):_?(n=v(e),k=function(){switch(!0){case n&&g():return r.ENTERPRISE_INQUIRY;case h&&g():return r.FREE_SIGNUP;case!h&&g():return r.FREE_JOIN;default:return null}}(),null===k?null:m.extend({id:p,idBannersToDismiss:[p]},k)):null}}(this),t.exports=function(e){return function(e){var t,n,i,u,c,l;return u=w(e)&&g()?m.extend({id:a,idBannersToDismiss:[a]},r.NO_TEAM_NEW_MEMBER):null,c=e.organizationList.map(function(t){return y(e,t)}),n=m.chain([u].concat(x.call(c))).compact().reject(function(t){return e.isDismissed(t.id)}),t=m.chain(n).sortBy(function(e){return e.precedence}).first().value(),i=m.chain(n).pluck("idBannersToDismiss").flatten().value(),t&&(l=t.orgType,j.call(d,l)>=0)&&(i.push(s),i.push(o)),{bannerToDisplay:t,idBannersToDismiss:i}}}(this)},{}],129:[function(e,t,n){var r,i,o,s,a,u,c,l=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},d={}.hasOwnProperty;r=e("jquery"),i=e(20),a=e("underscore"),u=e(45),c=e(259),o=e("bluebird"),t.exports=s={spacing:16384,checkId:function(e){return"ObjectID"===(null!=e?e.constructor.name:void 0)||24===(null!=e?e.length:void 0)&&/^[a-f0-9]*$/.test(e)},capitalize:function(e){return a.isString(e)&&!a.isEmpty(e)?e[0].toUpperCase()+e.substr(1):e},pluralize:function(e){return e+"s"},imageFileExtensions:["png","gif","jpg","jpeg","bmp","ico"],extensionIsImage:function(e){var t,n;return t=null!=(n=s.fileExt(e))?n.toLowerCase():void 0,l.call(s.imageFileExtensions,t)>=0},fileExt:function(e){var t,n,r;return null!=(t=null!=(n=/\.([a-z0-9]+)$/i.exec(e))&&null!=(r=n[1])?r.toLowerCase():void 0)?t:null},traverse:function(e,t){var n,r,i;if(a.isEmpty(t)||!e)return e;if(a.isArray(t)){for(n=0,i=t.length;i>n&&(r=t[n],e=e[r],e);n++);return e}return e[t]},escapeForRegex:function(e){return null!=e?e.replace(/[-[\]{}()*+?.,\\\/^$|#\s]/g,"\\$&"):void 0},makeSlug:function(e,t){var n;return null==t&&(t="-"),e&&(n=s.removeAccents(e.toLowerCase()).replace(/[^a-z0-9]+/gi,t).replace(RegExp("^"+t+"|"+t+"$","g"),""),n.length>128&&(n=n.substr(0,128))),n||t},removeAccents:function(e){return e.replace(/[]/g,"a").replace(//g,"ae").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"g").replace(/[]/g,"h").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(//g,"oe").replace(//g,"r").replace(/[]/g,"s").replace(//g,"ss").replace(/[]/g,"u").replace(/[]/g,"y")},isShortId:function(e){return/^[0-9]{1,8}$/.test(e)},isShortLink:function(e){return a.isString(e)&&/^[a-zA-Z0-9]{8}$/.test(e)},getMs:function(e){var t,n,r,i,o,s,a,u;return t=e.days,n=e.hours,r=e.minutes,s=e.seconds,o=e.ms,u=e.years,i=e.months,a=e.weeks,null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),null==s&&(s=0),null==o&&(o=0),u&&(t+=365*u),i&&(t+=30*i),a&&(t+=7*a),n+=24*t,r+=60*n,s+=60*r,o+=1e3*s},getSeconds:function(e){return this.getMs(e)/1e3},dateAfter:function(e){var t,n;return t=null!=(n=null!=e?e.date:void 0)?n:new Date,new Date(t.getTime()+this.getMs(e))},dateBefore:function(e){var t,n;return t=null!=(n=null!=e?e.date:void 0)?n:new Date,new Date(t.getTime()-this.getMs(e))},compareMemberType:function(e,t,n,r){var i,o,s,a,u;switch(null==r&&(r={}),u=r.mode,null==u&&(u="standard"),u){case"members":o=[["normal","admin"]];break;case"commentDelete":o=[["normal","org"],["admin"]];break;default:o=[["org"],["normal"],["admin"]]}return i=function(t){var n,r,i,s,a;for(a=e.getMemberType(t),i=r=0,s=o.length;s>r;i=++r)if(n=o[i],l.call(n,a)>=0)return i;return-1},s=i(t),a=i(n),s>a?1:a>s?-1:0},idToDate:function(e){return new Date(1e3*parseInt(null!=e?e.substr(0,8):void 0,16))},tryToExcludeEXIFRotated:function(e){var t,n;return t=a.reduce(e,function(e,t){var n,r,i;return r=t.scaled,i=t.width,n=t.height,r&&i!==n?n>i?e+1:e-1:e},0),n=t>0,a.filter(e,function(e){var t,r;return r=e.width,t=e.height,n?t>=r:r>=t})},preferScaledPreviews:function(e){var t;return t=this.tryToExcludeEXIFRotated(a.filter(e,function(e){return e.scaled})),a.isEmpty(t)?e:t},smallestPreviewBiggerThan:function(e,t,n){var r,i,o,s;for(null==e&&(e=[]),null==t&&(t=0),null==n&&(n=0),s=[this.preferScaledPreviews(e),this.tryToExcludeEXIFRotated(e)],i=0,o=s.length;o>i;i++)e=s[i],a.isEmpty(r)&&(r=a.filter(e,function(e){return e.width>=t&&e.height>=n}));return this.smallestPreview(r)},previewBetween:function(e,t,n,r,i){var o;return null==e&&(e=[]),o=a.filter(this.preferScaledPreviews(e),function(e){var o,s;return t<=(o=e.width)&&r>=o&&n<=(s=e.height)&&i>=s}),this.biggestPreview(o)},biggestPreview:function(e){return null==e&&(e=[]),0===e.length?null:a.max(this.preferScaledPreviews(e),function(e){return Math.min(e.width,e.height)})},smallestPreview:function(e){return null==e&&(e=[]),0===e.length?null:a.min(this.preferScaledPreviews(e),function(e){return Math.max(e.width,e.height)})},rotateArr:function(e,t){return a.flatten([e.slice(-t),e.slice(0,-t)],!0)},stopPropagation:function(e){return null!=e?e.stopPropagation():void 0},preventDefault:function(e){return null!=e?e.preventDefault():void 0},stop:function(e){return s.stopPropagation(e),s.preventDefault(e)},checkEmail:function(e,t){return null==t&&(t=""),RegExp('^[^"@\\s\\[\\]\\(\\),:;<>\\\\]+@[-a-z0-9\\.'+t+"]+\\.[a-z"+t+"]+$","i").test(e)},removeDomainFromEmailAddress:function(e,t){return null==t&&(t=""),e.replace(RegExp("@[-a-z0-9\\."+t+"]+\\.[a-z"+t+"]+$"),"")},validName:function(e){return e.length>=1},spaces:function(e){for(this.longStr||(this.longStr=" ");this.longStr.length<e;)this.longStr=this.longStr+this.longStr;return this.longStr.substr(0,e)},_pad:function(e,t,n,r){var i,o;return null==n&&(n=" "),e=e.toString(),e.length>t?e.substr(0,t):(i=t-e.length,o=" "===n?this.spaces(i):this.times(n,i),r?o+e:e+o)},rpad:function(e,t,n){return this._pad(e,t,n,!1)},lpad:function(e,t,n){return this._pad(e,t,n,!0)},times:function(e,t){var n;return a.map(function(){n=[];for(var e=0;t>=0?t>e:e>t;t>=0?e++:e--)n.push(e);return n}.apply(this),function(){return e}).join("")},truncate:function(e,t){var n;return!(null!=e?e.length:void 0)||e.length<t?e:(n=e.substr(0,e.lastIndexOf(" ",t)),n?n:e.substr(0,t))},scrollToTop:function(){return r(window).scrollTop(0)},getProtocol:function(e){var t,n;return e&&null!=(t=null!=(n=/^([a-z]+):/i.exec(e))?n[1]:void 0)?t:""},makeHttp:function(e){return e?(e=e.replace(/^[a-z]*:\/*/i,""),"http://"+e):""},sanitizeWebAddress:function(e){var t;return"http"!==(t=s.getProtocol(e))&&"https"!==t?s.makeHttp(e):e},isInPosition:function(e,t,n){var r;return null==(null!=n?n.id:void 0)?!1:(r=t[e],(null!=r?r.id:void 0)===n.id)},calcPos:function(e,t,n,r,i){var o,a,u,c,l,d,p,h,m;return a=65536,l=t.select(function(e){return(!(null!=n&&n.id===e.id)||i)&&(!r||r(e))}),s.isInPosition(e,l,n)?null!=(m=n.pos)?m:n.get("pos"):(o=Math.min(Math.max(e,0),l.length),c=l[o-1],u=l[o],d=(null!=n?n.get("pos"):void 0)||-1,h=null!=c?c.get("pos"):-1,p=null!=u?u.get("pos"):-1,-1===p?n&&d>h?d:h+a:n&&d>h&&p>d?d:h>=0?(p+h)/2:p/2)},randomWait:function(e,t){return Math.floor(e+Math.random()*t)},toTitleCase:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},calcBoardLayout:function(){return r(window).trigger("resize")},navMenuList:function(e,t,n){var r,o,s,u,c,l,d,p;return s=e.find(t),p=s.filter(".selected").first()[0],d=a.indexOf(s,p),o=s[0],u=s[s.length-1],l=0>d-1?u:s[d-1],c=d+1>s.length?o:s[d+1],n===i.ArrowDown&&(r=c),n===i.ArrowUp&&(r=l),this.selectMenuItem(e,t,r)},selectMenuItem:function(e,t,n){return e.find(t).removeClass("selected"),r(n).addClass("selected")},insertSelection:function(e,t,n,i){var o,a,u,c,l;return e=s.getElem(e),o=r(e),l=o.val(),null!=n||null!=i?(u=l.substring(0,n),a=l.substring(i),this.setCaretPosition(e,n+(""+t).length)):(u=l,a=""),c=/\S$/.test(u)?" ":"",o.val(u+c+t+a),this.setCaretPosition(e,u.length+c.length+t.length),o.focus(),o.trigger("mutated")},_nextWhitespace:function(e,t){var n,r;return n=e.indexOf("\n",t),-1===n&&(n=1/0),r=e.indexOf(" ",t),-1===r&&(r=1/0),Math.min(n,r,e.length)},getWordFromIndex:function(e,t){var n,r,i,o;for(i=Math.max(e.lastIndexOf("\n",t-1),e.lastIndexOf(" ",t-1)),i+=1;/[()\[\]\/\\;"'&]|:@/.test(e[i]);)i++;return n=t,r=n-i,o=e.slice(i,n),{start:i,end:n,length:r,str:o}},getWordFromCaret:function(e){var t,n;return e=s.getElem(e),n=r(e).val(),t=this.getCaretPosition(e),this.getWordFromIndex(n,t)},getLineFromIndex:function(e,t){var n,r,i,o;return i=e.lastIndexOf("\n",t-1),i+=1,n=this._nextWhitespace(e,t),r=n-i,o=e.slice(i,n),{start:i,end:n,length:r,str:o}},getLineFromCaret:function(e){var t,n;return e=s.getElem(e),n=r(e).val(),t=this.getCaretPosition(e),this.getLineFromIndex(n,t)},getCaretPosition:function(e){var t,n,r;return e=s.getElem(e),null!=e.selectionStart?t=e.selectionStart:l.call(document,"selection")>=0&&(e.focus(),n=document.selection.createRange(),r=document.selection.createRange().text.length,n.moveStart("character",-e.value.length),t=n.text.length-r),t},setCaretPosition:function(e,t){var n;return e=s.getElem(e),e.setSelectionRange?(e.focus(),e.setSelectionRange(t,t)):e.createTextRange?(n=e.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()):void 0},setCaretAtEnd:function(e){var t;return e?(t=r(e).val().length,this.setCaretPosition(e,t)):void 0},getLastWord:function(e){var t;return t=r(e).val().split(" "),a.last(t)},removeWordAtIndex:function(e,t){var n,r,i;return i=s.getWordFromIndex(e,t),n=e.slice(0,i.start),r=e.slice(i.end),n+r},stripExtraSpaces:function(e){return null!=e?e.replace(/\s+/g," ").trim():void 0},getMemNameArray:function(e){return a.chain(["username","fullName","initials"]).map(function(t){var n;return null!=(n=e.get(t))?n.toLowerCase().split(/\s+/):void 0}).compact().flatten().value()},getMemNameArrayFromId:function(e,t){var n;return null!=(n=e.get("Member",t))?this.getMemNameArray(n):[]},filterMembers:function(e,t,n){var r,i,o,u,c,l;for(l=RegExp("^"+s.escapeForRegex(t),"i"),i=[],r=0,o=n.length;o>r;r++)u=n[r],c=s.getMemNameArrayFromId(e,u),a.find(c,function(e){return l.test(e)})&&i.push(u);return i},getQueryParameter:function(e,t){var n,r,i,o;return null==t&&(t=""),r=RegExp("[?&]"+e+"=([^?&]*)"),n=null!=(i=r.exec(location.search))?i:r.exec(location.hash),o=null!=n?n[1]:void 0,null!=o?decodeURIComponent(o.replace(/\+/g," ")):t},validFileSize:function(e,t){return null==t&&(t=10485760),(null!=e?e.size:void 0)<t},uploadFile:function(e,t,n){var i,o;return o=a.uniqueId("iframe"),i=r("<iframe>").attr("name",o).css("display","none").appendTo("body").load(function(e){var t,r;a.defer(function(){return i.remove()});try{r=i.contents().text()}catch(e){return t=e,n("File too large")}return/File too large/i.test(r)?n(r):n()}),t.closest("form").attr("target",o).find("input[name=token]").val(e).end().submit(),a.defer(function(){return t.val("")})},hasValidInviteTokenFor:function(e){var t,n;return n=this.inviteTokenFor(e.id),null==n?!1:(t=e.modelCache.get("Member",n.split("-")[0]),null==t?!1:"virtual"===e.getMemberType(t)?!0:e.isMember(t)&&"ghost"===e.get("memberType"))},inviteTokenFor:function(e){return r.cookie("invite-token-"+e)},invitationTokens:function(){var e,t,n,i;for(t=/invite-token-[-a-f0-9]*/g,i=[];null!=(e=null!=(n=t.exec(document.cookie))?n[0]:void 0);)i.push(r.cookie(e));return i},getElem:function(e){return e instanceof r?e[0]:e},getElemTransformMatrix:function(e){var t;return t=e.css("-webkit-transform")||e.css("-moz-transform")||e.css("-ms-transform")||e.css("-o-transform")||e.css("transform"),"none"!==t?t:null},getMatrixDegrees:function(e){var t,n,r,i,o;return o=e.split("(")[1].split(")")[0].split(","),t=o[0],n=o[1],r=o[2],i=o[3],Math.round(Math.atan2(n,t)*(180/Math.PI))},getMatrixScale:function(e){var t,n,r,i,o;return o=e.split("(")[1].split(")")[0].split(","),t=o[0],n=o[1],r=o[2],i=o[3],Math.sqrt(t*t+n*n)},getDegrees:function(e,t){return Math.round(Math.atan2(e,t)*(180/Math.PI))},calcDistanceFromCenter:function(e,t,n){var r;return r=Math.pow(t-(e.offset().left+e.width()/2),2)+Math.pow(n-(e.offset().top+e.height()/2),2),Math.floor(Math.sqrt(r))},_runShredders:function(){var e,t,n,r,i,o;for(o=s._shredders,i=new Date,s._shredders=[],e=0,n=0,r=o.length;r>n;n++)t=o[n],i>t.time?(t.fn(),e++):s._shredders.push(t);return u("shred","Shred "+e+" objects, "+s._shredders.length+" left"),s._shredTimeout=null,s._startShredTimer()},_startShredTimer:function(){return!s._shredTimeout&&s._shredders.length>0?null!=s._shredTimeout?s._shredTimeout:s._shredTimeout=setTimeout(s._runShredders,s.getMs({seconds:3})):void 0},shred:function(e){return null==s._shredders&&(s._shredders=[]),s._shredders.push({time:s.dateAfter({seconds:20}),fn:function(t){return function(){var t,n;n=[];for(t in e)d.call(e,t)&&n.push(delete e[t]);return n}}(this)}),s._startShredTimer()},extendEvents:function(e){return function(){return a.defaults(e,a.result(this.constructor.__super__,"events"))}},relativeUrl:function(e){return e.replace(RegExp("^"+siteDomain),"")},isTextElement:function(e){var t,n;if(e instanceof HTMLTextAreaElement)return!0;if(!(e instanceof HTMLInputElement))return!1;if("text"===(t=e.type)||"email"===t||"password"===t||"search"===t)return!0;if("submit"===(n=e.type)||"reset"===n||"button"===n||"checkbox"===n)return!1;try{return e.selectionStart,!0}catch(e){return!1}},withoutAlteringSelection:function(e){var t,n,i,o,a,u,c;n=document.activeElement,t=r(n),a=t.is(":focus"),null!=n&&s.isTextElement(n)?(n.selectionStart?(u=n.selectionStart,o=n.selectionEnd,i=n.selectionDirection):c=this.getCaretPosition(n),e(),u?n.setSelectionRange(u,o,i):c&&this.setCaretPosition(n,c),a&&t.focus()):e()},extendParentClassName:function(e){return function(){return a.result(this.constructor.__super__,"className")+(" "+e)}},waitForImageLoad:function(e,t,n){var r;return r=new Image,r.onload=function(){return t(r)},r.onerror=function(){return"function"==typeof n?n(r):void 0},r.src=e},bugzscout:function(e,t){var n,i,o,s,a,u;return u=e.project,n=e.area,i=e.description,o=e.extra,a=e.me,s=e.forceNew,null==s&&(s=0),r.ajax({url:"//trello.fogbugz.com/ScoutSubmit.asp",type:"POST",data:{ScoutUserName:"Bugzscout",ScoutProject:u,ScoutArea:n,Description:i,Extra:o,Email:'"'+a.fullName+'" <'+a.email+">",ForceNewBug:s,FriendlyResponse:0},success:function(){return"function"==typeof t?t():void 0},error:function(e,n){return"function"==typeof t?t(n):void 0}})},sortMembers:function(e,t){var n;return n=function(e){return e===t||e.id===t.get("id")},e.sort(function(e,t){var r,i;return r=n(e),i=n(t),r&&!i?-1:!r&&i?1:e.fullName<t.fullName?-1:e.fullName>t.fullName?1:0}),e},firstLessThan:function(e,t){var n,r,i,o,s;for(i=0,o=t.length;o>i;i++){if(r=t[i],!a.isArray(r))return a.isFunction(r)?r.call(this,e):r;if(n=r[0],s=r[1],n>=e)return a.isFunction(s)?s.call(this,e):s}},hoursLeft:function(e){return(new Date(e)-new Date)/s.getMs({hours:1})},escapedReturnUrl:function(){return encodeURIComponent(location.href.replace(/^https?:\/\/[^\/]+/,""))},isExternalURL:function(e){var t;return t=c(e),t.host!==document.location.host||/^[\\\/.]{2,}/.test(t.pathname)},reverse:function(e){return e.slice(0).reverse()},buildFuzzyMatcher:function(e){var t;return t=a.map(e.split(/\s+/),function(e){return RegExp(""+s.escapeForRegex(e),"i")}),function(e){return a.every(t,function(t){return t.test(e)})}},getPadding:function(e){var t;return t=r(e).css(["padding-left","padding-top","padding-bottom","padding-right"]),{left:parseInt(t["padding-left"],10),top:parseInt(t["padding-top"],10),bottom:parseInt(t["padding-bottom"],10),right:parseInt(t["padding-right"],10)}},frameInCoordinateSpace:function(e,t){var n,r;return r=s.getPadding(t),n={top:e.offsetTop-(t.offsetTop+r.top),left:e.offsetLeft-(t.offsetLeft+r.left)},n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n},getBounds:function(e){var t,n;return t=r(e),n={left:t.scrollLeft(),top:t.scrollTop(),width:t.innerWidth(),height:t.innerHeight()},n.bottom=n.top+n.height,n.right=n.left+n.width,n},scrollElementIntoView:function(e,t,n){var i,o,a,u,c,l,d,p,h,m,f,g;p=null!=n?n:{},c=p.horizontal,g=p.vertical,o=p.animated,l=s.getBounds(e),d=s.getPadding(e),a=s.frameInCoordinateSpace(t,e),u={top:a.top-d.top,bottom:a.bottom+d.bottom,left:a.left-d.left,right:a.right+d.right},f=o?(i=r(e),function(e,t){var n;return n={},n[e]=t,i.animate(n,{duration:150,queue:!1})}):function(t,n){return e[t]=n},g&&(m=function(e){return f("scrollTop",e+d.top)},u.bottom>l.bottom?m(u.bottom-l.height):u.top<l.top&&m(u.top)),c&&(h=function(e){return f("scrollLeft",e+d.left)},u.right>l.right?h(u.right-l.width):u.left<l.left&&h(u.left))},loadScript:function(e){return new o(function(t){var n;return n=document.createElement("script"),n.src=e,n.onload=t,document.querySelector("head").appendChild(n)})}}},{}],130:[function(e,t,n){t.exports=function(e){var t;return null==e?!1:"object"!=typeof e?!1:null===(t=Object.getPrototypeOf(e))||t===Object.prototype}},{}],131:[function(e,t,n){var r,i,o,s;i=e("underscore"),s=e(130),r=e("react"),t.exports=function(e,t){return!(o(e,this.props)&&o(t,this.state))},o=function(e,t){var n,a,u,c,l,d;if(s(e)&&s(t)){if(i.keys(e).length!==i.keys(t).length)return!1;for(c in e)if(d=e[c],!o(e[c],t[c]))return!1}else if(r.isValidElement(e)&&r.isValidElement(t)){if(!o([e.props,e.state],[t.props,t.state]))return!1}else if(i.isArray(e)&&i.isArray(t)){if(e.length!==t.length)return!1;for(n=u=0,l=e.length;l>u;n=++u)if(a=e[n],!o(e[n],t[n]))return!1}else{if(i.isFunction(e)&&i.isFunction(t))return!0;if(e!==t)return!1}return!0}},{}],132:[function(e,t,n){var r,i=[].slice;r=e("bluebird"),t.exports=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=3<=arguments.length?i.call(arguments,2):[],r.fromNode(function(r){return n[t].apply(n,i.call(e).concat([r]))})}},{}],133:[function(e,t,n){t.exports=function(){if(window.getSelection){if(window.getSelection().empty)return window.getSelection().empty();if(window.getSelection().removeAllRanges)return window.getSelection().removeAllRanges()}else if(document.selection)return document.selection.empty()}},{}],134:[function(e,t,n){t.exports=function(e){var t,n,r;return n=window.getSelection(),r=n.toString(),t=n.anchorNode,!!r&&!!e.find(t).length}},{}],135:[function(e,t,n){t.exports=function(){var e,t;return("function"==typeof window.getSelection&&null!=(e=window.getSelection())?e.toString():void 0)||(null!=(t=document.selection)?t.createRange().text:void 0)}},{}],136:[function(e,t,n){t.exports=function(e){var t,n;document.body.createTextRange?(t=document.body.createTextRange(),t.moveToElementText(e),t.select()):(n=window.getSelection(),t=document.createRange(),t.selectNodeContents(e),n.removeAllRanges(),n.addRange(t))}},{}],137:[function(e,t,n){t.exports=function(e){return e.ctrlKey||e.metaKey||e.shiftKey||null!=e.button&&0!==e.button?!1:!0}},{}],138:[function(e,t,n){var r,i,o;o=e(28),i=-o,r=100-o,t.exports=function(e){return i>e?i:e>r?r:e}},{}],139:[function(e,t,n){t.exports=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;")}},{}],140:[function(e,t,n){var r,i=[].slice;r=e("underscore"),t.exports=function(e,t){var n,o,s,a,u,c;for(c=[],a=t.blockLex(e,{}),o=0,s=a.length;s>o;o++)n=a[o],null!=n.children&&(c=i.call(c).concat(i.call(t.inlineLex(n.children.text))));return u=r.chain(c).filter(function(e){return"link"===e.type}).map(function(n){var r,i;return e=null!=(r=n.children)?r.text:void 0,null!=e?{url:n.url,text:t.textInline(null!=(i=n.children)?i.text:void 0)}:{url:n.url}}).value()}},{}],141:[function(e,t,n){t.exports=function(e,t,n){return null==n&&(n=""),e.length>t?e.substr(0,t-n.length+1).replace(/\s+\S*$/,"")+n:e}},{}],142:[function(e,t,n){t.exports=function(e){return/\bhttps?:\/\//.test(e)}},{}],143:[function(e,t,n){t.exports=function(e){var t,n,r,i,o,s,a,u,c,l,d;if(d=e.split(","),a=d[0],r=d[1],l=/data:([^;]+)(?:;charset=([^;]*))?(;base64)?/.exec(a),null!=l){if(t=l[0],c=l[1],s=l[2],u=l[3],!u)throw Error("Unable to handle non-base64 URIs");if(null!=s)throw Error("Unable to handle encodings");return i=atob(r),n=function(){var e,t,n;for(n=[],e=0,t=i.length;t>e;e++)o=i[e],n.push(o.charCodeAt(0));return n}(),new Blob([new Uint8Array(n)],{type:c})}throw Error("Invalid data URI")}},{}],144:[function(e,t,n){t.exports=function(e){return 0===e.indexOf(window.attachmentsDomain)}},{}],145:[function(e,t,n){var r;r=e(259),t.exports=function(e){return r(e).host===location.host}},{}],146:[function(e,t,n){t.exports=function(e){return/^https?:\/\/\S+$/.test(e)}},{}],147:[function(e,t,n){var r,i;r=e(33),i=e(37),t.exports=function(e){var t,n;if(0!==e.indexOf("/")&&0!==e.indexOf(siteDomain+"/"))return!1;if(e=e.replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),e=e.replace(/[\?\#].*$/,""),/\.[a-z]+$/i.test(e))return!1;if(/^([bce]|board|card|org)\//.test(e))return!0;if(/^search(\/|$)/.test(e))return!0;if(r.isLoggedIn()){if(RegExp("^"+r.myUsername()+"(/|$)").test(e))return!0;if("/"===e)return!0}if(/^shortcuts\/?$/.test(e))return!0;if(null!=(t=null!=(n=/^[^\/\?\#]+/.exec(e))?n[0]:void 0)){if(r.isLoggedIn()&&("me"===t||"my"===t||"you"===t||"your"===t||"username"===t))return!0;if(/^[a-z0-9_]{3,}$/.test(t)){if(null!=i.findOne("Member","username",t))return!0;if(null!=i.findOne("Organization","name",t))return!0}}return!1}},{}],148:[function(e,t,n){var r,i;r=e(145),i=e(259),t.exports=function(e){var t,n,o,s,a;return r(e)?(n=i(e),o=n.pathname.split("/").slice(1),t=o[0],s=o[1],a=function(){switch(t){case"b":return"board";case"c":return"card";case"e":return"enterprise";default:return"unknown"}}(),s="card"===a||"board"===a?s:void 0,{type:a,shortLink:s}):{type:"unknown"}}},{}],149:[function(e,t,n){var r,i=[].slice,o={}.hasOwnProperty;r=e("underscore"),t.exports=function(){var e,t,n,s,a;return n=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],e={},r.flatten(t).forEach(function(t){return e[n(t)]=t}),function(){var t;t=[];for(s in e)o.call(e,s)&&(a=e[s],t.push(a));return t}()}},{}],150:[function(e,t,n){var r,i;i=e("underscore"),r={},r.Server=function(){function e(e){var t,n;return e?(t=e.split("."),void(t.length>0?this.parts=function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push(parseInt(n,10)||0);return i}():this.parts=[0])):null}return e.prototype.toString=function(){return this.parts.join(".")},e.prototype.toJSON=function(){return this.toString()},e.prototype.lessThan=function(e){var t;return t=this.compareTo(e),t&&0>t},e.prototype.greaterThan=function(e){var t;return t=this.compareTo(e),t&&t>0},e.prototype.equalTo=function(e){var t;return t=this.compareTo(e),t&&0===t},e.prototype.compareTo=function(e){var t,n,o,s,a,u,c;if(i.isString(e))e=new r.Server(e);else if(!(e instanceof r.Server))return null;for(n=Math.max(this.parts.length,e.parts.length),u=i.zip(this.parts,e.parts),t=0,o=u.length;o>t;t++){if(c=u[t],s=c[0],a=c[1],null==s&&(s=0),null==a&&(a=0),s>a)return n;if(a>s)return-n;n--}return 0},e.compareStringVersions=function(e,t){return new r.Server(e).compareTo(t)},e.prototype.supports=function(e){var t,n;return n=e.minServerVersion,t=e.maxServerVersion,(!n||this.greaterThan(n))&&(!t||this.lessThan(t))},e}(),r.Client=function(){function e(e){var t,n;t=e.split("-"),this.head=t[0],n=t[1],this.version=parseInt(n,10),this.patch=0}return e.prototype.toString=function(){return this.head+"-"+this.fullVersion()},e.prototype.toJSON=function(){return this.toString()},e.prototype.fullVersion=function(){return i.compact([this.version,this.patch]).join(".")||0},e}(),t.exports=r},{}],151:[function(e,t,n){var r,i,o,s,a;r=e("jquery"),a={width:0},s={width:750},o={width:900},i={width:1280},t.exports={calc:function(){var e;return this.ranCalc=!0,e=r(window).width(),this.fExtraLarge=this.fLarge=this.fMedium=this.fSmall=!1,e>i.width?this.fExtraLarge=!0:e>o.width?this.fLarge=!0:e>s.width?this.fMedium=!0:this.fSmall=!0,r(this).triggerHandler("windowClassChange")},ensureRun:function(){return this.ranCalc?void 0:this.calc()}}},{}],152:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(33),o=e(80),s=e(198),a=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return u(t,e),t.prototype.typeName="Action",t.prototype.urlRoot="/1/actions",n=64,t.prototype.getModel=function(){return this.collection.options.model},t.prototype.triggerCacheEvents=function(e,t){var n,r,i,o;for(o=this.idModels(),n=0,i=o.length;i>n;n++)r=o[n],e.trigger(t+":"+this.typeName+":"+r)},t.prototype.isCommentLike=function(){var e;return"commentCard"===(e=this.get("type"))||"copyCommentCard"===e},t.prototype.isAddAttachment=function(){return"addAttachmentToCard"===this.get("type")},t.prototype.isMember=function(e){return this.get("idMemberCreator")===e.id},t.prototype.getDate=function(){return o.parse(this.get("date"))},t.prototype.getBoard=function(){
var e,t;return this.modelCache.get("Board",null!=(e=this.get("data"))&&null!=(t=e.board)?t.id:void 0)},t.prototype.getCard=function(){var e,t;return this.modelCache.get("Card",null!=(e=this.get("data"))&&null!=(t=e.card)?t.id:void 0)},t.prototype.getChecklist=function(){var e,t;return this.modelCache.get("Checklist",null!=(e=this.get("data"))&&null!=(t=e.checklist)?t.id:void 0)},t.prototype.editable=function(){var e,t;return e=this.get("idMemberCreator"),"commentCard"===(t=this.get("type"))&&i.isMe(e)},t.prototype.deletable=function(){var e,t,n,r;return t=this.get("idMemberCreator"),"commentCard"===(n=this.get("type"))&&("observer"!==(null!=(r=this.getBoard())?r.getExplicitMemberType(i.me()):void 0)&&i.isMe(t)||null!=(e=this.getBoard())&&e.compareMemberType(i.me(),this.modelCache.get("Member",t),{mode:"commentDelete"})>0&&!(!e.isPremOrgAdmin(i.me())&&e.isPremOrgAdmin(t)))},t.prototype.isPlaceholder=function(){return null==this.get("date")},t.prototype.includesModel=function(e){var t,n,r,i;return r=e.typeName.toLowerCase(),(n=e.id)?"member"===r&&this.get("idMemberCreator")===n?!0:(t=this.get("data"),"convertToCardFromCheckItem"===this.get("type")&&t.cardSource.id===n?!0:(null!=(i=t[r])?i.id:void 0)===n):!1},t.prototype.idModels=function(){var e,t,n,r;return t=function(){var e,t,i;t=null!=(e=this.get("data"))?e:{},i=[];for(n in t)r=t[n],null!=(null!=r?r.id:void 0)&&i.push(r.id);return i}.call(this),e=this.get("idMemberCreator"),null!=e&&t.push(e),t},t.prototype.takingTooLong=function(){return this.isTakingTooLong=!0,this.trigger("takingTooLong")},t}(s)},{}],153:[function(e,t,n){var r;r=e(166),t.exports=new r([],{requiresLogin:!1,dataUrl:"/announcements/all"})},{}],154:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),s=e(114),a=e(198),o=e(98),t.exports=i=function(e){function t(e){t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.typeName="Announcement",t.prototype._key=function(){return"announcement-"+this.id+"-read"},t.prototype.isUnread=function(){return!s.get(this._key())},t.prototype.markRead=function(){return r.post("/announcements/dismiss",{id:this.id}),s.set(this._key(),!0),this.trigger("change:unread")},t.prototype.getLocale=function(){return o.normalizeLocale(this.get("locale")||"en")},t.prototype.matchesLocale=function(e){return o.matches(e,this.getLocale())},t}(a)},{}],155:[function(e,t,n){var r,i,o,s,a;r=e("jquery"),o=e(166),s=e(129),a=e("underscore"),t.exports=i=new o([],{requiresLogin:!0,dataUrl:"/announcements"})},{}],156:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].slice;i=e(198),o=e(129),a=e(259),s=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.typeName="Attachment",t.prototype.urlRoot=function(){return this.getCard().url()+"/attachments"},t.prototype.getCard=function(){return this.collection.sourceModel},t.prototype.editable=function(){return this.getCard().editable()},t.prototype.smallestPreviewBiggerThan=function(e,t){return o.smallestPreviewBiggerThan(this.get("previews"),e,t)},t.prototype.previewBetween=function(e,t,n,r){return o.previewBetween.apply(o,[this.get("previews")].concat(l.call(arguments)))},t.prototype.biggestPreview=function(){return o.biggestPreview(this.get("previews"))},t.prototype.smallestPreview=function(){return o.smallestPreview(this.get("previews"))},t.prototype.getType=function(){var e;return null!=(e=o.fileExt(this.get("name")))?e:this.get("mimeType")},t.prototype.getServiceKey=function(){var e,t,n;return this.get("isUpload")?"trello":(e=a(this.get("url")).host,n={"docs.google.com":"gdrive","drive.google.com":"gdrive","www.dropbox.com":"dropbox","onedrive.live.com":"onedrive","app.box.com":"box"},null!=(t=n[e])?t:"other")},t}(i)},{}],157:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(198),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="CustomBoardBackground",t}(i)},{}],158:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(199),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="BoardInvitation",t}(i)},{}],159:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(198),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="BoardPlugin",t}(i)},{}],160:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(198),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="BoardStar",t.prototype.getBoard=function(){return this.modelCache.get("Board",this.get("idBoard"))},t}(i)},{}],161:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N,V,$=function(e,t){function n(){this.constructor=e}for(var r in t)R.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},R={}.hasOwnProperty,z=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},U=[].slice;i=e(215),o=e(216),s=e(217),a=e(73),u=e(33),c=e(14),d=void 0,t(function(){return d=e(169)}),p=e(171),h=e(267),m=e(269),f=e(270),g=void 0,t(function(){return g=e(175)}),v=e(6),b=e("hearsay"),y=e(34),w=e(200),_=e(180),k=e(22),C=e(273),x=void 0,t(function(){return x=e(181)}),j=void 0,t(function(){return j=e(183)}),S=e(195),T=void 0,t(function(){return T=e(38)}),M=e(196),B=e(222),O=e(187),P=e("bluebird"),E=e(129),D=e(119),V=e("xtend"),A=e("underscore"),I=e(106),N=e("moment"),L=1e4,n.exports=l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $(t,e),I(S,a,t),t.prototype.typeName="Board",t.prototype.urlRoot="/1/boards",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.destruct([this.boardPluginList=new p([],{board:this}).syncCache(this.modelCache,["idBoard"],function(e){return function(t){return t.get("idBoard")===e.id}}(this)),this.listList=new x(null,{board:this}).owner(this).syncCache(this.modelCache,["idBoard","closed"],function(e){return function(t){return t.get("idBoard")===e.id&&t.isOpen()}}(this)),this.invitationList=new d([],{modelCache:this.modelCache,board:this}),this.checklistList=new g([],{modelCache:this.modelCache,board:this}),this.labelList=(new _).syncCache(this.modelCache,["idBoard"],function(e){return function(t){return t.get("idBoard")===e.id}}(this)),this.memberList=(new j).syncModel(this,"memberships",{fxGetIds:function(e){return A.pluck(e,"idMember")}}),this.adminList=(new j).syncModel(this,"memberships",{fxGetIds:function(e){return function(t){var n;return n=A.filter(t,function(t){var n,r;return n=e.modelCache.get("Member",t.idMember),"admin"===t.memberType||null!=n&&(null!=(r=e.getOrganization())?r.isPremOrgAdmin(n):void 0)}),A.pluck(n,"idMember")}}(this)}),this.pluginDataList=new O([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"board"===t.get("scope")}}(this)),this.filter=new f(this,{modelCache:this.modelCache}),this.composer=new m(null,{board:this,modelCache:this.modelCache}),this.listComposer=new C(this,{modelCache:this.modelCache}),this.viewState=new h(null,{modelCache:this.modelCache,board:this})]),this.listenForPermChange(),this.cacheShortLink()},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=D(B.boardActions)),this._actionFilter(e)},t.prototype.cacheShortLink=function(){return this.waitForAttrs(this,["id","shortLink"],function(e){var t,n;return t=e.id,n=e.shortLink,y.setBoardId(n,t)})},t.prototype.close=function(){this.update({closed:!0})},t.prototype.reopen=function(){this.update({closed:!1})},t.prototype.markAsViewed=function(){return u.isLoggedIn()?(this.set("dateLastView",(new Date).toISOString()),i({url:this.urlRoot+"/"+this.id+"/markAsViewed",type:"post",background:!0})):void 0},t.prototype.subscribe=function(e){e!==this.get("subscribed")&&this.update({subscribed:e})},t.prototype.isStarred=function(){return null!=u.me().boardStarList.getBoardStar(this.id)},t.prototype.hasUnseenActivity=function(){var e,t;return t=this.get("dateLastView"),e=this.get("dateLastActivity"),null!=t&&null!=e&&e>t},t.prototype.daysUntilPluginsDisable=function(){var e;return null!=(e=this.get("datePluginDisable"))?N(e).diff(N(),"days"):null},t.prototype.isLessActive=function(){var e,t,n;return e=null!=(t=this.get("dateLastActivity"))?t:new Date(E.idToDate(this.id)),n=N().subtract(6,"months"),n.isAfter(e)},t.prototype.getAvailableRoles=function(){return this.hasObservers()?["admin","normal","observer"]:["admin","normal"]},t.prototype.hasObservers=function(){var e;return null!=(e=this.getOrganization())?e.isFeatureEnabled("observers"):void 0},t.prototype.getPermLevel=function(){return this.getPref("permissionLevel")},t.prototype._normalizePref=function(e){return"none"===e?"disabled":e},t.prototype.getCommentPerm=function(){return this._normalizePref(this.get("prefs").comments)},t.prototype.getInvitePerm=function(){return this._normalizePref(this.get("prefs").invitations)},t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.org&&(r=this.getOrganization(),null!=r&&(n.hasOrg=!0,n.org=r.toJSON({url:!0}))),e.url&&null==n.url&&(n.url=v.getBoardUrl(this)),e.shortUrl&&null==n.shortUrl&&(n.shortUrl=v.getBoardShortUrl(this)),n},t.prototype.calcPos=function(e,t){return E.calcPos(e,this.listList,t,function(e){return e.isOpen()})},t.prototype.getCard=function(e){return E.isShortId(e)?this.modelCache.findOne("Card","idShort",Number(e)):this.modelCache.get("Card",e)},t.prototype.getList=function(e){return this.listList.get(e)},t.prototype.getUrl=function(){return v.getBoardUrl(this)},t.prototype.getChecklist=function(e){return this.modelCache.get("Checklist",e)},t.prototype.getBoardInvitation=function(e){return this.invitationList.get(e)},t.prototype.getCheckItem=function(e){var t,n,r,i,o,s;for(o=this.checklistList.models,r=0,i=o.length;i>r;r++)if(n=o[r],t=null!=n&&null!=(s=n.checkItemList)?s.get(e):void 0)return t},t.prototype.editable=function(){var e;return e=u.me(),e&&this.editableByMember(e)},t.prototype.editableByMember=function(e){return this.isMember(e)},t.prototype.isMember=function(e){var t;return"virtual"===(t=this.getMemberType(e))||"normal"===t||"admin"===t},t.prototype.getMembershipCount=function(){var e,t,n,r;return null!=(e=null!=(t=null!=(n=this.get("membershipCounts"))?n.active:void 0)?t:null!=(r=this.get("memberships"))?r.length:void 0)?e:1},t.prototype.getStarCount=function(e){var t,n;return null!=(t=null!=(n=this.get("starCounts"))?n[e]:void 0)?t:0},t.prototype.getIdTags=function(){var e;return null!=(e=this.get("idTags"))?e:[]},t.prototype.owned=function(){var e;return e=u.me(),e&&this.ownedByMember(e)},t.prototype.ownedByMember=function(e){return"admin"===this.getMemberType(e)},t.prototype.allowsSelfJoin=function(){var e;return null!=(e=this.getPref("selfJoin"))?e:!1},t.prototype.canJoin=function(){var e,t,n;return n=this.getOrganization(),null==n?!1:(t=u.me(),null!=this.getMembershipFor(t)||this.isObserver(t)?!1:(e=n.isMember(t),this.isPremOrgAdmin(t)||this.allowsSelfJoin()&&e))},t.prototype.canInviteMembers=function(){var e,t,n;return null!=this.getOrganization()||this.getPref("canInvite")?("admins"===(null!=(e=this.get("prefs"))?e.invitations:void 0)?n="admin":"members"===(null!=(t=this.get("prefs"))?t.invitations:void 0)&&(n="normal"),"admin"===this.getMemberType(u.me())||n===this.getMemberType(u.me())):!1},t.prototype.compareMemberType=function(e,t,n){return E.compareMemberType(this,e,t,n)},t.prototype.isMemberPublic=function(e){return"public"===this.getMemberType(e)},t.prototype.isMemberOrg=function(e){return"org"===this.getMemberType(e)},t.prototype.isMemberObserver=function(e){return"observer"===this.getMemberType(e)},t.prototype.memberMatchesSetting=function(e,t){switch(this.getPref(t)){case"public":return u.isLoggedIn();case"org":return this.isMember(e)||this.isMemberOrg(e)||this.isMemberObserver(e);case"observers":return this.isMember(e)||this.isMemberObserver(e);case"members":return this.isMember(e);case"admins":return this.ownedByMember(e);default:return!1}},t.prototype.isPowerUpEnabled=function(e){var t,n,r,i;return t=this.get("powerUps"),null!=t&&z.call(t,e)>=0||"calendar"===e&&(n=k.calendar,z.call(this.idPluginsEnabled(),n)>=0)||(r="cardAging"===e&&k.cardAging,z.call(this.idPluginsEnabled(),r)>=0)||(i="voting"===e&&k.voting,z.call(this.idPluginsEnabled(),i)>=0)},t.prototype.powerUpsCount=function(){return this.boardPluginList.length},t.prototype.canEnableAdditionalPowerUps=function(){return u.isLoggedIn()&&this.powerUpsCount()<u.me().getPowerUpsLimit()},t.prototype.isPluginEnabled=function(e){return this.boardPluginList.any(function(t){return t.get("idPlugin")===e})},t.prototype.enablePlugin=function(e){return new P(function(t){return function(n){return t.boardPluginList.create({idPlugin:e},{success:n})}}(this))},t.prototype.disablePlugin=function(e){var t;return t=this.boardPluginList.find(function(t){return t.get("idPlugin")===e}),t.destroy()},t.prototype.canVote=function(e){return this.memberMatchesSetting(e,"voting")},t.prototype.canComment=function(e){return this.memberMatchesSetting(e,"comments")},t.prototype.canInvite=function(e){return this.memberMatchesSetting(e,"invitations")},t.prototype.prefNames=["permissionLevel","voting","comments","invitations","selfJoin","background","cardAging","calendarFeedEnabled"],t.prototype.myPrefNames=["showSidebar","showSidebarMembers","showSidebarBoardActions","showSidebarActivity","emailKey","idEmailList","emailPosition","calendarKey","fullEmail"],t.prototype.isPublic=function(){return"public"===this.getPref("permissionLevel")},t.prototype.isPrivate=function(){return"private"===this.getPref("permissionLevel")},t.prototype.getIdBoardMems=function(){return A.map(this.memberList.models,function(e){return function(e){return e.id}}(this))},t.prototype.getOrganization=function(){return this.modelCache.get("Organization",this.get("idOrganization"))},t.prototype.hasOrganization=function(){return this.get("idOrganization")},t.prototype.snoopOrganization=function(){return this.snoop("idOrganization").map(function(e){return function(){return e.getOrganization()}}(this))},t.prototype.orgMembersAvailable=function(){var e;return e=this.getOrganization(),A.chain(e.memberList.filter(function(t){return function(t){return!e.isDeactivated(t)}}(this))).difference(this.memberList.models).value()},t.prototype.joinBoard=function(e){var t,n,r,i;return n=u.me(),t=this.isPremOrgAdmin(n),r=t?"admin":"normal",n.set("idBoards",n.get("idBoards").concat(this.id)),t&&n.set("idPremOrgsAdmin",(null!=(i=n.get("idPremOrgsAdmin"))?i:[]).concat(this.id)),this.addMember(n,r,e)},t.prototype.addMember=function(){var e,t,n,r,i;return n=arguments[0],e=3<=arguments.length?U.call(arguments,1,t=arguments.length-1):(t=1,[]),i=arguments[t++],r=e[0],null==r&&(r="normal"),this.memberList.add(n),this.api({type:"put",method:"members/"+n.id,data:{type:r}},i),this.set("memberships",this.get("memberships").concat({idMember:n.id,memberType:"normal"}))},t.prototype.removeMember=function(e){return this.memberList.remove(e),this.set("memberships",A.reject(this.get("memberships"),function(t){return t.idMember===e.id}))},t.prototype.getObserverList=function(){var e,t,n,r,i;for(r=this.memberList.models,i=[],e=0,t=r.length;t>e;e++)n=r[e],this.isObserver(n)&&i.push(n);return i},t.prototype.filterLabels=function(e){var t,n;return n=RegExp("^"+E.escapeForRegex(e)),t=[],A.chain(this.getLabels()).filter(function(t){var n,r;return(null!=(n=t.get("name"))?n.toLowerCase().indexOf(e):void 0)>-1||0===(null!=(r=t.get("color"))?r.toLowerCase().indexOf(e):void 0)||t.get("color")===w.colors[parseInt(e)-1]}).value()},t.prototype.labelForColor=function(e){return A.chain(this.getLabels()).filter(function(t){return t.get("color")===e}).first().value()},t.prototype.labelsForColors=function(){return A.chain(this.getLabels()).groupBy(function(e){return e.get("color")}).value()},t.prototype.createLabel=function(e,t){var n;n=A.find(this.getLabels(),function(n){return n.get("name")===e&&n.get("color")===t}),n||this.labelList.create({name:e,color:null!=t?t:"",uses:1},{url:"/1/board/"+this.id+"/labels/"})},t.prototype.labelColors=function(){return w.colors},t.prototype.getLabels=function(){return this.labelList.models.sort(w.compare)},t.prototype._generateKey=function(e){return this.api({type:"post",method:e+"Key/generate"})},t.prototype.generateEmailKey=function(){return this._generateKey("email")},t.prototype.generateCalendarKey=function(){return this._generateKey("calendar")},t.prototype.openCards=function(){var e;return A.flatten(function(){var t,n,r,i;for(r=this.listList.models,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(e.openCards().models);return i}.call(this))},t.prototype.listenForPermChange=function(){var e,t,n;if(u.isLoggedIn())return n=this.getViewPermState(u.me()),t=this.owned(),e=this.debounce(function(e){return function(){var r,i;i=e.getViewPermState(u.me()),i!==n&&(n=i,e.trigger("permChange",i)),r=e.owned(),r!==t&&(t=r,e.trigger("ownedChange",r))}}(this)),this.listenTo(u.me().boardList,"add remove reset",e),this.listenTo(u.me().organizationList,"add remove reset",e),this.listenTo(this.memberList,"add remove reset",e),this.listenTo(this,"change:memberships change:prefs.permissionLevel",e)},t.prototype.getViewPermState=function(e){var t,n;return this.isObserver(e)?"observer":"normal"===(t=this.getMemberType(e))||"admin"===t?"member":E.hasValidInviteTokenFor(this)?"inviteToken":(null!=(n=this.getOrganization())?n.isMember(e):void 0)&&"org"===this.getPref("permissionLevel")?"org":"public"===this.getPref("permissionLevel")?"public":"none"},t.prototype.getClientBackgroundColor=function(e){var t,n;return null!=(t=null!=(n=c[e])?n.color:void 0)?t:c.blue.color},t.prototype.dataForLabel=function(e){return e.toJSON()},t.prototype.isViewableBy=function(e){return"none"!==this.getViewPermState(e)},t.prototype.toggleTag=function(e){return this.toggle("idTags",e,z.call(this.getIdTags(),e)<0)},t.prototype.setPluginData=function(e,t,n){return this.pluginDataList.upsert(e,t,n)},t.prototype.getPluginData=function(e){var t;return V(null!=(t=this.getOrganization())?t.getPluginData(e):void 0,this.pluginDataList.dataForPlugin(e))},t.prototype.snoopPluginData=function(e){var t,n;return n=this.snoopOrganization().map(function(t){return null!=t?t.snoopPluginData(e):b.const(null)}).latest(),t=this.pluginDataList.snoopDataForPlugin(e),b.combine(n,t).map(function(e){return V.apply(null,e)})},t.prototype.clearPluginData=function(e){var t,n,r;return t=this.pluginDataList.for(e,"private"),null!=t&&t.destroy(),n=null!=(r=this.getOrganization())?r.pluginDataList.for(e,"private"):void 0,null!=n?n.destroy():void 0},t.prototype.idPluginsEnabled=function(){return this.boardPluginList.pluck("idPlugin")},t.prototype.snoopIdPluginsEnabled=function(){return b.combine(this.boardPluginList.snoop()).map(function(e){var t;return t=e[0],t.pluck("idPlugin")})},t.prototype.invitationUrl=function(e){return v.getBoardInvitionLinkUrl(e)},t.prototype.startDelete=function(){return this._isDeleting=!0,this.trigger("deleting"),s({method:"delete",url:this.url()}).then(function(e){return function(){return new P(function(t){var n;return(n=function(){return s({url:e.url(),fields:""}).then(function(){return setTimeout(n,500)}).catch(o.NotFound,function(){return t()}).done()})()})}}(this)).then(function(e){return function(){return e.modelCache.remove(e)}}(this)).return()},t.prototype.isDeleting=function(){return this._isDeleting},t.prototype.isOrgBoard=function(){var e,t;return e=null!=(t=this.getOrganization())?t.id:void 0,null!=e&&z.call(u.me().get("idOrganizations"),e)>=0},t.prototype.isWelcomeBoard=function(){return E.idToDate(this.get("id"))-E.idToDate(u.myId())<L},t.prototype.getAvailablePlugins=function(){return null!=this.availablePlugins?this.availablePlugins:this.availablePlugins=T.loadBoardAvailablePlugins(this.id)},t}(M)},{}],162:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L=function(e,t){function n(){this.constructor=e}for(var r in t)A.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},A={}.hasOwnProperty,D=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},I=[].slice;i=e("jquery"),M=e(119),o=e(152),s=void 0,t(function(){return s=e(165)}),a=e(215),c=e(167),u=e(73),l=e(33),p=void 0,t(function(){return p=e(175)}),h=e(6),m=e(80),f=e(34),g=e(180),v=e(194),b=e(201),y=void 0,t(function(){return y=e(183)}),w=e(274),_=e(222),k=e(187),C=e("bluebird"),x=e(189),j=e(198),S=e(129),T=e("underscore"),B=e(106),O=e("moment"),P=e(132),E=e("xtend"),n.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return L(t,e),B(v,u,t),n=1e4,t.prototype.typeName="Card",t.prototype.urlRoot="/1/cards",t.prototype.initialize=function(){return this.destruct([this.memberList=(new y).syncModel(this,"idMembers"),this.labelList=(new g).syncModel(this,"idLabels").syncCache(this.modelCache,[],function(e){return function(t){var n,r;return n=t.id,D.call(null!=(r=e.get("idLabels"))?r:[],n)>=0}}(this)),this.memberVotedList=(new y).syncModel(this,"idMembersVoted"),this.checklistList=(new p).syncCache(this.modelCache,["idCard"],function(e){return function(t){return t.get("idCard")===e.id}}(this)),this.attachmentList=(new c).syncSubModels(this,"attachments"),this.actionList=(new s).syncCache(this.modelCache,[],function(e){return function(t){var n,r,i,o;return n="commentCard"===(i=t.get("type"))||"copyCommentCard"===i,r=(null!=(o=t.get("data").board)?o.id:void 0)===e.get("idBoard"),t.includesModel(e)&&(n||r)}}(this)),this.stickerList=new x(this.get("stickers"),{card:this,modelCache:this.modelCache}).syncSubModels(this,"stickers"),this.pluginDataList=new k([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"card"===t.get("scope")}}(this)),this.memberEditingList=new y]),this.listenTo(this,"change:id change:idBoard",function(e){return function(){return e.actionList.sync()}}(this)),this._initSubEventsOn("badges"),this.cacheShortLink()},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=M(_.cardActions)),this._actionFilter(e)},t.prototype.cacheShortLink=function(){return this.waitForAttrs(this,["id","shortLink"],function(e){var t,n;return t=e.id,n=e.shortLink,f.setCardId(n,t)})},t.prototype.updateEditing=function(e){return null==this._editingTimeout&&(this._editingTimeout={}),this.memberEditingList.add(e),null!=this._editingTimeout[e.id]&&(clearTimeout(this._editingTimeout[e.id]),delete this._editingTimeout[e.id]),this._editingTimeout[e.id]=this.setTimeout(function(t){return function(){return t.memberEditingList.remove(e)}}(this),n)},t.prototype.sync=function(e,n,r){return"create"!==e||null!=this.get("idBoard")&&null!=this.get("idList")?t.__super__.sync.apply(this,arguments):(this.waitForAttrs(this,["idBoard","idList"],function(i){return function(o){return i.set(o),t.__super__.sync.call(i,e,n,r)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this)),this.waitForId(this.getList(),function(e){return function(t){return e.set("idList",t)}}(this)))},t.prototype.set=function(e,n){var r;return(null!=e?e.labels:void 0)&&(e.labels=function(){var t,n,i,o,s;for(i=e.labels,s=[],t=0,n=i.length;n>t;t++)r=i[t],s.push(null!=(o=r.color)?o:r);return s}()),(null!=e?e.badges:void 0)&&(e.badges=E(this.get("badges"),e.badges)),t.__super__.set.apply(this,arguments)},t.prototype.moveToList=function(e,t,n){var r;return null==n&&(n=!1),r=this,this.waitForId(e,function(i){return function(i){var o,s,a,u,c,l,d,p,h;if(c=e.calcPos(t,r),o=e.getBoard().composer,c===r.get("pos")&&r.get("idList")===i&&r.isOpen())return s=o.get("index"),void(s===t?o.set("index",s+1):s===t+1&&o.set("index",s-1));d=r.get("idList"),p=r.getIndexInList(),a={pos:c,idList:i,idBoard:e.getBoard().id,closed:!1};for(u in a)h=a[u],r.get(u)===h&&delete a[u];return n&&setTimeout(function(){return r.trigger("keyboardMove")}),r.update(a),(null!=o?o.get("vis"):void 0)?(s=l=o.get("index"),o.get("list").id===i&&o.get("index")>=t&&s++,o.get("list").id===d&&o.get("index")>p&&s--,o.set("index",s)):void 0}}(this))},t.prototype.moveToNextList=function(e){var t,n;n=this.getBoard().listList.models,t=T.indexOf(n,this.getList()),t<n.length-1&&this.moveToList(n[t+1],"top"===e?0:1e9,!0)},t.prototype.moveToPrevList=function(e){var t,n;n=this.getBoard().listList.models,t=T.indexOf(n,this.getList()),t>0&&this.moveToList(n[t-1],"top"===e?0:1e9,!0)},t.prototype.toggleMember=function(){var e,t,n,r,i;return t=arguments[0],e=3<=arguments.length?I.call(arguments,1,r=arguments.length-1):(r=1,[]),i=arguments[r++],n=e[0],null==n&&(n=!this.hasMember(t)),n&&l.isMe(t)&&this.set("subscribed",!0),this.toggle("idMembers",t,n,i)},t.prototype.addMember=function(e,t){return this.toggleMember(e,!0,t)},t.prototype.removeMember=function(e,t){return this.toggleMember(e,!1,t)},t.prototype.hasMember=function(e){return this.memberList.get(e)},t.prototype.getIdCardMems=function(){return T.map(this.memberList.models,function(e){return function(e){return e.id}}(this))},t.prototype.getIdCommenters=function(){var e,t;return t=[],e=T.each(this.getActions(),function(e){return function(e){var n;return"commentCard"===e.get("type")?(n=e.get("idMemberCreator"),t.push(n)):void 0}}(this)),this.idCommenters=T.uniq(t),this.idCommenters},t.prototype.hasChecklist=function(e){return this.checklistList.get(e)},t.prototype.close=function(e){this.update({closed:!0},e)},t.prototype.reopen=function(){var e;e=this.getList(),null!=e&&this.update({closed:!1,pos:e.calcPos(e.cardList.length,this)})},t.prototype.getBoard=function(){var e,t;return null!=(e=this.modelCache.get("Board",this.get("idBoard")))?e:null!=(t=this.getList())?t.getBoard():void 0},t.prototype.getIndexInList=function(){var e;return e=this.getList(),null!=e?T.indexOf(e.cardList.models,this):-1},t.prototype.getList=function(){var e,t;return null!=(e=this.modelCache.get("List",this.get("idList")))?e:null!=(t=this.collection)?t.owner:void 0},t.prototype.getUrl=function(){return h.getCardUrl(this)},t.prototype.getFullUrl=function(){return""+siteDomain+this.getUrl()},t.prototype.getDueDate=function(){var e;return(null!=(e=this.get("badges"))?e.due:void 0)?new Date(this.get("badges").due):null},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.dateForNewComment=function(){var e,t;return 0===this.actionList.length?new Date:(t=this.actionList.sort().first(),e=O(t.getDate()).add(1,"seconds").toDate(),T.max([new Date,e]))},t.prototype.addComment=function(e){var t;t=this,""!==e&&this.waitForId(t,function(n){return function(r){var i,s,u;return s=t.getBoard(),i=new o({type:"commentCard",date:n.dateForNewComment(),data:{text:e,card:{id:t.id,name:t.get("name")},board:{id:s.id,name:s.get("name")},textData:{emoji:l.me().allCustomEmoji()}},idMemberCreator:l.myId(),display:{translationKey:"action_comment_on_card",entities:{card:{hideIfContext:!0,id:t.id,isContext:!1,shortLink:t.shortLink,text:e,type:"card"},comment:{text:e,type:"comment"},contextOn:{hideIfContext:!0,idContext:t.id,translationKey:"action_on",type:"translatable"},memberCreator:{id:l.myId(),isContext:!1,text:l.me().get("fullName"),type:"member",username:{text:l.me().get("fullName")}}}}},{modelCache:n.modelCache}),u=n.setTimeout(function(){return i.takingTooLong()},2e3),a({url:"/1/cards/"+t.id+"/actions/comments",type:"post",data:{text:e},dataType:"json",success:function(e){return clearTimeout(u),i.isTakingTooLong=!1,n.modelCache.enqueueDelta(i,e)}})}}(this))},t.prototype.changeDueDateMaintainTime=function(e){var t,n,r;return n=null!=(r=new Date(this.get("due")))?r:(new Date).setHours(12,0,0,0),t=m.getDateWithSpecificTime(n,e),this.update({due:t})},t.prototype.vote=function(e){return this.getBoard().canVote(l.me())?this.waitForLock("vote",function(t){return function(n){var r,i;return e===t.voted()?n():(r=null!=(i=T.clone(t.get("badges")))?i:{},e?(r.votes++,r.viewingMemberVoted=!0):(r.votes--,r.viewingMemberVoted=!1),t.set("badges",r),void t.toggle("idMembersVoted",l.myId(),e,{collectionName:"membersVoted"},n))}}(this)):void 0},t.prototype.voted=function(){var e,t;return null!=(e=null!=(t=this.get("badges"))?t.viewingMemberVoted:void 0)?e:!1},t.prototype.hasStickers=function(){return this.stickerList.length>0},t.prototype.hasCover=function(){return null!=this.attachmentList.get(this.get("idAttachmentCover"))},t.prototype.getAllAgingClasses=function(){return"aging-level-0 aging-level-1 aging-level-2 aging-level-3 aging-pirate aging-regular"},t.prototype.getAgingData=function(){var e,t,n;return e=this.getBoard(),n=Date.now()-new Date(this.get("dateLastActivity")),t={level:function(){switch(!1){case!(n<S.getMs({days:7})):return 0;case!(n<S.getMs({days:14})):return 1;case!(n<S.getMs({days:28})):return 2;default:return 3}}(),mode:e.get("prefs").cardAging},t.agingClassesToAdd="aging-level-"+t.level+" aging-"+t.mode,/64$/.test(this.id)&&(t.agingClassesToAdd+=" aging-treasure"),t},t.prototype.toggleVote=function(){this.vote(!this.voted())},t.prototype.subscribe=function(e){var t;e!==this.get("subscribed")&&(t=this.get("badges"),t.subscribed=e,this.update({subscribed:e}))},t.prototype.getCheckItem=function(e){var t,n,r,i,o,s;for(r=i=0,o=this.checklistList.length-1;o>=0?o>=i:i>=o;r=o>=0?++i:--i)if(n=this.checklistList.at(r),t=null!=n&&null!=(s=n.checkItemList)?s.get(e):void 0)return t;return null},t.prototype.toJSON=function(e){var n;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.url&&(n.url=h.getCardUrl(this)),n},t.prototype.upload=function(e,t,n){var r;return r=new FormData,r.append("token",l.myToken()),null!=t?r.append("file",e,t):r.append("file",e),a({url:"/1/cards/"+this.id+"/attachments",data:r,type:"post",processData:!1,contentType:!1,retry:!1,error:function(r){return function(r,i,o,s){var a,u,c;return c=r.status,u=r.responseText,0===c||413===c?n("Error uploading "+(null!=(a=e.name)?a:t)):s()}}(this),success:function(e){return function(t){var r;return e.set("attachments",[t].concat(I.call(null!=(r=e.get("attachments"))?r:[]))),n(null,t)}}(this),timeout:S.getMs({hours:6})})},t.prototype.uploadUrl=function(e,t){return null==t&&(t=function(){}),T.isString(e)&&(e={url:e}),a({url:"/1/cards/"+this.id+"/attachments",type:"post",data:e,error:function(e){return function(e,n,r,i){var o,s;return s=e.status,o=e.responseText,t(n)}}(this),success:function(e){return function(n){var r;return e.set("attachments",[n].concat(I.call(null!=(r=e.get("attachments"))?r:[]))),t(null,n)}}(this)})},t.prototype.removeCover=function(){return this.update({idAttachmentCover:""})},t.prototype.makeCover=function(e){return this.update({idAttachmentCover:e.id})},
t.prototype.calcChecklistPos=function(e,t){return S.calcPos(e,this.checklistList,t)},t.prototype.calcAttachmentPos=function(e,t){var n;return null===t.get("pos")&&this.attachmentList.models.forEach(function(e,t){var n;return n=16384*(t+1),e.update("pos",n)}),n=this.attachmentList.length-e-1,S.calcPos(n,this.attachmentList,t)},t.prototype._neighbor=function(e){var t,n,r;if(n=this.getList().openCards(),r=this.getBoard().filter,t=n.indexOf(this),t>=0){for(t+=e;null!=n.at(t)&&!r.satisfiesFilter(n.at(t));)t+=e;return n.at(t)}return null},t.prototype.prevCard=function(){return this._neighbor(-1)},t.prototype.nextCard=function(){return this._neighbor(1)},t.prototype.labelCreateUrl=function(){return"/1/card/"+this.id+"/labels/"},t.prototype.copyTo=function(e){var t,n,r,i;return r=e.name,t=e.idList,i=e.pos,n=e.keepFromSource,null==r&&(r=this.get("name")),b.load(t,_.listMinimal,this.modelCache).then(function(e){return function(t){return P(t.cardList,"create",{name:r,pos:i},{createData:{idCardSource:e.id,keepFromSource:n}})}}(this))},t.prototype.setPluginData=function(e,t,n){return this.pluginDataList.upsert(e,t,n)},t.prototype.getPluginData=function(e){return this.pluginDataList.dataForPlugin(e)},t.prototype.snoopPluginData=function(e){var t;return t=this.pluginDataList.snoopDataForPlugin(e)},t.prototype.getAgeMs=function(){return this.id?Date.now()-new Date(S.idToDate(this.id)):0},t.prototype.getIdMemberCreator=function(){var e;return e=this.actionList.find(function(e){var t;return"createCard"===(t=e.get("type"))||"copyCard"===t}),null!=e?e.get("idMemberCreator"):void 0},t.prototype.shouldSuggestDescription=function(){var e,t;return e=l.myId(),!this.get("desc")&&this.editable()&&this.getAgeMs()<S.getMs({minutes:5})&&!((null!=(t=this.get("badges"))?t.comments:void 0)>0)&&(0===this.actionList.length||this.getIdMemberCreator()===e)},t.prototype.isVisible=function(){var e;return this.isOpen()&&(null!=(e=this.getList())?e.isOpen():void 0)},t}(j)},{}],163:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(198),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="CheckItem",t.prototype.urlRoot=function(){var e;return e=this.getChecklist(),e.getCard().url()+"/checklist/"+e.id+"/checkItem"},t.prototype.sync=function(e,n,r){return null!=this.getChecklist()?this.waitForId(this.getChecklist(),function(i){return function(){return t.__super__.sync.call(i,e,n,r)}}(this)):void 0},t.prototype.getChecklist=function(){return this.collection.sourceModel},t.prototype.getCard=function(){return this.getChecklist().getCard()},t.prototype.getBoard=function(){return this.getCard().getBoard()},t.prototype.editable=function(){return this.getChecklist().editable()},t.prototype.getContext=function(){return this.getChecklist()},t.prototype.move=function(e){this.update("pos",this.getChecklist().calcPos(e,this)),this.collection.sort({silent:!0})},t}(i)},{}],164:[function(e,n,r){var i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=void 0,t(function(){return i=e(174)}),s=e(198),a=e(129),n.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.typeName="Checklist",t.prototype.urlRoot=function(){return"/1/checklists"},t.prototype.initialize=function(){return this.destruct([this.checkItemList=(new i).syncSubModels(this,"checkItems")])},t.prototype.sync=function(e,n,r){return"create"!==e||null!=this.get("idBoard")&&null!=this.get("idCard")?t.__super__.sync.apply(this,arguments):(this.waitForAttrs(this,["idBoard","idCard"],function(i){return function(o){return i.set(o),t.__super__.sync.call(i,e,n,r)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this)),this.waitForId(this.getCard(),function(e){return function(t){return e.set("idCard",t)}}(this)))},t.prototype.getCard=function(){var e;return null!=(e=this.modelCache.get("Card",this.get("idCard")))?e:this.collection.sourceModel},t.prototype.getBoard=function(){var e;return null!=(e=this.getCard())?e.getBoard():void 0},t.prototype.getCompletedCount=function(e){var t;return t=0,this.checkItemList.each(function(e){return null!=e.get("state")&&"complete"===e.get("state")?t++:void 0}),t},t.prototype.getCheckItem=function(e){return this.checkItemList.get(e)},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.calcPos=function(e,t){return a.calcPos(e,this.checkItemList,t)},t}(s)},{}],165:[function(e,n,r){var i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;i=e(152),a=e(178),u=void 0,t(function(){return u=e(38)}),c=e("bluebird"),l=e("underscore"),s=e(216),n.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.model=i,t.prototype.initialize=function(e,t){this.options=t},t.prototype.comparator=function(e){return-e.getDate()||0},t.prototype._getRelatedBoards=function(){var e,t,n;return t=function(){var t,r,i,o,s,a,u;for(i=this.models,u=[],t=0,r=i.length;r>t;t++)n=i[t],("moveCardToBoard"===(o=n.get("type"))||"moveCardFromBoard"===o)&&(e=n.get("data"),u.push((null!=(s=e.boardTarget)?s.id:void 0)||(null!=(a=e.boardSource)?a.id:void 0)));return u}.call(this),t=l.compact(l.uniq(t)),t=l.reject(t,function(e){return function(t){return null!=e.modelCache.get("Board",t)}}(this)),c.resolve(t).map(function(e){return function(e){return u.loadBoardName(e).catch(s.Unauthorized,s.NotFound,function(){})}}(this))},t}(a)},{}],166:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(154),s=e(33),a=e(178),u=e(238),t.exports=o=function(e){function t(e,n){this.requiresLogin=n.requiresLogin,this.dataUrl=n.dataUrl,t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.model=i,t.prototype.sync=function(e,t,n){(!this.requiresLogin||s.isLoggedIn())&&r.ajax({url:this.dataUrl,success:function(e){return"function"==typeof n.success?n.success(t,e,n):void 0}})},t.prototype.forLocale=function(e){return this.filter(u.method("matchesLocale",e))},t}(a)},{}],167:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(156),o=e(178),s=e(80),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=r,t.prototype.initialize=function(e,t){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||s.parse(e.get("date"))},t}(o)},{}],168:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(157),o=e(178),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.url=function(){return"/1/member/"+this.member.id+"/boardBackgrounds"},t.prototype.initialize=function(e,t){this.member=t.member},t}(o)},{}],169:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(158),o=e(179),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t}(o)},{}],170:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(161),o=e(178),s=e(129),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=r,t.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},t.prototype.comparator=function(e){var t,n,r;return n=e.getOrganization(),r=(null!=n?n.get("displayName"):void 0)||"",t=e.get("name")||"",s.rpad(r,64).toUpperCase()+t.toUpperCase()},t}(o)},{}],171:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(178),r=e(159),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.initialize=function(e,t){var n;return n=t.board,this.board=n},t.prototype.url=function(){return"/1/boards/"+this.board.id+"/boardPlugins"},t}(o)},{}],172:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(160),o=e(178),a=e(129),u=e("underscore"),s=e("bluebird"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return c(t,e),t.prototype.model=r,t.prototype.url=function(){return"/1/member/"+this.member.id+"/boardStars"},t.prototype.initialize=function(e,t){return this.member=t.member,this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.getBoardStar=function(e){return u.find(this.models,function(t){return t.get("idBoard")===e})},t.prototype.starBoard=function(e){var t;return this.getBoardStar(e)?s.reject(new Error("already starred")):(t=this.length?this.at(this.length-1).get("pos")+a.spacing:a.spacing,new s(function(n){return function(r){return n.create({idBoard:e,pos:t},{modelCache:n.modelCache},r)}}(this)))},t.prototype.unstarBoard=function(e){var t;return t=this.getBoardStar(e),null!=t?new s(function(e,n){return t.waitForId(t,function(){return t.destroy({success:e,error:function(e,t){return n(t)}})})}):s.reject(new Error("not starred"))},t.prototype.updateStarBoard=function(e,t){var n,r;return n=this.getBoardStar(e),r=this.getNewPos(n,t),null!=n?n.update({pos:r}):void 0},t.prototype.getBoards=function(){var e;return e=this.getBoardIds(),u.compact(this.modelCache.get("Board",e))},t.prototype.getBoardIds=function(){var e,t,n,r,i;for(r=u.sortBy(this.models,function(e){return e.get("pos")}),i=[],e=0,t=r.length;t>e;e++)n=r[e],i.push(n.get("idBoard"));return i},t.prototype.getBoardIndex=function(e){return this.models.filter(n).indexOf(this.getBoardStar(e))},t.prototype.getNewPos=function(e,t){var r;return r=a.calcPos(t,this,e,n)},n=function(e){var t;return t=e.getBoard(),t&&t.isOpen()},t}(o)},{}],173:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(162),o=e(178),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.initialize=function(e,t){this.listenTo(this,"change:pos",this.sort),this.list=t.list},t.prototype.url="/1/cards",t.prototype.comparator=function(e){return e.get("pos")||0},t}(o)},{}],174:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(163),o=e(178),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")},t}(o)},{}],175:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(164),o=e(178),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")},t.prototype.idList=function(){return this.pluck("id")},t}(o)},{}],176:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(178),i=e(191),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=i,t.prototype.url=function(){return"/1/member/"+this.member.id+"/customEmoji"},t.prototype.initialize=function(e,t){this.member=t.member},t}(r)},{}],177:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(33),i=e(178),o=e(192),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.url=function(){return"/1/member/"+r.me().id+"/customStickers"},t.prototype.initialize=function(e,t){this.member=t.member},t}(i)},{}],178:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty,d=[].slice;r=e(234),o=e("hearsay"),s=e(129),a=e("underscore"),u=e(238),t.exports=i=function(e){function t(e,n){this.modelCache=null!=n?n.modelCache:void 0,t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.destructor=function(){return this.stopListening(),s.shred(this)},t.prototype.create=function(){var e,n,r,i,o,s,c,l,p;return i=arguments[0],e=3<=arguments.length?d.call(arguments,1,n=arguments.length-1):(n=1,[]),s=arguments[n++],c=e[0],c||a.isFunction(s)||(c=s,s=function(){}),o=this.model,null==c&&(c={}),r=this.modelCache.lock("Collection Create"),c.success=u.concat(null!=(l=c.success)?l:function(){},function(e){return function(e){return s(null,e)}}(this)),c.error=u.concat(null!=(p=c.error)?p:function(){},function(e){return function(e,t){return s(t)}}(this)),c.complete=u.choke(0,this.modelCache,"unlock",r),null==c.modelCache&&(c.modelCache=this.modelCache),t.__super__.create.call(this,i,c)},t.prototype._update=function(e){var t,n,r;return r=e.length===this.models.length?(t=a.sortBy(e,function(e){return e.cid}),n=a.sortBy(this.models,function(e){return e.cid}),!a.isEqual(t,n)):!0,r?this.reset(e):void 0},t.prototype.owner=function(e){return this.owner=e,this},t.prototype.syncModel=function(e,t,n){var r,i,o,s;return this.sourceModel=e,r=(null!=n?n:{}).fxGetIds,this.modelCache=this.sourceModel.modelCache,o={},i=function(e){return function(){var n,i,o;return n=e.sourceModel.get(t),null!=(i=null!=(o="function"==typeof r?r(n):void 0)?o:n)?i:[]}}(this),s=function(e){return function(t){var n;return n=a.chain(t).map(function(t){return e.modelCache.get(e.model,t)}).compact().value(),e._update(n)}}(this),this.sync=function(e){return function(){var e,t,n,r;for(r=i(),o={},e=0,n=r.length;n>e;e++)t=r[e],o[t]=!0;return s(r)}}(this),this.listenTo(this.sourceModel,"change:"+t,this.sync),this.listenTo(this.modelCache,"add:"+this.model.prototype.typeName,function(e){o[e.id]&&this.add(e)}),this.listenTo(this.modelCache,"remove:"+this.model.prototype.typeName,function(e){o[e.id]&&this.remove(e)}),this.sync(),this},t.prototype.syncCache=function(e,t,n){var r,i,o,s;for(this.modelCache=e,this.sync=function(e){return function(){return e._update(e.modelCache.all(e.model).filter(n))}}(this),s=this.model.prototype.typeName,this.listenTo(this.modelCache,"add:"+s,function(e){return function(t){return n(t)?e.add(t):void 0}}(this)),this.listenTo(this.modelCache,"remove:"+s,function(e){return function(t){return n(t)?e.remove(t):void 0}}(this)),this.listenTo(this.modelCache,"reset:"+s,this.sync),i=0,o=t.length;o>i;i++)r=t[i],this.listenTo(this.modelCache,"change:"+s+":"+r,function(e){return n(e)?this.add(e):this.remove(e)});return this.sync(),this},t.prototype.syncSubModels=function(e,t){return this.sourceModel=e,null==this.modelCache&&(this.modelCache=this.sourceModel.modelCache),this.sync=function(e){return function(){var n,r,i,o,s,u,c,l,d,p;for(n=e.models,p=null!=(c=e.sourceModel.get(t))?c:[],u=function(){var e,t,n;for(n=[],e=0,t=p.length;t>e;e++)i=p[e],d=a.find(this.models,function(e){return e.id===i.id}),null!=d?this.modelCache.enqueueDelta(d,i):d=new this.model(i,{modelCache:this.modelCache,collection:this}),n.push(d);return n}.call(e),l=e.models,r=0,o=l.length;o>r;r++)s=l[r],null==s.id&&u.push(s);return e._update(u)}}(this),this.listenTo(this.sourceModel,"change:"+t,this.sync),this.sync(),this},t.prototype.snoop=function(){var e,t;return e=1<=arguments.length?d.call(arguments,0):[],t=["add","remove","reset"].concat(e.map(function(e){return["change",e].join(":")})).join(" "),new o.ContinuousSignal(function(e){return function(n){var r;return n(e),r=function(){return n(e)},e.listenTo(e,t,r),function(){return e.stopListening(e,t,r)}}}(this))},t}(r.Collection)},{}],179:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(178),i=e(80),o=e(199),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.initialize=function(e,t){this.options=t},t.prototype.comparator=function(e){return e.get("dateExpires")?-i.parse(e.get("dateExpires")):-(1/0)},t}(r)},{}],180:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(178),i=e(200),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=i,t}(r)},{}],181:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(178),i=e(201),s=e(129),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.initialize=function(e,t){this.listenTo(this,"change:pos",this.sort),this.board=t.board},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.calcPos=function(e,t,n){return s.calcPos(e,this,t,null,n)},t.prototype.url=function(){return"/1/boards/"+this.board.id+"/lists"},t}(r)},{}],182:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(178),i=e(202),s=e("underscore"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.initialize=function(){return this.listenTo(this,"change:primary",this.resetPrimary)},t.prototype.resetPrimary=function(e){var t,n,r;if(e.get("primary")){for(r=this.without(e),t=0,n=r.length;n>t;t++)e=r[t],e.set("primary",!1);return this.sort()}},t.prototype.comparator=function(e){return Number(!e.get("primary"))+e.id},t.prototype.types=function(){return s.countBy(s.flatten(this.pluck("types")))},t}(r)},{}],183:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(215),i=e(33),o=e(178),s=e(203),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.model=s,t.prototype.sortField="fullName",t.prototype.idList=function(){return this.pluck("id")},t.prototype.remove=function(e,n){var i;return null==this.sourceModel?t.__super__.remove.apply(this,arguments):(t.__super__.remove.call(this,e),i=(null!=n?n.invite:void 0)?"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/ghost/"+e.id:"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/members/"+e.id,(null!=n?n.mass:void 0)&&(i+="/all"),r({url:i,type:"delete",success:function(e){return(null!=e?e.unreadable:0)?void 0:null!=n&&"function"==typeof n.success?n.success():void 0}}))},t.prototype.filterDeactivated=function(e){var n,r,o,s;return s=null!=e?e:{},o=s.model,n=s.force,null==o&&(o=this.sourceModel),null==n&&(n=!1),r=i.me(),new t(this.filter(function(e){return o.hasActiveMembership(e)||!n&&o.isDeactivated(e)&&o.canSeeDeactivated(r)},this.options))},t.prototype.comparator=function(e){var t;return null!=(t=e.get(this.sortField))?t.toLocaleLowerCase():void 0},t}(o)},{}],184:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(178),i=e(204),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=i,t.prototype.initialize=function(){return this.memberIndex={},this.listenTo(this,"add",function(e){return function(t){return e.memberIndex[t.get("idMember")]=t}}(this)),this.listenTo(this,"remove",function(e){return function(t){return delete e.memberIndex[t.get("idMember")]}}(this)),this.listenTo(this,"reset",function(e){return function(){var t,n,r,i,o;for(e.memberIndex={},i=e.models,o=[],t=0,n=i.length;n>t;t++)r=i[t],o.push(e.memberIndex[r.get("idMember")]=r);return o}}(this))},t.prototype.getMember=function(e){var t,n;return t=null!=(n=null!=e?e.id:void 0)?n:e,this.memberIndex[t]},t}(r)},{}],185:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(179),i=e(206),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=i,t}(r)},{}],186:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(178),i=e(207),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=i,t.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},t.prototype.comparator=function(e){var t;return(null!=(t=e.get("name"))?t.toUpperCase():void 0)||""},t}(r)},{}],187:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(178),i=e(208),s=e("bluebird"),a=e("underscore"),u=e("xtend"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.model=i,t.prototype.initialize=function(e,t){return this.scopeModel=t.scopeModel},t.prototype.scope=function(){return this.scopeModel.typeName.toLowerCase()},t.prototype.for=function(e,t){return a.find(this.models,function(n){return function(r){return r.get("idPlugin")===e&&r.get("access")===t&&r.get("scope")===n.scope()&&r.get("idModel")===n.scopeModel.id}}(this))},t.prototype.create=function(e,n){return e=u(e,{scope:this.scope(),idModel:this.scopeModel.id,access:e.visibility}),t.__super__.create.call(this,e,n)},t.prototype.dataForPlugin=function(e){return a.chain(this.models).filter(function(t){return t.get("idPlugin")===e}).groupBy(function(e){return e.get("scope")}).mapObject(function(e){return a.chain(e).groupBy(function(e){return e.get("access")}).mapObject(function(e){return e[0].get("value")}).value()}).value()},t.prototype.snoopDataForPlugin=function(e){return null==this.signalCache&&(this.signalCache={}),null==this.signalCache[e]&&(this.signalCache[e]=this.snoop("value").map(function(t){return function(){return t.dataForPlugin(e)}}(this)),this.signalCache[e].addDisposer(function(t){return function(){return delete t.signalCache[e]}}(this))),this.signalCache[e]},t.prototype.upsert=function(e,t,n){var r;r=this.for(e,t),null!=r?r.update("value",n):this.create({idPlugin:e,visibility:t,value:n})},t}(r)},{}],188:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(178),i=e(210),s=e(129),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.url=function(){return"/1/member/"+this.member.id+"/savedSearches"},t.prototype.initialize=function(e,t){return this.member=t.member,this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.saveSearch=function(e,t){var n;return n=this.length?this.at(this.length-1).get("pos")+s.spacing:s.spacing,this.create({name:e,query:t,pos:n},{modelCache:this.modelCache})},t}(r)},{}],189:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(178),i=e(211),s=e("underscore"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.url=function(){return"/1/cards/"+this.card.get("id")+"/stickers"},t.prototype.initialize=function(e,t){this.card=t.card,this.listenTo(this,"change:zIndex",this.sort)},t.prototype.comparator=function(e){return e.get("zIndex")||0},t.prototype.nextZIndex=function(e){var t;return this.length>0?(t=s.max(this.pluck("zIndex")),(null!=e?e.get("zIndex"):void 0)===t&&1===this.filter(function(e){return e.get("zIndex")===t}).length?t:t+1):1},t}(r)},{}],190:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(178),i=e(212),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=i,t.prototype.comparator=function(e,t){return e.get("name").localeCompare(t.get("name"))},t}(r)},{}],191:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(198),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="CustomEmoji",t}(i)},{}],192:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(198),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="CustomSticker",t}(i)},{}],193:[function(e,n,r){var i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=void 0,t(function(){return o=e(183)}),c=void 0,t(function(){return c=e(186)}),s=void 0,t(function(){return s=e(38)}),a=e(197),l=e("bluebird"),d=e("underscore"),u=e(25),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.typeName="Enterprise",t.prototype.nameAttr="name",t.prototype.urlRoot="/1/enterprises",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.destruct([this.organizationList=(new c).syncModel(this,"idOrganizations"),this.memberList=new o])},t.prototype.loadPageOfMembers=function(e){return s.loadMembersOfEnterprise(this.get("name"),e).tap(function(e){return function(t){var n;return n=t[0],n.length>0?e.memberList.add(n):void 0}}(this))},t.prototype.loadUserTypes=function(){return s.loadEnterprise(this.id,{fields:"userTypes",organizations:"none"})},t.prototype.isRealEnterprise=function(){return u.isFeatureEnabled("enterpriseUI",this.get("products"))},t}(a)},{}],194:[function(e,t,n){var r,i;i=e("underscore"),t.exports=r=function(){function e(){}return e.prototype.getLabels=function(){return this.labelList.models},e.prototype.dataForLabel=function(e){return i.extend(e.toJSON(),{isActive:this.hasLabel(e)})},e.prototype.toggleLabelColor=function(e){var t;return t=this.getBoard().labelForColor(e),null!=t?this.toggleLabel(t):void 0},e.prototype.hasLabel=function(e){return this.labelList.contains(e)},e.prototype.toggleLabel=function(e){var t,n;return t=!this.hasLabel(e),n=e.get("uses")+(t?1:-1),this.toggle("idLabels",e.id,t),e.set("uses",n)},e.prototype.createLabel=function(e,t){var n;return(n=i.find(this.getBoard().getLabels(),function(n){return n.get("name")===e&&n.get("color")===t}))?void(this.hasLabel(n)||this.toggleLabel(n)):void this.labelList.create({name:e,color:null!=t?t:"",idBoard:this.get("idBoard"),uses:1},{url:this.labelCreateUrl()})},e}()},{}],195:[function(e,n,r){var i,o,s,a,u,c,l,d,p=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e(217),o=e(33),s=void 0,t(function(){return s=e(184)}),c=e(121),u=e("underscore"),l=e(48),d=e("xtend"),n.exports=a=function(){function e(){}return e.prototype.orderedVisibleMembers=function(){return this.memberList.sortBy(function(e){return function(t){var n,r;return n=o.isMe(t)?"0":e.isDeactivated(t)?"3":e.isVirtual(t)?"2":"1",n+(null!=(r=t.get("fullName"))?r.toLocaleLowerCase():void 0)}}(this)).filter(function(e){return function(t){return!e.isDeactivated(t)||e.canSeeDeactivated(o.me())}}(this))},e.prototype.getMemberType=function(e){var t,n;return t=("function"==typeof this.getOrganization&&null!=(n=this.getOrganization())?n.isPremOrgAdmin(e):void 0)?"admin":this.getExplicitMemberType(e),"public"!==t&&("function"==typeof this.isVirtual?this.isVirtual(e):void 0)&&(t="virtual"),t},e.prototype._refreshMemberships=function(){return this._memberships.update(this.get("memberships"))},e.prototype._getMembershipFor=function(e){return this._memberships||(this._memberships=new s,this._refreshMemberships(),this.listenTo(this,"change:memberships",this._refreshMemberships)),this._memberships.getMember(e)},e.prototype.getMembershipFor=function(e){var t;return null!=(t=this._getMembershipFor(e))?t.toJSON():void 0},e.prototype.hasActiveMembership=function(e){return null!=this._getMembershipFor(e)&&!this.isDeactivated(e)},e.prototype.isMember=function(e){return null!=this._getMembershipFor(e)},e.prototype.isVirtual=function(e){return"ghost"===(null!=e?e.get("memberType"):void 0)},e.prototype.isDeactivated=function(e){var t;return(null!=(t=this._getMembershipFor(e))?t.get("deactivated"):void 0)===!0},e.prototype.isUnconfirmed=function(e){var t;return(null!=(t=this._getMembershipFor(e))?t.get("unconfirmed"):void 0)===!0},e.prototype.isObserver=function(e){return"observer"===this.getExplicitMemberType(e);
},e.prototype.isPremOrgAdmin=function(e){var t,n,r,i;return u.isString(e)&&(e=this.modelCache.get("Member",e)),n=null!=(r=null!=e&&"function"==typeof e.get?e.get("idPremOrgsAdmin"):void 0)?r:[],t=this.getOrganization?null!=(i=this.getOrganization())?i.id:void 0:this.id,p.call(n,t)>=0},e.prototype.getExplicitMemberType=function(e){var t,n;return this.isDeactivated(e)?"deactivated":this.isUnconfirmed(e)?"unconfirmed":(t=this._getMembershipFor(e))?t.get("memberType"):("function"==typeof this.getOrganization&&null!=(n=this.getOrganization())?n.isMember(e):void 0)?"org":"public"},e.prototype.canSeeDeactivated=function(e){var t,n;return this.isMember(e)||(null!=(t=e.organizationList)?t.get(null!=(n=this.getOrganization())?n.id:void 0):void 0)},e.prototype.addMembership=function(e){var t;return t=null!=this.get("memberships")?u.clone(this.get("memberships")):[],t.push(e),this.set("memberships",t)},e.prototype._removeFromMembershipsAttribute=function(e){return this.get("memberships")?this.set("memberships",c(this.get("memberships"),e)):void 0},e.prototype.removeMembership=function(e){return this._memberships.remove(e),this._removeFromMembershipsAttribute(e)},e.prototype.setOnMembership=function(e,t){return this.set({memberships:this.get("memberships").map(function(n){return n.idMember===e.id?d(n,t):n})})},e.prototype.toggleMemberHidden=function(e,t){return i({url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/hiddenGoogleAppsMembers",type:t.type,data:{gMail:e.get("gMail")}})},e.prototype.changeMemberRole=function(e,t){return null!=t.type&&this.setOnMembership(e,{memberType:t.type}),i({type:"PUT",url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/members/"+e.id,data:t}).then(function(){return l("Member","Change Role",t.type)})},e.prototype.addMemberRole=function(e){return i({type:"PUT",url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/members",data:e}).then(function(){return l("Member","Change Role",e.type)})},e}()},{}],196:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e(197),o=e("underscore"),t.exports=r=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._initSubEventsOn("myPrefs")}return s(t,e),t.prototype.myPrefNames=[],t.prototype.myPrefDefaults={},t.prototype.toJSON=function(e){var n,r,i,o,s,a;if(null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.prefs)for(s=this.myPrefNames,r=0,i=s.length;i>r;r++)o=s[r],a=this.getPref(o),n[o]=a,n[o+"_"+a]=!0;return n},t.prototype.getPref=function(e){var n,r;return u.call(this.myPrefNames,e)>=0?null!=(n=null!=(r=this.get("myPrefs"))?r[e]:void 0)?n:this.myPrefDefaults[e]:t.__super__.getPref.apply(this,arguments)},t.prototype.setPref=function(e,n,r){return u.call(this.myPrefNames,e)>=0?this.setMyPref(e,n,r):t.__super__.setPref.apply(this,arguments)},t.prototype.setMyPref=function(e,t,n){var r;return this.api({type:"put",method:"myPrefs/"+e,data:{value:t}},n),r=o.clone(this.get("myPrefs")),r[e]=t,this.set({myPrefs:r})},t}(i)},{}],197:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(198),o=e("underscore"),t.exports=r=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._initSubEventsOn("prefs")}return s(t,e),t.prototype.prefNames=[],t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),r=function(e){return function(t,i,s){var a,u,c,l,d,p,h;for(p=[],a=0,c=t.length;c>a;a++)l=t[a],u=s?s+"_"+l:l,h=null!=(d=null!=i?i[l]:void 0)?d:e.getPref(l),o.isObject(h)&&!o.isArray(h)?p.push(r(o.keys(h),h,u)):(n[u]=h,p.push(n[u+"_"+h]=!0));return p}}(this),e.prefs&&r(this.prefNames),n},t.prototype.getPref=function(e){var t;return null!=(t=this.get("prefs"))?t[e]:void 0},t.prototype.setPref=function(e,t,n){return this.update("prefs/"+e,t,n)},t.prototype.set=function(e,n){var r,i,s;if(e=o.clone(e),null!=e.prefs){i=e.prefs;for(r in i)s=i[r],"none"===s&&(s="disabled"),"owners"===s&&(s="admins"),i[r]=s}return t.__super__.set.apply(this,arguments)},t}(i)},{}],198:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty,y=[].slice,w=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e(215),o=e(216),s=e(234),a=e(83),u=e("hearsay"),c=void 0,t(function(){return c=e(38)}),l=e("bluebird"),d=e("promise-queue"),p=e(111),m=e(129),f=e("underscore"),g=e(106),n.exports=g(a,p,h=function(e){function t(e,n){var r;this._marked={},this._lockQueue={},this.modelCache=null!=n?n.modelCache:void 0,this._apiQueue=new d(1),t.__super__.constructor.apply(this,arguments),null!=(r=this.modelCache)&&r.add(this)}return v(t,e),t.prototype._initSubEventsOn=function(e){return this.listenTo(this,"change:"+e,function(t){return function(n,r){var i,o,s,a,u;o=null!=(s=n.previousAttributes())?s[e]:void 0,a=[];for(i in r)u=r[i],(null==o||u!==o[i])&&a.push(t.trigger("change:"+e+"."+i));return a}}(this))},t.prototype.waitForLock=function(e,t){var n;return n=function(t){return function(){var r;return f.isEmpty(t._lockQueue[e])?delete t._lockQueue[e]:(r=t._lockQueue[e].shift())(n)}}(this),null!=this._lockQueue[e]?this._lockQueue[e].push(t):(this._lockQueue[e]=[],t(n))},t.prototype.set=function(e,n){var r,i,o,s,a,u,c,l,d,p,h,m,g,v,b,w,_,k;if(f.isArray(e)&&(e=f.find(e,function(e){return e.id===this.id||e._id===this.id})),null!=(null!=e?e._id:void 0)&&(null==e.id&&(e.id=e._id),delete e._id),_=function(){var t;t=[];for(c in e)k=e[c],c.indexOf("/")>=0&&t.push([c,k]);return t}(),_.length>0)for(e=f.clone(e),a=0,p=_.length;p>a;a++){for(g=_[a],c=g[0],k=g[1],v=c.split("/"),m=v[0],i=3<=v.length?y.call(v,1,u=v.length-1):(u=1,[]),d=v[u++],null==e[m]&&(e[m]=null!=(b=f.clone(this.get(m)))?b:{}),o=e[m],s=l=0,h=i.length;h>l;s=++l)r=i[s],o=o[r]=null!=(w=f.clone(o[r]))?w:{};o[d]=k,delete e[c]}return t.__super__.set.apply(this,arguments)},t.prototype.destructor=function(){var e,t,n,r;if(this.stopListening(),this.cancelScheduled(),null!=this._using)for(r=this._using,e=0,t=r.length;t>e;e++)n=r[e],"function"==typeof n.destructor&&n.destructor();return m.shred(this)},t.prototype.destroy=function(){return t.__super__.destroy.apply(this,arguments),this.destructor()},t.prototype.destruct=function(e){var t,n,r,i;if(f.isArray(e)){for(null==this._using&&(this._using=[]),i=[],t=0,n=e.length;n>t;t++)r=e[t],i.push(this._using.push(r));return i}return this.destruct([e])},t.load=function(e,t,n){return l.try(function(r){return function(){var i,o,s;return null==n||null==e?null:(s=function(e,t){var n;return n=f.keys(e),!f.any(n,function(e){return w.call(t,e)<0})},s(t,["query"])&&s(t.query,["fields"])&&null!=(i=n.get(r,e))&&(o=t.query.fields?t.query.fields.split(","):[],f.all(o,function(e){return i.attributes.hasOwnProperty(e)}))?i:null)}}(this)).then(function(n){return function(r){return null!=r?r:c.loadModel(n,e,t)}}(this))},t.prototype.ready=function(e){e&&(this.isReady?e():(this.waitingForReady||(this.waitingForReady=[]),this.waitingForReady.push(e)))},t.prototype.setReady=function(){var e,t,n,r;if(this.isReady=!0,this.waitingForReady)for(r=this.waitingForReady,this.waitingForReady=null,t=0,n=r.length;n>t;t++)e=r[t],"function"==typeof e&&e()},t.prototype.update=function(){var e,t,n,r,i,o,s,a,u,c;return f.isString(arguments[0])?(n=arguments[0],u=arguments[1],s=4<=arguments.length?y.call(arguments,2,e=arguments.length-1):(e=2,[]),i=s[0],r=arguments[e++],o={},o[n]=u):(o=arguments[0],a=3<=arguments.length?y.call(arguments,1,t=arguments.length-1):(t=1,[]),i=a[0],r=arguments[t++]),null!=i||f.isFunction(r)||(i=r,r=null),c=(null!=i?i:{}).waitForServer,c||this.set(o),this._persistUpdate(o,r)},t.prototype._persistUpdate=function(e,t){return this.api({type:"put",data:e},t)},t.prototype.addToSet=function(){var e,t,n,r,i,o,s,a,u,c,l;return t=arguments[0],c=arguments[1],e=4<=arguments.length?y.call(arguments,2,r=arguments.length-1):(r=2,[]),o=arguments[r++],s=e[0],null!=s||f.isFunction(o)||(s=o,o=function(){}),a=null!=s?s:{},l=a.waitForServer,n=a.collectionName,i=this,null==n&&(n=t),l||this.set(t,f.uniq((null!=(u=i.get(t))?u:[]).concat(c))),this.api({method:n,data:{value:c},success:function(e){return function(n,r){var o;return o={},o[t]=f.uniq(i.get(t).concat(c)),e.modelCache.enqueueDelta(i,o),"function"==typeof r?r(null,n):void 0}}(this)},o)},t.prototype.pull=function(){var e,t,n,r,i,o,s,a,u,c,l;return t=arguments[0],c=arguments[1],e=4<=arguments.length?y.call(arguments,2,r=arguments.length-1):(r=2,[]),o=arguments[r++],s=e[0],null!=s||f.isFunction(o)||(s=o,o=function(){}),a=null!=s?s:{},l=a.waitForServer,n=a.collectionName,i=this,null==n&&(n=t),l||this.set(t,f.without(null!=(u=i.get(t))?u:[],c)),this.api({method:n+"/"+c,type:"delete",success:function(e){return function(n,r){var o;return o={},o[t]=f.without(i.get(t),c),e.modelCache.enqueueDelta(i,o),"function"==typeof r?r(null,n):void 0}}(this)},o)},t.prototype.run=function(e,t,n){return this.api({method:e,data:t},n)},t.prototype.api=function(e,t){var n,r,s,a,u,c;return s=e.method,c=e.type,n=e.data,u=e.success,r=e.datatype,a=this,null==r&&(r=""),null==s&&(s=""),null==c&&(c="post"),null==n&&(n={}),null==u&&(u=function(e){return function(t,n){var r;t.id===a.id?e.modelCache.enqueueDelta(a,t):f.isArray(t)&&(r=f.find(t,function(e){return e.id===a.id}),null!=r&&e.modelCache.enqueueDelta(a,r)),n(null,t)}}(this)),null==t&&(t=function(){}),this.waitForId(this,function(e){return function(){var a;return a=e.url(),null!=s&&""!==s&&(a+="/"+s),l.using(e.modelCache.getLock(),function(){return e._apiQueue.add(function(){return new l(function(e,t){return i({url:a,type:c,data:n,datatype:r,success:function(t){e(l.fromNode(function(e){return u(t,e)}))},error:function(e,n,r,i){var s,a;a=e.status,s=e.responseText,r=o.fromResponse(a,s),(r instanceof o.Server||r instanceof o.NoResponse)&&i(),t(r)}})})})}).nodeify(t).catch(function(){}).done()}}(this)),this},t.prototype.toggle=function(){var e,t,n,r,i,o,s;return n=arguments[0],s=arguments[1],e=arguments[2],t=5<=arguments.length?y.call(arguments,3,r=arguments.length-1):(r=3,[]),i=arguments[r++],o=t[0],this[e?"addToSet":"pull"](n,s,o,i)},t.prototype.snoop=function(e){return null!=e?new u.ContinuousSignal(function(t){return function(n){var r;return n(t.get("attr")),r=function(){return n(t.get("attr"))},t.listenTo(t,"change:"+e,r),function(){return t.stopListening(t,"change:"+e,r)}}}(this)):new u.ContinuousSignal(function(e){return function(t){var n;return t(e),n=function(){return t(e)},e.listenTo(e,"change",n),function(){return e.stopListening(e,"change",n)}}}(this))},t.prototype.isVisibleAction=function(e){return!0},t.prototype.getActions=function(){var e;return e=1<=arguments.length?y.call(arguments,0):[],this.modelCache.all("Action").filter(function(t){return function(n){return n.includesModel(t)&&f.all(e,function(e){return n.includesModel(e)})&&t.isVisibleAction(n)}}(this))},t}(s.Model))},{}],199:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty,c=[].slice;r=e(215),o=e(198),s=e(45),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.typeName="Invitation",t.prototype.initialize=function(e,t){s("invitation",t),this.invitationList=t.collection,this.setReady()},t.prototype.create=function(e){var t,n,i,o;return i=e.model,t=e.data,o=e.success,n=e.error,r({url:"/1/"+i.typeName+"/"+i.id+"/invitations",type:"post",data:t,dataType:"json",error:function(e){return function(){var t,r,i,o,s;return t=2<=arguments.length?c.call(arguments,0,o=arguments.length-1):(o=0,[]),i=arguments[o++],r=t[0],"Member email restricted by organization administrators"===r.responseText.trim()?void e.$(".error").show():("Member already invited"!==(s=r.responseText.trim())&&"Member already a member"!==s&&"Member email restricted by organization administrators"!==s&&i(),"function"==typeof n?n(r):void 0)}}(this),success:function(e){return function(e){return"function"==typeof o?o(e):void 0}}(this)})},t.prototype.delete=function(e){var t,n,i,o;return i=e.model,n=e.idInvitation,o=e.success,t=e.error,r({url:"/1/"+i.typeName+"/"+i.id+"/invitations/"+n,type:"delete",dataType:"json",error:function(e){return function(){var e,n,r,i;return e=2<=arguments.length?c.call(arguments,0,i=arguments.length-1):(i=0,[]),r=arguments[i++],n=e[0],"Invitation not found"!==n.responseText.trim()&&r(),"function"==typeof t?t(n):void 0}}(this),success:function(e){return function(e){return"function"==typeof o?o(e):void 0}}(this)})},t.prototype.respond=function(e){var t,n,i,o,s;return i=e.model,o=e.response,t=e.data,s=e.success,n=e.error,r({url:"/1/"+i.typeName+"/"+i.id+"/invitations/"+o,type:"post",dataType:"json",data:t,error:function(e){return function(){var e,t,r,i;return e=2<=arguments.length?c.call(arguments,0,i=arguments.length-1):(i=0,[]),r=arguments[i++],t=e[0],"already a member"!==t.responseText.trim()&&r(),"function"==typeof n?n(t):void 0}}(this),success:function(e){return function(e){return"function"==typeof s?s(e):void 0}}(this)})},t}(o)},{}],200:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(198),o=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.typeName="Label",t.prototype.urlRoot="/1/labels",t.prototype.getBoard=function(){return this.modelCache.get("Board",this.get("idBoard"))},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.colorSortVal=function(){var e;return e=o.indexOf(t.colors,this.get("color")),e>=0?e:1/0},t.prototype.nameSortVal=function(){var e;return(null!=(e=this.get("name"))?e:"").toLowerCase()},t.compare=function(e,t){var n;return n=e.colorSortVal()-t.colorSortVal(),0===n||isNaN(n)?e.nameSortVal().localeCompare(t.nameSortVal()):n},t.colors=["green","yellow","orange","red","purple","blue","sky","lime","pink","black"],t}(i)},{}],201:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;i=e(73),o=void 0,t(function(){return o=e(173)}),a=e(198),u=e(129),l=e(142),p=e(106),h=e(141),d=e(220),m=e("xtend"),c=e("underscore"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),p(i,t),t.prototype.typeName="List",t.prototype.urlRoot="/1/lists",t.prototype.initialize=function(){return this.destruct([this.cardList=new o(null,{list:this}).owner(this).syncCache(this.modelCache,["idList","closed"],function(e){return function(t){return e.id&&t.get("idList")===e.id&&t.isOpen()}}(this))])},t.prototype.sync=function(e,n,r){return"create"===e&&null==this.get("idBoard")?(this.waitForAttrs(this,["idBoard"],function(i){return function(o){return i.set(o),t.__super__.sync.call(i,e,n,r)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this))):t.__super__.sync.apply(this,arguments)},t.prototype.subscribe=function(e){e!==this.get("subscribed")&&this.update({subscribed:e})},t.prototype.move=function(e){this.update({pos:this.getBoard().calcPos(e,this)}),this.collection.sort({silent:!0})},t.prototype.close=function(){this.update({closed:!0})},t.prototype.reopen=function(){this.update({closed:!1,pos:this.getBoard().calcPos(this.collection.length,this)})},t.prototype.onChange=function(){},t.prototype.calcPos=function(e,t,n){return u.calcPos(e,this.cardList,t,null,n)},t.prototype.bottomCardPos=function(){var e;return null!=(e=this.cardList.last())?e.get("pos")+u.spacing:u.spacing},t.prototype.getBoard=function(){var e,t;return null!=(e=this.modelCache.get("Board",this.get("idBoard")))?e:null!=(t=this.collection)?t.owner:void 0},t.prototype.selectCardInList=function(e){var t;t=this.openCards().at(e),null!=t&&this.getBoard().viewState.selectCard(t)},t.prototype.selectFirstCardInList=function(){return this.selectCardInList(0)},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.getIndexInList=function(){return c.indexOf(this.getBoard().listList.models,this)},t.prototype.openCards=function(){return this.cardList},t.prototype.uploadUrl=function(e,t,n,r){return null==r&&(r=function(){}),this.cardList.create(m({name:n,pos:this.bottomCardPos()},t),{createData:{urlSource:e,name:null!=t?t.name:void 0}},r)},t.prototype._processText=function(e){var t,n,r,i,o;return/[\r\n]/.test(e)?(o=/^\s*([^\r\n]+)/.exec(e),t=o[0],r=o[1],i=h(r,256),n=e):(i=h(e,256),n=i!==e||l(e)?e:""),{name:i,desc:n}},t.prototype.uploadText=function(e,t){var n,r,i;return null==t&&(t=function(){}),e?(i=this._processText(e),r=i.name,n=i.desc,this.cardList.create({name:r,desc:n,pos:this.bottomCardPos()},t)):t()},t.prototype.upload=function(e,t,n){var r,i;return null==n&&(n=function(){}),r={name:t,idList:this.id,pos:this.bottomCardPos()},i=d(c.extend({},r,{fileSource:[e,t]})),this.cardList.create(r,i)},t}(a)},{}],202:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(198),o=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.typeName="Login",t.prototype.hasConflict=function(){var e;return e=this.collection.types(),!o.any([function(e){return function(){return o.isEmpty(e.get("types"))}}(this),function(t){return function(){return"password"in e}}(this),function(t){return function(){return e.google>=2}}(this)],function(e){return e()})},t}(i)},{}],203:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I=function(e,t){function n(){this.constructor=e}for(var r in t)N.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},N={}.hasOwnProperty,V=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("jquery"),O=e(119),s=e(215),a=e(216),u=e(217),o=e(71),c=e(33),l=e(168),d=void 0,t(function(){return d=e(170)}),p=e(172),h=e(6),m=e(176),f=e(177),v=e(98),b=e(182),w=e(23),L=e("moment"),_=void 0,t(function(){return _=e(38)}),k=e(197),C=void 0,t(function(){return C=e(186)}),x=e(222),j=e(187),S=e(188),P=e(85),T=e(114),D=e(48),M=e(129),B=e("underscore"),E=e(101),g=new Date(2016,8,21),A=null,n.exports=y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return I(t,e),n=1e4,t.prototype.typeName="Member",t.prototype.nameAttr="fullName",t.prototype.urlRoot="/1/members",t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.destruct([this.boardList=(new d).syncModel(this,"idBoards"),this.organizationList=(new C).syncModel(this,"idOrganizations"),this.pluginDataList=new j([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"member"===t.get("scope")}}(this))]),c.isMe(this)&&(this.destruct([this.boardStarList=new p([],{member:this}).syncSubModels(this,"boardStars"),this.savedSearchList=new S([],{member:this}).syncSubModels(this,"savedSearches"),this.customStickerList=new f([],{member:this}).syncSubModels(this,"customStickers"),this.boardBackgroundList=new l([],{member:this}).syncSubModels(this,"boardBackgrounds"),this.customEmojiList=new m([],{member:this}).syncSubModels(this,"customEmoji"),this.loginList=new b([],{member:this}).syncSubModels(this,"logins")]),this.isFeatureEnabled("customEmoji")&&_.loadMemberCustomEmoji(this.id).done()),this.listenTo(this,"change:editing",function(e){return function(t){var n,r;return null!=(n=e.modelCache.get("Card",null!=(r=t.get("editing"))?r.idCard:void 0))?n.updateEditing(t):void 0}}(this))},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=O(x.memberActions)),this._actionFilter(e)},t.prototype.isLoggedIn=function(){return!this.get("notLoggedIn")},t.prototype.getMembershipData=function(e){var t,n,r,i,o,s,a,u,l,d,p,h,m,f,g,v,b,y,w;return t=e.adminList.models,l=c.isMe(this),m=c.me(),h=B.some(t,function(e){return function(t){return t.id!==e.id}}(this)),d=t.length>1,p=e.memberList.length>1,y=e.getMembershipFor(this),f="admin"===e.getExplicitMemberType(this)||"admin"===(null!=y?y.memberType:void 0),v="observer"===e.getExplicitMemberType(this)||"observer"===(null!=y?y.memberType:void 0),g=!(f||v),b=e.isVirtual(this),u=e.owned(),w="org"!==e.getExplicitMemberType(this),n=u,o=!g&&h&&u,s=!v&&h&&u,i=!f&&u,a=p&&(h&&(u||l)||!l&&w&&("function"==typeof e.canInviteMembers?e.canInviteMembers():void 0)&&("function"==typeof e.compareMemberType?e.compareMemberType(m,this):void 0)>=0),r=a&&"Organization"===e.typeName&&u&&!e.isDeactivated(this)&&!b,{isMe:l,canRemove:a,canDeactivate:r,canChangeRole:n,memberIsAdmin:f,memberIsObserver:v,memberIsNormal:g,memberIsVirtual:b,canMakeMember:o,canMakeObserver:s,canMakeAdmin:i,isMoreThanOneAdmin:d,isMoreThanOneMember:p}},t.prototype.canAddBoardsTo=function(e){return null!=e.getMembershipFor(this)},t.prototype.isDismissed=function(e){var t;return V.call(null!=(t=this.get("oneTimeMessagesDismissed"))?t:[],e)>=0},t.prototype.dismiss=function(e,t){return this.isDismissed(e)?"function"==typeof t?t():void 0:this.addToSet("oneTimeMessagesDismissed",e,t)},t.prototype.dismissAd=function(e){return u({url:this.urlRoot+"/me/messagesDismissed",type:"post",data:{name:"ad-"+e}}).then(function(e){return function(t){return e.set("messagesDismissed",t.messagesDismissed)}}(this)).done()},t.prototype.shouldShowPowerUpSuggestionFor=function(e){var t,n,r;return this.hasPowerUpSuggestionsEnabled()?(n=B.findWhere(this.getDismissedPowerUpSuggestions(),{name:"power-up-suggestions-"+e}),null==n?!0:(r=L(n.lastDismissed),t=L().diff(r,"days"),t>=4)):!1},t.prototype.dismissPowerUpSuggestionFor=function(e){return u({url:this.urlRoot+"/me/messagesDismissed",type:"post",data:{name:"power-up-suggestions-"+e}}).then(function(e){return function(t){return e.set("messagesDismissed",t.messagesDismissed)}}(this)).done()},t.prototype.isAdDismissed=function(e){var t;return t=this.get("messagesDismissed"),B.find(t,function(t){return t.name==="ad-"+e})},t.prototype.dismissLanguageBannerFor=function(e,t){return this.dismiss("new-lang-"+e,t)},t.prototype.shouldShowNewLanguageBannerFor=function(e){return e=v.normalizeLocale(e),!this.isDismissed("new-lang-"+e)&&this.getLocale()!==e&&v.normalizeLocale(window.locale)!==e&&v.mostPreferred(v.preferred,[this.getLocale(),e])===e},t.prototype.owned=function(){return c.isMe(this)},t.prototype.prefNames=["minutesBetweenSummaries"],t.prototype.getLocale=function(){return this.getPref("locale")?v.normalizeLocale(this.getPref("locale")):"en"},t.prototype.getLocales=function(){return this.isLoggedIn()?[this.getLocale(),"en"]:v.preferred.map(v.normalizeLocale)},t.prototype.getMemberViewTitle=function(){var e,t,n;return t=this.get("username"),e=this.get("fullName"),n=e+" ("+t+")"},t.prototype.toggleColorBlindMode=function(){null!=this.get("prefs")&&(this.get("prefs").colorBlind?this.setPref("colorBlind",!1).save():this.setPref("colorBlind",!0).save(),i("body").toggleClass("body-color-blind-mode-enabled",this.get("prefs").colorBlind))},t.prototype.getOpenBoardsByOrg=function(e){var t,n,r,i,o,s,a,u,c,l,d,p;for(c={},l=this.boardList.models,r=0,a=l.length;a>r;r++)t=l[r],t.isOpen()&&(e&&"observer"===t.get("myPermLevel")||(n=t.toJSON(),i=null!=t.getOrganization()?n.idOrganization:"",null==c[i]&&(c[i]={boards:[],displayName:""===i?E("member boards.boards"):null!=(d=this.modelCache.get("Organization",i))?d.get("displayName"):void 0}),c[i].boards.push(n)));for(o=B.sortBy(B.keys(c),function(e){return""===e?"":c[e].displayName}),p=[],s=0,u=o.length;u>s;s++)i=o[s],p.push(c[i]);return p},t.prototype.getSortedOrgs=function(){return B.clone(this.organizationList.models).sort(function(e,t){return e.get("displayName").localeCompare(t.get("displayName"))})},t.prototype.checkColorBlindMode=function(){var e;return i("body").toggleClass("body-color-blind-mode-enabled",(null!=(e=this.get("prefs"))?e.colorBlind:void 0)===!0)},t.prototype.isFeatureEnabled=function(e){return w.isFeatureEnabled(e,this.get("products"))},t.prototype.isGold=function(){return w.hasProduct(this.get("products"))},t.prototype.isInAnyBCOrganization=function(){return this.organizationList.any(function(e){return e.isPremium()})},t.prototype.getBillingStrategy=function(e){return{flatRate:!0}},t.prototype.hasMemberAccount=function(){var e;return o.hasAccount(null!=(e=this.get("paidAccount"))?e.standing:void 0)},t.prototype.hasMemberOrOrgAccount=function(){return this.hasMemberAccount()||this.organizationList.any(function(e){return e.hasAccount()})},t.prototype.hasPowerUpSuggestionsEnabled=function(){var e,t;return e=P("powerUpSuggestions").get("maxDismissalCount"),t=this.getDismissedPowerUpSuggestions().reduce(function(e,t){return e+t.count},0),e>t},t.prototype.getDismissedPowerUpSuggestions=function(){var e;return e=this.get("messagesDismissed"),e.filter(function(e){return e.name.indexOf(!1)})},t.prototype.allCustomEmoji=function(){var e,t,n,r,i;if(e={},this.isFeatureEnabled("customEmoji"))for(i=this.customEmojiList.models,n=0,r=i.length;r>n;n++)t=i[n],e[t.get("name")]=t.get("url");return e},t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.hasPassword&&(n.hasPassword=V.call(n.loginTypes,"password")>=0),n.accountStanding=o.standingName(null!=(r=this.get("paidAccount"))?r.standing:void 0),n},t.prototype.editing=function(e){return null==e&&(e={}),B.isEqual(e,this.lastMessage)?void 0:(this.lastMessage=e,clearTimeout(this.clearLastTimeout),this.clearLastTimeout=this.setTimeout(function(e){return function(){return e.lastMessage=null}}(this),n/2),c.isLoggedIn()?s({url:this.urlRoot+"/"+this.id+"/editing",type:"post",background:!0,data:B.clone(e)}):void 0)},t.prototype.removeMembershipConfirmationKey=function(e){var t;return t="Organization"===e.typeName,c.isMe(this)?t?"leave org":"leave board":t?"remove member from org":e.isDeactivated(this)?"remove deactivated member from board":"remove member from board"},t.prototype.clearAllNotifications=function(){s({url:"/1/notifications/all/read",type:"post"})},t.prototype.getMobileTempPassword=function(e){s({url:"/1/members/me/loginToken",type:"post",data:{mode:"password"},success:function(t){return e(t.password)}})},t.prototype.maxFileSize=function(){return this.isFeatureEnabled("largeAttachments")?262144e3:10485760},t.prototype.canUploadAttachment=function(e){return e.size<this.maxFileSize()},t.prototype.accountNewerThan=function(e){return M.idToDate(this.id)>e},t.prototype.getShowDetails=function(){var e;return null!=(e=T.get("showDetails"))?e:this.accountNewerThan(g)?!1:!0},t.prototype.setShowDetails=function(e){return T.set("showDetails",e)},t.prototype.enterpriseWithRequiredConversion=function(){var e;if(null==this.get("idEnterprise"))return e=this.organizationList.find(function(e){var t,n;return null!=e.get("idEnterprise")&&null!=e.getEnterprise()&&(null!=(t=e.getEnterprise().get("prefs"))?t.mandatoryTransferDate:void 0)&&!(null!=(n=e.getEnterprise().get("prefs"))?n.ssoOnly:void 0)}),null!=e?e.getEnterprise():void 0},t.prototype.missedTransferDate=function(){return this.get("missedTransferDate")},t.prototype.hasBCPowerUps=function(){return this.organizationList.any(function(e){return e.isFeatureEnabled("plugins")})},t.prototype.getPowerUpsLimit=function(){return this.hasBCPowerUps()?1/0:this.isFeatureEnabled("threePlugins")?3:1},t.prototype.isEnterpriseAdmin=function(){var e;return(null!=(e=this.get("idEnterprisesAdmin"))?e.length:void 0)>0},t.prototype.loadNextSurveyDate=function(){var e,t;return t=null!=i.cookie("simulateNps"),(null!=(e=P("npsSurvey"))?e.get("showSurvey"):void 0)||t?u({url:this.url()+"/nps/nextSurveyDate",data:{pageId:"header"}}).then(function(e){return function(t){var n;return n=Date.parse(t.nextSurveyDate),n<Date.now()?u({url:e.url()+"/nps",data:{pageId:"header"}}).then(function(e){var t,n,r,i,o;return t=e.cancellations,n=e.next_survey_date,r=e.opted_out,i=e.optout_available,o=e.past_next_survey_date,o&&0===t&&!r}):!1}}(this)).catch(a,function(e){return function(){return!1}}(this)).then(function(e){return function(n){return e.update({showNps:n||t})}}(this)).done():void 0},t.prototype.shouldShowSurvey=function(){return this.get("showNps")===!0},t.prototype.dismissSurvey=function(){return this.set("showNps",!1),T.unset("npsDisplayCount"),u({url:this.url()+"/nps/cancel",method:"post",data:{pageId:"header"}}).done()},t.prototype.trackShowSurvey=function(){var e,t;return e=null!=(t=T.get("npsDisplayCount"))?t:0,e++,T.set("npsDisplayCount",e),D("NPS","Shown Survey","Count",void 0,e),u({url:this.url()+"/nps/show",method:"post",data:{pageId:"header",displayCount:e}}).done()},t.prototype.submitSurvey=function(e){var t,n,r,i,o,s;return n=e.completed,r=e.score,t=e.comment,s=e.usage,i=e.trackScore,o=e.trackUsage,this.set("showNps",!1),i&&D("NPS","Submit Survey","Score",void 0,r),o&&D("NPS","Submit Survey","Usage",s||"Not Specified"),u({url:this.url()+"/nps/survey",method:"post",data:{pageId:"header",survey_rating:r,survey_attributes_comment:t,survey_attributes_role:s,survey_completed:n}}).done()},t.prototype.setPluginData=function(e,t,n){return this.pluginDataList.upsert(e,t,n)},t.prototype.getPluginData=function(e){return this.pluginDataList.dataForPlugin(e)},t.prototype.clearPluginData=function(e){var t;return null!=(t=this.pluginDataList.for(e,"private"))?t.destroy():void 0},t.prototype.snoopPluginData=function(e){var t;return t=this.pluginDataList.snoopDataForPlugin(e)},t}(k)},{}],204:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(198),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(i)},{}],205:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(33),i=e(6),s=e(198),a=e(129),u=e("underscore"),c=e("xtend"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.typeName="Notification",t.prototype.urlRoot="/1/notifications",t.sortedByDateDescending=function(e){return u.sortBy(e.all("Notification"),function(e){return-new Date(e.get("date")).getTime()})},t.unreadCount=function(e){return e.all("Notification").filter(function(e){return e.get("unread")}).length},t.prototype.getModel=function(){return this.collection.options.model},t.prototype.getBoard=function(){var e,t,n;return null!=(e=null!=(t=this.get("data"))&&null!=(n=t.board)?n.id:void 0)?this.modelCache.get("Board",e):null},t.prototype.getMember=function(){var e;return null!=(e=this.modelCache.get("Member",this.get("idMemberCreator")))?e.toJSON():void 0},t.prototype.triggerCacheEvents=function(e,t){var n,r,i,o;for(o=this.idModels(),n=0,i=o.length;i>n;n++)r=o[n],e.trigger(t+":"+this.typeName+":"+r)},t.prototype.idModels=function(){var e,t,n,r,i;n=null!=(t=this.get("data"))?t:{},
r=[];for(e in n)i=n[e],null!=(null!=i?i.id:void 0)&&r.push(i.id);return r},t.prototype.isCommentLike=function(){var e;return"commentCard"===(e=this.get("type"))||"copyCommentCard"===e},t.prototype.isAddAttachment=function(){return"addAttachmentToCard"===this.get("type")},t.prototype.getExpandedData=function(){var e,t,n,r,i;return n=c(null!=(i=this.toJSON().data)?i:{},{date:this.get("date"),unread:this.get("unread")}),n[this.get("type")]=!0,e=n.board,t=n.card,r=n.organization,n},t.prototype.markRead=function(){return this.update({unread:!1})},t.prototype.navigateToView=function(){var e;return e=this.get("data"),null!=e&&null!=e.card&&null!=e.board?(i.displayBoard({idBoard:e.board.id,idCard:e.card.id}).done(),!0):"memberJoinedTrello"===this.get("type")?(document.location="/recommend",!0):!1},t.prototype.getUrlOfTarget=function(){var e;return e=this.get("data"),null!=e.card?i.getCardUrlWithoutModels(e.board.id,e.card.id,e.card.name):null!=e.board?i.getBoardUrl(e.board):null!=e.organization?i.getOrganizationUrl(e.organization.id):i.getMemberNotificationsUrl()},t}(s)},{}],206:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(199),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="OrganizationInvitation",t}(r)},{}],207:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j=function(e,t){function n(){this.constructor=e}for(var r in t)S.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},S={}.hasOwnProperty;i=e(71),o=e(215),s=e(216),a=e(217),u=e(33),c=void 0,t(function(){return c=e(170)}),l=e(6),d=void 0,t(function(){return d=e(183)}),p=e(195),h=e(197),m=e(25),g=void 0,t(function(){return g=e(185)}),b=e(229),y=e(190),v=e(187),w=e(129),_=e("underscore"),k=e(106),C=e(48),x=e("xtend"),n.exports=f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),k(p,t),t.prototype.typeName="Organization",t.prototype.nameAttr="displayName",t.prototype.urlRoot="/1/organizations",t.prototype.initialize=function(){return t.__super__.initialize.call(this),this.destruct([this.invitationList=new g([]),this.boardList=(new c).syncModel(this,"idBoards"),this.memberList=(new d).syncModel(this,"memberships",{fxGetIds:function(e){return _.pluck(e,"idMember")}}),this.adminList=(new d).syncModel(this,"memberships",{fxGetIds:function(e){return function(e){var t;return t=function(e){var t,n;return n=e.memberType,t=e.deactivated,"admin"===n&&!t},_.pluck(_.filter(e,t),"idMember")}}(this)}),this.tagList=(new y).syncSubModels(this,"tags"),this.pluginDataList=new v([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"organization"===t.get("scope")}}(this))]),this._slackAssociation=null},t.prototype.prefNames=["permissionLevel","orgInviteRestrict","boardVisibilityRestrict","externalMembersDisabled"],t.prototype.editable=function(){var e,t;return e=u.me(),t=this.getMembershipFor(e),e&&"admin"===(null!=t?t.memberType:void 0)},t.prototype.isPublic=function(){return"public"===this.getPref("permissionLevel")},t.prototype.isPremium=function(){return m.hasProduct(this.get("products"))},t.prototype.isBusinessClass=function(){return this.isPremium()&&!this.belongsToRealEnterprise()},t.prototype.belongsToRealEnterprise=function(){return m.isFeatureEnabled("enterpriseUI",this.get("products"))},t.prototype.hasAccount=function(){var e;return i.hasAccount(null!=(e=this.get("paidAccount"))?e.standing:void 0)},t.prototype.isPremiumMonthly=function(){return this.isPremium()&&m.isMonthly(this.get("products"))},t.prototype.isPremiumYearly=function(){return this.isPremium()&&m.isYearly(this.get("products"))},t.prototype.calculateTotalPrice=function(e){return m.getPrice(this.get("products"))*e},t.prototype.isEnterprise=function(){return null!=this.get("idEnterprise")},t.prototype.paysWithPurchaseOrder=function(){var e;return m.usesPurchaseOrder(this.get("products"))||"purchase-order@trello.com"===(null!=(e=this.get("paidAccount"))?e.contactEmail:void 0)},t.prototype.getBillingStrategy=function(e){return m.isPerUser(e)?{perUser:!0,perActiveUser:m.isPerActiveUser(e),userCount:m.isPerActiveUser(e)?this.get("activeBillableMemberCount"):this.get("billableMemberCount")}:{flatRate:!0}},t.prototype.totalPerUserPrice=function(e){var t;return t=this.getBillingStrategy(e),t.perUser?t.userCount*m.getPrice(e):void 0},t.prototype.needsBCUpgrade=function(){return 0===_.intersection([m.getProductNumber(m.currentProducts.monthly),m.getProductNumber(m.currentProducts.yearly)],this.get("products")).length},t.prototype.isMember=function(e){var t;return"virtual"===(t=this.getMemberType(e))||"normal"===t||"admin"===t},t.prototype.ownedByMember=function(e){return"admin"===this.getMemberType(e)},t.prototype.canAddBoard=function(e){var t;return this.isFeatureEnabled("restrictVis")?(t=e.get("prefs").permissionLevel,this.canSetVisibility(t)):!0},t.prototype.canSetVisibility=function(e){var t;return this.isFeatureEnabled("restrictVis")?(t=this.get("prefs").boardVisibilityRestrict[e],!t||"org"===t||"admin"===t&&this.owned()):!0},t.prototype.owned=function(){return"admin"===this.getMemberType(u.me())},t.prototype.isLinkedToGoogleApps=function(){return this.isFeatureEnabled("googleApps")&&this.get("prefs").associatedDomain},t.prototype.isFeatureEnabled=function(e){return m.isFeatureEnabled(e,this.get("products"))},t.prototype.snoopIsFeatureEnabled=function(e){return this.snoop("products").map(function(t){return function(){return t.isFeatureEnabled(e)}}(this)).distinct()},t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.url&&(n.url=l.getOrganizationUrl(this.get("name"))),n.accountStanding=i.standingName(null!=(r=this.get("paidAccount"))?r.standing:void 0),n},t.prototype.getPermLevel=function(){return this.get("prefs").permissionLevel},t.prototype.getAvailableRoles=function(){return this.isFeatureEnabled("superAdmins")?["superadmin","normal"]:["admin","normal"]},t.prototype.hasObservers=function(){return!1},t.prototype.setPluginData=function(e,t,n){return this.pluginDataList.upsert(e,t,n)},t.prototype.getPluginData=function(e){return this.pluginDataList.dataForPlugin(e)},t.prototype.snoopPluginData=function(e){return this.pluginDataList.snoopDataForPlugin(e)},t.prototype.invitationUrl=function(e){return l.getOrganizationInvitionLinkUrl(e)},t.prototype.externalMembersDisabled=function(){return this.isFeatureEnabled("disableExternalMembers")&&this.getPref("externalMembersDisabled")},t.prototype.reactivateMember=function(e){return this.setOnMembership(e,{deactivated:!1}),a({url:"/1/organizations/"+this.id+"/members/"+e.id+"/deactivated",type:"PUT",data:{value:!1}}).catch(s.Conflict,function(t){return function(n){throw t.setOnMembership(e,{deactivated:!0}),n}}(this))},t.prototype.deactivateMember=function(e){o({url:"/1/organizations/"+this.id+"/members/"+e.id+"/deactivated",type:"PUT",data:{value:!0},success:function(){return C("Organization","Deactivate Member From Organization")}}),this.setOnMembership(e,{deactivated:!0})},t.prototype.addMember=function(e){return a({url:"/1/organizations/"+this.id+"/members/"+e.id,type:"put",data:{type:"normal"},dataType:"json"}).then(function(t){return function(n){return null!=n.token||t.memberList.find(function(t){return t.id===e.id})?void 0:(t.memberList.add(e),C("Invitations","Add Member to Organization","Role: Member"))}}(this))},t.prototype.getGoogleAppsMappings=function(){return a({url:"/1/organizations/"+this.id+"/googleApps/mappings"})},t.prototype.ensureSlackAssociation=function(){return null!=this._updateSlackAssociationOnce?this._updateSlackAssociationOnce:this._updateSlackAssociationOnce=this.updateSlackAssociation()},t.prototype.updateSlackAssociation=function(){return b.ajaxTrello({url:"/trello/"+this.id+"/association"}).tap(function(e){return function(t){var n,r;return n=t[0],r=t[1],"success"===r?((null!=n?n.associated:void 0)&&!n.teams?e._slackAssociation={associated:!0,canChange:n.canChange,adminOnly:n.adminOnly,teams:[{domain:n.domain,name:n.domain,icon:window.slackTrelloDomain+"/img/slack-default-logo.png",id:n.id,selfJoin:n.selfJoin}]}:e._slackAssociation=n,e.trigger("change:slack-association")):void 0}}(this))},t.prototype.deleteSlackAssociation=function(e){return b.ajaxTrello({url:"/trello/"+this.id+"/association?idSlackTeam="+e,type:"DELETE"}).tap(function(e){return function(){return e.updateSlackAssociation()}}(this))},t.prototype.getLatestSlackAssociation=function(){return this._slackAssociation},t.prototype.changeSlackSelfJoin=function(e,t){return b.ajaxTrello({url:"/trello/"+this.id+"/selfJoin?idSlackTeam="+t+"&value="+e,type:"PUT"}).tap(function(e){return function(){return e.updateSlackAssociation()}}(this))},t.prototype.changeSlackAdminOnlyLinking=function(e){return b.ajaxTrello({url:"/trello/"+this.id+"/adminOnlyLinking?value="+e,type:"PUT"}).tap(function(e){return function(){return e.updateSlackAssociation()}}(this))},t.prototype.getEnterprise=function(){return this.modelCache.get("Enterprise",this.get("idEnterprise"))},t}(h)},{}],208:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(198),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="PluginData",t.prototype.urlRoot=function(){return"/1/"+this.get("scope")+"/"+this.get("idModel")+"/pluginData"},t}(i)},{}],209:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(198),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="Plugin",t}(i)},{}],210:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(198),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="SavedSearch",t}(i)},{}],211:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(198),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.typeName="Sticker",t}(i)},{}],212:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(198),o=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.typeName="Tag",t.prototype.urlRoot=function(){return this.getOrganization().url()+"/tags"},t.prototype.getOrganization=function(){return this.collection.sourceModel},t}(i)},{}],213:[function(e,t,n){var r,i,o,s,a;o=e("bluebird"),s=e(76),i=e(218),r=e("jquery"),a=e("xtend"),t.exports=function(e){return s(!("success"in e||"error"in e),"This is promise country!"),new o(function(t,n){return r.ajax(a(e,{success:function(e){return t(e)},error:function(e){return n(i.fromResponse(e.status,e.responseText))}}))})}},{}],214:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=[].slice;r=e("jquery"),o=e(532),s=e(33),a=e(40),u=e(129),c=e("underscore"),d=e(45),p=e(519),l=e(101),t.exports=i=new(function(){function e(){this._msBackoff=100,this._msBackoffMin=100,this._nTriesLeft=12,this._nTriesMax=12,this._retrying=!1,this._stopped=!1,this._maxLength=10,this._queue=[],this._queueIdSeq=0}return e.prototype.uniqueReqId=function(){var e;return(null!=(e=s.me())?e.id:void 0)+"-"+Math.random()},e.prototype.hasQueue=function(){return this._queue.length>0},e.prototype.inQueue=function(e){return c.find(this._queue,function(t){return t.queueId===e.queueId})},e.prototype.removeFromQueue=function(e){return this._queue=c.filter(this._queue,function(t){return t.queueId!==e.queueId})},e.prototype.addToQueue=function(e){return d("AjaxQueue","addToQueue",e),this._queue.length+1>this._maxLength?void d("AjaxQueue","maxLength exceeded"):(this._queue.push(e),this.showRetrying())},e.prototype.success=function(e){return d("AjaxQueue","success",e),this.inQueue(e)?(this.removeFromQueue(e),this._retrying=!1,this._msBackoff=this._msBackoffMin,this._nTriesLeft=this._nTriesMax,this.retryNext()):void 0},e.prototype.retryableError=function(e){return d("AjaxQueue","retryableError",e),i.inQueue(e)?this._retrying=!1:i.addToQueue(e),this.retryNext()},e.prototype.serverAlreadySaw=function(e){return this.inQueue(e)?(this.removeFromQueue(e),this.retryNext()):void 0},e.prototype.retryNext=function(){var e;if(!this._stopped){if(!this.hasQueue())return void this.hideRetrying();if(this.showRetrying(),!this._retrying)return this._retrying=!0,e=this._queue[0],this._nTriesLeft>0?(d("AjaxQueue","retrying in "+this._msBackoff+"ms",e),setTimeout(function(){return r.ajax(e)},this._msBackoff),this._msBackoff*=2,--this._nTriesLeft):(this._stopped=!0,this.showOutOfRetries())}},e.prototype.showRealError=function(e,t,n){var r;return d("AjaxQueue","showRealError",n),this.hideRetrying(),r=l("alerts.changes not saved"),o.showHtml(p.fill("connect_failed",{msg:r}),"error","AjaxQueueFail")},e.prototype.showOutOfRetries=function(){var e;return d("AjaxQueue","showOutOfRetries"),this.hideRetrying(),e=l("alerts.timed out"),o.showHtml(p.fill("connect_failed",{msg:e}),"error","AjaxQueueFail")},e.prototype.showRetrying=function(){var e;return e=this._queue.length,o.show("retrying","error","AjaxQueueRetry")},e.prototype.hideRetrying=function(){return o.hide("AjaxQueueRetry")},e.prototype.showSending=function(){return o.show("sending","warning","AjaxQueueSending")},e.prototype.hideSending=function(){return o.hide("AjaxQueueSending")},e.prototype.showUploading=function(e){return o.show(e,"info","AjaxQueueUpload")},e.prototype.hideUploading=function(){return o.hide("AjaxQueueUpload")},e.prototype.ajax=function(e){var t,n,r,o,s,a,u,l;u=c.clone(e),this._stopped||(null==u.timeout&&(u.timeout=2e4),null==u.showSendingAfter&&(u.showSendingAfter=3e3),u.queueId=this._queueIdSeq++,u.headers={"X-Trello-ReqId":this.uniqueReqId()},u.oldSuccess=u.success,u.oldError=u.error,u.ourComplete=u.complete,delete u.complete,s=u.modelCache,delete u.modelCache,l=null!=(a=u.retry)?a:!0,delete u.retry,t=!1,r=!1,o=null!=s?s.lock("AjaxQueue.ajax"):void 0,u.success=function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],i.hideSending(),i.hideUploading(),t=!0,i.success(this),"function"==typeof this.oldSuccess&&this.oldSuccess.apply(this,e),"function"==typeof this.ourComplete&&this.ourComplete(),null!=s?s.unlock(o):void 0},u.error=function(){var e,n,r,a,u,d;return e=1<=arguments.length?h.call(arguments,0):[],i.hideSending(),i.hideUploading(),t=!0,d=e[0],u=e[1],r=e[2],!l||0!==(a=d.status)&&408!==a&&500!==a?(n=function(){return i._stopped=!0,i.showRealError.apply(i,e)},c.isFunction(this.oldError)?this.oldError.apply(this,h.call(e).concat([n])):n(),"function"==typeof this.ourComplete&&this.ourComplete(),null!=s?s.unlock(o):void 0):i.retryableError(this)},/^post$/i.test(u.type)&&(n=function(e){return e.lengthComputable&&e.total>65536},u.xhr=function(e){return function(){var t,i;return i=new XMLHttpRequest,t=i.upload,null!=t&&(t.addEventListener("progress",function(t){var i;if(n(t))return r=!0,i=Math.round(100*t.loaded/t.total).toString()+"%",e.showUploading(["uploading",{percentString:i}])}),t.addEventListener("load",function(t){return r?e.showUploading("processing upload"):void 0})),i}}(this)),this.hasQueue()?i.addToQueue(u):(u.showSendingAfter>=0&&setTimeout(function(e){return function(){return t||r?void 0:i.showSending()}}(this),u.showSendingAfter),this.send(u)))},e.prototype.send=function(e){return r.ajax(e)},e}())},{}],215:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=[].slice;r=e(214),i=e(33),o=e(6),u=e(129),s=e("bluebird"),a=e("promise-queue"),c=e(238),h=e("xtend"),p=new a(3),l=function(e){var t,n;return(null!=(t=null!=(n=e.type)?n:e.method)?t:"GET").toUpperCase()},d=function(e){var t;return null==e.data&&(e.data={}),"GET"!==l(e)&&(e.data.token=i.myToken()),null==(t=e.data).invitationTokens&&(t.invitationTokens=u.invitationTokens().join(",")),e.background?void r.send(e):(null==e.modelCache&&(e.modelCache=o.getCurrentModelCache()),void r.ajax(e))},t.exports=function(e,t){return p.add(function(){var t,n,r,i;return i=null!=(n=e.success)?n:function(){},t=null!=(r=e.error)?r:function(){},new s(function(n,r){e=h(e,{success:function(){var e;e=1<=arguments.length?m.call(arguments,0):[],i.apply(null,e),n(e)},error:function(){var e;e=1<=arguments.length?m.call(arguments,0):[],t.apply(null,e),r(e)}}),d(e)})}).nodeify(t).catch(function(){}).done()}},{}],216:[function(e,t,n){var r,i,o,s,a;s=e(102),i=e(76),a=e("xtend"),o=e(100),r=s("API",["Unauthorized","Unauthenticated","Unconfirmed","Timeout","NoResponse","NotFound","Server","BadRequest","Conflict","Other"]),r.prototype.localizedMessage=function(){return o(this.message)},r.fromResponse=function(e,t){var n;switch(null!=t?n=t.toLowerCase().trim():i(0===e,"Received a response without any content!"),e){case 0:return r.NoResponse();case 400:switch(n){case"invalid token":return r.Unauthenticated();default:return r.BadRequest(t)}break;case 401:switch(n){case"invalid token":return r.Unauthenticated();case"unauthorized permission requested":case"unauthorized organization.":case"unauthorized card permission requested":return r.Unauthorized(t);case"confirm to view":return r.Unconfirmed()}break;case 403:switch(n){case"user not logged in or invalid token.":return r.Unauthenticated();default:return r.Unauthorized(t)}break;case 404:return r.NotFound(t);case 408:return r.Timeout(t);case 409:return r.Conflict(t)}return e>=500&&600>e?r.Server(t):r.Other(e+": "+t)},t.exports=r},{}],217:[function(e,t,n){var r,i,o,s,a,u;r=e(215),o=e("bluebird"),u=e(238),s=e("underscore"),a=e(76),i=e(216),t.exports=function(e){return a(!("success"in e||"error"in e),"This is promise country!"),o.fromNode(u(r,e)).catch(function(e){var t;return t=e[0],o.reject(i.fromResponse(t.status,t.responseText))}).get(0)}},{}],218:[function(e,t,n){var r,i,o,s;o=e(102),i=e(76),s=e("xtend"),r=o("Http",["NoResponse","BadRequest","Unauthorized","Forbidden","NotFound","Timeout","Conflict","Precondition","Server","Other"]),r.fromResponse=function(e,t){switch(i(t||0===e,"Received a response without any content!"),e>=500&&600>e&&r.Server(t),e){case 0:return r.NoResponse();case 400:return r.BadRequest(t);case 401:return r.Unauthorized(t);case 403:return r.Forbidden(t);case 404:return r.NotFound(t);case 408:return r.Timeout(t);case 409:return r.Conflict(t);case 412:return r.Precondition(t);default:return r.Other(e+": "+t)}},t.exports=r},{}],219:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m;u=e("underscore"),d=e(146),p=e(102),h=e(259),s=e(232),a=e("bluebird"),m=e("xtend"),o=2e4,i=p("IFrameIO",["Invalid","NotHandled","Timeout"]),l=null,c=function(){var e,t;if(null==l){if(t="iframe-io-host",l=document.createElement("div"),l.id=t,e=document.getElementsByTagName("body")[0],!e)throw Error("no body to host iframes");e.appendChild(l)}return l},t.exports=r=function(){function e(e,t){this.url=e,this.handlers=t}return e.Error=i,e.prototype._getIO=function(){return null!=this._io?this._io:this._io=new a(function(e){return function(t){var n,r,o;if(!d(e.url))throw i.Invalid("Provided iframe source not valid: "+e.url);return n=document.createElement("iframe"),n.src=e.url,e._iframeEl=n,c().appendChild(n),o=s.randomId(64),r=new s({local:window,remote:n.contentWindow,targetOrigin:h(e.url).set("pathname","").href,secret:o,handlers:m(e.handlers,{initialize:function(){return{secret:o}},ready:function(){return t(r)}})})}}(this)).timeout(o).catch(a.TimeoutError,function(e){return function(){throw("undefined"!=typeof console&&null!==console?console.error:void 0)&&console.error("Error, timeout while initializing index iframe for "+e.url+". Timeout="+o+"ms"),i.Timeout("unable to initialize iframe-io in "+o+"ms")}}(this))},e.prototype.request=function(e,t,n){return this._getIO().then(function(r){var o;return o=Date.now(),r.request(e,t).timeout(n).catch(a.TimeoutError,function(){var r;throw("undefined"!=typeof console&&null!==console?console.error:void 0)&&console.error("IFrameIO request timed out. Command="+e+", Plugin="+(null!=t&&null!=(r=t.context)?r.plugin:void 0)+", Elapsed="+(Date.now()-o)),i.Timeout(e+" did not complete in "+n+"ms")})}).catch(s.NotHandled,s.UnsupportedCommand,function(t){throw i.NotHandled("Request to run '"+e+"' failed due to error: '"+t.message+"'")})},e.prototype.drop=function(){var e;return null!=(e=this._iframeEl)?e.parentNode.removeChild(this._iframeEl):void 0},e}()},{}],220:[function(e,t,n){var r,i,o=[].slice;r=e(33),i=e("underscore"),t.exports=function(e){var t,n,s;t=new FormData,t.append("token",r.myToken());for(n in e)s=e[n],i.isArray(s)?t.append.apply(t,[n].concat(o.call(s))):t.append(n,s);return{data:t,contentType:!1,processData:!1,timeout:216e5}}},{}],221:[function(e,t,n){var r,i,o,s,a,u,c,l,d=[].slice;r=e(217),i=e(23),s=e(207),o=e(25),u=e("bluebird"),c=function(e,t){return e instanceof s?o.getProductNumber(t):i.getProductNumber(t)},l=function(){var e,t;return e=arguments[0],t=2<=arguments.length?d.call(arguments,1):[],[e.urlRoot,e.id,"paidAccount"].concat(d.call(t)).join("/")},a=t.exports={changeProduct:function(e,t){var n;return n=c(e,t),r({url:l(e,"products"),type:"POST",data:{products:[n]}})},cancel:function(e){return r({url:l(e,"cancel"),type:"POST"})},renew:function(e){return a.changeProduct(e,e.get("paidAccount").products[0])},reactivate:function(e,t){var n;return n=c(e,t),r({url:l(e,"reactivate"),type:"POST",data:{products:[n]}})},createAccount:function(e,t){return r({url:l(e),data:t,type:"POST"})},changeCreditCard:function(e,t){return r({url:l(e,"creditCard"),data:t,type:"POST"})},changeInvoiceDetails:function(e,t){return r({method:"POST",url:l(e,"invoice"),data:t})}}},{}],222:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p;a=e(238),p=e(149),o=e("underscore"),i=e(223),t.exports=r={};for(u in i)if(d=i[u],o.isObject(d))r[u]={query:d};else{if(!o.isString(d))throw new Error("Implicit coupling fell over");r[u]=d}l=function(e,t){var n;return n=o.pluck(e,"id"),t.set("idBoards",n)},r.organizationBoardsPage.mappingRules={boards:l},s=function(e,t){var n,r,i;return n=null!=(i=t.get("attachments"))?i:[],r=p(a.get("id"),n,e),t.set("attachments",r)},r.currentBoardMinimal.mappingRules={attachments:s},r.memberActions=[r.boardActions,"updateMember"].join(","),r.boardFieldsUnread=["dateLastActivity","dateLastView"],r.boardFieldsMinimalMemberships=["name","closed","memberships"].join(","),r.enterpriseMemberFields=["avatarHash","fullName","initials","username","userType","active","roles","memberType","confirmed"].join(","),r.organizationFieldsMinimalMemberships=[r.organizationFieldsMinimal,"memberships"],r.organizationFieldsMembersPage=[r.organizationBoardsFields,"memberships"].join(","),c=function(e,t){var n,r,i;return n=null!=(i=t.get("memberships"))?i:[],r=p(a.get("id"),n,e),t.set("memberships",r)},r.boardMinimal={query:{fields:r.boardFieldsMinimal,organization:!0,organization_fields:r.organizationFieldsMinimal,myPermLevel:!0,memberships:"me"},mappingRules:{memberships:c}},r.boardsMenuMinimal={query:{boards:"open,starred",board_fields:r.boardFieldsMinimal,boardStars:!0,organizations:"all",organization_fields:r.organizationFieldsMinimal,board_organization:!0,board_organization_fields:r.organizationFieldsMinimal,board_myPermLevel:!0,board_memberships:"me"},mappingRules:{memberships:c}},r.boardsMenu={query:{fields:"",board_fields:r.boardFieldsMinimal,organizations:"all",organization_fields:r.organizationFieldsMinimal,board_organization:!0,board_organization_fields:r.organizationFieldsMinimal,paid_account:!0}},r.memberUnreadBoards={query:{fields:"",boards:"open,starred",board_fields:r.boardFieldsUnread}},r.boardUnread={query:{fields:r.boardFieldsUnread}},r.cardDetails={query:{actions:r.cardActions,actions_display:!0,action_memberCreator_fields:r.memberFieldsAndPremOrgsAdmin,members:!0,member_fields:r.memberFieldsStatus,attachments:!0,fields:"email",checklists:"all",list:!0,pluginData:!0}},r.cardMinimal={query:{fields:r.cardFieldsBulk}},r.cardVoters={query:{fields:"idMembersVoted",membersVoted:!0}},r.cardCopy={query:{members:!0,member_fields:r.memberFieldsStatus,attachments:!0,stickers:!0,fields:"name",checklists:"all"}},r.cardList={query:{fields:"all"}},r.memberAccount={query:{tokens:"all",sessions:"all",credentials:"all",paid_account:!0,credits:"invitation,promoCode",organizations:"all",organization_paid_account:!0,logins:!0}},r.memberPaidAccount={query:{paid_account:!0}},r.orgMemberCards={query:{board:!0,list:!0,fields:"badges,closed,dateLastActivity,due,dueComplete,idAttachmentCover,idList,idBoard,idMembers,idShort,labels,name,url",attachments:"true",members:"true",stickers:"all",member_fields:r.memberFields,board_fields:r.boardFieldsMinimalMemberships}},r.memberCards={query:{boards:"open",board_fields:"name,closed,idOrganization,prefs",board_lists:"open",board_memberships:"me",organizations:"all",organization_fields:"displayName,name,prefs,products,url",organization_memberships:"me",organization_paid_account:!0,paid_account:!0},mappingRules:{memberships:c}},r.memberMinimal={query:{fields:r.memberFields}},r.memberProfile={query:{actions:"all",actions_limit:10,actions_display:!0,organizations:"all",organization_fields:r.organizationFieldsMinimal,organization_paid_account:!0,boards:"open",board_fields:"name,prefs,idOrganization",paid_account:!0}},r.memberProfile_daysBack=30,r.organization={query:{boards:"open",board_fields:r.boardFieldsMinimal,enterprise:!0,fields:"all",members:"all",member_fields:r.memberFieldsStatus,membersInvited:"all",membersInvited_fields:r.memberFields,paid_account:!0},mappingRules:{boards:l}},r.organizationExports={query:{exports:!0,fields:"all",paid_account:!0}},r.organizationPaidAccount={query:{paid_account:!0}},r.organizationMembers={query:{fields:r.organizationFieldsMembersPage,members:"all",member_fields:r.memberFieldsStatus,membersInvited:"all",membersInvited_fields:r.memberFields,paid_account:!0,tags:!0}},r.organizationMembersExtra={query:{members:"all",member_activity:!0,boards:"open",board_fields:r.boardFieldsMinimalMemberships},mappingRules:{boards:l}},r.organizationMembersMinimal={query:{members:"all",fields:r.organizationFieldsMinimalMemberships}},r.organizationMinimal={query:{fields:"all",tags:!0}},r.memberNotifications={query:{notifications:"all",notifications_limit:10,notifications_display:!0}},r.organizations={query:{organizations:"all",organization_paid_account:!0}},r.idCard={query:{fields:"",checkItemStates:!1}},r.cardsAndListsMinimal={query:{lists:"open",list_fields:"name,pos,idBoard,closed",cards:"visible",card_fields:"idList,idBoard,pos,closed"}},r.listsMinimal={query:{lists:"open",list_fields:"name,pos,idBoard,closed"}},r.listMinimal={query:{fields:"name,pos,idBoard,closed"}},r.archivedLists={query:{lists:"closed",list_fields:"name,pos,idBoard,closed"}},r.action={query:{display:!0,memberCreator:!0}},r.bcFeatures={query:{boards:"open",board_fields:"all",board_starCounts:"organization",board_membershipCounts:"active",fields:"all",paid_account:!0,memberships:"all",members:"all",tags:!0}},r.memberOrganizationDeactivatedMembers={query:{fields:"all",memberships:"deactivated"},mappingRules:{memberships:c}}},{}],223:[function(e,t,n){var r;t.exports=r={},r.boardFieldsMinimal=["name","closed","dateLastActivity","dateLastView","datePluginDisable","idOrganization","prefs","shortLink","shortUrl","url"].join(","),r.boardFieldsFull=[r.boardFieldsMinimal,"desc","descData","idTags","invitations","invited","labelNames","memberships","pinned","powerUps","subscribed"].join(","),r.boardFieldsMinimalSubscribed=[r.boardFieldsMinimal,"subscribed"].join(","),r.memberFields=["fullName","initials","idEnterprise","memberType","username","avatarHash","bio","bioData","confirmed","products","url"].join(","),r.memberFieldsStatus=[r.memberFields,"status"].join(","),r.memberFieldsAndPremOrgsAdmin=[r.memberFields,"idPremOrgsAdmin"].join(","),r.organizationFieldsMinimal=["name","displayName","products","prefs","logoHash","idEnterprise","tags"].join(","),r.organizationFieldsMinimalMemberships=[r.organizationFieldsMinimal,"memberships"].join(","),r.cardFieldsBulk=["badges","closed","dateLastActivity","desc","descData","due","dueComplete","idAttachmentCover","idList","idBoard","idMembers","idShort","idLabels","name","pos","shortUrl","shortLink","subscribed","url"].join(","),r.boardFieldsInOrganization=[r.boardFieldsMinimal,"idTags"].join(","),r.organizationBoardsFields=[r.organizationFieldsMinimal,"desc","descData","website"].join(","),r.cardActions=["addAttachmentToCard","addChecklistToCard","addMemberToCard","commentCard","copyCommentCard","convertToCardFromCheckItem","createCard","copyCard","deleteAttachmentFromCard","emailCard","moveCardFromBoard","moveCardToBoard","removeChecklistFromCard","removeMemberFromCard","updateCard:idList","updateCard:closed","updateCard:due","updateCard:dueComplete","updateCheckItemStateOnCard"].join(","),r.boardActions=[r.cardActions,"addMemberToBoard","addToOrganizationBoard","copyBoard","createBoard","createList","deleteCard","disablePlugin","disablePowerUp","enablePlugin","enablePowerUp","makeAdminOfBoard","makeNormalMemberOfBoard","makeObserverOfBoard","moveListFromBoard","moveListToBoard","removeFromOrganizationBoard","unconfirmedBoardInvitation","unconfirmedOrganizationInvitation","updateBoard","updateList:closed"].join(","),r.card={fields:"all",stickers:!0,attachments:!0,pluginData:!0},r.currentBoardMinimal={lists:"open",cards:"visible",card_attachments:"cover",card_stickers:!0,card_fields:[r.cardFieldsBulk,"labels"].join(","),card_checklists:"none",members:"all",member_fields:r.memberFieldsStatus,membersInvited:"all",membersInvited_fields:r.memberFields,memberships_orgMemberType:!0,checklists:"none",organization:!0,organization_fields:"name,displayName,desc,descData,url,website,prefs,memberships,logoHash,products",organization_tags:!0,myPrefs:!0,fields:r.boardFieldsFull},r.currentBoardSecondary={fields:"",actions:r.boardActions,actions_display:!0,actions_limit:50,action_memberCreator_fields:r.memberFieldsAndPremOrgsAdmin,checklists:"none",cards:"visible",card_fields:"",card_checklists:"all",card_checklist_checkItems:"none",labels:"all",labels_limit:1e3},r.currentBoardPluginData={fields:"",boardPlugins:!0,cards:"visible",card_fields:"",card_attachments:!0,card_attachment_fields:"bytes,date,edgeColor,idMember,isUpload,mimeType,name,url",pluginData:!0,card_pluginData:!0,organization:!0,organization_fields:"",organization_pluginData:!0},r.memberBoards={boards:"open,starred",board_fields:r.boardFieldsMinimalSubscribed,boardStars:!0,boardsInvited:"all",boardsInvited_fields:r.boardFieldsMinimalSubscribed,board_organization:!0,board_organization_fields:r.organizationFieldsMinimal,credits:"invitation,promoCode",organizations:"all",organization_fields:r.organizationFieldsMinimalMemberships,organizationsInvited:"all",organizationsInvited_fields:r.organizationFieldsMinimal,paid_account:!0},r.memberHeader={channels:!0,notifications:"all",notifications_limit:10,notifications_display:!0,notification_memberCreator_fields:r.memberFields,organizations:"all",organization_paid_account:!0,organization_fields:"name,displayName,idEnterprise",organization_enterprise:!0,paid_account:!0,
pluginData:!0,savedSearches:!0,missedTransferDate:!0},r.organizationBoardsPage={boards:"open",board_fields:r.boardFieldsInOrganization,board_starCounts:"organization",board_membershipCounts:"active",fields:r.organizationBoardsFields,paid_account:!0,memberships:"active",members:"all",tags:!0},r.memberQuickBoards={fields:"idOrganizations",boards:"open,starred",board_fields:r.boardFieldsMinimal,boardStars:!0,organizations:"all",organization_fields:"idBoards"},r.quickBoardsSearch=function(e){return{query:e,modelTypes:"boards",board_fields:r.boardFieldsMinimal,partial:!0}}},{}],224:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=[].slice;i=e(216),o=e(33),s=e(234),a=e(225),u=e(40),c=e(6),l=e(107),d=e("bluebird"),h=e("underscore"),f=e(45),m=e(238),g=e(102),p=g("RPC",["SyncError","BatchError"]),v=function(e){try{return JSON.parse(e)}catch(e){return null}},t.exports=r=function(){function e(e){for(this.delegate=e,this.idBoardToPoll=null,this.modelIxUpdate={},this.msPoll=2e3,this.msPollIdle=1e4,this.ajaxSessionId=Math.random().toString().substring(2);this.ajaxSessionId.length<16;)this.ajaxSessionId+="0";this.consecutiveFailures=0,this.consecutiveFailuresAllowed=300,this.totalFailures=0,this.totalFailuresAllowed=1e3}return h.extend(e.prototype,s.Events),e.prototype.subscribe=function(e,t,n,r){return"function"==typeof r?r():void 0},e.prototype.unsubscribe=function(e,t,n){return"function"==typeof n?n():void 0},e.prototype.resync=function(){},e.prototype._getPollLength=function(){return o.isLoggedIn()&&"active"===l.getStatus()?this.msPoll:this.msPollIdle},e.prototype.stopPolling=function(){return null!=this._pollingTimeout?(clearTimeout(this._pollingTimeout),delete this._pollingTimeout):void 0},e.prototype.poll=function(){return this._pollingTimeout=setTimeout(function(e){return function(){return e.consecutiveFailures>=e.consecutiveFailuresAllowed||e.totalFailures>=e.totalFailuresAllowed?void e.trigger("connect_failed"):e.doPoll(function(t){if(null!=t){if("syncError"===t)return;e.trigger("connecting"),++e.consecutiveFailures,++e.totalFailures}else e.consecutiveFailures>0&&e.trigger("reconnect"),e.consecutiveFailures=0;return e.poll()})}}(this),this._getPollLength())},e.prototype.doPoll=function(){var e,t,n,r,i,o,s,a,u,c,l;if(e=2<=arguments.length?b.call(arguments,0,t=arguments.length-1):(t=0,[]),a=arguments[t++],r=e[0],s=e[1],l=[],null==s&&(s=this),h.isArray(r))for(i=0,o=r.length;o>i;i++)n=r[i],l.push(this.delegate.currentSubscriptions[n]);else{if(null!=r)return void f("rpc","Bad argument to doPoll: "+r);u=this.delegate.currentSubscriptions;for(n in u)c=u[n],l.push(c)}return h.isEmpty(l)?(f("rpc","No models to poll for "+r),"function"==typeof a?a():void 0):this._doPoll(l,s,a)},e.prototype._doPoll=function(e,t,n){var r,o;return o=new a,r=e.map(function(e){return function(n){var r,s,a,u,c;return a=n.modelType,r=n.idModel,s=n.ixLastUpdate,u=n.tags,c="/"+a+"/"+r+"/deltas?ixLastUpdate="+encodeURIComponent(s.toString())+"&tags="+encodeURIComponent(u.join(",")),o.request(c).tap(function(n){var i;return null!=n.syncError?d.reject(p.SyncError(n.syncError)):(e.delegate.setIxLastUpdate(r,n.modelIxUpdate[r]),h.chain(null!=(i=n.messages)?i:[]).map(v).compact().forEach(function(e){var n,r;r=e.notify,n=e.idModelChannel,t.trigger(r.event,h.extend({idModelChannel:n},r))}),void(e.dateLastMessage=Date.now()))}).catch(i,function(){})}}(this)),d.all(r).catch(p.SyncError,function(e){return function(t){return c.syncError(t),e.stopPolling()}}(this)).catch(a.BatchFailure,function(){}).done(),o.send().tap(function(e){var t;return t=e.jqxhr,u.setServerVersionFromResponse(t)}).catch(a.BatchFailure,function(e){var t,n;return n=e.message,t=e.error,d.reject(p.BatchError(n,{error:t}))}).nodeify(n).done()},e}()},{}],225:[function(e,t,n){var r,i,o,s,a,u,c,l;r=e("jquery"),i=e(216),c=e(246),l=e(238),u=e(76),s=e("bluebird"),a=e("underscore"),t.exports=o=function(){function e(){this._requests=[]}return e.BatchFailure=c("Batcher::BatchFailure"),e.prototype._sent=!1,e.prototype.request=function(e){return u(!this._sent,"Cannot add requests to a batcher after sending!"),new s(function(t){return function(n,r){return t._requests.push({url:e,resolve:n,reject:r})}}(this))},e.prototype.send=function(){var t;return u(!this._sent,"Cannot send more than once!"),this._sent=!0,t=this._requests.map(l.get("url")).join(","),new s(function(n){return function(o,s){return r.ajax({data:{urls:t},url:"/1/batch",success:function(e,t,r){var s,u,c,l,d,p,h,m;for(c=a.zip(e,n._requests),s=0,u=c.length;u>s;s++)l=c[s],m=l[0],d=l[1],h=d.resolve,p=d.reject,"200"in m?h(m[200]):p(i.fromResponse(m.statusCode,m.message));return o({jqxhr:r})},error:function(t){var r,o,a,u,c,l,d;for(d=t.status,l=t.responseText,r=i.fromResponse(d,l),u=n._requests,o=0,a=u.length;a>o;o++)(c=u[o].reject)(e.BatchFailure("",{error:r}));return s(r)}})}}(this))},e}()},{}],226:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=[].slice;r=e(224),i=e(33),o=e(234),a=e(230),u=e(227),c=e(114),l=e("underscore"),d=e(45),p=e(48),window.dropTheHammer=function(){return c.set("useWebsockets","yes"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Websockets engaged! Reload the page, please. Use pitStop() to turn sockets off."):void 0},window.pitStop=function(){return c.set("useWebsockets","no"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Shutting Websockets down! Reload the page, please. Use dropTheHammer() to turn sockets back on."):void 0},s=function(){function e(){this.rpcSocket=this.rpcAJAX=this.rpcCurrent=null,this.currentSubscriptions={},this.fReadyToSubscribe=!1,this.deferredQueue=[],this.handleLogin()}return l.extend(e.prototype,o.Events),e.prototype.rpcReady=function(){var e,t,n,r;for(this.fReadyToSubscribe=!0,this.isUsingSocket()||this.rpcCurrent.poll(),this.trigger("ready"),r=this.deferredQueue,t=0,n=r.length;n>t;t++)(e=r[t])();return this.listenTo(this,"reconnect",function(e){return function(){return e.resubscribe()}}(this))},e.prototype.resubscribe=function(){var e,t,n,r;this.rpcCurrent.resync(),t=this.currentSubscriptions,n=[];for(e in t)r=t[e],n.push(this.subscribe(r.modelType,e,r.tags));return n},e.prototype.setActiveRPC=function(e){this.stopListening(this.rpcCurrent),this.rpcCurrent=e,this.listenTo(this.rpcCurrent,"all",function(e){return function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],e.trigger.apply(e,t)}}(this))},e.prototype.lazyCreateRPC=function(){var e,t,n;if(!this.rpcCurrent){if(this.rpcSocket=new u(this),this.rpcAJAX=new r(this),this.setActiveRPC(this.rpcAJAX),e=function(){return null!=("undefined"!=typeof performance&&null!==performance?performance.now:void 0)?performance.now():+new Date},this.rpcSocket.hasSocketTransport()){if(this.rpcSocket.connectedOnce)return;return n=e(),t=8e3,setTimeout(function(e){return function(){return e.fReadyToSubscribe?void 0:(d("rpc","Socket not responsive. Using AJAX."),e.rpcSocket.disconnect(),e.rpcReady())}}(this),t),this.rpcSocket.ping(function(t){return function(r,i){t.fReadyToSubscribe?(t.rpcSocket.disconnect(),p("RPC","No Sockets","Slow ping",e()-n)):(d("rpc","Socket responded to ping in a timely fashion. Using sockets."),t.setActiveRPC(t.rpcSocket),t.rpcReady())}}(this))}return d("rpc","No socket connect. Using AJAX."),this.rpcReady()}},e.prototype.handleLogin=function(){return i.isLoggedIn()?this.lazyCreateRPC():void 0},e.prototype.unsubscribe=function(e,t){return this.lazyCreateRPC(),this.rpcCurrent.unsubscribe(e,t),delete this.currentSubscriptions[t]},e.prototype.subscribe=function(e,t,n){var r;return this.lazyCreateRPC(),null!=(r=this.currentSubscriptions[t])?r.tags=l.union(r.tags,n):this.currentSubscriptions[t]={tags:n,ixLastUpdate:-1,modelType:e,idModel:t},this.fReadyToSubscribe?this.rpcCurrent.subscribe(e,t,n):(d("rpc","deferring subscribe to "+e+" "+t),void this.deferredQueue.push(function(r){return function(){return r.rpcCurrent.subscribe(e,t,n)}}(this)))},e.prototype.getIxLastUpdate=function(e){var t;return null!=(t=this.currentSubscriptions[e])?t.ixLastUpdate:void 0},e.prototype.setIxLastUpdate=function(e,t){var n;return null!=(n=this.currentSubscriptions[e])?n.ixLastUpdate=t:void 0},e.prototype.resync=function(){var e,t;return t=1<=arguments.length?h.call(arguments,0):[],this.lazyCreateRPC(),"function"==typeof(e=this.rpcCurrent).resync?e.resync.apply(e,t):void 0},e.prototype.isUsingSocket=function(){return null!=this.rpcCurrent&&this.rpcCurrent===this.rpcSocket},e}(),t.exports=window.rpc=new s},{}],227:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=[].slice;r=e(33),i=e(234),o=e(40),s=e(107),a=e(230),c=e(114),l=e(129),d=e("underscore"),p=e(45),h=e(48),t.exports=u=function(){function e(e){var t,n,i,o,u,d,m,f,g,v;if(this.delegate=e,this.reqid=0,this.dictCallback={},this.dictTime={},this.connectedOnce=!1,this.modelIxUpdate={},this.hasSockets="WebSocket"in window&&"no"!==c.get("useWebsockets"),"WebSocket"in window?"no"===c.get("useWebsockets")&&h("RPC","No Sockets","pitStop"):h("RPC","No Sockets","No WebSocket"),this.hasSockets){for(p("rpc","opening newSocket"),m="http:"===document.location.protocol?"ws:":"wss:",this.socket=new a(m+"//"+document.location.host+"/1/Session/socket?token="+r.myToken(),{maxReconnectDelay:64e3,failedConsecutiveReconnectsLimit:10,reconnectRateLimit:3,reconnectRateWindow:l.getMs({minutes:5}),maxReconnectsPerDay:100,fxReconnectDelay:function(e){var t,n,r,i;if(i=s.getStatus(),r="active"===i?l.randomWait(l.getMs({seconds:10}),l.getMs({seconds:30})):l.randomWait(l.getMs({seconds:30}),l.getMs({minutes:2})),t="active"===i?l.randomWait(100,l.getMs({seconds:1})):l.randomWait(l.getMs({seconds:2}),l.getMs({seconds:10})),null==e||1006===e.code)return r;if(4e3===e.code){try{n=parseInt(e.reason,0)}catch(e){}return"active"===i?l.randomWait(l.getMs({seconds:n}),4*l.getMs({seconds:n})):l.randomWait(4*l.getMs({seconds:n}),4*l.getMs({seconds:n})*4)}return t}}),f=["connect","reconnect","connecting","reconnecting","disconnect","connect_failed","reconnect_failed","error"],t=function(e){return function(t){return e.socket.on(t,function(e){return p("rpc","socket event",t,e)})}}(this),i=0,u=f.length;u>i;i++)v=f[i],t(v);for(g=["connecting","reconnecting"],n=function(e){return function(t){return e.socket.on(t,function(){return p("rpc","connecting"),e.trigger("connecting")})}}(this),o=0,d=g.length;d>o;o++)v=g[o],n(v);this.socket.on("connect_failed",function(e){return function(){return p("rpc","connect_failed"),e.trigger("connect_failed")}}(this)),this.socket.on("reconnect_failed",function(e){return function(){var t;return p("rpc","reconnect_failed"),e.trigger("reconnect_failed"),t=Date.now()-(e.dateLastMessage||0),h("Error","Websocket Redbox","Time since good connection",void 0,t),h("Error","Websocket Redbox","Reconnect failure reason",e.socket.reconnectNotAttemptedReason,void 0),p("rpc","time since last good connection",t),p("rpc","reconnect failure reason",e.socket.reconnectNotAttemptedReason)}}(this)),this.socket.on("connect",function(e){return function(){return p("rpc","connect"),e.trigger("connect"),e.connectedOnce=!0}}(this)),this.socket.on("reconnect",function(e){return function(){return p("rpc","reconnect"),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse,e.trigger("reconnect")}}(this)),this.socket.on("disconnect",function(e){return function(t){return p("rpc","disconnect",t),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse}}(this)),this.socket.on("error",function(e){return function(){var t,n;return e.connectedOnce&&!(null!=(t=e.socket)&&null!=(n=t.socket)?n.connected:void 0)?e.trigger("disconnect"):void 0}}(this)),this.socket.on("data",function(e){return function(t){return e._messageHandler(t)}}(this))}}return d.extend(e.prototype,i.Events),e.prototype._messageHandler=function(e){var t,n,r;return this.dateLastMessage=Date.now(),p("rpc","message",e),clearTimeout(this.timeoutInvokeResponse),delete this.timeoutInvokeResponse,(null!=e?e.version:void 0)?void o.setServerVersion(e):(null!=e.reqid&&(n=this.dictCallback["fx"+e.reqid]),null!=e.result?"function"==typeof n&&n(null,e.result):(null!=(r=e.notify)?r.event:void 0)?(null!=e.idModelChannel&&this.delegate.setIxLastUpdate(e.idModelChannel,e.ixLastUpdateChannel),this.trigger(e.notify.event,d.extend({idModelChannel:e.idModelChannel},e.notify))):e.error?"function"==typeof n&&n(e.error):p("rpc","unrecognized message",e),void(e.reqid&&(t=new Date-this.dictTime[e.reqid],p("timing","message",e.reqid,"time",t),delete this.dictCallback["fx"+e.reqid],delete this.dictTime[e.reqid])))},e.prototype.subscribe=function(e,t,n,r){return this.send({type:"subscribe",modelType:e,idModel:t,tags:n,invitationTokens:l.invitationTokens()},function(e){return function(n,i){return null!=n?p("rpc",n):e.delegate.setIxLastUpdate(t,i),"function"==typeof r?r(n,i):void 0}}(this))},e.prototype.unsubscribe=function(e,t,n){return this.send({type:"unsubscribe",modelType:e,idModel:t},function(e){return function(e,t){return null!=e&&p("rpc",e),"function"==typeof n?n(e,t):void 0}}(this))},e.prototype.ping=function(e){return this.send({type:"ping"},function(t){return function(t,n){return null!=t&&p("rpc",t),"function"==typeof e?e(t,n):void 0}}(this))},e.prototype._getSubscriptions=function(){return this.send({type:"getSubscriptions"},function(e){return function(e,t){return null!=t?p("rpc",t):void 0}}(this))},e.prototype.send=function(e,t){var n;this.dictCallback["fx"+this.reqid]=t,this.dictTime[this.reqid]=new Date,e.reqid=this.reqid++,n=JSON.stringify(e),p("rpc","invoke: "+n),this.socket.send(n),null==this.timeoutInvokeResponse&&(this.timeoutInvokeResponse=setTimeout(function(e){return function(){var t;if(e.socket.state===a.CONNECTED)return p("rpc","No response from the socket.io server in 10 seconds. Disconnecting."),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse,null!=(t=e.socket)?t.disconnect():void 0}}(this),1e4))},e.prototype.resync=function(){var e;return e=1<=arguments.length?m.call(arguments,0):[],d.isEmpty(e)&&(e=null),this.delegate.rpcAJAX.doPoll(e,this,function(){})},e.prototype.disconnect=function(){p("rpc","disconnecting"),this.socket.disconnect()},e.prototype.hasSocketTransport=function(){return this.hasSockets},e}()},{}],228:[function(e,t,n){var r,i,o,s,a,u;r=e("jquery"),i=e(33),o=e(6),a=e(129),u=e(226),t.exports=s={start:function(){return u.on("ready",function(e){return function(){return r(window).on("beforeunload",function(){e.markCurrentBoardAsViewed()})}}(this)),u.on("updateModels deleteModels",function(e){return function(t){var n,r;n=t.idModelChannel,null!=n&&n===(null!=(r=o.getCurrentBoard())?r.id:void 0)&&e.scheduleMarkCurrentBoardAsViewed()}}(this))},markCurrentBoardAsViewed:function(){var e;return clearTimeout(this._markAsViewedTimeout),null!=(e=o.getCurrentBoard())?e.markAsViewed():void 0},scheduleMarkCurrentBoardAsViewed:function(){return clearTimeout(this._markAsViewedTimeout),this._markAsViewedTimeout=setTimeout(function(e){return function(){return e.markCurrentBoardAsViewed()}}(this),a.getMs({minutes:5}))}}},{}],229:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=[].slice;i=e(33),o=e("bluebird"),d=e("xtend"),r=e("jquery"),l=window.slackTrelloDomain,a=window.slackDomain,u="7737388dfc54ea015104894e3a0a56f9",c="",s=function(e){return new o(function(t,n){e=d(e,{success:function(){var e;e=1<=arguments.length?p.call(arguments,0):[],t(e)},error:function(){var e;e=1<=arguments.length?p.call(arguments,0):[],n(e)}}),r.ajax(e)})},t.exports.ajaxTrello=function(e){return e.url=l+e.url,null==e.data&&(e.data={}),e.data.cookie=document.cookie,s(e)}},{}],230:[function(e,t,n){var r,i,o,s,a,u,c,l=[].slice;r=e(234),s=e(129),a=e("underscore"),u=e(45),c=["close","error","message","open"],i=4001,t.exports=o=function(){function e(t,n){var i,o,u,l;for(this.url=t,l=null!=n?n:{},this.fxReconnectDelay=l.fxReconnectDelay,this.maxReconnectDelay=l.maxReconnectDelay,this.failedConsecutiveReconnectsLimit=l.failedConsecutiveReconnectsLimit,this.reconnectRateLimit=l.reconnectRateLimit,this.reconnectRateWindow=l.reconnectRateWindow,this.maxReconnectsPerDay=l.maxReconnectsPerDay,a.extend(this,r.Events),this.ws=null,this.resetRetries(),o=0,u=c.length;u>o;o++)i=c[o],this.listenTo(this,i,this["on"+s.capitalize(i)]);return"WebSocket"in window?(this.mustNeverReconnect=!1,this.reconnectRateAttempts=0,this.totalReconnects=0,this._setDailyFailsCheck(),this.connect(),this.buffer=[],this.connectedOnce=!1,this.wakeUpCheckLastRun=(new Date).getTime(),setInterval(function(e){return function(){var t;return t=(new Date).getTime(),t>e.wakeUpCheckLastRun+e.reconnectRateWindow&&!e.mustNeverReconnect&&(e.connect(),e.trigger("reconnecting")),e.wakeUpCheckLastRun=t}}(this),e.WAKE_UP_CHECK_INTERVAL),void this.trigger("connecting")):void this.trigger("connect_failed")}return e.CONNECTING="connecting",e.CONNECTED="connected",e.WAITING_TO_RECONNECT="waiting to reconnect",e.RECONNECTING="reconnecting",e.CLOSED="closed",e.PING_TIMEOUT=3e4,e.WAKE_UP_CHECK_INTERVAL=2e3,e.prototype._setDailyFailsCheck=function(){return setInterval(function(t){return function(){return t.totalReconnects=0,t.state===e.CLOSED?t.reconnect():void 0}}(this),s.getMs({days:1}))},e.prototype._setReconnectBackOff=function(){return null==this._timeoutBackOff?this._timeoutBackOff=setTimeout(function(t){return function(){return clearTimeout(t._timeoutBackOff),delete t._timeoutBackOff,t.reconnectRateAttempts=0,t.state===e.CLOSED?t.reconnect():void 0}}(this),this.reconnectRateWindow):void 0},e.prototype.resetRetries=function(){return this.failedConsecutiveReconnectAttempts=0},e.prototype._clearPingTimeout=function(){return null!=this._pingTimeout&&clearTimeout(this._pingTimeout),this._pingTimeout=null},e.prototype._resetPingTimeout=function(){return this._clearPingTimeout(),this._pingTimeout=setTimeout(this._noPing.bind(this),e.PING_TIMEOUT)},e.prototype._noPing=function(){return!this.state!==e.CONNECTED?this.disconnect():void 0},e.prototype.connect=function(){var t,n,r,i,o,s;if(null!=this.ws)for(r=0,o=c.length;o>r;r++)t=c[r],this.ws["on"+t]=null;for(this.ws=new WebSocket(this.url),n=function(e){return function(t){return e.ws["on"+t]=function(){return e.trigger.apply(e,[t].concat(l.call(arguments)))}}}(this),i=0,s=c.length;s>i;i++)t=c[i],n(t);return this.state=e.CONNECTING},e.prototype.onOpen=function(t){return this.connectedOnce?this.trigger("reconnect"):this.trigger("connect"),this.connectedOnce=!0,this.state=e.CONNECTED,this.flushBuffer(),this.resetRetries()},e.prototype._triggerFailures=function(){return this.state===e.CONNECTING?this.trigger("connect_failed"):void 0},e.prototype.onClose=function(e){var t;return this.trigger("disconnect",null!=(t=null!=e?e.reason:void 0)?t:""),(null!=e?e.code:void 0)===i&&(this.mustNeverReconnect=!0),this._triggerFailures(),this._clearPingTimeout(),this.reconnect(e)},e.prototype.onError=function(e){return this._triggerFailures(),this.disconnect(),this.reconnect()},e.prototype.onMessage=function(e){var t;if(this._resetPingTimeout(),""===e.data)return u("socket","responding to ping"),void this.ws.send("");try{t=JSON.parse(e.data)}catch(e){}return this.trigger("data",t)},e.prototype._shouldNotReconnect=function(){return this.reconnectNotAttemptedReason=this.failedConsecutiveReconnectAttempts>=this.failedConsecutiveReconnectsLimit?"too many consecutive failures":this.mustNeverReconnect?"server NEVER RECONNECT code received":this.reconnectRateAttempts>=this.reconnectRateLimit?"rate limited":this.totalReconnects>=this.maxReconnectsPerDay?"max reconnects limit reached":void 0,null!=this.reconnectNotAttemptedReason},e.prototype.reconnect=function(t){var n;switch(this.state){case e.CONNECTED:this.ws.close();break;case e.RECONNECTING:case e.WAITING_TO_RECONNECT:return}return this._setReconnectBackOff(),n=null==this.reconnectNotAttemptedReason,this._shouldNotReconnect()?(n&&this.trigger("reconnect_failed"),void(this.state=e.CLOSED)):(this.state=e.WAITING_TO_RECONNECT,0===this.failedConsecutiveReconnectAttempts&&(this.currentReconnectDelay=this.fxReconnectDelay(t)),u("socket","attempting reconnect in "+this.currentReconnectDelay+"ms"),this._reconnectTimer=setTimeout(function(t){return function(){return t._reconnectTimer=null,t.connect(),t.state=e.RECONNECTING,t.trigger("reconnecting")}}(this),this.currentReconnectDelay),this.totalReconnects++,this.failedConsecutiveReconnectAttempts++,this.reconnectRateAttempts++,this.currentReconnectDelay=Math.min(2*this.currentReconnectDelay,this.maxReconnectDelay))},e.prototype.disconnect=function(){var t;switch(this._clearPingTimeout(),t=this.state,this.state=e.CLOSED,t){case e.CONNECTED:case e.CONNECTING:case e.RECONNECTING:return this.ws.close(),this.onClose();case e.WAITING_TO_RECONNECT:return clearTimeout(this._reconnectTimer)}},e.prototype.send=function(t){if(this.state!==e.CONNECTED)return this.buffer.push(t);try{return this.ws.send(t)}catch(e){return this.buffer.push(t),this.onError()}},e.prototype.flushBuffer=function(){var e,t,n,r,i;for(e=this.buffer,this.buffer=[],i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(this.send(t));return i},e}()},{}],231:[function(e,t,n){var r;r=e(258),t.exports={unsplashApi:new r.default({applicationId:"454087647775b190c574339cb2994716b17ef2f83ad11838d0ef0dac2d102e66"}),toJson:r.toJson}},{}],232:[function(e,t,n){var r=e("bluebird"),i=e(233),o=function(e){this.local=e.local,this.remote=e.remote,this.targetOrigin=e.targetOrigin,this.secret=e.secret,this.handlers=e.handlers,this.defaultHandler=e.defaultHandler,this.hostHandlers=e.hostHandlers,this._pendingRequests={},this._messageQueue=[],this.listen()},s="not handled",a="unsupported command";o.NotHandled=i("PostMessageIO:NotHandled",{code:s}),o.UnsupportedCommand=i("PostMessageIO:UnsupportedCommand",{code:a});var u=function(e,t){return Array.prototype.slice.call(e,t)},c=function(){var e={};return u(arguments,0).forEach(function(t){if(t)for(key in t)e[key]=t[key]}),e},l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";o.randomId=function(e){e=e||16;var t=[];if(window.crypto&&window.crypto.getRandomValues)t=window.crypto.getRandomValues(new Uint32Array(e));else if("object"==typeof window.msCrypto&&"function"==typeof window.msCrypto.getRandomValues)t=window.msCrypto.getRandomValues(new Uint32Array(e));else for(;t.length<e;)t.push(Math.floor(Math.random()*l.length));for(var n=[],r=0;e>r;r++)n.push(l[t[r]%l.length]);return n.join("")},o.prototype.listen=function(){var e=this;e.stop(),e.listener=function(t){var n=t.data,r=t.source;if(r==e.remote||n.secret==e.secret){var i=function(t){var n=t.data;switch(t.type){case"request":e._handleRequest(n.id,n.command,n.args,r);break;case"response":e._handleResponse(n.to,n.success,n.response);break;case"bulk":n.forEach(i)}};i(n)}},this.local.addEventListener("message",e.listener)},o.prototype.stop=function(){this.local.removeEventListener("message",self.listener)},o.prototype._handleRequest=function(e,t,n,i){var s=this,a=c(s.hostHandlers,{NotHandled:o.NotHandled,command:t,args:n,source:i,request:function(){return s.request.apply(s,u(arguments,0).concat([i]))},secret:s.secret});r.try(function(){if(!s.handlers.hasOwnProperty(t)){if(s.defaultHandler)return s.defaultHandler.apply(s,[a,t].concat(n));throw new o.UnsupportedCommand("unsupported command: "+t)}return s.handlers[t].apply(s,[a].concat(n))}).then(function(t){s.respond(e,!0,t,i)}).catch(o.NotHandled,o.UnsupportedCommand,function(t){s.respond(e,!1,{code:t.code,message:t.message},i)}).done()},o.prototype._handleResponse=function(e,t,n){var r=this;if(r._pendingRequests.hasOwnProperty(e))if(t)r._pendingRequests[e].resolve(n);else{var i=null;switch(n.code){case s:i=new o.NotHandled(n.message);break;case a:i=new o.UnsupportedCommand(n.message);break;default:i=new Error(n.message)}r._pendingRequests[e].reject(i)}},o.prototype.raw=function(e,t,n){var r=this;if("bulk"==e){var i={secret:r.secret,type:e,data:t};n?n.postMessage(i,"*"):r.remote.postMessage(i,r.targetOrigin)}else 0==r._messageQueue.length&&setTimeout(r.emptyQueue.bind(r),0),r._messageQueue.push({type:e,data:t,target:n})},o.prototype.emptyQueue=function(){var e=this,t=e._messageQueue;e._messageQueue=[];for(var n=0;n<t.length;n++){var r=t[n];if(!r.sent){for(var i=r.target,o=[],s=n;s<t.length;s++)t[s].target==i&&(o.push({type:t[s].type,data:t[s].data}),t[s].sent=!0);e.raw("bulk",o,i)}}},o.prototype.request=function(e){var t=this,n=u(arguments,1),i=o.randomId(),s=void 0,a=n[n.length-1];return a&&"function"==typeof a.postMessage&&(s=n.pop()),t.raw("request",{id:i,command:e,args:n},s),new r(function(r,o){t._pendingRequests[i]={id:i,command:e,args:n,resolve:r,reject:o}})},o.prototype.respond=function(e,t,n,r){var i=this;i.raw("response",{to:e,success:t,response:n},r)},t.exports=o},{}],233:[function(e,t,n){var r=Object.prototype.hasOwnProperty,i=function(e,t){function n(){this.constructor=e}for(var i in t)r.call(t,i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype},o=function(e){return function(t){for(var n=Array.prototype.slice.call(arguments,1),i=0;i<n.length;i++){var o=n[i];for(var s in o)r.call(o,s)&&e(t,s,o)&&(t[s]=o[s])}return t}},s=o(function(){return!0}),a=o(function(e,t){return"undefined"==typeof e[t]});t.exports=function(e,t,n){function o(e,n){if(!(this instanceof o)){var r=new o(e,n);return null!=Error.captureStackTrace&&Error.captureStackTrace(r,arguments.callee),r}Error.call(this),null!=Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee),this.message=e,a(this,n,t);var i=this.message||e;delete this.message,Object.defineProperty(this,"message",{get:function(){return this.getMessage(i)},set:function(e){i=e}})}return null==n&&(n=Error),i(o,n),o.prototype.name=e,o.prototype.getMessage=function(e){return e},o.prototype.toObject=function(){var e={};for(var t in this)r.call(this,t)&&(e[t]=this[t]);return e},o.prototype.toJSON=function(){return s({message:this.message},this.toObject())},o}},{}],234:[function(e,t,n){var r,i,o,s;o=e(948),i=e(33),s=e("underscore"),r=e("jquery"),o.$=r,o.$=e("jquery"),o.prepareData=function(e,t,n){var o,a,u;return null==n&&(n={}),u={token:i.myToken()},a=function(){switch(e){case"create":case"update":return o=null!=n.requestData?s.clone(n.requestData):null!=n.createData?s.extend({},t.toJSON(),n.createData):s.clone(t.toJSON()),s.extend(o,u);case"delete":return u;default:return{}}}(),"read"===e&&s.isArray(n.fields)&&(a.fields=n.fields.join(",")),"read"===e?r.param(a):JSON.stringify(a)},o.syncOriginal=o.sync,o.sync=function(e,t,n){var r,i,a;switch(e){case"update":return null!=n&&"function"==typeof n.success?n.success(t,{},n):void 0;case"create":n.wait||(r=t.modelCache.lock("Backbone.sync create"),i=s.once(function(){return t.modelCache.unlock(r)}),a=function(e){return function(){return"function"==typeof e&&e.apply(null,arguments),i()}},setTimeout(a(),1e4),n.success=a(n.success),n.error=a(n.error));break;case"delete":if(/^placeholder/.test(t.id))return}return o.syncOriginal.apply(o,arguments)},t.exports=o},{}],235:[function(e,t,n){var r,i={}.hasOwnProperty;r=function(e){return function(t){switch(arguments.length){case 0:throw new Error("Operators can't be invoked with no arguments");case 1:return function(n){if(0===arguments.length)throw new Error("Partially applied binary operator can't be invoked with no arguments");return e.call(this,n,t)};default:return e.apply(null,arguments)}}},t.exports=function(e){var t,n,o;n={};for(t in e)i.call(e,t)&&(o=e[t],n[t]=r(o));return n}},{}],236:[function(e,t,n){var r,i,o=[].slice;i=e(245),r=function(e,t){return"function"==typeof e&&(t=e,e=t.length),function(){return arguments.length<e?r(e-arguments.length,i.apply(null,[t].concat(o.call(arguments)))):t.apply(this,arguments)}},t.exports=r},{}],237:[function(e,t,n){var r,i,o=[].slice;r=e(245),i=e(243),t.exports={noop:r(),id:function(e){return e},choke:function(){var e,t,n;return n=arguments[0],t=2<=arguments.length?o.call(arguments,1):[],e=r.apply(null,t),function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],e.apply(this,t.slice(0,n))}},concat:function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],function(){var t,n,r,i;for(n=void 0,r=0,i=e.length;i>r;r++)t=e[r],n=t.apply(this,arguments);return n}},compose:function(e,t){return function(){return e.call(this,t.apply(this,arguments))}},unpack:function(e){return function(t){return e.apply(this,t)}},invoke:function(){var e,t;return t=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],t.apply(this,e)},guard:function(e,t,n){return function(){return t.apply(this,arguments)?e.apply(this,arguments):n}},const:function(e){return function(){return e}},once:function(e,t){return null==t&&(t="Function called more than once!"),i({first:e,after:function(){throw new Error(t)}})}}},{}],238:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h={}.hasOwnProperty;for(i=e(245),u=[e(240),e(239),e(241),e(244),e(237)],d=0,p=u.length;p>d;d++){a=u[d];for(o in a)h.call(a,o)&&(l=a[o],i[o]=l)}i.overloaded=e(242),i.curried=e(236),i.prime=e(243),r={sub:"subtract",mult:"multiply",div:"divide",idiv:"intDivide",mod:"modulo",neg:"negate",rem:"remainder",comp:"compose",dot:"get"};for(s in r)h.call(r,s)&&(c=r[s],i[s]=i[c]);t.exports=i},{}],239:[function(e,t,n){var r;r=e(235),t.exports=r({and:function(e,t){return e&&t},or:function(e,t){return e||t}}),t.exports.not=function(e){return!e}},{}],240:[function(e,t,n){var r;r=e(235),t.exports=r({add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t},intDivide:function(e,t){return Math.floor(e/t)},modulo:function(e,t){return(e%t+t)%t},remainder:function(e,t){return e%t}}),t.exports.negate=function(e){return-e}},{}],241:[function(e,t,n){var r,i=[].slice;r=e(236),t.exports={get:r(function(e,t){return t[e]}),lookup:r(function(e,t){return e[t]}),set:r(function(e,t,n){return t[e]=n}),method:function(){var e,t;return t=arguments[0],e=2<=arguments.length?i.call(arguments,1):[],function(){var n,r;return r=arguments[0],n=2<=arguments.length?i.call(arguments,1):[],0===n.length?r[t].apply(r,e):r[t].apply(r,i.call(e).concat(i.call(n)))}}}},{}],242:[function(e,t,n){var r,i={}.hasOwnProperty;r=function(e,t){var n;return n=e.filter(function(e){return t>=e}),0===n.length?null:Math.max.apply(null,n)},t.exports=function(e){var t,n,o,s,a;if(1!==arguments.length)throw new Error("overloaded is not overloaded!");if(n={},s=function(){var r;r=[];for(t in e)if(i.call(e,t)){if(a=e[t],o=Number(t),""===t||isNaN(o))throw new Error("non-numeric key "+t);n[o]=a,r.push(o)}return r}(),0===s.length)throw new Error("you must pass at least one overload!");return function(){var e,t,i;return t=arguments.length,e=null!=(i=n[t])?i:function(){if(t=r(s,t),null===t)throw new Error("function not overloaded to accept "+arguments.length+" arguments");return n[t]}(),e.apply(this,arguments)}}},{}],243:[function(e,t,n){var r,i,o=[].slice;r=e(245),i=function(){var e,t,n,r,i,s,a;for(t=arguments[0],e=arguments[1],r=3<=arguments.length?o.call(arguments,2):[],i=void 0,s=0,a=r.length;a>s;s++)n=r[s],null!=n&&(i=n.apply(t,e));return i},t.exports=function(e){var t,n,r,o,s,a;return s=e.first,t=e.after,r=e.beforeBoth,n=e.afterBoth,o=e.both,n=null!=n?n:o,a=!0,function(){return i(this,arguments,r,a?(a=!1,s):t,n)}}},{}],244:[function(e,t,n){var r;r=e(235),t.exports=r({gt:function(e,t){return e>t},gte:function(e,t){return e>=t},lt:function(e,t){return t>e},lte:function(e,t){return t>=e},eq:function(e,t){return e===t},neq:function(e,t){return e!==t}})},{}],245:[function(e,t,n){var r,i,o,s,a,u,c=[].slice;s=function(){},r=null!=(u=Array.isArray)?u:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=function(e){return"function"==typeof e},o=function(e){return"string"==typeof e},a=function(){var e,t,n,r,a;return n=1<=arguments.length?c.call(arguments,0):[],0===n.length?s:null==n[0]?s:"function"==typeof n[0]?(t=n[0],e=2<=n.length?c.call(n,1):[],0===e.length?t:function(){return t.call.apply(t,[this].concat(c.call(e),c.call(arguments)))}):(a=n[0],r=n[1],e=3<=n.length?c.call(n,2):[],t=function(){
if(o(r))return a[r];if(i(r))return r;throw new Error("The [target, method, args...] functionoid requires a string or a function as the method")}(),function(){return t.call.apply(t,[a].concat(c.call(e),c.call(arguments)))})},t.exports=a},{}],246:[function(e,t,n){arguments[4][233][0].apply(n,arguments)},{}],247:[function(e,t,n){!function(e,t){"use strict";function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||l(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?i/n:0}function r(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=o(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function i(){return e.performance&&performance.now&&performance.now()}function o(e,t){var n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}function s(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function a(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function u(e,t){var n=Math.max(e.top,t.top),r=Math.min(e.bottom,t.bottom),i=Math.max(e.left,t.left),o=Math.min(e.right,t.right),s=o-i,a=r-n;return s>=0&&a>=0&&{top:n,bottom:r,left:i,right:o,width:s,height:a}}function c(e){var t=e.getBoundingClientRect();if(t)return t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t}function l(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}if(!("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)){var d=t.documentElement,p=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||0>e||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},r.prototype._parseRootMargin=function(e){var t=e||"0px",n=t.split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,a(e,"resize",this._checkForIntersections,!0),a(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():l();this._observationTargets.forEach(function(r){var o=r.element,s=c(o),a=this._rootContainsTarget(o),u=r.entry,l=e&&a&&this._computeTargetAndRootIntersection(o,t),d=r.entry=new n({time:i(),target:o,boundingClientRect:s,rootBounds:t,intersectionRect:l});e&&a?this._hasCrossedThreshold(u,d)&&this._queuedEntries.push(d):u&&u.isIntersecting&&this._queuedEntries.push(d)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(t,n){if("none"!=e.getComputedStyle(t).display){for(var r=c(t),i=r,o=t.parentNode,s=!1;!s;){var a=null;if(o==this.root||1!=o.nodeType?(s=!0,a=n):"visible"!=e.getComputedStyle(o).overflow&&(a=c(o)),a&&(i=u(a,i),!i))break;o=o.parentNode}return i}},r.prototype._getRootRect=function(){var e;if(this.root)e=c(this.root);else{var n=t.documentElement,r=t.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||n>o!=r>o)return!0}},r.prototype._rootIsInDom=function(){return!this.root||d.contains(this.root)},r.prototype._rootContainsTarget=function(e){return(this.root||d).contains(e)},r.prototype._registerInstance=function(){p.indexOf(this)<0&&p.push(this)},r.prototype._unregisterInstance=function(){var e=p.indexOf(this);-1!=e&&p.splice(e,1)},e.IntersectionObserver=r,e.IntersectionObserverEntry=n}}(window,document)},{}],248:[function(e,t,n){(function(){t.exports=function(e,t,n){var r;switch(null==t&&(t=", "),null==n&&(n=" and "),e.length){case 0:return"";case 1:return e.pop();default:return r=e.pop(),e.join(t)+n+r}}}).call(this)},{}],249:[function(e,t,r){(function(){function e(e,t){return e.set(t[0],t[1]),e}function i(e,t){return e.add(t),e}function o(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function s(e,t,n,r){for(var i=-1,o=e?e.length:0;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function a(e,t){for(var n=-1,r=e?e.length:0;++n<r&&t(e[n],n,e)!==!1;);return e}function u(e,t){for(var n=e?e.length:0;n--&&t(e[n],n,e)!==!1;);return e}function c(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(!t(e[n],n,e))return!1;return!0}function l(e,t){for(var n=-1,r=e?e.length:0,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function d(e,t){var n=e?e.length:0;return!!n&&k(e,t,0)>-1}function p(e,t,n){for(var r=-1,i=e?e.length:0;++r<i;)if(n(t,e[r]))return!0;return!1}function h(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function m(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function f(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function g(e,t,n,r){var i=e?e.length:0;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function v(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function b(e){return e.split("")}function y(e){return e.match(Pt)||[]}function w(e,t,n){var r;return n(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r}function _(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function k(e,t,n){if(t!==t)return _(e,x,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function C(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function x(e){return e!==e}function j(e,t){var n=e?e.length:0;return n?O(e,t)/n:Oe}function S(e){return function(t){return null==t?ne:t[e]}}function T(e){return function(t){return null==e?ne:e[t]}}function M(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function B(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function O(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==ne&&(n=n===ne?o:n+o)}return n}function P(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function E(e,t){return h(t,function(t){return[t,e[t]]})}function L(e){return function(t){return e(t)}}function A(e,t){return h(t,function(t){return e[t]})}function D(e,t){return e.has(t)}function I(e,t){for(var n=-1,r=e.length;++n<r&&k(t,e[n],0)>-1;);return n}function N(e,t){for(var n=e.length;n--&&k(t,e[n],0)>-1;);return n}function V(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&r++;return r}function $(e){return"\\"+zn[e]}function R(e,t){return null==e?ne:e[t]}function z(e){return En.test(e)}function U(e){return Ln.test(e)}function F(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function q(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function H(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function K(e,t){return function(n){return e(t(n))}}function W(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];(s===t||s===ae)&&(e[n]=ae,o[i++]=n)}return o}function G(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function J(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Q(e){return z(e)?X(e):ir(e)}function Y(e){return z(e)?Z(e):b(e)}function X(e){for(var t=On.lastIndex=0;On.test(e);)t++;return t}function Z(e){return e.match(On)||[]}function ee(e){return e.match(Pn)||[]}function te(t){function n(e){if(Na(e)&&!Ud(e)&&!(e instanceof T)){if(e instanceof b)return e;if(Jc.call(e,"__wrapped__"))return Lo(e)}return new b(e)}function r(){}function b(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ne}function T(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pe,this.__views__=[]}function X(){var e=new T(this.__wrapped__);return e.__actions__=xi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=xi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=xi(this.__views__),e}function Z(){if(this.__filtered__){var e=new T(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Pt(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ud(e),r=0>t,i=n?e.length:0,o=ao(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,d=l.length,p=0,h=_l(u,this.__takeCount__);if(!n||ie>i||i==u&&h==u)return oi(e,this.__actions__);var m=[];e:for(;u--&&h>p;){c+=t;for(var f=-1,g=e[c];++f<d;){var v=l[f],b=v.iteratee,y=v.type,w=b(g);if(y==je)g=w;else if(!w){if(y==xe)continue e;break e}}m[p++]=g}return m}function qt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ht(){this.__data__=Ol?Ol(null):{}}function Kt(e){return this.has(e)&&delete this.__data__[e]}function Wt(e){var t=this.__data__;if(Ol){var n=t[e];return n===se?ne:n}return Jc.call(t,e)?t[e]:ne}function Gt(e){var t=this.__data__;return Ol?t[e]!==ne:Jc.call(t,e)}function Jt(e,t){var n=this.__data__;return n[e]=Ol&&t===ne?se:t,this}function Qt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yt(){this.__data__=[]}function Xt(e){var t=this.__data__,n=kn(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():ul.call(t,n,1),!0}function Zt(e){var t=this.__data__,n=kn(t,e);return 0>n?ne:t[n][1]}function en(e){return kn(this.__data__,e)>-1}function tn(e,t){var n=this.__data__,r=kn(n,e);return 0>r?n.push([e,t]):n[r][1]=t,this}function nn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function rn(){this.__data__={hash:new qt,map:new(Sl||Qt),string:new qt}}function on(e){return io(this,e).delete(e)}function sn(e){return io(this,e).get(e)}function an(e){return io(this,e).has(e)}function un(e,t){return io(this,e).set(e,t),this}function cn(e){var t=-1,n=e?e.length:0;for(this.__data__=new nn;++t<n;)this.add(e[t])}function ln(e){return this.__data__.set(e,se),this}function dn(e){return this.__data__.has(e)}function pn(e){this.__data__=new Qt(e)}function hn(){this.__data__=new Qt}function mn(e){return this.__data__.delete(e)}function fn(e){return this.__data__.get(e)}function gn(e){return this.__data__.has(e)}function vn(e,t){var n=this.__data__;if(n instanceof Qt){var r=n.__data__;if(!Sl||r.length<ie-1)return r.push([e,t]),this;n=this.__data__=new nn(r)}return n.set(e,t),this}function bn(e,t){var n=Ud(e)||Ca(e)?P(e.length,zc):[],r=n.length,i=!!r;for(var o in e)!t&&!Jc.call(e,o)||i&&("length"==o||go(o,r))||n.push(o);return n}function yn(e,t,n,r){return e===ne||ka(e,Hc[n])&&!Jc.call(r,n)?t:e}function wn(e,t,n){(n!==ne&&!ka(e[t],n)||"number"==typeof t&&n===ne&&!(t in e))&&(e[t]=n)}function _n(e,t,n){var r=e[t];Jc.call(e,t)&&ka(r,n)&&(n!==ne||t in e)||(e[t]=n)}function kn(e,t){for(var n=e.length;n--;)if(ka(e[n][0],t))return n;return-1}function Cn(e,t,n,r){return Fl(e,function(e,i,o){t(r,e,n(e),o)}),r}function xn(e,t){return e&&ji(t,bu(t),e)}function jn(e,t){for(var n=-1,r=null==e,i=t.length,o=Ac(i);++n<i;)o[n]=r?ne:fu(e,t[n]);return o}function Sn(e,t,n){return e===e&&(n!==ne&&(e=n>=e?e:n),t!==ne&&(e=e>=t?e:t)),e}function Tn(e,t,n,r,i,o,s){var u;if(r&&(u=o?r(e,i,o,s):r(e)),u!==ne)return u;if(!Ia(e))return e;var c=Ud(e);if(c){if(u=lo(e),!t)return xi(e,u)}else{var l=Zl(e),d=l==Re||l==ze;if(qd(e))return pi(e,t);if(l==qe||l==De||d&&!o){if(F(e))return o?e:{};if(u=po(d?{}:e),!t)return Si(e,xn(u,e))}else{if(!Nn[l])return o?e:{};u=ho(e,l,Tn,t)}}s||(s=new pn);var p=s.get(e);if(p)return p;if(s.set(e,u),!c)var h=n?Zi(e):bu(e);return a(h||e,function(i,o){h&&(o=i,i=e[o]),_n(u,o,Tn(i,t,n,r,o,e,s))}),u}function On(e){var t=bu(e);return function(n){return Pn(n,e,t)}}function Pn(e,t,n){var r=n.length;if(null==e)return!r;for(e=$c(e);r--;){var i=n[r],o=t[i],s=e[i];if(s===ne&&!(i in e)||!o(s))return!1}return!0}function En(e){return Ia(e)?sl(e):{}}function Ln(e,t,n){if("function"!=typeof e)throw new Uc(oe);return nd(function(){e.apply(ne,n)},t)}function Vn(e,t,n,r){var i=-1,o=d,s=!0,a=e.length,u=[],c=t.length;if(!a)return u;n&&(t=h(t,L(n))),r?(o=p,s=!1):t.length>=ie&&(o=D,s=!1,t=new cn(t));e:for(;++i<a;){var l=e[i],m=n?n(l):l;if(l=r||0!==l?l:0,s&&m===m){for(var f=c;f--;)if(t[f]===m)continue e;u.push(l)}else o(t,m,r)||u.push(l)}return u}function $n(e,t){var n=!0;return Fl(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Rn(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(a===ne?s===s&&!Ga(s):n(s,a)))var a=s,u=o}return u}function zn(e,t,n,r){var i=e.length;for(n=eu(n),0>n&&(n=-n>i?0:i+n),r=r===ne||r>i?i:eu(r),0>r&&(r+=i),r=n>r?0:tu(r);r>n;)e[n++]=t;return e}function qn(e,t){var n=[];return Fl(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Hn(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=fo),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?Hn(a,t-1,n,r,i):m(i,a):r||(i[i.length]=a)}return i}function Wn(e,t){return e&&Hl(e,t,bu)}function Gn(e,t){return e&&Kl(e,t,bu)}function Qn(e,t){return l(t,function(t){return La(e[t])})}function Yn(e,t){t=bo(t,e)?[t]:li(t);for(var n=0,r=t.length;null!=e&&r>n;)e=e[Oo(t[n++])];return n&&n==r?e:ne}function ir(e,t,n){var r=t(e);return Ud(e)?r:m(r,n(e))}function cr(e){return Xc.call(e)}function lr(e,t){return e>t}function dr(e,t){return null!=e&&Jc.call(e,t)}function pr(e,t){return null!=e&&t in $c(e)}function hr(e,t,n){return e>=_l(t,n)&&e<wl(t,n)}function mr(e,t,n){for(var r=n?p:d,i=e[0].length,o=e.length,s=o,a=Ac(o),u=1/0,c=[];s--;){var l=e[s];s&&t&&(l=h(l,L(t))),u=_l(l.length,u),a[s]=!n&&(t||i>=120&&l.length>=120)?new cn(s&&l):ne}l=e[0];var m=-1,f=a[0];e:for(;++m<i&&c.length<u;){var g=l[m],v=t?t(g):g;if(g=n||0!==g?g:0,!(f?D(f,v):r(c,v,n))){for(s=o;--s;){var b=a[s];if(!(b?D(b,v):r(e[s],v,n)))continue e}f&&f.push(v),c.push(g)}}return c}function fr(e,t,n,r){return Wn(e,function(e,i,o){t(r,n(e),i,o)}),r}function gr(e,t,n){bo(t,e)||(t=li(t),e=Mo(e,t),t=Xo(t));var r=null==e?e:e[Oo(t)];return null==r?ne:o(r,e,n)}function vr(e){return Na(e)&&Xc.call(e)==Xe}function br(e){return Na(e)&&Xc.call(e)==Ve}function yr(e,t,n,r,i){return e===t?!0:null==e||null==t||!Ia(e)&&!Na(t)?e!==e&&t!==t:wr(e,t,yr,n,r,i)}function wr(e,t,n,r,i,o){var s=Ud(e),a=Ud(t),u=Ie,c=Ie;s||(u=Zl(e),u=u==De?qe:u),a||(c=Zl(t),c=c==De?qe:c);var l=u==qe&&!F(e),d=c==qe&&!F(t),p=u==c;if(p&&!l)return o||(o=new pn),s||Jd(e)?Qi(e,t,n,r,i,o):Yi(e,t,u,n,r,i,o);if(!(i&ye)){var h=l&&Jc.call(e,"__wrapped__"),m=d&&Jc.call(t,"__wrapped__");if(h||m){var f=h?e.value():e,g=m?t.value():t;return o||(o=new pn),n(f,g,r,i,o)}}return p?(o||(o=new pn),Xi(e,t,n,r,i,o)):!1}function _r(e){return Na(e)&&Zl(e)==Ue}function kr(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=$c(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=n[i];var u=a[0],c=e[u],l=a[1];if(s&&a[2]){if(c===ne&&!(u in e))return!1}else{var d=new pn;if(r)var p=r(c,l,u,e,t,d);if(!(p===ne?yr(l,c,r,be|ye,d):p))return!1}}return!0}function Cr(e){if(!Ia(e)||_o(e))return!1;var t=La(e)||F(e)?el:Vt;return t.test(Po(e))}function xr(e){return Ia(e)&&Xc.call(e)==Ke}function jr(e){return Na(e)&&Zl(e)==We}function Sr(e){return Na(e)&&Da(e.length)&&!!In[Xc.call(e)]}function Tr(e){return"function"==typeof e?e:null==e?uc:"object"==typeof e?Ud(e)?Lr(e[0],e[1]):Er(e):gc(e)}function Mr(e){if(!ko(e))return yl(e);var t=[];for(var n in $c(e))Jc.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Br(e){if(!Ia(e))return To(e);var t=ko(e),n=[];for(var r in e)("constructor"!=r||!t&&Jc.call(e,r))&&n.push(r);return n}function Or(e,t){return t>e}function Pr(e,t){var n=-1,r=xa(e)?Ac(e.length):[];return Fl(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function Er(e){var t=oo(e);return 1==t.length&&t[0][2]?xo(t[0][0],t[0][1]):function(n){return n===e||kr(n,e,t)}}function Lr(e,t){return bo(e)&&Co(t)?xo(Oo(e),t):function(n){var r=fu(n,e);return r===ne&&r===t?vu(n,e):yr(t,r,ne,be|ye)}}function Ar(e,t,n,r,i){if(e!==t){if(!Ud(t)&&!Jd(t))var o=Br(t);a(o||t,function(s,a){if(o&&(a=s,s=t[a]),Ia(s))i||(i=new pn),Dr(e,t,a,n,Ar,r,i);else{var u=r?r(e[a],s,a+"",e,t,i):ne;u===ne&&(u=s),wn(e,a,u)}})}}function Dr(e,t,n,r,i,o,s){var a=e[n],u=t[n],c=s.get(u);if(c)return void wn(e,n,c);var l=o?o(a,u,n+"",e,t,s):ne,d=l===ne;d&&(l=u,Ud(u)||Jd(u)?Ud(a)?l=a:ja(a)?l=xi(a):(d=!1,l=Tn(u,!0)):Ha(u)||Ca(u)?Ca(a)?l=ru(a):!Ia(a)||r&&La(a)?(d=!1,l=Tn(u,!0)):l=a:d=!1),d&&(s.set(u,l),i(l,u,r,o,s),s.delete(u)),wn(e,n,l)}function Ir(e,t){var n=e.length;if(n)return t+=0>t?n:0,go(t,n)?e[t]:ne}function Nr(e,t,n){var r=-1;t=h(t.length?t:[uc],L(ro()));var i=Pr(e,function(e,n,i){var o=h(t,function(t){return t(e)});return{criteria:o,index:++r,value:e}});return B(i,function(e,t){return _i(e,t,n)})}function Vr(e,t){return e=$c(e),$r(e,t,function(t,n){return n in e})}function $r(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=e[s];n(a,s)&&(o[s]=a)}return o}function Rr(e){return function(t){return Yn(t,e)}}function zr(e,t,n,r){var i=r?C:k,o=-1,s=t.length,a=e;for(e===t&&(t=xi(t)),n&&(a=h(e,L(n)));++o<s;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(a,l,u,r))>-1;)a!==e&&ul.call(a,u,1),ul.call(e,u,1);return e}function Ur(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;if(go(i))ul.call(e,i,1);else if(bo(i,e))delete e[Oo(i)];else{var s=li(i),a=Mo(e,s);null!=a&&delete a[Oo(Xo(s))]}}}return e}function Fr(e,t){return e+ml(Cl()*(t-e+1))}function qr(e,t,n,r){for(var i=-1,o=wl(hl((t-e)/(n||1)),0),s=Ac(o);o--;)s[r?o:++i]=e,e+=n;return s}function Hr(e,t){var n="";if(!e||1>t||t>Me)return n;do t%2&&(n+=e),t=ml(t/2),t&&(e+=e);while(t);return n}function Kr(e,t){return t=wl(t===ne?e.length-1:t,0),function(){for(var n=arguments,r=-1,i=wl(n.length-t,0),s=Ac(i);++r<i;)s[r]=n[t+r];r=-1;for(var a=Ac(t+1);++r<t;)a[r]=n[r];return a[t]=s,o(e,this,a)}}function Wr(e,t,n,r){if(!Ia(e))return e;t=bo(t,e)?[t]:li(t);for(var i=-1,o=t.length,s=o-1,a=e;null!=a&&++i<o;){var u=Oo(t[i]),c=n;if(i!=s){var l=a[u];c=r?r(l,u,a):ne,c===ne&&(c=Ia(l)?l:go(t[i+1])?[]:{})}_n(a,u,c),a=a[u]}return e}function Gr(e,t,n){var r=-1,i=e.length;0>t&&(t=-t>i?0:i+t),n=n>i?i:n,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Ac(i);++r<i;)o[r]=e[r+t];return o}function Jr(e,t){var n;return Fl(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function Qr(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t===t&&Le>=i){for(;i>r;){var o=r+i>>>1,s=e[o];null!==s&&!Ga(s)&&(n?t>=s:t>s)?r=o+1:i=o}return i}return Yr(e,t,uc,n)}function Yr(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,s=t!==t,a=null===t,u=Ga(t),c=t===ne;o>i;){var l=ml((i+o)/2),d=n(e[l]),p=d!==ne,h=null===d,m=d===d,f=Ga(d);if(s)var g=r||m;else g=c?m&&(r||p):a?m&&p&&(r||!h):u?m&&p&&!h&&(r||!f):h||f?!1:r?t>=d:t>d;g?i=l+1:o=l}return _l(o,Ee)}function Xr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!ka(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function Zr(e){return"number"==typeof e?e:Ga(e)?Oe:+e}function ei(e){if("string"==typeof e)return e;if(Ga(e))return Ul?Ul.call(e):"";var t=e+"";return"0"==t&&1/e==-Te?"-0":t}function ti(e,t,n){var r=-1,i=d,o=e.length,s=!0,a=[],u=a;if(n)s=!1,i=p;else if(o>=ie){var c=t?null:Jl(e);if(c)return G(c);s=!1,i=D,u=new cn}else u=t?[]:a;e:for(;++r<o;){var l=e[r],h=t?t(l):l;if(l=n||0!==l?l:0,s&&h===h){for(var m=u.length;m--;)if(u[m]===h)continue e;t&&u.push(h),a.push(l)}else i(u,h,n)||(u!==a&&u.push(h),a.push(l))}return a}function ni(e,t){t=bo(t,e)?[t]:li(t),e=Mo(e,t);var n=Oo(Xo(t));return!(null!=e&&Jc.call(e,n))||delete e[n]}function ri(e,t,n,r){return Wr(e,t,n(Yn(e,t)),r)}function ii(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Gr(e,r?0:o,r?o+1:i):Gr(e,r?o+1:0,r?i:o)}function oi(e,t){var n=e;return n instanceof T&&(n=n.value()),f(t,function(e,t){return t.func.apply(t.thisArg,m([e],t.args))},n)}function si(e,t,n){for(var r=-1,i=e.length;++r<i;)var o=o?m(Vn(o,e[r],t,n),Vn(e[r],o,t,n)):e[r];return o&&o.length?ti(o,t,n):[]}function ai(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;){var a=o>r?t[r]:ne;n(s,e[r],a)}return s}function ui(e){return ja(e)?e:[]}function ci(e){return"function"==typeof e?e:uc}function li(e){return Ud(e)?e:id(e)}function di(e,t,n){var r=e.length;return n=n===ne?r:n,!t&&n>=r?e:Gr(e,t,n)}function pi(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function hi(e){var t=new e.constructor(e.byteLength);return new rl(t).set(new rl(e)),t}function mi(e,t){var n=t?hi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function fi(t,n,r){var i=n?r(H(t),!0):H(t);return f(i,e,new t.constructor)}function gi(e){var t=new e.constructor(e.source,At.exec(e));return t.lastIndex=e.lastIndex,t}function vi(e,t,n){var r=t?n(G(e),!0):G(e);return f(r,i,new e.constructor)}function bi(e){return zl?$c(zl.call(e)):{}}function yi(e,t){var n=t?hi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function wi(e,t){if(e!==t){var n=e!==ne,r=null===e,i=e===e,o=Ga(e),s=t!==ne,a=null===t,u=t===t,c=Ga(t);if(!a&&!c&&!o&&e>t||o&&s&&u&&!a&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t>e||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0}function _i(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;++r<s;){var u=wi(i[r],o[r]);if(u){if(r>=a)return u;var c=n[r];return u*("desc"==c?-1:1)}}return e.index-t.index}function ki(e,t,n,r){for(var i=-1,o=e.length,s=n.length,a=-1,u=t.length,c=wl(o-s,0),l=Ac(u+c),d=!r;++a<u;)l[a]=t[a];for(;++i<s;)(d||o>i)&&(l[n[i]]=e[i]);for(;c--;)l[a++]=e[i++];return l}function Ci(e,t,n,r){for(var i=-1,o=e.length,s=-1,a=n.length,u=-1,c=t.length,l=wl(o-a,0),d=Ac(l+c),p=!r;++i<l;)d[i]=e[i];for(var h=i;++u<c;)d[h+u]=t[u];for(;++s<a;)(p||o>i)&&(d[h+n[s]]=e[i++]);return d}function xi(e,t){var n=-1,r=e.length;for(t||(t=Ac(r));++n<r;)t[n]=e[n];return t}function ji(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=r?r(n[s],e[s],s,n,e):ne;_n(n,s,a===ne?e[s]:a)}return n}function Si(e,t){return ji(e,Yl(e),t)}function Ti(e,t){return function(n,r){var i=Ud(n)?s:Cn,o=t?t():{};return i(n,e,ro(r,2),o)}}function Mi(e){return Kr(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:ne,s=i>2?n[2]:ne;for(o=e.length>3&&"function"==typeof o?(i--,o):ne,s&&vo(n[0],n[1],s)&&(o=3>i?ne:o,i=1),t=$c(t);++r<i;){var a=n[r];a&&e(t,a,r,o)}return t})}function Bi(e,t){return function(n,r){if(null==n)return n;if(!xa(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=$c(n);(t?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}function Oi(e){return function(t,n,r){for(var i=-1,o=$c(t),s=r(t),a=s.length;a--;){var u=s[e?a:++i];if(n(o[u],u,o)===!1)break}return t}}function Pi(e,t,n){function r(){var t=this&&this!==Kn&&this instanceof r?o:e;return t.apply(i?n:this,arguments)}var i=t&ue,o=Ai(e);return r}function Ei(e){return function(t){t=ou(t);var n=z(t)?Y(t):ne,r=n?n[0]:t.charAt(0),i=n?di(n,1).join(""):t.slice(1);return r[e]()+i}}function Li(e){return function(t){return f(rc(Nu(t).replace(Mn,"")),e,"")}}function Ai(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=En(e.prototype),r=e.apply(n,t);return Ia(r)?r:n}}function Di(e,t,n){function r(){for(var s=arguments.length,a=Ac(s),u=s,c=no(r);u--;)a[u]=arguments[u];var l=3>s&&a[0]!==c&&a[s-1]!==c?[]:W(a,c);if(s-=l.length,n>s)return Ki(e,t,Vi,r.placeholder,ne,a,l,ne,ne,n-s);var d=this&&this!==Kn&&this instanceof r?i:e;return o(d,this,a)}var i=Ai(e);return r}function Ii(e){return function(t,n,r){var i=$c(t);if(!xa(t)){var o=ro(n,3);t=bu(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:ne}}function Ni(e){return Kr(function(t){t=Hn(t,1);var n=t.length,r=n,i=b.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new Uc(oe);if(i&&!s&&"wrapper"==to(o))var s=new b([],!0)}for(r=s?r:n;++r<n;){o=t[r];var a=to(o),u="wrapper"==a?Ql(o):ne;s=u&&wo(u[0])&&u[1]==(fe|de|he|ge)&&!u[4].length&&1==u[9]?s[to(u[0])].apply(s,u[3]):1==o.length&&wo(o)?s[a]():s.thru(o)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&Ud(r)&&r.length>=ie)return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Vi(e,t,n,r,i,o,s,a,u,c){function l(){for(var v=arguments.length,b=Ac(v),y=v;y--;)b[y]=arguments[y];if(m)var w=no(l),_=V(b,w);if(r&&(b=ki(b,r,i,m)),o&&(b=Ci(b,o,s,m)),v-=_,m&&c>v){var k=W(b,w);return Ki(e,t,Vi,l.placeholder,n,b,k,a,u,c-v)}var C=p?n:this,x=h?C[e]:e;return v=b.length,a?b=Bo(b,a):f&&v>1&&b.reverse(),d&&v>u&&(b.length=u),this&&this!==Kn&&this instanceof l&&(x=g||Ai(x)),x.apply(C,b)}var d=t&fe,p=t&ue,h=t&ce,m=t&(de|pe),f=t&ve,g=h?ne:Ai(e);return l}function $i(e,t){return function(n,r){return fr(n,e,t(r),{})}}function Ri(e,t){return function(n,r){var i;if(n===ne&&r===ne)return t;if(n!==ne&&(i=n),r!==ne){if(i===ne)return r;"string"==typeof n||"string"==typeof r?(n=ei(n),r=ei(r)):(n=Zr(n),r=Zr(r)),i=e(n,r)}return i}}function zi(e){return Kr(function(t){return t=1==t.length&&Ud(t[0])?h(t[0],L(ro())):h(Hn(t,1),L(ro())),Kr(function(n){var r=this;return e(t,function(e){return o(e,r,n)})})})}function Ui(e,t){t=t===ne?" ":ei(t);var n=t.length;if(2>n)return n?Hr(t,e):t;var r=Hr(t,hl(e/Q(t)));return z(t)?di(Y(r),0,e).join(""):r.slice(0,e)}function Fi(e,t,n,r){function i(){for(var t=-1,u=arguments.length,c=-1,l=r.length,d=Ac(l+u),p=this&&this!==Kn&&this instanceof i?a:e;++c<l;)d[c]=r[c];for(;u--;)d[c++]=arguments[++t];return o(p,s?n:this,d)}var s=t&ue,a=Ai(e);return i}function qi(e){return function(t,n,r){return r&&"number"!=typeof r&&vo(t,n,r)&&(n=r=ne),t=Za(t),n===ne?(n=t,t=0):n=Za(n),r=r===ne?n>t?1:-1:Za(r),qr(t,n,r,e)}}function Hi(e){return function(t,n){return("string"!=typeof t||"string"!=typeof n)&&(t=nu(t),n=nu(n)),e(t,n)}}function Ki(e,t,n,r,i,o,s,a,u,c){var l=t&de,d=l?s:ne,p=l?ne:s,h=l?o:ne,m=l?ne:o;t|=l?he:me,t&=~(l?me:he),t&le||(t&=~(ue|ce));var f=[e,t,i,h,d,m,p,a,u,c],g=n.apply(ne,f);return wo(e)&&td(g,f),g.placeholder=r,rd(g,e,t)}function Wi(e){var t=Vc[e];return function(e,n){if(e=nu(e),n=_l(eu(n),292)){var r=(ou(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return r=(ou(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function Gi(e){return function(t){var n=Zl(t);return n==Ue?H(t):n==We?J(t):E(t,e(t))}}function Ji(e,t,n,r,i,o,s,a){var u=t&ce;if(!u&&"function"!=typeof e)throw new Uc(oe);var c=r?r.length:0;if(c||(t&=~(he|me),r=i=ne),s=s===ne?s:wl(eu(s),0),a=a===ne?a:eu(a),c-=i?i.length:0,t&me){var l=r,d=i;r=i=ne}var p=u?ne:Ql(e),h=[e,t,n,r,i,l,d,o,s,a];if(p&&jo(h,p),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],a=h[9]=null==h[9]?u?0:e.length:wl(h[9]-c,0),!a&&t&(de|pe)&&(t&=~(de|pe)),t&&t!=ue)m=t==de||t==pe?Di(e,t,a):t!=he&&t!=(ue|he)||i.length?Vi.apply(ne,h):Fi(e,t,n,r);else var m=Pi(e,t,n);var f=p?Wl:td;return rd(f(m,h),e,t)}function Qi(e,t,n,r,i,o){var s=i&ye,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,d=!0,p=i&be?new cn:ne;for(o.set(e,t),o.set(t,e);++l<a;){var h=e[l],m=t[l];if(r)var f=s?r(m,h,l,t,e,o):r(h,m,l,e,t,o);if(f!==ne){if(f)continue;d=!1;break}if(p){if(!v(t,function(e,t){return p.has(t)||h!==e&&!n(h,e,r,i,o)?void 0:p.add(t)})){d=!1;break}}else if(h!==m&&!n(h,m,r,i,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function Yi(e,t,n,r,i,o,s){switch(n){case Ze:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xe:return e.byteLength==t.byteLength&&r(new rl(e),new rl(t))?!0:!1;case Ne:case Ve:case Fe:return ka(+e,+t);case $e:return e.name==t.name&&e.message==t.message;case Ke:case Ge:return e==t+"";case Ue:var a=H;case We:var u=o&ye;if(a||(a=G),e.size!=t.size&&!u)return!1;var c=s.get(e);if(c)return c==t;o|=be,s.set(e,t);var l=Qi(a(e),a(t),r,i,o,s);return s.delete(e),l;case Je:if(zl)return zl.call(e)==zl.call(t)}return!1}function Xi(e,t,n,r,i,o){var s=i&ye,a=bu(e),u=a.length,c=bu(t),l=c.length;if(u!=l&&!s)return!1;for(var d=u;d--;){var p=a[d];if(!(s?p in t:Jc.call(t,p)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var m=!0;o.set(e,t),o.set(t,e);for(var f=s;++d<u;){p=a[d];var g=e[p],v=t[p];if(r)var b=s?r(v,g,p,t,e,o):r(g,v,p,e,t,o);if(!(b===ne?g===v||n(g,v,r,i,o):b)){m=!1;break}f||(f="constructor"==p)}if(m&&!f){var y=e.constructor,w=t.constructor;y!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w)&&(m=!1)}return o.delete(e),o.delete(t),m}function Zi(e){return ir(e,bu,Yl)}function eo(e){return ir(e,yu,Xl)}function to(e){for(var t=e.name+"",n=Al[t],r=Jc.call(Al,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function no(e){var t=Jc.call(n,"placeholder")?n:e;return t.placeholder}function ro(){var e=n.iteratee||cc;return e=e===cc?Tr:e,arguments.length?e(arguments[0],arguments[1]):e}function io(e,t){var n=e.__data__;return yo(t)?n["string"==typeof t?"string":"hash"]:n.map}function oo(e){for(var t=bu(e),n=t.length;n--;){var r=t[n],i=e[r];
t[n]=[r,i,Co(i)]}return t}function so(e,t){var n=R(e,t);return Cr(n)?n:ne}function ao(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=_l(t,e+s);break;case"takeRight":e=wl(e,t-s)}}return{start:e,end:t}}function uo(e){var t=e.match(Bt);return t?t[1].split(Ot):[]}function co(e,t,n){t=bo(t,e)?[t]:li(t);for(var r,i=-1,o=t.length;++i<o;){var s=Oo(t[i]);if(!(r=null!=e&&n(e,s)))break;e=e[s]}if(r)return r;var o=e?e.length:0;return!!o&&Da(o)&&go(s,o)&&(Ud(e)||Ca(e))}function lo(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Jc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function po(e){return"function"!=typeof e.constructor||ko(e)?{}:En(il(e))}function ho(e,t,n,r){var i=e.constructor;switch(t){case Xe:return hi(e);case Ne:case Ve:return new i(+e);case Ze:return mi(e,r);case et:case tt:case nt:case rt:case it:case ot:case st:case at:case ut:return yi(e,r);case Ue:return fi(e,r,n);case Fe:case Ge:return new i(e);case Ke:return gi(e);case We:return vi(e,r,n);case Je:return bi(e)}}function mo(e,t){var n=t.length,r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Mt,"{\n/* [wrapped with "+t+"] */\n")}function fo(e){return Ud(e)||Ca(e)||!!(cl&&e&&e[cl])}function go(e,t){return t=null==t?Me:t,!!t&&("number"==typeof e||Rt.test(e))&&e>-1&&e%1==0&&t>e}function vo(e,t,n){if(!Ia(n))return!1;var r=typeof t;return("number"==r?xa(n)&&go(t,n.length):"string"==r&&t in n)?ka(n[t],e):!1}function bo(e,t){if(Ud(e))return!1;var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||Ga(e)?!0:wt.test(e)||!yt.test(e)||null!=t&&e in $c(t)}function yo(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function wo(e){var t=to(e),r=n[t];if("function"!=typeof r||!(t in T.prototype))return!1;if(e===r)return!0;var i=Ql(r);return!!i&&e===i[0]}function _o(e){return!!Wc&&Wc in e}function ko(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Hc;return e===n}function Co(e){return e===e&&!Ia(e)}function xo(e,t){return function(n){return null==n?!1:n[e]===t&&(t!==ne||e in $c(n))}}function jo(e,t){var n=e[1],r=t[1],i=n|r,o=(ue|ce|fe)>i,s=r==fe&&n==de||r==fe&&n==ge&&e[7].length<=t[8]||r==(fe|ge)&&t[7].length<=t[8]&&n==de;if(!o&&!s)return e;r&ue&&(e[2]=t[2],i|=n&ue?0:le);var a=t[3];if(a){var u=e[3];e[3]=u?ki(u,a,t[4]):a,e[4]=u?W(e[3],ae):t[4]}return a=t[5],a&&(u=e[5],e[5]=u?Ci(u,a,t[6]):a,e[6]=u?W(e[5],ae):t[6]),a=t[7],a&&(e[7]=a),r&fe&&(e[8]=null==e[8]?t[8]:_l(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function So(e,t,n,r,i,o){return Ia(e)&&Ia(t)&&(o.set(t,e),Ar(e,t,ne,So,o),o.delete(t)),e}function To(e){var t=[];if(null!=e)for(var n in $c(e))t.push(n);return t}function Mo(e,t){return 1==t.length?e:Yn(e,Gr(t,0,-1))}function Bo(e,t){for(var n=e.length,r=_l(t.length,n),i=xi(e);r--;){var o=t[r];e[r]=go(o,n)?i[o]:ne}return e}function Oo(e){if("string"==typeof e||Ga(e))return e;var t=e+"";return"0"==t&&1/e==-Te?"-0":t}function Po(e){if(null!=e){try{return Gc.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Eo(e,t){return a(Ae,function(n){var r="_."+n[0];t&n[1]&&!d(e,r)&&e.push(r)}),e.sort()}function Lo(e){if(e instanceof T)return e.clone();var t=new b(e.__wrapped__,e.__chain__);return t.__actions__=xi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ao(e,t,n){t=(n?vo(e,t,n):t===ne)?1:wl(eu(t),0);var r=e?e.length:0;if(!r||1>t)return[];for(var i=0,o=0,s=Ac(hl(r/t));r>i;)s[o++]=Gr(e,i,i+=t);return s}function Do(e){for(var t=-1,n=e?e.length:0,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}function Io(){for(var e=arguments.length,t=Ac(e?e-1:0),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return e?m(Ud(n)?xi(n):[n],Hn(t,1)):[]}function No(e,t,n){var r=e?e.length:0;return r?(t=n||t===ne?1:eu(t),Gr(e,0>t?0:t,r)):[]}function Vo(e,t,n){var r=e?e.length:0;return r?(t=n||t===ne?1:eu(t),t=r-t,Gr(e,0,0>t?0:t)):[]}function $o(e,t){return e&&e.length?ii(e,ro(t,3),!0,!0):[]}function Ro(e,t){return e&&e.length?ii(e,ro(t,3),!0):[]}function zo(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&vo(e,t,n)&&(n=0,r=i),zn(e,t,n,r)):[]}function Uo(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=null==n?0:eu(n);return 0>i&&(i=wl(r+i,0)),_(e,ro(t,3),i)}function Fo(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r-1;return n!==ne&&(i=eu(n),i=0>n?wl(r+i,0):_l(i,r-1)),_(e,ro(t,3),i,!0)}function qo(e){var t=e?e.length:0;return t?Hn(e,1):[]}function Ho(e){var t=e?e.length:0;return t?Hn(e,Te):[]}function Ko(e,t){var n=e?e.length:0;return n?(t=t===ne?1:eu(t),Hn(e,t)):[]}function Wo(e){for(var t=-1,n=e?e.length:0,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function Go(e){return e&&e.length?e[0]:ne}function Jo(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=null==n?0:eu(n);return 0>i&&(i=wl(r+i,0)),k(e,t,i)}function Qo(e){var t=e?e.length:0;return t?Gr(e,0,-1):[]}function Yo(e,t){return e?bl.call(e,t):""}function Xo(e){var t=e?e.length:0;return t?e[t-1]:ne}function Zo(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if(n!==ne&&(i=eu(n),i=(0>i?wl(r+i,0):_l(i,r-1))+1),t!==t)return _(e,x,i-1,!0);for(;i--;)if(e[i]===t)return i;return-1}function es(e,t){return e&&e.length?Ir(e,eu(t)):ne}function ts(e,t){return e&&e.length&&t&&t.length?zr(e,t):e}function ns(e,t,n){return e&&e.length&&t&&t.length?zr(e,t,ro(n,2)):e}function rs(e,t,n){return e&&e.length&&t&&t.length?zr(e,t,ne,n):e}function is(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=ro(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Ur(e,i),n}function os(e){return e?xl.call(e):e}function ss(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&vo(e,t,n)?(t=0,n=r):(t=null==t?0:eu(t),n=n===ne?r:eu(n)),Gr(e,t,n)):[]}function as(e,t){return Qr(e,t)}function us(e,t,n){return Yr(e,t,ro(n,2))}function cs(e,t){var n=e?e.length:0;if(n){var r=Qr(e,t);if(n>r&&ka(e[r],t))return r}return-1}function ls(e,t){return Qr(e,t,!0)}function ds(e,t,n){return Yr(e,t,ro(n,2),!0)}function ps(e,t){var n=e?e.length:0;if(n){var r=Qr(e,t,!0)-1;if(ka(e[r],t))return r}return-1}function hs(e){return e&&e.length?Xr(e):[]}function ms(e,t){return e&&e.length?Xr(e,ro(t,2)):[]}function fs(e){var t=e?e.length:0;return t?Gr(e,1,t):[]}function gs(e,t,n){return e&&e.length?(t=n||t===ne?1:eu(t),Gr(e,0,0>t?0:t)):[]}function vs(e,t,n){var r=e?e.length:0;return r?(t=n||t===ne?1:eu(t),t=r-t,Gr(e,0>t?0:t,r)):[]}function bs(e,t){return e&&e.length?ii(e,ro(t,3),!1,!0):[]}function ys(e,t){return e&&e.length?ii(e,ro(t,3)):[]}function ws(e){return e&&e.length?ti(e):[]}function _s(e,t){return e&&e.length?ti(e,ro(t,2)):[]}function ks(e,t){return e&&e.length?ti(e,ne,t):[]}function Cs(e){if(!e||!e.length)return[];var t=0;return e=l(e,function(e){return ja(e)?(t=wl(e.length,t),!0):void 0}),P(t,function(t){return h(e,S(t))})}function xs(e,t){if(!e||!e.length)return[];var n=Cs(e);return null==t?n:h(n,function(e){return o(t,ne,e)})}function js(e,t){return ai(e||[],t||[],_n)}function Ss(e,t){return ai(e||[],t||[],Wr)}function Ts(e){var t=n(e);return t.__chain__=!0,t}function Ms(e,t){return t(e),e}function Bs(e,t){return t(e)}function Os(){return Ts(this)}function Ps(){return new b(this.value(),this.__chain__)}function Es(){this.__values__===ne&&(this.__values__=Xa(this.value()));var e=this.__index__>=this.__values__.length,t=e?ne:this.__values__[this.__index__++];return{done:e,value:t}}function Ls(){return this}function As(e){for(var t,n=this;n instanceof r;){var i=Lo(n);i.__index__=0,i.__values__=ne,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t}function Ds(){var e=this.__wrapped__;if(e instanceof T){var t=e;return this.__actions__.length&&(t=new T(this)),t=t.reverse(),t.__actions__.push({func:Bs,args:[os],thisArg:ne}),new b(t,this.__chain__)}return this.thru(os)}function Is(){return oi(this.__wrapped__,this.__actions__)}function Ns(e,t,n){var r=Ud(e)?c:$n;return n&&vo(e,t,n)&&(t=ne),r(e,ro(t,3))}function Vs(e,t){var n=Ud(e)?l:qn;return n(e,ro(t,3))}function $s(e,t){return Hn(Hs(e,t),1)}function Rs(e,t){return Hn(Hs(e,t),Te)}function zs(e,t,n){return n=n===ne?1:eu(n),Hn(Hs(e,t),n)}function Us(e,t){var n=Ud(e)?a:Fl;return n(e,ro(t,3))}function Fs(e,t){var n=Ud(e)?u:ql;return n(e,ro(t,3))}function qs(e,t,n,r){e=xa(e)?e:Pu(e),n=n&&!r?eu(n):0;var i=e.length;return 0>n&&(n=wl(i+n,0)),Wa(e)?i>=n&&e.indexOf(t,n)>-1:!!i&&k(e,t,n)>-1}function Hs(e,t){var n=Ud(e)?h:Pr;return n(e,ro(t,3))}function Ks(e,t,n,r){return null==e?[]:(Ud(t)||(t=null==t?[]:[t]),n=r?ne:n,Ud(n)||(n=null==n?[]:[n]),Nr(e,t,n))}function Ws(e,t,n){var r=Ud(e)?f:M,i=arguments.length<3;return r(e,ro(t,4),n,i,Fl)}function Gs(e,t,n){var r=Ud(e)?g:M,i=arguments.length<3;return r(e,ro(t,4),n,i,ql)}function Js(e,t){var n=Ud(e)?l:qn;return n(e,ca(ro(t,3)))}function Qs(e){var t=xa(e)?e:Pu(e),n=t.length;return n>0?t[Fr(0,n-1)]:ne}function Ys(e,t,n){var r=-1,i=Xa(e),o=i.length,s=o-1;for(t=(n?vo(e,t,n):t===ne)?1:Sn(eu(t),0,o);++r<t;){var a=Fr(r,s),u=i[a];i[a]=i[r],i[r]=u}return i.length=t,i}function Xs(e){return Ys(e,Pe)}function Zs(e){if(null==e)return 0;if(xa(e))return Wa(e)?Q(e):e.length;var t=Zl(e);return t==Ue||t==We?e.size:Mr(e).length}function ea(e,t,n){var r=Ud(e)?v:Jr;return n&&vo(e,t,n)&&(t=ne),r(e,ro(t,3))}function ta(e,t){if("function"!=typeof t)throw new Uc(oe);return e=eu(e),function(){return--e<1?t.apply(this,arguments):void 0}}function na(e,t,n){return t=n?ne:t,t=e&&null==t?e.length:t,Ji(e,fe,ne,ne,ne,ne,t)}function ra(e,t){var n;if("function"!=typeof t)throw new Uc(oe);return e=eu(e),function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=ne),n}}function ia(e,t,n){t=n?ne:t;var r=Ji(e,de,ne,ne,ne,ne,ne,t);return r.placeholder=ia.placeholder,r}function oa(e,t,n){t=n?ne:t;var r=Ji(e,pe,ne,ne,ne,ne,ne,t);return r.placeholder=oa.placeholder,r}function sa(e,t,n){function r(t){var n=p,r=h;return p=h=ne,b=t,f=e.apply(r,n)}function i(e){return b=e,g=nd(a,t),y?r(e):f}function o(e){var n=e-v,r=e-b,i=t-n;return w?_l(i,m-r):i}function s(e){var n=e-v,r=e-b;return v===ne||n>=t||0>n||w&&r>=m}function a(){var e=Pd();return s(e)?u(e):void(g=nd(a,o(e)))}function u(e){return g=ne,_&&p?r(e):(p=h=ne,f)}function c(){g!==ne&&Gl(g),b=0,p=v=h=g=ne}function l(){return g===ne?f:u(Pd())}function d(){var e=Pd(),n=s(e);if(p=arguments,h=this,v=e,n){if(g===ne)return i(v);if(w)return g=nd(a,t),r(v)}return g===ne&&(g=nd(a,t)),f}var p,h,m,f,g,v,b=0,y=!1,w=!1,_=!0;if("function"!=typeof e)throw new Uc(oe);return t=nu(t)||0,Ia(n)&&(y=!!n.leading,w="maxWait"in n,m=w?wl(nu(n.maxWait)||0,t):m,_="trailing"in n?!!n.trailing:_),d.cancel=c,d.flush=l,d}function aa(e){return Ji(e,ve)}function ua(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Uc(oe);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new(ua.Cache||nn),n}function ca(e){if("function"!=typeof e)throw new Uc(oe);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function la(e){return ra(2,e)}function da(e,t){if("function"!=typeof e)throw new Uc(oe);return t=t===ne?t:eu(t),Kr(e,t)}function pa(e,t){if("function"!=typeof e)throw new Uc(oe);return t=t===ne?0:wl(eu(t),0),Kr(function(n){var r=n[t],i=di(n,0,t);return r&&m(i,r),o(e,this,i)})}function ha(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Uc(oe);return Ia(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),sa(e,t,{leading:r,maxWait:t,trailing:i})}function ma(e){return na(e,1)}function fa(e,t){return t=null==t?uc:t,Nd(t,e)}function ga(){if(!arguments.length)return[];var e=arguments[0];return Ud(e)?e:[e]}function va(e){return Tn(e,!1,!0)}function ba(e,t){return Tn(e,!1,!0,t)}function ya(e){return Tn(e,!0,!0)}function wa(e,t){return Tn(e,!0,!0,t)}function _a(e,t){return null==t||Pn(e,t,bu(t))}function ka(e,t){return e===t||e!==e&&t!==t}function Ca(e){return ja(e)&&Jc.call(e,"callee")&&(!al.call(e,"callee")||Xc.call(e)==De)}function xa(e){return null!=e&&Da(e.length)&&!La(e)}function ja(e){return Na(e)&&xa(e)}function Sa(e){return e===!0||e===!1||Na(e)&&Xc.call(e)==Ne}function Ta(e){return!!e&&1===e.nodeType&&Na(e)&&!Ha(e)}function Ma(e){if(xa(e)&&(Ud(e)||"string"==typeof e||"function"==typeof e.splice||qd(e)||Ca(e)))return!e.length;var t=Zl(e);if(t==Ue||t==We)return!e.size;if(Ll||ko(e))return!yl(e).length;for(var n in e)if(Jc.call(e,n))return!1;return!0}function Ba(e,t){return yr(e,t)}function Oa(e,t,n){n="function"==typeof n?n:ne;var r=n?n(e,t):ne;return r===ne?yr(e,t,n):!!r}function Pa(e){return Na(e)?Xc.call(e)==$e||"string"==typeof e.message&&"string"==typeof e.name:!1}function Ea(e){return"number"==typeof e&&vl(e)}function La(e){var t=Ia(e)?Xc.call(e):"";return t==Re||t==ze}function Aa(e){return"number"==typeof e&&e==eu(e)}function Da(e){return"number"==typeof e&&e>-1&&e%1==0&&Me>=e}function Ia(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Na(e){return!!e&&"object"==typeof e}function Va(e,t){return e===t||kr(e,t,oo(t))}function $a(e,t,n){return n="function"==typeof n?n:ne,kr(e,t,oo(t),n)}function Ra(e){return qa(e)&&e!=+e}function za(e){if(ed(e))throw new Ic("This method is not supported with core-js. Try https://github.com/es-shims.");return Cr(e)}function Ua(e){return null===e}function Fa(e){return null==e}function qa(e){return"number"==typeof e||Na(e)&&Xc.call(e)==Fe}function Ha(e){if(!Na(e)||Xc.call(e)!=qe||F(e))return!1;var t=il(e);if(null===t)return!0;var n=Jc.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Gc.call(n)==Yc}function Ka(e){return Aa(e)&&e>=-Me&&Me>=e}function Wa(e){return"string"==typeof e||!Ud(e)&&Na(e)&&Xc.call(e)==Ge}function Ga(e){return"symbol"==typeof e||Na(e)&&Xc.call(e)==Je}function Ja(e){return e===ne}function Qa(e){return Na(e)&&Zl(e)==Qe}function Ya(e){return Na(e)&&Xc.call(e)==Ye}function Xa(e){if(!e)return[];if(xa(e))return Wa(e)?Y(e):xi(e);if(ol&&e[ol])return q(e[ol]());var t=Zl(e),n=t==Ue?H:t==We?G:Pu;return n(e)}function Za(e){if(!e)return 0===e?e:0;if(e=nu(e),e===Te||e===-Te){var t=0>e?-1:1;return t*Be}return e===e?e:0}function eu(e){var t=Za(e),n=t%1;return t===t?n?t-n:t:0}function tu(e){return e?Sn(eu(e),0,Pe):0}function nu(e){if("number"==typeof e)return e;if(Ga(e))return Oe;if(Ia(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ia(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(jt,"");var n=Nt.test(e);return n||$t.test(e)?Fn(e.slice(2),n?2:8):It.test(e)?Oe:+e}function ru(e){return ji(e,yu(e))}function iu(e){return Sn(eu(e),-Me,Me)}function ou(e){return null==e?"":ei(e)}function su(e,t){var n=En(e);return t?xn(n,t):n}function au(e,t){return w(e,ro(t,3),Wn)}function uu(e,t){return w(e,ro(t,3),Gn)}function cu(e,t){return null==e?e:Hl(e,ro(t,3),yu)}function lu(e,t){return null==e?e:Kl(e,ro(t,3),yu)}function du(e,t){return e&&Wn(e,ro(t,3))}function pu(e,t){return e&&Gn(e,ro(t,3))}function hu(e){return null==e?[]:Qn(e,bu(e))}function mu(e){return null==e?[]:Qn(e,yu(e))}function fu(e,t,n){var r=null==e?ne:Yn(e,t);return r===ne?n:r}function gu(e,t){return null!=e&&co(e,t,dr)}function vu(e,t){return null!=e&&co(e,t,pr)}function bu(e){return xa(e)?bn(e):Mr(e)}function yu(e){return xa(e)?bn(e,!0):Br(e)}function wu(e,t){var n={};return t=ro(t,3),Wn(e,function(e,r,i){n[t(e,r,i)]=e}),n}function _u(e,t){var n={};return t=ro(t,3),Wn(e,function(e,r,i){n[r]=t(e,r,i)}),n}function ku(e,t){return Cu(e,ca(ro(t)))}function Cu(e,t){return null==e?{}:$r(e,eo(e),ro(t))}function xu(e,t,n){t=bo(t,e)?[t]:li(t);var r=-1,i=t.length;for(i||(e=ne,i=1);++r<i;){var o=null==e?ne:e[Oo(t[r])];o===ne&&(r=i,o=n),e=La(o)?o.call(e):o}return e}function ju(e,t,n){return null==e?e:Wr(e,t,n)}function Su(e,t,n,r){return r="function"==typeof r?r:ne,null==e?e:Wr(e,t,n,r)}function Tu(e,t,n){var r=Ud(e)||Jd(e);if(t=ro(t,4),null==n)if(r||Ia(e)){var i=e.constructor;n=r?Ud(e)?new i:[]:La(i)?En(il(e)):{}}else n={};return(r?a:Wn)(e,function(e,r,i){return t(n,e,r,i)}),n}function Mu(e,t){return null==e?!0:ni(e,t)}function Bu(e,t,n){return null==e?e:ri(e,t,ci(n))}function Ou(e,t,n,r){return r="function"==typeof r?r:ne,null==e?e:ri(e,t,ci(n),r)}function Pu(e){return e?A(e,bu(e)):[]}function Eu(e){return null==e?[]:A(e,yu(e))}function Lu(e,t,n){return n===ne&&(n=t,t=ne),n!==ne&&(n=nu(n),n=n===n?n:0),t!==ne&&(t=nu(t),t=t===t?t:0),Sn(nu(e),t,n)}function Au(e,t,n){return t=Za(t),n===ne?(n=t,t=0):n=Za(n),e=nu(e),hr(e,t,n)}function Du(e,t,n){if(n&&"boolean"!=typeof n&&vo(e,t,n)&&(t=n=ne),n===ne&&("boolean"==typeof t?(n=t,t=ne):"boolean"==typeof e&&(n=e,e=ne)),e===ne&&t===ne?(e=0,t=1):(e=Za(e),t===ne?(t=e,e=0):t=Za(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Cl();return _l(e+i*(t-e+Un("1e-"+((i+"").length-1))),t)}return Fr(e,t)}function Iu(e){return _p(ou(e).toLowerCase())}function Nu(e){return e=ou(e),e&&e.replace(zt,or).replace(Bn,"")}function Vu(e,t,n){e=ou(e),t=ei(t);var r=e.length;n=n===ne?r:Sn(eu(n),0,r);var i=n;return n-=t.length,n>=0&&e.slice(n,i)==t}function $u(e){return e=ou(e),e&&ft.test(e)?e.replace(ht,sr):e}function Ru(e){return e=ou(e),e&&xt.test(e)?e.replace(Ct,"\\$&"):e}function zu(e,t,n){e=ou(e),t=eu(t);var r=t?Q(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ui(ml(i),n)+e+Ui(hl(i),n)}function Uu(e,t,n){e=ou(e),t=eu(t);var r=t?Q(e):0;return t&&t>r?e+Ui(t-r,n):e}function Fu(e,t,n){e=ou(e),t=eu(t);var r=t?Q(e):0;return t&&t>r?Ui(t-r,n)+e:e}function qu(e,t,n){return n||null==t?t=0:t&&(t=+t),e=ou(e).replace(jt,""),kl(e,t||(Dt.test(e)?16:10))}function Hu(e,t,n){return t=(n?vo(e,t,n):t===ne)?1:eu(t),Hr(ou(e),t)}function Ku(){var e=arguments,t=ou(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function Wu(e,t,n){return n&&"number"!=typeof n&&vo(e,t,n)&&(t=n=ne),(n=n===ne?Pe:n>>>0)?(e=ou(e),e&&("string"==typeof t||null!=t&&!Wd(t))&&(t=ei(t),!t&&z(e))?di(Y(e),0,n):e.split(t,n)):[]}function Gu(e,t,n){return e=ou(e),n=Sn(eu(n),0,e.length),t=ei(t),e.slice(n,n+t.length)==t}function Ju(e,t,r){var i=n.templateSettings;r&&vo(e,t,r)&&(t=ne),e=ou(e),t=ep({},t,i,yn);var o,s,a=ep({},t.imports,i.imports,yn),u=bu(a),c=A(a,u),l=0,d=t.interpolate||Ut,p="__p += '",h=Rc((t.escape||Ut).source+"|"+d.source+"|"+(d===bt?Lt:Ut).source+"|"+(t.evaluate||Ut).source+"|$","g"),m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Dn+"]")+"\n";e.replace(h,function(t,n,r,i,a,u){return r||(r=i),p+=e.slice(l,u).replace(Ft,$),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),p+="';\n";var f=t.variable;f||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(ct,""):p).replace(lt,"$1").replace(dt,"$1;"),p="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var g=kp(function(){return Nc(u,m+"return "+p).apply(ne,c)});if(g.source=p,Pa(g))throw g;return g}function Qu(e){return ou(e).toLowerCase()}function Yu(e){return ou(e).toUpperCase()}function Xu(e,t,n){if(e=ou(e),e&&(n||t===ne))return e.replace(jt,"");if(!e||!(t=ei(t)))return e;var r=Y(e),i=Y(t),o=I(r,i),s=N(r,i)+1;return di(r,o,s).join("")}function Zu(e,t,n){if(e=ou(e),e&&(n||t===ne))return e.replace(Tt,"");if(!e||!(t=ei(t)))return e;var r=Y(e),i=N(r,Y(t))+1;return di(r,0,i).join("")}function ec(e,t,n){if(e=ou(e),e&&(n||t===ne))return e.replace(St,"");if(!e||!(t=ei(t)))return e;var r=Y(e),i=I(r,Y(t));return di(r,i).join("")}function tc(e,t){var n=we,r=_e;if(Ia(t)){var i="separator"in t?t.separator:i;n="length"in t?eu(t.length):n,r="omission"in t?ei(t.omission):r}e=ou(e);var o=e.length;if(z(e)){var s=Y(e);o=s.length}if(n>=o)return e;var a=n-Q(r);if(1>a)return r;var u=s?di(s,0,a).join(""):e.slice(0,a);if(i===ne)return u+r;if(s&&(a+=u.length-a),Wd(i)){if(e.slice(a).search(i)){var c,l=u;for(i.global||(i=Rc(i.source,ou(At.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var d=c.index;u=u.slice(0,d===ne?a:d)}}else if(e.indexOf(ei(i),a)!=a){var p=u.lastIndexOf(i);p>-1&&(u=u.slice(0,p))}return u+r}function nc(e){return e=ou(e),e&&mt.test(e)?e.replace(pt,ar):e}function rc(e,t,n){return e=ou(e),t=n?ne:t,t===ne?U(e)?ee(e):y(e):e.match(t)||[]}function ic(e){var t=e?e.length:0,n=ro();return e=t?h(e,function(e){if("function"!=typeof e[1])throw new Uc(oe);return[n(e[0]),e[1]]}):[],Kr(function(n){for(var r=-1;++r<t;){var i=e[r];if(o(i[0],this,n))return o(i[1],this,n)}})}function oc(e){return On(Tn(e,!0))}function sc(e){return function(){return e}}function ac(e,t){return null==e||e!==e?t:e}function uc(e){return e}function cc(e){return Tr("function"==typeof e?e:Tn(e,!0))}function lc(e){return Er(Tn(e,!0))}function dc(e,t){return Lr(e,Tn(t,!0))}function pc(e,t,n){var r=bu(t),i=Qn(t,r);null!=n||Ia(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Qn(t,bu(t)));var o=!(Ia(n)&&"chain"in n&&!n.chain),s=La(e);return a(i,function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=xi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,m([this.value()],arguments))})}),e}function hc(){return Kn._===this&&(Kn._=Zc),this}function mc(){}function fc(e){return e=eu(e),Kr(function(t){return Ir(t,e)})}function gc(e){return bo(e)?S(Oo(e)):Rr(e)}function vc(e){return function(t){return null==e?ne:Yn(e,t)}}function bc(){return[]}function yc(){return!1}function wc(){return{}}function _c(){return""}function kc(){return!0}function Cc(e,t){if(e=eu(e),1>e||e>Me)return[];var n=Pe,r=_l(e,Pe);t=ro(t),e-=Pe;for(var i=P(r,t);++n<e;)t(n);return i}function xc(e){return Ud(e)?h(e,Oo):Ga(e)?[e]:xi(id(e))}function jc(e){var t=++Qc;return ou(e)+t}function Sc(e){return e&&e.length?Rn(e,uc,lr):ne}function Tc(e,t){return e&&e.length?Rn(e,ro(t,2),lr):ne}function Mc(e){return j(e,uc)}function Bc(e,t){return j(e,ro(t,2))}function Oc(e){return e&&e.length?Rn(e,uc,Or):ne}function Pc(e,t){return e&&e.length?Rn(e,ro(t,2),Or):ne}function Ec(e){return e&&e.length?O(e,uc):0}function Lc(e,t){return e&&e.length?O(e,ro(t,2)):0}t=t?ur.defaults(Kn.Object(),t,ur.pick(Kn,An)):Kn;var Ac=t.Array,Dc=t.Date,Ic=t.Error,Nc=t.Function,Vc=t.Math,$c=t.Object,Rc=t.RegExp,zc=t.String,Uc=t.TypeError,Fc=Ac.prototype,qc=Nc.prototype,Hc=$c.prototype,Kc=t["__core-js_shared__"],Wc=function(){var e=/[^.]+$/.exec(Kc&&Kc.keys&&Kc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Gc=qc.toString,Jc=Hc.hasOwnProperty,Qc=0,Yc=Gc.call($c),Xc=Hc.toString,Zc=Kn._,el=Rc("^"+Gc.call(Jc).replace(Ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tl=Jn?t.Buffer:ne,nl=t.Symbol,rl=t.Uint8Array,il=K($c.getPrototypeOf,$c),ol=nl?nl.iterator:ne,sl=$c.create,al=Hc.propertyIsEnumerable,ul=Fc.splice,cl=nl?nl.isConcatSpreadable:ne,ll=t.clearTimeout!==Kn.clearTimeout&&t.clearTimeout,dl=Dc&&Dc.now!==Kn.Date.now&&Dc.now,pl=t.setTimeout!==Kn.setTimeout&&t.setTimeout,hl=Vc.ceil,ml=Vc.floor,fl=$c.getOwnPropertySymbols,gl=tl?tl.isBuffer:ne,vl=t.isFinite,bl=Fc.join,yl=K($c.keys,$c),wl=Vc.max,_l=Vc.min,kl=t.parseInt,Cl=Vc.random,xl=Fc.reverse,jl=so(t,"DataView"),Sl=so(t,"Map"),Tl=so(t,"Promise"),Ml=so(t,"Set"),Bl=so(t,"WeakMap"),Ol=so($c,"create"),Pl=function(){var e=so($c,"defineProperty"),t=so.name;return t&&t.length>2?e:ne}(),El=Bl&&new Bl,Ll=!al.call({valueOf:1},"valueOf"),Al={},Dl=Po(jl),Il=Po(Sl),Nl=Po(Tl),Vl=Po(Ml),$l=Po(Bl),Rl=nl?nl.prototype:ne,zl=Rl?Rl.valueOf:ne,Ul=Rl?Rl.toString:ne;n.templateSettings={escape:gt,evaluate:vt,interpolate:bt,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,b.prototype=En(r.prototype),b.prototype.constructor=b,T.prototype=En(r.prototype),T.prototype.constructor=T,qt.prototype.clear=Ht,qt.prototype.delete=Kt,qt.prototype.get=Wt,qt.prototype.has=Gt,qt.prototype.set=Jt,Qt.prototype.clear=Yt,Qt.prototype.delete=Xt,Qt.prototype.get=Zt,Qt.prototype.has=en,Qt.prototype.set=tn,nn.prototype.clear=rn,nn.prototype.delete=on,nn.prototype.get=sn,nn.prototype.has=an,nn.prototype.set=un,cn.prototype.add=cn.prototype.push=ln,cn.prototype.has=dn,pn.prototype.clear=hn,pn.prototype.delete=mn,pn.prototype.get=fn,pn.prototype.has=gn,pn.prototype.set=vn;var Fl=Bi(Wn),ql=Bi(Gn,!0),Hl=Oi(),Kl=Oi(!0),Wl=El?function(e,t){return El.set(e,t),e}:uc,Gl=ll||function(e){return Kn.clearTimeout(e)},Jl=Ml&&1/G(new Ml([,-0]))[1]==Te?function(e){return new Ml(e)}:mc,Ql=El?function(e){return El.get(e)}:mc,Yl=fl?K(fl,$c):bc,Xl=fl?function(e){for(var t=[];e;)m(t,Yl(e)),e=il(e);return t}:bc,Zl=cr;(jl&&Zl(new jl(new ArrayBuffer(1)))!=Ze||Sl&&Zl(new Sl)!=Ue||Tl&&Zl(Tl.resolve())!=He||Ml&&Zl(new Ml)!=We||Bl&&Zl(new Bl)!=Qe)&&(Zl=function(e){var t=Xc.call(e),n=t==qe?e.constructor:ne,r=n?Po(n):ne;if(r)switch(r){case Dl:return Ze;case Il:return Ue;case Nl:return He;case Vl:return We;case $l:return Qe}return t});var ed=Kc?La:yc,td=function(){var e=0,t=0;return function(n,r){var i=Pd(),o=Ce-(i-t);if(t=i,o>0){if(++e>=ke)return n}else e=0;return Wl(n,r)}}(),nd=pl||function(e,t){return Kn.setTimeout(e,t)},rd=Pl?function(e,t,n){var r=t+"";return Pl(e,"toString",{configurable:!0,enumerable:!1,value:sc(mo(r,Eo(uo(r),n)))})}:uc,id=ua(function(e){e=ou(e);var t=[];return _t.test(e)&&t.push(""),e.replace(kt,function(e,n,r,i){t.push(r?i.replace(Et,"$1"):n||e)}),t}),od=Kr(function(e,t){return ja(e)?Vn(e,Hn(t,1,ja,!0)):[]}),sd=Kr(function(e,t){var n=Xo(t);return ja(n)&&(n=ne),ja(e)?Vn(e,Hn(t,1,ja,!0),ro(n,2)):[]}),ad=Kr(function(e,t){var n=Xo(t);return ja(n)&&(n=ne),ja(e)?Vn(e,Hn(t,1,ja,!0),ne,n):[]}),ud=Kr(function(e){var t=h(e,ui);return t.length&&t[0]===e[0]?mr(t):[]}),cd=Kr(function(e){var t=Xo(e),n=h(e,ui);return t===Xo(n)?t=ne:n.pop(),n.length&&n[0]===e[0]?mr(n,ro(t,2)):[]}),ld=Kr(function(e){var t=Xo(e),n=h(e,ui);return t===Xo(n)?t=ne:n.pop(),n.length&&n[0]===e[0]?mr(n,ne,t):[]}),dd=Kr(ts),pd=Kr(function(e,t){t=Hn(t,1);var n=e?e.length:0,r=jn(e,t);return Ur(e,h(t,function(e){return go(e,n)?+e:e}).sort(wi)),r}),hd=Kr(function(e){return ti(Hn(e,1,ja,!0))}),md=Kr(function(e){var t=Xo(e);return ja(t)&&(t=ne),ti(Hn(e,1,ja,!0),ro(t,2))}),fd=Kr(function(e){var t=Xo(e);return ja(t)&&(t=ne),ti(Hn(e,1,ja,!0),ne,t)}),gd=Kr(function(e,t){return ja(e)?Vn(e,t):[]}),vd=Kr(function(e){return si(l(e,ja))}),bd=Kr(function(e){var t=Xo(e);return ja(t)&&(t=ne),si(l(e,ja),ro(t,2))}),yd=Kr(function(e){var t=Xo(e);return ja(t)&&(t=ne),si(l(e,ja),ne,t)}),wd=Kr(Cs),_d=Kr(function(e){var t=e.length,n=t>1?e[t-1]:ne;return n="function"==typeof n?(e.pop(),n):ne,xs(e,n)}),kd=Kr(function(e){e=Hn(e,1);var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return jn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof T&&go(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Bs,args:[i],thisArg:ne}),new b(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(ne),e})):this.thru(i)}),Cd=Ti(function(e,t,n){Jc.call(e,n)?++e[n]:e[n]=1}),xd=Ii(Uo),jd=Ii(Fo),Sd=Ti(function(e,t,n){Jc.call(e,n)?e[n].push(t):e[n]=[t]}),Td=Kr(function(e,t,n){var r=-1,i="function"==typeof t,s=bo(t),a=xa(e)?Ac(e.length):[];return Fl(e,function(e){var u=i?t:s&&null!=e?e[t]:ne;a[++r]=u?o(u,e,n):gr(e,t,n)}),a}),Md=Ti(function(e,t,n){e[n]=t}),Bd=Ti(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Od=Kr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&vo(e,t[0],t[1])?t=[]:n>2&&vo(t[0],t[1],t[2])&&(t=[t[0]]),Nr(e,Hn(t,1),[])}),Pd=dl||function(){return Kn.Date.now()},Ed=Kr(function(e,t,n){var r=ue;if(n.length){var i=W(n,no(Ed));r|=he}return Ji(e,r,t,n,i)}),Ld=Kr(function(e,t,n){var r=ue|ce;if(n.length){var i=W(n,no(Ld));r|=he}return Ji(t,r,e,n,i)}),Ad=Kr(function(e,t){return Ln(e,1,t)}),Dd=Kr(function(e,t,n){return Ln(e,nu(t)||0,n)});ua.Cache=nn;var Id=Kr(function(e,t){t=1==t.length&&Ud(t[0])?h(t[0],L(ro())):h(Hn(t,1),L(ro()));var n=t.length;return Kr(function(r){for(var i=-1,s=_l(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return o(e,this,r)})}),Nd=Kr(function(e,t){var n=W(t,no(Nd));return Ji(e,he,ne,t,n)}),Vd=Kr(function(e,t){var n=W(t,no(Vd));return Ji(e,me,ne,t,n)}),$d=Kr(function(e,t){return Ji(e,ge,ne,ne,ne,Hn(t,1))}),Rd=Hi(lr),zd=Hi(function(e,t){return e>=t}),Ud=Ac.isArray,Fd=Xn?L(Xn):vr,qd=gl||yc,Hd=Zn?L(Zn):br,Kd=er?L(er):_r,Wd=tr?L(tr):xr,Gd=nr?L(nr):jr,Jd=rr?L(rr):Sr,Qd=Hi(Or),Yd=Hi(function(e,t){return t>=e}),Xd=Mi(function(e,t){if(Ll||ko(t)||xa(t))return void ji(t,bu(t),e);for(var n in t)Jc.call(t,n)&&_n(e,n,t[n])}),Zd=Mi(function(e,t){ji(t,yu(t),e)}),ep=Mi(function(e,t,n,r){ji(t,yu(t),e,r)}),tp=Mi(function(e,t,n,r){ji(t,bu(t),e,r)}),np=Kr(function(e,t){return jn(e,Hn(t,1))}),rp=Kr(function(e){return e.push(ne,yn),o(ep,ne,e)}),ip=Kr(function(e){return e.push(ne,So),o(cp,ne,e)}),op=$i(function(e,t,n){e[t]=n},sc(uc)),sp=$i(function(e,t,n){Jc.call(e,t)?e[t].push(n):e[t]=[n]},ro),ap=Kr(gr),up=Mi(function(e,t,n){Ar(e,t,n)}),cp=Mi(function(e,t,n,r){Ar(e,t,n,r)}),lp=Kr(function(e,t){return null==e?{}:(t=h(Hn(t,1),Oo),Vr(e,Vn(eo(e),t)))}),dp=Kr(function(e,t){return null==e?{}:Vr(e,h(Hn(t,1),Oo))}),pp=Gi(bu),hp=Gi(yu),mp=Li(function(e,t,n){return t=t.toLowerCase(),e+(n?Iu(t):t)}),fp=Li(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),gp=Li(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),vp=Ei("toLowerCase"),bp=Li(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),yp=Li(function(e,t,n){return e+(n?" ":"")+_p(t)}),wp=Li(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),_p=Ei("toUpperCase"),kp=Kr(function(e,t){try{return o(e,ne,t)}catch(e){return Pa(e)?e:new Ic(e)}}),Cp=Kr(function(e,t){return a(Hn(t,1),function(t){t=Oo(t),e[t]=Ed(e[t],e)}),e}),xp=Ni(),jp=Ni(!0),Sp=Kr(function(e,t){return function(n){return gr(n,e,t)}}),Tp=Kr(function(e,t){return function(n){return gr(e,n,t)}}),Mp=zi(h),Bp=zi(c),Op=zi(v),Pp=qi(),Ep=qi(!0),Lp=Ri(function(e,t){return e+t},0),Ap=Wi("ceil"),Dp=Ri(function(e,t){return e/t},1),Ip=Wi("floor"),Np=Ri(function(e,t){return e*t},1),Vp=Wi("round"),$p=Ri(function(e,t){return e-t},0);return n.after=ta,n.ary=na,n.assign=Xd,n.assignIn=Zd,n.assignInWith=ep,n.assignWith=tp,n.at=np,n.before=ra,n.bind=Ed,n.bindAll=Cp,n.bindKey=Ld,n.castArray=ga,n.chain=Ts,n.chunk=Ao,n.compact=Do,n.concat=Io,n.cond=ic,n.conforms=oc,n.constant=sc,n.countBy=Cd,n.create=su,n.curry=ia,n.curryRight=oa,n.debounce=sa,n.defaults=rp,n.defaultsDeep=ip,n.defer=Ad,n.delay=Dd,n.difference=od,n.differenceBy=sd,n.differenceWith=ad,n.drop=No,n.dropRight=Vo,n.dropRightWhile=$o,n.dropWhile=Ro,n.fill=zo,n.filter=Vs,n.flatMap=$s,n.flatMapDeep=Rs,n.flatMapDepth=zs,n.flatten=qo,n.flattenDeep=Ho,n.flattenDepth=Ko,n.flip=aa,n.flow=xp,n.flowRight=jp,n.fromPairs=Wo,n.functions=hu,n.functionsIn=mu,n.groupBy=Sd,n.initial=Qo,n.intersection=ud,n.intersectionBy=cd,n.intersectionWith=ld,n.invert=op,n.invertBy=sp,n.invokeMap=Td,n.iteratee=cc,n.keyBy=Md,n.keys=bu,n.keysIn=yu,n.map=Hs,n.mapKeys=wu,n.mapValues=_u,n.matches=lc,n.matchesProperty=dc,n.memoize=ua,n.merge=up,n.mergeWith=cp,n.method=Sp,n.methodOf=Tp,n.mixin=pc,n.negate=ca,n.nthArg=fc,n.omit=lp,n.omitBy=ku,n.once=la,n.orderBy=Ks,n.over=Mp,n.overArgs=Id,n.overEvery=Bp,n.overSome=Op,n.partial=Nd,n.partialRight=Vd,n.partition=Bd,n.pick=dp,n.pickBy=Cu,n.property=gc,n.propertyOf=vc,n.pull=dd,n.pullAll=ts,n.pullAllBy=ns,n.pullAllWith=rs,n.pullAt=pd,n.range=Pp,n.rangeRight=Ep,n.rearg=$d,n.reject=Js,n.remove=is,n.rest=da,n.reverse=os,n.sampleSize=Ys,n.set=ju,n.setWith=Su,n.shuffle=Xs,n.slice=ss,n.sortBy=Od,n.sortedUniq=hs,n.sortedUniqBy=ms,n.split=Wu,n.spread=pa,n.tail=fs,n.take=gs,n.takeRight=vs,n.takeRightWhile=bs,n.takeWhile=ys,n.tap=Ms,n.throttle=ha,n.thru=Bs,n.toArray=Xa,n.toPairs=pp,n.toPairsIn=hp,n.toPath=xc,n.toPlainObject=ru,n.transform=Tu,n.unary=ma,n.union=hd,n.unionBy=md,n.unionWith=fd,n.uniq=ws,n.uniqBy=_s,n.uniqWith=ks,n.unset=Mu,n.unzip=Cs,n.unzipWith=xs,n.update=Bu,n.updateWith=Ou,n.values=Pu,n.valuesIn=Eu,n.without=gd,n.words=rc,n.wrap=fa,n.xor=vd,n.xorBy=bd,n.xorWith=yd,n.zip=wd,n.zipObject=js,
n.zipObjectDeep=Ss,n.zipWith=_d,n.entries=pp,n.entriesIn=hp,n.extend=Zd,n.extendWith=ep,pc(n,n),n.add=Lp,n.attempt=kp,n.camelCase=mp,n.capitalize=Iu,n.ceil=Ap,n.clamp=Lu,n.clone=va,n.cloneDeep=ya,n.cloneDeepWith=wa,n.cloneWith=ba,n.conformsTo=_a,n.deburr=Nu,n.defaultTo=ac,n.divide=Dp,n.endsWith=Vu,n.eq=ka,n.escape=$u,n.escapeRegExp=Ru,n.every=Ns,n.find=xd,n.findIndex=Uo,n.findKey=au,n.findLast=jd,n.findLastIndex=Fo,n.findLastKey=uu,n.floor=Ip,n.forEach=Us,n.forEachRight=Fs,n.forIn=cu,n.forInRight=lu,n.forOwn=du,n.forOwnRight=pu,n.get=fu,n.gt=Rd,n.gte=zd,n.has=gu,n.hasIn=vu,n.head=Go,n.identity=uc,n.includes=qs,n.indexOf=Jo,n.inRange=Au,n.invoke=ap,n.isArguments=Ca,n.isArray=Ud,n.isArrayBuffer=Fd,n.isArrayLike=xa,n.isArrayLikeObject=ja,n.isBoolean=Sa,n.isBuffer=qd,n.isDate=Hd,n.isElement=Ta,n.isEmpty=Ma,n.isEqual=Ba,n.isEqualWith=Oa,n.isError=Pa,n.isFinite=Ea,n.isFunction=La,n.isInteger=Aa,n.isLength=Da,n.isMap=Kd,n.isMatch=Va,n.isMatchWith=$a,n.isNaN=Ra,n.isNative=za,n.isNil=Fa,n.isNull=Ua,n.isNumber=qa,n.isObject=Ia,n.isObjectLike=Na,n.isPlainObject=Ha,n.isRegExp=Wd,n.isSafeInteger=Ka,n.isSet=Gd,n.isString=Wa,n.isSymbol=Ga,n.isTypedArray=Jd,n.isUndefined=Ja,n.isWeakMap=Qa,n.isWeakSet=Ya,n.join=Yo,n.kebabCase=fp,n.last=Xo,n.lastIndexOf=Zo,n.lowerCase=gp,n.lowerFirst=vp,n.lt=Qd,n.lte=Yd,n.max=Sc,n.maxBy=Tc,n.mean=Mc,n.meanBy=Bc,n.min=Oc,n.minBy=Pc,n.stubArray=bc,n.stubFalse=yc,n.stubObject=wc,n.stubString=_c,n.stubTrue=kc,n.multiply=Np,n.nth=es,n.noConflict=hc,n.noop=mc,n.now=Pd,n.pad=zu,n.padEnd=Uu,n.padStart=Fu,n.parseInt=qu,n.random=Du,n.reduce=Ws,n.reduceRight=Gs,n.repeat=Hu,n.replace=Ku,n.result=xu,n.round=Vp,n.runInContext=te,n.sample=Qs,n.size=Zs,n.snakeCase=bp,n.some=ea,n.sortedIndex=as,n.sortedIndexBy=us,n.sortedIndexOf=cs,n.sortedLastIndex=ls,n.sortedLastIndexBy=ds,n.sortedLastIndexOf=ps,n.startCase=yp,n.startsWith=Gu,n.subtract=$p,n.sum=Ec,n.sumBy=Lc,n.template=Ju,n.times=Cc,n.toFinite=Za,n.toInteger=eu,n.toLength=tu,n.toLower=Qu,n.toNumber=nu,n.toSafeInteger=iu,n.toString=ou,n.toUpper=Yu,n.trim=Xu,n.trimEnd=Zu,n.trimStart=ec,n.truncate=tc,n.unescape=nc,n.uniqueId=jc,n.upperCase=wp,n.upperFirst=_p,n.each=Us,n.eachRight=Fs,n.first=Go,pc(n,function(){var e={};return Wn(n,function(t,r){Jc.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION=re,a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),a(["drop","take"],function(e,t){T.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new T(this);n=n===ne?1:wl(eu(n),0);var i=this.clone();return r?i.__takeCount__=_l(n,i.__takeCount__):i.__views__.push({size:_l(n,Pe),type:e+(i.__dir__<0?"Right":"")}),i},T.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),a(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==xe||n==Se;T.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ro(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),a(["head","last"],function(e,t){var n="take"+(t?"Right":"");T.prototype[e]=function(){return this[n](1).value()[0]}}),a(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");T.prototype[e]=function(){return this.__filtered__?new T(this):this[n](1)}}),T.prototype.compact=function(){return this.filter(uc)},T.prototype.find=function(e){return this.filter(e).head()},T.prototype.findLast=function(e){return this.reverse().find(e)},T.prototype.invokeMap=Kr(function(e,t){return"function"==typeof e?new T(this):this.map(function(n){return gr(n,e,t)})}),T.prototype.reject=function(e){return this.filter(ca(ro(e)))},T.prototype.slice=function(e,t){e=eu(e);var n=this;return n.__filtered__&&(e>0||0>t)?new T(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ne&&(t=eu(t),n=0>t?n.dropRight(-t):n.take(t-e)),n)},T.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},T.prototype.toArray=function(){return this.take(Pe)},Wn(T.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=n[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);o&&(n.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,u=t instanceof T,c=a[0],l=u||Ud(t),d=function(e){var t=o.apply(n,m([e],a));return i&&p?t[0]:t};l&&r&&"function"==typeof c&&1!=c.length&&(u=l=!1);var p=this.__chain__,h=!!this.__actions__.length,f=s&&!p,g=u&&!h;if(!s&&l){t=g?t:new T(this);var v=e.apply(t,a);return v.__actions__.push({func:Bs,args:[d],thisArg:ne}),new b(v,p)}return f&&g?e.apply(this,a):(v=this.thru(d),f?i?v.value()[0]:v.value():v)})}),a(["pop","push","shift","sort","splice","unshift"],function(e){var t=Fc[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(Ud(n)?n:[],e)}return this[r](function(n){return t.apply(Ud(n)?n:[],e)})}}),Wn(T.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"",o=Al[i]||(Al[i]=[]);o.push({name:t,func:r})}}),Al[Vi(ne,ce).name]=[{name:"wrapper",func:ne}],T.prototype.clone=X,T.prototype.reverse=Z,T.prototype.value=Pt,n.prototype.at=kd,n.prototype.chain=Os,n.prototype.commit=Ps,n.prototype.next=Es,n.prototype.plant=As,n.prototype.reverse=Ds,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=Is,n.prototype.first=n.prototype.head,ol&&(n.prototype[ol]=Ls),n}var ne,re="4.15.0",ie=200,oe="Expected a function",se="__lodash_hash_undefined__",ae="__lodash_placeholder__",ue=1,ce=2,le=4,de=8,pe=16,he=32,me=64,fe=128,ge=256,ve=512,be=1,ye=2,we=30,_e="...",ke=150,Ce=16,xe=1,je=2,Se=3,Te=1/0,Me=9007199254740991,Be=1.7976931348623157e308,Oe=NaN,Pe=4294967295,Ee=Pe-1,Le=Pe>>>1,Ae=[["ary",fe],["bind",ue],["bindKey",ce],["curry",de],["curryRight",pe],["flip",ve],["partial",he],["partialRight",me],["rearg",ge]],De="[object Arguments]",Ie="[object Array]",Ne="[object Boolean]",Ve="[object Date]",$e="[object Error]",Re="[object Function]",ze="[object GeneratorFunction]",Ue="[object Map]",Fe="[object Number]",qe="[object Object]",He="[object Promise]",Ke="[object RegExp]",We="[object Set]",Ge="[object String]",Je="[object Symbol]",Qe="[object WeakMap]",Ye="[object WeakSet]",Xe="[object ArrayBuffer]",Ze="[object DataView]",et="[object Float32Array]",tt="[object Float64Array]",nt="[object Int8Array]",rt="[object Int16Array]",it="[object Int32Array]",ot="[object Uint8Array]",st="[object Uint8ClampedArray]",at="[object Uint16Array]",ut="[object Uint32Array]",ct=/\b__p \+= '';/g,lt=/\b(__p \+=) '' \+/g,dt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39|#96);/g,ht=/[&<>"'`]/g,mt=RegExp(pt.source),ft=RegExp(ht.source),gt=/<%-([\s\S]+?)%>/g,vt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,yt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wt=/^\w*$/,_t=/^\./,kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ct=/[\\^$.*+?()[\]{}|]/g,xt=RegExp(Ct.source),jt=/^\s+|\s+$/g,St=/^\s+/,Tt=/\s+$/,Mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ot=/,? & /,Pt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Et=/\\(\\)?/g,Lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,At=/\w*$/,Dt=/^0x/i,It=/^[-+]0x[0-9a-f]+$/i,Nt=/^0b[01]+$/i,Vt=/^\[object .+?Constructor\]$/,$t=/^0o[0-7]+$/i,Rt=/^(?:0|[1-9]\d*)$/,zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ut=/($^)/,Ft=/['\n\r\u2028\u2029\\]/g,qt="\\ud800-\\udfff",Ht="\\u0300-\\u036f\\ufe20-\\ufe23",Kt="\\u20d0-\\u20f0",Wt="\\u2700-\\u27bf",Gt="a-z\\xdf-\\xf6\\xf8-\\xff",Jt="\\xac\\xb1\\xd7\\xf7",Qt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yt="\\u2000-\\u206f",Xt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zt="A-Z\\xc0-\\xd6\\xd8-\\xde",en="\\ufe0e\\ufe0f",tn=Jt+Qt+Yt+Xt,nn="[']",rn="["+qt+"]",on="["+tn+"]",sn="["+Ht+Kt+"]",an="\\d+",un="["+Wt+"]",cn="["+Gt+"]",ln="[^"+qt+tn+an+Wt+Gt+Zt+"]",dn="\\ud83c[\\udffb-\\udfff]",pn="(?:"+sn+"|"+dn+")",hn="[^"+qt+"]",mn="(?:\\ud83c[\\udde6-\\uddff]){2}",fn="[\\ud800-\\udbff][\\udc00-\\udfff]",gn="["+Zt+"]",vn="\\u200d",bn="(?:"+cn+"|"+ln+")",yn="(?:"+gn+"|"+ln+")",wn="(?:"+nn+"(?:d|ll|m|re|s|t|ve))?",_n="(?:"+nn+"(?:D|LL|M|RE|S|T|VE))?",kn=pn+"?",Cn="["+en+"]?",xn="(?:"+vn+"(?:"+[hn,mn,fn].join("|")+")"+Cn+kn+")*",jn=Cn+kn+xn,Sn="(?:"+[un,mn,fn].join("|")+")"+jn,Tn="(?:"+[hn+sn+"?",sn,mn,fn,rn].join("|")+")",Mn=RegExp(nn,"g"),Bn=RegExp(sn,"g"),On=RegExp(dn+"(?="+dn+")|"+Tn+jn,"g"),Pn=RegExp([gn+"?"+cn+"+"+wn+"(?="+[on,gn,"$"].join("|")+")",yn+"+"+_n+"(?="+[on,gn+bn,"$"].join("|")+")",gn+"?"+bn+"+"+wn,gn+"+"+_n,an,Sn].join("|"),"g"),En=RegExp("["+vn+qt+Ht+Kt+en+"]"),Ln=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,An=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Dn=-1,In={};In[et]=In[tt]=In[nt]=In[rt]=In[it]=In[ot]=In[st]=In[at]=In[ut]=!0,In[De]=In[Ie]=In[Xe]=In[Ne]=In[Ze]=In[Ve]=In[$e]=In[Re]=In[Ue]=In[Fe]=In[qe]=In[Ke]=In[We]=In[Ge]=In[Qe]=!1;var Nn={};Nn[De]=Nn[Ie]=Nn[Xe]=Nn[Ze]=Nn[Ne]=Nn[Ve]=Nn[et]=Nn[tt]=Nn[nt]=Nn[rt]=Nn[it]=Nn[Ue]=Nn[Fe]=Nn[qe]=Nn[Ke]=Nn[We]=Nn[Ge]=Nn[Je]=Nn[ot]=Nn[st]=Nn[at]=Nn[ut]=!0,Nn[$e]=Nn[Re]=Nn[Qe]=!1;var Vn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"ss"},$n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Rn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},zn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Un=parseFloat,Fn=parseInt,qn="object"==typeof n&&n&&n.Object===Object&&n,Hn="object"==typeof self&&self&&self.Object===Object&&self,Kn=qn||Hn||Function("return this")(),Wn="object"==typeof r&&r&&!r.nodeType&&r,Gn=Wn&&"object"==typeof t&&t&&!t.nodeType&&t,Jn=Gn&&Gn.exports===Wn,Qn=Jn&&qn.process,Yn=function(){try{return Qn&&Qn.binding("util")}catch(e){}}(),Xn=Yn&&Yn.isArrayBuffer,Zn=Yn&&Yn.isDate,er=Yn&&Yn.isMap,tr=Yn&&Yn.isRegExp,nr=Yn&&Yn.isSet,rr=Yn&&Yn.isTypedArray,ir=S("length"),or=T(Vn),sr=T($n),ar=T(Rn),ur=te();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Kn._=ur,define(function(){return ur})):Gn?((Gn.exports=ur)._=ur,Wn._=ur):Kn._=ur}).call(this)},{}],250:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=t,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var s=o;if(!e(s))return!1}return!0}},{}],251:[function(e,t,n){"use strict";var r=e(255);t.exports=new r(function(){return!0})},{}],252:[function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=e(250),o=e(255),s=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push([e[r],t[r]]);return n},a=function(e){var t=r(e,2),n=t[0],i=t[1];return n(i)},u=function(e){return"string"==typeof e},c=function(e){return"boolean"==typeof e},l=function(e){return"number"==typeof e},d=function(e){return"function"==typeof e},p=void 0,h=function(e){var t=e.map(p);return function(n){return Array.isArray(n)&&e.length===n.length&&i(a,s(t,n))}},m=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push([n,p(e[n])]);return function(e){if("object"!=typeof e)return!1;for(var n=t,i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(o>=n.length)break;s=n[o++]}else{if(o=n.next(),o.done)break;s=o.value}var a=r(s,2),u=a[0],c=a[1];if(!(u in e&&c(e[u])))return!1}return!0}};p=function(e){return e instanceof o?e.matches:e===String?u:e===Boolean?c:e===Number?l:e===Function?d:e===Array?Array.isArray:Array.isArray(e)?h(e):"object"==typeof e?m(e):"function"==typeof e?function(t){return t instanceof e}:function(t){return t===e}},t.exports=p},{}],253:[function(e,t,n){"use strict";var r=e(255),i=e(254),o=e(252),s=e(250);i.Any=e(251),i.If=function(e){return new r(e)},i.Or=function(e,t){return e=o(e),t=o(t),new r(function(n){return e(n)||t(n)})},i.And=function(e,t){return e=o(e),t=o(t),new r(function(n){return e(n)&&t(n)})};var a=function(e){return Array.isArray(e)||"undefined"!=typeof Symbol&&e[Symbol.iterator]};i.List=function(e){return new r(function(t){return a(t)&&s(o(e),t)})},i.compile=o,i.overload=i,t.exports=i},{}],254:[function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=e(252),o=e(251);t.exports=function(e){if("function"!=typeof e)throw new Error("Pass a function to pattern.");var t=[],n=function(e,n){if(0===arguments.length)throw new Error("Cannot call match without arguments.");if(1===arguments.length&&(n=e,e=o),"function"!=typeof n)throw new Error("Final argument to match must be a function implementation.");t.push([i(e),n])};return e(function(){n.apply(this,arguments)}),n=function(){throw new Error("Cannot call match outside of a pattern invocation.")},function(){for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];for(var o=t,s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var u;if(s){if(a>=o.length)break;u=o[a++]}else{if(a=o.next(),a.done)break;u=a.value}var c=r(u,2),l=c[0],d=c[1];if(l(n))return d.apply(this,n)}throw new Error("No matching pattern")}}},{}],255:[function(e,t,n){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.exports=function e(t){r(this,e),this.matches=t,Object.freeze(this)}},{}],256:[function(e,t,n){var r=Object.prototype.hasOwnProperty,i=function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return"object"!=typeof e&&(e=null),t.reduce(function(e,t){return"object"!=typeof t||null===t?e:Object.create(e,o(t))},e)},o=function(e){var t=Object.getOwnPropertyNames(e);return t.reduce(function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t},Object.create(null))},s=function(e,t){return"undefined"==typeof t&&(t=Object.prototype),a(e,t,{})},a=function(e,t,n){u(n,o(e));var r=Object.getPrototypeOf(e);return r===t||null===r?Object.create(r,n):a(r,t,n)},u=function(e,t){Object.keys(t).forEach(function(n){r.call(e,n)||(e[n]=t[n])})};t.exports=i,t.exports.getOwnPropertyDescriptorMap=o,t.exports.flatten=s},{}],257:[function(e,t,n){(function(){var e,n,r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k=[].slice,C=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};n={default:"<!DOCTYPE html>",5:"<!DOCTYPE html>",xml:'<?xml version="1.0" encoding="utf-8" ?>',transitional:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',strict:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">',frameset:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">',1.1:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">',basic:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">',mobile:'<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">',ce:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "ce-html-1.0-transitional.dtd">'},r={regular:"a abbr address article aside audio b bdi bdo blockquote body button canvas caption cite code colgroup datalist dd del details dfn div dl dt em fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup html i iframe ins kbd label legend li map mark menu meter nav noscript object ol optgroup option output p pre progress q rp rt ruby s samp section select small span strong sub summary sup table tbody td textarea tfoot th thead time title tr u ul video",raw:"style",script:"script",void:"area base br col command embed hr img input keygen link meta param source track wbr",obsolete:"applet acronym bgsound dir frameset noframes isindex listing nextid noembed plaintext rb strike xmp big blink center font marquee multicol nobr spacer tt",obsolete_void:"basefont frame"},g=function(){var e,t,n,i,o,s,a,u,c;for(t=1<=arguments.length?k.call(arguments,0):[],c=[],i=0,s=t.length;s>i;i++)for(e=t[i],u=r[e].split(" "),o=0,a=u.length;a>o;o++)n=u[o],C.call(c,n)<0&&c.push(n);return c},e=function(){function e(){this.htmlOut=null}return e.prototype.resetBuffer=function(e){var t;return null==e&&(e=null),t=this.htmlOut,this.htmlOut=e,t},e.prototype.render=function(){var e,t,n,r;r=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],t=this.resetBuffer("");try{r.apply(null,e)}finally{n=this.resetBuffer(t)}return n},e.prototype.cede=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.render.apply(this,e)},e.prototype.renderable=function(e){var t;return t=this,function(){var n,r;if(n=1<=arguments.length?k.call(arguments,0):[],null===t.htmlOut){t.htmlOut="";try{e.apply(this,n)}finally{r=t.resetBuffer()}return r}return e.apply(this,n)}},e.prototype.renderAttr=function(e,t){var n,r;return null==t?" "+e:t===!1?"":"data"===e&&"object"==typeof t?function(){var e;e=[];for(n in t)r=t[n],e.push(this.renderAttr("data-"+n,r));return e}.call(this).join(""):(t===!0&&(t=e)," "+e+"="+this.quote(this.escape(t.toString())))},e.prototype.attrOrder=["id","class"],e.prototype.renderAttrs=function(e){var t,n,r,i,o,s;for(o="",i=this.attrOrder,t=0,n=i.length;n>t;t++)r=i[t],r in e&&(o+=this.renderAttr(r,e[r]));for(r in e)s=e[r],C.call(this.attrOrder,r)>=0||(o+=this.renderAttr(r,s));return o},e.prototype.renderContents=function(){var e,t,n;if(e=arguments[0],t=2<=arguments.length?k.call(arguments,1):[],null==e);else{if("function"!=typeof e)return this.text(e);if(n=e.apply(this,t),"string"==typeof n)return this.text(n)}},e.prototype.isSelector=function(e){var t;return e.length>1&&("#"===(t=e.charAt(0))||"."===t)},e.prototype.parseSelector=function(e){var t,n,r,i,o,s,a,u;for(r=null,t=[],s=e.split("."),n=0,o=s.length;o>n;n++)u=s[n],u=u.trim(),r?t.push(u):(a=u.split("#"),i=a[0],r=a[1],""!==i&&t.push(u));return{id:r,classes:t}},e.prototype.normalizeArgs=function(e){var t,n,r,i,o,s,a,u,c,l;for(n={},l=null,i=null,a=o=0,u=e.length;u>o;a=++o)if(t=e[a],null!=t)switch(typeof t){case"string":0===a&&this.isSelector(t)?(l=t,c=this.parseSelector(t)):i=t;break;case"function":case"number":case"boolean":i=t;break;case"object":t.constructor===Object?n=t:i=t;break;default:i=t}return null!=c&&(s=c.id,r=c.classes,null!=s&&(n.id=s),(null!=r?r.length:void 0)&&(n.class&&r.push(n.class),n.class=r.join(" "))),{attrs:n,contents:i,selector:l}},e.prototype.tag=function(){var e,t,n,r,i;return i=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,this.raw("<"+i+this.renderAttrs(t)+">"),this.renderContents(n),this.raw("</"+i+">")},e.prototype.rawTag=function(){var e,t,n,r,i;return i=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,this.raw("<"+i+this.renderAttrs(t)+">"),this.raw(n),this.raw("</"+i+">")},e.prototype.scriptTag=function(){var e,t,n,r,i;return i=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,this.raw("<"+i+this.renderAttrs(t)+">"),this.renderContents(n),this.raw("</"+i+">")},e.prototype.selfClosingTag=function(){var e,t,n,r,i;if(i=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,n)throw new Error("Teacup: <"+i+"/> must not have content.  Attempted to nest "+n);return this.raw("<"+i+this.renderAttrs(t)+" />")},e.prototype.coffeescript=function(e){return this.raw('<script type="text/javascript">(function() {\n  var __slice = [].slice,\n      __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n      __hasProp = {}.hasOwnProperty,\n      __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n  ('+this.escape(e.toString())+")();\n})();</script>")},e.prototype.comment=function(e){return this.raw("<!--"+this.escape(e)+"-->")},e.prototype.doctype=function(e){return null==e&&(e=5),this.raw(n[e])},e.prototype.ie=function(e,t){return this.raw("<!--[if "+this.escape(e)+"]>"),this.renderContents(t),this.raw("<![endif]-->")},e.prototype.text=function(e){if(null==this.htmlOut)throw new Error("Teacup: can't call a tag function outside a rendering context");return this.htmlOut+=null!=e&&this.escape(e.toString())||"",null},e.prototype.raw=function(e){return null!=e?(this.htmlOut+=e,null):void 0},e.prototype.escape=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.prototype.quote=function(e){return'"'+e+'"'},e.prototype.use=function(e){return e(this)},e.prototype.tags=function(){var e,t,n,r,i,o;for(e={},t=[].concat("cede coffeescript comment component doctype escape ie normalizeArgs raw render renderable script tag text use".split(" "),g("regular","obsolete","raw","void","obsolete_void")),n=function(t){return function(n){return e[n]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],t[n].apply(t,e)}}}(this),r=0,i=t.length;i>r;r++)o=t[r],n(o);return e},e.prototype.component=function(e){return function(t){return function(){var n,r,i,o,s,a;return n=1<=arguments.length?k.call(arguments,0):[],o=t.normalizeArgs(n),a=o.selector,r=o.attrs,i=o.contents,s=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],e.unshift(i),t.renderContents.apply(t,e)},e.apply(t,[a,r,s])}}(this)},e}(),v=g("regular","obsolete"),i=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.tag.apply(this,[t].concat(k.call(e)))}};for(u=0,d=v.length;d>u;u++)_=v[u],i(_);for(b=g("raw"),o=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.rawTag.apply(this,[t].concat(k.call(e)))}},c=0,p=b.length;p>c;c++)_=b[c],o(_);for(y=g("script"),s=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.scriptTag.apply(this,[t].concat(k.call(e)))}},l=0,h=y.length;h>l;l++)_=y[l],s(_);for(w=g("void","obsolete_void"),a=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.selfClosingTag.apply(this,[t].concat(k.call(e)))}},f=0,m=w.length;m>f;f++)_=w[f],a(_);("undefined"!=typeof t&&null!==t?t.exports:void 0)?(t.exports=(new e).tags(),t.exports.Teacup=e):"function"==typeof define&&define.amd?define("teacup",[],function(){return(new e).tags()}):(window.teacup=(new e).tags(),window.teacup.Teacup=e)}).call(this)},{}],258:[function(e,t,n){!function(e,r){"object"==typeof n&&"object"==typeof t?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof n?n.Unsplash=r():e.Unsplash=r()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return"function"==typeof e.json?e.json():e}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.toJson=o;var a=n(1),u=n(11),c=n(3),l=r(c),d=n(6),p=r(d),h=n(10),m=r(h),f=n(7),g=r(f),v=n(4),b=r(v),y=n(5),w=r(y),_=n(8),k=r(_),C=n(9),x=r(C),j=function(){function e(t){i(this,e),this._apiUrl=t.apiUrl||a.API_URL,this._apiVersion=t.apiVersion||a.API_VERSION,this._applicationId=t.applicationId,this._secret=t.secret,this._callbackUrl=t.callbackUrl,this._bearerToken=t.bearerToken,this.auth=l.default.bind(this)(),this.currentUser=p.default.bind(this)(),this.users=m.default.bind(this)(),this.photos=g.default.bind(this)(),this.categories=b.default.bind(this)(),this.collections=w.default.bind(this)(),this.search=k.default.bind(this)(),this.stats=x.default.bind(this)()}return s(e,[{key:"request",value:function(e){var t=u.buildFetchOptions.bind(this)(e),n=t.url,r=t.options;return fetch(n,r)}}]),e}();t.default=j},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_URL="https://api.unsplash.com",t.API_VERSION="v1",t.OAUTH_AUTHORIZE_URL="https://unsplash.com/oauth/authorize",t.OAUTH_TOKEN_URL="https://unsplash.com/oauth/token"},function(e,t,n){"use strict";t.decode=t.parse=n(13),t.encode=t.stringify=n(14)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=this;return{getAuthenticationUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["public"],n=s.default.stringify({client_id:e._applicationId,redirect_uri:e._callbackUrl,response_type:"code",scope:t.length>1?t.join("+"):t.toString()});return decodeURIComponent(a.OAUTH_AUTHORIZE_URL+"?"+n)},userAuthentication:function(t){var n=a.OAUTH_TOKEN_URL;return e.request({url:n,method:"POST",body:{client_id:e._applicationId,client_secret:e._secret,redirect_uri:e._callbackUrl,grant_type:"authorization_code",code:t},oauth:!0})},setBearerToken:function(t){t&&(e._bearerToken=t)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(2),s=r(o),a=n(1)},function(e,t){"use strict";function n(){var e=this;return{listCategories:function(){var t="/categories";return e.request({url:t,method:"GET"})},category:function(t){var n="/categories/"+t;return e.request({url:n,method:"GET"})},categoryPhotos:function(t,n,r){var i="/categories/"+t+"/photos",o={page:n,per_page:r};return e.request({url:i,method:"GET",query:o})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{listCollections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="/collections",i={page:t,per_page:n};return e.request({url:r,method:"GET",query:i})},listCuratedCollections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="/collections/curated",i={page:t,per_page:n};return e.request({url:r,method:"GET",query:i})},listFeaturedCollections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="/collections/featured",i={page:t,per_page:n};return e.request({url:r,method:"GET",query:i})},getCollection:r.bind(this,!1),getCuratedCollection:r.bind(this,!0),getCuratedCollectionPhotos:i.bind(this,!0),getCollectionPhotos:i.bind(this,!1),createCollection:o.bind(this,null),updateCollection:o.bind(this),deleteCollection:function(t){var n="/collections/"+t;return e.request({url:n,method:"DELETE"})},addPhotoToCollection:function(t,n){var r="/collections/"+t+"/add";return e.request({url:r,method:"POST",body:{photo_id:n}})},removePhotoFromCollection:function(t,n){var r="/collections/"+t+"/remove?photo_id="+n;return e.request({url:r,method:"DELETE"})}}}function r(e,t){var n=e?"/collections/curated/"+t:"/collections/"+t;return this.request({url:n,method:"GET"})}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"latest",o=e?"/collections/curated/"+t+"/photos":"/collections/"+t+"/photos",s={page:n,per_page:r,order_by:i};return this.request({url:o,method:"GET",query:s})}function o(e,t,n,r){var i=e?"/collections/"+e:"/collections",o={title:t,description:n,private:r};return this.request({url:i,method:e?"PUT":"POST",body:o})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{profile:function(){var t="/me";return e.request({url:t,method:"GET"})},updateProfile:function(t){var n="/me",r=t.username,i=t.firstName,o=t.lastName,s=t.email,a=t.url,u=t.location,c=t.bio,l=t.instagramUsername,d={username:r,first_name:i,last_name:o,email:s,url:a,location:u,bio:c,instagram_username:l};return Object.keys(d).forEach(function(e){d[e]||delete d[e]}),e.request({url:n,method:"PUT",body:d})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{listPhotos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"latest",i="/photos",o={page:t,per_page:n,order_by:r};return e.request({url:i,method:"GET",query:o})},listCuratedPhotos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"latest",i="/photos/curated",o={page:t,per_page:n,order_by:r};return e.request({url:i,method:"GET",query:o})},searchPhotos:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o="/photos/search",s={query:t,category:n.length>1?n.join(","):n.toString(),page:r,per_page:i};return e.request({url:o,method:"GET",query:s})},getPhoto:function(t,n,r,i){var o="/photos/"+t,s={w:n,h:r,rect:i};return e.request({url:o,method:"GET",query:s})},getPhotoStats:function(t){var n="/photos/"+t+"/stats";return e.request({url:n,method:"GET"})},getRandomPhoto:function(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="/photos/random",r=t.collections||[],i={category:t.category,featured:t.featured,username:t.username,orientation:t.orientation,collections:r.join(),query:t.query,w:t.width,h:t.height,c:t.cacheBuster||(new Date).getTime()};return Object.keys(i).forEach(function(e){i[e]||delete i[e]}),e.request({url:n,method:"GET",query:i})},uploadPhoto:function(t){if(!e._bearerToken)throw new Error("Requires a bearerToken to be set.");var n="/photos";return e.request({url:n,method:"POST",body:{photo:t}})},likePhoto:function(t){if(!e._bearerToken)throw new Error("Requires a bearerToken to be set.");var n="/photos/"+t+"/like";return e.request({url:n,method:"POST"})},unlikePhoto:function(t){if(!e._bearerToken)throw new Error("Requires a bearerToken to be set.");var n="/photos/"+t+"/like";return e.request({url:n,method:"DELETE"})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){return{all:r.bind(this,"/search"),photos:r.bind(this,"/search/photos"),users:r.bind(this,"/search/users"),collections:r.bind(this,"/search/collections")}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i={query:t,page:n,per_page:r};return this.request({url:e,method:"GET",query:i})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{total:function(){var t="/stats/total";return e.request({url:t,method:"GET"})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{profile:function(t){var n="/users/"+t;return e.request({url:n,method:"GET"})},photos:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"latest",o="/users/"+t+"/photos",s={page:n,per_page:r,order_by:i};return e.request({url:o,method:"GET",query:s})},likes:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"latest",o="/users/"+t+"/likes",s={page:n,per_page:r,order_by:i};return e.request({url:o,method:"GET",query:s})},collections:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"published",o="/users/"+t+"/collections",s={page:n,per_page:r,order_by:i};return e.request({url:o,method:"GET",query:s})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return c.default(e)}function o(e){var t=e.method,n=e.query,r=e.oauth,o=e.body,u=r===!0?e.url:""+this._apiUrl+e.url,c=s({},e.headers,{"Accept-Version":this._apiVersion,Authorization:this._bearerToken?"Bearer "+this._bearerToken:"Client-ID "+this._applicationId});return o&&(c["Content-Type"]="application/x-www-form-urlencoded"),n&&(u=decodeURIComponent(u+"?"+a.stringify(n))),{url:u,options:{method:t,headers:c,body:"GET"!==t&&o?i(o):void 0}}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.formUrlEncode=i,t.buildFetchOptions=o;var a=n(2),u=n(12),c=r(u)},function(e,t){e.exports=function(e,t){function n(e){return String(e).replace(/[^ !'()~\*]*/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~\*]/g,function(e){return"%"+e.charCodeAt().toString(16).slice(-2).toUpperCase()})}function r(e){var n=Object.keys(e);return t.sorted?n.sort():n}function i(e){return e.filter(function(e){return e}).join("&")}function o(e,t){return i(r(t).map(function(n){return a(e+"["+n+"]",t[n])}))}function s(e,t){return i(t.map(function(t){return a(e+"[]",t)}))}function a(e,r){var i=typeof r,a=null;return r===a?a=t.ignorenull?a:n(e)+"="+a:/string|number|boolean/.test(i)?a=n(e)+"="+n(r):Array.isArray(r)?a=s(e,r):"object"===i&&(a=o(e,r)),a}return t="object"==typeof t?t:{},i(r(e).map(function(t){return a(t,e[t])}))}},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var c=0;u>c;++c){var l,d,p,h,m=e[c].replace(s,"%20"),f=m.indexOf(r);f>=0?(l=m.substr(0,f),d=m.substr(f+1)):(l=m,d=""),p=decodeURIComponent(l),h=decodeURIComponent(d),n(o,p)?Array.isArray(o[p])?o[p].push(h):o[p]=[o[p],h]:o[p]=h}return o}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(i){var o=encodeURIComponent(n(i))+r;return Array.isArray(e[i])?e[i].map(function(e){return o+encodeURIComponent(n(e))}).join(t):o+encodeURIComponent(n(e[i]))}).join(t):i?encodeURIComponent(n(i))+r+encodeURIComponent(n(e)):""}}])})},{}],259:[function(e,t,n){"use strict";function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);var c,l,d,p,h=a.test(e),m=typeof t,f=this,g=0;for("object"!==m&&"string"!==m&&(n=t,t=null),n&&"function"!=typeof n&&(n=s.parse),t=o(t);g<u.length;g++)l=u[g],c=l[0],p=l[1],c!==c?f[p]=e:"string"==typeof c?~(d=e.indexOf(c))&&("number"==typeof l[2]?(f[p]=e.slice(0,d),e=e.slice(d+l[2])):(f[p]=e.slice(d),e=e.slice(0,d))):(d=c.exec(e))&&(f[p]=d[1],e=e.slice(0,e.length-d[0].length)),f[p]=f[p]||(l[3]||"port"===p&&h?t[p]||"":""),l[4]&&(f[p]=f[p].toLowerCase());n&&(f.query=n(f.query)),i(f.port,f.protocol)||(f.host=f.hostname,f.port=""),f.username=f.password="",f.auth&&(l=f.auth.split(":"),f.username=l[0]||"",f.password=l[1]||""),f.href=f.toString()}var i=e(262),o=e(260),s=e(261),a=/^\/(?!\/)/,u=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];r.prototype.set=function(e,t,n){var r=this;return"query"===e?("string"==typeof t&&t.length&&(t=(n||s.parse)(t)),r[e]=t):"port"===e?(r[e]=t,i(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="")):"hostname"===e?(r[e]=t,r.port&&(t+=":"+r.port),r.host=t):"host"===e?(r[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),r.hostname=t[0],r.port=t[1])):r[e]=t,r.href=r.toString(),r},r.prototype.toString=function(e){e&&"function"==typeof e||(e=s.stringify);var t,n=this,r=n.protocol+"//";return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.hostname,n.port&&(r+=":"+n.port),r+=n.pathname,n.query&&(t="object"==typeof n.query?e(n.query):n.query,r+=("?"===t.charAt(0)?"":"?")+t),n.hash&&(r+=n.hash),r},r.qs=s,r.location=o,t.exports=r},{}],260:[function(e,t,r){"use strict";var i,o={hash:1,query:1};t.exports=function(t){t=t||n.location||{},i=i||e(259);var r,s={},a=typeof t;if("blob:"===t.protocol)s=new i(unescape(t.pathname),{});else if("string"===a){s=new i(t,{});for(r in o)delete s[r]}else if("object"===a)for(r in t)r in o||(s[r]=t[r]);return s}},{}],261:[function(e,t,n){"use strict";function r(e){for(var t,n=/([^=?&]+)=([^&]*)/g,r={};t=n.exec(e);r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return r}function i(e,t){t=t||"";var n=[];"string"!=typeof t&&(t="?");for(var r in e)o.call(e,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.length?t+n.join("&"):""}var o=Object.prototype.hasOwnProperty;n.stringify=i,n.parse=r},{}],262:[function(e,t,n){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 22!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],263:[function(e,t,n){t.exports=e(265)},{}],264:[function(e,t,n){!function(e){"use strict";var n=-1,r={onVisible:function(e){var t=r.isSupported();if(!t||!r.hidden())return e(),t;var n=r.change(function(t,i){r.hidden()||(r.unbind(n),e())});return n},change:function(e){if(!r.isSupported())return!1;n+=1;var t=n;return r._callbacks[t]=e,r._listen(),t},unbind:function(e){delete r._callbacks[e]},afterPrerendering:function(e){var t=r.isSupported(),n="prerender";if(!t||n!=r.state())return e(),t;var i=r.change(function(t,o){n!=o&&(r.unbind(i),e())});return i},hidden:function(){return!(!r._doc.hidden&&!r._doc.webkitHidden)},state:function(){return r._doc.visibilityState||r._doc.webkitVisibilityState||"visible"},isSupported:function(){return!(!r._doc.visibilityState&&!r._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(e){var t=r.state();for(var n in r._callbacks)r._callbacks[n].call(r._doc,e,t)},_listen:function(){if(!r._init){var e="visibilitychange";r._doc.webkitVisibilityState&&(e="webkit"+e);var t=function(){r._change.apply(r,arguments)};r._doc.addEventListener?r._doc.addEventListener(e,t):r._doc.attachEvent(e,t),r._init=!0}}};"undefined"!=typeof t&&t.exports?t.exports=r:e.Visibility=r}(this)},{}],265:[function(e,t,n){!function(n){"use strict";var r=-1,i=function(e){return e.every=function(t,n,i){e._time(),i||(i=n,n=null),r+=1;var o=r;return e._timers[o]={visible:t,hidden:n,callback:i},e._run(o,!1),e.isSupported()&&e._listen(),o},e.stop=function(t){return e._timers[t]?(e._stop(t),delete e._timers[t],!0):!1},e._timers={},e._time=function(){e._timed||(e._timed=!0,e._wasHidden=e.hidden(),e.change(function(){e._stopRun(),e._wasHidden=e.hidden()}))},e._run=function(t,r){var i,o=e._timers[t];if(e.hidden()){if(null===o.hidden)return;i=o.hidden}else i=o.visible;var s=function(){o.last=new Date,o.callback.call(n)};if(r){var a=new Date,u=a-o.last;i>u?o.delay=setTimeout(function(){o.id=setInterval(s,i),s()},i-u):(o.id=setInterval(s,i),s())}else o.id=setInterval(s,i)},e._stop=function(t){var n=e._timers[t];clearInterval(n.id),clearTimeout(n.delay),delete n.id,delete n.delay},e._stopRun=function(t){var n=e.hidden(),r=e._wasHidden;if(n&&!r||!n&&r)for(var i in e._timers)e._stop(i),e._run(i,!n)},e};"undefined"!=typeof t&&t.exports?t.exports=i(e(264)):i(n.Visibility)}(window)},{}],266:[function(e,t,n){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function s(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function a(e){var t=new FileReader,n=s(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=s(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&y(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",(t.headers||!this.headers)&&(this.headers=new i(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function f(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},v.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},d.call(h.prototype),d.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];g.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=h,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,r){var i=new h(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:f(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new g(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],267:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(33),o=e(116),s=e(198),a=e(151),u=e("underscore"),c=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.sync=function(e,t,n){throw new Error("BoardState is a special weird non-persistent thing")},t.prototype.initialize=function(e,n){return t.__super__.initialize.apply(this,arguments),this.board=n.board,this.useSidebarPref()?(this.setShowSidebarFromPref(),this.listenTo(this.board,"change:myPrefs",this.setShowSidebarFromPref)):this.set("showSidebar",!a.fSmall),this.set("listComposerOpen",!1)},t.prototype.setSidebarDisplayType=function(e){return this.set("sidebarDisplayType",null!=e?e:"")},t.prototype.getSidebarDisplayType=function(){return this.get("sidebarDisplayType")},t.prototype.selectCard=function(e){this._selectedList=null,e!==this._selectedCard&&(this._selectedCard&&this.stopListening(this._selectedCard,"change:closed"),this._selectedCard=e,null!=this._selectedCard&&(this.listenTo(this._selectedCard,"change:closed",function(e){return function(){return e.selectCardAfter(e._selectedCard)}}(this)),this.waitForId(this._selectedCard,function(t){return function(){return t._selectedCard===e?o.set(e.getFullUrl()):void 0}}(this))),this.trigger("active-card-changed"))},t.prototype.selectList=function(e){return this._selectedList=e},t.prototype.isCardSelected=function(e){return null!=e&&e===this._selectedCard},t.prototype.clearSelectedCard=function(){return this.selectCard(null)},t.prototype.getCard=function(){return this._selectedCard},t.prototype.getList=function(){var e;return e=this.getCard(),null!=e?e.getList():this._selectedList},t.prototype.selectCardAfter=function(e){var t,n,r,i;return n=e.getList(),i=null!=n?n.cardList.filter(function(e){return function(t){return e.board.filter.satisfiesFilter(t)}}(this)):void 0,r=null==n||0===i.length?null:(t=function(e){return function(e){return function(t){return t!==e&&t.get("pos")>=e.get("pos")}}}(this),u.find(i,t(e))),this.selectCard(null!=r?r:u.last(i))},t.prototype.openListComposer=function(){return this.set("listComposerOpen",!0)},t.prototype.closeListComposer=function(){return this.set("listComposerOpen",!1)},t.prototype.useSidebarPref=function(){return r.isLoggedIn()&&(a.fExtraLarge||a.fLarge||a.fMedium)},t.prototype.setShowSidebar=function(e){var t;return e!==this.get("showSidebar")&&(t=e?"Open":"Close",c("Board Menu",t+" Board Menu"),this.set("showSidebar",e),this.useSidebarPref())?this.board.setPref("showSidebar",e):void 0},t.prototype.setShowSidebarFromPref=function(){return this.waitForAttr(this.board,"myPrefs",function(e){return function(){return e.set("showSidebar",e.board.getPref("showSidebar"))}}(this))},t}(s)},{}],268:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(271),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.default=function(){return{mode:"month"}},t.prototype.getMode=function(){return this.get("mode")},t.prototype.setMode=function(e){return this.update("mode",e)},t}(i)},{}],269:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e(180),o=e(194),s=e(271),a=e(106),t.exports=a(o,r=function(e){function t(e,n){this.board=n.board,t.__super__.constructor.apply(this,arguments),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardCardComposerSettings-"+t}),e.fetch()}}(this)),this.destruct([this.labelList=(new i).syncModel(this,"idLabels").syncCache(this.modelCache,[],function(e){return function(t){var n,r;return n=t.id,l.call(null!=(r=e.get("idLabels"))?r:[],n)>=0}}(this))])}return u(t,e),t.prototype.typeName="CardComposer",t.prototype.syncedKeys=["title"],t.prototype.default=function(){return{list:null,index:null,idMembers:[],idLabels:[],pos:"bottom",title:"",vis:!1}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.clearItems=function(){this.labelList.reset(),this.save({idMembers:[],idLabels:[],title:""})},t.prototype.moveToNext=function(){var e;this.save({index:(null!=(e=this.get("index"))?e:0)+1})},t.prototype.getBoard=function(){return this.board},t.prototype.getList=function(){return this.get("list")},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.addMember=function(e){return this.addToSet("idMembers",e)},t.prototype.removeMember=function(e){return this.pull("idMembers",e)},t.prototype.labelCreateUrl=function(){return"/1/board/"+this.getBoard().id+"/labels/"},t}(s))},{}],270:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},g=[].slice;r=e(33),o=e(80),a=e(200),u=e(271),c=e(129),l=e("underscore"),p=e("moment"),d=e(101),s="000000000000000000000000",t.exports=i=function(e){function t(e,n){this.board=e,t.__super__.constructor.call(this,null,n),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardCardFilterSettings-"+t}),e.fetch(),e._resetNewCards()}}(this)),this.dueMap={day:1,week:7,month:28,overdue:0,notdue:0,complete:0,incomplete:0},this.modeMap={or:"or",and:"and"},this.newCardsWithoutIds=[],this.listenTo(this,"change:title change:idLabels change:idMembers change:due",this.debounce(this._resetNewCards))}return h(t,e),t.prototype.default=function(){return{idMembers:[],idLabels:[],title:null,due:null,limitMembers:!0,limitLabels:!0,newCards:[],mode:"or"}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.getBoard=function(){return this.board},t.prototype._resetNewCards=function(){return this.newCardsWithoutIds=[],this.save("newCards",[])},t.prototype.toggleQuietMode=function(){var e,t,n,i,o;if(e=r.myId(),null!=e){i=this.default(),i.idMembers=[e],t=!0;for(n in i)o=i[n],t&&(t=l.isEqual(this.get(n),o));return t?this.clear():this.save(i)}},t.prototype.toggleIdLabel=function(e){return this.toggle("idLabels",e)},t.prototype.toggleMember=function(e){return this.toggle("idMembers",e)},t.prototype.isFiltering=function(){var e;return l.some([!l.isEmpty(this.get("idMembers")),!l.isEmpty(this.get("idLabels")),null!=(e=this.get("title"))?e.trim():void 0,null!=this.get("due")])},t.prototype.satisfiesFilter=function(e){var t,n,r,i,o,a,u,c,d,h,m,v,b,y,w,_,k,C,x,j,S,T,M,B,O;if(null==e)return!1;if(e.get("closed"))return!0;if(C=e.id,f.call(null!=(x=this.get("newCards"))?x:[],C)>=0||f.call(this.newCardsWithoutIds,e)>=0)return!0;for(O="and"===this.get("mode"),j=["idLabels","idMembers"],h=0,y=j.length;y>h;h++)if(d=j[h],!l.isEmpty(this.get(d)))if(t=e.get(d),l.isEmpty(t)&&(t=[s]),u=this.get(d),v=l.intersection(u,t),O){if(v.length<u.length)return!1}else if(0===v.length)return!1;if(null!=this.get("due"))switch(a=this.get("due"),o=e.get("due"),i=e.get("dueComplete"),a){case"complete":if(!i)return!1;break;case"incomplete":if(!o||i)return!1;break;case"notdue":if(null!=e.get("due"))return!1;break;case"overdue":if(_=new Date,i||null==o||p(o).isAfter(_))return!1;break;default:if(i||null==o)return!1;if(w=p().add(this.dueMap[a],"day"),!p(o).isBetween(p(),w))return!1}return T=this.get("title"),null==T||(c=function(e){return l.compact(e.toLowerCase().split(/[\s\x21\x22\x24-\x26\x28-\x2C\x2F\x3A-\x3F\x5B-\x60\x7B-\x7F]+/))},M=c(T),l.isEmpty(M)||(m=null!=e.get("idShort")?c(e.get("idShort").toString()):[],n=l.flatten([c(null!=(S=e.get("name"))?S:""),m]),r=2<=M.length?g.call(M,0,b=M.length-1):(b=0,[]),k=M[b++],!l.isEmpty(r)&&!l.isEmpty(l.intersection(r,n))||(B=function(e){return e.substring(0,k.length)===k},l.any(n,B))))?!0:!1},t.prototype.addNewCard=function(e){return this.newCardsWithoutIds.push(e),this.waitForId(e,function(t){return function(n){return t.newCardsWithoutIds=l.without(t.newCardsWithoutIds,e),t.addToSet("newCards",n)}}(this))},t.prototype.toJSON=function(e){var n,i,o,u,p,h,m;return p=null!=e?e:{},n=p.board,i=p.expanded,o=t.__super__.toJSON.apply(this,arguments),n&&(o.board=this.board.toJSON()),i&&(m=null!=(h=this.get("title"))?h:"",u=RegExp("^"+c.escapeForRegex(m),"i"),o.labels=l.chain(this.board.getLabels()).filter(function(e){return u.test(e.get("color"))||u.test(e.get("name"))}).sort(a.compare).map(function(e){return function(t){var n;return l.extend(t.toJSON(),{isActive:(n=t.id,f.call(e.get("idLabels"),n)>=0)})}}(this)).unshift({id:s,name:d(["filtering","no labels"]),isActive:f.call(this.get("idLabels"),s)>=0}).value(),o.members=this.board.memberList.chain().filter(function(e){return"me"===m&&r.isMe(e)||l.any(c.getMemNameArray(e),function(e){return u.test(e)})}).map(function(e){return function(t){var n;return l.extend(t.toJSON(),{isActive:(n=t.id,f.call(e.get("idMembers"),n)>=0)})}}(this)).value(),o.members=c.sortMembers(o.members,r.me()),o.members.unshift({id:s,fullName:d(["filtering","unassigned"]),initials:"?",isActive:f.call(this.get("idMembers"),s)>=0}),o.dueOptions=l.keys(this.dueMap).map(function(e){return function(t){return{time:t,desc:d(["due date filter",t]),isActive:t===e.get("due")}}}(this)),o.modes=l.keys(this.modeMap).map(function(e){return function(t){return{mode:t,desc:d(["filter mode",t]),isActive:t===e.get("mode")}}}(this))),o},t.prototype.toQueryString=function(){var e,t,n,r;return this.isFiltering()?(t=[],(r=this.get("title"))&&t.push(r),this.get("idLabels").forEach(function(e){return function(n){var r,i;return n===s?t.push(["label","none"].join(":")):(r=e.board.modelCache.get("Label",n))?(i=r.get("name"))?t.push(["label",encodeURIComponent(i)].join(":")):t.push(["label",r.get("color")].join(":")):void 0}}(this)),this.get("idMembers").forEach(function(e){return function(n){var r;return n===s?t.push(["member","none"].join(":")):(r=e.board.modelCache.get("Member",n))?t.push("@"+r.get("username")):void 0}}(this)),(e=this.get("due"))&&t.push(["due",e].join(":")),"and"===this.get("mode")&&t.push(["mode","and"].join(":")),n={menu:"filter",filter:t.join(",")},"?"+l.chain(n).pairs().map(function(e){var t,n;return t=e[0],n=e[1],[t,n].join("=")}).join("&").value()):""},t.prototype.fromQueryString=function(e){var t,n,r,i,o,a,u,c,d,p,h,m,g,v,b;if(e){for(o=[],i=[],t=void 0,g=void 0,p=e.split(","),m=[],r=0,u=p.length;u>r;r++){switch(n=p[r],n=n.replace(/^@/,"member:"),h=n.split(":"),v=h[0],b=h[1],v){case"member":"none"===b?o.push(s):(c=this.board.modelCache.findOne("Member",function(e){return e.get("username")===b}),null!=c&&o.push(c.id));break;case"label":"none"===b?i.push(s):(a=this.board.labelList.find(function(e){return 0===e.get("name").toLowerCase().indexOf(b.toLowerCase())||""===e.get("name")&&e.get("color")===b}),null!=a&&i.push(a.id));break;case"due":f.call(l.keys(this.dueMap),b)>=0&&(t=b);break;case"mode":"and"===b&&(d="and");break;default:g=n}m.push(this.set({idMembers:o,idLabels:i,due:t,title:g,mode:d}))}return m}},t}(u)},{}],271:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(114),s=e(198),a=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.destructor=function(){return this.disableTabSync()},t.prototype.enableTabSync=function(){return this._onStorageBound=this._onStorage.bind(this),r(window).on("storage",this._onStorageBound)},t.prototype.disableTabSync=function(){return null!=this._onStorageBound?r(window).off("storage",this._onStorageBound):void 0},t.prototype.default=function(){return{}},t.prototype._onStorage=function(e){return e=e.originalEvent,(null!=e?e.key:void 0)===this.id&&e.oldValue!==e.newValue?(this.fetch(),"function"==typeof this.onStorage?this.onStorage(e.originalEvent):void 0):void 0},t.prototype.sync=function(e,t,n){var r,i,s,u,c;switch(u=n.success,e){case"create":throw Error("not implemented");case"read":return i=t.syncedKeysFromLocalStorage(),a.defaults(i,this.default()),"function"==typeof u?u(t,i,n):void 0;case"update":i=t.toJSON(),r=this.default(),delete i.id;for(s in i)c=i[s],a.isEqual(c,r[s])&&delete i[s];return a.isEmpty(i)?o.unset(t.id):o.set(t.id,i),"function"==typeof u?u(t,t.toJSON(),n):void 0;case"delete":return o.unset(t.id),"function"==typeof u?u(t,null,n):void 0}},t.prototype.syncedKeysFromLocalStorage=function(){var e,t;return e=null!=(t=o.get(this.id))?t:{},a.pick(e,this.syncedKeys)},t.prototype.syncedKeys=function(){return!0},t.prototype.toJSON=function(){return a.pick(this.attributes,this.syncedKeys)},t.prototype._persistUpdate=function(e,t){var n;return o.set(this.id,a.extend(null!=(n=o.get(this.id))?n:this.default(),e)),"function"==typeof t?t(null,this.toJSON()):void 0},t.prototype.toggle=function(e,t){return this.inSet(e,t)?(this.pull(e,t),!1):(this.addToSet(e,t),!0)},t.prototype.inSet=function(e,t){var n;return l.call(null!=(n=this.get(e))?n:[],t)>=0},t.prototype.addToSet=function(e,t){var n;return this.save(e,(null!=(n=this.get(e))?n:[]).concat(t))},t.prototype.pull=function(e,t){var n;return this.save(e,a.without(null!=(n=this.get(e))?n:[],t))},t}(s)},{}],272:[function(e,t,n){var r,i=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;r=e(271),t.exports=new(function(e){function t(){t.__super__.constructor.apply(this,arguments),this.set({id:"labelState"}),this.fetch(),this.enableTabSync()}return i(t,e),t.prototype.default=function(){
return{showText:!1}},t.prototype.getShowText=function(){return this.get("showText")},t.prototype.setShowText=function(e){return this.update("showText",e)},t.prototype.toggleText=function(){return this.setShowText(!this.getShowText())},t.prototype.onStorage=function(e){return this.setShowText(this.getShowText())},t}(r))},{}],273:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(271),t.exports=r=function(e){function t(e,n){this.board=e,t.__super__.constructor.call(this,null,n),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardListComposerSettings-"+t}),e.fetch()}}(this))}return o(t,e),t.prototype.default=function(){return{title:null,vis:!1}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.clearItems=function(){this.save({title:""})},t.prototype.getBoard=function(){return this.board},t.prototype.toJSON=function(e){var n,r,i,o;return o=null!=e?e:{},n=o.board,i=o.list,r=t.__super__.toJSON.apply(this,arguments),n&&(r.board=this.getBoard().toJSON()),r},t}(i)},{}],274:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(33),i=e(271),o=e("underscore"),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({id:"memberState-"+r.myId()}),this.fetch()}return s(t,e),t.prototype.default=function(){return{cardsPageSortType:"board",cardsPageFilter:"active-month",cardsPageGroup:"all",processingAttachmentsLength:0,idCollapsedChecklists:[]}},t.prototype.getCardsPageSortType=function(){return this.get("cardsPageSortType")},t.prototype.getCardsPageFilter=function(){return this.get("cardsPageFilter")},t.prototype.getCardsPageGroup=function(){return this.get("cardsPageGroup")},t.prototype.sortCardsPageByBoard=function(){return this.save("cardsPageSortType","board")},t.prototype.sortCardsPageByDate=function(){return this.save("cardsPageSortType","date")},t.prototype.setCardsPageFilter=function(e){return this.save("cardsPageFilter",e)},t.prototype.setCardsPageGroup=function(e){return this.save("cardsPageGroup",e)},t.prototype.getCollapsedChecklists=function(){return this.get("idCollapsedChecklists")},t.prototype.pullCollapsedChecklist=function(e){return this.pull("idCollapsedChecklists",e)},t.prototype.pushCollapsedChecklist=function(e){var t,n;return this.pull("idCollapsedChecklists",e),this.addToSet("idCollapsedChecklists",e),t=this.getCollapsedChecklists(),n=o.rest(t,Math.max(0,t.length-256)),this.save("idCollapsedChecklists",n)},t}(i))},{}],275:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(198),i=e(129),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({query:"",suggestions:[],suggestionSearchTerm:"",suggestSearchModelTypes:""})}return o(t,e),t.prototype.getQuery=function(){return this.get("query")},t.prototype.setQuery=function(e){return e!==this.getQuery()&&this.set("query",e),""===e?(this.clearSuggestions(),this.clearSuggestionSearchTerm(),this.clearSuggestionSearchModelTypes()):void 0},t.prototype.removeStringFromQuery=function(e){var t,n,r;return t=this.getQuery(),n=RegExp(""+i.escapeForRegex(e)),n.test(t)?(r=t.replace(e,""),r=i.stripExtraSpaces(r),""!==r&&(r+=" "),this.setQuery(r)):void 0},t.prototype.addStringToQuery=function(e){var t,n,r;return t=this.getQuery(),n=RegExp(""+i.escapeForRegex(e)),n.test(t)?void 0:(r=t+" "+e,r=i.stripExtraSpaces(r)+" ",this.setQuery(r))},t.prototype.getSuggestions=function(){return this.get("suggestions")},t.prototype.setSuggestions=function(e){return this.set("suggestions",e)},t.prototype.clearSuggestions=function(){return this.set("suggestions",[])},t.prototype.getSuggestionSearchTerm=function(){return this.get("suggestionSearchTerm")},t.prototype.setSuggestionSearchTerm=function(e){return this.set("suggestionSearchTerm",e)},t.prototype.clearSuggestionSearchTerm=function(){return this.set("suggestionSearchTerm","")},t.prototype.getSuggestionSearchModelTypes=function(){return this.get("suggestSearchModelTypes")},t.prototype.setSuggestionSearchModelTypes=function(e){return this.set("suggestSearchModelTypes",e)},t.prototype.clearSuggestionSearchModelTypes=function(){return this.set("suggestSearchModelTypes","")},t}(r))},{}],276:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(33),i=e(271),o=e("underscore"),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({id:"sidebarState-"+r.myId()}),this.fetch()}return s(t,e),t.prototype.default=function(){return{pinBoardsListSidebar:!1,showBoardsListSidebar:!1,idRecentBoards:[],collapsedDrawerSections:[]}},t.prototype.syncedKeys=["idRecentBoards","collapsedDrawerSections","pinBoardsListSidebar"],t.prototype.getPinSidebar=function(){return this.get("pinBoardsListSidebar")},t.prototype.showPinSidebar=function(){return this.save("pinBoardsListSidebar",!0)},t.prototype.hidePinSidebar=function(){return this.save("pinBoardsListSidebar",!1)},t.prototype.getShowSidebar=function(){return this.get("showBoardsListSidebar")},t.prototype.showSidebar=function(){return this.save("showBoardsListSidebar",!0)},t.prototype.hideSidebar=function(){return this.save("showBoardsListSidebar",!1)},t.prototype.hideUnpinnedSidebar=function(){return this.getShowSidebar()&&!this.getPinSidebar()?this.hideSidebar():void 0},t.prototype.getRecentBoards=function(){return this.get("idRecentBoards")},t.prototype.pullBoard=function(e){var t,n;for(n=o.clone(this.getRecentBoards());(t=o.indexOf(n,e))>-1;)n.splice(t,1);return this.save("idRecentBoards",n)},t.prototype.pushBoard=function(e){var t;return t=o.clone(this.getRecentBoards()),o.contains(t,e)&&(t=o.without(t,e)),t.unshift(e),t=t.slice(0,16),this.save("idRecentBoards",t)},t.prototype.getCollapsedSections=function(){var e;return null!=(e=this.get("collapsedDrawerSections"))?e:this.default().collapsedDrawerSections},t.prototype.isCollapsed=function(e){return o.contains(this.getCollapsedSections(),e)},t.prototype.collapseSection=function(e){return this.addToSet("collapsedDrawerSections",e)},t.prototype.expandSection=function(e){return this.pull("collapsedDrawerSections",e)},t}(i))},{}],277:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k=function(e,t){function n(){this.constructor=e}for(var r in t)C.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},C={}.hasOwnProperty,x=[].slice;r=e("jquery"),o=e(278),s=e(279),a=e(80),u=e(129),c=e(522),l=e("underscore"),g=e("moment"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return k(t,e),t.prototype.initialize=function(e){return this.renderOpts=e.renderOpts,this.highlight=e.highlight,this.makeDebouncedMethods("render"),this.listenTo(this.collection,"add remove reset",this.renderDebounced),this.actionViews=[],this.showDetails=!0},t.prototype.render=function(){return this.collection._getRelatedBoards().then(function(e){return function(){var t;t=""===e.$el.html()||e.showDetails!==e._lastShowDetails||e.missingViews(),e._lastShowDetails=e.showDetails,e.rerender(t,!0)}}(this)).then(function(e){return function(){e.trigger("render")}}(this)).done()},t.prototype.missingViews=function(){return l.any(this.actionViews,function(e){return function(t){return!r.contains(e.el,t.el)}}(this))},t.prototype.rerender=function(e,t){var n,r,i,o,s,u,c,d,p,h;for(p=this.saveEdits(),s=p[0],o=p[1],i=this.collection.models,i=l.sortBy(i,function(e){return-a.parse(e.get("date"))}),this.showDetails||(i=l.filter(i,function(e){return e.isCommentLike()})),r=v(i).slice(0,this.renderOpts.limit),e&&t&&this.removeActionViews(),this.$(".js-board-member-profile-no-activity").toggleClass("hide",r.length>0),c=u=0,d=r.length;d>u;c=++u)n=r[c],(e||this.actionNeedsRerender(n,c))&&(h=this.rerenderAction(n,c,r,{rerenderAll:e}),this.restoreEdits(s,o,h))},t.prototype.setShowDetails=function(e){return this.showDetails=e},t.prototype.saveEdits=function(){var e,t;return t=[],e=0,this.$(".editing textarea").each(function(){var n;n=r(this),t.push(n.val()),n.is(":focus")&&(n.parents(".editing").addClass("focused"),e=u.getCaretPosition(n))}),null!=t&&t.reverse(),[t,e]},t.prototype.restoreEdits=function(e,t,n){var r;return n.$el.hasClass("editing")?(n.$("textarea").val(e.pop()),r=u.getElem(n.$("textarea")),n.$el.hasClass("focused")&&u.setCaretPosition(r,t),n.openEditView()):void 0},t.prototype._viewForAction=function(e){return/^comment/.test(e.get("type"))?this.subview(s,e,this.renderOpts):this.subview(o,e,this.renderOpts)},t.prototype.rerenderAction=function(e,t,n,r){var i,o,s,a;return a=this._viewForAction(e),i=this.highlight&&this.highlight===e.id,a.setHighlighted(i),r.rerenderAll?(this.appendSubview(a),this.actionViews.push(a)):(this.insertActionView(a,t),1===this.actionViews.length&&1===n.length?(this.actionViews[t].remove(),this.actionViews.splice(t,1,a)):null==this.actionViews[t+1]?this.actionViews.splice(t,1,a):n.length<=this.actionViews.length?this.actionViews[t+1].model.id===(null!=(o=l.first(n[t+1]))?o.id:void 0)?(this.actionViews[t].remove(),this.actionViews.splice(t,1,a)):(this.actionViews.splice(t,0,a),null!=(s=this.actionViews[this.actionViews.length-1])&&s.remove(),this.actionViews=this.actionViews.splice(0,this.actionViews.length-1)):this.actionViews.splice(t,0,a)),a},t.prototype.actionNeedsRerender=function(e,t){var n,r,i;return(null!=(r=this.actionViews[t+1])&&null!=(i=r.model)?i.id:void 0)===e.id&&(this.actionViews[t].remove(),this.actionViews.splice(t,1)),n=this.actionViews[t],!n||e.id!==n.model.id},t.prototype.insertActionView=function(e,t){return this.actionViews[t]?(e.delegateEvents(),e.render().$el.insertBefore(this.actionViews[t].el)):this.appendSubview(e)},t.prototype.removeActionViews=function(){var e,t,n,r;for(r=this.actionViews,t=0,n=r.length;n>t;t++)e=r[t],e.remove();this.actionViews=[]},t.prototype.delegateEvents=function(){var e,n,r,i;for(t.__super__.delegateEvents.apply(this,arguments),i=this.actionViews,n=0,r=i.length;r>n;n++)e=i[n],e.delegateEvents()},t.prototype.undelegateEvents=function(){var e,n,r,i;for(t.__super__.undelegateEvents.apply(this,arguments),i=this.actionViews,n=0,r=i.length;r>n;n++)e=i[n],e.undelegateEvents()},t.prototype.remove=function(){return this.removeActionViews(),t.__super__.remove.apply(this,arguments)},t.prototype.setHighlight=function(e){var t,n,r;e!==this.highlight&&(this.highlight&&null!=(n=this.collection.get(this.highlight))&&(r=this._viewForAction(n),r.setHighlighted(!1)),this.highlight=e,this.highlight&&(t=this.collection.get(this.highlight))&&(r=this._viewForAction(t),r.setHighlighted(!0)))},t}(c),b=function(e){return function(t){return function(n,r){var i;return i=e in n&&e in r&&n[e].id===r[e].id,i?t(n,r):[!1,!1]}}},w=b("card"),y=b("board"),h=function(e){return[e,e]},p=function(e,t){var n,r,i,o;return n=e[0],r=e[1],i=t[0],o=t[1],[n||i,r||o]},m=function(e,t){var n,r;return null==t?!1:0===e.length?!0:(n=e[0],r=2<=e.length?x.call(e,1):[],m(r,t[n]))},f=function(){var e,t;return e=arguments[0],t=2<=arguments.length?x.call(arguments,1):[],l.all(t,function(t){return m(e,t)})},d=[{a:"removeMemberFromCard",b:"addMemberToCard",cancel:w(function(e,t){return h(e.idMember===t.idMember)})},{a:"deleteAttachmentFromCard",b:"addAttachmentToCard",cancel:w(function(e,t){return h(e.attachment.id===t.attachment.id)})},{a:"updateCheckItemStateOnCard",b:"updateCheckItemStateOnCard",cancel:w(function(e,t){return h(e.checkItem.id===t.checkItem.id)})},{a:"updateCard",b:"updateCard",cancel:w(function(e,t){return h("listAfter"in e&&"listBefore"in t&&e.listAfter.id===t.listBefore.id)})},{a:"addChecklistToCard",b:"removeChecklistFromCard",cancel:w(function(e,t){return h(e.checklist.id===t.checklist.id)})},{a:"updateBoard",b:"updateBoard",cancel:y(function(e,t){return[f(["board","prefs","background"],e,t),!1]})}],_=function(e,t){return d.reduce(function(n,r){return e.type!==r.a||t.type!==r.b?n:p(n,r.cancel(e,t))},[!1,!1])},v=function(e){var t,n,r,i,o,s,a,u,c,d,p;if(1===e.length)return e;for(i={},d=e.slice(0,-1),u=a=0,c=d.length;c>a;u=++a)t=d[u],o=t.toJSON(),s=e[u+1].toJSON(),l.extend(o,o.data),l.extend(s,s.data),o.idMemberCreator===s.idMemberCreator&&g(o.date).diff(s.date,"minutes")<5&&!i[o.id]&&!i[s.id]&&(p=_(o,s),n=p[0],r=p[1],n&&(i[o.id]=!0),r&&(i[s.id]=!0));return l.reject(e,function(e){return i[e.id]})}},{}],278:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P=function(e,t){function n(){this.constructor=e}for(var r in t)E.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},E={}.hasOwnProperty;r=e("jquery"),o=e(553),s=e(297),a=e(482),u=e(33),c=e(161),l=e(490),d=e(79),p=e(162),h=e(6),m=e(80),f=e(81),j=e(135),g=e(35),v=e(37),b=e(542),y=e(104),w=e(129),_=e(522),k=e("underscore"),x=e(498),T=e(45),M=e("moment"),B=e(519),O=e(48),S=e(101),C=e(700),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return P(t,e),t.prototype.className="phenom",t.prototype.initialize=function(e){var t,n,r,i;return this.context=e.context,this.highlighted=e.highlighted,this.listenTo(this.model,"takingTooLong change",this.render),r=this.model.get("data"),null!=(null!=(i=r.card)?i.id:void 0)&&r.board&&(this.listenTo(this.modelCache,"remove:Action:"+this.model.get("id"),function(e){return function(){return e.remove()}}(this)),null!=(t=this.model.getCard())&&t.id!==this.context.id&&this.listenTo(t,"change:name",this.render)),null!=(n=this.model.getChecklist())?this.listenTo(n,"change:name",this.render):void 0},t.prototype.events={"click .js-show-mem-menu":"viewMemberActionMenu","click .js-open-attachment-viewer":"openAttachmentViewer","click .js-open-card":"openCard","click .js-reply-to-action":"reply","click .js-expand-comment":"expandComment","click a":"checkAttachment"},t.prototype.getData=function(){var e;return e=new f("action").getEntities(this.model.get("display"),this.context.id),{saved:null!=this.model.id,entities:k.map(e,this._withEntityInfo.bind(this)),date:this.model.get("date"),dateLastEdited:this.model.get("data").dateLastEdited,textData:this.model.get("data").textData,url:null!=this.model.getCard()?h.getActionUrl(this.model):null}},t.prototype.getContext=function(){var e,t,n,r,i,o,s,a,c;return t={},e=this.modelCache.get("Board",null!=(i=this.model.get("data"))&&null!=(o=i.board)?o.id:void 0),this.options.showBoard&&null!=e&&(t.board=e.toJSON({prefs:!0,url:!0}),t.boardPLevelIconClass=l.getPermLevelIconClassForBoard(e),t.boardPLevelAltText=l.getPermLevelAltTextForBoard(e)),this.options.showOrganization&&(r=this.modelCache.get("Organization",null!=(s=this.model.get("data"))&&null!=(a=s.organization)?a.id:void 0),null!=r&&(t.organization=r.toJSON({prefs:!0,url:!0}),t.orgPLevelIconClass=r.getPermLevel(),t.orgPLevelAltText=S(["org perms",r.getPermLevel(),"text"]))),n=this.modelCache.get("Member",this.model.get("idMemberCreator")),t.canReply=(null!=e?e.canComment(u.me()):void 0)&&(this.model.isAddAttachment()||this.model.isCommentLike()&&null!=n&&!u.isMe(n)),t.canDelete=this.model.deletable(),t.canEdit=this.model.editable(),t.member=null!=n?n.toJSON():void 0,null!=(c=t.member)&&(c.url=h.getMemberProfileUrl(t.member.id)),t},t.prototype.getOptions=function(){var e,t;return{showCompactAttachmentPreview:this.options.compact,truncateComment:null!=(t="function"==typeof(e=this.options).truncateComments?e.truncateComments(this.model):void 0)?t:!1,showOptions:!this.model.isPlaceholder()&&!this.options.compact&&!this.options.readOnly,useEmbedly:!this.options.compact&&this.model.isCommentLike(),usePreviews:!this.options.compact&&this.model.isAddAttachment()}},t.prototype.render=function(){var e,t,n,i,o,s,a,u,c,l,d,p,h,f;if(s=this.getData(),l=this.getOptions(),o=this.getContext(),T("actions",s),this.$el.addClass(this.model.isCommentLike()?"mod-comment-type":this.model.isAddAttachment()?"mod-attachment-type":"mod-other-type"),this.$el.html(C(s,o,l)),null!=(i=this.model.getBoard())&&this.$(".js-friendly-links").each(function(){return x(this,i)}),l.useEmbedly)for(e=this.$(".js-embedly"),d=s.entities,u=0,c=d.length;c>u;u++)if(a=d[u],"comment"===a.type&&null!=a.embedly)try{p=JSON.parse(a.embedly);for(h in p)f=p[h],/wistia/i.test(h)||(f["type_"+f.type]=!0,f.requireHttps=!0,e.show().append(B.fill("embedly",f)))}catch(e){}return l.usePreviews&&(n=k.filter(s.entities,function(e){return"attachment"===e.type}),k.isEmpty(n)||(t=this.$(".js-previews"),g.previewHtml(n[0].url,function(e,n){if(t.empty(),null!=e){if(null!=e.login)return r("<div>").addClass("attachment-extra-info-login").html(e.login).appendTo(t),t.removeClass("hide")}else if(null!=n)return r("<div>").addClass("attachment-extra-info").html(n).appendTo(t),t.removeClass("hide")}))),m.update(this.el),this.$el.toggleClass("unsent",!!this.model.isTakingTooLong),this.renderHighlighted(),this},t.prototype.renderHighlighted=function(){return this.$el.toggleClass("mod-highlighted",!!this.highlighted),this},t.prototype._tfmFormatOpts=function(){return{card:this.model.get("data").card,board:this.model.get("data").board},siteDomain,{textData:this.model.get("data").textData}},t.prototype._withEntityInfo=function(e){var t,n,r,i,o,s,a,u,c,l;return i=k.clone(e),"attachment"===i.type&&(i.url=this.model.get("data").attachment.url),"attachmentPreview"===i.type&&(i.previewUrlForRes=null!=(n=v.get("Card",null!=(o=this.model.get("data").card)?o.id:void 0))&&(t=n.attachmentList.get(null!=(s=this.model.get("data").attachment)?s.id:void 0))?d.isHighDPI()?null!=(a=null!=(u=t.smallestPreviewBiggerThan(1e3))?u:t.biggestPreview())?a.url:void 0:null!=(c=null!=(l=t.smallestPreviewBiggerThan(500))?l:t.biggestPreview())?c.url:void 0:void 0,null==i.previewUrlForRes&&(i.previewUrlForRes=d.isHighDPI()&&null!=i.previewUrl2x?i.previewUrl2x:i.previewUrl)),"comment"===i.type&&(i.textHtml=y.comments.format(i.text,this._tfmFormatOpts()).output),"checkItem"===i.type&&(i.nameHtml=y.checkItems.format(i.text,this._tfmFormatOpts()).output),"date"===i.type&&(i.text=M(i.date).calendar()),"card"===i.type&&null!=(n=v.get("Card",i.id))&&(i.text=n.get("name")),"checklist"===i.type&&null!=(r=v.get("Checklist",i.id))&&(i.text=r.get("name")),i},t.prototype.viewMemberActionMenu=function(e){var t,n;w.stop(e),t=this.modelCache.get("Member",null!=(n=r(e.target).closest("[idmember]").attr("idmember"))?n:this.model.get("idMemberCreator")),b.toggle({elem:this.$(e.target).closest(".js-show-mem-menu"),view:o,options:{model:t,modelCache:this.modelCache}})},t.prototype.expandComment=function(e){return w.stop(e),this.$(".js-comment").removeClass("is-truncated")},t.prototype.openCard=function(e){"Card"===this.context.typeName||r(e.target).is("a,textarea")||j()||(w.stop(e),h.navigate(h.getActionUrl(this.model),{trigger:!0}))},t.prototype.openAttachmentViewer=function(e){var t,n;e.metaKey||e.ctrlKey||(t=r(e.target),t.closest(".window-main-col").length>0&&(w.stop(e),a.isActive()||(n=t.closest(".js-open-attachment-viewer").attr("data-idattachment"),a.show({model:this.model.getCard(),idAttachment:n}))))},t.prototype.reply=function(e){return w.stop(e),this.$el.trigger("replyToAction",this.model),O("Card","Reply to Comment")},t.prototype.setHighlighted=function(e){e!==this.highlighted&&(this.highlighted=e,this.renderHighlighted())},t.prototype.checkAttachment=function(e){var t,n,r;if(!e.metaKey&&!e.ctrlKey)return n=this.model.getCard(),r=e.currentTarget.href,null!=n&&0===r.indexOf(window.attachmentsDomain)&&-1!==r.indexOf(n.id)&&(t=n.attachmentList.find(function(e){return e.get("url")===r}),null!=t&&s.isViewerable(w.fileExt(t.get("url"))))?(e.preventDefault(),a.show({model:n,idAttachment:t.id})):void 0},t}(_)},{}],279:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=function(e,t){function n(){this.constructor=e}for(var r in t)j.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},j={}.hasOwnProperty;r=e("jquery"),i=e(278),o=e(483),s=e(411),u=e(486),c=e(534),l=e(6),d=e(97),p=e(20),h=e(539),f=e(542),g=e(104),v=e(129),b=e("underscore"),w=e(140),_=e(106),k=e(519),C=e(48),y=e(101),m=e(494),t.exports=_(o,u,m,a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.events=v.extendEvents({"click .js-confirm-delete-action":"confirmDeleteAction","click .js-edit-action":"editAction","click .js-discard-comment-edits":"cancelEdit","click .js-save-edit":"saveEdit","keyup .js-text":"keyAutoMention","keydown .js-text":"keydownJsText","input .js-text":"checkLength","mutated .js-text":"checkLength","click .js-comment-add-attachment":"commentAddAttachment","click .js-comment-mention-member":"commentMentionMember","click .js-comment-add-emoji":"commentAddEmoji","click .js-comment-add-card":"commentAddCard","click .js-attach-link":"attachLink"}),t.prototype.potentialAttachments=function(){var e;return e=this.model.getCard(),b.filter(w(this.model.get("data").text,g.comments),function(t){var n;return n=t.url,!e.attachmentList.any(function(e){return e.get("url")===n})})},t.prototype.getContext=function(){var e,n;return n=t.__super__.getContext.apply(this,arguments),e=this.model.getCard(),n.canAttachLink=null!=e&&e.editable()&&this.potentialAttachments().length>0,n},t.prototype.confirmDeleteAction=function(e){v.stop(e),c.toggle("delete comment",{elem:r(e.target).closest(".js-confirm-delete-action")[0],model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return C("Card","Delete Comment"),e.model.destroy()}}(this)})},t.prototype.getTextInput=function(){return this.$(".js-text")},t.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-comment-add-card:visible")[0]},t.prototype.editAction=function(e){return v.stop(e),this.$el.hasClass("is-editing")?void 0:(this.$el.addClass("is-editing"),this.$("textarea").focus().select(),this.openEditView())},t.prototype.openEditView=function(){this.$el.append(k.fill("comment_edit_controls")),this.$(".js-text").attr("placeholder","").autosize()},t.prototype.keydownJsText=function(e){return d.isForceSubmitEvent(e)?this.saveEdit(e):d.getKey(e)===p.Escape?(v.stop(e),this.cancelEdit()):this.checkInsert(e)},t.prototype.saveEdit=function(e){var t;("keypress"!==e.type||d.isForceSubmitEvent(e)||d.getKey(e)===p.Enter&&(!r(e.target).is("textarea")||r(e.currentTarget).hasClass("single-line")))&&(v.stop(e),t=this.$(".js-text").val(),this.$(".js-spinner").show(),this.$(".js-hide-on-sending").hide(),this.$(".current-comment").text(t),h.cancelEdits(),this.model.get("display").entities.comment.text=t,this.model.update("text",t),this.$(".js-text").trigger("autosize.destroy"),f.hide(),C("Card","Edit Comment"))},t.prototype.showError=function(e){},t.prototype.cancelEdit=function(){var e;e=this.model.get("data").text,this.$(".js-text").val(e),h.cancelEdits(),this.$(".js-text").trigger("autosize.destroy")},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.attachLink=function(e){var t;return v.stop(e),t=this.potentialAttachments(),f.toggle({elem:r(e.currentTarget),view:new s({model:this.getCard(),modelCache:this.modelCache,links:t})})},t}(i))},{}],280:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(33),o=e(129),s=e(522),a=e(48),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.events=function(){return{click:this.click,"click .js-close-ad":this.close}},t.isEligible=function(e){return!1},t.prototype.getAdId=function(){return this.constructor.adId},t.prototype.click=function(){return a("Ad",this.getAdId(),"Click")},t.prototype.close=function(e){var t;return o.stop(e),null!=(t=this.getAdId())&&(a("Ad",this.getAdId(),"Dismiss"),i.me().dismiss(t)),this.$el.slideUp(100)},t}(s)},{}],281:[function(e,t,n){var r,i,o,s=[].slice;r=e(282),i=e(283),o=e("underscore"),t.exports=new(function(){function e(){}return e.prototype._findAd=function(){var e,t,n;return e=arguments[0],n=arguments[1],t=3<=arguments.length?s.call(arguments,2):[],o.find(e,function(e){return!n.isDismissed(e.adId)&&e.isEligible.apply(e,[n].concat(s.call(t)))})},e.prototype.addMemberToOrganizationAd=function(e,t){return this._findAd.apply(this,[[i]].concat(s.call(arguments)))},e.prototype.boardsListAd=function(e,t){return this._findAd.apply(this,[[r]].concat(s.call(arguments)))},e}())},{}],282:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(285),o=e(129),s=e(519),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.adId="BoardsListBC",t.isEligible=function(e){var t,n,r,i;return(i=function(e,t){return o.idToDate(e.id)<o.dateBefore(t)})(e,{months:1})?(r=e.organizationList,t=r.any(function(e){return e.isPremium()}),n=r.any(function(e){return i(e,{weeks:1})}),!t&&n):void 0},t.prototype.className="member-boards-list-ad business-class-ad window-title-extra--bc-pitch",t.prototype.copyHtml=function(){return s.fill("ad_business_class")},t.prototype.click=function(){return t.__super__.click.apply(this,arguments),window.open("/business-class","_blank")},t}(i)},{}],283:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(284),o=e(519),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.adId="AddOrganizationMemberBC",t.isEligible=function(e,t){return null!=t&&!t.isPremium()},t.prototype.copyHtml=function(){return o.fill("ad_business_class_google_apps")},t}(i)},{}],284:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(287),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.className="pop-over-ad business-class-ad",t.prototype.iconClass=function(){return"business-class-mark"},t.prototype.click=function(){return t.__super__.click.apply(this,arguments),window.open("/business-class","_blank")},t}(i)},{}],285:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(280),o=e(519),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="span",t.prototype.className="member-boards-list-ad",t.prototype.render=function(){return this.$el.html(o.fill("member_boards_list_ad",{copyHtml:this.copyHtml()})),this},t.prototype.copy=function(){return""},t}(r)},{}],286:[function(e,t,n){var r,i,o;r=e("react"),i=e(514)("paid_product_info"),o=e(48),t.exports=r.createClass({displayName:"PaidProductBannerComponent",render:i.renderable(function(){var e,t,n,r,s,a,u;return u=function(){return o("Billing Page","See All Benefits Link Click")},r=this.props,s=r.stringsKey,a=r.subtitleCount,n=r.infoUrl,e=r.epilogueCount,t=r.icon,i.div({class:i.classify({"business-class-new-intro":!0,"u-gutter":!0,"u-clearfix":!0})},function(){return i.div(".business-class-new-intro-header",{style:{marginBottom:"25px"}},function(){var e,t,n;for(i.h1(".business-class-new-intro-header-title",function(){return i.format([s,"title"])}),t=e=0,n=a;n>=0?n>e:e>n;t=n>=0?++e:--e)i.p(".business-class-new-intro-header-text",function(){return i.format([s,"subtitles",t])})}),i.ul(".business-class-new-intro-list",function(){var e,t;for(t=e=0;3>e;t=++e)i.li(".business-class-new-intro-list-item",function(){return i.h3(function(){return i.format([s,"featureHeaders",t])}),i.p(function(){return i.format([s,"featureBodies",t])})})}),e&&i.div(".business-class-new-intro-header",function(){var t,n,r;for(n=t=0,r=e;r>=0?r>t:t>r;n=r>=0?++t:--t)i.p(function(){return i.format([s,"epilogue recent",n])})}),i.div(".business-class-new-intro-more",function(){return i.a(".business-class-new-intro-more-link.quiet-button",{href:n,target:"_blank",onClick:u},function(){return i.format([s,"link"])})})})})})},{}],287:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(280),o=e(519),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.className="pop-over-list-ad",t.prototype.render=function(){return this.$el.html(o.fill("pop_over_ad",{copyHtml:this.copyHtml(),iconClass:this.iconClass()})),this},t.prototype.copyHtml=function(){return""},t}(r)},{}],288:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),o=e(536),s=e(272),a=e(539),u=e(542),c=e(276),l=e(522),d=e(151),p=e("underscore"),h=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){var e,t;this.updatePinnedDrawer(),d.ensureRun(),window.Dialog=o,this.listenTo(c,"change:pinBoardsListSidebar",function(){return this.updatePinnedDrawer()}),this.initLabelState(),t=function(e){d.calc(),u.onWindowResize(),o.isVisible&&o.calcPos()},e=this.debounce(t,300),r(window).on("resize.windowEvent",e)},t.prototype.updatePinnedDrawer=function(){return r("body").toggleClass("body-pinned-drawer",c.getPinSidebar())},t.prototype.initLabelState=function(){return s.getShowText()&&r(document.body).addClass("body-card-label-text"),this.listenTo(s,"change:showText",this.toggleLabelText)},t.prototype.toggleLabelText=function(){return this.resetLabelTextAnimationTimer&&clearTimeout(this.resetLabelTextAnimationTimer),s.getShowText()?r(document.body).removeClass("body-card-label-text-off").addClass("body-card-label-text-on"):r(document.body).removeClass("body-card-label-text-on body-card-label-text").addClass("body-card-label-text-off"),this.resetLabelTextAnimationTimer=setTimeout(this.resetLabelTextAnimation,1e3)},t.prototype.resetLabelTextAnimation=function(){var e;return e=r(document.body),s.getShowText()&&e.addClass("body-card-label-text"),e.removeClass("body-card-label-text-on").removeClass("body-card-label-text-off")},t}(l)},{}],289:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;i=e(291),o=e(292),s=e(129),a=e(522),c=e(519),u=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="archive",t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-switch-section":"didClickSwitchSections","input .js-search":"searchChanged"},t.prototype.initialize=function(){return this.searchText=this.slot(""),
this.cardsView=this.subview(i,this.model,{searchText:this.searchText}).render(),this.listsView=this.subview(o,this.model,{searchText:this.searchText}).render(),this.activeSubview=this.slot(this.cardsView)},t.prototype.searchChanged=function(){return this.searchText.set(this.$searchInput.val().trim())},t.prototype.didClickSwitchSections=function(e){var t;return t=function(e,t,n){return e===t?n:t},this.activeSubview.set(t(this.activeSubview.get(),this.cardsView,this.listsView)),this.$searchInput.focus(),s.stop(e)},t.prototype.injectSubview=function(e){return this.$(".js-archive-content").append(e.el),e.didBecomeActive()},t.prototype.renderOnce=function(){return this.$el.html(c.fill("board_archive")),this.$searchInput=this.$(".js-search"),this.subscribeChanges(this.activeSubview,{in:this.injectSubview,out:function(e){return e.$el.detach()}}),this.watch("activeSubview",function(e){return function(t){var n;return n=t===e.cardsView?"switch to archived lists":"switch to archived cards",e.$(".js-switch-section").text(u(n))}}(this)),this.watch("activeSubview.isLoading",function(e){return function(t){return e.$(".js-loading-spinner").toggleClass("hide",!t),e.$(".js-archive-content").toggleClass("hide",t)}}(this)),this},t}(a)},{}],290:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),o=e(421),s=e(534),a=e(6),u=e(536),c=e(129),l=e(522),d=e(519),p=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.tagName="div",t.prototype.className="archived-list-card",t.prototype.events={"click .list-card":"openCard","click .js-delete":"deleteModel","click .js-reopen":"reopen"},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t,n;return t={reOpenText:this.options.reOpenText,canDelete:null!=(n=this.options.canDelete)?n:!1},e=this.subview(o,this.model,{dontFilter:!0}),e.render(),this.$el.append(e.el),this.$el.append(d.fill("archived_card_options",t,{editable:this.model.editable()})),this},t.prototype.openCard=function(e){c.stop(e),a.showCardDetail(this.model),u.calcPos()},t.prototype.deleteModel=function(e){var t;c.stop(e),s.toggle("delete card",{elem:null!=(t=r(e.target).closest(".js-delete"))?t[0]:void 0,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),p("Card","Delete","Via Archive")}}(this)})},t.prototype.reopen=function(e){return c.preventDefault(e),this.model.update({closed:!1},function(e){return function(){return p("Card","Reopen","Via Archive")}}(this)),!1},t}(l)},{}],291:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].slice;r=e(290),o=e(80),s=e("hearsay"),a=e(38),u=e(522),c=e("underscore"),p=e(519),d=e(101),l=e(238),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n,i,s;return h(t,e),t.prototype.CARDS_PER_PAGE=30,i={},s=function(e){var t;return t=i,{lease:function(){var n;return n=function(){(t===i||n===t)&&e.apply(this,arguments)},t=n,n}}},t.prototype.initialize=function(e){var t;return this.searchText=e.searchText,this.isLoadingInitialCards=this.slot(!1),this.isLoadingMoreCards=this.slot(!1),this.isLoadingSearchResults=this.slot(!1),this.isLoading=this.using(this.isLoadingInitialCards.or(this.isLoadingSearchResults)),this.isSearching=this.using(this.searchText.map(function(e){return e.length>0}).distinct()),this.hasMoreCards=this.slot(!1),this.searchResults=this.slot([]),this.sortedContiguousCards=this.slot([]),this.updateSearchCallback=s(function(e){return function(t){var n;return n=t.map(function(t){return e.modelCache.get("Card",t.id)}),e.searchResults.set(n),e.isLoadingSearchResults.set(!1)}}(this)),t=function(e){return function(t){return e.sortedContiguousCards.set(c.without(e.sortedContiguousCards.get(),t)),e.searchResults.set(c.without(e.searchResults.get(),t))}}(this),this.listenTo(this.modelCache,{"remove:Card":t,"change:Card:closed":function(e){return function(n){n.get("idBoard")===e.model.id&&(n.get("closed")?e.sortedContiguousCards.set([n].concat(f.call(e.sortedContiguousCards.get()))):t(n))}}(this)}),this.cards=this.using(this.isSearching.if(this.searchResults,this.sortedContiguousCards))},t.prototype.events={"click .js-more-cards":"getMoreCards"},n=!1,t.prototype.didBecomeActive=function(){var e;if(!this.hasBeenActiveBefore)return this.hasBeenActiveBefore=!0,e={limit:this.CARDS_PER_PAGE},this.isLoadingInitialCards.set(!0),a.loadClosedCards(this.model.id,e).tap(l(this,"didLoadContiguousCards")).finally(function(e){return function(){return e.isLoadingInitialCards.set(!1)}}(this)).done()},t.prototype.didLoadContiguousCards=function(e){var t,n;return this.hasMoreCards.set(e.length===this.CARDS_PER_PAGE),n=c.sortBy(e,function(e){return function(t){return-e.cardSortRank(t)}}(this)),t=f.call(this.sortedContiguousCards.get()).concat(f.call(n)),this.sortedContiguousCards.set(c.uniq(t))},t.prototype.cardSortRank=function(e){var t,n;return null!=(n="function"==typeof(t=o.parse(e.get("dateLastActivity"))).getTime?t.getTime():void 0)?n:null},t.prototype.getMoreCards=function(){var e,t;return e=c.last(this.sortedContiguousCards.get()),t={limit:this.CARDS_PER_PAGE,before:null!=e?this.cardSortRank(e):null},this.isLoadingMoreCards.set(!0),a.loadClosedCards(this.model.id,t).tap(l(this,"didLoadContiguousCards")).finally(function(e){return function(){return e.isLoadingMoreCards.set(!1)}}(this)).done()},t.prototype.vigor=t.VIGOR.SOME,t.prototype.renderOnce=function(){var e,t;return this.$el.html(p.fill("archived_cards")),this.watch("isLoadingMoreCards",function(e){return this.$(".js-more-cards").attr("disabled",e)}),t=this.hasMoreCards.and(this.isSearching.not()),this.subscribe(t,function(e){return this.$(".js-more-cards").toggleClass("hide",!e)}),this.watch("isSearching",function(e){var t;return t=e?"no results":"no archived cards",this.$(".js-empty-message").text(d(t))}),this.watch("cards",function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)}),this.watch("isLoadingSearchResults",function(e){return this.$(".js-search-loading").toggleClass("hide",!e)}),e=this.debounce(this.loadSearchResults,400),this.subscribe(this.searchText.filter(function(e){return e.length>0}),function(){return this.isLoadingSearchResults.set(!0),e.call(this)}),this.subscribe(this.cards,this.frameDebounce(this.renderCards))},t.prototype.loadSearchResults=function(){var e;return e={query:"is:archived "+this.searchText.get(),modelTypes:"cards",idBoards:this.model.id,card_stickers:!0,card_attachments:"cover",partial:!0},a.loadSearchData(e).get("cards").then(this.updateSearchCallback.lease()).done()},t.prototype.renderCards=function(){var e,t,n;e=this.$(".js-archive-items"),e.children().detach(),n=function(){var e,n,i,o;for(i=this.cards.get(),o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(this.subview(r,t,{reOpenText:d("unarchive card"),canDelete:!0}));return o}.call(this),this.appendSubviews(n,e)},t}(u)},{}],292:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].slice;i=e(293),o=e(38),s=e(129),a=e(522),u=e("underscore"),l=e(519),c=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.initialize=function(e){return this.searchText=e.searchText,this.isLoading=this.slot(!0),this.allArchivedLists=this.slot([]),this.sortedFilteredLists=this.allArchivedLists.combine(this.searchText).map(function(e){var t,n,r;return n=e[0],r=e[1],""===r?n:(t=s.buildFuzzyMatcher(r),u.filter(n,function(e){return t(e.get("name"))}))}).map(function(e){return u.sortBy(e,function(e){return e.get("name")})}),this.using(this.sortedFilteredLists),this.listenTo(this.modelCache,"change:List:closed",function(e){return function(t){return t.get("closed")?e.allArchivedLists.set([t].concat(h.call(e.allArchivedLists.get()))):e.allArchivedLists.set(u.without(e.allArchivedLists.get(),t))}}(this))},t.prototype.hasBeenActiveBefore=!1,t.prototype.didBecomeActive=function(){this.hasBeenActiveBefore||(this.hasBeenActiveBefore=!0,o.loadArchivedLists(this.model.id).then(function(e){return function(t){var n;return n=e.modelCache.find("List",function(t){return t.get("idBoard")===e.model.id&&t.get("closed")}),e.allArchivedLists.set(n),e.isLoading.set(!1)}}(this)))},t.prototype.vigor=t.VIGOR.SOME,t.prototype.renderOnce=function(){return this.$el.html(l.fill("archived_lists")),this.watch("searchText",function(e){var t;return t=0===e.length?"no archived lists":"no results",this.$(".js-empty-message").text(c(t))}),this.watch("sortedFilteredLists",function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)}),this.watch("sortedFilteredLists",this.frameDebounce(this.renderLists))},t.prototype.renderLists=function(){var e,t;return this.$(".js-archive-items").children().detach(),e=function(){var e,n,r,o;for(r=this.sortedFilteredLists.get(),o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(this.subview(i,t,{reOpenText:c("unarchive list"),canDelete:!1}));return o}.call(this),this.appendSubviews(e,this.$(".js-archive-items")),this},t}(a)},{}],293:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;i=e(534),o=e(542),s=e(129),a=e(522),l=e(48),u=e(517)("archive_item"),c=u.renderable(function(e){var t,n,r,i,o,s;return s=e.url,i=e.name,r=e.deleting,n=e.canReopen,o=e.reOpenText,t=e.canDelete,u.p(".item-name",function(){return s&&!r?u.a({href:s},function(){return u.text(i)}):u.span(function(){return u.text(i)})}),r?u.div(".options.quiet",function(){return u.format("deleting")}):u.div(".options",function(){return n&&u.a(".button-link.js-reopen",{href:"#"},function(){return u.icon("refresh"),u.text(" "),u.text(o)}),t?u.a(".button-link.negate.js-delete",{href:"#"},function(){return u.icon("remove","delete")}):void 0})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.tagName="li",t.prototype.className="u-clearfix",t.prototype.events={"click .js-reopen":"reopen","click .js-delete":"delete"},t.prototype.initialize=function(){return this.listenTo(this.model,"deleting",this.render)},t.prototype.canReopen=function(){return null!=this.model.owned?this.model.owned():this.model.editable()},t.prototype.canDelete=function(){var e;return"function"==typeof(e=this.model).owned?e.owned():void 0},t.prototype.render=function(){var e,t;return this.$el.html(c({name:this.model.get("name"),url:"function"==typeof(e=this.model).getUrl?e.getUrl():void 0,reOpenText:this.options.reOpenText,canDelete:this.canDelete(),canReopen:this.canReopen(),deleting:"function"==typeof(t=this.model).isDeleting?t.isDeleting():void 0})),this},t.prototype.reopen=function(e){return s.preventDefault(e),o.hide(),this.model.update({closed:!1},function(e){return function(){var t;return l(e.model.typeName,"Reopen","Via Archive"),"function"==typeof(t=e.options).onReopen?t.onReopen(e.model):void 0}}(this)),!1},t.prototype.delete=function(e){return s.stop(e),i.toggle("delete board",{elem:e.target,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.startDelete().then(function(){return l("Board","Delete","Via Closed Boards List")}).done()}}(this)})},t}(a)},{}],294:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(293),o=e(6),s=e(522),c=e(519),u=e(101),a=e(238),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.boardList,{"change:closed add remove reset":this.frameDebounce(this.render)})},t.prototype.render=function(){var e,t,n,i;return t=this.model.boardList,n={empty:0===t.filter(function(e){return e.get("closed")}).length},this.$el.html(c.fill("closed_boards",n)),e=this.$(".js-archive-items"),i=t.filter(a.method("get","closed")).map(function(e){return function(t){return e.subview(r,t,{onReopen:e.onReopen.bind(e),reOpenText:u("unarchive board")})}}(this)),this.appendSubviews(i,e),this},t.prototype.onReopen=function(e){return o.displayBoard({idBoard:e.id}).done()},t}(s)},{}],295:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N=function(e,t){function n(){this.constructor=e}for(var r in t)V.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},V={}.hasOwnProperty;j=e("underscore"),r=e(297),o=e(482),s=e(33),a=e(79),u=e(534),c=e(80),l=e(97),d=e(20),p=e(35),O=e(510),m=e(505),f=e(504),g=e(506),v=e(509),y=e(685),_=e(299),w=e(542),k=e("bluebird"),h=e(675),b=e(684),P=e(85),C=e(129),x=e(522),T=e(146),M=e(101),E=e(517)("plugin_attachment_thumbnail"),L=e(709),A=e(48),D=e(53),I=e("xtend"),B=E.renderable(function(e){var t,n,r,i,o,s,a,u,c,l,d,p,h;return t=e.canRemove,n=e.canReply,r=e.created,i=e.createdBy,o=e.image,a=e.isHidden,s=e.initialize,c=e.modified,l=e.modifiedBy,d=e.title,h=e.url,a?E.div:((null==o||null==o.url)&&(o={url:""}),u={href:h,target:h,title:d},p=function(){return n&&E.span(function(){return E.a(".attachment-thumbnail-details-title-options-item.js-reply",{href:"#"},function(){return E.span(".attachment-thumbnail-details-options-item-text",function(){return E.format("comment")})})}),t?E.span(function(){return E.a(".attachment-thumbnail-details-title-options-item.dark-hover.js-confirm-delete",{href:"#"},function(){return E.span(".attachment-thumbnail-details-options-item-text",function(){return E.format("remove")})})}):void 0},o.logo?E.a(".attachment-thumbnail-preview",j.clone(u),function(){return E.span(".attachment-thumbnail-preview-power-up-logo",function(){return E.img({class:"attachment-thumbnail-preview-power-up-logo-image",src:o.url+"?color=999"})})}):E.a(".attachment-thumbnail-preview",I(u,{style:E.stylify({"background-image":o.url?E.urlify(o.url):void 0,"background-position-y":"top"===o.y?"0px":void 0,"background-position-x":"left"===o.x?"0px":void 0,"background-size":function(){switch(o.size){case"cover":return"cover";case"original":return"inherit";default:return"contain"}}()})})),void E.p(".attachment-thumbnail-details",function(){var e,t;return E.span(".attachment-thumbnail-name.js-attachment-name",function(){return E.text(d)}),E.span(".quiet.attachment-thumbnail-details-options",function(){return E.a(".attachment-thumbnail-details-title-action.dark-hover.js-attachment-action",j.clone(u),function(){return E.icon("external-link"),E.span(".attachment-thumbnail-details-options-item-text.js-direct-link")})}),E.textarea(".attachment-thumbnail-details-title.js-attachment-thumbnail-details hide",{maxlength:256},function(){return E.text(d)}),E.span(".u-block.quiet.attachment-thumbnail-details-title-options",function(){return p()}),E.span(".attachment-thumbnail-details-title",j.clone(u),function(){return null!=r&&E.span(".u-block.quiet",function(){return null!=i?E.format("created-by",{date:r,user:i}):E.format("created",{date:r})}),null!=c?E.span(".u-block.quiet",function(){return null!=l?E.format("modified-by",{date:c,user:l}):E.format("modified",{date:c})}):void 0}),null!=s&&"iframe"===s.type?(t=s.url,e=s.height,E.iframe(".plugin-iframe.plugin-thumbnail-initialize",{src:t,style:e?"height:"+e+"px;":void 0})):void 0}))}),S=function(e,t){return null==t&&(t=null),e.catch(m.Error.UnableToLoadManifest,function(){return t})},t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return N(t,e),t.prototype.className="attachment-thumbnail",t.prototype.events={"click .js-open-viewer":"openViewer","click .js-open-in-new-window":"openLink","click .js-direct-link":"dontOpenViewer","click .js-download":"download","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover","click .js-confirm-delete":"confirmDelete","click .js-reply":"reply","click .js-enable-power-up":"enablePowerUp","click .js-attachment-name":"enableEditAttachmentName","click .js-attachment-thumbnail-details":"dontOpenViewer","click .js-show-power-up-suggestions-info":"showPowerUpSuggestionsInformation","keydown .js-attachment-thumbnail-details":"onEditAttachmentName","blur .js-attachment-thumbnail-details":"saveAttachmentName",moveattachment:"rearrangeAttachment"},t.prototype.initialize=function(){return this.isEditingAttachmentName=!1,this.powerUpEnablementInProgress=!1,this.listenTo(s.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.renderNormal)),this.listenTo(s.me(),"change:messagesDismissed",this.frameDebounce(this.renderNormal))},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=this.model.getCard(),e=t.getBoard(),this.subscribe(O(e,t).combine(t.snoop("idAttachmentCover").combine(this.model.snoop("previews").combine(this.model.snoop("name")))),function(e){return function(){return e.renderPluginThumbnail().catch(v.Error.NotHandled,function(){return e.renderNormal()}).done()}}(this)),this},t.prototype.renderPluginThumbnail=function(){var e,t;return t=this.model.getCard(),e=t.getBoard(),v.one({command:"attachment-thumbnail",card:t,board:e,options:g.attachment(this.model)}).then(function(n){return function(r){var i;return null!=(null!=r?r.title:void 0)&&null!=(i=n.options)&&"function"==typeof i.onPluginThumbnail&&i.onPluginThumbnail(r.idPlugin),(null!=r?r.url:void 0)&&!T(r.url)&&(r.url=n.model.get("url")),n.options.isHidden&&n.$el.addClass("hide"),n.$el.html(B(I({url:n.model.get("url")},r,{canRemove:n.model.editable(),canReply:null!=n.options.onReply&&e.canComment(s.me()),created:r.created?new Date(r.created):void 0,modified:r.modified?new Date(r.modified):void 0,title:n.model.get("name")===r.url?r.title:n.model.get("name"),isHidden:n.options.isHidden}))),c.update(n.el),n.initIFrames(e,t),n.$(".js-attachment-thumbnail-details").autosize({append:!1})}}(this)).return()},t.prototype.renderNormal=function(){var e,t;return t=this.model.getCard(),e=t.getBoard(),k.all([r.getAttachmentData(this.model),k.try(function(t){return function(){return e.getAvailablePlugins().filter(function(e){return e.id===_.getPowerUpIdFromClaimedPowerUpDomains(t.model.get("url"))}).map(function(e){var t;return t=f.get(e),k.props({id:e.id,name:t.getName(),details:S(t.getDetails()),iconUrl:S(t.getIconUrl())})}).get(0)}}(this))]).spread(function(e){return function(n,i){var o,u,l,d,h,m,f,g;return n.canUseViewer="dropbox"!==e.model.getServiceKey()&&r.isViewerable(n.ext)&&!a.isTouch(),n.canReply=null!=(d=e.model.getCard().getBoard())?d.canComment(s.me()):void 0,l=e.model.smallestPreviewBiggerThan(110,80),a.isHighDPI()&&(u=e.model.smallestPreviewBiggerThan(220,160),l=null!=u?u:l),null!=l&&(g=null!=(h=t.getBoard())&&null!=(m=h.get("prefs"))?m.cardCovers:void 0,n.isCover=g&&t.get("idAttachmentCover")===e.model.id,n.imgSrc=l.url),n.isUpload=e.model.get("isUpload"),n.editable=e.model.editable(),e.suggestedPlugin=i,(null!=(f=e.suggestedPlugin)?f.id:void 0)&&(t.getBoard().isPluginEnabled(e.suggestedPlugin.id)?n.pluginEnablementInProgress=null!=e.powerUpEnablementInProgress&&e.powerUpEnablementInProgress:s.me().shouldShowPowerUpSuggestionFor(e.suggestedPlugin.id)&&(D("card-detail","views","Power-Up enable suggestion","","","",e.suggestedPlugin.id),n.plugin=e.suggestedPlugin)),e.options.isHidden&&e.$el.addClass("hide"),e.$el.html(L(I(n,{isHidden:e.options.isHidden}))),e.renderCoverState(),c.update(e.el),n.isKnownService&&(o=e.$(".js-attachment-thumbnail-details"),p.thumbnailHtml(n.url,n,function(e,t){return null==e&&null!=t?(o.html(t),c.update(o)):void 0})),e.$(".js-attachment-thumbnail-details").autosize({append:!1})}}(this)).done(),this},t.prototype.openViewer=function(e){e.metaKey||e.ctrlKey||this.isEditingAttachmentName||(C.stop(e),o.isActive()||(o.show({model:this.model.getCard(),attachmentModel:this.model}),A("Attachment","Open Attachment Viewer",this.model.getType())))},t.prototype.dontOpenViewer=function(e){return e.stopPropagation()},t.prototype.renderCoverState=function(){var e,t,n,r,i,o,s,a;n=null!=(i=this.model.getCard())&&null!=(o=i.getBoard())?o.getPref("cardCovers"):void 0,e=this.$(".js-make-cover").addClass("hide"),t=this.$(".js-remove-cover").addClass("hide"),(null!=(s=this.model.get("previews"))?s.length:void 0)>0&&n&&(r=(null!=(a=this.model.getCard())?a.get("idAttachmentCover"):void 0)===this.model.id,e.toggleClass("hide",r),t.toggleClass("hide",!r))},t.prototype.download=function(e){C.stopPropagation(e),A("Attachment","Attachment Thumbnail","Download")},t.prototype.makeCover=function(e){C.stop(e),w.hide(),this.model.getCard().makeCover(this.model),A("Attachment","Attachment Thumbnail","Make Cover")},t.prototype.removeCover=function(e){C.stop(e),w.hide(),this.model.getCard().removeCover(null),A("Attachment","Attachment Thumbnail","Remove Cover")},t.prototype.confirmDelete=function(e){var t;C.stop(e),t=this.model.get("isUpload")?"delete attachment":"remove attachment",u.toggle(t,{elem:this.$(".js-confirm-delete"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),A("Attachment","Delete Attachment",e.model.getType())}}(this)}),A("Attachment","Attachment Thumbnail","Confirm Delete")},t.prototype.reply=function(e){return C.stop(e),this.options.onReply()},t.prototype.enablePowerUp=function(e){var t,n;return C.stop(e),t=this.model.getCard().getBoard(),n=this.suggestedPlugin,t.canEnableAdditionalPowerUps()?t.isPluginEnabled(n.id)?void this.renderNormal():(this.powerUpEnablementInProgress=!0,this.renderNormal(),t.enablePlugin(n.id).then(function(e){return function(){return e.powerUpEnablementInProgress=!1,e.renderNormal()}}(this)).done(),void D("card-detail","enables","Power-Up","","","enable button",n.id)):void w.toggle({elem:this.$(e.target),view:new h({model:t,plugin:n}),autoPosition:!0})},t.prototype.enableEditAttachmentName=function(e){return this.model.getCard().editable()?(C.stopPropagation(e),this.isEditingAttachmentName=!0,this.$(".js-attachment-name").addClass("hide"),this.$(".js-attachment-action").addClass("hide"),this.$(".js-attachment-thumbnail-details").removeClass("hide").trigger("autosize.resize").focus().select()):void 0},t.prototype.showPowerUpSuggestionsInformation=function(e){var t,n,r;D("card-detail","views","Power-Up enable suggestion info screen","","","by clicking the info icon",this.suggestedPlugin.id),C.stopPropagation(e),n=this.model.getCard(),t=n.getBoard(),r={model:this.suggestedPlugin,board:t},w.toggle({elem:this.$(e.target),view:new b(r),autoPosition:!0})},t.prototype.onEditAttachmentName=function(e){var t;return t=this.$(e.currentTarget).trigger("autosize.resize"),l.getKey(e)===d.Enter||l.getKey(e)===d.Escape?(C.stop(e),t.blur()):void 0},t.prototype.saveAttachmentName=function(e){var t,n,r,i;return this.isEditingAttachmentName=!1,n=this.$(e.currentTarget),t=this.$(".js-attachment-name"),r=n.val().replace(/\s+/g," ").trim(),i=this.model.get("name"),r.length>256&&(r=r.substring(0,256),n.text(r)),r!==i&&r.length>0?(t.text(r),this.model.update("name",r)):(n.val(i),t.text(i)),this.$(".js-attachment-name").removeClass("hide"),this.$(".js-attachment-action").removeClass("hide"),this.$(".js-attachment-thumbnail-details").addClass("hide")},t.prototype.rearrangeAttachment=function(e,t){var n,r,i;return r=this.model.getCard(),null!=r?(n=t.item.parent().children(),i=n.index(t.item),this.model.update("pos",r.calcAttachmentPos(i,this.model)),this.model.collection.sort({silent:!0}),this.$(".plugin-iframe").length&&this.renderPluginThumbnail(),A("Attachment","Reorder Attachment")):void 0},t.prototype.openLink=function(){var e;return e=this.model.get("url"),window.open(e,e)},t}(y)},{}],296:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty,w=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),i=e(297),s=e(80),a=e(20),u=e(506),c=e(509),l=e(542),d=e(520),p=e(129),h=e(522),m=e("underscore"),g=e(519),v=e(48),f=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.className="attachment-viewer",t.prototype.initialize=function(){var e,t;return l.hide(),this.allowsCardCovers=null!=(t=this.model.getBoard())?t.getPref("cardCovers"):void 0,this.currentAttachment=this.options.attachmentModel,e=this.options.idAttachment,null!=e&&(this.currentAttachment=this.model.attachmentList.find(function(t){return t.id===e})),this.idPluginAttachments=[],this.getIdPluginAttachments(),this.listenTo(this.model.attachmentList,"add remove reset",this.getIdPluginAttachments)},t.prototype.events={"click .js-show-next-frame":"showNextFrame","click .js-show-prev-frame":"showPrevFrame","mouseenter .js-show-next-frame":"hintNextFrame","mouseenter .js-show-prev-frame":"hintPrevFrame","mouseleave .js-show-next-frame":"clearHint","mouseleave .js-show-prev-frame":"clearHint","click .js-stop":"stop","click .js-close-viewer":"close","click .js-open-delete-confirm":"openDeleteConfirm","click .js-close-delete-confirm":"closeDeleteConfirm","click .js-delete":"delete","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover",shortcut:"shortcut"},t.prototype.shortcut=function(e){switch(e){case a.Escape:return this.close(),["Esc - Close Attachment Viewer","Attachment Viewer"];case a.ArrowRight:return this.showNextFrame(),["Right Arrow - Next Attachment","Attachment Viewer"];case a.ArrowLeft:return this.showPrevFrame(),["Left Arrow - Previous Attachment","Attachment Viewer"]}},t.prototype.getAttachmentModels=function(){return this.model.attachmentList.models.filter(function(e){return function(t){var n;return n=t.id,w.call(e.idPluginAttachments,n)<0}}(this))},t.prototype.getAttachmentModelsLength=function(){return this.getAttachmentModels().length},t.prototype.getCurrentAttachmentIndex=function(){return m.indexOf(this.getAttachmentModels(),this.currentAttachment)},t.prototype.getPrevAttachmentIndex=function(){var e;return e=this.getCurrentAttachmentIndex()+1,e>=this.getAttachmentModelsLength()?null:e},t.prototype.getPrevModel=function(){var e;return e=this.getPrevAttachmentIndex(),null!=e?this.getAttachmentModels()[e]:null},t.prototype.getNextAttachmentIndex=function(){var e;return e=this.getCurrentAttachmentIndex()-1,0>e?null:e},t.prototype.getNextModel=function(){var e;return e=this.getNextAttachmentIndex(),null!=e?this.getAttachmentModels()[e]:null},t.prototype.render=function(){var e,t,n,r,i;return e=this.model.toJSON(),e.numAttachments=this.getAttachmentModelsLength(),this.$el.html(g.fill("attachment_viewer",e)),i=this.currentAttachment.id,w.call(this.idPluginAttachments,i)>=0&&(t=this.getAttachmentModels(),this.currentAttachment=t[t.length-1]),this.addNewFrame(this.currentAttachment,"center"),n=this.getNextModel(),null!=n&&this.addNewFrame(n,"right"),r=this.getPrevModel(),null!=r&&this.addNewFrame(r,"left"),this.setDetailsAndControls(),d.addHandler(this,{scope:"attachment_viewer",modal:!0}),this},t.prototype.setDetailsAndControls=function(){i.getAttachmentData(this.currentAttachment).then(function(e){return function(t){var n,r;return t.canMakeCover=e.allowsCardCovers&&(null!=(r=t.previews)?r.length:void 0)>0,t.isCover=e.allowsCardCovers&&e.model.get("idAttachmentCover")===e.currentAttachment.id,n=e.currentAttachment.get("isUpload")?"delete attachment":"remove attachment",m.extend(t,{removeButtonText:f([n,"button"]),removeMessageText:f([n,"message"]),removeConfirmText:f([n,"confirm"]),removeCancelText:f([n,"cancel"])}),e.$(".js-display-frame-details").html(g.fill("attachment_viewer_frame_details",t,{editable:e.model.editable()})),e.$(".js-show-prev-frame").toggleClass("hide",null==e.getPrevAttachmentIndex()),e.$(".js-show-next-frame").toggleClass("hide",null==e.getNextAttachmentIndex()),s.update(e.el)}}(this)).done()},t.prototype.addNewFrame=function(e,t){return i.getAttachmentData(e).then(function(e){return function(n){var o,s,a,u,c,l,d,h,m,f,v,b,y,_;return null!=t&&(n.directionClass="attachment-viewer-frame-"+t),d=n.ext,u=w.call(i.imageExts(),d)>=0||(null!=(h=n.previews)?h.length:void 0)>0,m=n.ext,o=w.call(i.audioExts(),m)>=0,f=n.ext,c=w.call(i.videoExts(),f)>=0,v=n.ext,a=w.call(i.iFrameableExts(),v)>=0,b=n.ext,s=w.call(i.googleViewerableExts(),b)>=0,n.isExternal?n.isPlaceholder=!0:u?(n.isImage=!0,null!=n.previews&&null!=(l=null!=(y=p.biggestPreview(n.previews))?y.url:void 0)&&(n.url=l)):o?n.isAudio=!0:c?n.isVideo=!0:a?n.isIFrameable=!0:s?(n.isIFrameable=!0,_=encodeURIComponent(n.url),n.url="https://docs.google.com/viewer?embedded=true&url="+_):(n.isPlaceholder=!0,n.openText="Download"),e.$(".js-frames").append(g.fill("attachment_viewer_frame",n,{editable:e.model.editable()})),e.defer(function(){return r(".attachment-viewer-frame").addClass("attachment-viewer-frame-loaded")})}}(this)).done(),this},t.prototype.focusFrame=function(e,t){var n,i,o,s;switch(this.currentAttachment=e,n=m.find(this.$(".attachment-viewer-frame"),function(t){return function(t){return r(t).attr("data-idAttachment")===e.id}}(this)),t){case"right":i=this.$(".attachment-viewer-frame-left"),s="attachment-viewer-frame-left",o=this.getNextModel();break;case"left":i=this.$(".attachment-viewer-frame-right"),s="attachment-viewer-frame-right",o=this.getPrevModel()}this.$(".attachment-viewer-frame-center").removeClass("attachment-viewer-frame-center").addClass(s),r(n).removeClass("attachment-viewer-frame-left attachment-viewer-frame-right").addClass("attachment-viewer-frame-center"),i.remove(),null!=o?this.addNewFrame(o,t):this.clearHint(),this.setDetailsAndControls()},t.prototype.showNextFrame=function(e){var t;p.stop(e),t=this.getNextModel(),null!=t&&this.focusFrame(t,"right"),v("Attachment Viewer","Show Next Frame")},t.prototype.showPrevFrame=function(e){var t;p.stop(e),t=this.getPrevModel(),null!=t&&this.focusFrame(t,"left"),v("Attachment Viewer","Show Previous Frame")},t.prototype.hintNextFrame=function(){this.$el.addClass("attachment-viewer-frames-next-hint")},t.prototype.hintPrevFrame=function(){this.$el.addClass("attachment-viewer-frames-prev-hint")},t.prototype.clearHint=function(){this.$el.removeClass("attachment-viewer-frames-next-hint attachment-viewer-frames-prev-hint")},t.prototype.stop=function(e){return p.stopPropagation(e)},t.prototype.openDeleteConfirm=function(e){p.stop(e),this.$(".js-meta").addClass("hide"),this.$(".js-confirm-delete").removeClass("hide"),v("Attachment Viewer","Open Delete Attachment Confirm")},t.prototype.closeDeleteConfirm=function(e){p.stop(e),this.$(".js-meta").removeClass("hide"),this.$(".js-confirm-delete").addClass("hide"),v("Attachment Viewer","Close Delete Attachment Confirm")},t.prototype.delete=function(e){p.stop(e),this.currentAttachment.destroy(),this.close(),v("Attachment Viewer","Delete Attachment")},t.prototype.renderToggleCover=function(){var e,t;e=this.allowsCardCovers&&this.currentAttachment.get("previews").length>0,this.$(".js-cover-options").toggleClass("hide",!e),t=this.allowsCardCovers&&this.model.get("idAttachmentCover")===this.currentAttachment.id,this.$(".js-make-cover-box").toggleClass("hide",t),this.$(".js-remove-cover-box").toggleClass("hide",!t)},t.prototype.makeCover=function(){this.model.makeCover(this.currentAttachment),this.renderToggleCover(),v("Attachment Viewer","Make Cover")},t.prototype.removeCover=function(){
this.model.removeCover(null),this.renderToggleCover(),v("Attachment Viewer","Remove Cover")},t.prototype.close=function(){this.remove(),d.removeHandler(this),v("Attachment Viewer","Close Viewer")},t.prototype.getIdPluginAttachments=function(){return c.all({timeout:5e3,command:"attachment-sections",card:this.model,board:this.model.getBoard(),options:{entries:u.attachments(this.model.attachmentList)}}).then(function(e){return function(t){return e.idPluginAttachments=m.chain(t).map(function(e){var t;return null!=e&&null!=(t=e.claimed)?t.map(function(e){return e.id}):void 0}).flatten().value(),e.render()}}(this))},t}(h)},{}],297:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(79),i=e(103),o=e(35),s=e("bluebird"),a=e(129),l=e(117),d=e("xtend"),u=e("underscore"),c=e(101),t.exports=function(){return{getAttachmentData:function(e){var t,n;return t=e.get("url"),n=e.getServiceKey(),o.interpret(t,e.modelCache).then(function(t){return function(t){var o;if(null!=t)return{isKnownService:!0,meta:t.name,previewClass:t.previewClass,name:t.text};switch(n){case"trello":return o=r.respectsCrossDomainDownloadAttribute(),{meta:i.bytes(e.get("bytes")),openText:c(o?"attachments.trello.download":"attachments.trello.open"),doDownload:o,openIconClass:o?"download":"external-link",isExternal:!1};case"gdrive":return{meta:l(["mime",e.get("mimeType")]),previewClass:"attachment-thumbnail-preview-google-drive-logo"};case"dropbox":return{previewClass:"attachment-thumbnail-preview-dropbox-logo"};case"onedrive":return{previewClass:"attachment-thumbnail-preview-one-drive-logo"};case"box":return{previewClass:"attachment-thumbnail-preview-box-logo"};case"other":return{ext:"LINK"}}}}(this)).then(function(r){var i,o;return i=d({doDownload:!1,isKnownService:!1,isExternal:!0,openIconClass:"external-link"},e.toJSON(),r),null==i.meta&&(i.meta=c(["attachments",n,"type"])),null==i.openText&&(i.openText=c(["attachments",n,"open"])),null==i.removeText&&(i.removeText=c(["attachments",n,"remove"])),null==i.ext&&(i.ext=null!=(o=a.fileExt(e.get("name")))?o:a.fileExt(t),null!=i.ext&&i.ext.length>6&&(i.ext=null)),i})},availableExts:function(){var e,t,n,r,i;if(null==this._availableExts){for(e=[],i=navigator.mimeTypes,t=0,n=i.length;n>t;t++)r=i[t],e=e.concat(r.suffixes.split(","));this._availableExts=u.compact(u.uniq(e))}return this._availableExts},imageExts:function(){return["bmp","gif","jpeg","jpg","png","svg","webp"]},getPlayableExts:function(e,t){var n;return n=document.createElement(t),u.chain(e).filter(function(e){var t;return t=e.types,u.any(t,function(e){return""!==n.canPlayType(e)})}).pluck("exts").flatten().value()},audioExts:function(){var e;return this._audioExts?this._audioExts:(e=[{exts:["m4a"],types:["audio/x-m4a;","audio/aac;"]},{exts:["mp3"],types:["audio/mpeg;"]},{exts:["opus"],types:['audio/ogg; codecs="opus"']},{exts:["ogg"],types:['audio/ogg; codecs="vorbis"']},{exts:["wav"],types:['audio/wav; codecs="1"']}],this._audioExts=this.getPlayableExts(e,"audio"))},videoExts:function(){var e;return this._videoExts?this._videoExts:(e=[{exts:["mp4"],types:['video/mp4; codecs="mp4v.20.8"']},{exts:["mov","h264"],types:['video/mp4; codecs="avc1.42E01E"','video/mp4; codecs="avc1.42E01E, mp4a.40.2"']},{exts:["ogv"],types:['video/ogg; codecs="theora"']},{exts:["webm"],types:['video/webm; codecs="vp8, vorbis"']}],this._videoExts=this.getPlayableExts(e,"video"))},googleViewerableExts:function(){var e;return e=["doc","docx","ppt","pptx","rtf","xls","xlsx"],p.call(this.availableExts(),"pdf")>=0||e.push("pdf"),null!=this._googleViewerableExts?this._googleViewerableExts:this._googleViewerableExts=e},iFrameableExts:function(){var e,t;return e=["css","js","txt"],t=["pdf"],null!=this._iFrameableExts?this._iFrameableExts:this._iFrameableExts=u.intersection(t,this.availableExts()).concat(e)},allViewerableExts:function(){return null!=this._viewerableExts?this._viewerableExts:(this._viewerableExts=this.imageExts().concat(this.audioExts()).concat(this.videoExts()).concat(this.googleViewerableExts()).concat(this.iFrameableExts()),this._viewerableExts)},isViewerable:function(e){return p.call(this.allViewerableExts(),e)>=0}}}()},{}],298:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(522),o=e(710),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=function(){return this.$el.html(o()),this},t}(i)},{}],299:[function(e,t,n){var r,i,o;i=e("underscore"),o=e(259),r=e(16),t.exports=new(function(){function e(){}return e.prototype._hasIPAddressFormat=function(e){return/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/.test(e)},e.prototype._urlIsValid=function(e){var t;return null==e?!1:(t=e.protocol,"http:"!==t&&"https:"!==t?!1:this._hasIPAddressFormat(e.hostname)?!1:!0)},e.prototype._findClaimedPowerUpIdFromNakedDomainByHostname=function(e){var t,n;return t=Object.keys(r),n=i.find(t,function(t){var n;return n=e.length-t.length-1,e.slice(n)==="."+t}),r[n]},e.prototype.getPowerUpIdFromClaimedPowerUpDomains=function(e){var t,n;return n=o(e),this._urlIsValid(n)?(t=n.hostname,null!=r[t]?r[t]:this._findClaimedPowerUpIdFromNakedDomainByHostname(t)):void 0},e}())},{}],300:[function(e,t,n){var r,i,o;r=e("react"),o=e(514)(),i=e(131),t.exports=r.createClass({displayName:"BoardListItemBadgeComponent",render:o.renderable(function(){var e,t,n,r,i;return n=this.props,e=n.icon,r=n.text,i=n.title,t=n.iconClass,o.span(".board-tile-badges-item",{title:i},function(){return o.icon(e,{class:["board-tile-badges-item-icon",t].join(" ")}),null!=r?o.span(".board-tile-badges-item-name",function(){return o.text(r)}):void 0})}),shouldComponentUpdate:i})},{}],301:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=[].slice;i=e(71),s=e(302),a=e(303),c=e(307),u=e(310),o=e(309),m=e(318),l=e(25),d=e("bluebird"),p=e("react"),h=e(104),f=e(129),_=e(514)("billing"),v=e(238),y=e(101),k=e(48),g=e("underscore"),C=e("xtend"),r=e("jquery"),w=e(110),b=e(90),t.exports=p.createClass({displayName:"BillingComponent",getInitialState:function(){return{processingReactivation:!1,reactivateDisabled:!1,reactivatingProduct:null}},render:_.renderable(function(){var e,t,n,r,i,o,a,u,c,l,d,p,h,m,f;return p=this.props,i=p.id,e=p.activeAccount,c=p.paidAccount,f=p.willExpire,u=p.nextChargeAmount,a=p.nextBillingDate,t=p.canSwitchToYearly,n=p.cancelledAccount,r=p.hasAccount,m=p.statementUrl,d=p.productName,h=this.state,o=h.justCancelled,l=h.processingReactivation,_.div(function(p){return function(){return p.renderStatusBanner(),e&&_.div(".window-module.u-text-align-center",function(){return _.div(".u-gutter",function(){return f?p.renderExpirationAndRenewButton():c.cardType?(u&&a&&p.renderNextCharge(),t()?p.renderUpgradeToYearly():void 0):p.renderCreditExpirationMessage()})}),n&&!l&&p.renderReactivateSection(),c.cardType&&(e&&p.renderPaymentMethod(),p.renderBillingContact(),p.renderAdditionalInvoiceDetails()),r&&_.createElement(s,{statementUrl:m,key:i}),e&&p.renderCancelFlow(f),o?_.div(".window-module",function(){return _.div(".u-gutter",function(){return _.p(function(){return _.strong(function(){return _.format("your-productname-subscription-has-been-cancelled",{productName:d})})}),_.p(function(){return _.format("well-keep-your-data-safe-and-your-account-will-remain-usable-if-youd-like-you-can-reinstate-productname-at-any-time-by-re-entering-your-credit-card-information",{productName:d})}),_.p(function(){return _.format("the-trello-team")})})}):void 0}}(this))}),renderNextCharge:function(){var e,t,n,r,i;return i=this.props,e=i.billingStrategy,n=i.nextChargeAmount,r=i.price,t=i.nextBillingDate,_.p(".next-charge",function(){return e.perUser?_.format("you-will-be-billed-nextchargeamount-price-per-billablemembercount-members-on-nextbillingdate",{nextChargeAmount:b(n),price:b(r),billableMemberCount:e.userCount,nextBillingDate:t}):_.format("you-will-be-billed-nextchargeamount-on-nextbillingdate",{nextChargeAmount:b(n),nextBillingDate:t})})},renderUpgradeToYearly:function(){var e,t,n,r,i,o;return n=this.props,i=n.yearlyEquivalentPrice,o=n.yearlyEquivalentTotalPrice,e=n.billingStrategy,r=n.yearlyDiscountPercent,t=n.onSwitchToYearly,_.p(function(){return _.b(t,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return _.format("switch-to-yearly-billing")})}),_.p(function(){return e.perUser?_.format("yearly-billing-will-be-totalyearlyprice-yearlyprice-per-member-per-year",{totalYearlyPrice:b(o),yearlyPrice:b(i)}):_.format("yearly-billing-will-be-yearlyprice-per-year",{yearlyPrice:b(i)}),_.br(),_.format("thats-percent-less-than-monthly-billing",{yearlyDiscountPercent:r})})},renderCreditExpirationMessage:function(){var e,t,n;return n=this.props,e=n.nextBillingDate,t=n.onClickChangeCC,_.p(".next-charge",function(){return _.format("your-credits-will-expire-on-nextbillingdate",{nextBillingDate:e})}),_.p(function(){return _.b(t,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return _.format("add-billing-information")})}),_.p(function(){return _.format("keep-using-trello-in-style-even-after-your-credits-expire")})},renderExpirationAndRenewButton:function(){var e,t,n,r;return r=this.props,n=r.productName,e=r.expirationDate,t=r.onRenewClick,_.p(".quiet",function(){return _.format("youve-cancelled-productname-but-you-can-use-the-premium-features-until-expirationdate",{productName:n,expirationDate:e})}),_.p(function(){return _.b(t,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return _.format("renew-your-subscription")})}),_.p(".quiet",function(){return _.format("when-you-renew-you-wont-be-charged-until-the-date-listed-above")})},renderReactivationForm:function(){var e,t,n,r,i,s,a;return a=this.props,r=a.paidAccount,i=a.paidAccountPoll,e=a.createPaidAccount,n=a.didntGetAuthStatus,t=a.didGetAuthStatus,s=this.state.reactivatingProduct,_.createElement(c,{onSubmit:e,doPoll:i,buttonKey:"continue",contentBuilders:[u,o,m].map(v.choke(1,w)),extraData:{billingContactFullName:r.contactFullName,billingContactEmail:r.contactEmail,billingContactLocale:r.contactLocale,products:[s.toString()]},didntGetAuthStatus:function(e){return function(){return e.setState({reactivatingProduct:null}),n()}}(this),didGetAuthStatus:function(e){return function(){return e.setState({reactivatingProduct:null}),t()}}(this)})},renderReactivationButtons:function(){var e,t,n,r,i,o,s;return s=this.props,e=s.current,n=s.productName,t=s.paidAccount,r=this.state.reactivateDisabled,null!=t.cardType?(i=v(this,"reactivate",e.monthly.productNumber),o=v(this,"reactivate",e.yearly.productNumber)):(i=v.choke(0,this,"setState",{reactivatingProduct:e.monthly.productNumber}),o=v.choke(0,this,"setState",{reactivatingProduct:e.yearly.productNumber})),_.div(".window-module",function(){return _.div(".window-module-title",function(){return _.h3(function(){return _.format("reactivate-productname",{productName:n})})}),_.div(".u-gutter",function(){return _.div(".billing-option-buttons.u-clearfix",function(){return _.b(i,{class:_.classify({disabled:r})},function(){return _.span(".name",function(){return _.format("charge-monthly")}),_.span(".price",function(){e.billingStrategy.perUser?_.format("totalmonthlyprice-monthlyprice-per-member",{totalMonthlyPrice:b(e.monthly.totalPrice),monthlyPrice:b(e.monthly.price)}):_.strong(function(){return _.format("monthlyprice",{monthlyPrice:b(e.monthly.price)})})})}),_.b(o,{class:_.classify({disabled:r})},function(){return _.span(".name",function(){return _.format("charge-yearly-save")}),_.span(".price",function(){e.billingStrategy.perUser?_.format("totalyearlyprice-yearlyprice-per-member",{totalYearlyPrice:b(e.yearly.totalPrice),yearlyPrice:b(e.yearly.price)}):_.strong(function(){return _.format("yearlyprice",{yearlyPrice:b(e.yearly.price)})})})})})})})},renderReactivateSection:function(){var e;return e=this.state.reactivatingProduct,null!=e?this.renderReactivationForm():this.renderReactivationButtons()},renderPaymentMethod:function(){var e,t,n,r,i;return i=this.props,e=i.accountStanding,t=i.accountStandingDisplay,r=i.paidAccount,n=i.onClickChangeCC,_.div(".window-module",function(i){return function(){return _.div(".window-module-title",function(){return _.h3(".u-inline",function(){return _.format("payment-method")})}),_.div(".u-gutter",function(){return _.p(function(){return"good"===e?_.format("your-account-is-in-good-standing"):_.format("account-standing-accountstandingdisplay",{accountStandingDisplay:t}),_.br(),_.format("credit-card-on-file"),_.text(" "),_.format("paidaccount-cardlast4",{paidAccount_cardLast4:r.cardLast4}),_.text(" "),_.b(n,".quiet",function(){return _.format("change")})})})}}(this))},renderCCChangeForm:function(){var e,t,n,r,i;return i=this.props,e=i.changeCreditCard,r=i.paidAccountPoll,n=i.didntGetAuthStatus,t=i.didGetAuthStatus,_.createElement(c,{onSubmit:e,doPoll:r,buttonKey:"continue",contentBuilders:[u,o,m].map(v.choke(1,w)),didntGetAuthStatus:function(e){return function(){return n()}}(this),didGetAuthStatus:function(e){return function(){return t()}}(this)})},reactivate:function(e){var t,n,r;r=this.props.reactivateProduct,n=this.state.reactivateDisabled,n||(t=l.isMonthly(e)?"Monthly":"Yearly",k("Organization View","Billing Page","Reactivate Business Class - "+t),this.setState({reactivateDisabled:!0}),r(e).then(function(e){return function(n){return k("Organization","Sucessfully Reactivate Business Class - "+t),e.setState({processingReactivation:!0,reactivateDisabled:!1})}}(this)).done())},renderBillingContact:function(){var e,t,n;return n=this.props,t=n.paidAccount,e=n.onChangeBillingContactClick,_.div(".window-module",function(){return _.div(".window-module-title",function(){return _.h3(function(){return _.format("billing-contact")})}),_.div(".u-gutter",function(){return _.p(function(){return _.format("paidaccount-contactfullname-paidaccount-contactemail",{paidAccount_contactFullName:t.contactFullName,paidAccount_contactEmail:t.contactEmail}),_.text(" "),_.b(e,".quiet",function(){return _.format("change")})})})})},renderAdditionalInvoiceDetails:function(){var e,t,n;return n=this.props,t=n.paidAccount,e=n.onChangeAdditionalDetailsClick,_.div(".window-module",function(){return _.div(".window-module-title",function(){return _.h3(function(){return _.format("additional-invoice-details")})}),_.div(".u-gutter",function(){return t.invoiceDetails?(_.raw(h.description.format(t.invoiceDetails).output),_.div(function(){return _.b(e,".quiet",function(){return _.format("change")})})):_.p(function(){return _.format("we-dont-have-any-additional-information-for-your-invoice"),_.text(" "),_.b(e,".quiet",function(){return _.format("change")})})})})},renderCancelFlow:function(e){var t,n,r;return r=this.props,n=r.productName,t=r.cancelProduct,_.createElement(a,{type:this.props.type,isModule:!0,productName:n,willExpire:e,id:this.props.id,product:this.props.paidAccount.product,cancelProduct:function(e){return function(){var n;return n=1<=arguments.length?x.call(arguments,0):[],t.apply(null,n).then(v.choke(0,v(e,"setState",{justCancelled:!0})))}}(this)})},renderStatusBanner:function(){var e,t,n,r,i,o,s,a,u,c,l;return l=this.props,e=l.activeAccount,o=l.problemAccount,s=l.processingAccount,u=l.productIconClass,n=l.detailsUrl,c=l.productName,t=l.cancelledAccount,r=l.needCC,i=l.onClickChangeCC,a=this.state.processingReactivation,_.div(".window-module.u-gutter",function(){return e&&(o?(_.p(".bc-active-status.error",function(){return _.format("theres-an-issue-with-productname",{productIconClass:u,detailsUrl:n,productName:c})}),_.b(i,".emphasis-button",function(){return _.format("you-are-overdue-and-we-are-having-trouble-processing-your-credit-card-enter-a-credit-card-to-resolve-the-issue")})):(_.p({class:_.classify({"bc-active-status":!0,active:!0,warning:s})},function(){return _.span({class:"icon-lg icon-"+u}),s?_.format("productname-is-almost-active",{detailsUrl:n,productName:c}):_.format("productname-is-active",{detailsUrl:n,productName:c})}),s&&_.p(".quiet",{style:{marginLeft:"46px"}},function(){return _.format("your-credit-card-is-being-processed")}))),t&&(a?(_.p(".bc-active-status.warning",function(){return _.format("your-account-is-being-processed-for-reactivation",{productIconClass:u})}),_.p(".quiet.u-text-align-center",function(){return _.format("check-back-soon")})):_.p(".bc-active-status.error",function(){return _.format("productname-is-cancelled",{productIconClass:u,detailsUrl:n,productName:c})})),r?(_.p(".bc-active-status.error",function(){return _.format("productname-is-not-active",{productIconClass:u,detailsUrl:n,productName:c})}),_.b(i,".emphasis-button",function(){return _.format("enter-a-credit-card-to-activate-productname",{productName:c})})):void 0})}})},{}],302:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v;r=e(213),i=e(320),s=e("react"),f=e(514)("billing_statement"),o=e(109),p=e("moment"),u=e(89),d=e(43),v=e(117),a=e(238),m={return:["credited-return","credited-return-receipt"],credit:["paid-credit","paid-credit-receipt"],debit:["billed-debit","billed-debit-invoice"],refund:["refunded-refund","refunded-refund"]},h=function(e){var t,n,r,i;r=m[e.type],n=r[0],i=r[1],t={statementUrl:e.statementUrl},t[e.type]=u.money(e.amount),t.statementUrl?f.format(i,t):f.format(n,t)},g={startDate:function(e){return p(e).format("LL")},endDate:function(e){return p(e).format("LL")},taxRate:u.taxRate,discount:u.percentage},c=function(e){var t,n,r,i,o;i=function(e){return e.toString()},r={};for(t in e)o=e[t],r[t]=(null!=(n=g[t])?n:i)(o);return r},l=function(e){var t,n;return null==e.translationKey?e.fallbackText:(t=c(e.translationArgs),n=v(["billing",e.translationKey],t),null!=n?n:(d(new Error("Unknown statement row key "+e.translationKey)),e.fallbackText))},t.exports=s.createClass({displayName:"BillingHistoryComponent",mixins:[o],render:f.renderable(function(){var e,t,n;return t=this.state,e=t.errorText,n=t.statement,f.div(".window-module",function(){return f.div(".window-module-title",function(){return f.h3(function(){return f.format("billing-history")})}),f.div(".u-gutter",{id:"billing-statement"},function(){var t,r,i,o;if(null!=e)return f.text(e);if(null!=n){for(i=[],t=0,r=n.length;r>t;t++)o=n[t],f.div(function(){return f.p(function(){return f.format("date-item",{date:p(new Date(o.date)).format("l"),item:l(o)})}),f.p({style:{textAlign:"right"}},function(){return h(o)})}),i.push(f.hr());return i}return f.div(".spinner.loading")})})}),componentWillMount:function(){this.pollster=new i(a(r,{url:this.props.statementUrl}),10,5e3),this.pollster.start(),this.syncState(this.pollster.state)},componentWillUnmount:function(){this.pollster.stop()}})},{}],303:[function(e,n,r){var i,o,s,a,u,c,l,d;o=e("react"),l=e(514)("billing"),u=e(238),d=e(48),i=void 0,t(function(){return i=e(38)}),a=1,s=2,c=[["cancel-reason-missing-functionality","missing functionality"],["cancel-reason-not-using","not using it"],["cancel-reason-expensive","too expensive"],["cancel-reason-other","other"]],n.exports=o.createClass({displayName:"CancelFlowComponent",getInitialState:function(){return{isGold:"gold"===this.props.type,isCancelling:this.props.initialIsCancelling,cancellingStep:a,reason:null,details:"",features:[]}},componentDidMount:function(){return this.fetchFeatures(function(e){return function(t){return e.setState({features:t})}}(this))},fetchFeatures:function(e){var t,n,r;return t=this.props.id,r=this.props.product,n={dynamic:[function(e){var t,n;return n="dynamic-feature-unlimited-powerups",(t=e.boardList.filter(function(e){return e.powerUpsCount()>1}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return n="dynamic-feature-deactivate-users",(t=e.get("memberships").filter(function(e){return e.deactivated}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return n="dynamic-feature-observers",(t=e.boardList.filter(function(e){return e.get("memberships").some(function(e){return"observer"===e.memberType})}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return n="dynamic-feature-collections",(t=e.boardList.filter(function(e){return e.get("idTags").length}).length)?{key:n,data:{count:t}}:void 0},function(e){var t;return t="dynamic-feature-invitation-restrictions",e.boardList.some(function(e){return"members"!==e.getInvitePerm()})?{key:t}:void 0},function(e){var t;return t="dynamic-feature-visibility-restrictions",e.boardList.some(function(e){return"org"===e.getPermLevel()})?{key:t}:void 0},function(e){var t,n;return n="dynamic-feature-private-boards",(t=e.boardList.filter(function(e){return e.isPrivate()}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return t="dynamic-feature-bulk-export",(null!=(n=e.get("exports"))?n.length:void 0)?{key:t}:void 0}],static:["static-feature-unlimited-powerups","static-feature-bigger-attachments","static-feature-priority-email-support","static-feature-board-export"],gold:["gold-feature-powerups","gold-feature-bigger-attachments","gold-feature-custom-backgrounds","gold-feature-saved-searches"]},this.state.isGold?e(n.gold.map(function(e){return{key:e}})):i.loadBCFeatures(t).then(function(t){return e(n.dynamic.map(function(e){return e(t)}).filter(function(e){return e}).concat(n.static.map(function(e){return{key:e}})).slice(0,4))})},render:l.renderable(function(){var e,t,n,r,i,o,u,p,h,m,f,g,v,b,y,w,_,k,C,x,j;return w=this.props,b=w.product,y=w.productName,r=w.cancelProduct,v=w.isModule,f=w.isDeleting,j=w.willExpire,_=this.state,m=_.isCancelling,i=_.cancellingStep,n=_.cancelInProgress,u=_.details,p=_.features,g=_.isGold,C=function(e){return function(){return d("Organization View","Billing Page","Open Cancel Business Class Dialog"),e.setState({isCancelling:!0})}}(this),e=function(e){return function(){return f||e.setState({cancellingStep:s}),r()}}(this),t=function(e){return function(){return e.setState({cancellingStep:a,isCancelling:!1})}}(this),x=function(e){return e.stopPropagation()},h=function(e){return function(){var t;return e.setState({cancelInProgress:!0}),t={reason:e.state.reason,details:e.state.details},r(t).then(function(){return f?void 0:e.setState({cancelInProgress:!1,isCancelling:!1})}).done()}}(this),o=l.radio.bind(l,this),k=function(e){return function(t){return e.setState({details:t})}}(this),l.div({class:l.classify({"window-module":v,".u-gutter":v})},function(){if(!m&&f){if(!j)return l.b(C,".quiet.dark-hover",function(){return l.format("delete-this-organization")})}else{if(m)return l.div(function(){return l.div(".cancel-flow-overlay",{onClick:t},function(){return l.div(".cancel-flow-dialog-wrapper",function(){return l.div(g?".cancel-flow-dialog.gold":".cancel-flow-dialog",{onClick:x},function(){return l.span(".icon-lg.icon-close.cancel-flow-overlay-close-icon",{onClick:t}),l.img(".cancel-flow-logo",{src:g?"https://a.trellocdn.com/images/4aed30c34bf90d579f738a89fbd276f7/trello-gold-logo-gold%402x.png":"https://a.trellocdn.com/images/5ccffc76fe9c9220a251715c59d17ac5/business-class-logo-white%402x.png"}),l.div(".cancel-flow-content",function(){return i===a?(l.p(".cancel-flow-bold",function(){return l.text(" "),l.format("cancel-pre-features",{productName:y})}),l.ul(function(){return p.map(function(e){var t,n;return n=e.key,t=e.data,l.li(function(){return l.format(n,t)})})}),l.p(function(){return l.format("cancel-post-features")}),l.div(".cancel-flow-buttons",function(){return l.button(".button.primary.cancel-flow-keep",{onClick:t},function(){return l.format(f?"cancel-delete-keep":"cancel-keep",{productName:y})}),l.button(".button.cancel-flow-confirm",{onClick:e},function(){return l.format(f?"cancel-delete-switch":"cancel-switch")})})):2===i?(l.p(".cancel-flow-bold",function(){return l.format("cancel-pre-reason")}),l.div(".u-clearfix",function(){var e,t,n,r,i,s;for(i=[],t=0,n=c.length;n>t;t++)r=c[t],e=r[0],s=r[1],i.push(l.label(function(){return o("reason",s),l.text(" "),l.format(e,{productName:y})}));return i}),l.p(function(){return l.format("cancel-reason-feedback",{productName:y})}),l.div(function(){return l.button(".button.primary",{onClick:h,disabled:n,class:l.classify({disabled:n})},function(){return l.format("cancel-submit")})})):void 0})})})})});if(!j)return l.b(C,".quiet.dark-hover",function(){return l.icon("close"),l.text(" "),l.format("cancel-productname-ellipsis",{productName:y})})}})})})},{}],304:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(221),s=e(542),a=e("react"),u=e("react-dom"),c=e(513),l=e(522),r=e(308),d=e(514)("credit_card"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="change additional details",t.prototype.renderOnce=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$el.prepend(this.reactRoot),this.renderReactSection(),this},t.prototype.getReactRoot=function(){return a.createElement(c,{},this.getFormComponent())},t.prototype.renderReactSection=function(){return u.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getFormComponent=function(){return d.render(function(e){return function(){return d.div(function(){return d.createElement(r,{initialValue:e.model.get("paidAccount").invoiceDetails,onSubmit:function(t){return o.changeInvoiceDetails(e.model,t).then(function(t){return e.model.set(t),s.hide()}).done()}})})}}(this))},t}(l)},{}],305:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(215),i=e(33),s=e(542),a=e(129),u=e(522),l=e(716),c=e(31),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="change billing contact",t.prototype.events={"click .js-submit":"changeBillingContact","submit form":"changeBillingContact"},t.prototype.render=function(){var e,t,n;return n=this.model.get("paidAccount"),e=n?{fullName:n.contactFullName,email:n.contactEmail,locale:n.contactLocale}:{fullName:i.me().get("fullName"),email:i.me().get("email"),locale:i.me().getLocale()},t=e.locale&&c.some(function(t){var n;return n=t.code,n.toLowerCase()===e.locale.toLowerCase()}),t||(e.locale="en-US"),this.$el.html(l(e)),this},t.prototype.changeBillingContact=function(e){var t,n,i,o,u;for(a.stop(e),t={},t.billingContactFullName=this.$("input#billingContactFullName").val(),t.billingContactEmail=this.$("input#billingContactEmail").val(),t.billingContactLocale=this.$("select#billingContactLocale").val(),this.$(".js-submit").attr("disabled","disabled"),u=["billingContactFullName","billingContactEmail","billingContactLocale"],i=0,o=u.length;o>i;i++)n=u[i],this.$("#"+n).removeClass("input-error");return r({url:this.model.urlRoot+"/"+this.model.id+"/paidAccount/billingContact",data:t,type:"POST",success:function(e){return function(t){return e.model.set(t),s.hide()}}(this),error:function(e){return function(t){var n,r;return n=null!=(r=t.responseText)?r:"error",e.$(".js-submit").removeAttr("disabled","disabled"),/billingContactFullName/.test(n)?void e.$("#billingContactFullName").addClass("input-error"):/email/.test(n)?void e.$("#billingContactEmail").addClass("input-error"):/locale/.test(n)?void e.$("#billingContactLocale").addClass("input-error"):e.$(".error").text(n).show()}}(this)})},t}(u)},{}],306:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e(216),o=e(321),a=e(221),u=e(542),c=e("react"),l=e("react-dom"),d=e(513),p=e(522),s=e(311),h=e(514)("credit_card"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="change credit card",t.prototype.renderOnce=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$el.prepend(this.reactRoot),this.renderReactSection(),this},t.prototype.getReactRoot=function(){return c.createElement(d,{},this.getFormComponent())},t.prototype.renderReactSection=function(){return l.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getFormComponent=function(){return h.render(function(e){return function(){return h.div(function(){return h.createElement(s,{onSubmit:function(t){return a.changeCreditCard(e.model,t).catch(r.BadRequest,function(e){var t,n,r,i;for(i=["country","zipCode"],n=0,r=i.length;r>n;n++)if(t=i[n],e.message.trim()==="invalid value for "+t)throw o.InvalidField("",{field:t});throw o.PostError(e.message)}).then(function(t){return e.model.set(t),u.hide()})}})})}}(this))},t}(p)},{}],307:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m;r=e(215),i=e(321),o=e("bluebird"),s=e("react"),p=e(514)("credit_card"),a=e("underscore"),u=e(238),c=e(101),h=e(48),m=e("xtend"),d=e(326),l=e(85),t.exports=s.createClass({displayName:"CreditCardFormComponent",zeroAmount:"0.00",getInitialState:function(){var e;return{errorField:null,unknownError:null,waitingForCCAuth:!1,tax:this.zeroAmount,region:"",zipCode:"",selectedBillingPlan:null!=(e=this.props.yearlyProduct)?e.productNumber:void 0}},getData:function(){return this.props.extraData},setBillingPlan:function(e){return e!==this.state.selectedBillingPlan?this.setState({selectedBillingPlan:e},function(){return this.state.zipCode.length?this.calculateSalesTax(this.state.zipCode):void 0}):void 0},resetSalesTax:function(){return this.setState({tax:this.zeroAmount,region:"",zipCode:""})},calculateSubTotalCost:function(){if(this.state.selectedBillingPlan)switch(this.state.selectedBillingPlan.toString()){case this.props.yearlyProduct.productNumber.toString():return this.props.yearlyProduct.totalPrice;case this.props.monthlyProduct.productNumber.toString():return this.props.monthlyProduct.totalPrice}},calculateSalesTax:function(e){return this.props.inBillingTest?(this.setState({zipCode:e}),r({url:"/1/members/me/paidAccount/salesTax?postalCode="+e+"&country=US&subtotal="+this.calculateSubTotalCost(),type:"GET",success:function(e){return function(t){return e.setState({tax:t.tax,region:t.taxRegion,errorField:null})}}(this),error:function(e){return function(t){var n;return n=function(){var e;switch(null!=t&&null!=(e=t.responseJSON)?e.error:void 0){case"SHOP_INVALID_TAX_ZIP_CODE":return"zipCode";case"SHOP_INVALID_TAX_COUNTRY_CODE":return"country"}}(),e.setState({tax:null,region:null,errorField:n})}}(this)})):void 0},render:p.renderable(function(){var e,t,n,r,i,s,a,d,h,f,g,v,b,y,w,_,k,C,x;return d=this.props,r=d.contentBuilders,e=d.buttonKey,x=d.yearlyProduct,s=d.monthlyProduct,h=this.state,i=h.errorField,k=h.unknownError,C=h.waitingForCCAuth,y=this.setBillingPlan,t=this.calculateSalesTax,v=this.resetSalesTax,b=this.state.selectedBillingPlan,w=this.calculateSubTotalCost(),_=this.state.tax,g=this.state.region,n=[],a=function(e){return function(){var t;t=o.map(n.concat([e]),u.method("getData")).then(function(e){return m.apply(null,e)}),e.submit(t)}}(this),p.div(p.classify({".credit-card-form":!0,".bc-billing-wrap":!0,".bc-billing-test-inner":null!=(f=l("billingComponent"))?f.get("showNewBillingComponent"):void 0}),function(){var o;return p.p({class:p.classify({"u-gutter":!0,"u-form-error":!0,hide:!k})},function(){return p.text(null!=k?k:"")}),r.map(function(e){return e({ref:u(n,"push"),errorField:i,setBillingPlan:y,selectedBillingPlan:b,subTotalCost:w,calculateSalesTax:t,resetSalesTax:v,tax:_,region:g})}).forEach(u(p,"addElement")),(null!=(o=l("billingComponent"))?o.get("showNewBillingComponent"):void 0)||p.hr(".u-gutter"),p.p({class:p.classify({"u-gutter":!0,"u-form-info":!0,hide:!C})},function(){return p.text(c(["alerts","authorizing"]))}),p.div({class:p.classify({"u-gutter":!0,
hide:C})},function(){return p.input({type:"button",value:p.l(e),class:"primary",onClick:a})})})}),componentWillUnmount:function(){var e;return null!=(e=this._submitPromise)?e.cancel():void 0},submit:function(e){var t,n,r;if(null!=this._submitPromise)throw Error("Submission already in progress!");return r=this.props,n=r.onSubmit,t=r.doPoll,this.setState({errorField:null,unknownError:null,waitingForCCAuth:!0}),this._submitPromise=e.then(function(e){return function(e){return null==e.acceptTOS||e.acceptTOS?d(u(n,e),t,e):o.reject(i.InvalidField("",{field:"acceptTOS"}))}}(this)).then(function(e){return function(t){e.props.didGetAuthStatus(),h("Business Class","Purchase",""+t.products[0])}}(this)).catch(i.InvalidField,function(e){return function(t){var n;n=t.field,e.setState({errorField:n})}}(this)).catch(i.PostError,function(e){return function(t){var n,r;n=t.err,e.setState({unknownError:null!=(r=n.message)?r:"error"})}}(this)).catch(i.PollError,function(e){return function(t){var n;n=t.err,e.props.didntGetAuthStatus()}}(this)).catch(o.CancellationError,function(){}).finally(function(e){return function(){e.isMounted()&&e.setState({waitingForCCAuth:!1}),delete e._submitPromise}}(this)).done()}})},{}],308:[function(e,t,n){var r,i,o,s,a,u,c,l;o=e("react"),r=e(315),c=e(514)("credit_card"),s=e("underscore"),l=e("xtend"),c=e(514)("credit_card"),a=e(238),i=e(315),u=function(e){var t,n;return n=e[0],t=e[1],[n,c.l(["countries",t])]},t.exports=o.createClass({displayName:"AdditionalDetailsComponent",formFields:["invoiceDetails"],requiredFields:{},mixins:[r],getInitialState:function(){return{invoiceDetails:this.props.initialValue}},render:c.renderable(function(){var e,t,n,r;return r=this.state.submitting,e=this.props.onSubmit,t=function(t){return function(n){return t.setState({submitting:!0}),t.getData().then(e).done()}}(this),n=this.controlledOpts("invoiceDetails"),c.div(".u-clearfix",function(){return c.form({onSubmit:e,ref:"form"},function(){return c.div(".additional-details-section.u-clearfix",function(){return c.div(".invoice-details",function(){return c.label(function(){return c.textarea(".invoice-details-textarea",l(n,{readOnly:r,maxLength:1024,placeholder:c.l("additional-details-placeholder")}))})})})}),c.div(function(){return c.button(".primary",{onClick:t,disabled:r,class:c.classify({disabled:r})},function(){return c.format("save")})})})})})},{}],309:[function(e,t,n){var r,i,o,s,a,u,c,l,d;i=e("react"),c=e(514)("credit_card"),o=e("underscore"),d=e("xtend"),a=e(238),s=e(314),r=e(315),u=function(e){var t,n;return n=e[0],t=e[1],[n,c.l(["countries",t])]},l=function(e){var t;return 5===(t=e.replace(/\D/g,"").length)||9===t},t.exports=i.createClass({displayName:"AddressComponent",formFields:["zipCode","country"],requiredFields:{country:/\S/,zipCode:function(e,t){var n;return n=t.country,"US"!==n||l(e)}},mixins:[r],getInitialState:function(){return d(this.defaultInitialState(),{country:s.special[0][0]})},componentDidUpdate:function(e,t){return o.isFunction(this.props.resetSalesTax)&&o.isFunction(this.props.calculateSalesTax)?("US"===t.country&&"US"!==this.state.country&&(this.props.resetSalesTax(),this.setState({zipCode:""})),l(this.state.zipCode)&&t.zipCode!==this.state.zipCode?this.props.calculateSalesTax(this.state.zipCode):void 0):void 0},render:c.renderable(function(){var e,t,n,r,i,o,s,u,l,p,h;return u=this.props,r=u.errorField,o=u.inBillingTest,e=u.calculateSalesTax,p=u.resetSalesTax,l=this.state,n=l.country,h=l.zipCode,s=this.getLocalizedCountries(),t=a(this,"controlledOpts"),i=function(e,n,i,o){var s;return s=e===r,c.label(function(){return c.format(n),c.input(d(o,t(e),{class:c.classify({text:!0,"input-error":s}),type:"text",value:h})),s?c.span(".u-form-error",function(){return c.format(i)}):void 0})},c.div(".u-clearfix",function(){return c.form(function(){return c.div(".credit-card-form-section "+(o?".u-clearfix":".u-gutter"),function(){return c.div(".credit-card-country",function(){return c.label(function(){return c.format(o?"country-test":"country"),c.text(" ")}),c.select(d(t("country"),{autoComplete:"country",class:c.classify({"select-error":"country"===r})}),function(){var e,t,n,r,i;for(e=0,t=s.length;t>e;e++)r=s[e],i=r[0],n=r[1],c.option({value:i},function(){return c.text(n)})}),"country"===r?c.span(".u-form-error",function(){return c.format("must-be-a-valid-country")}):void 0}),"US"===n?c.div(".credit-card-zip-code",function(){return i("zipCode",o?"postal-code-test":"zip-postal-code","us-addresses-require-a-zip-code",{maxLength:"10",size:"10",autoComplete:"postal-code",placeholder:o?"90210":void 0})}):void 0})})})}),getLocalizedCountries:function(){var e,t;return e=s.special.map(u),t=s.unloved.map(u).sort(function(e,t){var n,r,i,o;return n=e[0],r=e[1],i=t[0],o=t[1],r.localeCompare(o)}),e.concat(t)}})},{}],310:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m;o=e(321),u=e("react"),s=e(315),r=e(313),a=e("bluebird"),p=e(514)("credit_card"),l=e(238),m=e("xtend"),c=e(545),i=e(312),h=e(48),d=function(e){return"american-express"===e?"please-enter-a-valid-4-digit-amex-cid":"please-enter-a-valid-3-digit-cvv"},t.exports=u.createClass({displayName:"CreditCardComponent",formFields:[],requiredFields:{},mixins:[s,r],getInitialState:function(){return m(this.defaultInitialState(),this.gatewayInitialState())},render:p.renderable(function(){var e,t,n,r,o,s,a,u,m,f,g,v,b;return g=this.props,n=g.errorField,u=g.inBillingTest,v=this.state,e=v.cardType,a=v.gatewayLoaded,r=v.gatewayErrorField,s=v.gatewayFocusField,o=v.gatewayFieldStatus,m="name"===n,t=l(this,"controlledOpts"),f=function(e){return function(e){return e.preventDefault()}}(this),b=function(){var t,n;return document.querySelectorAll(".js-tooltip-content").length?c.hide():(h("Organization View","Business Class Page","CVV Tooltip"),n=new i({cardType:e}),t=this.$(".js-cvv-tooltip-trigger"),c.show(n,t,!1,c.STYLE.BILLING))},u?p.div(".u-clearfix",function(){return p.form("#bc-billing-test",{onSubmit:f,ref:"form"},function(){return p.h3(function(){return p.format("pay-with-credit-card-test")}),p.div(".credit-card-form-section",function(){var t;return t=function(e){var t,n,r,i,u;return u=e.selector,i=e.labelKey,n=e.fieldType,t=e.errorKey,r="invalid"===o[n],p.label(function(){return p.span(u+"-label-text",function(){return p.format(i)}),p.div(".iframe-input"+u,{class:p.classify({disabled:!a,focus:s===n,"input-error":r})}),null!=t&&r?p.span(".u-form-error",function(){return p.format(t)}):void 0})},p.div(".u-clearfix",function(){return p.div(".credit-card-form-number",function(){return t({selector:".js-card-number"+(e?"."+e:""),labelKey:"credit-card-test",fieldType:"number",errorKey:"please-provide-your-full-card-number-for-credit-card-verification"})}),p.div(".credit-card-expiration-date",function(){return t({selector:".js-expiration-date",labelKey:"expiration-date-test",fieldType:"expirationDate",errorKey:"please-provide-a-valid-expiration-date"})}),p.div(".credit-card-form-cvv",function(){return t({selector:".js-cvv",labelKey:"cvv-test",fieldType:"cvv",errorKey:d(e)}),p.span(".cvv-tooltip-trigger.js-cvv-tooltip-trigger",{onClick:b})})})})})}):p.div(".u-clearfix",function(){return p.form({onSubmit:f,ref:"form"},function(){return p.div(".window-module-title",function(){return p.h4(function(){return p.format("credit-card-for-account")})}),p.div(".u-gutter.credit-card-form-section",function(){var t;return t=function(e){var t,n,r,i,u;return u=e.selector,i=e.labelKey,n=e.fieldType,t=e.errorKey,r="invalid"===o[n],p.label(function(){return p.format(i),p.div(".iframe-input"+u,{class:p.classify({disabled:!a,focus:s===n,"input-error":r})}),null!=t&&r?p.span(".u-form-error",function(){return p.format(t)}):void 0})},p.div(".u-clearfix",function(){return p.div(".credit-card-form-number",function(){return t({selector:".js-card-number",labelKey:"card-number",fieldType:"number",errorKey:"please-provide-your-full-card-number-for-credit-card-verification"})}),p.div(".credit-card-form-cvv",function(){return t({selector:".js-cvv",labelKey:"cvv",fieldType:"cvv",errorKey:d(e)})}),p.div(".credit-card-expiration-date",function(){return t({selector:".js-expiration-date",labelKey:"expiration-date",fieldType:"expirationDate",errorKey:"please-provide-a-valid-expiration-date"})})})})})})})})},{}],311:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h;i=e(321),a=e("react"),o=e(315),r=e(313),s=e("bluebird"),p=e(514)("credit_card"),c=e(238),h=e("xtend"),u=e(314),d=function(e){var t,n;return n=e[0],t=e[1],[n,p.l(["countries",t])]},l=function(e){return"american-express"===e?"please-enter-a-valid-4-digit-amex-cid":"please-enter-a-valid-3-digit-cvv"},t.exports=a.createClass({displayName:"CreditCardUpdateComponent",formFields:["country","zipCode"],requiredFields:{country:/\S/,zipCode:function(e,t){var n,r;return n=t.country,"US"!==n||5===(r=e.replace(/\D/g,"").length)||9===r}},mixins:[o,r],getInitialState:function(){return h(this.defaultInitialState(),this.gatewayInitialState(),{country:u.special[0][0]})},render:p.renderable(function(){var e,t,n,r,o,s,a,u,d,m,f,g,v,b,y,w,_;return g=this.props.onSubmit,y=this.state,e=y.cardType,w=y.submitting,r=y.errorField,d=y.gatewayLoaded,s=y.gatewayErrorField,u=y.gatewayFocusField,a=y.gatewayFieldStatus,n=y.country,_=y.unknownError,f=this.getLocalizedCountries(),t=c(this,"controlledOpts"),m="name"===r,v=function(e){return function(t){return e.setState({submitting:!0}),e.getData().then(g).catch(i.InvalidField,function(t){var n;return n=t.field,e.setState({errorField:n,submitting:!1})}).catch(i.PostError,function(t){var n;return n=t.message,e.setState({unknownError:null!=n?n:"error",submitting:!1})}).done()}}(this),b=function(e){return e.preventDefault()},o=function(e,n,i,o){var s;return s=e===r,p.label(function(){return p.format(n),p.input(h(o,t(e),{class:p.classify({text:!0,"input-error":s}),type:"text"})),s?p.span(".u-form-error",function(){return p.format(i)}):void 0})},p.div(".u-clearfix",function(){return _&&p.p(".u-form-error",function(){return p.text(_)}),p.form({onSubmit:b,ref:"form",key:"credit-card-update-form"},function(){return p.div(".credit-card-update-section.u-clearfix",function(){var i;return i=function(e){var t,n,i,o,s;return s=e.selector,o=e.labelKey,n=e.fieldType,t=e.errorKey,i="invalid"===a[n]||r===n,p.label(function(){return p.format(o),p.div(".iframe-input"+s,{class:p.classify({disabled:!d,focus:u===n,"input-error":i})}),null!=t&&i?p.span(".u-form-error",function(){return p.format(t)}):void 0})},p.div(".u-clearfix",function(){return p.div(".credit-card-form-number",function(){return i({selector:".js-card-number",labelKey:"card-number",fieldType:"number",errorKey:"please-provide-your-full-card-number-for-credit-card-verification"})}),p.div(".credit-card-expiration-date",function(){return i({selector:".js-expiration-date",labelKey:"expiration",fieldType:"expirationDate",errorKey:"please-provide-a-valid-expiration-date"})}),p.div(".credit-card-form-cvv",function(){return i({selector:".js-cvv",labelKey:"cvv",fieldType:"cvv",errorKey:l(e)})})}),p.div(".credit-card-country",function(){return p.label(function(){return p.format("country"),p.text(" ")}),p.select(h(t("country"),{autoComplete:"country"}),function(){var e,t,n,r,i;for(e=0,t=f.length;t>e;e++)r=f[e],i=r[0],n=r[1],p.option({value:i},function(){return p.text(n)})})}),"US"===n?p.div(".credit-card-zip-code",function(){return o("zipCode","zip-postal-code","us-addresses-require-a-zip-code",{maxLength:"10",size:"10",autoComplete:"postal-code"})}):void 0})}),p.div(function(){return p.button(".primary",{onClick:v,disabled:w,class:p.classify({disabled:w})},function(){return p.format("save")})})})}),getLocalizedCountries:function(){var e,t;return e=u.special.map(d),t=u.unloved.map(d).sort(function(e,t){var n,r,i,o;return n=e[0],r=e[1],i=t[0],o=t[1],r.localeCompare(o)}),e.concat(t)}})},{}],312:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;a=e(517)("credit_card"),i=e(522),o=a.renderable(function(){return a.h3(function(){return a.text(a.l("amex_title"))}),a.p(function(){return a.text(a.l("amex_info"))}),a.img({src:"https://a.trellocdn.com/images/credit-cards/1256bb64c2e33bafad6358dc1c1b2fbc/credit-card-amex.png"})}),s=a.renderable(function(){return a.h3(function(){return a.text(a.l("other_cards_title"))}),a.p(function(){return a.text(a.l("other_cards_info"))}),a.img({src:"https://a.trellocdn.com/images/credit-cards/78ab357ad132b4742ccf91463b6511b2/credit-card.png"})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.renderOnce=function(){switch(this.options.cardType){case"american-express":this.$el.append(o());break;case"visa":case"master-card":case"discover":this.$el.append(s());break;default:this.$el.append([o(),s()])}return this},t}(i)},{}],313:[function(e,t,n){var r,i,o,s,a,u,c;r=e(321),i=e(124),o=e("bluebird"),a=e("underscore"),u=e(101),c=e(85),s=e(129),t.exports={gatewayFields:["number","cvv","expirationDate"],gatewayInitialState:function(){var e;return e=a.chain(this.gatewayFields).map(function(e){return[e,"empty"]}).object().value(),{gatewayLoaded:!1,gatewayFieldStatus:e,gatewayFocusField:null}},componentDidMount:function(){if(null==this.refs.form)throw Error("expected to be mixed into something with a ref to a form");return this._loadGateway().then(function(e){return function(){return e.setState({gatewayLoaded:!0}),e._initialiseBraintree()}}(this))},componentWillUnmount:function(){var e;return null!=(e=this._asyncDataPromise)?e.cancel():void 0},componentWillReceiveProps:function(e){var t;return t=function(){switch(e.errorField){case"credit card number":return"number";case"expYear":return"expirationDate";default:return e.errorField}}(),this.setFieldStatus(t,"invalid")},_initialiseBraintree:function(){return window.braintree.client.create({authorization:window.braintreeClientToken},function(e){return function(t,n){var i,o,s;if(t)throw Error(t);return i=(null!=(s=c("billingComponent"))?s.get("showNewBillingComponent"):void 0)&&"bc-billing-test"===e.refs.form.id,o={client:n,styles:{input:{"font-size":i?"16px":"14px","font-family":'"Helvetica Neue", Arial, Helvetica, sans-serif'}},fields:{number:{selector:".js-card-number",placeholder:i?"4111 1111 1111 1111":void 0},cvv:{selector:".js-cvv",placeholder:i?u("cvv digits",{digits:"3"}):void 0},expirationDate:{selector:".js-expiration-date",placeholder:u("month/year abbreviation")}}},window.braintree.hostedFields.create(o,function(t,n){var o;if(t)throw Error(t);return o=document.querySelector(".js-cvv-label-text"),n.on("cardTypeChange",function(t){var r;return 1!==t.cards.length?e.setState({cardType:null}):(r=t.cards[0],e.setState({cardType:r.type}),i?(o.innerHTML=r.code.name,n.setAttribute({field:"cvv",attribute:"placeholder",value:u("cvv digits",{digits:r.code.size.toString()})})):void 0)}),n.on("focus",function(t){return e.setState({gatewayFocusField:t.emittedBy})}),n.on("blur",function(t){var n,r,i;return e.setState({gatewayFocusField:null}),n=t.emittedBy,r=t.fields[n],i=r.isEmpty?"empty":r.isValid?"valid":"invalid",e.setFieldStatus(n,i)}),n.on("empty",function(t){return e.setFieldStatus(t.emittedBy,"empty")}),n.on("validityChange",function(t){var n,r,i;return n=t.emittedBy,r=t.fields[n],i=r.isEmpty?"empty":r.isPotentiallyValid?"valid":"invalid",e.setFieldStatus(n,i)}),e.refs.form.addEventListener("submit",function(t){return t.preventDefault(),n.tokenize(function(t,n){return t?void e._reject(new r.PostError(t.message)):e._resolve({nonce:n.nonce})})})})}}(this))},_awaitData:function(){return null!=this._awaiting&&this._reject(new Error("submitting form again")),new o(function(e){return function(t,n){return e._awaiting={resolve:t,reject:n}}}(this)).finally(function(e){return function(){return e._awaiting=null}}(this))},_resolve:function(e){var t;return null!=(t=this._awaiting)?t.resolve(e):void 0},_reject:function(e){var t;return null!=(t=this._awaiting)?t.reject(e):void 0},getAsyncData:function(){var e,t,n,s,a;for(s=this.gatewayFields,t=0,n=s.length;n>t;t++)if(e=s[t],"valid"!==this.state.gatewayFieldStatus[e])return o.reject(r.InvalidField("",{field:e}));return null!=(a=this._asyncDataPromise)&&a.cancel(),this._asyncDataPromise=this._awaitData().cancellable(),this.refs.form.dispatchEvent(new i("submit",{cancelable:!0})),this._asyncDataPromise},_loadGateway:function(){return null!=this._loadGatewayPromise?this._loadGatewayPromise:this._loadGatewayPromise=o.try(function(e){return function(){var e;if(null==window.braintree)return e=["https://js.braintreegateway.com/web/3.19.0/js/client.min.js","https://js.braintreegateway.com/web/3.19.0/js/hosted-fields.min.js"],o.all(e.map(function(e){return s.loadScript(e)}))}}(this)).return()},setFieldStatus:function(e,t){var n;return n=a.clone(this.state.gatewayFieldStatus),n[e]=t,this.setState({gatewayFieldStatus:n})}}},{}],314:[function(e,t,n){t.exports={special:[["US","united-states"],["GB","united-kingdom"],["CA","canada"],["AU","australia"],["DE","germany"],["NL","netherlands"]],unloved:[["AF","afghanistan"],["AL","albania"],["DZ","algeria"],["AS","american-samoa"],["AD","andorra"],["AI","anguilla"],["AG","antiqua-and-barbuda"],["AR","argentina"],["AM","armenia"],["AW","aruba"],["AU","australia"],["AT","austria"],["AZ","azerbaijan"],["BS","bahamas"],["BH","bahrain"],["BD","bangladesh"],["BB","barbados"],["BY","belarus"],["BE","belgium"],["BZ","belize"],["BJ","benin"],["BM","bermuda"],["BT","bhutan"],["BO","bolivia"],["BA","bosnia-herzegovina"],["BV","bouvet-islands"],["BR","brazil"],["IO","british-indian-ocean-territory"],["VI","british-virgin-islands"],["BN","brunei"],["BG","bulgaria"],["BF","burkina-faso"],["BI","burundi"],["KH","cambodia"],["CM","cameroon"],["CA","canada"],["CV","cape-verde"],["KY","cayman-islands"],["CF","central-african-republic"],["TD","chad"],["CL","chile"],["CN","china"],["CO","colombia"],["KM","comoros"],["CG","congo"],["CR","costa-rica"],["CI","cote-d-ivoire"],["HR","croatia"],["CY","cyprus"],["CZ","czech-republic"],["DK","denmark"],["DJ","djibouti"],["DM","dominica"],["DO","dominican-republic"],["EG","egypt"],["SV","el-salvador"],["EC","equador"],["GQ","equatorial-guinea"],["ER","eritrea"],["EE","estonia"],["ET","ethiopia"],["FK","falkland-islands"],["FO","faroe-islands"],["FM","federated-states-of-micronesia"],["FJ","fiji"],["FI","finland"],["FR","france"],["GF","french-guiana"],["PF","french-polynesia"],["GA","gabon"],["GM","gambia"],["GE","georgia"],["DE","germany"],["GH","ghana"],["GI","gibraltar"],["GR","greece"],["GL","greenland"],["GD","grenada"],["GP","guadeloupe"],["GU","guam"],["GT","guatemala"],["GN","guinea"],["GW","guinea-bissau"],["GY","guyana"],["HT","haiti"],["HN","honduras"],["HK","hong-kong"],["HU","hungary"],["IS","iceland"],["IN","india"],["ID","indonesia"],["IE","ireland"],["IL","israel"],["IT","italy"],["JM","jamaica"],["JP","japan"],["JO","jordan"],["KZ","kazakhstan"],["KE","kenya"],["KI","kiribati"],["KW","kuwait"],["KG","kyrgyzstan"],["LA","laos"],["LV","latvia"],["LB","lebanon"],["LS","lesotho"],["LR","liberia"],["LI","liechtenstein"],["LT","lithuania"],["LU","luxembourg"],["MO","macau"],["MG","madagascar"],["MW","malawi"],["MY","malaysia"],["MV","maldives"],["ML","mali"],["MT","malta"],["MH","marshall-islands"],["MQ","martinique"],["MR","mauritania"],["MU","mauritius"],["YT","mayotte"],["FX","metropolitan-france"],["MX","mexico"],["MD","moldova"],["MN","mongolia"],["ME","montenegro"],["MA","morocco"],["MZ","mozambique"],["NA","namibia"],["NR","nauru"],["NP","nepal"],["AN","netherlands-antilles"],["NL","netherlands"],["NC","new-caledonia"],["NZ","new-zealand"],["NI","nicaragua"],["NE","niger"],["NG","nigeria"],["MP","northern-mariana-islands"],["NO","norway"],["OM","oman"],["PK","pakistan"],["PW","palau"],["PA","panama"],["PG","papua-new-guinea"],["PY","paraguay"],["PE","peru"],["PE","peru"],["PH","philippines"],["PN","pitcairn"],["PL","poland"],["PT","portugal"],["PR","puerto-rico"],["QA","qatar"],["KR","republic-of-korea"],["RE","reunion"],["RO","romania"],["RU","russia"],["ST","sao-tome-and-principe"],["SA","saudi-arabia"],["SN","senegal"],["RS","serbia"],["SC","seychelles"],["SL","sierra-leone"],["SG","singapore"],["SK","slovakia"],["SI","slovenia"],["SB","solomon-islands"],["SO","somalia"],["ZA","south-africa"],["ES","spain"],["LK","sri-lanka"],["SH","st-helena"],["KN","st-kitts-and-nevis"],["LC","st-lucia"],["VC","st-vincent-and-the-grenadines"],["SD","sudan"],["SR","suriname"],["SJ","svalbard-and-jan-mayen-islands"],["SZ","swaziland"],["SE","sweden"],["CH","switzerland"],["SY","syria"],["TW","taiwan"],["TJ","tajikistan"],["TZ","tanzania"],["TH","thailand"],["MK","the-former-yugoslav-republic-of-macedonia"],["TG","togo"],["TO","tonga"],["TT","trinidad-and-tobago"],["TR","turkey"],["TM","turkmenistan"],["TC","turks-and-caicos-islands"],["TV","tuvalu"],["UG","uganda"],["UA","ukraine"],["AE","united-arab-emirates"],["GB","united-kingdom"],["US","united-states"],["UY","uruguay"],["UZ","uzbekistan"],["VU","vanuatu"],["VA","vatican-city"],["VE","venezuela"],["VN","vietnam"],["EH","western-sahara"],["YE","yemen"],["ZR","zaire"],["ZM","zambia"],["ZW","zimbabwe"]]}},{}],315:[function(e,t,n){var r,i,o,s;o=e("underscore"),r=e(321),i=e("bluebird"),s=e("xtend"),t.exports={defaultInitialState:function(){return o.object(this.formFields.map(function(e){return[e,""]}))},getData:function(){var e,t,n,a,u,c;n=null!=(t=this.requiredFields)?t:{};for(e in n)if(u=n[e],c=this.state[e],a=o.isRegExp(u)?u.test(c):o.isFunction(u)?u(c,this.state):o.isEqual(u,c),!a)return i.reject(r.InvalidField("",{field:e}));return i.resolve("function"==typeof this.getAsyncData?this.getAsyncData():void 0).then(function(e){return function(t){return e.formFields?s(t,o.object(e.formFields.map(function(t){return[t,e.state[t]]}))):void 0}}(this))},controlledOpts:function(e){return{onChange:function(t){return function(n){var r;return r={},r[e]=n.target.value,t.setState(r)}}(this),value:this.state[e]}}}},{}],316:[function(e,t,n){var r,i,o,s,a,u,c,l,d;r=e(315),i=e("react"),c=e(514)("credit_card"),o=e("underscore"),d=e("xtend"),s=e(238),a=e(90),u=e(91),l=e(48),t.exports=i.createClass({displayName:"ProductsComponent",formFields:["products"],mixins:[r],getInitialState:function(){return{products:[this.props.defaultProduct.toString()]}},render:c.renderable(function(){var e,t,n,r,i,o,d,p,h,m,f;return d=this.props,o=d.productName,i=d.monthlyProduct,f=d.yearlyProduct,e=d.billingStrategy,h=d.setBillingPlan,p=d.selectedBillingPlan,n=d.inBillingTest,t=s(c,"radio",this),p&&i&&(r=p.toString()===i.productNumber.toString()),m=function(e){var t;return e.target.value?(t=function(){switch(e.target.value){case"105":return"Monthly";case"106":return"Annual";default:return"Unknown"}}(),l("Organization View","Business Class Page",t+" Billing Button")):void 0},n?c.div(".u-clearfix.billing-products-component",function(){return c.h1(".bc-subscribe-title",function(){return c.format("subscribe-to-productname-test",{productName:o})}),c.h3(".billing-plan-title",function(){return c.format("billing-plan-test")}),c.div(".u-clearfix.billing-plans-wrap",function(){return c.div(".u-clearfix.billing-plan.yearly-plan",function(){return c.label({onClick:m},function(){t("products",[f.productNumber.toString()],function(){return h(f.productNumber.toString())}),c.span(".radio"),e.perUser?(c.h4(function(){return c.format("billed-annually-test")}),c.format("yearly-price-per-member-per-month-test",{price:a(f.price/12)}),c.span(".save-losenge.small",function(){return c.format("save-percent-test",{savePercent:u(f.savePercent)})})):c.format("yearly-price-per-year-save-savepercent",{price:a(f.price),savePercent:u(f.savePercent)})})}),e.perActiveUser&&c.p(".u-quiet",function(){return c.format("smart billing explanation recently active")}),c.div(".u-clearfix.billing-plan.monthly-plan",function(){return c.label({onClick:m},function(){t("products",[i.productNumber.toString()],function(){return h(i.productNumber.toString())}),c.span(".radio"),e.perUser?(c.h4(function(){return c.format("billed-monthly-test")}),c.format("month-price-per-member-per-month-test",{totalPerUserPerMonthPrice:a(i.monthlyPrice)})):c.format("monthly-price-per-month",{price:a(i.price)})})})}),r?c.span(".switch-to-annual.small",function(){return c.format("save-annual-billing-test",{savePercent:f.savePercent})}):void 0}):c.div(function(){return c.h1(".business-class-new-intro-header-title.bc-billing-title",function(){return c.format("subscribing-to-productname",{productName:o})}),c.div(".window-module",function(){return c.div(".window-module-title",function(){return c.h3(function(){return c.format("billing")})}),c.div(".u-gutter.u-clearfix.credit-card-form-section",function(){return e.perActiveUser&&c.p(".u-quiet",function(){return c.format("smart billing explanation recently active")}),c.div(".radio-div.u-clearfix",function(){return c.label(function(){t("products",[i.productNumber.toString()]),e.perUser?c.format("monthly-totalperuserprice-per-month-price-per-member-per-month",{totalPerUserPrice:a(i.totalPrice),price:a(i.price),billableMemberCount:e.userCount}):c.format("monthly-price-per-month",{price:a(i.price)})})}),c.div(".radio-div.u-clearfix",function(){return c.label(function(){t("products",[f.productNumber.toString()]),e.perUser?c.format("yearly-totalperuserprice-per-year-price-per-member-per-month-paid-annually-save-savepercent",{totalPerUserPrice:a(f.totalPrice),price:a(f.price/12),billableMemberCount:e.userCount,savePercent:u(f.savePercent)}):c.format("yearly-price-per-year-save-savepercent",{price:a(f.price),savePercent:u(f.savePercent)})})})})})})})})},{}],317:[function(e,t,n){var r,i,o,s;r=e(315),i=e("react"),s=e(514)("credit_card"),o=e(90),t.exports=i.createClass({displayName:"SummaryComponentTest",mixins:[r],getInitialState:function(){return{products:[this.props.defaultProduct.toString()]}},render:s.renderable(function(){var e,t,n,r,i,a,u,c,l,d,p;return i=this.props,r=i.productName,n=i.monthlyProduct,p=i.yearlyProduct,e=i.billingStrategy,u=i.selectedBillingPlan,c=i.subTotalCost,l=i.tax,a=i.region,t=u.toString()===p.productNumber.toString(),d=(parseFloat(c)+parseFloat(l||0)).toFixed(2),s.div(".billing-summary",function(){return s.h3(function(){return s.format("billing-plan-summary-test")}),s.table(function(){return s.tbody(function(){return s.tr(function(){return s.td(function(){return s.span(".licences-quantity",function(){return s.format(t?"yearly-licenses-test":"monthly-licenses-test",{licenses:e.userCount})}),t?s.span(".save-info.small",function(){return s.format("monthly-saving-info-test",{savePercent:p.savePercent})}):s.span(".switch-to-annual.small",function(){return s.format("annual-saving-info-test",{savePercent:p.savePercent})})}),s.td(function(){return s.format("cost-each-monthly-test",{price:o(t?p.price:n.monthlyPrice)})})}),s.tr(function(){return s.td(function(){return null!==a?s.format("sales-tax",{region:l?a:""}):s.span(".u-form-error",function(){return s.format("could-not-calculate-sales-tax")})}),s.td(function(){return null!==l?s.strong(function(){return s.format("total-cost-test",{total:o(l)})}):void 0})})}),s.tfoot(function(){return s.tr(function(){return s.td(function(){return s.format("total-label-test")}),s.td(function(){return s.strong(".price",function(){return s.format("total-cost-test",{total:o(d,!0)})})})})})})})})})},{}],318:[function(e,t,n){var r,i,o;r=e(315),i=e("react"),o=e(514)("credit_card"),t.exports=i.createClass({displayName:"TermsOfServiceComponent",formFields:["acceptTOS"],requiredFields:{acceptTOS:!0},mixins:[r],getInitialState:function(){return{acceptTOS:!1}},render:o.renderable(function(){var e,t,n,r;return t=this.props.errorField,n="acceptTOS"===t,r=function(e){return function(t){return e.setState({acceptTOS:t.target.checked})}}(this),e=this.state.acceptTOS,o.div(".u-gutter",{id:"divAcceptTOS"},function(){return n&&o.p(".u-form-error.error",function(){return o.format("you-must-accept-the-terms-of-service-and-privacy-policy")}),o.div(".check-div.u-clearfix",function(){return o.label(function(){return o.input({class:o.classify({"input-error":n}),type:"checkbox",checked:e,onChange:r}),o.format("i-accept-the-terms-of-service-and-the-privacy-policy")})})})})})},{}],319:[function(e,t,n){var r,i,o,s,a;r=e(71),o=e(101),s=e("moment"),i=e(238),a=e("xtend"),t.exports=function(e,t,n){var i,u,c,l,d,p,h,m,f,g,v,b;return c={},c.paidAccount=e.get("paidAccount"),c.key=c.id=e.id,c.statementUrl=e.urlRoot+"/"+e.id+"/paidAccount/statement",u=null!=(d=c.paidAccount)&&null!=(p=d.products)?p[0]:void 0,b=t.getYearlyEquivalent(u),null!=u&&(l=null!=(h=c.paidAccount.billingDates)?h[u]:void 0)&&(c.nextBillingDate=s(new Date(l)).format("LL")),c.yearlyEquivalent=b,c.yearlyEquivalentPrice=t.getPrice(b),c.yearlyEquivalentTotalPrice="function"==typeof e.totalPerUserPrice?e.totalPerUserPrice(b):void 0,c.yearlyDiscountPercent=t.getYearlyDiscountPercent(b,u),c.price=t.getPrice(u),c.billingStrategy=e.getBillingStrategy(u),t.isPerUser(u)?c.nextChargeAmount=e.totalPerUserPrice(u):c.nextChargeAmount=t.getPrice(u),c.current=t.currentPriceObjectForModel(e),c.canSwitchToYearly=function(){return!t.isUpgrade(u)&&null!=t.getYearlyEquivalent(u)},c.activeAccount=r.isActive(c.paidAccount),v=null!=(m=c.paidAccount)?m.standing:void 0,c.hasAccount=r.hasAccount(v),c.processingAccount=r.isProcessing(v),c.problemAccount=r.isProblem(v),c.willExpire=r.willExpire(c.paidAccount),c.willExpire&&null!=u&&(l=c.paidAccount.expirationDates[u])&&(c.expirationDate=s(new Date(l)).format("LL")),null!=(i=r.standingName(null!=(f=e.get("paidAccount"))?f.standing:void 0))&&(c.accountStanding=i,c.accountStandingDisplay=o(["account standing",i])),c.cancelledAccount=r.isCancelled(c.paidAccount),c.needCC=r.needsCC(null!=(g=c.paidAccount)?g.standing:void 0),a(c,n)}},{}],320:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;i=e(325),o=e("moment"),a=e(253),u=function(e,t){if("string"!=typeof e)throw Error("Not a string!");return 0===e.indexOf(t)},s=function(e){return{date:e.date,statementUrl:e.statementUrl,fallbackText:e.item,translationKey:e.translationKey,translationArgs:e.translationSubstitutions,amount:Math.abs(e.amount),type:function(){if(u(e.item,"Credit."))return"return";if(u(e.item,"Refund to your"))return"refund";if(e.amount>0)return"credit";if(e.amount<0)return"debit";throw new Error("Cannot format a row with 0 amount!")}()}},c=function(e){var t,n;return n=(null!=(t=e.statement)?t:[]).filter(function(e){return 0!==e.amount}).map(s).reverse(),{statement:n}},t.exports=r=function(e){function t(){var e;t.__super__.constructor.apply(this,arguments),e=null,this.state=this._protectedState.map(a(function(t){return t([{value:a.Any}],function(t){var n;return n=t.value,e=c(n)}),t([{error:a.Any}],function(e){var t;return t=e.error,{errorText:t.message}}),t([{timeout:!0}],function(){return e}),t([{}],function(){return{}})}))}return l(t,e),t}(i)},{}],321:[function(e,t,n){var r;r=e(102),t.exports=r("CreditCardForm",["InvalidField","PostError","PollError"])},{}],322:[function(e,t,n){var r,i,o,s;s=e(71),r=s.isActive,i=s.isProcessing,o=s.needsCC,t.exports=function(e){return o(null!=e?e.standing:void 0)||r(e)&&!i(null!=e?e.standing:void 0)}},{}],323:[function(e,t,n){var r;r=e(246),t.exports=r("PollTimeoutError")},{}],324:[function(e,t,n){var r,i;i=e("bluebird"),r=e(323),t.exports=function(e,t){var n,o;return o=null,n=new i(function(n,i){o=e.state.subscribe(function(e){"error"in e?i(e.error):"timeout"in e?i(r()):"value"in e&&t(e.value)&&n(e.value)})}),e.start(),e.finished.then(function(){return o()}),n.finally(function(){return e.stop()})}},{}],325:[function(e,t,n){var r,i,o,s,a,u,c,l,d;r=e(216),i=e("hearsay"),a=e("bluebird"),d=e("moment"),l=e(238),u=e(76),c=e(246),o=c("PollingError"),t.exports=s=function(){function e(e,t,n){var r;this.pollFx=e,this.minutesToPoll=t,this.intervalMs=n,this._protectedState=new i.Slot({}),this.state=this._protectedState,
this.finished=new a(function(e){return function(t){return e._resolveFinished=t}}(this)),r=this._protectedState.use(),this.finished.finally(r)}return e.prototype._started=!1,e.prototype.start=function(){u(!this._started,"Cannot start more than once!"),u(!this._isComplete(),"Cannot start after stopping!"),this._started=!0,this._dateToStopPolling=d().add(this.minutesToPoll,"minutes").toDate(),this._poll()},e.prototype._done=function(){return u(!this._isComplete(),"Pollster cannot complete more than once!"),this._resolveFinished(this.state.get())},e.prototype._isComplete=function(){return this.finished.isFulfilled()},e.prototype.stop=function(){this._isComplete()||(null!=this._currentTimeout&&(clearTimeout(this._currentTimeout),delete this._currentTimeout),this._done())},e.prototype._poll=function(){return a.try(this.pollFx).catch(function(e){return a.reject(o("",{innerError:e}))}).then(function(e){return function(t){e._isComplete()||(e._protectedState.set({value:t}),d().isBefore(e._dateToStopPolling)?e._currentTimeout=setTimeout(l(e,"_poll"),e.intervalMs):(e._protectedState.set({timeout:!0}),delete e._currentTimeout,e._done()))}}(this)).catch(o,function(e){return function(t){var n;return n=t.innerError,e._protectedState.set({error:n}),e._done()}}(this)).done()},e}()},{}],326:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h;r=e(216),i=e(217),s=e(325),a=e("bluebird"),d=e(324),u=e(322),o=e(321),c=function(e){return u(e.paidAccount)},h="U.S. addresses require a 5 or 9 digit zip code. Canadian addresses require a Postal Code.",l=function(e){return e instanceof r.BadRequest&&(/^invalid value for /.test(e.message)||e.message.trim()===h)},p=function(e){return a.resolve(e).disposer(function(e){return e.stop()})},t.exports=function(e,t,n){return a.using(p(new s(t,1,1e3)),function(t){return e().cancellable().catch(l,function(e){var t,n;return n=e.message,t=n.trim()===h?"zipCode":n.replace("invalid value for ","").trim(),a.reject(o.InvalidField("",{field:t}))}).catch(r,function(e){return a.reject(o.PostError("",{err:e}))}).then(function(e){return c(e)?e:d(t,c).catch(function(e){return a.reject(o.PollError("",{err:e}))})})})}},{}],327:[function(e,t,n){var r,i,o,s,a,u,c;r=e(79),s=e(238),a=e(131),i=e("react"),u=e(514)(),o=e(104),c=e(48),t.exports=i.createClass({displayName:"BoardListAnnouncementComponent",render:u.renderable(function(){var e,t,n,r,i;return i=this.props,e=i.icon,t=i.message,n=i.onClick,r=i.onDismiss,u.div(".boards-page-announcement-container",{onClick:n},function(){return u.div(".boards-page-announcement",function(){return u.icon(e),u.text(" "),u.raw(o.description.formatInline(t)),u.div(".boards-page-announcement-dismiss",{onClick:r},function(){return u.icon("close")})})})}),shouldComponentUpdate:a})},{}],328:[function(e,t,n){var r,i;r=e("react"),i=e(514)("board_list_item_add"),t.exports=r.createClass({displayName:"BoardListItemAddComponent",render:i.renderable(function(){var e;return e=this.props.newBoard,i.li(".boards-page-board-section-list-item",function(){return i.b(e,".board-tile.mod-add",function(){return i.format("create-new-board-ellipsis")})})})})},{}],329:[function(e,t,n){var r,i,o,s,a,u,c;r=e(79),o=e(238),a=e(131),i=e("react"),u=e(514)("board_list_item"),c=e(48),s=function(e){var t;return t=r.browserStr,"safari"===t&&0===e.button},t.exports=i.createClass({displayName:"BoardListItemComponent",render:u.renderable(function(){var e,t,n,r,i,a,l,d,p,h,m,f,g,v,b,y,w,_,k;return v=this.props,h=v.isStarred,b=v.background,r=b.color,d=b.image,k=b.tiled,n=b.brightness,y=v.relUrl,g=v.orgname,m=v.name,w=v.showOptions,l=v.id,f=v.onStarClick,t=v.badgeComponents,_=v.tagComponents,a=v.hidden,i=v.hasUnseenActivity,p=v.isDraggable,e=this.getBackgroundStyle(),u.li({class:u.classify({hide:a,"boards-page-board-section-list-item":!0,"js-draggable":p})},function(){var a,d,p,v;if(a={"board-tile":!0,tile:k},!r)switch(n){case"unknown":a["mod-unknown-background"]=!0;break;case"light":a["mod-light-background"]=!0}return p=function(e){var t;return s(e)?(t=e.currentTarget,t.removeAttribute("href")):void 0},v=function(e){var t;return t=e.currentTarget,t.setAttribute("href",y)},d=function(){return c("Organization View","Boards Page","Click on Board")},u.link(y,{onMouseDown:p,onMouseUp:v,onClick:d,class:u.classify(a),style:e},function(){var e;return u.span(".board-tile-fade"),e={"board-tile-details":!0,"is-badged":!0,"is-sub-named":g},u.span({class:u.classify(e)},function(){u.span(".board-tile-details-name",{title:m,dir:"auto"},function(){return u.text(m)}),g&&u.span(".board-tile-details-sub-name",{title:g,dir:"auto"},function(){return u.text(g)})}),w&&u.span(".board-tile-options",function(){return i&&u.span(".board-tile-options-unread-indicator",{title:u.l("there-is-new-activity-on-this-board")}),u.icon("star",{class:u.classify({"is-starred":h,"board-tile-options-star-icon":!0}),title:u.l("click-to-star-this-board-it-will-show-up-at-top-of-your-boards-list"),onClick:function(e){return e.preventDefault(),e.stopPropagation(),f(l)}})}),u.span(".board-tile-badges",function(){return t.forEach(o(u,"addElement"))})}),u.div(".board-tags.u-clearfix",function(){return _.forEach(o(u,"addElement"))})})}),getBackgroundStyle:function(){var e,t,n,r,i;return r=this.props.background,t=r.color,n=r.image,i=r.tiled,e=r.brightness,t?{backgroundColor:t}:{backgroundImage:u.urlify(n)}},shouldComponentUpdate:a})},{}],330:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m;r=e(329),p=e(238),i=e("react"),s=e("react-dnd"),o=e("react-dom"),h=e("recup"),m=e("xtend"),a=i.createClass({displayName:"BoardListItemDndComponent",render:function(){var e,t,n,s,a;return a=this.props,t=a.connectDropTarget,e=a.connectDragSource,n=a.isDragging,n?h.render(function(){return h.li(".boards-page-board-section-list-item.mod-placeholder")}):(s=m(this.props,{ref:function(n){return t(o.findDOMNode(n)),e(o.findDOMNode(n))}}),i.createElement(r,s))}}),d={canDrop:function(){return!1},hover:function(e,t){return e.id!==t.getItem().id?e.onDragHover(t.getItem().id):void 0}},l=function(e,t){return{connectDropTarget:e.dropTarget()}},c={beginDrag:function(e){return{id:e.id}},endDrag:function(e){return e.onDragEnd()}},u=function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}},t.exports=s.DragSource("BoardTile",c,u)(s.DropTarget("BoardTile",d,l)(a))},{}],331:[function(e,t,n){var r,i,o;r=e("react"),o=e(514)("org_filtering"),i=e(131),t.exports=r.createClass({displayName:"BoardListItemTagAddComponent",render:o.renderable(function(){var e;return e=this.props.onClick,o.b(e,{class:"board-tags-item mod-add"},function(){return o.icon("add",{class:"board-tags-item-icon"})})}),shouldComponentUpdate:i})},{}],332:[function(e,t,n){var r,i,o;r=e("react"),o=e(514)(),i=e(131),t.exports=r.createClass({displayName:"BoardListItemTagComponent",render:o.renderable(function(){var e,t,n,r;return t=this.props,r=t.text,e=t.onClick,n=t.selected,o.b(e,{class:o.classify({"board-tags-item":!0,"mod-selected":n})},function(){return o.text(r)})}),shouldComponentUpdate:i})},{}],333:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(382),s=e(48),a=e("xtend"),r=e(33),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.events={mouseenter:"select",mouseleave:"deselect"},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,a(o.prototype.events,e||this.events))},t.prototype.select=function(){return this.$el.addClass("selected")},t.prototype.deselect=function(){return this.$el.removeClass("selected")},t.prototype.trackBoardClick=function(){var e;return e=this.model.isMember(r.me())?"Board (Member of)":"Board (Not a Member)",s("Search","Select Item",e)},t}(o)},{}],334:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};d=e("react"),c=e(637).OrganizationBoardsAd,v=e(48),g=e(514)("board_list"),m=e("underscore"),r=e(217),l=e("bluebird"),f=e(85),p=e(114),h=e(129),o=e(329),u=e(6),i=e(33),t.exports=d.createClass({displayName:"BoardListSectionComponent",getInitialState:function(){return{collapsed:!0}},render:g.renderable(function(){var e,t,n,r,o,u,c,l,d,p,v,b,y,w,_,k;return y=this.props,d=y.items,u=y.header,b=y.noSidebarMod,r=y.createNewItem,v=y.mayBeSorted,l=y.isStarredSection,_=y.showAd,c=y.isAdDismissed,n=this.state.collapsed,e=d.length,o=v?m.chain(d).sortBy(function(e){return-e.props.dateLastActivity}).filter(function(e,t){return!n||10>=t||!e.props.isLessActive}).sortBy(function(e){return e.props.name.toLowerCase()}).value():d,p=e-o.length,t=g.classify({"boards-page-board-section":!_,"mod-no-sidebar":b}),k=f("suggestBoardTemplate").get("hardStart"),w=1>=e&&h.idToDate(i.myId())>h.dateBefore({days:7})&&h.idToDate(i.myId())>new Date(k),g.div({class:t},function(t){return function(){var n;return u&&g.addElement(u),_?g.div(".boards-page-layout",function(){return g.div(".boards-page-layout-sidebar",function(){return g.div(".boards-page-ad-section",function(){return c?void 0:g.addElement(t.orgAdComponent())})}),g.div(".boards-page-layout-list",function(){return g.ul(".boards-page-board-section-list",function(){var e,t,n;for(e=0,n=o.length;n>e;e++)t=o[e],g.addElement(t);r&&g.addElement(r)})})}):(t.props.orgId?g.createElement(s,{boardCount:e,orgId:t.props.orgId,orgName:t.props.orgName}):w&&g.createElement(a),g.ul(".boards-page-board-section-list",function(){var e,t,n;for(e=0,n=o.length;n>e;e++)t=o[e],g.addElement(t);r&&g.addElement(r)})),n=function(){return t.setState({collapsed:!1})},o.length<d.length?g.b(n,".boards-page-show-all-boards.quiet-button",function(){return g.format("show-less-active-boards-count",{lessActiveCount:p})}):void 0}}(this))}),orgAdComponent:function(){var e;return e={billingUrl:this.props.billingUrl,dismissAd:this.props.dismissAd},d.createElement(c,e)}}),s=d.createClass({displayName:"BoardSuggestionComponent",getInitialState:function(){return{dismissed:!0,hasExistingBoard:!1,loading:!0,boards:[]}},componentDidMount:function(){var e;return(null!=(e=f("boardRecommendations"))?e.get("recommend"):void 0)?this._recommendationsPromise=r({url:"/1/organizations/"+this.props.orgId+"/boards/suggested",type:"get",background:!0}).cancellable().then(function(e){return function(t){return e.setState({dismissed:e.isDismissed(),loading:!1,hasExistingBoard:e.props.boardCount>0,boards:m.first(t,4)})}}(this)).catch(l.CancellationError,function(){}):void 0},componentWillUnmount:function(){var e;return null!=(e=this._recommendationsPromise)?e.cancel():void 0},boardToBoardItemElement:function(e){return d.createElement(o,this.boardToBoardItemProps(e))},boardToBoardItemProps:function(e){var t;return{id:e.id,name:e.name,hasUnseenActivity:!1,dateLastActivity:new Date(null!=(t=e.dateLastActivity)?t:h.idToDate(e.id)),isLessActive:!1,background:this.backgroundObjForBoard(e),showOptions:!1,isStarred:!1,relUrl:h.relativeUrl(e.url),onStarClick:function(e){return function(e){}}(this),badgeComponents:[],tagComponents:[],key:e.id}},backgroundObjForBoard:function(e){var t,n,r,i;return m.extend({brightness:e.prefs.backgroundBrightness},e.prefs.backgroundTile?{image:e.prefs.backgroundImage,tiled:!0}:(t=null!=(n=null!=(r=h.smallestPreviewBiggerThan(e.prefs.backgroundImageScaled,400,200))?r.url:void 0)?n:e.prefs.backgroundImage)?{image:t,tiled:!1}:{color:null!=(i=e.prefs.backgroundColor)?i:"#0079BF"})},dismissedKey:function(e){return"suggestions-dismissed-"+e},onDismissSuggestions:function(){var e;return v("Board Recommendations","Dismissed",this.props.orgId),e=!0,this.setState({dismissed:e}),p.set(this.dismissedKey(this.props.orgId),e)},isDismissed:function(){return p.get(this.dismissedKey(this.props.orgId))||!1},render:g.renderable(function(){var e,t,n,r,i;return r=this.state,e=r.boards,n=r.hasExistingBoard,t=r.dismissed,(null!=(i=f("boardRecommendations"))?i.get("recommend"):void 0)&&e.length&&!t?(v("Board Recommendations","Displayed",this.props.orgId,e.length),g.div(".boards-suggestion-container.u-clearfix",function(t){return function(){return g.div(".suggestions-info",function(){var e,r;return g.a(".suggestions-dismiss.icon-sm.icon-close",{onClick:t.onDismissSuggestions}),e="Get started with your team!",r="Here are some of your team's favorite boards.",n&&(e="Don't miss out!",r="Here are some team boards you might like."),g.h3(".suggestions-heading",function(){return g.raw(e)}),g.raw(r),g.a(".suggestions-all-boards",{href:"/"+t.props.orgName},function(){return g.raw("See all team boards")})}),g.ul(".boards-list",function(){var n,r,i,o;for(o=[],r=0,i=e.length;i>r;r++)n=e[r],o.push(g.addElement(t.boardToBoardItemElement(n)));return o})}}(this))):g.div()})}),a=d.createClass({displayName:"BoardTemplateComponent",dismiss:function(){return v("Board Template","Dismissed"),i.me().dismiss(this.dismissedKey)},dismissedKey:"template-suggestion",createBoard:function(){var e,t;return e={name:"My To Do Board",defaultLists:!0},v("Board Template","Create","To Do Board"),i.me().dismiss(this.dismissedKey),t=i.me().boardList.create(e,{success:function(e){return function(e){var t,n;n=e.id,b.call(t=i.me().get("idBoards"),n)<0&&i.me().set("idBoards",t.concat(e.id)),u.displayBoard({idBoard:e.id,openCardComposerInFirstList:!0}).done()}}(this),error:function(){return console.error("could not create board","error","create error")}})},render:g.renderable(function(){var e,t;return e=this.createBoard,t=f("suggestBoardTemplate"),t.inExperiment&&t.track(),!i.me().isDismissed(this.dismissedKey)&&t.get("enabled")?g.div(".boards-suggestion-container.u-clearfix",function(t){return function(){return g.div(".suggestions-info",function(){return g.a(".suggestions-dismiss.icon-sm.icon-close",{onClick:t.dismiss}),g.h3(".suggestions-heading",function(){return g.raw("New to Trello?")}),g.raw("Get started with a To Do Board")}),g.ul(".boards-list",function(){return g.div(".to-do-board.boards-page-board-section-list-item",function(){return g.b(e,".board-tile",{style:{backgroundColor:"rgb(0, 121, 191)"}},function(){return g.span(".board-tile-fade"),g.span(".board-tile-details.is-badged",function(){return g.span(".board-tile-details-name",function(){return g.text("My To Do Board")})})})})})}}(this)):g.div()})})},{}],335:[function(e,t,n){var r,i,o,s,a,u;r=e(334),o=e("react-dnd"),i=e("react"),s=i.createClass({displayName:"BoardListSectionDndComponent",render:function(){var e;return(e=this.props.connectDropTarget)(i.createElement("div",{},i.createElement(r,this.props)))}}),u={drop:function(){}},a=function(e,t){return{connectDropTarget:e.dropTarget()}},t.exports=o.DropTarget("BoardTile",u,a)(s)},{}],336:[function(e,t,n){var r,i;r=e("react"),i=e(514)("board_list"),t.exports=r.createClass({displayName:"BoardListSectionHeaderComponent",render:i.renderable(function(){var e,t,n,r,o,s,a,u,c;return s=this.props,n=s.logoHash,c=s.title,e=s.iconClass,a=s.smallIconClass,u=s.smallIconTitleKey,t=s.linkElements,n&&(r=window.logoDomain+"/"+n+"/30.png",o=window.logoDomain+"/"+n+"/170.png"),i.div(".boards-page-board-section-header",function(){return i.div(".boards-page-board-section-header-icon",function(){return n?i.img({class:"boards-page-board-section-header-icon-image",src:r,srcSet:r+" 1x, "+o+" 2x",alt:c+" logo"}):i.span({class:"icon-lg icon-"+e})}),i.h3(".boards-page-board-section-header-name",function(){return i.text(c)}),a&&i.span(".boards-page-board-section-header-small-icon",function(){return i.icon(a,{title:i.l(u)})}),t?i.div(".boards-page-board-section-header-options",function(){var e,n,r,o;for(o=[],e=0,n=t.length;n>e;e++)r=t[e],o.push(i.addElement(r));return o}):void 0})})})},{}],337:[function(e,t,n){var r,i;r=e("react"),i=e(514)("board_list"),t.exports=r.createClass({displayName:"BoardlistSectionHeaderLinkComponent",render:i.renderable(function(){var e,t,n,r,o;return t=this.props,o=t.url,e=t.iconClass,n=t.titleKey,r=t.trackOnClick,i.link(o,".boards-page-board-section-header-options-item.dark-hover",{onClick:r},function(){return i.icon(e,{class:"boards-page-board-section-header-options-item-icon"}),i.span(".boards-page-board-section-header-options-item-name",function(){return i.format(n)})})})})},{}],338:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),s=e(522),o=e(129),u=e(517)("bc_upsell_ad"),l=e(48),a=e("underscore"),c=u.renderable(function(){return u.div(".power-ups-pane-upsell-ad-icon",function(){return u.img(".power-ups-pane-upsell-ad-icon-image",{src:"https://a.trellocdn.com/images/206e08d8125909718f3de89595bf7478/business-class-logo-mark-blue.svg"})}),u.div(".power-ups-pane-upsell-ad-details",function(){return u.h4(".power-ups-pane-upsell-ad-details-header",function(){return u.format("name")}),u.p(function(){return u.format("description")}),u.p(function(){return u.a(".quiet.js-show-details",{href:"/business-class?utm_source=trello&utm_medium=inapp&utm_content=power-ups-menu&utm_campaign=bc-upgrade",target:"_blank"},function(){return u.format("show-details")})})})}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.className="power-ups-pane-upsell-ad",t.prototype.events={"click .js-show-details":function(){return l("Power-Ups","BC Upsell Ad")}},t.prototype.renderOnce=function(){return this.$el.html(c())},t}(s)},{}],339:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;l=e("underscore"),r=e(33),o=e(6),p=e(99),s=e(38),a=e("bluebird"),u=e(129),c=e(522),d=e(101),h=e(517)("board_power_ups"),m=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){var e;return e=r.me(),this.menuType=this.options.menuType,this.listenTo(e.organizationList,"add remove reset change",this.frameDebounce(this.render)),this.createNewTeam=0===e.organizationList.length},t.prototype.events=function(){return{"click .js-team":"clickTeam","click .js-create-team":"clickCreateTeam","click .js-create":"clickCreateNewTeam","click .js-cancel":"clickCancelNewTeam"}},t.prototype.render=function(){return this.$el.html(h.render(function(e){return function(){var t,n;return e.createNewTeam?(t=e.model.memberList.length,h.div(".create-team",function(){return h.p(function(){return h.format("first-create-your-business-class-team")}),h.p(function(){return h.label(function(){var e;return h.format("team-name"),e=1===t?{value:h.l("names-projects",{name:r.me().get("fullName")},{raw:!0})}:2===t?{placeholder:h.l("eg-names-projects",{name:r.me().get("fullName")},{raw:!0})}:{},e.maxLength=100,h.input(".full.js-autofocus.js-name",e)}),t>1?h.label(".create-team-add-members",function(e){return function(){return h.input(".js-add-members",{type:"checkbox",checked:!0}),h.format("add-the-members-of-this-board-to-the-team")}}(this)):void 0}),h.div(function(){return h.button(".primary.js-create",function(){return h.format("create")}),h.a(".create-team-cancel.quiet-button.js-cancel",function(){return h.format("cancel")})}),h.hr()}),l.defer(function(){return e.$(".js-name").select().focus()})):(n=r.me().organizationList.sortBy(function(e){return e.get("displayName").toLowerCase()}),h.div(".assign-to-team",function(){return h.p(function(){return h.format("this-board-is-not-in-a-team-yet"),h.text(" "),h.format("please-select-a-team-or-create-a-new-team-to-upgrade")})}),n.length>0&&h.ul(".assign-to-team-list",function(){var t,r,i,o,s;for(s=[],r=0,i=n.length;i>r;r++)o=n[r],t=o.canAddBoard(e.model)?{class:"js-team","data-idOrganization":o.id}:{class:"disabled",title:h.l("team-restrictions-prevent-you-from-adding-this-board-to-this-team")},s.push(h.li(".assign-to-team-list-item",t,function(){return h.div(".assign-to-team-list-item-content",function(){return h.div(".assign-to-team-list-item-logo",function(){var e;return e=o.get("logoHash"),e?h.img({src:logoDomain+"/"+e+"/30.png"}):h.span(".icon.icon-lg.icon-organization")}),h.div(".assign-to-team-list-item-details",function(){return h.div(".assign-to-team-list-item-name",function(){return h.text(o.get("displayName")),o.isFeatureEnabled("plugins")?(h.text(" "),h.icon("business-class",{class:"icon-business-class-color"})):void 0}),h.div(".assign-to-team-list-item-member-count",function(){var e;return null!=(e=o.get("memberships"))?h.text(p("members",e.length)):void 0})})})}));return s}),h.div(".assign-to-team-create.js-create-team",function(){return h.div(".assign-to-team-create-content",function(){return h.format("create-a-new-team")})}))}}(this))),this},t.prototype.clickTeam=function(e){var t;return t=this.$(e.currentTarget).attr("data-idOrganization"),this.model.trigger("added-to-team"),m(this.options.menuType+" Menu","Upsell Flow","Add To Existing Team"),a.fromNode(function(e){return function(n){return e.model.update("idOrganization",t,{waitForServer:!0},n)}}(this)).then(function(e){return function(){var n;return n=e.model.getOrganization(),"Collections"===e.options.menuType&&null!=n&&n.isFeatureEnabled("tags")?s.loadOrganizationMinimal(t).then(function(){return e.model.trigger("team-has-bc")}):o.navigate(o.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}}(this)).done()},t.prototype.clickCreateTeam=function(e){return this.createNewTeam=!0,this.render()},t.prototype.clickCancelNewTeam=function(e){return u.stop(e),this.model.trigger("cancel-add-to-team")},t.prototype.clickCreateNewTeam=function(e){var t,n;return n=this.$(".js-name").val(),/\S/.test(n)?(t={displayName:n},this.$(".js-create,.js-cancel").prop("disabled",!0).addClass("disabled"),r.me().organizationList.create(t,{modelCache:this.modelCache,silent:!0,success:function(e){return function(t){var n;return n=t.id,e.model.trigger("added-to-team"),e.model.update("idOrganization",n,{waitForServer:!0}),s.loadOrganizationMembersMinimal(n).then(function(){var n;return e.$(".js-add-members").prop("checked")?(n=e.model.getOrganization(),m("New Org","Create",e.menuType+" Sidebar (with members)",t.id),a.map(e.model.memberList.models,function(e){return n.isMember(e)?void 0:n.changeMemberRole(e,{type:"normal"})},{concurrency:3})):m("New Org","Create",e.menuType+" Sidebar (without members)",t.id)}).then(function(){return o.navigate(o.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}).done()}}(this)})):void 0},t}(c)},{}],340:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty,_=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(33),i=e(609),u=e(622),c=e(542),l=e(129),d=e(522),a=e(6),b=e(48),p=e("underscore"),r=e("jquery"),g=e(517)("board_collections"),m=g.renderable(function(e,t){return e?g.ul(".select-tags-list",function(){var n,r,i,o;for(i=[],n=0,r=e.length;r>n;n++)o=e[n],i.push(g.li(".select-tags-list-item.js-tag-item",{"data-id-tag":o.id},function(){return g.a(".select-tags-list-item-name-link.js-toggle-tag",function(){return t&&g.icon("check",{class:"select-tags-list-item-name-link-check-icon"}),g.text(o.get("name"))})}));return i}):void 0}),h=g.renderable(function(e){return m(e.associated,!0),m(e.notAssociated,!1)}),v=g.renderable(function(e){var t,n,r,i,o,s,a;return n=e.board,r=e.collectionsEnabled,t=e.billingUrl,a=e.orgUrl,i=e.hasTags,s=e.onOldBC,o=e.hideExplainer,r?(o||g.div(".collections-info",function(){return g.span(".collections-explainer-close.js-close-explainer",function(){return g.icon("close")}),g.img(".collections-image",{src:"https://a.trellocdn.com/images/collections/04c368f4479f478b6705bbd4cc373387/business-class-feature-roadmap.png"}),g.p(function(){return g.format("collections-let-you-group-and-filter")}),g.p(".js-learn-more",function(){return g.format("learn-more-about-collections")})}),g.div(".collections-select-lists",function(){return i?(g.div(".has-collections",function(){return g.p(".js-team-page",function(){return g.format("visit-team-page-create-some",{orgUrl:a})}),g.a(".quiet-button.full.create-collection-btn.js-add-tag",{href:"#"},function(){return g.format("create-collection")})}),g.input(".js-collections-search",{type:"text",placeholder:g.l("search-collections"),autocomplete:"off"}),g.div(".js-filtered-collections")):g.div(".no-collections",function(){return g.p(function(){return g.format("no-collections")}),g.p(".js-team-page",function(){return g.format("visit-team-page-create-some",{orgUrl:a})}),g.a(".quiet-button.full.create-collection-btn.js-add-tag",{href:"#"},function(){return g.format("create-collection")})})})):void g.div(".collections-upsell",function(){return g.h4(".collections-upsell-header",function(){return g.format("a-focused-perspective")}),g.img(".collections-image",{src:"https://a.trellocdn.com/images/collections/04c368f4479f478b6705bbd4cc373387/business-class-feature-roadmap.png"}),g.p(function(){return g.format("collections-let-you-group-and-filter")}),g.p(function(){return s?g.format("to-unlock-collections-upgrade-old-bc"):g.format("to-unlock-collections-upgrade")}),g.div(".collections-upgrade-action",function(){return t?g.a(".button.primary.js-lets-do-this",{href:t},function(){return g.format("lets-do-this")}):g.a(".button.primary.js-add-team",{href:"#"},function(){return g.format("lets-do-this")})}),g.div(".collections-upgrade-action",function(){return g.a(".collections-upgrade-cancel.js-go-back",{href:"#"},function(){return g.format("no-thanks")})})})}),f=function(e){return r(e.target).closest(".js-tag-item")[0].getAttribute("data-id-tag")},t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.className="board-menu-collections-select",t.prototype.noPadding=!0,t.prototype.initialize=function(){var e;return this.sidebarView=this.options.sidebarView,this.organization=(null!=(e=this.options)?e.org:void 0)||this.model.getOrganization(),this.collectionsEnabled=null!=this.organization&&this.organization.isFeatureEnabled("tags"),this.listenTo(this.model,"change:idOrganization",this.refereshOrganization),this.listenTo(this.model,"change:idTags",this.render),this.listenTo(o.me(),"change:oneTimeMessagesDismissed",this.render),this.collectionsEnabled&&this.listenTo(this.organization.tagList,"add remove reset change",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-add-tag":"addTag","keyup .js-collections-search":"renderFilteredCollections","click .js-toggle-tag":function(e){return b("Board Menu","Collections Menu","Toggle Collections"),this.toggleTag(f(e))},"click .js-go-back":function(e){return this.sidebarView.popView(),b("Board Menu","Collections Menu","No Thanks Button")},"click .js-add-team":function(e){return l.stop(e),this.model.trigger("add-to-team"),b("Board Menu","Collections Menu","Lets Add To Team")},"click .js-lets-do-this":function(e){return b("Board Menu","Collections Menu","Lets Do This Button")},"click .js-close-explainer":function(e){return o.me().dismiss("CollectionsExplainer"),b("Board Menu","Collections Menu","Dismiss Collections Explainer")},"click .js-learn-more a":function(e){return b("Board Menu","Collections Menu","Clicks Learn More Link")},"click .js-team-page a":function(e){return b("Board Menu","Collections Menu","Clicks Team Page Link")}},t.prototype.viewTitleKey="pick tags",t.prototype.addTag=function(e){return l.stop(e),b("Board Menu","Collections Menu","Open Create Tag Menu"),c.toggle({elem:e.target,view:i,options:{model:this.organization,modelCache:this.modelCache,boardView:!0}})},t.prototype.toggleTag=function(e){return this.model.toggleTag(e)},t.prototype.filterTagsBySearch=function(e){var t;return t=this._searchVal().toLowerCase(),p.isEmpty(t)?e:p.filter(e,function(e){var n;return(null!=(n=e.get("name"))?n.toLowerCase().indexOf(t):void 0)>-1})},t.prototype.filterTagsByAssociation=function(e,t){return p.groupBy(e,function(e){return function(e){var n;return n=e.id,_.call(t,n)>=0?"associated":"notAssociated"}}(this))},t.prototype._searchVal=function(){var e,t;return null!=(e=null!=(t=this.$(".js-collections-search").val())?t.trim():void 0)?e:""},t.prototype.renderFilteredCollections=function(){var e,t;if(null!=(t=this.organization)?t.tagList.models.length:void 0)return e=this.filterTagsByAssociation(this.filterTagsBySearch(this.organization.tagList.models),this.model.getIdTags()),this.$(".js-filtered-collections").empty().append(h(e))},t.prototype.refereshOrganization=function(){var e,t;return e=this.modelCache.get("Organization",this.model.previous("idOrganization")),t=this.model.getOrganization(),null!=e&&this.stopListening(e.tagList),this.organization=t,this.collectionsEnabled=null!=this.organization&&this.organization.isFeatureEnabled("tags"),this.collectionsEnabled&&this.listenTo(this.organization.tagList,"add remove reset change",this.render),this.render()},t.prototype.render=function(){var e,t,n,r,i,s,u,c;return r=o.me(),n=r.isDismissed("CollectionsExplainer"),i=(null!=(u=this.organization)?u.isPremium():void 0)&&!this.collectionsEnabled,t=null!=(c=this.organization)?c.tagList.models.length:void 0,this.organization&&(s=a.getOrganizationUrl(this.organization),e=a.getOrganizationBillingUrl(this.organization)),this.$el.html(v({board:this.model,collectionsEnabled:this.collectionsEnabled,billingUrl:e,orgUrl:s,hasTags:t,onOldBC:i,hideExplainer:n})),this.renderFilteredCollections(),this},t}(d)},{}],341:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C=function(e,t){function n(){this.constructor=e}for(var r in t)x.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},x={}.hasOwnProperty;r=e("jquery"),g=e("underscore"),a=e(340),o=e(339),i=e(33),c=e(6),b=e(99),l=e(38),p=e("bluebird"),m=e(129),f=e(522),v=e(101),w=e(517)("board_collections"),k=e("xtend"),_=e(48),y=w.renderable(function(){return w.div(function(){return w.div(".spinner.loading")})}),h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.render=function(){return this.$el.html(y())},t}(f),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(w.render(function(e){return function(){return w.div(".count-explanation",function(){return w.p(function(){return w.format("ask-an-admin-to-add-this-board-to-a-team")})}),w.div(".board-admins",function(){return w.b(function(){return w.format("board-admins")}),w.ul(".admin-list",function(){return e.model.memberList.filter(function(t){return e.model.ownedByMember(t)}).forEach(function(e){return w.li(".admin-list-item",function(){return w.div(".admin-list-item-avatar",function(){var t;return t=e.get("avatarHash"),t?w.img({src:avatarDomain+"/"+t+"/30.png"}):w.span(".icon.icon-lg.icon-member")}),w.div(".admin-list-item-details",function(){return w.div(".admin-list-item-name",function(){return w.text(e.get("fullName"))}),w.div(".admin-list-item-username",function(){return w.text("@"+e.get("username"))})})})})})})}}(this)))},t}(f),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(w.render(function(e){return function(){return w.div(".count-explanation",function(){return w.p(function(){return w.format("only-team-members-can-enable-collections")})})}}(this)))},t}(f),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.viewTitleKey="collections",t.prototype.noPadding=!0,t.prototype.className="board-menu-content-frame board-collections-view",t.prototype.initialize=function(){return this.sidebarView=this.options.sidebarView,this.listenTo(this.model,"team-has-bc",function(e){
return function(){return e.redirecting=!1,e.addToTeam=!1,e.render()}}(this)),this.listenTo(this.model,"added-to-team",function(e){return function(){return e.redirecting=!0,e.render()}}(this)),this.listenTo(this.model,"cancel-add-to-team",function(e){return function(){return e.addToTeam=!1,e.render()}}(this)),this.listenTo(this.model,"cancel-upgrade",function(e){return function(){return e.initialViewState=null,e.render()}}(this)),this.listenTo(this.model,"add-to-team",function(e){return function(){return e.initialViewState=null,e.addToTeam=!0,e.render()}}(this))},t.prototype.render=function(){var e,t,n,r,o,s,a,u,c;return this.$el.empty(),e=this.model,t=e.hasOrganization(),c=e.getOrganization(),o=i.me(),n=e.isMember(o),r=null!=c?c.isMember(o):void 0,s=!n&&!r,a=e.isPublic()&&(null!=c?c.isPublic():void 0),u=t&&(n&&!r||s&&a),this.redirecting?this.renderSpinner():this.addToTeam?this.renderAddToTeam():u?this.renderOnlyForTeamMembers():this.renderTagSelect(),this},t.prototype.renderOnlyForTeamMembers=function(){return this.appendSubview(this.subview(d,this.model)),this},t.prototype.renderSpinner=function(){return this.appendSubview(this.subview(h,this.model)),this},t.prototype.renderAddToTeam=function(){return this.model.hasOrganization()?(this.appendSubview(this.subview(d,this.model)),this):this.model.owned()?(l.loadMyOrganizations(),this.appendSubview(this.subview(o,this.model,{menuType:"Collections"}))):(this.appendSubview(this.subview(s,this.model)),this)},t.prototype.renderTagSelect=function(){return this.appendSubview(this.subview(a,this.model,{modelCache:this.modelCache,sidebarView:this.sidebarView}))},t}(f)},{}],342:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(531),o=e(522),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewTitleKey="labels",t.prototype.el=function(){var e;return e=this.subview(i,this.model,{board:this.model,popOverMethod:"toggle",className:"board-menu-content-frame",selectLabel:function(t){return function(n){return t.model.editable()?e.editLabel(n):void 0}}(this)}),e.render().el},t}(o)},{}],343:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O=function(e,t){function n(){this.constructor=e}for(var r in t)P.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},P={}.hasOwnProperty;r=e("jquery"),i=e(215),o=e(33),s=e(554),u=e(346),c=e(534),l=e(6),d=e(524),p=e(199),h=e(97),m=e(20),S=e(827),f=e(203),g=e(573),v=e(692),b=e(38),y=e(542),w=e(601),_=e(129),k=e(522),C=e("underscore"),T=e(106),M=e(519),x=e(816),B=e(48),j=e(101),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return O(t,e),T(v,g,d,t),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){var e;e=this.model.getOrganization(),null!=e&&this.listenTo(e.memberList,"add remove reset",this.frameDebounce(this.renderOrgMembers)),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(this.renderOrgMembers)),null!=e&&this.listenTo(e,"change:prefs",this.frameDebounce(this.render)),this.savedSearch=""},t.prototype.events={"click .js-board-members .js-select-member":"showMemberMenu","click .js-search-results .js-select-member":"didClickAddOtherMember","paste .js-search-input":"searchPaste","click .js-org-members .js-select-member":"didClickAddOrgMember","click .js-org-members .js-add-all-org-members":"didClickAddAllOrgMembers","click .js-org-members .js-more-org-members":"didClickViewMoreOrgMembers","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember","click .js-show-invitation-link":"showInvitationLink","click .js-invitation-link":"clickInvitationLink","click .js-deactivate-link":"deactivateInvitationLink"},t.prototype.render=function(){var e,t;return e={},e.placeholder=j("add member placeholder"),e.canAddMembers=this.model.canInviteMembers(),t=this.model.getOrganization(),null!=t&&(e.orgName=t.get("displayName")),e.canInviteMembers=e.canAddMembers&&!(null!=t?t.externalMembersDisabled():void 0),e.disableAddingExternalMembers=this.model.isMember(o.me())&&(null!=t?t.externalMembersDisabled():void 0),e.isBCOrgAdmin=null!=t?t.isPremOrgAdmin(o.me()):void 0,e.orgSettingsURL=null!=t?l.getOrganizationAccountUrl(t):"",e.editable=this.model.editable(),this.$el.html(S(e)),e.canAddMembers?this.setTimeout(function(e){return function(){return e.renderOrgMembers(),e.input=e.$(".js-search-input"),e.input.click(function(e){return _.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10):this.setTimeout(function(e){return function(){return e.renderBoardMembers()}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},t.prototype.loadOrgData=function(){var e;e=this.model.getOrganization(),null!=e&&this.model.editable()&&b.loadOrganizationMembersMinimal(e.id).then(function(e){return function(){e.renderOrgMembers()}}(this)).done()},t.prototype.renderBoardMembers=function(){var e,t,n,r,i,o;for(t=this.$(".js-board-members").hide(),e=t.find(".js-list").empty(),this.model.memberList.models.length>7&&e.addClass("collapsed"),o=this.model.memberList.models,n=0,r=o.length;r>n;n++)i=o[n],this.appendSubview(this.subview(w,i),e);t.show()},t.prototype.renderOrgMembers=function(){var e,t,n,r,i,o,s,a,u;n=this.$(".js-org-members").hide(),t=n.find(".js-list").empty(),e=n.find(".js-add-all-org-members").empty(),r=n.find(".js-more-org-members").addClass("hide"),a=this.model.getOrganization(),null!=a&&(o=this.model.orgMembersAvailable(),o.length>0&&(u=!1,o.length>7&&(u=!0,r.removeClass("hide")),s=o.slice(0,7),C.each(s,function(e){return function(e){var n;return n=e.toJSON(),(null!=a?a.isPremOrgAdmin(e):void 0)&&(n.className="no-option"),t.append(M.fill("select_member",n,{},{member:M.member}))}}(this)),i={count:o.length.toString()},e.text(j("add all org members",i)),n.show()))},t.prototype.renderEmailInviteToSearchResults=function(e){var t,n,r,i,o,s;return i=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,r=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=C.compact(_.removeDomainFromEmailAddress(e.email).split(i)).join(" ").replace(r,""),e.fullName=_.toTitleCase(n),e.canAddAsObserver=null!=(o=this.model.getOrganization())?o.isFeatureEnabled("observers"):void 0,e.modelType="Board",t=null!=(s=this.model.getOrganization())?s.get("prefs").externalMembersDisabled:void 0,this.$(".js-no-results").toggleClass("hide",!t),t?void 0:this.$(".js-uninvited-search-results").append(x(e)).show()},t.prototype.showMemberMenu=function(e){var t,n;_.stop(e),t=r(e.target).closest(".js-select-member").attr("idMember"),n=this.modelCache.get("Member",t),y.pushView({view:new s({model:n,board:this.model,modelCache:this.modelCache})})},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(e){var t,n,r;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),r=this.input.val().toLowerCase().trim(),""===r)return void this.clearSearchResults();this.loadingEl.show(),t=this.model.getOrganization(),r.length>2?i({url:"/1/search/members/",type:"get",data:{idBoard:this.model.id,query:r,idOrganization:null!=t?t.id:void 0,onlyOrgMembers:null!=t?t.externalMembersDisabled():void 0},dataType:"json",success:function(e){return function(t){return e.renderSearchResults(r,t)}}(this)}):null!=t?(n=t.memberList.chain().filter(function(e){return C.any(_.getMemNameArray(e),function(e){return 0===e.indexOf(r)})}).map(function(e){return function(t){return C.extend(t.toJSON(),{active:!0,similarity:0,joined:e.model.hasActiveMembership(t)})}}(this)).value(),this.renderSearchResults(r,n)):this.renderSearchResults(r,[])}},t.prototype.keydownEvent=function(e){var t;t=h.getKey(e),t===m.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(_.stop(e),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(_.stop(e),this.$(".email-invite:first").click()):(t===m.ArrowUp||t===m.ArrowDown)&&(_.stop(e),_.navMenuList(this.$(".js-search-results .js-list"),"li",t))},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-search-results").hide(),this.$(".js-uninvited-search-results").empty().hide(),this.renderOrgMembers()},t.prototype.removeInvitation=function(e){var t;t=r(e.currentTarget).closest(".invitation").data("id"),p.prototype.delete({model:this.model,idInvitation:t,success:function(e){return function(){return B("Invitations","Delete Board Invite"),e.search}}(this)}),_.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===o.myId()||this.model.owned()},t.prototype.sendEmailInvite=function(e){var t,n,o,s;if(_.stop(e),n=this.$(".js-send-email-invite"),null==n.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),s=t.val().trim(),!_.validName(s))return _.setCaretAtEnd(t),void r(".js-name-error").show();o={fullName:s,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},this.$("#addAsObserver").is(":checked")&&(o.type="observer"),n.attr("disabled","disabled"),i({url:"/1/board/"+this.model.id+"/members",type:"put",dataType:"json",data:o,success:function(e){return function(t){var r;return r=new f(t,{modelCache:e.modelCache}),e.renderOrgMembers(),B("Invitations","Send Email Board Invite to New Member","Role: "+t.type),n.removeAttr("disabled"),y.hide()}}(this),error:function(e){return function(t,i){r(".manage-member-section.js-error").removeClass("hide").find(".error").html(t.responseText),e.$(".js-uninvited-search-results").empty().hide(),n.removeAttr("disabled"),e.input.focus().select(),B("Invitations","Error",t.responseText)}}(this)})}},t.prototype.addMember=function(e){var t;t=this.modelCache.get("Member",e),this.model.addMember(t),this.renderOrgMembers()},t.prototype.didClickAddOtherMember=function(e){var t,n,i;return _.stop(e),r(e.target).closest(".item.disabled").length>0?void 0:(t=r(null!=e?e.target:void 0).closest(".js-select-member").attr("idMember"),this.clearSearchResults(),i=this.model.getOrganization(),n=this.modelCache.get("Member",t),n&&(null!=i?i.isMember(n):void 0)?B("Invitations","Add Org Member to Board","Role: Member"):B("Invitations","Add Other Member to Board","Role: Member"),this.addMember(t))},t.prototype.didClickAddOrgMember=function(e){var t;return _.stop(e),B("Invitations","Add Org Member to Board (via List)","Role: Member"),t=r(null!=e?e.target:void 0).closest(".js-select-member").attr("idMember"),this.addMember(t)},t.prototype.didClickAddAllOrgMembers=function(e){var t,n;return _.stop(e),B("Invitations","Add All Org Members to Board"),n=this.model.orgMembersAvailable(),t=n.length.toString(),c.pushView("add all org members",{model:this.model,html:j("confirm.add all org members.text",{memberCount:t}),confirmBtnClass:"primary",fxConfirm:function(e){return function(t){var r,i,o,s;for(s=[],r=0,i=n.length;i>r;r++)o=n[r],s.push(e.model.addMember(o));return s}}(this)})},t.prototype.didClickViewMoreOrgMembers=function(e){_.stop(e),B("Invitations","View More Org Members"),y.pushView({view:new u({model:this.model,modelCache:this.modelCache})})},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t}(k)},{}],344:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(165),i=e(277),s=e(222),u=e(521),a=e(522),c=e(106),l=e(519),d=e(48),c(u,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="activity",t.prototype.initialize=function(){this.mode="all",this.fullHistory=this.options.fullHistory,null==this.fullHistory&&(this.fullHistory=!1),this.actionListView=this.collectionSubview(i,new r(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{compact:!this.fullHistory,key:"boardmenuactivity",context:this.model}}),this.makeDebouncedMethods("renderMoreActionsLink"),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.getActions(),{silent:!0}),e.renderMoreActionsLinkDebounced()}}(this)),this.loadMoreActions()},t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-show-all":"showAll","click .js-show-comments":"showComments","click .js-more-actions":"loadMoreActions"},t.prototype.render=function(){return this.$el.html(l.fill("board_menu_activity",this.model.toJSON())),this.actionListView.setElement(this.$(".js-list-activity")[0]),this.renderActions(),this.renderMode(),this},t.prototype.renderActions=function(){return this.actionListView.render(),this.renderMoreActionsLink()},t.prototype.renderMoreActionsLink=function(){return this.$(".js-more-actions").toggle(this.hasMoreActions()),this},t.prototype.renderMode=function(){return this.$(".js-control-option").removeClass("is-active"),"all"===this.mode?(this.$(".js-list-activity").removeClass("is-only-comments"),this.$(".js-show-all").addClass("is-active")):(this.$(".js-list-activity").addClass("is-only-comments"),this.$(".js-show-comments").addClass("is-active")),this},t.prototype.showAll=function(e){this.mode="all",this.renderMode(),d("Board Menu","Activity","Show All")},t.prototype.showComments=function(e){this.mode="comments",this.renderMode(),d("Board Menu","Activity","Show Comments Only")},t}(a)),t.exports=o},{}],345:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;r=e("jquery"),i=e(33),o=e(490),l=e(542),p=e(129),h=e(522),a=e(534),d=e(381),c=e(367),u=e(379),m=e(151),f=e("underscore"),v=e(519),b=e(48),g=e(101),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="more",t.prototype.initialize=function(e){return this.sidebarView=e.sidebarView,this.listenTo(this.model,{"change:subscribed":this.renderSubscribeState})},t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-open-collections":"openCollections","click .js-open-settings":"openSettings","click .js-open-stickers":"openStickers","click .js-open-labels":"openLabels","click .js-open-archive":"openArchivedItems","click .js-share":"shareBoard","click .js-email":"openEmailSettings","click .js-board-subscribe":"toggleSubscribe","click .js-copy-board":"copyBoard","click .js-close-board":"closeConfirm","click .js-leave-board":"leaveConfirm","click .js-short-url":"selectUrl","submit form":"cancel"},t.prototype.render=function(e){var t,n,r;return n=i.me(),t=this.model.toJSON(),t.canJoin=this.model.canJoin(),t.canInviteMembers=this.model.canInviteMembers(),t.confirmed=n.get("confirmed"),r=this.model.getOrganization(),t.canCloseBoard=this.model.owned()||(null!=r?r.isFeatureEnabled("superAdmins"):void 0)&&(null!=r?r.owned():void 0),t.editableByMember=this.model.editableByMember(n),t.canLeaveBoard=(this.model.isMemberObserver(n)||this.model.editableByMember(n))&&n.getMembershipData(this.model).canRemove,t.canCloseOrLeave=t.canLeaveBoard||t.canCloseBoard,t.pLevelClass=o.getPermLevelIconClassForBoard(this.model),t.pLevelAltText=o.getPermLevelAltTextForBoard(this.model),t.helperText=g(["board perms",this.model.getPermLevel(),"short summary"]),this.$el.html(v.fill("board_menu_more",t)),this.renderSubscribeState(),this},t.prototype.renderSubscribeState=function(){var e;e=this.model.toJSON(),this.$(".js-subscribed-state").html(v.fill("board_menu_subscribed_state",e))},t.prototype.openCollections=function(e){p.stop(e),this.sidebarView.pushView("collections"),b("Board Menu","Open Board Collections","Via Sidebar Menu")},t.prototype.openSettings=function(e){p.stop(e),this.sidebarView.pushView("settings"),b("Board Menu","Open Settings")},t.prototype.openLabels=function(e){p.stop(e),this.sidebarView.pushView("labels"),b("Board Menu","Open Labels")},t.prototype.openStickers=function(e){p.stop(e),this.sidebarView.pushView("stickers"),b("Board Menu","Open Stickers","Via More Menu")},t.prototype.openArchivedItems=function(e){p.stop(e),this.sidebarView.pushView("archive"),b("Board Menu","Open Archived Items")},t.prototype.shareBoard=function(e){p.stop(e),l.toggle({elem:this.$(e.target).closest(".js-share"),view:new d({model:this.model,modelCache:this.modelCache})}),b("Board Menu","Open Share, Print, and Export Menu")},t.prototype.openEmailSettings=function(e){p.stop(e),l.toggle({elem:this.$(e.target).closest(".js-email"),view:new c({model:this.model,modelCache:this.modelCache})}),b("Board Menu","Open Email Settings - Menu")},t.prototype.copyBoard=function(e){p.stop(e),r(e.target).hasClass("disabled")||(b("Board Menu","Open Copy Board"),l.toggle({elem:this.$(e.target).closest(".js-copy-board"),view:new u({model:this.model,copyBoard:!0,modelCache:this.modelCache})}))},t.prototype.toggleSubscribe=function(e){p.preventDefault(e),r(e.target).hasClass("disabled")||(this.model.subscribe(!this.model.get("subscribed")),b("Board Menu","Subscribe/Unsubscribe"))},t.prototype.closeConfirm=function(e){p.stop(e),b("Board Menu","Open Close Menu"),a.toggle("close board",{elem:r(e.target).closest("a"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.close(),b("Board","Close Board")}}(this)})},t.prototype.leaveConfirm=function(e){var t,n;p.stop(e),b("Board Menu","Open Leave Menu"),n=i.me(),t=n.removeMembershipConfirmationKey(this.model),a.toggle(t,{elem:r(e.target).closest("a"),confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.removeMember(n),b("Board","Leave Board")}}(this)})},t.prototype.selectUrl=function(e){return this.$(".js-short-url").focus().select()},t.prototype.cancel=function(e){return p.stop(e),!1},t}(h)},{}],346:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e("jquery"),o=e(97),s=e(20),h=e(827),a=e(573),u=e(542),c=e(129),l=e(522),d=e("underscore"),m=e(106),f=e(519),p=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),m(a,t),t.prototype.viewTitleKey="organization members",t.prototype.initialize=function(){var e;e=this.model.getOrganization(),null!=e&&this.listenTo(e.memberList,"add remove reset",this.frameDebounce(this.render))},t.prototype.events={"click .js-board-members .js-select-member":"didClickAddOrgMember",keyup:"keyupEvent","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"},t.prototype.renderOrgMembers=function(e){var t,n,r,i,o,s;for(o=[],o=e?this.modelCache.get("Member",e):this.model.orgMembersAvailable(),s=this.$(".js-board-members .js-list").empty().show(),n=0,r=o.length;r>n;n++)i=o[n],t=i.toJSON(),s.append(f.fill("select_member",t,{},{member:f.member}));this.$(".js-board-members .js-num-org-mem").empty().text(o.length)},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0}),e.orgName=null!=(t=this.model.getOrganization())?t.get("displayName"):void 0,e.canInvite=!0,e.editable=this.model.editable(),this.$el.html(h(e)),this.renderOrgMembers(),this.$(".js-board-members").removeClass("hide"),this},t.prototype.keyupEvent=function(e){var t,n,i,a,l;n=o.getKey(e),l=r(".js-search-input").val().trim(),n===s.Enter?(c.stop(e),this.$(".js-org-members .js-list .selected").length>0&&(t=this.$(".js-org-members .js-list .selected:first .js-select-member").attr("idMember"),i=this.modelCache.get("Member",t),this.model.addMember(i),this.$(".js-search-input").focus().select())):n===s.ArrowUp||n===s.ArrowDown?(c.stop(e),c.navMenuList(r(null!=(a=u.view)?a.el:void 0).find(".js-org-members .js-list"),".item",n)):l.length>0?(this.filterAndFillMembers(l),r(".js-org-members .js-list").removeClass("collapsed"),r(".js-add-all-org-members").addClass("hide")):(this.renderOrgMembers(),r(".js-org-members .js-list").addClass("collapsed"),r(".js-add-all-org-members").removeClass("hide"))},t.prototype.filterAndFillMembers=function(e){var t,n,r;n=d.pluck(this.model.orgMembersAvailable(),"id"),r=c.filterMembers(this.modelCache,e,n),r=r.slice(0,7),r.length>0?(this.renderOrgMembers(r),t=this.$(".js-org-members .js-list .item:first"),c.selectMenuItem(this.$(".js-org-members .js-list"),".item",t)):this.$(".js-org-members .js-list").html('<li><p class="empty"></p></li>').find("p").text(p("no matched memebers"))},t.prototype.didClickAddOrgMember=function(e){var t,n;return c.stop(e),t=r(e.target).closest(".js-select-member").attr("idMember"),n=this.modelCache.get("Member",t),this.model.addMember(n),this.render()},t}(l)},{}],347:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),i=e(490),s=e(6),a=e(542),u=e(129),c=e(522),p=e(519),d=e(101),l=e(737),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change visibility",t.prototype.tagName="ul",t.prototype.events={"click .js-select":"selectVis"},t.prototype.className="pop-over-list",t.prototype.render=function(){var e,t,n;return n=this.options.organization,n.canSetVisibility("private")||n.canSetVisibility("org")||n.canSetVisibility("public")?(e=this.model.getPref("permissionLevel"),this.$el.html(l({current:e,canChange:!0,mustChange:!n.canSetVisibility(e),hasSuperAdmins:n.isFeatureEnabled("superAdmins"),hasOrg:!0,orgName:n.get("displayName"),privateRestricted:!n.canSetVisibility("private"),orgRestricted:!n.canSetVisibility("org"),publicRestricted:!n.canSetVisibility("public")}))):(t={isOrgAdmin:n.owned(),orgSettingsUrl:s.getOrganizationAccountUrl(n),organization:n.toJSON()},this.$el.html(p.fill("cant_add_board_to_org",t))),this},t.prototype.selectVis=function(e){var t,n,i;return u.stop(e),t=r(e.target).closest(".js-select"),t.hasClass("disabled")||t.closest(".js-disabled").length?void 0:(i=t.attr("name"),this.options.idOrganizationSource&&null!=(n=this.modelCache.get("Organization",this.options.idOrganizationSource))&&n.boardList.remove(this.model),this.model.update({idOrganization:this.options.organization.id,"prefs/permissionLevel":i}),this.options.organization.boardList.add(this.model),a.hide())},t}(c)},{}],348:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O=function(e,t){function n(){this.constructor=e}for(var r in t)P.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},P={}.hasOwnProperty;r=e("jquery"),w=e("underscore"),i=e(33),s=e(349),a=e(534),u=e(6),k=e(238),C=e(101),c=e(24),x=e(259),p=e(505),h=e(504),l=e(368),d=e(674),m=e(509),j=e(510),f=e(542),g=e("bluebird"),v=e("react"),S=e(517)("plugin_item"),M=e(53),b=e(129),y=e(522),B=e("xtend"),T=S.renderable(function(e){var t,n,r,i,o,s,a,u,c,l,d;return s=e.loading,a=e.name,o=e.iconUrl,r=e.desc,u=e.source,t=e.canEnable,l=e.supportsSettings,c=e.supportsAuth,i=e.hasPersonalSettings,d=e.upgradeUrl,n=e.canReadManifest,S.div(".power-up-item-icon",function(){return o&&S.img(".power-up-item-icon-image.plugin-item-icon",{src:o,alt:a}),S.icon("check",{class:"power-up-item-enabled-icon"}),S.span(".power-up-item-new-icon",function(){return S.format("new")})}),S.div(".power-up-item-details",function(){return S.h4(".power-up-item-details-header",{class:S.classify({"js-show-details":n,quiet:!n})},function(){return s?S.format("loading"):a?S.text(a):S.format("unknown plugin"),n?S.icon("information",{class:"power-up-item-details-info-icon"}):void 0}),n?void 0:S.div(".quiet",function(){return S.format("unable-to-load-power-up")})}),S.div(".power-up-item-actions",function(){return t&&n?((i||l||c)&&S.a(".power-up-item-actions-button.mod-settings.button-link.js-show-settings",{href:"#"},function(){return S.icon("gear")}),d?S.a(".power-up-item-actions-button.mod-upgrade.button-link",{href:d},function(){return S.format("upgrade")}):S.a(".power-up-item-actions-button.mod-upgrade.button-link.js-add-to-team",{href:"#"},function(){return S.format("upgrade")}),S.a(".power-up-item-actions-button.mod-enable.button-link.js-enable",{href:"#"},function(){return S.format("enable")}),S.a(".power-up-item-actions-button.mod-disable.button-link.js-disable",{href:"#"},function(){return S.format("disable")}),S.a(".power-up-item-actions-button.mod-fake-enable.button-link.js-fake-enable",{href:"#"},function(){return S.format("enable")})):void 0})}),_=function(e,t){return e.catch(p.Error.UnableToLoadManifest,function(){return t})},t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return O(t,e),t.prototype.initialize=function(e){this.plugin=e.plugin,this.io=h.get(this.plugin),this.initialData={loading:!0,canEnable:this.model.editable(),upgradeUrl:this.model.hasOrganization()?u.getBoardPowerUpsUpgradeUrl(this.model):void 0},this.listenTo(this.model,"change:powerUps",this.frameDebounce(this.renderEnabledState)),this.listenTo(this.model.boardPluginList,"add remove reset",this.frameDebounce(this.renderEnabledState)),this.listenTo(i.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.renderEnabledState))},t.prototype.renderOnce=function(){return this.$el.html(T(this.initialData)),this.renderPluginData(),this.renderEnabledState(),this},t.prototype.renderPluginData=function(){return g.props({loading:!1,name:this.io.getName(),desc:_(this.io.getDescription(),this.io.manifestUrl),iconUrl:_(this.io.getIconUrl(),null),hasPersonalSettings:this.hasPersonalSettings(),supportsAuth:this.io.supports("show-authorization"),supportsSettings:this.io.supports("show-settings"),canReadManifest:this.io.canReadManifest()}).then(function(e){return function(t){return e.$el.html(T(B(e.initialData,t))),e.subscribe(e.model.boardPluginList.snoop(),e.renderEnabledState)}}(this)).done(),this},t.prototype.getEnabledState=function(){return this.model.isPluginEnabled(this.plugin.id)},t.prototype.renderEnabledState=function(){var e,t,n,r;return n=this.getEnabledState(),e=this.model.canEnableAdditionalPowerUps(),t=i.me().isDismissed("PowerUpsLimitFullAd"),r=c.hasOwnProperty(this.plugin.id)&&c[this.plugin.id]>Date.now()-12096e5,this.$el.toggleClass("is-enabled",n),this.$el.toggleClass("is-new",r),this.$el.toggleClass("needs-upgrade",!n&&!e&&t),this.$el.toggleClass("fake-enable",!n&&!e&&!t),this},t.prototype.hasPersonalSettings=function(){var e;return e=w.extend(i.me().getPluginData(this.io.id),this.model.getPluginData(this.io.id)),w.any(e,function(e){var t;return t=e.private,null!=t})},t.prototype.enable=function(){this.model.enablePlugin(this.plugin.id),M("Power-Up listing","enables","Power-Up","","","enable button",this.plugin.id)},t.prototype.disable=function(){this.model.disablePlugin(this.plugin.id),M("Power-Up listing","disables","Power-Up","","","disable button",this.plugin.id)},t.prototype.showDetails=function(e){var t,n;t=this.model,n=h.get(this.plugin),f.toggle({elem:e,getViewTitle:k(n,"getName"),reactElement:v.createElement(d,{io:n,model:t,key:this.plugin.id})}),M("Power-Up listing","opens","Power-Up","","","show-details",this.plugin.id)},t.prototype.showSettings=function(e){var t;return t=h.get(this.plugin),f.toggledBy(e)?void f.hide():(M("Power-Up listing","opens","Power-Up","","","show-settings",this.plugin.id),void g.props({supportsAuth:this.io.supports("show-authorization"),supportsSettings:this.io.supports("show-settings"),hasPersonalSettings:this.hasPersonalSettings()}).then(function(e){return function(t){return t.supportsAuth?m.one({timeout:1e3,plugin:e.plugin,command:"authorization-status",board:e.model}).then(function(e){return B(t,{authStatus:e})}):g.resolve(t)}}(this)).then(function(n){return function(r){var i;return i=function(t){return w.bind(t,n,e)},f.toggle({elem:e,getViewTitle:function(){return t.getName().then(function(e){return C(["view title","powerup settings"],{name:e})})},reactElement:v.createElement(l,B(r,{plugin:n.plugin,key:n.io.id,authorize:i(n.showAuthorization),removeData:i(n.clearData),showSettings:i(n.showPluginSettings)}))})}}(this)))},t.prototype.showAuthorization=function(e){M("Power-Up listing","opens","Power-Up","","","show-authorization",this.plugin.id),m.one({plugin:this.plugin,command:"show-authorization",board:this.model,el:e}).done()},t.prototype.showPluginSettings=function(e){M("Power-Up listing","opens","Power-Up","","","edit-settings",this.plugin.id),m.one({plugin:this.plugin,command:"show-settings",board:this.model,el:e}).done()},t.prototype.clearData=function(e){a.pushView("clear plugin data",{elem:e,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.clearPluginData(e.io.id),i.me().clearPluginData(e.io.id),M("Power-Up listing","clicks","Power-Up","","","remove-data",e.plugin.id),e.renderPluginData(),e.io.supports("remove-data").then(function(t){return t?m.one({plugin:e.plugin,command:"remove-data"}):void 0}).done()}}(this)})},t}(s)},{}],349:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty,y=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),i=e(33),s=e(534),a=e(6),d=e(522),u=e(542),l=e(129),c=e(369),h=e(510),m=e(519),f=e(48),g=e(53),p=e("underscore"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.initialize=function(e){this.powerUp=e.powerUp,this.listenTo(this.model,"change:powerUps",this.frameDebounce(this.renderEnabledState)),this.listenTo(this.model.boardPluginList,"add remove reset",this.frameDebounce(this.renderEnabledState)),this.listenTo(i.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.renderEnabledState)),this.subscribe(h(this.model),function(e){return function(){return e.renderEnabledState()}}(this))},t.prototype.className="power-up-item",t.prototype.events={"click .js-enable":function(e){return l.stop(e),u.hide(),this.enable()},"click .js-disable":function(e){return l.stop(e),u.hide(),this.disable(e.currentTarget)},"click .js-show-details":function(e){return l.stop(e),this.showDetails(e.currentTarget)},"click .js-show-settings":function(e){return l.stop(e),this.showSettings(e.currentTarget)}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e;return e=p.clone(this.powerUp),e.canEnable=this.model.editable(),null==this.options.disableOnly&&this.model.hasOrganization()&&(e.upgradeUrl=a.getBoardPowerUpsUpgradeUrl(this.model)),this.$el.html(m.fill("power_up_item",e)),this.renderEnabledState(),this},t.prototype.getEnabledState=function(){return this.model.isPowerUpEnabled(this.powerUp.name)},t.prototype.renderEnabledState=function(){var e,t,n,r;return r=this.getEnabledState(),t=this.options.disableOnly,e=this.model.canEnableAdditionalPowerUps(),n=i.me().isDismissed("PowerUpsLimitFullAd"),this.$el.toggleClass("is-enabled",r),this.$el.toggleClass("needs-upgrade",!r&&!e&&n),this.$el.toggleClass("fake-enable",!r&&!e&&!n),
this},t.prototype.enable=function(){this.model.enablePlugin(this.powerUp.idPlugin),f("Power-Ups",this.powerUp.name,"Enable"),g("Power-Up listing","enables","Power-Up","","","enable button",this.powerUp.idPlugin)},t.prototype.isGrandfathered=function(){var e;return e=this.powerUp.name,y.call(this.model.get("powerUps"),e)>=0},t.prototype.disable=function(e){var t,n;this.isGrandfathered()?(n=function(e){return function(){return e.model.pull("powerUps",e.powerUp.name),f("Power-Ups",e.powerUp.name,"Disable"),g("Power-Up listing","disables","Power-Up","","","disable button",e.powerUp.idPlugin)}}(this),(null!=(t=this.model.getOrganization())?t.isFeatureEnabled("plugins"):void 0)?n():s.toggle("disable power up",{elem:e,model:this.model,confirmBtnClass:"negate",fxConfirm:n})):(this.model.disablePlugin(this.powerUp.idPlugin),f("Power-Ups",this.powerUp.name,"Disable"),g("Power-Up listing","disables","Power-Up","","","disable button",this.powerUp.idPlugin))},t.prototype.showDetails=function(e){return u.toggle({elem:e,view:new c({powerUp:this.powerUp,isGrandfathered:this.isGrandfathered()}),autoPosition:!0}),f("Power-Ups",this.powerUp.name,"Show Details"),g("Power-Up listing","opens","Power-Up","","","show-details",this.powerUp.idPlugin)},t.prototype.showSettings=function(e){return u.toggle({elem:e,view:this.powerUp.settingsView(this.model,this.isGrandfathered()),autoPosition:!0}),f("Power-Ups",this.powerUp.name,"Show Details"),g("Power-Up listing","opens","Power-Up","","","edit-settings",this.powerUp.idPlugin)},t}(d)},{}],350:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N,V,$,R,z,U,F=function(e,t){function n(){this.constructor=e}for(var r in t)q.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},q={}.hasOwnProperty,H=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),L=e("underscore"),i=e(33),s=e(339),a=e(348),u=e(349),d=e(686),p=e(687),o=e(338),h=e(6),D=e(99),m=e(21),f=e(22),g=e(38),v=e(505),b=e(504),N=e(922),B=e("bluebird"),O=e(129),P=e(522),E=e(688),A=e(101),R=e(517)("board_power_ups"),U=e("xtend"),V=e(85),z=e(48),I=[{name:"voting",iconSrc:"https://a.trellocdn.com/images/powerups/7a64373ca0f3e1858b4a9a3928d561d3/voting-icon.svg",aboutTemplate:"power_ups_about_voting",settingsView:function(e){return new E({model:e})},screenshots:["https://a.trellocdn.com/images/powerups/voting/screenshots/de063c1421497f609fef2e5b37797cff/2015-3-23-screenshot1.png"],idPlugin:f.voting},{name:"cardAging",iconSrc:"https://a.trellocdn.com/images/powerups/d33d5c107f425c21f7f3a19f602871ec/card-aging-icon.svg",aboutTemplate:"power_ups_about_card_aging",settingsView:function(e){return new p({model:e})},screenshots:["https://a.trellocdn.com/images/powerups/card-aging/screenshots/27972dcff7cab11886b671d6fcfc11ae/2015-3-23-screenshot1.png"],idPlugin:f.cardAging},{name:"calendar",iconSrc:"https://a.trellocdn.com/images/powerups/ff818ba7df38d8af7f68d26ae408f5eb/calendar-icon.svg",aboutTemplate:"power_ups_about_calendar",settingsView:function(e){return new d({model:e})},screenshots:["https://a.trellocdn.com/images/powerups/calendar/screenshots/e204a5ed5a8dc113760b185b4c7276c5/2015-3-23-screenshot1.png"],idPlugin:f.calendar}],w=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.events={"click .js-close-explainer":"closeExplainer","click .power-ups-explainer-learn-more":"trackLearnMore"},t.prototype.className="power-ups-explainer",t.prototype.render=function(){var e;return e=R.render(function(){return R.p(".power-ups-explainer-text",A("power-up explainer")),R.a(".power-ups-explainer-learn-more",{href:"/power-ups",target:"_blank"},function(){return R.format("learn-more")}),R.span(".power-ups-explainer-close.js-close-explainer",function(){return R.icon("close")})}),this.$el.html(e),this},t.prototype.closeExplainer=function(e){this.remove(),i.me().dismiss("PowerUpsPaneExplainer"),z("Board Menu","Dismiss Power-Ups Explainer")},t.prototype.trackLearnMore=function(){return z("Board Menu","Explainer Ad","Learn More Click")},t}(P),$=R.renderable(function(){return R.div(function(){return R.div(".spinner.loading")})}),S=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.render=function(){return this.$el.html($()),this},t}(P),T=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(R.render(function(e){return function(){return R.div(".power-ups-count-explanation",function(){return R.p(function(){return R.format("board-has-been-added-to-the-team",{boardName:e.model.get("name"),teamName:e.model.getOrganization().get("displayName")})}),R.p(function(){return R.format("team-has-business-class-so-this-board-has-unlimited-access-to-power-ups",{teamName:e.model.getOrganization().get("displayName")})})})}}(this)))},t}(P),x=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(R.render(function(e){return function(){return R.div(".power-ups-count-explanation",function(){return R.p(function(){return R.format("board-has-been-added-to-the-team",{boardName:e.model.get("name"),teamName:e.model.getOrganization().get("displayName")})}),R.p(function(){return R.format("upgrade-to-business-class-for-unlimited-power-ups-and-moreupgrade-to-business-class")})})}}(this)))},t}(P),_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(R.render(function(e){return function(){return R.div(".power-ups-count-explanation",function(){return R.p(function(){return R.format("only-team-members-can-enable-power-ups")})})}}(this)))},t}(P),y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(R.render(function(e){return function(){return R.div(".power-ups-count-explanation",function(){return R.p(function(){return R.format("ask-an-admin-to-add-this-board-to-a-team")})}),R.div(".power-ups-board-admins",function(){return R.b(function(){return R.format("board-admins")}),R.ul(".power-ups-admin-list",function(){return e.model.memberList.filter(function(t){return e.model.ownedByMember(t)}).forEach(function(e){return R.li(".power-ups-admin-list-item",function(){return R.div(".power-ups-admin-list-item-avatar",function(){var t;return t=e.get("avatarHash"),t?R.img({src:avatarDomain+"/"+t+"/30.png"}):R.span(".icon.icon-lg.icon-member")}),R.div(".power-ups-admin-list-item-details",function(){return R.div(".power-ups-admin-list-item-name",function(){return R.text(e.get("fullName"))}),R.div(".power-ups-admin-list-item-username",function(){return R.text("@"+e.get("username"))})})})})})})}}(this)))},t}(P),C=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.className="power-ups-explainer power-ups-limit-reached",t.prototype.events={"click .js-upgrade-team":function(e){return z("Power-Ups Menu","Banner Ad","Get More Power-Ups Button")},"click .power-ups-limit-reached-learn-more":function(){return z("Power-Ups Menu","Banner Ad","Learn More Link")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=h.getBoardPowerUpsUpgradeUrl(this.model),e=i.me(),this.$el.html(R.render(function(e){return function(){return R.p(".power-ups-limit-reached-message",function(){return R.format("it-looks-like-youve-reached-your-power-ups-limit-for-this-board")}),R.p(".power-ups-limit-reached-button",function(){return e.model.hasOrganization()?R.a(".button.primary.js-upgrade-team",{href:t},function(){return R.format("get-more-power-ups")}):R.a(".button.primary.js-add-to-team",{href:"#"},function(){return R.format("get-more-power-ups")})}),R.a(".power-ups-limit-reached-learn-more",{href:"/business-class",target:"_blank"},function(){return R.format("learn-more")})}}(this)))},t}(P),k=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.className="power-ups-explainer power-ups-limit-reached-full",t.prototype.events={"click .js-no-thanks":function(e){return i.me().dismiss("PowerUpsLimitFullAd")},"click .js-upgrade-team":function(e){return z("Power-Ups Menu","Full-Menu Ad","Get More Power-Ups Button")},"click .js-add-to-team":function(e){return z("Power-Ups Menu","Full-Menu Ad","Get More Power-Ups Button")},'click a[href="/business-class"]':function(){return z("Power-Ups Menu","Full-Menu Ad","Business Class Link")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t,n;return n=h.getBoardPowerUpsUpgradeUrl(this.model),e=i.me(),t=e.isInAnyBCOrganization(),this.$el.html(R.render(function(r){return function(){return R.div(".power-ups-limit-reached-full-content",function(){return R.p(".power-ups-limit-reached-message",function(){return R.format("it-looks-like-youve-reached-your-power-ups-limit-for-this-board")}),R.p(".power-ups-limit-reached-sub",function(){return e.isFeatureEnabled("threePlugins")?(R.format("as-a-trello-gold-member-you-can-turn-on-three-power-ups-per-board"),R.text(" "),R.format("business-class-teams-get-unlimited-power-ups")):t?R.format("with-the-legacy-version-of-business-class-you-can-turn-on-one-power-up-per-board"):r.model.hasOrganization()?R.format("business-class-teams-get-unlimited-power-ups"):(R.format("as-a-free-member-you-can-turn-on-one-power-up-per-board"),R.text(" "),R.format("business-class-teams-get-unlimited-power-ups"))}),R.p(".power-ups-limit-reached-sub",{style:"margin: 8px 40px"},function(){return t?R.format("to-unlock-more-upgrade-your-team-to-the-latest-version-of-business-class-today"):R.format("to-unlock-more-upgrade-to-business-class-today")}),R.p(".power-ups-limit-reached-button",function(){return r.model.hasOrganization()?R.a(".button.primary.js-upgrade-team",{href:n},function(){return R.format("lets-do-this")}):R.a(".button.primary.js-add-to-team",{href:"#"},function(){return R.format("lets-do-this")})}),R.div(".power-ups-limit-reached-no-thanks.js-no-thanks",function(){return R.format("no-thanks")})})}}(this)))},t}(P),j=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.events={"click .power-ups-request-let-us-know":function(e){return z("Board Menu","Request a Power-Up","Let Us Know Click")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e;return e="https://trello.typeform.com/to/DLUonY?source=app&member="+i.myId(),this.$el.html(R.render(function(t){return function(){return R.div(".power-ups-request",function(){return R.p(".quiet",function(){return R.format("dont-see-what-youre-looking-for-let-us-know",{url:e})})})}}(this)))},t}(P),c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.initialize=function(){},t.prototype.className="power-up-items",t.prototype.render=function(){return this.appendSubview(this.subview(S,this.model)),B.all([L.map(I,function(e){return function(t){var n,r;return r=t.name,n=U(t,{displayName:A(["power ups",r,"name"]),description:A(["power ups",r,"description"])}),{displayName:n.displayName,view:e.subview(u,e.model,{powerUp:n},r)}}}(this)),B.try(function(e){return function(){var t;return t=L.pluck(I,"idPlugin"),g.loadBoardAvailablePlugins(e.model.id).filter(function(e){var n;return n=e.id,H.call(t,n)<0}).map(function(t){return b.get(t).getName().catch(v.Error.UnableToLoadManifest,function(){return t.get("url")}).then(function(n){return{displayName:n,view:e.subview(a,e.model,{plugin:t},t.id)}})})}}(this))]).spread(function(e){return function(t,n){var r,i;return i=L.chain([t,n]).flatten().sortBy(function(e){return e.displayName.toLowerCase()}).pluck("view").value(),e.ensureSubviews(i),(null!=(r=V("powerUpRequestCTA"))?r.get("showCTA"):void 0)?e.appendSubview(e.subview(j,e.model)):void 0}}(this)).done(),this},t}(P),M=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.className="power-ups-upgrade",t.prototype.initialize=function(){},t.prototype.events={"click .js-go-back":function(e){return z("Board Menu","Open Power-Ups","Dismiss Upsell"),this.model.trigger("cancel-upgrade")},"click .js-upgrade":function(e){return this.model.trigger("add-to-team")}},t.prototype.render=function(){var e,t,n,r,o;return t=i.me(),n=t.isInAnyBCOrganization(),r=this.model.hasOrganization(),o=h.getBoardPowerUpsUpgradeUrl(this.model),e=t.isFeatureEnabled("threePlugins"),this.$el.html(N({partOfTeam:r,upgradeUrl:o,hasGold:e,onOldBC:n})),this},t}(P),t.exports=l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.viewTitleKey="power ups",t.prototype.noPadding=!0,t.prototype.className="board-menu-content-frame power-ups-list",t.prototype.initialize=function(){return this.listenTo(this.model,"change:idOrganization change:powerUps",this.frameDebounce(this.render)),this.listenTo(this.model,"added-to-team",function(e){return function(){return e.redirecting=!0,e.render()}}(this)),this.listenTo(this.model,"cancel-add-to-team",function(e){return function(){return e.addToTeam=!1,e.render()}}(this)),this.listenTo(this.model,"cancel-upgrade",function(e){return function(){return e.initialViewState=null,e.render()}}(this)),this.listenTo(this.model,"add-to-team",function(e){return function(){return e.initialViewState=null,e.addToTeam=!0,e.render()}}(this)),this.listenTo(this.model.boardPluginList,"add remove reset",this.frameDebounce(this.render)),this.listenTo(i.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.render)),this.initialViewState=this.options.viewState,this.explainLimits=!1,this.redirecting=!1,this.upgradeToBC=!1,this.useFullAd=!1},t.prototype.events=function(){return{"click .js-fake-enable":function(e){return O.stop(e),this.useFullAd=!0,this.render()},"click .js-add-to-team":function(e){return O.stop(e),this.addToTeam=!0,this.render()}}},t.prototype.render=function(){var e;return e=this.model.getOrganization(),this.$el.empty().removeClass("full-page-ad"),"upsell"===this.initialViewState?(this.renderUpgradeView(),this):(this.redirecting?this.renderSpinner():this.addToTeam?this.renderAddToTeam():this.renderPowerUpsList(),this)},t.prototype.renderSpinner=function(){return this.appendSubview(this.subview(S,this.model)),this},t.prototype.renderUpgradeView=function(){return this.appendSubview(this.subview(M,this.model))},t.prototype.renderAddToTeam=function(){return this.model.hasOrganization()?(this.appendSubview(this.subview(_,this.model)),this):(this.explainLimits=!0,this.model.owned()?(g.loadMyOrganizations(),this.appendSubview(this.subview(s,this.model,{menuType:"Power-Ups"}))):(this.appendSubview(this.subview(y,this.model)),this))},t.prototype.renderPowerUpsList=function(){var e;if(this.model.canEnableAdditionalPowerUps())i.me().isDismissed("PowerUpsPaneExplainer")||this.appendSubview(this.subview(w,this.model)),this.explainLimits&&(e=this.model.getOrganization(),(null!=e?e.isFeatureEnabled("plugins"):void 0)?this.appendSubview(this.subview(T,this.model)):this.appendSubview(this.subview(x,this.model)));else if(i.me().isDismissed("PowerUpsLimitFullAd"))this.appendSubview(this.subview(C,this.model));else{if(this.useFullAd)return this.appendSubview(this.subview(k,this.model)),this.$el.addClass("full-page-ad"),this;i.me().isDismissed("PowerUpsPaneExplainer")||this.appendSubview(this.subview(w,this.model))}return this.appendSubview(this.subview(c,this.model))},t}(P)},{}],351:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(347),o=e(352),s=e(542),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(e){return this.disableNone=null!=e?e.disableNone:void 0,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.disableNone&&this.$(".js-submit").addClass("disabled").attr("disabled","disabled"),this},t.prototype.showOrgBoardVisPerms=function(e,t){return s.pushView({view:new r({model:this.model,organization:e,idOrganizationSource:t,modelCache:this.modelCache})})},t.prototype.submit=function(e){return t.__super__.submit.apply(this,arguments)},t.prototype.canAddToOrg=function(e){return!e.isFeatureEnabled("restrictVis")||e.canSetVisibility("org")},t.prototype.updateModel=function(e){return this.model.update({idOrganization:e,"prefs/permissionLevel":"org"})},t.prototype.orgSelected=function(){return t.__super__.orgSelected.apply(this,arguments),this.disableNone?""===this.$(".js-org").val()?this.$(".js-submit").addClass("disabled").attr("disabled","disabled"):this.$(".js-submit").removeClass("disabled").removeAttr("disabled"):void 0},t}(o)},{}],352:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(33),i=e(347),s=e(534),a=e(38),u=e(542),c=e("bluebird"),l=e(129),d=e(522),h=e(519),m=e(48),p=e("underscore"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="change organization",t.prototype.events={"click .js-submit":"submit","change .js-org":"orgSelected"},t.prototype.render=function(){var e,t,n,i,o,s;if(e=this.model.toJSON({org:!0}),o=this.model.owned()?r.me().organizationList.models:[],e.orgs=function(){var e,t,n;for(n=[],e=0,t=o.length;t>e;e++)i=o[e],n.push(i.toJSON());return n}(),e.hasOrgs=0!==e.orgs.length,e.idOrganization)for(s=e.orgs,t=0,n=s.length;n>t;t++)i=s[t],i.id===e.idOrganization&&(i.select=!0);return e.isPrivate=this.model.isPrivate(),e.allowsSelfJoin=this.model.allowsSelfJoin(),this.$el.html(h.fill("popover_change_board_org",e)),this.updateOrgOptions(),this},t.prototype.showOrgBoardVisPerms=function(e,t){return u.pushView({view:new i({model:this.model,organization:e,idOrganizationSource:t,modelCache:this.modelCache})})},t.prototype.changeOrg=function(e,t){var n,r,i;return n=e!==t,n&&t&&null!=(r=this.modelCache.get("Organization",t))&&r.boardList.remove(this.model),i={},n&&(i.idOrganization=e),e&&(this.$(".js-make-org-visible").is(":checked")&&(i["prefs/permissionLevel"]="org"),this.$(".js-make-org-joinable").is(":checked")&&(i["prefs/selfJoin"]=!0)),this.model.update(i),n&&e&&this.modelCache.get("Organization",e).boardList.add(this.model),u.hide()},t.prototype.canAddToOrg=function(e){return e.canAddBoard(this.model)},t.prototype.submit=function(e){var t,n,r;return this.$(".js-submit").prop("disabled",!0).toggleClass("disabled",!0),l.stop(e),m("Board","Change Org"),n=this.$(".js-org").val(),t=this.model.get("idOrganization"),r=this.modelCache.get("Organization",n),c.try(function(t){return function(){var i;return(i=r&&r.externalMembersDisabled())?a.loadOrganizationMembersData(n).then(function(){var n,i,o;return o=t.model.memberList.chain().filter(function(e){return!r.isMember(e)}).map(function(e){return e.get("fullName")}).value(),i=o.length,0!==i?(n=1===i?"external member not allowed":"external members not allowed",c.fromNode(function(a){return s.toggle(n,{elem:e.currentTarget,model:t.model,confirmBtnClass:"negate",templateData:{count:String(i),members:o.length>20?p.first(o,20).join(", ")+"":o.join(", "),team:r.get("displayName")},fxConfirm:function(){return a()},fxCancel:function(){return a(new Error("cancelled"))}})})):void 0}):void 0}}(this)).then(function(e){return function(){return(null!=r?r.isFeatureEnabled("restrictVis"):void 0)?a.loadOrganizationMembersData(n).then(function(){e.canAddToOrg(r)?e.changeOrg(n,t):e.showOrgBoardVisPerms(r,t)}).done():e.changeOrg(n,t)}}(this)).error(function(){}).done()},t.prototype.updateOrgOptions=function(){var e;e=""!==this.$(".js-org").val(),this.$(".js-make-org-visible,.js-make-org-joinable").closest(".js-check-div").toggleClass("hide",!e)},t.prototype.orgSelected=function(e){return this.updateOrgOptions()},t}(d)},{}],353:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),i=e(352),s=e(357),a=e(363),u=e(542),c=e(129),l=e(522),p=e(519),h=e(48),d=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="settings",t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-change-org:not(.disabled)":"changeOrg","click .js-toggle-covers:not(.disabled)":"toggleCovers","click .js-change-comments:not(.disabled)":"changeCommentingPerms","click .js-change-add-members:not(.disabled)":"changeAddMemberPerms","click .js-toggle-org-mem-join:not(.disabled)":"toggleSelfJoin"},t.prototype.initialize=function(){this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0,url:!0,labels:!0}),e.cardCovers=e.prefs.cardCovers,t=this.model.getOrganization(),e.orgDisplayName=null!=t?t.get("displayName"):void 0,e.hasOrg=null!=(null!=t?t.id:void 0),e.commentsDisplay=d(["board pref perms",this.model.getCommentPerm()]),e.invitationsDisplay=d(["board pref perms",this.model.getInvitePerm()]),e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),(null!=t?t.owned():void 0)&&!this.model.owned()&&(e.setOrgNull=!0),this.$el.html(p.fill("board_menu_settings",e,{editable:this.model.editable(),owned:this.model.owned()})),this},t.prototype.changeOrg=function(e){var t,n;c.stop(e),this.model.owned()?(u.toggle({elem:r(e.target).closest("a"),view:i,options:{model:this.model,modelCache:this.modelCache}}),h("Board Menu","Settings","Change Org")):(t=this.model.get("idOrganization"),null!=(n=this.modelCache.get("Organization",t))&&n.boardList.remove(this.model),this.model.update("idOrganization",""),u.hide(),h("Board Menu","Settings","Remove Org"))},t.prototype.toggleCovers=function(e,t){c.stop(e),this.model.setPref("cardCovers",!this.model.getPref("cardCovers")),h("Board Menu","Settings","Enable/Disable Cover Images")},t.prototype.changeCommentingPerms=function(e){c.stop(e),u.toggle({elem:r(e.target).closest("a"),view:new a({model:this.model,modelCache:this.modelCache})}),h("Board Menu","Settings","Open Change Commenting Permissions")},t.prototype.changeAddMemberPerms=function(e){c.stop(e),u.toggle({elem:r(e.target).closest("a"),view:new s({model:this.model,modelCache:this.modelCache})}),h("Board Menu","Settings","Open Change Add Member Permissions")},t.prototype.toggleSelfJoin=function(e){c.stop(e),this.model.setPref("selfJoin",!this.model.getPref("selfJoin")),this.model.save(),h("Board Menu","Settings","Toggle Allow Org Join")},t}(l)},{}],354:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L=function(e,t){function n(){this.constructor=e}for(var r in t)A.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},A={}.hasOwnProperty,D=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),i=e(152),o=e(165),s=e(277),a=e(33),u=e(14),c=e(343),p=e(537),m=e(558),f=e(38),l=e(345),g=e(542),v=e(114),b=e(129),y=e(522),_=e(151),k=e("underscore"),O=e(519),C=e(730),B=e(510),P=e(48),E=e(53),S=e(99),x=e(91),T=e(43),M=e(106),w=e(521),h=e(21),j=e(85),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return L(t,e),M(w,t),t.prototype.viewTitleKey="menu",t.prototype.className="board-menu-content-frame",t.prototype.headerDisplayTypeClass="is-board-menu-default-view",t.prototype.initialize=function(e){return this.sidebarView=e.sidebarView,this.showAllMembers=!1,this.numActionsToShow=15,this.makeDebouncedMethods("render","renderMembers"),this.listenTo(this.model.memberList,{"change:status":this.renderMembersDebounced,"add remove reset":this.renderDebounced}),this.listenTo(this.model,{"change:datePluginDisable":this.renderPowerUpDisableTimer,"change:memberships":this.renderDebounced,"change:prefs:canInvite":this.renderDebounced,"change:prefs.selfJoin":this.renderDebounced,"change:prefs.invitations":this.renderDebounced,"change:powerUps":this.renderEnabledPowerUpCount,"change:idOrganization":this.renderMembersDebounced}),this.listenTo(a.me(),{"change:idOrganizations":this.loadOrganizationMembersData}),this.listenTo(this.model.boardPluginList,{"add remove reset":this.renderEnabledPowerUpCount}),this.setOrganizationChangeListener(),this.subscribe(B(this.model),function(e){return function(){return e.renderEnabledPowerUpCount()}}(this)),this.actionListView=this.collectionSubview(s,new o([],{modelCache:this.modelCache}),{renderOpts:{limit:this.numActionsToShow,context:this.model,compact:!0,truncateComments:function(e){return function(t){return t.get("date")<e.model.get("dateLastView")}}(this),excludeTypes:["copyCommentCard"]}}),this.waitForId(this.model,function(e){return function(){return e.listenTo(e.modelCache,"add:Action:"+e.model.id+" remove:Action:"+e.model.id+" change:Action:"+e.model.id,e.frameDebounce(function(){return e.renderActionCount(),e.actionListView.collection.reset(e.getActions())})),e.actionListView.collection.reset(e.getActions())}}(this))},t.prototype.events={"click .js-open-manage-board-members":"openAddMembers","click .js-show-extra-members":"showExtraMembers","click .js-hide-extra-members":"hideExtraMembers","click .js-join-board":"joinBoard","click .js-change-background":"changeBackground","click .js-open-power-ups":"showPowerUps","click .js-open-stickers":"openStickers","click .js-open-card-filter":"showCardFilter","click .js-open-activity":"openActivity","click .js-open-more":"openMore","click .js-power-up-disable-timer":"openPowerUpsLimitUpgrade"},t.prototype.render=function(){var e,t,n,r,i;return r=a.me(),this.showAllMembers=!1,n=this.model.editable(),e=j("addShareInvite"),i=j("powerUpsExplanation"),t={canJoin:this.model.canJoin(),canInviteMembers:this.model.canInviteMembers(),canAssign:n,canChangeBackground:n,canEnablePowerUps:n,hasBCPowerUps:r.hasBCPowerUps(),hasGoldPowerUps:r.isFeatureEnabled("threePlugins"),selfJoin:this.model.allowsSelfJoin(),addMembersLabelKey:e.get("labelKey"),powerUpsExplanationText:i.get("explanationText")},this.$el.html(C(t)),this.renderMembers(),this.actionListView.setElement(this.$(".js-menu-action-list")[0]),this.renderActions(),this.renderActionCount(),this.renderEnabledPowerUpCount(),this.renderBackgroundPreview(),this.renderPowerUpDisableTimer(),this},t.prototype.renderBackgroundPreview=function(){var e,t,n,r,i,o,s;return e=this.$(".js-fill-background-preview").css({"background-image":"","background-color":""}),null!=(null!=(r=u[this.model.getPref("background")])?r.tile:void 0)?n=this.model.getPref("backgroundImage"):null!=this.model.getPref("backgroundImageScaled")||null!=this.model.getPref("backgroundImage")?n=null!=(i=null!=(o=null!=(s=b.previewBetween(this.model.getPref("backgroundImageScaled"),90,60,600,400))?s.url:void 0)?o:this.model.get("fullSizeUrl"))?i:this.model.getPref("backgroundImage"):t=null!=this.model.getPref("backgroundColor")?this.model.getClientBackgroundColor(this.model.getPref("background")):this.model.getClientBackgroundColor("blue"),e.css({"background-image":n?"url("+n+")":"","background-color":t}),this},t.prototype.getDateLastViewedActionsStorageKey=function(){return this.model.id?"timeLastViewedActions-"+this.model.id:null},t.prototype.setDateLastViewedActions=function(e){var t;null!=(t=this.getDateLastViewedActionsStorageKey())&&v.set(t,e.toISOString())},t.prototype.setDateLastViewedActionsAsNow=function(){this.setDateLastViewedActions(new Date)},t.prototype.getDateLastViewedActions=function(){var e,t;return null!=(t=this.getDateLastViewedActionsStorageKey())&&null!=(e=v.get(t))?new Date(e):null},t.prototype.renderActionCount=function(){var e,t,n,r,i,o,s,u,c,l;for(this.$(".js-unread-activity-count").empty(),i=this.getDateLastViewedActions(),c=50,null==i&&(i=new Date,this.setDateLastViewedActions(i)),s=function(e){return function(e){var t,n;return t=new Date(e.get("date"))>i,n=e.get("idMemberCreator")!==a.me().id,t&&n}}(this),t=0,l=this.model.getActions(),o=0,u=l.length;u>o;o++)e=l[o],s(e)&&t++;return t>0&&t<=this.numActionsToShow&&this.setDateLastViewedActionsAsNow(),n=t,t>=c&&(n=c+"+"),t>this.numActionsToShow&&this.$(".js-unread-activity-count").text(n),r={count:n,hasCount:t>this.numActionsToShow},this.$(".js-fill-activity-button").empty().append(O.fill("board_menu_more_activity_button",r)),this},t.prototype.renderPowerUpDisableTimer=function(){var e;return e=this.model.daysUntilPluginsDisable(),null!==e?this.$(".js-power-up-disable-timer").removeClass("hide").text(S("days remaining",e)):this.$(".js-power-up-disable-timer").addClass("hide")},t.prototype.getEnabledPowerUpCount=function(){return this.model.get("powerUps").length+this.model.boardPluginList.length},t.prototype.renderEnabledPowerUpCount=function(){var e,t,n;return t=a.me(),n=t&&h&&!t.isDismissed(h),n?(this.$(".js-enabled-power-up-count").text(""),this.$(".js-power-up-new").removeClass("hide")):(this.$(".js-power-up-new").addClass("hide"),e=this.getEnabledPowerUpCount(),e>0?this.$(".js-enabled-power-up-count").text(x(e)):this.$(".js-enabled-power-up-count").text("")),this},t.prototype.renderMembers=function(){var e,t,n,r,i,o,s,u,c,l,d,h,f,g,v,b,y,w,C,x,j,M,B,O;for(i=null!=this.model.get("idOrganization"),y=this.model.getOrganization(),O=this.model.orderedVisibleMembers(),k.any(O,function(e){return function(t){return e.model.ownedByMember(t)}}(this))||T(new Error("Board had no admins, id = "+this.model.id+", "+O.length+" visibleMembers")),v=a.me(),l=this.model.isMember(v)||this.model.isObserver(v)||(null!=y?y.isMember(v):void 0),r=l?k.groupBy(O,function(e){return function(t){var n;return n=e.model.getMembershipFor(t),e.model.isVirtual(t)?"invited":null==n?"other":n.deactivated?"deactivated":"observer"===n.memberType?"observer":null!=n.orgMemberType||null!=(null!=y?y.getMembershipFor(t):void 0)?"team":i?"other":"member"}}(this)):{member:k.filter(O,function(e){return function(t){var n;return n=e.model.getMembershipFor(t),!n.deactivated&&"observer"!==n.memberType}}(this))},j=[{selector:".js-list-members",list:r.member},{selector:".js-list-team-members",list:r.team},{selector:".js-list-invited-members",list:r.invited},{selector:".js-list-non-team-members",list:r.other},{selector:".js-list-observers",list:r.observer},{selector:".js-deactivated-members",list:r.deactivated}],s=1===k.keys(r).length&&(null!=r.member||null!=r.team),C=9,_.fSmall&&(C=7),x=3,f=C*x,u=C*(x+1),o=0,c=0,h=j.length;h>c;c++)w=j[c],M=w.selector,g=w.list,null==g&&(g=[]),n=this.$(M),t=n.find(".js-list"),e=n.find(".js-heading"),n.toggleClass("is-hidden",0===g.length),e.toggleClass("is-hidden",s),n.toggleClass("is-partial-row",g.length<C),d=g.length>u,O=g,d&&!this.showAllMembers&&(o+=g.length-f,O=O.slice(0,f)),B=function(){var e,t,n;for(n=[],e=0,t=O.length;t>e;e++)b=O[e],n.push(this.subview(m,b,{board:this.model}));return n}.call(this),t.length&&this.ensureSubviews(B,t);return this.$(".js-show-extra-members").text(S("show more members",o)),this.$(".js-show-extra-members-button").toggleClass("is-shown",!this.showAllMembers&&o>0),this.$(".js-hide-extra-members-button").toggleClass("is-shown",this.showAllMembers),this.defer(function(){return p.refreshDraggableSidebarMembers()}),this},t.prototype.showExtraMembers=function(e){b.stop(e),this.showAllMembers=!0,this.renderMembers()},t.prototype.hideExtraMembers=function(e){b.stop(e),this.showAllMembers=!1,this.renderMembers()},t.prototype.renderActions=function(){return this.actionListView.render(),this},t.prototype.showPowerUps=function(e){var t,n;b.stop(e),n=a.me(),n&&h&&!n.isDismissed(h)&&n.dismiss(h),this.sidebarView.pushView("powerUps"),E("board view","opens","Power-Up listing","","","by clicking Power-Ups button in sidebar"),
t=this.model.daysUntilPluginsDisable(),null!==t?P("Board Menu","Open Power-Ups","Power-Ups Timer Active"):P("Board Menu","Open Power-Ups")},t.prototype.showCardFilter=function(e){b.stop(e),this.sidebarView.pushView("filter"),P("Board Menu","Open Card Filter Menu")},t.prototype.openPowerUpsLimitUpgrade=function(e){b.stop(e),this.sidebarView.pushView("powerUps",{viewState:"upsell"}),P("Board Menu","Open Powerups Upsell")},t.prototype.openStickers=function(e){b.stop(e),this.sidebarView.pushView("stickers"),P("Board Menu","Open Stickers","Via Default Menu")},t.prototype.changeBackground=function(e){b.stop(e),this.sidebarView.pushView("background"),P("Board Menu","Open Change Background")},t.prototype.openActivity=function(e){b.stop(e),this.sidebarView.pushView("activity"),this.setDateLastViewedActionsAsNow(),P("Board Menu","View All Board Activity")},t.prototype.openMore=function(e){b.stop(e),this.sidebarView.pushView("more"),P("Board Menu","More Menu")},t.prototype.joinBoard=function(e){b.stop(e),this.$(".js-join-board").remove(),this.model.joinBoard(),P("Board Menu","Join Board via Sidebar")},t.prototype.openAddMembers=function(e){var t;b.stop(e),P("Board Menu","Add Members via Sidebar Button"),t=new c({model:this.model,modelCache:this.modelCache}),t.loadOrgData(),g.toggle({elem:r(e.target).closest(".js-open-manage-board-members"),view:t})},t.prototype.setOrganizationChangeListener=function(){var e;return e=this.model.getOrganization(),e?this.listenTo(this.model.getOrganization(),{"change:memberships":this.renderMembersDebounced}):void 0},t.prototype.loadOrganizationMembersData=function(){var e,t,n,r,i;return e=this.model.get("idOrganization"),r=a.me().previous("idOrganizations"),n=a.me().get("idOrganizations"),i=D.call(r,e)>=0,t=D.call(n,e)>=0,!i&&t?f.loadOrganizationMembersData(e).then(function(e){return function(){return e.renderMembersDebounced()}}(this)):void 0},t.prototype.remove=function(){return this.setDateLastViewedActionsAsNow(),t.__super__.remove.apply(this,arguments)},t}(y)},{}],355:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S=function(e,t){function n(){this.constructor=e}for(var r in t)T.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},T={}.hasOwnProperty;r=e("jquery"),i=e(289),s=e(342),a=e(344),d=e(354),c=e(350),l=e(353),u=e(345),o=e(341),h=e(79),m=e(356),g=e(362),f=e(361),v=e(20),b=e(542),y=e(373),w=e(520),_=e(129),k=e(522),C=e("underscore"),x=e(519),j=e(48),t.exports=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.initialize=function(){w.addHandler(this,{scope:"board_sidebar"}),this.defaultView=this.subview(d,this.model,{sidebarView:this}),this.viewStack=[{name:"default",view:this.defaultView}]},t.prototype.events={"click .js-hide-sidebar":"hideSidebar","click .js-pop-widget-view":"popView",shortcut:"shortcut"},t.prototype.shortcut=function(e){switch(e){case v.F:return this.pushView("filter"),"F - Search and Filter Cards"}},t.prototype.className="board-menu-container",t.prototype.render=function(){return this.$el.html(x.fill("board_sidebar")),this.renderView(),this},t.prototype.sidebarSubviews=function(){return{default:d,filter:m,archive:i,stickers:y,labels:s,background:g,backgroundColors:f,backgroundPhotos:f,activity:a,powerUps:c,more:u,settings:l,collections:o}},t.prototype.hackySidebarLifetimeEvents={filter:{didBecomeVisible:function(e){var t;return t=e.$(".js-autofocus")[0],_.setCaretAtEnd(t)}},more:{didBecomeVisible:function(e){return e.selectUrl()}},archive:{didBecomeVisible:function(e){var t;return t=e.$(".js-autofocus")[0],_.setCaretAtEnd(t)}}},t.prototype.viewNamed=function(e,t){var n,r,i,o,s,a,u,c;for(s=this.viewStack,n=0,r=s.length;r>n;n++)if(a=s[n],o=a.name,u=a.view,e===o)return u;if(c=C.result(this,"sidebarSubviews")[e],null==c)throw new Error("Unknown sidebar view "+e);return i="filter"===e?this.model.filter:this.model,new c(C.extend({model:i,modelCache:this.modelCache,sidebarView:this,viewState:null!=t?t.viewState:void 0},t))},t.prototype.topSidebarView=function(){return C.last(this.viewStack).view},t.prototype.topSidebarViewOptions=function(){return C.last(this.viewStack).options},t.prototype.renderView=function(e,t){var n,i,o,s,a,u;return o=this.$(".js-board-menu-title"),s=this.$(".js-board-menu-title-text").empty(),i=this.$(".js-board-menu-content-wrapper").empty().scrollTop(0),u=this.topSidebarView(),i.toggleClass("no-padding",u.noPadding===!0),null!=u.headerDisplayTypeClass?this.$(".js-board-menu-title").addClass(u.headerDisplayTypeClass):this.$(".js-board-menu-title").removeClass("is-board-menu-default-view"),n=u.render().$el,null!=e&&n.addClass(e),a=u.getViewTitle(),a?(o.addClass("is-in-frame"),s.append(a)):o.removeClass("is-in-frame"),i.append(n),null!=t&&r(".board-menu-content-frame").one("transitionend webkitTransitionEnd",function(e){return function(e){return t(u)}}(this)),this.defer(function(t){return function(){return null!=e?n.removeClass(e):void 0}}(this)),u.delegateEvents(),this},t.prototype.pushView=function(e,t){var n,i,o,s,a,u,c,l;l=this.viewNamed(e,t),i=null!=(a=null!=(u=this.hackySidebarLifetimeEvents)&&null!=(c=u[e])?c.didBecomeVisible:void 0)?a:function(){},o=l===this.topSidebarView(),s=this.model.viewState.get("showSidebar"),s?o?i(l):n=i:r(".board-menu").one("transitionend webkitTransitionEnd",function(e){return function(e){return i(l)}}(this)),s||this.model.viewState.setShowSidebar(!0),o||(this.viewStack.push({name:e,view:l,options:t}),this.renderView("is-right-of-frame",n),b.hide())},t.prototype.popView=function(){var e,t;if(1!==this.viewStack.length){if(t=null!=(e=this.topSidebarViewOptions())?e.resetTo:void 0)return this.resetTo(t);this.topSidebarView().remove(),this.viewStack.pop(),this.renderView("is-left-of-frame"),b.hide(),j("Board Menu","Go Back a View")}},t.prototype.resetTo=function(e){for(this.topSidebarView().remove();1!==this.viewStack.length;)this.viewStack.pop();e&&this.pushView(e),this.renderView("is-left-of-frame"),b.hide(),j("Board Menu","Reset to "+e+" view")},t.prototype.hideSidebar=function(){this.model.viewState.setShowSidebar(!1)},t}(k)},{}],356:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),o=e(97),s=e(20),a=e(129),u=e(522),c=e("underscore"),d=e(519),l=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="filter cards",t.prototype.className="board-menu-content-frame",t.prototype.initialize=function(){return this.listenTo(this.model.board,"change:labelNames change:memberships",this.renderFilterOptions),this.listenTo(this.model,"change",this.renderFilterOptions)},t.prototype.events={"click .js-toggle-label-filter":"toggleLabelFilter","click .js-select-member":"toggleMemberFilter","click .js-show-all-labels":"showAllLabels","click .js-show-all-members":"showAllMembers","click .js-clear-all":"clearFilter","click .js-due-filter":"toggleDateFilter","click .js-mode-filter":"toggleModeFilter","mouseenter .js-filter-search-results li":"hoverSelect","mouseenter .js-clear-all":"clearAllSelected","mouseenter .js-show-all-members":"clearAllSelected","keydown .js-input":"keyDownEvent","keyup .js-input":"keyUpEvent"},t.prototype.render=function(){var e;return this.isFiltering=!1,e=this.model.toJSON(),this.$el.html(d.fill("filter_cards",e)),this.renderFilterOptions(),this},t.prototype.renderFilterOptions=function(){var e,t,n,r,i,o,s;return e=this.model.toJSON({board:!0,expanded:!0}),n=!c.isEmpty(e.labels),r=!c.isEmpty(e.members),t=this.model.get("title")&&(n||r),t?(e.limitMembers=!1,e.limitLabels=!1):(i=6,(null!=(o=this.model.get("limitMembers"))?o:!0)&&(e.members.length===i+1?e.limitMembers=!1:(e.remainingMembers=Math.max(0,e.members.length-i),e.members=c.first(e.members,i),e.limitMembers=e.remainingMembers>0)),(null!=(s=this.model.get("limitLabels"))?s:!0)&&(e.labels.length===i+1?e.limitLabels=!1:(e.remainingLabels=Math.max(0,e.labels.length-i),e.labels=c.first(e.labels,i),e.limitLabels=e.remainingLabels>0))),c.extend(e,{filtering:t,showHelper:!t,showLabels:!t||n,showMembers:!t||r,showDueTimes:!t,showMatchMode:!t,isFiltering:this.model.isFiltering(),labels:e.labels.map(function(e){var t;return t=e.color?l(["labels",e.color]):"",c.extend({defaultColorName:t},e)})}),this.$(".js-filter-search-results").html(d.fill("filter_cards_search_results",e,{},{member:d.member,select_member:d.select_member})),null===this.model.get("title")&&this.$(".js-input").val(""),this},t.prototype.keyDownEvent=function(e){var t,n,r,i;r=o.getKey(e),(r===s.Enter||r===s.ArrowUp||r===s.ArrowDown)&&(a.stop(e),i=".item, .label-list-item",t=this.$(i),n=t.filter(".selected").first(),r===s.Enter?n.find("a").click():(r===s.ArrowUp||r===s.ArrowDown)&&(0===n.length?t.first().addClass("selected"):a.navMenuList(this.$el,i,r)))},t.prototype.keyUpEvent=function(e){var t;return t=o.getKey(e),t!==s.Escape&&t!==s.Enter&&t!==s.ArrowUp&&t!==s.ArrowDown?this.model.save({title:this.$(".js-input").val(),limitMembers:!0,limitLabels:!0}):void 0},t.prototype.showAllMembers=function(e){a.stop(e),this.model.save("limitMembers",!1)},t.prototype.showAllLabels=function(e){a.stop(e),this.model.save("limitLabels",!1)},t.prototype._clearAndFocusInput=function(){return this.model.save({title:""}),this.$(".js-input").val("").focus()},t.prototype.toggleLabelFilter=function(e){var t,n;return a.stop(e),n=r(e.target).closest("a").attr("data-idlabel"),t=this.model.toJSON({expanded:!0}),c.isEmpty(t.labels)||this._clearAndFocusInput(),this.model.toggleIdLabel(n)},t.prototype.toggleMemberFilter=function(e){var t,n;return a.stop(e),n=r(e.target).closest("a").attr("idMember"),t=this.model.toJSON({expanded:!0}),c.isEmpty(t.members)||this._clearAndFocusInput(),a.stop(e),this.model.toggleMember(n)},t.prototype.toggleDateFilter=function(e){var t;return a.stop(e),t=r(e.target).closest("a").attr("time"),this.model.get("due")===t?this.model.save("due",null):this.model.save("due",t)},t.prototype.toggleModeFilter=function(e){var t;return a.stop(e),t=r(e.target).closest("a").attr("mode"),this.model.get("mode")!==t?this.model.save("mode",t):void 0},t.prototype.clearFilter=function(e){return this.model.clear()},t.prototype.clearAllSelected=function(){return this.$("li").removeClass("selected")},t.prototype.hoverSelect=function(e,t){return this.clearAllSelected(),a.selectMenuItem(r(e.currentTarget).closest("ul"),"li",r(e.currentTarget))},t}(u)},{}],357:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(364),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.viewTitleKey="add member permissions",t.prototype.getTemplate=function(){return"board_menu_invitations"},t.prototype.getPerm=function(){return"invitations"},t}(i)},{}],358:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h;a=e("react"),u=e("underscore"),i=void 0,t(function(){return i=e(217)}),o=e(14),d=a.DOM.div,h=e(48),c=[];for(p in o)l=o[p],"default"===l.type&&(c=c.concat({key:p,name:p,color:l.color}));s=function(e){var t,n,r;return r=e.setBackgroundColor,n=e.name,t=e.color,d({onClick:function(){return h("Board Menu","Change Background",n),r(n,t)},className:"board-backgrounds-section-tile"},d({className:"image",style:{backgroundColor:t}}))},n.exports=a.createClass({displayName:"ColorsView",render:function(){var e;return e=this.props.setBackgroundColor,d({},c.map(function(t){return a.createElement(s,u.extend({setBackgroundColor:e},t))}))}})},{}],359:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v;a=e("react"),p=a.DOM,c=p.div,l=p.input,m=p.span,d=e(101),u=e("underscore").debounce,h=e(231),v=h.unsplashApi,f=h.toJson,g=e(48),s=e(360),r=250,i=317099,o=function(){var e,t;return e=Math.ceil(screen.height/112*2),t=Math.ceil(1.5*e),t%2&&t++,t}(),t.exports=a.createClass({displayName:"PhotosView",getInitialState:function(){var e;return e=function(e){return{connectionError:!1,id:e,images:[],isLoading:!1,marker:null,maxPage:1,page:1}},{collections:[e(i),e("search")],defaultCollectionActive:!0,defaultCollectionShowTitle:!1,queueID:0,searchTerm:null}},componentWillMount:function(){return this.debouncedGetUnsplashBackgrounds=u(this.getUnsplashBackgrounds,r)},componentDidMount:function(){return this.getUnsplashBackgrounds(i)},render:function(){var e,t,n,r,o,s;return o=this.state,e=o.boardId,t=o.collections,n=o.defaultCollectionActive,r=o.defaultCollectionShowTitle,s=o.searchTerm,c({className:"board-backgrounds-photos"},c({className:"search-photos"},l({onChange:this.onSearchInputChange,placeholder:d(["background photos","photos"])}),m({className:"icon-lg icon-search"})),c({className:"board-backgrounds-list-observer",ref:this.bindObserver},s?this.renderList("search"):void 0,r?c({className:"collection-title"},d(["background photos","top picks"])):void 0,n?this.renderList(i):void 0))},renderList:function(e){var t,n,r,i,o,u,c,l;return t=this.props.boardId,n=this.state.collections,l=n.filter(function(t){return t.id===e})[0],r=l.connectionError,i=l.images,o=l.isLoading,u=l.maxPage,c=l.page,a.createElement(s,{boardId:t,collectionID:e,connectionError:r,images:i,isLoading:o,maxPage:u,page:c,registerMarker:this.registerMarker(e)})},onSearchInputChange:function(e){var t,n;return t=this.state.collections,n=e.target.value.trim(),this.setState({collections:t.map(function(e){return"search"===e.id&&(e.images=[],e.isLoading=!0),e}),defaultCollectionActive:!n,defaultCollectionShowTitle:!1,searchTerm:n}),n?this.debouncedGetUnsplashBackgrounds("search"):void 0},nextPage:function(e){var t,n;return t=this.state.collections,n=t.filter(function(t){return t.id===e})[0].page,this.getUnsplashBackgrounds(e,n+1)},updateCollection:function(e,t,n){var r,i,o;return r=this.state.collections.map(function(r){return r.id===e&&(r.connectionError=!1,r.images=r.images.concat(t),r.isLoading=!1,r.maxPage=n),r}),i=!0,o=!1,"search"===e&&(i=!r.filter(function(e){return"search"===e.id})[0].images.length,o=i),this.setState({collections:r,defaultCollectionActive:i,defaultCollectionShowTitle:o})},showErrorInCollection:function(e){return this.setState({collections:this.state.collections.map(function(t){return t.id===e&&(t.connectionError=!0,t.isLoading=!1),t})})},getUnsplashBackgrounds:function(e,t){var n,r,i,s;return null==t&&(t=1),i=this.state,n=i.collections,r=i.queueID,s=i.searchTerm,r++,this.setState({queueID:r,collections:n.map(function(n){return n.id===e&&(n.page=t,n.isLoading=!0),n})}),("search"===e?v.search.all(s,t,o).then(f).then(function(t){return function(n){var i;return i=n.photos,t.state.queueID===r?t.updateCollection(e,i.results,Math.ceil(i.total/o)):void 0}}(this)):v.collections.getCollectionPhotos(e,t,o,"latest").then(f).then(function(n){return function(r){var i;return i=t+1,r.length<o&&(i=t),n.updateCollection(e,r,i)}}(this))).catch(function(t){return function(){return t.showErrorInCollection(e)}}(this))},registerMarker:function(e){return function(t){return function(n){var r;if(n)return r=t.state.collections.map(function(t){return t.id===e&&(t.marker=n),t}),t.setState({collections:r}),t.observer?t.bindMarkers():void 0}}(this)},bindObserver:function(e){var t,n;if(!this.observer&&e)return n=this.state.collections,t=function(e){return function(t){var r,i,o,s,a,u;for(u=[],o=0,a=t.length;a>o;o++)i=t[o],s=i.isIntersecting||i.intersectionRatio,r=n.filter(function(e){return e.marker===i.target})[0],s&&!r.isLoading?u.push(e.nextPage(r.id)):u.push(void 0);return u}}(this),this.observer=new IntersectionObserver(t,{root:e}),this.bindMarkers()},bindMarkers:function(){var e,t,n,r,i;for(t=this.state.collections,this.observer.disconnect(),i=[],n=0,r=t.length;r>n;n++)e=t[n],e.marker?i.push(this.observer.observe(e.marker)):i.push(void 0);return i}})},{}],360:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m;a=e("react"),p=a.DOM,c=p.a,l=p.div,h=p.span,d=e(101),o=void 0,t(function(){return o=e(217)}),m=e(48),s="?w=2560&h=2048&q=90",i="?utm_source=trello&utm_medium=referral&utm_campaign=api-credit",u=8,n.exports=a.createClass({displayName:"PhotosList",getInitialState:function(){return{uploadingImageID:null}},shouldComponentUpdate:function(e,t){var n,r,i,o;return i=this.props,n=i.images,r=i.isLoading,o=this.state.uploadingImageID,n.length!==e.images.length||r!==e.isLoading||o!==t.uploadingImageID},render:function(){var e,t,n,r,i,o,s,a,u,c,p;return u=this.props,e=u.boardId,t=u.collectionID,n=u.connectionError,r=u.images,i=u.isLoading,s=u.maxPage,a=u.page,c=s>a,o=i?"loading active":"loading",p=r.map(this.thumbMap),c&&(p=this.addMarker(p)),l({className:"board-backgrounds-list"},p.length?p:"search"!==t||i||n?void 0:l({className:"no-results"},d(["background photos","no results"])),n?l({className:"error"},d(["background photos","connection error unsplash"])):void 0,l({className:o}))},thumbMap:function(e,t){var n;return n=this.state.uploadingImageID,l({className:"board-background-select",key:["thumb",t,e.id].join(":"),onClick:this.setUnplashBackground(e)},h({className:"background-box",style:{backgroundImage:"url("+e.urls.thumb+")"}},n===e.id?l({className:"uploading"},h({className:"spinner small u-float-left"}),d(["templates","board_background_selection","uploading-ellipsis"])):c({className:"attribution",href:e.user.links.html.replace(/^http\:\/\//,"https://")+i,target:"_blank",title:e.user.name,onClick:function(e){return e.stopPropagation()}},e.user.name)))},setUnplashBackground:function(e){return function(t){return function(){var n;return n=t.props.boardId,m("Board Menu","Change Background","unsplash-"+e.id),t.setState({uploadingImageID:e.id}),o({url:"/1/boards/"+n+"/prefs/background",type:"post",data:{url:e.urls.raw+s}}).finally(function(){return t.setState({uploadingImageID:null})})}}(this)},addMarker:function(e){var t,n;return n=this.props.registerMarker,t=l({key:"marker",className:"scroll-marker",ref:n}),e.splice(-u,0,t),e}})},{}],361:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;i=e(358),s=e(359),a=e("react"),u=e("react-dom"),c=e(522),o={colors:i,photos:s},l=function(e){var t,n,r;n={};for(t in e)r=e[t],t.indexOf("background")>-1&&(n[t]=r);return n},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey=function(){return"colors"===this.options.component?"change background colors":"change background photos"},t.prototype.viewTitleArguments={unsplashUrl:"https://unsplash.com?utm_source=trello&utm_medium=referral&utm_campaign=api-credit"},t.prototype.className="board-menu-content-frame",t.prototype.initialize=function(){this.listenTo(this.model,"change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness",this.frameDebounce(this.render))},t.prototype.render=function(){var e,t;return t={boardId:this.model.id,backgroundPrefs:l(this.model.attributes.prefs)},"colors"===this.options.component&&(t.setBackgroundColor=function(e){return function(t,n){return e.model.set({prefs:{background:t,backgroundColor:n,backgroundImage:null,backgroundImageScaled:null}}).setPref("background",t)}}(this)),e=a.createElement(o[this.options.component],t),u.render(e,this.el),this},t}(c)},{}],362:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e(532),i=e(33),o=e(14),s=e(157),u=e(38),c=e(371),l=e(372),d=e(129),p=e(522),h=e("underscore"),f=e(519),g=e(48),m=e(101),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="change background",t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-bg-colors":"openBackgroundColors","click .js-bg-photos":"openBackgroundPhotos","change .js-upload-image":"setUploadImage",'click a[href="/business-class"]':function(){return g("Board Menu","Open Business Class Promo - via Change Background")}},t.prototype.initialize=function(e){var n;this.sidebarView=e.sidebarView,t.__super__.initialize.apply(this,arguments),this.makeDebouncedMethods("render","renderCustomBackgrounds"),this.listenTo(i.me().boardBackgroundList,"change add remove reset",this.renderCustomBackgroundsDebounced),(i.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(n=this.model.getOrganization())?n.isFeatureEnabled("customBoardBackgrounds"):void 0))&&u.loadMemberCustomBackgrounds(i.myId()).done()},t.prototype.fillBackgroundList=function(e,t,n){var r;null==n&&(n=c),e.find(".js-select-background:not(.js-uploader)").remove(),this.appendSubviews(function(){var e,i,o;for(o=[],e=0,i=t.length;i>e;e++)r=t[e],o.push(this.subview(n,r,{board:this.model}));return o}.call(this),e)},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.enabled_additionalBackgrounds=i.me().isFeatureEnabled("additionalBoardBackgrounds")||(null!=(t=this.model.getOrganization())?t.isFeatureEnabled("additionalBoardBackgrounds"):void 0),e.enabled_customBoardBackgrounds=i.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(n=this.model.getOrganization())?n.isFeatureEnabled("customBoardBackgrounds"):void 0),e.idMember=i.myId(),this.$el.html(f.fill("board_change_background",e)),this.renderCustomBackgrounds(),this},t.prototype.renderCustomBackgrounds=function(){var e,t,n,r,o;return n=i.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(o=this.model.getOrganization())?o.isFeatureEnabled("customBoardBackgrounds"):void 0),e=this.$(".js-custom-list"),n?(r=this.modelCache.get("Member",i.myId()),t=r.boardBackgroundList.chain().filter(function(e){return"custom"===e.get("type")}).sortBy("id").reverse().value(),this.fillBackgroundList(e,t,l),e.find(".js-uploader").prependTo(e)):e.append(f.fill("product_promo_button")),this},t.prototype.uploadBackgroundsAndAddPreviews=function(e){var t,n,o,s,a;for(a=[],n=o=0,s=e.length;s>o;n=++o)t=e[n],a.push(function(e){return function(n){var o,s,a;return a=new FileReader,o={file:t},d.validFileSize(t)?(s=new FormData,s.append("token",i.myToken()),s.append("file",t),a.onload=function(t){return e.modelCache.get("Member",i.myId()).boardBackgroundList.create({type:"custom",fullSizeUrl:t.target.result},{data:s,processData:!1,contentType:!1,error:function(t){return t.set("error","Failed"),e.setTimeout(function(){return t.destroy()},5e3)},success:function(t){var n;return n=e.model,h.extend(n.attributes.prefs,{backgroundColor:t.get("color"),backgroundImage:t.get("fullSizeUrl"),backgroundImageScaled:t.get("scaled"),backgroundTile:t.get("tile"),backgroundBrightness:t.get("brightness")}),n.setPref("background",t.id)}})},a.readAsDataURL(t)):void r.flash("file too large","error")}}(this)(n));return a},t.prototype.setUploadImage=function(e){var t,n;return d.stop(e),t=this.$(".js-upload-image"),g("Board Menu","Upload Custom Background"),null==t.prop("files")&&t.val()?void d.uploadFile(i.myToken(),t,function(){}):(n=t[0].files,void(n.length>0&&this.uploadBackgroundsAndAddPreviews(n)))},t.prototype.openBackgroundColors=function(e){d.stop(e),this.sidebarView.pushView("backgroundColors",{component:"colors"}),g("Board Menu","Open Background Colors")},t.prototype.openBackgroundPhotos=function(e){d.stop(e),this.sidebarView.pushView("backgroundPhotos",{component:"photos"}),g("Board Menu","Open Background Photos")},t}(p)},{}],363:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(364),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.viewTitleKey="commenting permissions",t.prototype.getTemplate=function(){return"board_menu_commenting"},t.prototype.getPerm=function(){return"comments"},t}(i)},{}],364:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),i=e(490),s=e(542),a=e(129),u=e(522),c=e(519),l=e(48),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="change permissions",t.prototype.initialize=function(){this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.events={"click .js-select":"selectPerm"},t.prototype.render=function(){var e,t,n,r;return e=this.model.toJSON({prefs:!0,url:!0}),e.cardCovers=e.prefs.cardCovers,t=this.model.getOrganization(),e.hasOrg=null!=(null!=t?t.id:void 0),e.orgCanSee=e.hasOrg&&("public"===(n=this.model.getPref("permissionLevel"))||"org"===n),e.premium=null!=t?t.isFeatureEnabled("observers"):void 0,e.voting_showObservers=(e.premium||e.voting_observers)&&e.hasOrg,e.comments_showObservers=(e.premium||e.comments_observers)&&e.hasOrg,e.pLevelClass=i.getPermLevelIconClassForBoard(this.model),(null!=t?t.owned():void 0)?(e.orgOwner=!0,e.orgName=t.get("displayName"),this.model.owned()||(e.setOrgNull=!0)):this.model.owned()||(e.noEditOrg=!0),r=this.getTemplate(),this.$el.html(c.fillMenu(r,e,{editable:this.model.editable(),owned:this.model.owned()})),this},t.prototype.selectPerm=function(e){var t,n,i;a.stop(e),l("Board","Change "+this.getPerm()),t=r(e.target).closest(".js-select"),t.hasClass("disabled")||t.closest(".js-disabled").length||(n=this.getPerm(),i=t.attr("name"),this.model.setPref(n,i),this.model.save(),s.popView())},t}(u)},{}],365:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),i=e(490),o=e(351),a=e(542),u=e(129),c=e(522),p=e(519),h=e(48),d=e(101),l=e(737),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey=function(){return this.model.owned()?"change visibility":"visibility"},t.prototype.tagName="ul",t.prototype.initialize=function(){this.listenTo(this.model,"change",this.render)},t.prototype.className="pop-over-list",t.prototype.events={"click .js-select":"selectVis"},t.prototype.render=function(){var e;return e=this.model.getOrganization(),this.$el.html(l({canChange:this.model.owned(),current:this.model.getPref("permissionLevel"),hasSuperAdmins:null!=e?e.isFeatureEnabled("superAdmins"):void 0,hasOrg:null!=e,orgName:null!=e?e.get("displayName"):void 0,privateRestricted:null!=e&&!(null!=e?e.canSetVisibility("private"):void 0),orgRestricted:null!=e&&!(null!=e?e.canSetVisibility("org"):void 0),publicRestricted:null!=e&&!(null!=e?e.canSetVisibility("public"):void 0)})),this},t.prototype.selectVis=function(e){var t,n;if(u.stop(e),t=r(e.target).closest(".js-select"),!t.hasClass("disabled")&&!t.closest(".js-disabled").length){if(n=t.attr("name"),"org"===n&&!this.model.getOrganization())return void a.pushView({view:o,options:{model:this.model,modelCache:this.modelCache,disableNone:!0}});this.model.setPref("permissionLevel",n),this.model.save(),h("Board","Change Board Visibility",n),a.popView()}},t}(c)},{}],366:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),i=e(534),s=e(129),a=e(522),u=e(519),c=e(48),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="background options",t.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},t.prototype.events={"click .js-delete-background":"deleteBackground","click .js-select-option":"selectOption"},t.prototype.render=function(){var e,t;return t=this.model.toJSON(),t.tile=this.model.get("tile"),e=this.model.get("brightness"),t.brightnessLight="light"===e,t.brightnessDark="dark"===e,this.$el.html(u.fill("board_background_options",t)),this},t.prototype.selectOption=function(e){var t,n;t=r(e.target).closest(".js-select-option"),null!=t.attr("data-board-brightness")?this.model.update("brightness",t.attr("data-board-brightness")):null!=t.attr("data-background-display-type")&&(n=t.attr("data-background-display-type"),this.model.update("tile","tile"===n))},t.prototype.deleteBackground=function(e){return s.stop(e),i.pushView("delete background",{elem:r(e.target).closest(".js-delete-background"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),e.remove(),c("Board Menu","Change Background","Delete Uploaded Background")}}(this)})},t}(a)},{}],367:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),d=e("underscore"),i=e(532),o=e(33),s=e(534),u=e(38),c=e(129),l=e(522),h=e(731),p=e(101),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="add cards via email",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.modelCache,"add:List remove:List change:List:closed reset:List",this.frameDebounce(this.render)),this.listenTo(this.model,"change:myPrefs",this.frameDebounce(this.render)),this.allowEmail=!0,null==this.model.getPref("emailKey")?this.model.generateEmailKey():void 0},t.prototype.events={"change .js-select-position":"updatePosition","change .js-select-list":"updateList","click .js-generate-address":"generateAddress","click .js-send-address":"sendAddressEmail","click .js-autofocus":"focusInput"},t.prototype.render=function(){var e,t,n,r,i,s;return this.model.canComment(o.me())?(t=this.model.getPref("idEmailList"),r=this.model.listList.models.map(function(e){return{id:e.id,name:e.get("name")}}),s=null!=(n=d.findWhere(r,{id:t}))?n.name:null!=(n=this.modelCache.get("List",t))&&n.get("closed")?(e=p("archived list",{listName:n.get("name")}),r.unshift({id:n.id,name:e}),e):(null!=t?u.loadArchivedLists(this.model.id).then(function(e){return function(){return null!=e.modelCache.get("List",t)?e.render():void 0}}(this)):void 0,p("unknown list placeholder")),null==t&&r.unshift({name:p("unknown list placeholder"),selected:!0}),this.$el.html(h({commentsEnabled:!0,email:null!=(i=this.model.getPref("fullEmail"))?i:"",lists:r.map(function(e){return{id:e.id,name:e.name,selected:e.id===t}}),listName:s,positionName:p(["email position",this.model.getPref("emailPosition")]),position:this.model.getPref("emailPosition")}))):this.$el.html(h({commentsEnabled:!1})),this},t.prototype.focusInput=function(e){r(e.target).focus().select()},t.prototype.updateValue=function(e,t){var n;return n=this.$el.find(e).val(),null!=n&&n!==this.model.getPref(t)?this.model.setPref(t,n):void 0},t.prototype.updatePosition=function(){return this.updateValue(".js-select-position","emailPosition")},t.prototype.updateList=function(){return this.updateValue(".js-select-list","idEmailList"),this.allowEmail=!0},t.prototype.generateAddress=function(e){c.stop(e),s.pushView("regenerate email address",{model:this.model,confirmBtnClass:"negate",popOnClick:!0,fxConfirm:function(e){return function(t){return e.model.set({"myPrefs/emailKey":null}),e.allowEmail=!0,e.model.generateEmailKey()}}(this)})},t.prototype.sendAddressEmail=function(e){c.stop(e),this.allowEmail&&(this.allowEmail=!1,this.model.api({
method:"emailKey/message",type:"post"},function(e){return function(e){return e?i.show("could not send email","error","email",5e3):i.flash("email sent","confirm")}}(this)))},t}(l)},{}],368:[function(e,t,n){var r,i,o,s,a,u;r=e(509),i=e("react"),s=e(514)("plugin_auth"),u=e("xtend"),o=e("underscore"),a=s.renderable(function(e){var t,n,r,i,o,a,u,c;return i=null!=e?e:{},c=i.supportsSettings,u=i.supportsAuth,r=i.hasPersonalSettings,t=i.authStatus,n=i.authorize,o=i.removeData,a=i.showSettings,s.ul(".pop-over-list",function(){return!u||t&&t.authorized?(c&&s.li({onClick:a},function(){return s.a(function(){return s.format("edit-power-up-settings")})}),r?s.li({onClick:o},function(){return s.a(function(){return s.format("remove-personal-settings")})}):void 0):s.li({onClick:n},function(){return s.a(function(){return s.format("authorize-account")})})})}),t.exports=i.createClass({displayName:"PluginSettings",render:function(){return a(this.props)}})},{}],369:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(522),a=e(519),s=e(36).locales,r=e(98),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(e){this.powerUp=e.powerUp,this.isGrandfathered=e.isGrandfathered},t.prototype.getViewTitle=function(){return this.powerUp.displayName},t.prototype.render=function(){var e;return e={about:a.fill(this.powerUp.aboutTemplate),showScreenshots:r.matches(s[0],"en"),screenshots:this.powerUp.screenshots,displayName:this.powerUp.displayName,isGrandfathered:this.isGrandfathered},this.$el.html(a.fill("power_up_item_details",e)),this},t}(o)},{}],370:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(542),o=e(129),s=e(522),a=e(519),u=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="rename board",t.prototype.events={"click .js-rename-board":"rename","submit form":"rename"},t.prototype.render=function(e){var t;return t={},t.boardName=this.model.get("name"),this.$el.html(a.fill("popover_rename_board",t)),this},t.prototype.rename=function(e){var t,n;return o.stop(e),t=this.$(".js-board-name"),n=t.val().trim(),""===n?void t.focus().select():(u("Board","Successfully Rename Board"),this.model.update("name",n),void r.hide())},t}(s)},{}],371:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;i=e(129),o=e(522),s=e("underscore"),a=e(519),u=e(48),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:error",this.render)},t.prototype.className="board-background-select js-select-background",t.prototype.events={click:"selectBackground","click .js-background-attribution":"clickAttribution"},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.pending=null==this.getId()&&null==e.error,null==e.color&&(e.backgroundImageThumbnail=null!=(t=null!=(n=i.previewBetween(this.model.get("scaled"),90,60,600,400))?n.url:void 0)?t:this.model.get("fullSizeUrl")),this.$el.html(a.fill("board_background_selection",e)),this.$el.toggleClass("is-still-uploading-background",e.pending),this},t.prototype.clickAttribution=function(e){return e.stopPropagation(),u("Board Menu","Change Background","Clicked Attribution")},t.prototype.getId=function(){return this.model.get("name")},t.prototype.selectBackground=function(e){var t,n,r;i.stop(e),null!=this.getId()&&(t=this.options.board,s.extend(t.attributes.prefs,{backgroundColor:this.model.get("color"),backgroundImage:this.model.get("fullSizeUrl"),backgroundImageScaled:this.model.get("scaled"),backgroundTile:null!=(n=this.model.get("tile"))?n:!1,backgroundBrightness:null!=(r=this.model.get("brightness"))?r:"unknown"}),t.setPref("background",this.getId()),u("Board Menu","Change Background",this.getId()))},t}(o)},{}],372:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(366),i=e(542),o=e(371),a=e(129),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:id",this.render)},t.prototype.events={"click .js-options":"openOptions",click:"selectBackground"},t.prototype.openOptions=function(e){return a.stop(e),i.toggle({elem:this.$(".js-options"),view:new r({model:this.model,modelCache:this.modelCache})})},t.prototype.getId=function(){return this.model.id},t}(o)},{}],373:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;r=e("jquery"),i=e(532),o=e(33),s=e(696),a=e(537),u=e(38),c=e("bluebird"),l=e(211),h=e(30),p=e(698),m=e(129),f=e(522),g=e("underscore"),y=e(519),w=e(48),b=e(101),v=e(76),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.viewTitleKey="stickers",t.prototype.className="board-menu-content-frame",t.prototype.initialize=function(){return v(o.isLoggedIn(),"Can't show the StickerPickerView when not logged in!"),this.me=o.me(),u.loadMemberCustomStickers(this.me.id).done(),this.listenTo(this.me.customStickerList,"change add remove reset",this.renderCustomStickers)},t.prototype.events={"change .js-upload-image":"setUploadImage",'click a[href="/business-class"]':function(){return w("Board Menu","Open Business Class Promo - via Sticker Picker")}},t.prototype.render=function(){return this.$el.html(y.fill("sticker_select")),this.renderStandardStickers(),this.renderPremiumStickers(),this.renderCustomStickers(),this.defer(function(){return a.refreshDraggableStickers()}),this},t.prototype._getStickers=function(e){var t;return t=h[e].premium,h[e].stickers.map(function(e){return new l(g.extend({premium:t},e),{modelCache:this.modelCache})})},t.prototype._loadStickers=function(e){var t,n,i;return i="sticker-list-loading",e.addClass(i),n=e.find(".sticker-select-image").get(),t=n.map(function(e){var t;return t=r(e),new c(function(e){return t.load(e),t.error(e)})}),c.all(t).then(function(){return e.removeClass(i)}).done()},t.prototype.renderStandardStickers=function(){var e,t;return e=this.$(".js-standard-sticker-list"),t=this._getStickers("standard").map(function(e){return function(t){return e.subview(p,t)}}(this)),this.appendSubviews(t,e),this._loadStickers(e),this},t.prototype.renderPremiumStickers=function(){var e,t,n,i,o,s,a,u,c;o=null!=(u=this.model.getOrganization())?u:null,e=this.$(".js-premium-stickers"),i=this.me.isFeatureEnabled("additionalStickers")||(null!=o?o.isFeatureEnabled("additionalStickers"):void 0);for(s in h)a=h[s].premium,a&&(t=r(y.fill("sticker_pack_selection_list",{displayName:b(["sticker packs",s])})),n=t.filter(".js-sticker-list"),c=this._getStickers(s).map(function(e){return function(t){return e.subview(p,t,{org:o})}}(this)),this.appendSubviews(c,n),this._loadStickers(n),e.append(t),i||n.append(y.fill("product_promo_button")));return this},t.prototype.renderCustomStickers=function(){var e,t,n,r,i;return n=null!=(r=this.model.getOrganization())?r:null,e=this.$(".js-custom-sticker-list"),e.children().detach(),t=this.me.isFeatureEnabled("customStickers")||(null!=n?n.isFeatureEnabled("customStickers"):void 0),t?(i=this.me.customStickerList.map(function(e){return function(t){return e.subview(s,t,{org:n})}}(this)),this.appendSubviews(i,e)):e.append(y.fill("product_promo_button")),e.append(y.fill("sticker_select_item_upload",{id:this.me.id})),this.defer(function(){return a.refreshDraggableStickers()}),this},t.prototype.setUploadImage=function(e){var t,n;return m.stop(e),t=this.$(".js-upload-image"),null==t.prop("files")&&t.val()?void m.uploadFile(o.myToken(),t,function(){}):(n=t[0].files,void(n.length>0&&this.uploadStickers(n)))},t.prototype.uploadStickers=function(e){g.each(e,function(e){return function(t){var n,r,s;return s=new FileReader,n={file:t},m.validFileSize(t)?(r=new FormData,r.append("token",o.myToken()),r.append("file",t),s.onload=function(t){var n;return n=t.target.result,e.me.customStickerList.create({url:n},{data:r,processData:!1,contentType:!1,error:function(t){return t.set("error","Failed"),e.setTimeout(function(){return t.destroy()},5e3)}})},s.readAsDataURL(t)):void i.flash("file too large","error")}}(this))},t}(f)},{}],374:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),o=e(542),s=e(129),a=e(522),u=e("underscore"),c=e(519),l=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="add list",t.prototype.events={"change .js-select-list-pos":"renderValue","click .js-add-list":"addList","submit form":"addList","click .js-cancel":"cancel"},t.prototype.initialize=function(e){return this.didAddList=e.didAddList,t.__super__.initialize.apply(this,arguments)},t.prototype.getLists=function(){return this.lists=this.model.listList,this.listsLength=this.lists.length+1},t.prototype.render=function(){var e;return e=this,this.$el.html(c.fill("popover_add_list")),this.setTimeout(function(e){return function(){return e.getClosestListPos(),e.getLists(),e.updateListList()}}(this),10),this},t.prototype.getClosestListPos=function(){var e,t,n;return t=r(".js-list"),n=[],this.closestListIdx=0,t.each(function(e){return function(i){var o;return o=parseInt(Math.abs(r(t[i]).offset().left+r(t[i]).width()/2-e.$el.offset().left),10),n.push(o)}}(this)),this.closestListIdx=u.indexOf(n,u.min(n)),e=r(t[this.closestListIdx]),e.length>0&&this.$el.offset().left>e.offset().left+e.width()/2&&this.closestListIdx<t.length?this.closestListIdx+=1:void 0},t.prototype.updateListList=function(){var e,t,n,i,o,s,a;for(a=this,e=r(a.el),n=e.find(".js-select-list-pos"),i=o=0,s=this.listsLength;s>=0?s>o:o>s;i=s>=0?++o:--o)r("<option>").val(i).text(i+1).appendTo(n);return t=n.find("option:last"),t=n.find("option:eq("+this.closestListIdx+")"),t.attr("selected","selected"),this.renderValue()},t.prototype.renderValue=function(){var e;e=parseInt(this.$(".js-select-list-pos").val(),10)+1,r(".js-pos-value").text(e.toString())},t.prototype.addList=function(e){var t,n,r,i,a;return s.stop(e),i=this.$(".js-list-name").val().trim(),""===i?void this.$(".js-list-name").focus().select():(t=this.$(".js-select-list-pos"),a=parseInt(t.find("option:selected").val(),10),r=a===this.listsLength-1?!1:!0,n="List"===i?!1:!0,o.hide(),void this.model.listList.create({name:i,pos:this.model.calcPos(a),closed:!1},{success:function(e){return function(t){return n&&r?l("Board","Add List","Successfully Add List - Changed Name, Changed Position"):n?l("Board","Add List","Successfully Add List - Changed Name, Default Position"):r?l("Board","Add List","Successfully Add List - Default Name, Changed Position"):l("Board","Add List","Successfully Add List - Default Name, Default Position"),e.didAddList(t)}}(this)}))},t.prototype.cancel=function(e){s.stop(e),o.hide(),l("Board Menu","Add List Menu","Click Cancel Button")},t}(a)},{}],375:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;s=e(534),a=e(80),l=e(129),c=e("bluebird"),m=e(517)("board_clean_up"),g=e(48),d=e(522),p=e("underscore"),f=m.renderable(function(e){var t,n,r,i,o;return t=e.ageCategories,o=e.lists,n=!p.isEmpty(o),r=!p.isEmpty(t),i=function(e){return m.div(".board-clean-up-cards",function(){var t,n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(m.a(".list-card.board-clean-up-card",{href:t.get("url")},function(){return m.text(t.get("name"))}));return i})},m.div(".window-header.u-clearfix",function(){return m.span(".window-header-icon.icon-lg.icon-board"),m.div(".window-title",function(){return m.h2(".window-title-text",function(){return m.format("board-clean-up")})})}),m.div(".window-main-col.window-main-col-full",function(){return n&&(m.p(".board-clean-up-explanation",function(){return m.format("it-looks-like-you-have-some-lists-that-havent-been-updated-recently")}),m.table(".board-clean-up-table",function(){return m.tbody(function(){var e,t,n,r,s,u,c,l,d;for(m.tr(function(){return m.th(function(){return m.format("list")}),m.th(function(){return m.format("cards")}),m.th(function(){return m.format("last-updated")}),m.th(function(){})}),d=[],n=0,u=o.length;u>n;n++)l=o[n],r=l.id,c=l.listName,t=l.cards,e=l.cardCount,s=l.lastModified,m.tr(".board-clean-up-top",function(){return m.td(function(){return m.text(c)}),m.td(function(){return m.text(e)}),m.td(function(){return m.text(a.toDateString(s))}),m.td(".board-clean-up-button-cell",function(){return m.button(".board-clean-up-button.js-archive-list",{"data-list":r},function(){return m.format("archive-list")})})}),d.push(m.tr(".board-clean-up-bottom",function(){return m.td({colspan:4},function(){return i(t)})}));return d})})),r&&(m.p(".board-clean-up-explanation",function(){return n?m.format("you-can-also-clean-things-up-by-archiving-cards-that-havent-been-updated-in-a-while"):m.format("you-can-clean-things-up-by-archiving-cards-that-havent-been-updated-in-a-while")}),m.table(".board-clean-up-table",function(){return m.tbody(function(){var e,n,r;m.tr(function(){return m.th(function(){return m.format("cards-updated")}),m.th(function(){return m.format("cards")}),m.th(function(){})}),r=[];for(n in t)e=t[n],m.tr(".board-clean-up-top",function(){return m.td(function(){return m.format(["more-than",n])}),m.td(function(){return m.text(e.length)}),m.td(".board-clean-up-button-cell",function(){return m.button(".board-clean-up-button.js-archive-category",{"data-category":n},function(){return m.format("archive-cards")})})}),r.push(m.tr(".board-clean-up-bottom",function(){return m.td({colspan:3},function(){return i(e)})}));return r})})),n||r?void 0:m.p(".board-clean-up-explanation",function(){return m.format("it-doesnt-look-like-there-are-any-old-cards-to-clean-up")})})}),h=m.renderable(function(e){var t,n;return t=e.count,n=e.total,m.div(".window-header.u-clearfix",function(){return m.span(".window-header-icon.icon-lg.icon-board"),m.div(".window-title",function(){return m.h2(".window-title-text",function(){return m.format("board-clean-up")})})}),m.div(".window-main-col.window-main-col-full",function(){return m.div(".board-clean-up-progress",function(){return m.format("archiving",{count:t,total:n})})})}),i={week:{age:l.getMs({days:7})},month:{age:l.getMs({days:30})},threeMonths:{age:l.getMs({days:90})}},u=1e3,o=5,t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.initialize=function(){this.progress=null,this.aborted=!1,this.makeDebouncedMethods("render"),this.listenTo(this.model.listList,"add remove reset change:closed change:idBoard",this.renderDebounced),this.listenForCards()},t.prototype.events={"click .js-archive-category":"archiveCategory","click .js-archive-list":"archiveList"},t.prototype.listenForCards=function(){return this.listenTo(this.modelCache,"add:Card remove:Card change:Card:closed change:Card:idList",this.renderDebounced)},t.prototype.stopListeningForCards=function(){return this.stopListening(this.modelCache)},t.prototype._ageCategories=function(){var e;return e=this.modelCache.find("Card",function(e){return function(t){return t.get("idBoard")===e.model.id&&t.isVisible()}}(this)),p.chain(i).pairs().map(function(t){var n,r,i,o;return i=t[0],o=t[1],n=o.age,r=e.filter(function(e){return Date.now()-a.parse(e.get("dateLastActivity"))>n}),[i,r]}).filter(function(e){var t,n;return n=e[0],t=e[1],t.length>0}).object().value()},t.prototype.render=function(){var e;return null!=this.progress?(this.$el.html(h(this.progress)),this):(e=this.model.listList.chain().filter(function(e){return e.isOpen()}).map(function(e){var t,n;return n=e.openCards().models,t=p.chain(n).sortBy(function(e){return e.get("dateLastActivity")}).reverse().first().value(),{id:e.id,listName:e.get("name"),cardCount:n.length,cards:n,lastModified:null!=t?t.get("dateLastActivity"):void 0}}).filter(function(e){return null!=e.lastModified&&a.parse(e.lastModified)<Date.now()-l.getMs({days:30})}).sortBy(function(e){return-e.cardCount}).first(5).value(),this.$el.html(f({ageCategories:this._ageCategories(),lists:e})),this)},t.prototype.archiveCategory=function(e){var t,n;return l.stop(e),n=this.$(e.currentTarget).attr("data-category"),t=this._ageCategories()[n],null!=t?s.toggle("archive cards",{elem:e.target,model:this.model,fxConfirm:function(e){return function(r){return g("Board Clean-Up","Archive By Age",n,t.length),e.stopListeningForCards(),e.progress={count:0,total:t.length},e.render(),e.aborted=!1,c.map(t,function(t){var n;if(!e.aborted)return n=Date.now(),c.fromNode(function(e){return t.close(e)}).then(function(){var e,t;return e=Date.now()-n,t=u-e,t>0?c.delay(t):void 0}).then(function(){return e.progress.count++,e.render()})},{concurrency:o}).catch(function(){}).then(function(){return e.progress=null,e.listenForCards(),e.render()}).done()}}(this)}):void 0},t.prototype.archiveList=function(e){var t,n;return l.stop(e),t=this.$(e.currentTarget).attr("data-list"),n=this.model.listList.get(t),g("Board Clean-Up","Archive List",void 0,n.openCards().models.length),n.close()},t.prototype.abort=function(){return this.aborted=!0,this.progress?g("Board Clean-Up","Abort Archive By Age",void 0,this.progress.total-this.progress.count):void 0},t}(d)},{}],376:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(496),s=e(103),a=e(129),u=e(519),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:name change:desc",this.renderDebounced)},t.prototype.events={"click .js-edit-desc":"editDesc"},t.prototype.render=function(){var e,t,n;return t=this.model.get("desc"),n=this.model.get("descData"),e={hasDesc:!!t},this.$el.html(u.fillFromModel("board_desc",this.model,e)),e.hasDesc&&r(this.el).find(".board-description>div.current").html(s.markdownAsHtml(t,{textData:n})),this},t.prototype.editDesc=function(e){a.stop(e),this.edit("desc")},t}(o)},{}],377:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;i=e(352),o=e(542),s=e(129),a=e(522),u=e(519),c=e(48),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.getViewTitle=function(){return this.model.getOrganization().get("displayName")},t.prototype.events={"click .js-change-org":"openChangeOrg","click .js-view-org":"viewOrg"},t.prototype.render=function(){var e,t;return t=this.model.getOrganization(),e=t.toJSON(),e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),(null!=t?t.owned():void 0)&&!this.model.owned()&&(e.setOrgNull=!0),this.$el.html(u.fill("popover_board_header_org_menu",e)),this},t.prototype.openChangeOrg=function(e){var t,n;s.stop(e),this.model.owned()?(o.pushView({view:i,options:{model:this.model,modelCache:this.modelCache}}),c("Board Header","Change Org from Board Header Org Menu")):(t=this.model.get("idOrganization"),null!=(n=this.modelCache.get("Organization",t))&&n.boardList.remove(this.model),this.model.update("idOrganization",""),o.hide(),c("Board Header","Remove Org from Board Header Org Menu"))},t.prototype.viewOrg=function(){return c("Board Header","View Org From Board Header Org Menu")},t}(a)},{}],378:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N,V,$,R,z,U,F,q,H,K,W,G,J,Q,Y,X,Z,ee,te=function(e,t){function n(){this.constructor=e}for(var r in t)ne.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},ne={}.hasOwnProperty;r=e("jquery"),i=e(374),o=e(33),s=e(14),a=e(375),u=e(376),c=e(490),l=e(377),d=e(355),p=e(615),f=e(395),g=e(162),v=e(416),b=e(421),y=e(365),w=e(534),_=e(6),k=e(536),C=e(537),x=e(86),j=e(34),S=e(20),T=e(272),M=e(539),B=e(22),O=e(549),P=e(552),E=e(577),L=e(38),A=e(222),D=e(677),I=e(542),N=e(370),V=e(114),$=e(520),R=e(129),z=e(522),U=e(151),F=e("underscore"),q=e(722),K=e(101),W=e(45),G=e(132),Y=e(519),H=e(724),J=e(725),Q=e(510),X=e(48),Z=e(53),ee=e(726),m=500,t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return te(t,e),t.prototype.className="board-wrapper",t.prototype.events={sortcommit:"sortCommit","click .js-rename-board":"renameBoard","click .js-open-org-menu":"openOrgMenu","click .js-change-vis":"changeVis","click .js-open-desc":"openDesc","click .js-close-calendar":"toggleCalendar","click .js-calendar":"toggleCalendar","click .js-collection":"toggleOpenCollections","click .js-filter-cards-indicator":"openFilter","click .js-filter-card-clear":"clearFilters","click .js-board-header-subscribed":"openUnsubscribe","click .js-star-board":"toggleStarred","click .js-show-sidebar":"setSidebarShow","click .js-dismiss-warning":function(e){return V.set(this.$(e.currentTarget).attr("data-dismiss"),Date.now()),this.renderBoardWarnings()},"dblclick #board":"dblClickAddListMenu","click .js-reopen":"reopen","click .js-delete":"delete","click .js-clean-up":"showCleanUp",shortcut:"shortcut","prevent-scroll-selection":"preventScrollSelection"},t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.sidebarView=this.subview(d,this.model),this.makeDebouncedMethods("refreshOrganization","render","renderBoardBackground","renderBoardHeader","renderBoardHeaderCalendar","renderBoardHeaderDescription","renderBoardHeaderSubscribed","renderBoardWarnings","renderLists","renderPermissionLevel","updateControllerTitle"),this.listenTo(this.model,{"change:closed deleting":this.renderDebounced,"change:desc":this.renderBoardHeaderDescriptionDebounced,"change:idOrganization":this.refreshOrganizationDebounced,"change:memberships":this.renderPermissionLevelDebounced,"change:name":function(e){return function(){return e.renderBoardHeaderDebounced(),e.updateControllerTitleDebounced()}}(this),"change:powerUps":function(){return this.renderBoardHeaderCalendarDebounced(),this.model.isPowerUpEnabled("calendar")?void 0:this.closeCalendar()},"change:prefs.cardCovers":this.renderListsDebounced,"change:prefs.permissionLevel":function(e){return function(){return e.renderListsDebounced(),e.renderPermissionLevelDebounced()}}(this),"change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness":function(e){return function(){return e.renderBoardBackgroundDebounced(!0)}}(this),"change:subscribed":this.renderBoardHeaderSubscribedDebounced,permChange:this.permChange,ownedChange:this.renderBoardHeaderDebounced,destroy:function(e){return function(){return _.displayErrorPage({errorType:"boardNotFound"})}}(this)}),this.listenTo(this.modelCache,["add:Card","remove:Card","change:Card:closed","change:Card:idBoard","add:List","remove:List","change:List:closed","change:List:idBoard"].join(" "),this.renderBoardWarningsDebounced),this.subscribe(Q(this.model),function(e){return function(){return e.renderBoardHeaderCalendarDebounced(),e.model.isPowerUpEnabled("calendar")?void 0:e.closeCalendar()}}(this)),this.listenTo(this.model.viewState,{"change:showSidebar":this.renderSidebarState,"change:sidebarDisplayType":this.renderSidebarDisplayType}),this.listenTo(o.me().boardStarList,"add remove reset",function(e){return function(){return e.renderBoardHeaderStarred()}}(this)),this.memberTypeMe=this.model.getMemberType(o.me()),this.refreshOrganization(),this.listScrollLeft=null,this.savingScroll=!1,this.calcState={},this.listenTo(this.model.filter,"change",this.renderFilteringStatus),$.addHandler(this,{scope:"board"}),this.listListView=this.collectionSubview(O,this.model.listList,{id:"board",model:this.model,className:"u-fancy-scrollbar js-no-higher-edits",resetCallback:function(e){return function(){return e.postListListRender()}}(this)}),this.listenTo(this.listListView,{mouseMoveListView:function(e){var t;return t=e.model,this.model.viewState.selectList(e.model)},mouseLeaveListView:function(e){var t;return t=e.model,this.model.viewState.selectList(null)},mouseMoveCardView:function(e,t){return this.ignoreMouseCardSelects||I.isVisible||C.sorting?void 0:this.model.viewState.selectCard(t.model)},mouseLeaveCardView:function(e,t){return this.ignoreMouseCardSelects||I.isVisible||C.sorting?void 0:this.model.viewState.selectCard(null)},moveCard:this.moveCardRequested,copyCard:this.copyCardRequested}),this._applySettings()},t.prototype._applySettings=function(){var e,t,n;if(null!=this.options.settings){switch(n=this.options.settings,t=n.menu,e=n.filter,t){case"closed":this.model.viewState.setShowSidebar(!1);break;case"filter":case"activity":this.setSidebarShow(),this.sidebarView.pushView(t);break;case"power-ups":this.model.editable()&&(this.setSidebarShow(),this.openPowerUps())}return e?this.model.filter.fromQueryString(e):void 0}},t.prototype.permChange=function(e){"none"===e?_.memberBoardsView():(this.render(),this.model.editable()||this.model.composer.save("vis",!1))},t.prototype.shortcut=function(e){var t,n,i,s,a;switch(n=this.model.editable(),s=o.isLoggedIn(),e){case S.Q:if(s)return this.model.filter.toggleQuietMode(),"Q - My cards";break;case S.X:return this.model.filter.clear(),"X - Clear All Filters";case S.W:return this.toggleSidebar(),"W - Toggle Board Sidebar";case S.Semicolon:return T.toggleText(),X("Toggle Labels Text on Card Front",T.getShowText()?"Show":"Hide",this.model.id,"shortcut"),"; - Toggle Label Text";case S.ArrowDown:case S.J:return this.moveCard("down"),["Keyboard Nav","Down"];case S.ArrowUp:case S.K:return this.moveCard("up"),["Keyboard Nav","Up"];case S.ArrowRight:return this.moveCard("right"),["Keyboard Nav","Right"];case S.ArrowLeft:return this.moveCard("left"),["Keyboard Nav","Left"];case S.N:if(n&&(a=this.model.viewState.getList(),t=this.model.viewState.getCard(),null!=a))return i=null!=t?a.openCards().indexOf(t)+1:a.openCards().length,this.model.composer.save({list:a,index:i,vis:!0}),"N - Insert Card";break;case S.Escape:if(n)return C.sorting?C.abort():M.isEditing()||I.isVisible||k.isVisible||(this.model.composer.get("vis")?this.model.composer.save("vis",!1):this.model.viewState.get("listComposerOpen")?this.model.viewState.set("listComposerOpen",!1):this.sidebarView.popView()),_.showingCalendar(this)&&r(".calendar-day.active").removeClass("active"),!0}},t.prototype.openListComposer=function(){return this.model.viewState.openListComposer()},t.prototype.openCardComposerInFirstList=function(){return this.viewForList(this.model.listList.first()).openCardComposer()},t.prototype.scrollToList=function(e){R.scrollElementIntoView(this.$("#board")[0],this.viewForList(e).el,{horizontal:!0,animated:!0})},t.prototype.viewForList=function(e){return this.listListView.viewForModel(e)},t.prototype.scrollToCard=function(e){var t;return t=e.getList(),this.scrollToList(t),this.viewForList(t).scrollToCard(e)},t.prototype.preventScrollSelection=function(){var e,t;this.ignoreMouseCardSelects||(t=function(e){var t,n,r;return t=e.originalEvent,n=t.movementX,r=t.movementY,0!==n||0!==r},this.ignoreMouseCardSelects=!0,(e=function(n){return function(){return r(document).one("mousemove",function(r){t(r)?n.ignoreMouseCardSelects=!1:e()})}}(this))())},t.prototype.moveCard=function(e){var t,n,r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_;if(this.preventScrollSelection(),w=this.model.viewState.getCard(),null==w)return l=this.model.listList.find(function(e){return!e.openCards().isEmpty()}),void(null!=l&&l.selectFirstCardInList());if(_=w.getList(),g=_.openCards(),n=g.indexOf(w),i=function(e){return function(t,n,r,i){var o;if(o=t+n,e.model.filter.isFiltering)for(;o>=0&&r>o&&!i(o);)o+=n;return o}}(this),"up"===e||"down"===e){if(s="up"===e?-1:1,d=i(n,s,g.length,function(e){return function(t){return e.model.filter.satisfiesFilter(g.at(t))}}(this)),d>=0&&d<g.length)return t=g.at(d),this.scrollToCard(t),this.model.viewState.selectCard(t)}else if(("left"===e||"right"===e)&&(v=this.model.listList,u=v.indexOf(_),c="left"===e?-1:1,m=i(u,c,v.length,function(e){return function(t){return v.at(t).openCards().any(function(t){return e.model.filter.satisfiesFilter(t)})}}(this)),m>=0&&m<v.length)){for(h=v.at(m),f=h.openCards(),p=Math.min(n,f.length-1),b=[1,-1],y=[],o=0,a=b.length;a>o;o++){if(r=b[o],d=i(p-r,r,f.length,function(e){return function(t){return e.model.filter.satisfiesFilter(f.at(t))}}(this)),d>=0&&d<f.length){t=f.at(d),this.model.viewState.selectCard(t),this.scrollToCard(t);break}y.push(void 0)}return y}},t.prototype.renderClosed=function(){this.$el.html(q({name:this.model.get("name"),canReopen:this.model.owned(),canDelete:this.model.owned(),deleting:this.model.isDeleting()})),this.defaultBoardBackground()},t.prototype.renderOpen=function(){var e,t,n,i,s;for(e={},e.url=_.getBoardUrl(this.model),s=this.model.prefNames.concat(this.model.myPrefNames),t=0,n=s.length;n>t;t++)i=s[t],e[i+"_"+this.model.getPref(i)]=!0;e.canJoin=this.model.canJoin(),e.canInviteMembers=this.model.canInviteMembers(),e.confirmed=o.me().get("confirmed"),this.listListView.$el.detach(),this.$el.html(Y.fillFromModel("board",this.model)),this.renderBoardHeader(),this.renderBoardWarnings(),this.renderBoardBackground(),this.model.viewState.get("showSidebar")&&this.$el.addClass("is-show-menu"),this.appendSubview(this.sidebarView,this.$(".js-fill-board-menu")),this.renderSidebarState(),this.renderLists(),_.setLocation({title:e.name}),this.defer(function(e){return function(){return e.$("#board").unbind("mousedown.dragscrollable").dragscrollable({fxIgnore:function(e){var t,n,i,o;return t=r(e.target).closest("#board"),o=e.offsetY>t.height()-11,n=r(e.target).closest(".js-list-content").length>0,i=r(e.target).closest(".js-add-list").length>0,o||n||i}}),C.refreshListSortable()}}(this))},t.prototype.render=function(){return this.model.get("closed")?this.renderClosed():this.renderOpen(),this},t.prototype.renderFilteringStatus=function(){var e,t;return e=this.model.filter.isFiltering(),this.$(".js-filter-cards-indicator").toggleClass("hide",!e),this.$(".js-num-cards").toggleClass("hide",!e),this.$("#board").toggleClass("filtering",e),t=this.model.filter.toQueryString(),history.replaceState(null,null,location.pathname+t)},t.prototype.removeSidebarDisplayTypes=function(){this.$el.removeClass("sidebar-display-wide")},t.prototype.renderSidebarDisplayType=function(){var e;e=this.model.viewState.getSidebarDisplayType(),this.$el.addClass(e)},t.prototype.renderSidebarState=function(){this.renderSidebarDisplayType(),this.model.viewState.get("showSidebar")?this.showSidebar():this.hideSidebar()},t.prototype.toggleSidebar=function(){return this.model.viewState.setShowSidebar(!this.model.viewState.get("showSidebar"))},t.prototype.setSidebarShow=function(){
this.model.viewState.setShowSidebar(!0)},t.prototype.showSidebar=function(){this.renderSidebarDisplayType(),clearTimeout(this._sidebarHideTimeout),this.$(".js-fill-board-menu").removeClass("hide"),this.defer(function(e){return function(){return e.$el.addClass("is-show-menu")}}(this))},t.prototype.hideSidebar=function(){this.$el.removeClass("is-show-menu"),clearTimeout(this._sidebarHideTimeout),this._sidebarHideTimeout=this.setTimeout(function(e){return function(){return e.$(".js-fill-board-menu").addClass("hide")}}(this),250)},t.prototype.refreshOrganization=function(){var e,t,n,r,i,o;if(n=this.modelCache.get("Organization",this.model.previous("idOrganization")),r=this.model.getOrganization(),null!=n&&this.stopListening(n),null!=r)for(o=["name","logoHash","displayName"],e=0,t=o.length;t>e;e++)i=o[e],this.listenTo(r,"change:"+i,this.frameDebounce(this.renderBoardHeader));return this.renderBoardHeader()},t.prototype.renderBoardHeader=function(){var e,t,n,r;return n=this.model.isPremOrgAdmin(o.me()),t={name:this.model.get("name"),canRename:n||this.model.owned(),isLoggedIn:o.isLoggedIn()},r=this.model.getOrganization(),null!=r&&(t.orgDisplayName=r.get("displayName"),t.orgName=r.get("name"),e=r.get("logoHash"),e&&(t.orgLogoUrl=logoDomain+"/"+e+"/30.png",t.orgLogoUrl2x=logoDomain+"/"+e+"/170.png"),t.hasBusinessClass=r.isPremium()),this.$(".js-board-header").html(H(t)),this.renderPermissionLevel(),this.renderBoardHeaderDescription(),this.renderBoardHeaderCalendar(),this.renderBoardHeaderSubscribed(),this.renderBoardHeaderCollections(),this.renderFilteringStatus(),this.renderBoardHeaderStarred(),this.renderPluginButtons(),this},t.prototype.renderBoardWarnings=function(){var e,t,n,r,i;return t=this.modelCache.find("Card",function(e){return function(t){return t.get("idBoard")===e.model.id&&t.isVisible()}}(this)),e=this.$(".js-board-warnings"),i={tooManyCards:{test:function(e){return function(){return e.model.editable()&&t.length>m}}(this),key:"too-many-cards",minDismiss:R.dateBefore({months:6})}},n=function(e){return function(t){return"BoardWarning-"+t+"-"+e.model.id}}(this),r=F.chain(i).pairs().filter(function(e){var t,r,i,o,s;return i=e[0],o=e[1],s=o.test,r=o.minDismiss,s()?(t=V.get(n(i)),!t||r>t):void 0}).map(function(e){var t,r,i;return r=e[0],i=e[1],t=i.key,{name:r,key:t,dismiss:n(r)}}).first().value(),F.chain(i).pairs().filter(function(e){var t,r,i;return t=e[0],r=e[1],i=r.test,!i()&&null!=V.get(n(t))}).each(function(e){var t;return t=e[0],V.unset(n(t))}).value(),r?e.removeClass("hide").html(ee({canDismiss:V.enabled(),warning:r})):e.addClass("hide"),this},t.prototype.renderBoardHeaderCollections=function(){var e;return e=this.model.getOrganization(),e&&e.isFeatureEnabled("tags")&&this.$(".js-collection").toggleClass("hide",!1),this},t.prototype.toggleOpenCollections=function(e){return R.stop(e),this.sidebarView.pushView("collections",{resetTo:"more"}),X("Board Header","Collections Button","Toggle Collections Menu"),this},t.prototype.renderPluginButtons=function(){var e;return e=this.subview(D,this.model),this.appendSubview(e,this.$(".js-plugin-header-btns")),this},t.prototype.renderBoardHeaderStarred=function(){return this.$(".js-star-board").toggleClass("board-header-btn-enabled",this.model.isStarred()),this},t.prototype.toggleStarred=function(){var e;return e=o.me().boardStarList,null!=e.getBoardStar(this.model.id)?(e.unstarBoard(this.model.id),X("Board Header","Unstar Board")):(e.starBoard(this.model.id),X("Board Header","Star Board")),this},t.prototype.renderBoardHeaderCalendar=function(){var e;return e=this.model.isPowerUpEnabled("calendar"),this.$(".js-calendar").toggleClass("hide",!e),this},t.prototype.getAllBackgroundClasses=function(){return["body-custom-board-background","body-custom-board-background-tiled","body-light-board-background","body-dark-board-background","body-default-header"].join(" ")},t.prototype.defaultBoardBackground=function(){this.clearBoardBackground(),r("body").addClass("body-default-header")},t.prototype.clearBoardBackground=function(){var e,t;t=this.model.get("prefs"),e=this.getAllBackgroundClasses(),r("body").removeClass(e).css({"background-image":"","background-color":""})},t.prototype.renderBoardBackground=function(e){var t,n,i,o,a,u,c,l,d,p;return null==e&&(e=!1),this.clearBoardBackground(),o=this.model.get("prefs"),t=r("body"),null!=o.backgroundColor?(i=this.model.getClientBackgroundColor(o.background),t.css({"background-color":i}),x.setBackground({color:i})):(p=s.hasOwnProperty(o.background)&&null!=(a=null!=(u=R.smallestPreviewBiggerThan(o.backgroundImageScaled,640,480))?u.url:void 0)?a:o.backgroundImage,d=o.backgroundTile?p:null!=(c=null!=(l=R.smallestPreviewBiggerThan(o.backgroundImageScaled,64,64))?l.url:void 0)?c:o.backgroundImage,n=function(e){return function(){var e;switch(t.addClass("body-custom-board-background"),o.backgroundTile&&t.addClass("body-custom-board-background-tiled"),e=o.backgroundBrightness){case"light":t.addClass("body-light-board-background");break;case"dark":t.addClass("body-dark-board-background")}return t.css({"background-image":'url("'+p+'")'}),x.setBackground({url:d,tiled:o.backgroundTile})}}(this),e?R.waitForImageLoad(p,n):n())},t.prototype.renderBoardHeaderSubscribed=function(){var e;return e=this.model.get("subscribed"),this.$(".js-board-header-subscribed").toggleClass("hide",!e),this},t.prototype.renderBoardHeaderDescription=function(){var e,t,n;return e=this.$(".js-fill-desc"),(t=this.model.get("desc"))?(t?n=t:this.model.editable()&&(n=K("click to add a description")),e.attr("title",n),e.removeClass("hide"),this):(e.addClass("hide"),this)},t.prototype.renameBoard=function(e){R.stop(e),X("Board Header","Open Rename Board From Title"),I.toggle({elem:r(e.target).closest("a"),view:new N({model:this.model,modelCache:this.modelCache})})},t.prototype.openOrgMenu=function(e){R.stop(e),X("Board Header","Open Org Menu"),I.toggle({elem:r(e.target).closest("a"),view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.renderPermissionLevel=function(){var e,t,n;return e=this.$("#permission-level"),n={permIconClass:c.getPermLevelIconClassForBoard(this.model),permText:K(["board perms",this.model.getPermLevel(),"name"])},e.html(J(n)),e.attr("title",c.getPermLevelAltTextForBoard(this.model)),t=this.model.canInvite(o.me()),this.$(".js-manage-board-members").toggle(t),this},t.prototype.postListListRender=function(){return W("render","rendering inline composer and calculating list layout"),this.renderFilteringStatus(),C.refreshListCardSortable()},t.prototype.renderLists=function(){return this.listListView.$el.toggleClass("js-list-sortable",this.model.editable()),this.$(".board-canvas").append(this.listListView.el),this.listListView.render(),this},t.prototype.sortCommit=function(e,t){return t.item.trigger("movelist",t)},t.prototype.changeVis=function(e){R.stop(e),X("Board Header","Open Change Visibilty via Header"),I.toggle({elem:this.$(".js-change-vis"),view:y,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openDesc=function(e){R.stop(e),X("Board Header","Edit Description Button via Header"),k.show({view:new u({model:this.model,modelCache:this.modelCache}),maxWidth:500})},t.prototype.toggleCalendar=function(){return this.calendarView?this.navigateToBoardEvent():this.navigateToCalendarEvent()},t.prototype.navigateToCalendarEvent=function(){return X("Board Header","Open Calendar View via Header"),Z("board view","opens","Power-Up","","","board-button",B.calendar),this.navigateToCalendar()},t.prototype.navigateToCalendar=function(){var e;return e=_.getBoardUrl(this.model.id,"calendar"),_.navigate(e,{trigger:!0})},t.prototype.navigateToBoardEvent=function(){return X("Board Header","Close Calendar View via Header"),this.navigateToBoard()},t.prototype.navigateToBoard=function(){var e;return e=_.getBoardUrl(this.model.id),_.navigate(e,{trigger:!0})},t.prototype.isShowingCalendar=function(){return null!=this.calendarView},t.prototype.showMemberProfile=function(e){_.saveMemberBoardProfileLocation(e,this.model.id),k.show({view:new E({model:e,board:this.model,modelCache:this.modelCache}),maxWidth:500,hide:function(e){return function(){return _.setBoardLocation(e.model.id)}}(this)})},t.prototype.showCalendar=function(e){return this.model.isPowerUpEnabled("calendar")&&!this.isShowingCalendar()?(this.$(".calendar-btn").addClass("board-header-btn-enabled"),this.$("#board").addClass("hide"),this.calendarView=new f({model:this.model,modelCache:this.modelCache}),this.$(".board-canvas").append(this.calendarView.render(e).el),this.calendarView.addedToDOM()):void 0},t.prototype.closeDetailView=function(){k.hide(!0),this.closeCalendar(!1)},t.prototype.closeCalendar=function(e){null==e&&(e=!0),null!=this.calendarView&&(this.calendarView.remove(),this.calendarView=null,e&&this.navigateToBoard(),this.$(".calendar-btn").removeClass("board-header-btn-enabled"),this.$("#board").removeClass("hide"),this.$(".js-list-name-input").trigger("autosize.resize",!1))},t.prototype.openFilter=function(e){R.stop(e),X("Board Header","Open Filtering via Header"),this.sidebarView.pushView("filter")},t.prototype.openPowerUps=function(e){return this.sidebarView.pushView("powerUps")},t.prototype.clearFilters=function(e){R.stop(e),X("Board Header","Clear Filtering via Header"),this.model.filter.clear()},t.prototype.openUnsubscribe=function(e){R.stop(e),w.toggle("unsubscribe",{elem:r(e.target).closest(".js-board-header-subscribed")[0],model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return X("Board Header","Unsubscribe"),e.model.subscribe(!1)}}(this)})},t.prototype.dblClickAddListMenu=function(e){R.stop(e),!this.model.viewState.get("listComposerOpen")&&this.model.isMember(o.me())&&0===r(e.target).closest(".js-list-content").length&&(X("Board View","Open Add List Menu via Double Click"),I.show({clientx:e.clientX,clienty:e.clientY,view:new i({model:this.model,modelCache:this.modelCache,didAddList:function(e){return function(t){return e.scrollToList(t)}}(this)})}))},t.prototype.reopen=function(e){return R.stop(e),this.model.reopen()},t.prototype.delete=function(e){return R.stop(e),w.toggle("delete board",{elem:e.target,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.startDelete().then(function(){return X("Board","Delete","Via Closed Board")}).done()}}(this)})},t.prototype.updateControllerTitle=function(){return _.title(this.model.get("name"))},t.prototype._insertCardPosition=function(e){var t;return t=this.model.viewState.getCard(),null!=t?{idList:t.get("idList"),index:t.getIndexInList()}:{idList:e,index:this.model.listList.get(e).cardList.length}},t.prototype.moveCardRequested=function(e,t){var n,r,i,o,s,a;return a=t.shortLink,r=t.idList,o=this._insertCardPosition(r),r=o.idList,i=o.index,n=null!=(s=j.getId("Card",a))?s:a,g.load(n,A.cardMinimal,this.modelCache).then(function(e){return function(t){return t.moveToList(e.model.listList.get(r),i)}}(this)).done()},t.prototype.copyCardRequested=function(e,t){var n,r,i,o,s,a;return a=t.shortLink,r=t.idList,o=this._insertCardPosition(r),r=o.idList,i=o.index,n=null!=(s=j.getId("Card",a))?s:a,g.load(n,A.cardMinimal,this.modelCache).then(function(e){return function(t){return t.copyTo({idList:r,pos:e.model.listList.get(r).calcPos(i,t)})}}(this)).done()},t.prototype.showCleanUp=function(e){var t;R.stop(e),X("Board Header","Show Clean-Up"),t=new a({model:this.model,modelCache:this.modelCache}),k.show({view:t,maxWidth:800,hide:function(){return t.abort()}})},t}(z)},{}],379:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T=function(e,t){function n(){this.constructor=e}for(var r in t)M.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},M={}.hasOwnProperty,B=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),i=e(532),o=e(33),s=e(14),a=e(490),u=e(6),l=e(620),p=e(98),h=e(38),f=e(380),g=e(542),v=e("bluebird"),b=e(114),y=e(129),w=e(522),_=e("underscore"),j=e(519),S=e(48),x=e(101),k=e(737),C=e(85),d="idLastOrganization",m="none",t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return T(t,e),t.prototype.viewTitleKey=function(){return this.options.copyBoard?"copy board":"create board"},t.prototype.events={'change select[name="org-id"]':"changeOrg","click .js-helper-add-org":"helperAddOrg","submit form":"submit","click .js-submit":"submit","click .js-create-org":"newOrg","click .js-change-vis":"openChangeVis","click .js-select":"selectVis"},t.prototype.getOrganization=function(){switch(this.model.typeName){case"Organization":return this.model;case"Board":return this.model.getOrganization();case"Member":return null}},t.prototype.getDefaultIdOrganization=function(e){var t,n,r,i,o,s;if(0===e.length)return null;if(this.options.useLastOrganization){if(1===e.length)return e[0];if(r=b.get(d,null),r===m)return null;if(null!=r&&B.call(e,r)>=0)return r;for(i=null,t=0,o=e.length;o>t;t++)n=e[t],(null==i||n>i)&&(i=n);return i}return null!=(i=null!=(s=this.getOrganization())?s.id:void 0)?i:null},t.prototype.render=function(){var e,t,n,r,i,s,a;return r=o.me(),n=this.getDefaultIdOrganization(r.organizationList.pluck("id")),i=r.organizationList.map(function(e){return _.extend(e.toJSON(),{selectOrg:e.id===n})}),t=null!=n,e={orgs:i,hasOrg:t,canAddToOrgs:0!==i.length,isCopyBoard:this.options.copyBoard,willRemovePowerUps:this.options.copyBoard&&this.model.powerUpsCount()>r.getPowerUpsLimit()},s=Math.floor(13*Math.random()).toString(),e.placeholder=x(["board name placeholder",s]),this.options.term&&(e.name=this.options.term),e.pLevel="private",this.options.copyBoard&&this.model.owned()?e.pLevel=this.model.get("prefs").permissionLevel:t&&(e.pLevel="org"),(null!=(a=this.options)?a.newOrgBoard:void 0)&&(e.hideOrg=!0),this.$el.html(j.fill("board_new",e)),this.renderBoardVisChooser(),this},t.prototype.renderBoardVisChooser=function(e){var t,n;return t=this.$('select[name="org-id"]').val(),n={isNewBoard:!0,canChange:!0},this.disableSubmit(),v.try(function(e){return function(){var n,r;return n=function(e){return"<p>"+x(e)+"</p>"},e.$(".js-vis-display").html(n("checking visibility permissions")),t?(r=e.modelCache.get("Organization",t),null!=r&&null!=r.get("memberships")&&null!=r.get("products")&&(null!=r?r.isFeatureEnabled("restrictVis"):void 0)?r:h.loadOrganizationMinimal(t)):void 0}}(this)).then(function(t){return function(r){var i;return null!=r&&(t.canChangeOrg(r,e)||(e=null),_.extend(n,{hasOrg:!0,orgName:r.get("displayName"),hasSuperAdmins:r.isFeatureEnabled("superAdmins"),privateRestricted:!t.canChangeOrg(r,"private"),orgRestricted:!t.canChangeOrg(r,"org"),publicRestricted:!t.canChangeOrg(r,"public")})),i=null!=r&&t.canChangeOrg(r,"org")?t.options.copyBoard&&t.model.isPrivate()?"private":"org":"private",n.current=null!=e?e:i,{org:r,visData:n}}}(this)).then(function(e){return function(t){var n,r,i,o;return i=t.org,o=t.visData,r=o.current,e.setPermissionLevel(r),e.$(".js-vis-chooser").html(k(o)),e.$(".js-vis-display").html(j.fill("board_new_vis",{visIconClass:a.getPermLevelIconClass(r),visDisplayText:x(["board perms",r,"name"])})),null!=i&&o.privateRestricted&&o.orgRestricted&&o.publicRestricted?(n=e.$(".js-no-valid-org-privs"),i.owned()?n.html(x("board create restriction admin",{urlSettings:"/"+i.get("name")+"/account"})):n.html(x("board create restriction not admin")),n.removeClass("hide"),e.$(".js-vis-chooser,.js-vis-display").addClass("hide")):e.enableSubmit()}}(this)).done(),this},t.prototype.enableSubmit=function(){return this.$(".js-submit").removeClass("disabled")},t.prototype.disableSubmit=function(){return this.$(".js-submit").addClass("disabled")},t.prototype.resetVisChooser=function(){this.$(".js-no-valid-org-privs").addClass("hide")},t.prototype.openChangeVis=function(e){y.stop(e),this.$(".js-vis-display").addClass("hide"),this.$(".js-vis-chooser").removeClass("hide")},t.prototype.selectVis=function(e){var t,n;y.stop(e),t=r(e.target).closest(".js-select"),t.hasClass("disabled")||(this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),n=t.attr("name"),this.renderBoardVisChooser(n),S("New Board","Change Visibility",n))},t.prototype.setPermissionLevel=function(e){return this.$('input[name="permissionLevel"]').val(e)},t.prototype.getPermissionLevel=function(){var e;return null!=(e=this.$('input[name="permissionLevel"]').val())?e:""},t.prototype.canChangeOrg=function(e,t){var n,r,i,s;return n=o.me(),(null!=e?e.isFeatureEnabled("restrictVis"):void 0)?(s=e.getMembershipFor(n).memberType,r=function(){switch(s){case"admin":return 2;case"normal":return 1}}(),i=function(){var n,r;switch(null!=(n=e.get("prefs"))&&null!=(r=n.boardVisibilityRestrict)?r[t]:void 0){case"none":return 3;case"admin":return 2;default:return 1}}(),r>=i):!0},t.prototype.changeOrg=function(e){return this.resetVisChooser(),this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),S("New Board","Change Org"),this.renderBoardVisChooser()},t.prototype.helperAddOrg=function(e){y.stop(e),g.pushView({view:new f({model:this.model,modelCache:this.modelCache})}),S("New Board","Open Add Org Helper")},t.prototype.defaultBackgroundColor=function(){var e,t,n;return p.is("en")&&(n=new Date,t=n.getMonth(),e=n.getDate(),2===t&&17===e)?"green":"blue"},t.prototype.submit=function(e){var t,n,r,s,a,c,l,p,h,f,v,w,k,x;return y.stop(e),this.$(".js-submit").hasClass("disabled")?void 0:(t=this.$('input[name="name"]'),p=t.val().trim(),""===p?void t.focus().select():(a=null!=(w=this.$('select[name="org-id"]').val())?w:"",b.set(d,a?a:m),c={name:p,idOrganization:a},v=this.$('input[name="permissionLevel"]').val(),this.options.copyBoard||(x=""!==a&&"private"!==v),n=this.defaultBackgroundColor(),f=_.filter(o.me().boardList.models,function(e){return e.owned()}),l=!this.options.copyBoard&&(0===f.length||1===f.length&&f[0].isWelcomeBoard()),r=C("suggestBoardTemplate").get("enabled"),s=l&&!r,k=_.extend({prefs_permissionLevel:v,prefs_selfJoin:x,defaultLists:s},c),this.options.copyBoard&&(k.idBoardSource=this.model.id,k.keepFromSource=this.$("input:checkbox:checked").map(function(){return this.name}).get().join()),this.options.copyBoard?S("New Board","Copy"):S("New Board","New"),h=o.me().boardList.create(c,{modelCache:this.modelCache,requestData:k,success:function(e){return function(t){var n,r;e.options.copyBoard&&i.hide("copying"),r=t.id,B.call(n=o.me().get("idBoards"),r)<0&&o.me().set("idBoards",n.concat(t.id)),u.displayBoard({idBoard:t.id,openListComposer:!e.options.copyBoard&&!s,openCardComposerInFirstList:s}).done()}}(this),error:function(){return i.flash("could not create board","error","create error")}}),this.options.copyBoard&&i.show("copying","info","copying"),g.hide()))},t.prototype.newOrg=function(e){y.stop(e),g.pushView({view:new l({model:this.model,modelCache:this.modelCache})}),S("New Board","Open Create Org")},t}(w)},{}],380:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(620),o=e(542),s=e(129),a=e(522),u=e(519),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="add an organization",t.prototype.events={"click .js-create-org":"newOrg"},t.prototype.render=function(){var e;return e=this,this.$el.html(u.fill("popover_helper_new_board_add_org")),this},t.prototype.newOrg=function(e){return s.stop(e),o.pushView({view:new r({model:this.model,modelCache:this.modelCache})})},t}(a)},{}],381:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(542),o=e(129),s=e(522),a=e(519),u=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="print and export",t.prototype.events={"click .js-print":"printModel","click .js-export-json":"exportJSON","click .js-export-csv":"exportCSV",'click a[href="/business-class"]':"businessClass"},t.prototype.render=function(){var e,t,n;return n=this,t=this.model.getOrganization(),e=this.model.toJSON(),e.hasCsvExport=!1,null!=t&&(null!=t?t.isFeatureEnabled("csvExport"):void 0)&&(e.hasCsvExport=!0,e.csvURL="/b/"+this.model.get("shortLink")+".csv"),(null!=t?t.isPremium():void 0)&&!(null!=t?t.isFeatureEnabled("csvExport"):void 0)&&(e.needsUpgradeForCsv=!0,e.upgradeUrl="/"+t.get("name")+"/billing"),e.jsonURL="/b/"+this.model.get("shortLink")+".json",this.$el.html(a.fill("popover_share",e)),this},t.prototype.printModel=function(e){o.stop(e),u("Board Menu","Print and Export Menu","Print"),r.hide(),this.defer(function(){return window.print()})},t.prototype.exportJSON=function(e){return u("Board Menu","Print and Export Menu","Export JSON")},t.prototype.exportCSV=function(e){return u("Board Menu","Print and Export Menu","Export CSV")},t.prototype.businessClass=function(e){return u("Board Menu","Print and Export Menu","Click Business Class Link")},t}(s)},{}],382:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(33),o=e(6),s=e(276),a=e(129),u=e(522),d=e(48),c=e(517)("board_list_item"),l=c.renderable(function(e){var t,n,r,i,o,s,a,u,l,d;return s=e.isLoggedIn,a=e.name,u=e.orgname,d=e.url,o=e.current,l=e.recent,r=e.backgroundImageThumbnail,n=e.backgroundColor,t=e.backgroundBrightness,i=e.backgroundTile,c.div(".compact-board-tile-wrapper",function(){var e,p;return p={},r&&(p["background-image"]=c.urlify(r)),n&&(p["background-color"]=n),c.span({class:c.classify({"mod-tiled":i,"compact-board-tile-background":!0}),style:c.stylify(p)}),c.span(".compact-board-tile-fade"),e={"js-open-board":!0,current:o,"compact-board-tile-link":!0},t&&(e[t]=!0),c.a({class:c.classify(e),href:d},function(){return c.span(".compact-board-tile-link-thumbnail",{style:c.stylify(p)}),c.span({class:c.classify({"compact-board-tile-link-text":!0,details:!0,"has-sub-name":u})},function(){return c.span(".compact-board-tile-link-text-name",{title:a},function(){return c.text(a)}),u?c.span(".compact-board-tile-link-text-sub-name",{title:u},function(){return c.text(u)}):void 0}),s?c.span({class:"compact-board-tile-link-options"},function(){return c.span(".compact-board-tile-link-options-unread.js-unread",{title:c.l("there-is-new-activity-on-this-board")}),l&&c.icon("close",{class:"js-remove-board compact-board-tile-link-options-remove",title:c.l("click-to-remove-this-board-from-your-recent-boards")}),c.icon("star",{class:"compact-board-tile-link-options-star js-star-board",title:c.l("click-to-star-this-board-it-will-show-up-at-top-of-your-boards-list")})}):void 0})})}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.tagName="li",t.prototype.className="compact-board-tile",t.prototype.initialize=function(){var e;return this.listenTo(this.model,"change:prefs change:name change:idOrganization",this.frameDebounce(this.render)),this.listenTo(r.me().boardStarList,"add remove reset",this.frameDebounce(this.renderStarred)),this.listenTo(this.model,"change:dateLastActivity change:dateLastView",this.frameDebounce(this.renderUnread)),(null!=(e=this.options)?e.showOrgName:void 0)?(this.listenTo(this.model,"change:idOrganization",function(e){return function(){var t;return t=e.modelCache.get("Organization",e.model.previous("idOrganization")),null!=t&&e.stopListening(t,"change:displayName"),e.listenToOrgNameChange(),e.render()}}(this)),this.listenToOrgNameChange()):void 0},t.prototype.listenToOrgNameChange=function(){return null!=this.model.getOrganization()?this.listenTo(this.model.getOrganization(),"change:displayName",this.render):void 0},t.prototype.events={"click .js-open-board":"openBoard","click .js-star-board":"starBoard","click .js-remove-board":"removeRecent",moveto:"moveTo"},t.prototype.render=function(){var e,t,n,i,s,u;return t=this.model.toJSON({prefs:!0}),t.url=o.getBoardUrl(this.model),this.model.getPref("backgroundTile")?(t.backgroundTile=!0,t.backgroundImageThumbnail=this.model.getPref("backgroundImage")):t.backgroundImageThumbnail=null!=(n=null!=(i=a.smallestPreviewBiggerThan(this.model.getPref("backgroundImageScaled"),400,200))?i.url:void 0)?n:this.model.getPref("backgroundImage"),null==t.backgroundImageThumbnail&&(t.backgroundColor=this.model.getClientBackgroundColor("blue")),null!=this.model.getPref("backgroundColor")&&(e=this.model.getPref("background"),t.backgroundColor=this.model.getClientBackgroundColor(e)),t.backgroundBrightness=this.model.getPref("backgroundBrightness"),(null!=(s=this.options)?s.showOrgName:void 0)&&(t.orgname=null!=(u=this.model.getOrganization())?u.get("displayName"):void 0),t.isLoggedIn=r.isLoggedIn(),t.recent=this.options.recent,this.$el.html(l(t)),this.renderStarred(),this.renderUnread(),this},t.prototype.trackBoardClick=function(){return d("Header","Boards Menu","Opened Board")},t.prototype.openBoard=function(e){return s.getPinSidebar()||e.metaKey||e.ctrlKey||s.hideSidebar(),this.trackBoardClick()},t.prototype.starBoard=function(e){var t,n;a.stop(e),n=this.model.id,t=r.me().boardStarList,null==t.getBoardStar(n)?t.starBoard(n):t.unstarBoard(n)},t.prototype.removeRecent=function(e){return a.stop(e),s.pullBoard(this.model.id)},t.prototype.renderUnread=function(){var e;return e=this.model.hasUnseenActivity()&&!o.onBoardView(this.model.id),this.$(".js-unread").toggleClass("any",e),this.$el.toggleClass("has-unread-activity",e),this},t.prototype.moveTo=function(e,t){var n,i;i=t.item.closest(".js-board-list").find("li"),n=i.index(t.item),r.me().boardStarList.updateStarBoard(this.model.id,n)},t.prototype.renderStarred=function(){return null!=r.me().boardStarList.getBoardStar(this.model.id)?(this.$el.addClass("starred"),this.$(".icon-star").addClass("icon-star-active")):(this.$el.removeClass("starred"),this.$(".icon-star").removeClass("icon-star-active")),this},t}(u)},{}],383:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;d=e("underscore"),r=e(33),o=e(385),s=e(387),a=e(388),u=e(389),c=e(392),l=e(38),p=e(744),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.organizationList,"add remove reset",this.frameDebounce(this.renderBoardsSections))},t.prototype.renderOnce=function(){return this.$el.html(p()),this.renderBoardsSections(),this},t.prototype.renderBoardsSections=function(){return this.renderStarredBoardsSection(),this.renderRecentBoardsSection(),this.renderAllBoardsSection(),this},t.prototype.renderAllBoardsSection=function(){var e,t,n,i,o,u,c,l;if(e=this.$(".js-all-boards"),n=function(){var e,n,r,i;for(r=this.model.boardList.models,i=[],e=0,n=r.length;n>e;e++)t=r[e],t.isOpen()&&i.push(t);return i}.call(this),0===n.length)u=function(e){return function(){return e.stopListening(r.me().boardList,"add reset",u),e.renderAllBoardsSection()}}(this),this.listenTo(r.me().boardList,"add reset",u);else for(this.appendSubview(this.subview(s,r.me(),{},"my-boards"),e),l=this.model.getSortedOrgs(),i=0,o=l.length;o>i;i++)c=l[i],this.appendSubview(this.subview(a,r.me(),{org:c},"group-"+c.id),e);return this},t.prototype.renderStarredBoardsSection=function(){return this.appendSubview(this.subview(c,r.me(),{},"starred-boards"),this.$(".js-starred-boards")),this},t.prototype.renderRecentBoardsSection=function(){return l.waitFor("boardsData",function(e){return function(){return e.appendSubview(e.subview(u,r.me(),{},"recent-boards"),e.$(".js-recent-boards"))}}(this)),this},t}(o)},{}],384:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(33),o=e(294),s=e(379),a=e(536),u=e(38),c=e(542),l=e(276),d=e(129),p=e(522),h=e(745),m=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){return this.listenTo(l,"change:pinBoardsListSidebar",function(){return this.updatePinned()})},t.prototype.events={"click .js-add-board":"addBoard","click .js-pin":"pinDrawer","click .js-unpin":"unpinDrawer","click .js-open-closed-boards":"openClosedBoards"},t.prototype.renderOnce=function(){return this.$el.html(h()),this.updatePinned(),this},t.prototype.addBoard=function(e){d.stop(e),m("Boards Drawer","Add Board"),c.toggle({elem:this.$(".js-add-board"),view:s,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.unpinDrawer=function(){return m("Boards Drawer","Unpin Drawer"),l.hidePinSidebar()},t.prototype.pinDrawer=function(){return m("Boards Drawer","Pin Drawer"),l.showPinSidebar()},t.prototype.updatePinned=function(){return this.$(".js-pin").toggleClass("hide",l.getPinSidebar()),this.$(".js-unpin").toggleClass("hide",!l.getPinSidebar())},t.prototype.openClosedBoards=function(e){d.stop(e),l.hideSidebar(),a.show({view:new o({model:r.me(),modelCache:this.modelCache})}),u.loadClosedBoards().done(),m("Boards Drawer","Open Closed Boards")},t}(p)},{}],385:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(97),s=e(542),a=e(129),u=e(522),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.events={"mouseenter .sidebar-boards-list li":"hoverItem","mouseleave .sidebar-boards-list":"deselectBoards"},t.prototype.hoverItem=function(e){var t;t=r(e.target).closest("li"),a.selectMenuItem(r(".sidebar-boards-list"),"li",t)},t.prototype.deselectBoards=function(e){var t;t=r(".sidebar-boards-list li").removeClass("selected")},t.prototype.arrowKeyEvent=function(e){var t;t=o.getKey(e),a.navMenuList(r(".sidebar-boards-list"),"li:visible",t)},t.prototype.enterKeyEvent=function(e){var t;t=r(".sidebar-boards-list li.selected:visible:first a"),t.length>0&&(t.click(),s.hide())},t}(u)},{}],386:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(382),i=e(385),s=e(276),a=e(129),u=e("underscore"),c=e(238),l=e(746),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.initialize=function(e){var t;return t=e.searchText,this.searchText=t.map(function(e){return e.toLowerCase().trim()}),this.subscribe(this.searchText,this.renderResults),this.makeDebouncedMethods("renderResults"),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.renderResultsDebounced),this.listenTo(s,"change:idRecentBoards",this.renderResultsDebounced),this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.renderResultsDebounced})},t.prototype.renderOnce=function(){return this.$el.html(l()),this.renderResults(),this},t.prototype.renderResults=function(){var e,t,n,i,o;for(e=this.$(".js-board-results"),e.empty(),o=this.getBoardsForTerm(this.searchText.get()),n=0,i=o.length;i>n;n++)t=o[n],this.appendSubview(this.subview(r,t,{showOrgName:!0}),e);return a.selectMenuItem(this.$(".sidebar-boards-list"),"li",this.$(".sidebar-boards-list li:first")),
this},t.prototype.getBoardsForTerm=function(e){var t,n,r;return n=this.model.boardStarList.getBoardIds(),t=s.getRecentBoards(),r=a.buildFuzzyMatcher(e),u.chain(this.model.boardList.models).union(this.model.boardStarList.getBoards()).union(this.modelCache.get("Board",t)).compact().filter(function(e){return r(e.get("name"))}).filter(function(e){return e.isOpen()}).value().sort(function(e,r){var i,o,s,a,u,c,l,d;return i=e.id,h.call(n,i)>=0&&(o=r.id,h.call(n,o)<0)?-1:(s=r.id,h.call(n,s)>=0&&(a=e.id,h.call(n,a)<0)?1:(u=e.id,h.call(t,u)>=0&&(c=r.id,h.call(t,c)<0)?-1:(l=r.id,h.call(t,l)>=0&&(d=e.id,h.call(t,d)<0)?1:e.get("name")<r.get("name")?-1:e.get("name")>r.get("name")?1:0)))}).slice(0,7)},t}(i)},{}],387:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(391),o=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards)},t.prototype.getBoards=function(){var e,t,n,r,i;for(r=this.model.boardList.models,i=[],t=0,n=r.length;n>t;t++)e=r[t],!e.isOrgBoard()&&e.isOpen()&&i.push(e);return i},t.prototype.sectionId=function(){return"my-boards"},t.prototype.doesTruncate=function(){return!0},t.prototype.getHeaderInfo=function(){return{title:this.getTitle(),iconClass:"board"}},t.prototype.getTitle=function(){return o("board section title.personal boards")},t}(i)},{}],388:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(391),o=e(6),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards),this.listenTo(this.getOrg(),"change:name change:displayName change:logoHash",this.render)},t.prototype.getOrg=function(){return this.options.org},t.prototype.sectionId=function(){return"org-"+this.getOrg().get("id")},t.prototype.doesTruncate=function(){return!0},t.prototype.getBoards=function(){var e,t,n,r,i,o;for(r=this.model.boardList.models,o=[],t=0,n=r.length;n>t;t++)e=r[t],(null!=(i=e.getOrganization())?i.id:void 0)===this.getOrg().id&&e.isOpen()&&o.push(e);return o},t.prototype.getHeaderInfo=function(){var e,t,n;return t={},n=this.getOrg(),null!=n&&(t=n.toJSON(),t.isOrg=!0,t.url=o.getOrganizationUrl(n.get("name")),e=n.get("logoHash"),e&&(t.orgLogoUrl=logoDomain+"/"+e+"/30.png")),t},t.prototype.postRenderBoardsEvent=function(){this.renderBCStatus()},t.prototype.renderBCStatus=function(){this.$(".js-has-business-class").toggleClass("hide",!this.getOrg().isPremium())},t.prototype.getTitle=function(){return this.getOrg().get("displayName")},t}(i)},{}],389:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;i=e(33),s=e(391),a=e(38),u=e(222),c=e("bluebird"),l=e(276),d=e("underscore"),p=e(101),h=e(132),r=e(216),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(l,"change:idRecentBoards",function(){return this.debouncedRenderBoards()}),this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.debouncedRenderBoards()}),this._idBoardsFetching=[]},t.prototype.sectionId=function(){return"recent-boards"},t.prototype.showOrgName=function(){return!0},t.prototype.isRecent=function(){return!0},t.prototype.getBoards=function(){var e;return e=i.me(),d.chain(l.getRecentBoards()).difference(this.model.boardStarList.getBoardIds()).tap(function(e){return function(t){return e.fetchUnknownBoards(t)}}(this)).map(function(e){return function(t){return e.modelCache.get("Board",t)}}(this)).compact().filter(function(t){return function(t){return t.isViewableBy(e)}}(this)).take(7).value()},t.prototype.fetchUnknownBoards=function(e){var t,n;return n=d.chain(e).difference(this._idBoardsFetching).reject(function(e){return function(t){return null!=e.modelCache.get("Board",t)}}(this)).value(),0!==n.length?(this._idBoardsFetching=this._idBoardsFetching.concat(n),t=n.map(function(e){return function(e){return a.loadBoardData(e,u.boardMinimal).catch(r.NotFound,r.Unauthorized,function(){return l.pullBoard(e)})}}(this)),c.all(t).then(function(e){return function(){e._idBoardsFetching=d.difference(e._idBoardsFetching,n),e.debouncedRenderBoards()}}(this)).done()):void 0},t.prototype.getHeaderInfo=function(){return{title:p("board section title.recent boards"),iconClass:"clock"}},t}(s)},{}],390:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;i=e(379),o=e(542),s=e(129),a=e(522),u=e(747),c=e(48),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.initialize=function(e){var t;return t=e.searchText,this.searchText=t.map(function(e){return e.trim()})},t.prototype.events={"click .js-add-board-with-name":"addBoardWithName"},t.prototype.renderOnce=function(){return this.$el.html(u()),this.subscribe(this.searchText,function(e){return this.$(".js-add-board-with-name").format("add board named",{boardName:e})}),this},t.prototype.addBoardWithName=function(e){var t;s.stop(e),c("Boards Drawer","Add Board - With Name"),t=this.searchText.get(),o.toggle({elem:this.$(".js-add-board-with-name"),view:i,options:{model:this.model,modelCache:this.modelCache,term:t}})},t}(a)},{}],391:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(382),o=e(276),a=e(522),u=e("underscore"),l=e(517)("boards_sidebar_section"),s=e(129),c=e(101),d=l.renderable(function(e){var t,n,r,i,o,s,a;return s=e.title,n=e.iconClass,a=e.url,r=e.isOrg,i=e.orgLogoUrl,t=e.displayName,o=e.sectionId,l.div(".sidebar-section-header.quiet.js-sidebar-section-header",function(){return null==r?s&&(n&&l.icon(n,{class:"sidebar-section-header-icon"}),l.span(".sidebar-section-header-title",function(){return l.text(s)})):l.a(".dark-hover",{href:a},function(){return i?l.img({class:"sidebar-section-header-icon",src:i,alt:t}):l.icon("organization",{class:"sidebar-section-header-icon"}),l.span(".sidebar-section-header-title.mod-clickable",function(){return l.text(t)}),l.icon("business-class",{class:"sidebar-section-header-bc-icon hide js-has-business-class"})}),o?(l.icon("remove",{class:"sidebar-section-header-toggle-icon dark-hover js-collapse-section hide"}),l.icon("add",{class:"sidebar-section-header-toggle-icon dark-hover js-expand-section hide"})):void 0}),l.div(".js-section-content",function(){return l.ul(".sidebar-boards-list.js-board-list"),l.div(function(){return l.a(".dark-hover.quiet-button.js-show-all-section-boards",{href:"#"})})})}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-collapse-section":"collapseSection","click .js-expand-section":"expandSection","click .js-show-all-section-boards":"showAllSectionBoards"},t.prototype.initialize=function(){return this.debouncedRenderBoards=this.debounce(this.renderBoards,10),this.debouncedPostRenderBoardsEvent=this.debounce(this.postRenderBoardsEvent,150),this.sectionId=this.sectionId(),this.initedSortable=!1,this.listenTo(o,"change:collapsedDrawerSections",function(){return this.renderCollapsed()}),this.listenTo(this.model.boardList,"add remove reset change:closed",this.debouncedRenderBoards),this.truncated=this.doesTruncate()},t.prototype.render=function(){var e;return e=this.getHeaderInfo(),e.sectionId=this.sectionId,this.$el.html(d(e)),this.renderBoards(),this.renderCollapsed(),this},t.prototype.getBoards=function(){return[]},t.prototype.getHeaderInfo=function(){return"Boards"},t.prototype.sectionId=function(){return null},t.prototype.showOrgName=function(){return!1},t.prototype.isRecent=function(){return!1},t.prototype.doesTruncate=function(){return!1},t.prototype.postRenderBoardsEvent=function(){},t.prototype.showAllSectionBoards=function(){this.truncated=!1,this.renderBoards()},t.prototype.collapseSection=function(e){return o.collapseSection(this.sectionId)},t.prototype.expandSection=function(e){return o.expandSection(this.sectionId)},t.prototype.renderCollapsed=function(){var e;e=o.isCollapsed(this.sectionId),this.$(".js-collapse-section").toggleClass("hide",e),this.$(".js-expand-section").toggleClass("hide",!e),this.$(".js-section-content").toggleClass("hide",e),this.$(".js-sidebar-section-header").toggleClass("bold",!e)},t.prototype.renderSubviews=function(e){var t,n,i;t=this.$(".js-board-list"),i=function(){var t,i,o;for(o=[],t=0,i=e.length;i>t;t++)n=e[t],o.push(this.subview(r,n,{showOrgName:this.showOrgName(),recent:this.isRecent()},"board-"+n.id));return o}.call(this),this.ensureSubviews(i,t)},t.prototype.renderBoards=function(){var e,t,n;return e=u.filter(this.getBoards(),function(e){return null!=e?e.isOpen():void 0}),e.length>0?(n=this.doesTruncate()?u.chain(e).sortBy(function(e){var t;return-new Date(null!=(t=e.get("dateLastActivity"))?t:s.idToDate(e.id))}).filter(function(e){return function(t,n){return!e.truncated||10>=n||!t.isLessActive()}}(this)).sortBy(function(e){return e.get("name").toLowerCase()}).value():e,t=e.length-n.length,this.$el.removeClass("hide"),this.renderSubviews(n),this.$(".js-show-all-section-boards").toggleClass("hide",0===t).text(c(["templates","boards_sidebar_section","show-less-active-boards-count"],{countString:t.toString()}))):this.$el.addClass("hide"),this.debouncedPostRenderBoardsEvent(),this},t}(a)},{}],392:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(391),o=e(79),s=e(537),a=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardStarList,"add remove reset change:pos",function(){return this.debouncedRenderBoards()})},t.prototype.getBoards=function(){return this.model.boardStarList.getBoards()},t.prototype.showOrgName=function(){return!0},t.prototype.sectionId=function(){return"starred-boards"},t.prototype.getHeaderInfo=function(){return{title:a("board section title.starred boards"),iconClass:"star"}},t.prototype.postRenderBoardsEvent=function(){var e;return o.isTouch()?void 0:(e=this.$(".js-board-list"),this.initedSortable?s.refreshIfInitialized(e):(this.initedSortable=!0,e.sortable({axis:"y",containment:"parent",delay:75,distance:7,forcePlaceholderSize:!0,items:"> li",placeholder:"placeholder",scroll:!0,helper:"clone",stop:function(e){return function(t,n){e.defer(function(){return n.item.trigger("moveto",n)})}}(this),tolerance:"pointer"})))},t}(r)},{}],393:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S=function(e,t){function n(){this.constructor=e}for(var r in t)T.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},T={}.hasOwnProperty;r=e("jquery"),i=e(33),s=e(384),o=e(383),a=e(386),u=e(390),l=e(6),d=e("hearsay"),p=e(97),h=e(20),m=e(38),f=e(107),g=e(222),v=e(542),b=e(276),y=e(520),w=e(129),_=e(522),k=e("underscore"),C=e(238),j=e(743),x=e(101),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.UNREAD_POLL_RATE_ACTIVE=w.getMs({minutes:5}),t.prototype.UNREAD_POLL_RATE_IDLE=w.getMs({minutes:60}),t.prototype.className=function(){return"boards-drawer"},t.prototype.initialize=function(){this.searchText=this.slot(""),this.isSearching=this.searchText.map(C.compose(C.not,k.isEmpty)).distinct(),Object.defineProperty(this,"$searchInput",{get:function(){return this.$(".js-search-boards")}}),this.listenTo(b,"change:showBoardsListSidebar",function(){return this.renderSidebarState(),this.ensureUnreadData(),b.getShowSidebar()||b.getPinSidebar()?this.defer(function(e){return function(){return e.focusInput()}}(this)):this.searchText.set("")}),this.listenTo(b,"change:pinBoardsListSidebar",function(){return this.renderSidebarState(),this.updatePinned(),this.updateHeight(),this.ensureUnreadData()}),y.addHandler(this,{scope:"header"}),this.ensureUnreadData(),this.filteredBoardsView=this.subview(a,this.model,{searchText:this.searchText}).render(),this.allBoardsView=this.subview(o,this.model).render(),this.activeBoardsSubview=d.if(this.isSearching,d.const(this.filteredBoardsView),d.const(this.allBoardsView)),this.searchingButtonsView=this.subview(u,this.model,{searchText:this.searchText}).render(),this.boardsButtonsView=this.subview(s,this.model).render(),this.activeButtonsSubview=d.if(this.isSearching,d.const(this.searchingButtonsView),d.const(this.boardsButtonsView)),this.subscribe(l.currentModel.distinct(),function(){return b.getPinSidebar()?void 0:b.hideSidebar()})},t.prototype.events={"keyup .js-search-boards":"keyEvent","input .js-search-boards":function(){return this.searchText.set(this.$searchInput.val())},shortcut:"shortcut"},t.prototype.renderOnce=function(){return this.$el.html(j()),this.renderSidebarState(),this.updatePinned(),r(window).bind(["resize",this.uniqueId()].join("."),this.debounce(function(e){return function(){return e.updateHeight()}}(this),300)),this.subscribeChanges(this.activeBoardsSubview,{out:function(e){return e.$el.detach()},in:function(e){return this.$(".js-board-drawer-boards").append(e.el)}}),this.subscribeChanges(this.activeButtonsSubview,{out:function(e){return e.$el.detach()},in:function(e){return this.$(".js-board-drawer-buttons").append(e.el)}}),this},t.prototype.remove=function(){return r(window).unbind(["resize",this.uniqueId()].join(".")),t.__super__.remove.apply(this,arguments)},t.prototype.ensureUnreadData=function(){var e;if(e=function(e){return function(){return"active"===f.getStatus()?e.UNREAD_POLL_RATE_ACTIVE:e.UNREAD_POLL_RATE_IDLE}}(this),null!=this._lastPoll&&Date.now()-this._lastPoll>1.5*e()&&(this.refreshUnreadData(),this._lastPoll=Date.now()),b.getShowSidebar()||b.getPinSidebar()){if(null==this._unreadTimeout)return this._unreadTimeout=this.setTimeout(function(e){return function(){return e.refreshUnreadData(),e._unreadTimeout=null,e._lastPoll=Date.now(),e.ensureUnreadData()}}(this),e())}else if(null!=this._unreadTimeout)return clearTimeout(this._unreadTimeout),this._unreadTimeout=null},t.prototype.shortcut=function(e){switch(e){case h.B:return b.getPinSidebar()?this.focusInput():b.getShowSidebar()?b.hideSidebar():b.showSidebar(),!0}},t.prototype.clearSearch=function(){this.$searchInput.val("")},t.prototype.focusInput=function(){return this.$searchInput.focus().select()},t.prototype.refreshUnreadData=function(){var e,t,n,r,o;for(m.loadMyBoardsUnreadData().done(),r=i.me(),o=b.getRecentBoards(),e=0,n=o.length;n>e;e++)t=o[e],r.boardList.get(t)||r.boardStarList.getBoardStar(t)||m.loadBoardData(t,g.boardUnread).done()},t.prototype.renderSidebarState=function(){return b.getShowSidebar()||b.getPinSidebar()?(this.$el.addClass("is-shown"),v.hide()):(this.$el.removeClass("is-shown"),this.clearSearch()),this},t.prototype.updateHeight=function(){var e;return e=b.getPinSidebar()?r(window).height()-50:r(window).height()-64,this.$(".board-drawer-content").css({"max-height":e})},t.prototype.updatePinned=function(){return this.$el.toggleClass("boards-drawer-pinned",b.getPinSidebar()),this.updateHeight()},t.prototype.keyEvent=function(e){var t;return t=p.getKey(e),t===h.ArrowUp||t===h.ArrowDown?(this.activeBoardsSubview.get().arrowKeyEvent(e),void this.focusInput()):void(t===h.Enter&&(this.activeBoardsSubview.get().enterKeyEvent(e),this.focusInput()))},t}(_)},{}],394:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(421),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.onCalendar=!0,t}(i)},{}],395:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty,b=[].slice;r=e("jquery"),i=e(405),s=e(398),a=e(268),u=e(401),c=e(80),l=e(542),d=e(129),p=e(522),h=e(151),f=e(519),m=e("moment"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.className="calendar-wrapper",t.prototype.events={"click .js-week-view":"switchToWeekViewFromMonth","click .js-month-view":"switchToMonthViewFromWeek","click .js-left-arrow":"navigatePrevious","click .js-right-arrow":"navigateNext","click .js-today":"navigateToday","click .js-open-card-composer":"openComposer"},t.prototype.initialize=function(){return this.monthView=this.subview(s,this.model),this.weekView=this.subview(u,this.model),this.localState=new a({id:"calendar"+this.model.id}),this.localState.fetch(),this.model.viewState.clearSelectedCard()},t.prototype.render=function(e){var t;return null==e&&(e=new Date),t=c.getDaysOfWeek(e).map(function(e){return m(e).format("ddd")}),this.$el.html(f.fill("calendar_toolbar",{days:t})),this.localState.getMode()===u.prototype.VIEWSTATE_PREF_STR?this.showView(this.weekView,e):this.showView(this.monthView,e),this},t.prototype.remove=function(){return this.stopSubscriptions(),this.model.viewState.clearSelectedCard(),t.__super__.remove.apply(this,arguments)},t.prototype.openComposer=function(e){var t,n,o;return d.stop(e),t=r(e.target).closest(".day-cell, .day-column"),o=new Date(parseInt(t.attr("name"))),n=new i({model:this.model.composer,modelCache:this.modelCache}),n.setDate(o),l.show({clientx:e.clientX,clienty:e.clientY,view:n})},t.prototype.showView=function(e,t){var n;return this.currentSubView=e,n=this.$(".calendar-header").removeClass("week-view month-view").addClass(this.currentSubView.HEADER_CLASS_NAME),this.$(".calendar-content").empty().append(this.currentSubView.render(t).el),this.model.viewState.clearSelectedCard(),this.localState.setMode(this.currentSubView.VIEWSTATE_PREF_STR),this.currentSubView.delegateEvents(),this.currentSubView.updateRoute()},t.prototype.switchToWeekViewFromMonth=function(){return this.showView(this.weekView,this.monthView.currentCenterWeek),this.addedToDOM()},t.prototype.switchToMonthViewFromWeek=function(){return this.showView(this.monthView,this.weekView.currentWeek),this.addedToDOM()},t.prototype.setSubscriptions=function(){this.stopSubscriptions(),this.currentSubView===this.monthView?this.monthView.setSubscriptions():(r(h).on("windowClassChange."+this.uniqueId(),function(e){return function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],e.weekSmallWindowResizeCheck.apply(e,t)}}(this)),this.weekView.setSubscriptions())},t.prototype.stopSubscriptions=function(){return this.weekView.stopSubscriptions(),this.monthView.stopSubscriptions(),r(h).off("."+this.uniqueId())},t.prototype.delegateEvents=function(){var e;return t.__super__.delegateEvents.apply(this,arguments),null!=(e=this.currentSubView)?e.delegateEvents():void 0},t.prototype.addedToDOM=function(){return this.setSubscriptions(),this.currentSubView.addedToDOM()},t.prototype.navigateToday=function(){return this.currentSubView.navigateToday()},t.prototype.navigatePrevious=function(){return this.currentSubView.navigatePrevious()},t.prototype.navigateNext=function(){return this.currentSubView.navigateNext()},t.prototype.weekSmallWindowResizeCheck=function(e,t){return h.fSmall&&this.currentSubView===this.weekView?this.switchToMonthViewFromWeek():void 0},t}(p)},{}],396:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),o=e(80),s=e(537),a=e(542),u=e(129),c=e(522),l=e("underscore"),h=e(519),p=e("moment"),d=e(99),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.events={sortreceive:"sortReceive",sortstop:"sortStop","click .js-expand-day:not(.active)":"expand","click .js-toggle-day":"clickToggleDay"},t.prototype.initialize=function(e){return this.data=e.data,this.getCardView=e.getCardView,this.$el.attr("name",o.getMidnightInt(this.data.day)),this.cardsDue=this.data.cardsDueOnDate},t.prototype.remove=function(){return delete this.getCardView,t.__super__.remove.apply(this,arguments)},t.prototype.render=function(e){var t,n,r;return null==e&&(e={}),t=this.data.day,n=o.isFirstOfMonth(t)||o.isLastOfMonth(t),r={date:p(t).format(n?"llll":"D"),isToday:p().isSame(t,"day")},l.extend(e,r),this.$el.html(h.fill("calendar_day",e,{editable:this.model.editable()})),this.renderCardsAndHeaders(),this},t.prototype.renderCardsAndHeaders=function(){return this.updateHeader(),this.renderCardsAndListHeaders()},t.prototype.cardListMap=function(){return l.groupBy(this.cardsDue,function(e){return e.getList().id})},t.prototype.updateHeader=function(){var e;return e=this.cardsDue.length,this.$(".day-cards-header").empty(),e>0?this.$(".day-cards-header").text(d("cards",e)):void 0},t.prototype.renderCardsAndListHeaders=function(){var e,t,n,i,o,a,u,c,l,d,p,m;e=this.$(".calendar-day-list"),e.empty(),a=[],m=this.cardListMap();for(p in m)if(f.call(m,p))for(o=m[p],u={listID:p,listName:this.model.getList(p).get("name")},c=h.fill("calendar_day_list_header",u),a.push(c),l=0,d=o.length;d>l;l++)t=o[l],n=this.getCardView(t),n.$el.hasClass("ui-sortable-helper")||(i=n.render().el,r(i).attr("name",t.cid),n.delegateEvents(),a.push(i));return e.append(a),this.model.editable()?s.refreshIfInitialized(this.$(".js-calendar-sortable")):void 0},t.prototype.sortReceive=function(e,t){var n;return n=function(e){var t;return t=document.elementFromPoint(e.left,e.top),r(".calendar-drag-area")[0].contains(t)},n(t.offset)?t.item.trigger("moveToCalendarDay",[t,this]):(s.abort(),s.refreshIfInitialized(this.$(".js-calendar-sortable")))},t.prototype.sortStop=function(e,t){return t.item.trigger("moveInCalendarDay",[t,this])},t.prototype.clickToggleDay=function(e){return this.$(".calendar-day").hasClass("active")?this.contract(e):this.expand(e)},t.prototype.expand=function(e){var t;return u.stop(e),s.sorting?void 0:(r(".calendar-day.active").removeClass("active"),t=this.$(".calendar-day").addClass("active"),a.hide())},t.prototype.contract=function(e){return u.stop(e),this.$(".calendar-day").removeClass("active"),a.hide()},t}(c)},{}],397:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(396),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.tagName="td",t.prototype.className="day-cell",t.prototype.initialize=function(e){return this.scrollIntoView=e.scrollIntoView,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return t.__super__.render.call(this,{monthView:!0})},t.prototype.expand=function(){var e;return t.__super__.expand.apply(this,arguments),e=this.$(".calendar-day"),this.scrollIntoView({top:this.$el.prop("offsetTop"),height:e.outerHeight()})},t}(r)},{}],398:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e("jquery"),i=e(397),s=e(399),a=e(6),u=e(80),c=e(537),l=e(542),d=e(129),p=e(151),h=e("underscore"),f=e(519),m=e("moment"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.className=d.extendParentClassName("calendar-month"),t.prototype.WEEK_WRAPPER_ELEMENT="tr",t.prototype.VIEWSTATE_PREF_STR="month",t.prototype.HEADER_CLASS_NAME="month-view",t.prototype.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS=5,t.prototype.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD=5,t.prototype.MINIMUM_WEEKS_KEPT_IN_DOM=20,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=i,this.today=new Date,this.currentMonthCells=[],this.scrollLock=!1,this.weeksKeptInDOM=this.MINIMUM_WEEKS_KEPT_IN_DOM,this.makeDebouncedMethods("shadeDaysUpdateHeader")},t.prototype.render=function(e){var t;return null==e&&(e=this.today),this.$el.html(f.fill("calendar_month")),this.renderBaseWeek(e),this.currentCenterWeek=e,this.currentMonth=u.getFirstOfMonth(e),t=Math.floor(this.weeksKeptInDOM/2),this.renderWeeks(t),this.renderWeeks(-1*t),this.shadeDays(),this.setSubscriptions(),this},t.prototype.getDayView=function(e,n){return t.__super__.getDayView.call(this,e,h.extend({scrollIntoView:this.scrollIntoView.bind(this)},n))},t.prototype.addedToDOM=function(){return t.__super__.addedToDOM.apply(this,arguments),this.calculateVariables(),this.windowResizeCheck(),this.updateHeader(),this.scrollToDay(this.currentCenterWeek)},t.prototype.updateRoute=function(){var e,t,n;return t=u.dateToObj(this.currentMonth),n=t.year,e=t.month,e=d.lpad(e,2,"0"),a.setBoardLocation(this.model.id,"calendar",[n,e],{replace:!0})},t.prototype.setSubscriptions=function(){return this.stopSubscriptions(),r(p).on("windowClassChange."+this.uniqueId(),this.windowClassChangeCheck.bind(this)),r(window).on("resize."+this.uniqueId(),function(e){return function(){return e.windowResizeCheck()}}(this)),r(".calendar-month").on("scroll."+this.uniqueId()+" ",function(e){return function(){return e.scrollCheck()}}(this))},t.prototype.stopSubscriptions=function(){return r(p).off("."+this.uniqueId()),r(window).off("."+this.uniqueId()),r(".calendar-month").off("."+this.uniqueId())},t.prototype.windowClassChangeCheck=function(e,t){var n;return p.fSmall?(r(".calendar-day.active").removeClass("active"),n=new Date(this.currentCenterWeek),this.calculateVariables(),this.windowResizeCheck(),this.scrollCheck(),this.scrollToDay(n)):void 0},t.prototype.calculateVariables=function(){var e;return this.tableSpacing=null!=(e=parseInt(this.$(".calendar-table").css("border-spacing")))?e:5,this.dayCellHeight=this.$(".day-cell").prop("clientHeight")+this.tableSpacing},t.prototype.windowResizeCheck=function(){var e,t,n,i,o;o=r(window).outerHeight(),n=r("#header").outerHeight(),e=r("#board-header").outerHeight(),t=r(".calendar-header").outerHeight(),this.calendarContentHeight=o-(n+e+t),i=Math.ceil(this.calendarContentHeight/this.dayCellHeight),this.weeksKeptInDOM=Math.max(5*i,this.MINIMUM_WEEKS_KEPT_IN_DOM)},t.prototype.updateHeader=function(){var e;return e=""+m(this.currentMonth).format("MMMM YYYY"),r(".js-calendar-header").text(e)},t.prototype.renderBaseWeek=function(e){var t;return t=this.weekRowEl(e),r(".calendar-month").off("."+this.uniqueId()),this.$(".calendar-table").append(t),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.renderWeeks=function(e){var t,n;return e>0&&(t=m(this.lastRenderedSaturday).add(e,"weeks").toDate(),this.renderUpToDay(t)),0>e?(n=m(this.firstRenderedWeek).add(e,"weeks").toDate(),this.renderUpToDay(n)):void 0},t.prototype.renderUpToDay=function(e){var t,n,r,i,o;for(t=this.$(".calendar-table"),n=u.getEndOfWeek(e),i=[];this.lastRenderedSaturday<n;)this.lastRenderedSaturday=m(this.lastRenderedSaturday).add(1,"weeks").toDate(),i.push(this.weekRowEl(this.lastRenderedSaturday));for(t.append(i),r=u.getStartOfWeek(e),o=[];this.firstRenderedWeek>r;)this.firstRenderedWeek=m(this.firstRenderedWeek).subtract(1,"weeks").toDate(),o.unshift(this.weekRowEl(this.firstRenderedWeek));return t.prepend(o),this.scroll(this.dayCellHeight*o.length),this.deleteExcessWeeks(),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.deleteExcessWeeks=function(){var e,t,n,i,o,s,a,u,c,l,d,p,h;if(e=r(".week"),e.length>this.weeksKeptInDOM){if(h=this.$(".calendar-table").outerHeight(),p=r(".calendar-month").prop("scrollTop"),i=h/2>p){for(l=[],n=o=a=e.length-1,u=this.weeksKeptInDOM;u>=a?u>=o:o>=u;n=u>=a?++o:--o)l.push(r(e[n]).remove());return l}for(t=e.length-this.weeksKeptInDOM,this.scroll(-1*this.dayCellHeight*t),d=[],n=s=0,c=t;c>=0?c>s:s>c;n=c>=0?++s:--s)d.push(r(e[n]).remove());return d}},t.prototype.scrollToDay=function(e,t){var n,r,i,o,s,a,c,l;return this.scrollLock?void 0:(o=this.calendarContentHeight/2/this.dayCellHeight,l=m(e).startOf("week"),i=l.clone().subtract(Math.ceil(o),"weeks").toDate(),s=l.clone().add(Math.ceil(o),"weeks").toDate(),this.firstRenderedWeek<=i&&this.lastRenderedWeek>=s?(c=l.clone().subtract(Math.floor(o),"weeks").toDate(),r=u.getMidnightInt(c),n=this.$("[name='"+r+"']"),a=n.prop("offsetTop"),this.scrollTo(a-this.tableSpacing+1,t)):(this.render(e),this.addedToDOM(),this.delegateEvents()),this.updateRoute())},t.prototype.completeAnimatedScroll=function(){return this.enableRenderNewDays()},t.prototype.scrollIntoView=function(e){var t,n,i,o,s,a;return a=e.top,i=e.height,n=a+i,t=r(".calendar-month"),s=t.scrollTop(),o=s+t.height(),s>a?this.scroll(a-s-this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):n>o?this.scroll(n-o+this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):void 0},t.prototype.scroll=function(e,t){var n,i;return n=r(".calendar-month"),i=n.prop("scrollTop"),this.scrollTo(i+e,t)},t.prototype.scrollTo=function(e,t){var n;return n=r(".calendar-month"),t?(this.scrollLock=!0,n.animate({scrollTop:e},{duration:t,complete:function(e){return function(){return e.completeAnimatedScroll()}}(this)})):n.scrollTop(e)},t.prototype.navigatePrevious=function(){return this.scrollMonth(-1)},t.prototype.navigateNext=function(){return this.scrollMonth(1)},t.prototype.scrollMonth=function(e){var t;return this.scrollLock?void 0:(t=m(this.currentMonth).add(e,"months").startOf("month").add(15,"days").toDate(),this.scrollToDay(t,this.SCROLL_ANIMATION_TIME))},t.prototype.enableRenderNewDays=function(){return this.checkRenderDays(),this.scrollLock=!1},t.prototype.scrollCheck=function(){var e,t,n,i,o,s,a,c,d,p,h,f;return l.hide(),e=r(".calendar-month"),n=e.outerHeight(),d=e.prop("scrollTop"),this.scrollLock||this.checkRenderDays(),i=n/2,f=Math.floor((d+i)/this.dayCellHeight),c=m(this.firstRenderedWeek).add(f,"weeks").toDate(),m(this.currentCenterWeek).isSame(c,"day")||(this.currentCenterWeek=c,o=u.getEndOfWeek(this.currentCenterWeek),(this.currentMonth.getMonth()!==this.currentCenterWeek.getMonth()||this.currentMonth.getMonth()!==o)&&(o.getMonth()===this.today.getMonth()?this.currentMonth=u.getFirstOfMonth(o):this.currentMonth=u.getFirstOfMonth(this.currentCenterWeek),this.shadeDaysUpdateHeaderDebounced()),this.updateRoute()),p=u.getMidnightInt(this.today),t=this.$("[name='"+p+"']"),h=t.prop("offsetTop"),s=h<(a=i+d)&&a<h+this.dayCellHeight,r(".today-button").toggleClass("on-today",s)},t.prototype.shadeDaysUpdateHeader=function(){return this.updateHeader(),this.shadeDays()},t.prototype.checkRenderDays=function(){var e,t,n,i,o,s,a;return e=r(".calendar-month"),t=e.outerHeight(),s=e.prop("scrollTop"),a=this.$(".calendar-table").outerHeight(),n=a-t-s,o=this.dayCellHeight*this.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS,
o>n&&(i=!0,this.renderWeeks(this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),o>s&&(i=!0,this.renderWeeks(-1*this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),i&&this.model.editable()?this.defer(function(){return c.refreshCalendarCardSortable()}):void 0},t.prototype.shadeDays=function(){var e,t,n,i,o,s,a,u,c;for(e=this.$(".day-cell"),a=this.currentMonthCells,n=0,o=a.length;o>n;n++)t=a[n],r(t).removeClass("current-month");for(this.currentMonthCells=h.filter(e,this.cellInCurrentMonth,this),u=this.currentMonthCells,c=[],i=0,s=u.length;s>i;i++)t=u[i],c.push(r(t).addClass("current-month"));return c},t.prototype.cellInCurrentMonth=function(e){var t;return t=parseInt(r(e).attr("name")),new Date(t).getMonth()===this.currentMonth.getMonth()},t}(s)},{}],399:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),i=e(394),s=e(80),a=e(537),u=e(522),c=e("underscore"),l=e("moment"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.className="u-fancy-scrollbar calendar-drag-area",t.prototype.SCROLL_ANIMATION_TIME=400,t.prototype.initialize=function(){var e;return e=this.listenToListChanges.bind(this),this.model.listList.each(e),this.listenTo(this.model.listList,"add remove",e)},t.prototype.addedToDOM=function(){return this.model.editable()?this.defer(function(){return a.refreshCalendarCardSortable()}):void 0},t.prototype.delegateEvents=function(){var e,n,r,i,o;for(t.__super__.delegateEvents.apply(this,arguments),i=this.subviewsOfType(this.DAY_VIEW_TYPE),o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(e.delegateEvents());return o},t.prototype.setSubscriptions=function(){throw new Error("CalendarView::setSubscriptions is an abstract method")},t.prototype.stopSubscriptions=function(){throw new Error("CalendarView::stopSubscriptions is an abstract method")},t.prototype.listenToListChanges=function(e){return this.listenTo(e.cardList,"add remove",function(e){var t;return this.cardsWithDueDates([e]).length>0?(t=new Date(e.get("due")),this.renderCardsOnDates([t])):void 0}),this.listenTo(e.cardList,"change:due",function(e,t){var n,r,i,o,s;return s=e.previousAttributes().due,i=e.get("due"),o=new Date(null!=s?s:null),t=new Date(null!=i?i:null),l(o).isSame(t,"day")?void 0:(r=function(){var e,t,r,o;for(r=[s,i],o=[],e=0,t=r.length;t>e;e++)n=r[e],null!=n&&o.push(new Date(n));return o}(),this.renderCardsOnDates(r))}),this.listenTo(e.cardList,"reset",function(e,t){var n,r,i,o;return i=e.models,o=t.previousModels,r=c.difference(i,o).concat(c.difference(o,i)),this.renderCardsOnDates(function(){var e,t,i;for(i=[],e=0,t=r.length;t>e;e++)n=r[e],i.push(new Date(n.get("due")));return i}())})},t.prototype.navigateToday=function(){return this.scrollToDay(this.today,this.SCROLL_ANIMATION_TIME)},t.prototype.getCardView=function(e){return this.subview(i,e,e.cid)},t.prototype.cardsWithDueDates=function(e){return e.filter(function(e){return null!=e.get("due")})},t.prototype.cardsDueOnDate=function(e,t){return this.cardsWithDueDates(e).filter(function(e){return l(e.get("due")).isSame(t,"day")})},t.prototype.cardSubviews=function(){var e,t,n;return n=this.subviewsOfType(this.DAY_VIEW_TYPE),e=c.flatten(function(){var e,r,o;for(o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(t.subviewsOfType(i));return o}())},t.prototype.calculateFirstAndLastWeeksFromDOM=function(){var e;return e=this.$(".week"),this.firstRenderedWeek=new Date(parseInt(e.first().attr("name"))),this.lastRenderedWeek=new Date(parseInt(e.last().attr("name"))),this.lastRenderedSaturday=s.getEndOfWeek(this.lastRenderedWeek)},t.prototype.renderCardsOnDates=function(e){var t,n,r,i,o,a,u;if(this.$(".week").length>0){for(u=[],o=0,a=e.length;a>o;o++)n=e[o],this.firstRenderedWeek<n&&n<this.lastRenderedSaturday&&(t=this.cardsDueOnDate(this.model.openCards(),n),r=s.getMidnightInt(n),i=this.existingSubview(this.DAY_VIEW_TYPE,this.model,r),i.cardsDue=t,u.push(i.renderCardsAndHeaders()));return u}},t.prototype.renderDayViews=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(this.getDayView(t).render().el);return i},t.prototype.getDayView=function(e,t){var n;return n={day:e,cardsDueOnDate:this.cardsDueOnDate(this.model.openCards(),e)},this.subview(this.DAY_VIEW_TYPE,this.model,c.extend({data:n,getCardView:this.getCardView.bind(this)},t),s.getMidnightInt(e))},t.prototype.weekRowEl=function(e){var t,n;return n=this.renderDayViews(s.getDaysOfWeek(e)),t=r(document.createElement(this.WEEK_WRAPPER_ELEMENT)),t.attr("name",s.getMidnightInt(s.getStartOfWeek(e))).addClass("week").append(n),t},t}(u)},{}],400:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(396),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.className="day-column",t}(r)},{}],401:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),i=e(399),o=e(400),a=e(6),u=e(80),c=e(537),l=e(129),p=e(519),d=e("moment"),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className=l.extendParentClassName("calendar-week"),t.prototype.WEEK_WRAPPER_ELEMENT="div",t.prototype.VIEWSTATE_PREF_STR="week",t.prototype.HEADER_CLASS_NAME="week-view",t.prototype.WEEKS_KEPT_IN_DOM=5,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=o,this.today=new Date,this.scrollLock=!1},t.prototype.render=function(e){return null==e&&(e=this.today),this.$el.html(p.fill("calendar_week")),this.currentWeek=u.getStartOfWeek(e),this.appendWeekEl(this.currentWeek),this.prependWeekEl(d(this.currentWeek).subtract(1,"weeks").toDate()),this.appendWeekEl(d(this.currentWeek).add(1,"weeks").toDate()),this},t.prototype.addedToDOM=function(){return t.__super__.addedToDOM.apply(this,arguments),this.weekWidth=r(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek),this.updateToolbar()},t.prototype.updateRoute=function(){var e,t,n,r;return n=u.dateToObj(this.currentWeek),r=n.year,t=n.month,e=n.day,t=l.lpad(t,2,"0"),e=l.lpad(e,2,"0"),a.setBoardLocation(this.model.id,"calendar",[r,t,e],{replace:!0})},t.prototype.setSubscriptions=function(){return r(window).on("resize."+this.uniqueId(),function(e){return function(){return e.resizeCheck()}}(this)),r(".board-menu").on("transitionend."+this.uniqueId()+" webkitTransitionEnd."+this.uniqueId(),function(e){return function(){return e.resizeCheck()}}(this))},t.prototype.stopSubscriptions=function(){return r(window).off("."+this.uniqueId()),r(".board-menu").off("."+this.uniqueId())},t.prototype.resizeCheck=function(){return this.weekWidth=r(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek)},t.prototype.resizeWeekCanvas=function(){var e;return e=this.$(".week").length,r(".week-horizontal-canvas").width(this.weekWidth*e),r(".week").width(this.weekWidth)},t.prototype.updateToolbar=function(){var e,t,n,i,o;return o=d(u.getEndOfWeek(this.currentWeek)),t=d(this.currentWeek),n=t.format("LL")+" - "+o.format("LL"),r(".js-calendar-header").text(n),e=r(".today-button"),i=d(this.today).isSame(this.currentWeek,"week"),e.toggleClass("on-today",i)},t.prototype.appendWeekEl=function(e){var t,n;return n=this.$(".week-horizontal-canvas"),n.append(this.weekRowEl(e)),this.resizeWeekCanvas(),t=this.$(".week"),t.length>this.WEEKS_KEPT_IN_DOM&&(t.first().remove(),this.scrollLeft(-1*this.weekWidth)),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.prependWeekEl=function(e){var t,n;return n=this.$(".week-horizontal-canvas"),n.prepend(this.weekRowEl(e)),t=this.$(".week"),t.length>this.WEEKS_KEPT_IN_DOM&&t.last().remove(),this.resizeWeekCanvas(),this.scrollLeft(this.weekWidth),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.navigatePrevious=function(){return this.navigateWeek({backwards:!0})},t.prototype.navigateNext=function(){return this.navigateWeek({backwards:!1})},t.prototype.navigateWeek=function(e){var t,n,r,i,o;return n=(null!=e?e:{}).backwards,this.scrollLock?void 0:(o=n?-1:1,t=n?this.$(".week").first():this.$(".week").last(),this.currentWeek=d(this.currentWeek).add(o,"weeks"),i=t.attr("name"),r=new Date(parseInt(i)),d(this.currentWeek).isSame(r,"day")&&(n?this.prependWeekEl(d(this.currentWeek).subtract(1,"weeks").toDate()):this.appendWeekEl(d(this.currentWeek).add(1,"weeks").toDate()),this.model.editable()&&this.defer(function(){return c.refreshCalendarCardSortable()})),this.scrollToDay(this.currentWeek,this.SCROLL_ANIMATION_TIME))},t.prototype.scrollLeft=function(e,t){var n,i;return n=r(".calendar-week"),i=n.prop("scrollLeft"),this.scrollLeftTo(i+e,t)},t.prototype.scrollLeftTo=function(e,t){var n;return n=r(".calendar-week"),t?(this.scrollLock=!0,n.animate({scrollLeft:e},{duration:t,complete:function(e){return function(){return e.completeAnimatedScroll()}}(this)})):n.scrollLeft(e)},t.prototype.scrollToDay=function(e,t){var n,r,i;return this.firstRenderedWeek<e&&e<this.lastRenderedSaturday?(i=u.getMidnightInt(u.getStartOfWeek(e)),n=this.$(".week[name='"+i+"']"),r=n.prop("offsetLeft"),this.scrollLeftTo(r,t),this.currentWeek=new Date(i),this.updateToolbar()):(this.render(e),this.addedToDOM(),this.delegateEvents()),this.updateRoute()},t.prototype.completeAnimatedScroll=function(){return this.scrollLock=!1},t}(i)},{}],402:[function(e,t,n){var r,i,o;o=null!=(i=window.URL)?i:window.webkitURL,r=null!=navigator.getUserMedia?navigator.getUserMedia.bind(navigator):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia.bind(navigator):null,t.exports=new(function(){function e(){this.stream=null}return e.prototype.supportsGetUserMedia=function(){return null!=r},e.prototype.connected=function(){return null!=this.stream},e.prototype.getStream=function(){return this.stream},e.prototype.getStreamUrl=function(){return o.cre},e.prototype.getError=function(){return this.error},e.prototype.connect=function(e){var t,n;return null!=this.stream?e(null,this.stream):(this.error=null,t=function(t){return function(n){return t.error=n,t.stream=null,e("Could not connect")}}(this),n={video:!0},r(n,function(t){return function(n){return t._setRawStream(n),t.stream=o.createObjectURL(n),e(null,t.stream)}}(this),t))},e.prototype._setRawStream=function(e){return this.stop(),this.rawStream=e},e.prototype.stop=function(){var e,t,n,r;return null!=this.rawStream&&("function"==typeof(e=this.rawStream).stop&&e.stop(),"function"==typeof(t=this.rawStream).getTracks&&null!=(n=t.getTracks())&&null!=(r=n[0])&&"function"==typeof r.stop&&r.stop()),this.stream=null,this.rawStream=null},e}())},{}],403:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),o=e(542),s=e(522),a=e(519),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="crop photo",t.prototype.events=function(){return{"click .js-done":"done","click .js-back":"back"}},t.prototype.setImage=function(e){return this.url=e},t.prototype.render=function(){return this.$el.html(a.fill("crop_photo")),this.$(".crop-image").attr("src",this.url).css({"max-width":4096,"max-height":4096}).crop({width:270,height:270}).on("mousewheel",function(e){var t;return t=r(this).data("crop"),e.originalEvent.wheelDelta<0?t.zoomIn():t.zoomOut()}).on("crop",function(e){return function(t){return e.cropX=t.cropX,e.cropY=t.cropY,e.cropW=t.cropW,e.cropH=t.cropH}}(this)),this},t.prototype.done=function(){var e,t,n;return n=this.$(".crop-image")[0],e=r("<canvas>").attr({width:270,height:270}),t=e[0].getContext("2d"),t.drawImage(n,this.cropX,this.cropY,this.cropW,this.cropH,0,0,270,270),this.options.savePhoto(e[0].toDataURL("image/png")),o.hide()},t.prototype.back=function(){return o.popView()},t}(s)},{}],404:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),i=e(402),o=e(403),s=e(542),u=e(522),l=e(519),c=e(101),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.events={"click .js-connect-camera":"connectCamera","click .js-snap":"snap"},t.prototype.willBePopped=function(){return i.stop()},t.prototype.viewTitleKey="take a photo",t.prototype.render=function(){var e,t,n;return e={connected:i.connected()},n=i.getError(),null!=n&&("PermissionDeniedError"===n.name?e.error=c(["member profile error","could not connect to camera"]):null!=n.name?e.error=n.name:e.error=n),this.$el.html(l.fill("take_photo",e)),i.connected()&&(t=this.$(".video")[0],t.src=i.getStream(),t.play()),this},t.prototype.getData=function(){return this.connectCamera()},t.prototype.connectCamera=function(){return i.connect(function(e){return function(t){return e.render()}}(this))},t.prototype.snap=function(){var e,t,n,a;return a=this.$(".video")[0],e=r("<canvas>").attr({width:640,height:480}),t=e[0].getContext("2d"),t.drawImage(a,0,0,640,480),n=new o({model:this.model,modelCache:this.modelCache,savePhoto:this.options.savePhoto}),n.setImage(e[0].toDataURL("image/png")),i.stop(),s.pushView({view:n,hardToClose:!0})},t}(u)},{}],405:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),o=e(97),s=e(20),a=e(542),u=e(129),c=e(522),l=e("underscore"),p=e(519),d=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="calendar-card-composer",t.prototype.initialize=function(){return this.board=this.model.getBoard()},t.prototype.events={"change .js-select-list":"updatePositionList","change .js-select-position":"renderValues","click .js-add-card":"addCard",keydown:"keydownEvent"},t.prototype.viewTitleKey="add card",t.prototype.setDate=function(e){return this.date=e,this.date.setHours(12)},t.prototype.remove=function(){var e;return e={title:this.$(".js-card-title").val(),idList:this.$(".js-select-list").val(),pos:this.$(".js-select-position").val()},this.model.set(e).save(),t.__super__.remove.apply(this,arguments)},t.prototype.render=function(){var e;return e={title:this.model.get("title")},this.$el.html(p.fill("popover_card_from_calendar",e)),this.updateListList(),this.updatePositionList(),this.defer(function(e){return function(){return u.setCaretAtEnd(e.$(".js-card-title")[0])}}(this)),this},t.prototype.keydownEvent=function(e){o.getKey(e)===s.Enter&&this.addCard(e)},t.prototype.addCard=function(e){var t,n,i,o;return u.stop(e),(n=r.trim(this.$(".js-card-title").val()))?(a.hide(),this.model.clearItems(),this.model.set("pos","bottom"),i=this.selectedList(),o=parseInt(this.$(".js-select-position").val()),t={closed:!1,dateLastActivity:new Date,due:this.date.toString(),idList:i.id,pos:i.calcPos(o),name:n},i.cardList.create(t)):void 0},t.prototype.updateListList=function(){var e,t;return e=this.$(".js-select-list"),e.empty(),t=this.board.listList.models,l.each(t,function(t){return r("<option>").val(t.id).text(t.get("name")).appendTo(e)}),e.val(this.model.get("idList")),e.val()||e.find("option").first().prop("selected",!0),this.renderValues()},t.prototype.updatePositionList=function(){var e,t,n,i,o;return e=this.$(".js-select-position"),n=this.selectedList(),e.empty(),null!=n&&(i=n.cardList.length,t=function(){o=[];for(var e=0;i>=0?i>=e:e>=i;i>=0?e++:e--)o.push(e);return o}.apply(this),l.each(t,function(n){var i;return i=function(){switch(n){case 0:return" (Top)";case t.length-1:return" (Bottom)";default:return""}}(),r("<option>").val(n).text(n+1+i).appendTo(e)}),e.val(this.model.get("pos")),e.val()||e.find("option").last().prop("selected",!0)),this.renderValues()},t.prototype.selectedList=function(){var e;return e=this.$(".js-select-list").val(),l.findWhere(this.board.listList.models,{id:e})},t.prototype.renderValues=function(){var e,t,n,i;n=this.selectedList(),e=this.$(".js-list-value"),t=this.$(".js-pos-value"),null!=n?(e.text(n.get("name")),i=parseInt(this.$(".js-select-position").val()),t.text(i+1)):(e.empty().append(r("<i></i>").text(d("no lists"))),t.empty().append(r("<i></i>").text(d("n/a")))),this.$(".js-add-card,.js-card-title").prop("disabled",null==n)},t}(c)},{}],406:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S=function(e,t){function n(){this.constructor=e}for(var r in t)T.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},T={}.hasOwnProperty;r=e("jquery"),i=e(79),a=e(407),u=e(408),c=e(409),l=e(410),d=e(534),p=e(6),w=e(139),h=e(97),m=e(20),k=e(102),f=e(542),g=e("bluebird"),v=e(129),b=e(522),y=e("underscore"),x=e(519),j=e(48),_=e(101),C=e(829),o=k("CardComposer",["TooManyCards"]),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.className="card-composer",t.prototype.initialize=function(){return this.listenTo(this.model,"change:idLabels change:idMembers",this.renderSelectedItems),this.listenTo(this.model,"change:vis",this.frameDebounce(this.renderVisibility)),this.listenTo(this.model.labelList,"add remove reset change",this.frameDebounce(this.renderSelectedItems))},t.prototype.events={"click .js-add-card":"submitCard","click .js-cancel":"clearAndHide","click .js-cc-menu":"openMenu",keyup:"keyupEvent",paste:"pasteEvent",keydown:"keydownEvent"},t.prototype.render=function(e,t){var n,r;return r=this,n=this.model.toJSON({board:!0}),this.renderVisibility(),this.$el.html(x.fill("card_composer_inline",n)),this.renderSelectedItems(),this.defer(function(e){return function(){return v.setCaretAtEnd(e.$(".js-card-title")[0]),"function"==typeof t?t():void 0}}(this)),this.$(".js-card-title").autosize(),this},t.prototype.renderVisibility=function(){return this.$el.toggleClass("hide",!this.model.get("vis")),this},t.prototype.clearTextField=function(){return this.model.save("title",""),this.$(".js-card-title").val("").trigger("autosize.resize")},t.prototype.submitCard=function(e){var t,n,i,s;return e&&v.stop(e),f.hide(),s=r.trim(this.$(".js-card-title").val()),""===s?void this.$el.find(".js-card-title").focus().select():(t=y.compact(s.split(/\r\n|\r|\n/)),n=t.length,i=n.toString(),void g.try(function(t){return function(){if(n>100)throw new o.TooManyCards;return n>1?new g(function(t){return d.toggle("create many cards",{elem:r(e.target),html:_("confirm.create many cards.text",{count:i}),confirmText:_("confirm.create many cards.confirm",{count:i}),fxConfirm:function(e){return function(e){return t(!0)}}(this),fxCancel:function(e){return function(e){return t(!1)}}(this)})}):!1}}(this)).then(function(n){return function(r){var i;return n.clearTextField(),i=e.shiftKey===!0,r?n.createMultipleCards(t,i):n.createCard(s,{openCard:i,selectCard:!0,removeNewLines:!0}),n.clearItems()}}(this)).catch(o.TooManyCards,function(t){return function(){return d.toggle("too many cards",{elem:r(e.target),html:_("confirm.too many cards.text",{count:i}),fxConfirm:function(e){return f.hide()}})}}(this)).done())},t.prototype.createCard=function(e,t){var n,r,i,o,s,a,u,c,l,d;c=null!=t?t:{},u=c.openCard,d=c.selectCard,l=c.removeNewLines,e=e.trim(),this.$el.trigger("prevent-scroll-selection"),l&&(e=e.replace(/(\r\n|\n|\r)/gm," ")),s=y.clone(this.model.get("idMembers")),o=y.pluck(this.model.labelList.models,"id"),""!==e&&(a={name:e,pos:this.model.getList().calcPos(this.model.get("index")),closed:!1,idLabels:o,idMembers:s,dateLastActivity:Date.now()},this.model.moveToNext(),n=o.length>0,i=this.model.getList().cardList.create(a,{success:function(e){return function(e){n&&s.length>0?j("Card Composer","Card Added","With Members and Labels"):s.length>0?j("Card Composer","Card Added","With Members"):n?j("Card Composer","Card Added","With Labels"):j("Card Composer","Card Added","No items included")}}(this),modelCache:this.modelCache}),r=this.model.getBoard(),r.filter.addNewCard(i),d&&r.viewState.selectCard(i),u&&p.showCardDetail(i,{runMethod:i.shouldSuggestDescription()?"expandDesc":void 0}))},t.prototype.createMultipleCards=function(e,t){var n,r,i,o,s;for(o=e.length,n=r=0,i=e.length;i>r;n=++r)s=e[n],e.length-1===n?this.createCard(s,{openCard:t,selectCard:!0}):this.createCard(s);j("Card Composer","Added Mulitple Cards",o)},t.prototype.pasteEvent=function(){this.$(".js-card-title").focus().keyup().trigger("autosize.resize")},t.prototype.keydownEvent=function(e){var t,n,i,o,s,l,d,p;return s=h.getKey(e),t=this.$(".js-card-title"),o=r(e.target).closest(".js-card-title").hasClass("js-card-title"),i=r(e.target).closest(".js-add-card").hasClass("js-add-card"),!o&&!i||f.isVisible||s!==m.Enter?void((s===m.Tab||s===m.Enter)&&(t.focus(),p=v.getWordFromCaret(t[0]),l=r(null!=(d=f.view)?d.el:void 0),n=!1,f.view instanceof u?(l.find(".js-members-list .item.selected:first .js-select-member").first().click(),n=!0):f.view instanceof a?(l.find(".js-select-label.selected").first().click(),n=!0):f.view instanceof c?l.find(".js-pos-results").length>0&&(l.find(".js-pos-results li.selected:first a").first().click(),n=!0):s===m.Tab&&""===t.val()&&(v.stop(e),this.hide(),e.shiftKey?r(this.el).closest(".js-list").find(".editable:first .current").click():r(this.el).closest(".js-list").next().find(".editable:first .current").click()),n&&(v.stop(e),v.insertSelection(t,"",p.start,p.end),this.model.set("title",t.val())),this.renderSelectedItems(),f.hide())):(v.stop(e),void this.submitCard(e))},t.prototype.keyupEvent=function(e){var t,n,o,s,l,d,p,g,b,w,_,k,C,x,j;if(t=this.$(".js-card-title"),g=h.getKey(e),g!==m.Tab&&g!==m.Enter){if(g===m.Escape)return v.stop(e),f.hide(),void t.focus();if(h.isArrow(g))return v.stop(e),w=r(null!=(k=f.view)?k.el:void 0),void(f.view instanceof u?v.navMenuList(w.find(".js-members-list"),".item",g):f.view instanceof a?v.navMenuList(w,".js-select-label",g):f.view instanceof c&&w.find(".js-pos-results").length>0&&v.navMenuList(w.find(".js-pos-results"),"li",g));if(!i.isTouch()&&r(e.target).closest(".js-card-title").hasClass("js-card-title")){if(j=v.getWordFromCaret(t[0]),d=/^@\S/.test(j.str.substring(0,2)),l=/^\#\S/.test(j.str.substring(0,2)),p=/^\^\S/.test(j.str.substring(0,2)),C=j.str.substring(1).toLowerCase(),!(d||l||p))return this.model.set("title",this.$(".js-card-title").val()),f.hide();if(g===m.Shift||g===m.Alt||g===m.Control);else{if(d)return x=new u({model:this.model,modelCache:this.modelCache}),o=y.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id"),s=v.filterMembers(this.modelCache,C,o),s.length>0?(x.populate(s,!0),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),n=r(x.el).find(".js-members-list .item:first"),v.selectMenuItem(r(x.el).find(".js-members-list"),".item",n)):f.hide();if(l)return x=new a({model:this.model,modelCache:this.modelCache}),b=this.model.getBoard().filterLabels(C),b.length>0?(x.populate(b),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),n=r(x.el).find(".edit-labels-pop-over .js-select-label:first"),v.selectMenuItem(r(x.el).find(".edit-labels-pop-over"),"li",n)):f.hide();if(p)return x=new c({model:this.model,modelCache:this.modelCache}),_=x.filterPos(C),_.hasData?(x.populateResults(_),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),n=r(x.el).find(".js-pos-results li:first"),v.selectMenuItem(r(x.el).find(".js-pos-results"),"li",n)):f.hide()}}}},t.prototype.renderSelectedItems=function(){var e,t,n,r,i,o,s,a,u,c,l,d,p,h;for(i=this.model.get("idMembers"),r=!y.isEmpty(i),t=this.$(".js-list-card-composer-members").empty(),p=this.modelCache.get("Member",i),o=0,c=p.length;c>o;o++)d=p[o],t.append("<div class='member js-remove-member' idMember='"+d+"'>"+C(d.toJSON())+"</div>");for(u=this.model.get("labels"),n=!y.isEmpty(u),e=this.$(".js-list-card-composer-labels").empty(),h=this.model.labelList.models,s=0,l=h.length;l>s;s++)a=h[s],y.isEmpty(a.get("color"))||e.append("<div class='card-label card-label-"+a.get("color")+" mod-card-front' title='"+w(a.get("name"))+"' >"+w(a.get("name"))+"</div>");this.$(".js-clear-all-items").toggle(n||r)},t.prototype.openMenu=function(e){return v.stop(e),j("Card Composer","Open Selector Menu"),f.toggle({elem:e.target,view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.clearItems=function(e){return this.model.clearItems()},t.prototype.hide=function(e){this.model.save("vis",!1)},t.prototype.clearAndHide=function(e){return this.clearItems(),this.hide()},t.prototype.scrollIntoView=function(){var e,t;return t=this.$el.offset().top,e=this.$el.closest(".list-cards"),e.scrollTop(t+this.$el.height())},t}(b)},{}],407:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),o=e(129),s=e(522),a=e("underscore"),u=e(519),c=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="select labels",t.prototype.tagName="ul",t.prototype.className="edit-labels-pop-over",t.prototype.events={"mouseenter .item":"hoverLabelSelect","click .card-label":"addOrRemoveLabel"},t.prototype.populate=function(e){this.populatedLabelList=e},t.prototype.render=function(){var e,t,n,r,i,s,c,l;return l=this,s=[],e=this.model.getLabels(),i=null!=(c=this.populatedLabelList)?c:this.model.getBoard().getLabels(),s=function(){var t,o,s;for(s=[],t=0,o=i.length;o>t;t++)r=i[t],n=a.include(e,r),s.push({id:r.id,color:r.get("color"),name:r.get("name"),isActive:n});return s}(),t={labels:s},this.$el.html(u.fill("select_labels",t)),o.selectMenuItem(this.$(".edit-labels-pop-over"),".js-select-label",this.$(".js-select-label").first()),this},t.prototype.hoverLabelSelect=function(e){return o.selectMenuItem(this.$(".edit-labels-pop-over"),".js-select-label",r(e.target).closest(".js-select-label"))},t.prototype.addOrRemoveLabel=function(e){var t,n;o.stop(e),t=r(e.target).closest(".js-select-label"),t.toggleClass("active"),n=t.attr("data-idlabel"),this.model.toggleLabel(this.modelCache.get("Label",n))?c("Card Composer","Add Label"):c("Card Composer","Remove Label")},t}(s)},{}],408:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),o=e(97),s=e(20),a=e(599),u=e(129),c=e(522),l=e("underscore"),p=e(519),h=e(48),d=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="select members",t.prototype.events={"mouseenter .item":"hoverMemberSelect","click .item":"addOrRemoveMember",keyup:"keyupEvent"},t.prototype.populate=function(e,t){return this.data={idMems:null!=e?e:l.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id")},this.data.showSearch=!(this.data.idMems.length<=5||t)},t.prototype.render=function(){var e;return e=this,this.$el.html(p.fill("popover_member_searcher",this.data)),this.fillMems(this.data.idMems),this.$(".js-filter-emoji").length>0&&this.setTimeout(function(e){return function(){return e.$(".js-filter-emoji").focus().select()}}(this),20),this.$(".js-filter-members").length>0&&this.setTimeout(function(e){return function(){return e.$(".js-filter-members").focus().select()}}(this),20),this},t.prototype.fillMems=function(e){var t,n,r,i,o,s;for(t=this.$(".js-members-list"),t.empty(),s=e.slice(0,5),n=0,i=s.length;i>n;n++)r=s[n],o=this.modelCache.get("Member",r),this.appendSubview(this.subview(a,o,{card:this.model}),t)},t.prototype.filterAndFillMembers=function(e){var t,n,r;n=l.pluck(this.model.getBoard().memberList.models,"id"),r=u.filterMembers(this.modelCache,e,n),r.length>0?(this.fillMems(r),t=this.$(".js-members-list .item:first"),u.selectMenuItem(this.$(".js-members-list"),".item",t)):this.$(".js-members-list").html('<li><p class="empty"></p></li>').find("p").text(d("no matched members"))},t.prototype.hoverMemberSelect=function(e){var t;return t=r(e.target).closest(".item"),u.selectMenuItem(this.$(".js-members-list"),".item",t)},t.prototype.keyupEvent=function(e){var t,n;n=o.getKey(e),t=r(".js-filter-members").val().trim().toLowerCase(),n===s.Tab||n===s.Enter?(u.stop(e),this.$(".js-members-list .item.selected:first .js-select-member").first().click()):n===s.ArrowUp||n===s.ArrowDown?(u.stop(e),u.navMenuList(this.$(".js-members-list"),".item",n)):this.filterAndFillMembers(t)},t.prototype.addOrRemoveMember=function(e){var t,n,i;u.stop(e),i=r(e.target).closest(".item"),i.toggleClass("active"),n=i.find(".username").text(),t=i.find("[idMember]").attr("idMember"),this.model.toggle("idMembers",t)?h("Card Composer","Add Member"):h("Card Composer","Remove Member")},t}(c)},{}],409:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),o=e(542),s=e(129),a=e(522),u=e("underscore"),l=e(519),d=e(48),c=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="select position",t.prototype.events={"change .js-select-list":"changeList","change .js-select-position":"changePosition","mouseenter .js-pos-results li":"hoverPosResultsSelect","click .js-select-pos-keyword":"selectPosResult","click .js-select-pos-pos":"selectPosResult","click .js-select-pos-list":"selectPosResult"},t.prototype.populateResults=function(e){return this.data={filtered:!0,keywordList:e.keywordList.map(function(e){return function(t){return{value:t,indexString:t,listName:e.model.get("list").get("name")}}}(this)),indexList:e.indexList.map(function(e){return function(t){return{value:t,indexString:String(t),listName:e.model.get("list").get("name")}}}(this)),listList:e.listList.map(function(e){return function(t){return{value:t.get("id"),indexString:String(e.model.get("index")+1),listName:t.get("name")}}}(this))}},t.prototype.render=function(){var e;return this.data?this.$el.html(l.fill("popover_filter_pos_results",this.data)):(e={hideBoard:!0},this.$el.html(l.fill("move_card_controls",e)),this.updateListList()),this},t.prototype.hoverPosResultsSelect=function(e){var t;return t=r(e.target).closest("li"),s.selectMenuItem(this.$(".js-pos-results"),"li",t)},t.prototype.selectPosResult=function(e){var t,n,i,a,u,c;s.stop(e),u=r(e.target).closest("a"),c=u.attr("name"),a=this.model.getList(),n=a.openCards().length,t=n+1,u.hasClass("js-select-pos-keyword")?"top"===c?(this.model.set("index",0),d("Card Composer","Select Position in List by Autocomplete",'Top of List - Used "Top"')):"bottom"===c&&(this.model.set("index",t),d("Card Composer","Select Position in List by Autocomplete",'Bottom of List - Used "Bottom"')):u.hasClass("js-select-pos-pos")?(this.model.set("index",parseInt(c,10)-1),d("Card Composer","Select Position in List by Autocomplete","Selected Position - Used Number")):u.hasClass("js-select-pos-list")&&(i=n===this.model.get("pos"),this.model.set("list",this.model.getBoard().getList(c)),i?(this.model.set("index",n),d("Card Composer","Select List by Autocomplete","Bottom")):d("Card Composer","Select List by Autocomplete","Not Bottom")),o.hide()},t.prototype.filterPos=function(e){
var t,n,r,i,o,a,c,l,d,p,h;for(h=RegExp("^"+s.escapeForRegex(e)),l=RegExp("^"+s.escapeForRegex(e)+"$"),t=this.model.getList().openCards(),n={keywordList:function(){var e,t,n,r;for(n=["top","bottom"],r=[],e=0,t=n.length;t>e;e++)o=n[e],h.test(o)&&r.push(o);return r}(),indexList:function(){var e,n,i;for(i=[],r=e=1,n=t.length+1;n>=1?n>=e:e>=n;r=n>=1?++e:--e)l.test(String(r))&&i.push(r);return i}(),listList:[]},d=this.model.getBoard().listList.models,i=0,a=d.length;a>i;i++)c=d[i],p=u.compact(c.get("name").toLowerCase().split(/\s+/)),u.find(p,function(e){return h.test(e)})&&n.listList.push(c);return n.hasData=!u.isEmpty(n.keywordList)||!u.isEmpty(n.indexList)||!u.isEmpty(n.listList),n},t.prototype.updateListList=function(){var e,t,n,i,o,s,a,l,d,p;for(l=this.model.getList(),o=l.id,n=this.model.getBoard(),t=this.$(".js-select-list"),t.empty(),p=u.sortBy(n.listList.models,function(e){return e.get("pos")}),s=0,a=p.length;a>s;s++)l=p[s],d=l.get("name"),i=l.id===o?c("selected list",{listName:d}):d,e=r("<option>").val(l.id).text(i),t.append(e),l.id===o&&(e.attr("selected","selected"),this.$(".js-list-value").text(d));return this.updatePositionList()},t.prototype.updatePositionList=function(){var e,t,n,i,o,s,a,u,c,l,d;if(t=this.$(".js-select-list"),n=this.$(".js-select-position"),a=t.find("option:selected").val(),n.empty(),c=this.model.getList(),l=this.model.getBoard().listList.get(a),i=c.cardList,this.model.get("index")>i.length&&this.model.set("index",i.length),0===i.length)return e=r("<option>").val("0").text("1").appendTo(n),void this.$(".js-pos-value").text("1");for(s=u=0,d=i.length;d>=0?d>=u:u>=d;s=d>=0?++u:--u)o=String(s+1),e=r("<option>").val(s).text(o).appendTo(n),s===this.model.get("index")&&e.attr("selected","selected");this.$(".js-pos-value").text(this.model.get("index").toString())},t.prototype.changeList=function(){var e,t,n,r,i,s,a;r=this.model.get("index"),t=this.model.getList().openCards().length,i=t===r,e=this.$(".js-select-list"),n=e.find("option:selected").val(),a=this.model.getBoard().getList(n),this.model.set("list",a),s=a.openCards().length,i?(this.model.set("index",s),d("Card Composer","Change Position by Click","Change List - Bottom")):(this.model.set("index",Math.min(s,r)),d("Card Composer","Change Position by Click","Change List - Not Bottom")),o.hide()},t.prototype.changePosition=function(){var e,t;e=this.$(".js-select-position"),t=parseInt(e.find("option:selected").val(),10),this.model.set("index",t),d("Card Composer","Change Position by Click","Change Position in List"),o.hide()},t}(a)},{}],410:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(526),i=e(417),o=e(409),a=e(542),u=e(129),c=e(522),l=e(519),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="options",t.prototype.events={"click .js-mem-selector":"openMemSelector","click .js-label-selector":"openLabelSelector","click .js-pos-selector":"openPosSelector"},t.prototype.render=function(){var e;return e=this,this.$el.html(l.fill("popover_selector_menu")),this},t.prototype.openMemSelector=function(e){return u.stop(e),a.pushView({view:i,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openLabelSelector=function(e){return u.stop(e),a.pushView({view:r,options:{model:this.model,modelCache:this.modelCache,hideOnSelect:!1}})},t.prototype.openPosSelector=function(e){return u.stop(e),a.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}})},t}(c)},{}],411:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),c=e(259),s=e("bluebird"),o=e(542),a=e(129),u=e(522),l=e(754),d=e("xtend"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.initialize=function(e){var t;return t=e.links,this.links=t,this.listenTo(this.model.attachmentList,"add remove reset",this.render)},t.prototype.viewTitleKey="attach links",t.prototype.events={"click .js-attach:not([disabled])":"attach"},t.prototype.render=function(){var e,t;return e=function(){var e,n,r,i;for(r=this.links,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(d(t,{domain:c(t.url).host,attached:this.model.attachmentList.any(function(e){return e.get("url")===t.url})}));return i}.call(this),this.$el.html(l(e)),this},t.prototype.attach=function(e){var t,n,i;return t=r(e.currentTarget),i=t.attr("data-url"),n=t.attr("data-text"),t.attr("disabled","disabled"),this.model.uploadUrl({url:i,name:n})},t}(u)},{}],412:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M=function(e,t){function n(){this.constructor=e}for(var r in t)B.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},B={}.hasOwnProperty;r=e("jquery"),i=e(532),o=e(217),a=e(33),u=e(162),c=e(485),d=e(94),p=e(97),h=e(542),m=e("bluebird"),f=e(114),g=e(427),v=e(129),b=e(522),y=e("underscore"),j=e(517)("attachment_type_picker"),T=e(48),k=e(101),C=e(132),_=e(238),w=e(246),x=e(501),l=w("AttachmentTypePickerView::FileTooLarge"),S=j.renderable(function(e){var t,n,r,i,o,s;r=e.hasLargeAttachments,i=e.id,n=e.googleDriveReady,s=e.tipKey,o=e.tipData,t=e.defaultName,null==s&&(s="tip-you-can-drag-and-drop-files-and-links-onto-cards-to-upload-them"),null==o&&(o={}),j.div(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},function(){r?j.format("that-file-size-exceeds-the-250mb-limit"):j.div(".gold-promo",function(){j.format("that-file-size-exceeds-the-10mb-limit-but-if-you-upgrade-to"),j.icon("trello-gold","trello-gold-you-can-upload-files-up-to-250mb")})}),j.ul(".pop-over-list",function(){j.li(".uploader",function(){return j.a(".fakefile",{href:"#"},function(){return j.format("computer")}),j.form(".realfile",{action:"/1/card/"+i+"/attachments",method:"post",enctype:"multipart/form-data"},function(){return j.input({type:"hidden",name:"token",value:""}),j.input({type:"hidden",name:"format",value:"http"}),j.input(".js-attach-file",{type:"file",name:"file",tabindex:"-1",multiple:""})})}),j.li(function(){return j.a(".js-attach-card",{href:"#"},function(){return j.format("trello")})}),j.li(function(){return j.a(".js-google-drive-attachment",{href:"#",class:j.classify({disabled:!n})},function(){return j.format("google-drive")})}),j.li(function(){return j.a(".js-dropbox-attachment",{href:"#"},function(){return j.format("dropbox")})}),j.li(function(){return j.a(".js-box-attachment",{href:"#"},function(){return j.format("box")})}),j.li(function(){return j.a(".js-one-drive-attachment",{href:"#"},function(){return j.format("onedrive")})})}),j.hr(),j.label({for:"addLink"},function(){j.format("attach-a-link")}),j.input(".attachment-add-link-input.js-attachment-url.js-autofocus",{type:"text",id:"addLink",placeholder:j.l("paste-any-link-here-ellipsis")}),j.div(".js-name-link.hide",function(){return j.label({for:"nameLink"},function(){j.format("link-name")}),j.input(".attachment-add-link-input.js-attachment-name",{type:"text",id:"nameLink",value:t})}),j.input(".js-add-attachment-url",{style:"margin: 0;",type:"submit",value:j.l("attach")}),j.hr(),j.p(".quiet.u-bottom",function(){j.format(s,o)})}),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),t.prototype.viewTitleKey="attach from",t.prototype.initialize=function(){return this.listenTo(d,"loaded",this.render)},t.prototype.events={"click .js-google-drive-attachment:not(.disabled)":"openGoogleDriveFilePicker","click .js-dropbox-attachment":"openDropboxFilePicker","click .js-one-drive-attachment":"openOneDriveFilePicker","click .js-box-attachment":"openBoxFilePicker","click .js-attach-card":"attachCard","change .js-attach-file":"startUpload","click .js-add-attachment-url":"addUrl","keydown .js-attachment-url":"keydown","keydown .js-attachment-name":"keydown","input .js-attachment-url":function(e){return this.$(".js-name-link").toggleClass("hide",!/\S/.test(r(e.currentTarget).val()))},'click a[href^="/gold"]':function(){return T("Attachment","Open Trello Gold Promo - via Attachment Upload Limit")},'click a[href^="/business-class"]':function(){return T("Card Detail","Attachments BC Ad")}},t.prototype._scripts={dropbox:"https://www.dropbox.com/static/api/1/dropbox.js",box:"https://app.box.com/js/static/select.js",oneDrive:"https://js.live.net/v7.0/OneDrive.js"},t.prototype.getCard=function(){return this.model instanceof u?this.model:this.model.getCard()},t.prototype.getData=function(){var e,t,n;t=this._scripts;for(e in t)n=t[e],this._loadOnce(n,function(){})},t.prototype.render=function(){var e,t,n,r;return t=null!=(n=this.getCard().getBoard())?n.getOrganization():void 0,e={id:this.getCard().id,hasLargeAttachments:(null!=(r=a.me())?r.isFeatureEnabled("largeAttachments"):void 0)||(null!=t?t.isFeatureEnabled("largeAttachments"):void 0),googleDriveReady:d.loaded,defaultName:this.options.defaultName},null!=t&&t.isFeatureEnabled("plugins")||(e.tipKey="tip-you-can-attach-other-things-with-power-ups",e.tipData={url:"/power-ups?utm_source=trello&utm_medium=inapp&utm_content=attachments-menu&utm_campaign=power-ups"}),this.$el.html(S(e)),this},t.prototype.startUpload=function(e){var t,n,o,s;return t=r(e.target),n=this.$(".js-file-too-large").hide(),o=y.toArray(t[0].files),s=o.length>0?y.any(o,function(e){return!a.me().canUploadAttachment(e)})?m.reject(l()):m.resolve(o).each(function(e){return function(t){var n;return n=t.name||x(),C(e.getCard(),"upload",t,n).then(function(t){return e.trigger("attach",{mimeType:t.mimeType,name:e.options.defaultName||n,url:t.url})})}}(this)):C(v,"uploadFile",a.myToken(),t),s.then(function(){return T("Card Detail","Upload Attachment Complete - Via Picker"),i.show("finished uploading","info","AjaxQueueUpload",2e3),h.hide()}).catch(l,function(){return n.show(),T("Card Detail","Attachment","Upload Error - File Too Large")}).done()},t.prototype._loadOnce=function(e,t){return null==window._loadedScripts&&(window._loadedScripts={}),window._loadedScripts[e]?t():r.getScript(e,function(n){return function(){return window._loadedScripts[e]=!0,t()}}(this))},t.prototype.attachLinks=function(e,t,n){return t?m.resolve(t).call("map",null!=n?n:function(e){return e}).each(function(t){return function(n){var r;return r=y.pick(n,"url","mimeType","name"),t.trigger("attach",r),o({url:"/1/cards/"+t.getCard().id+"/attachments",type:"post",data:r}).then(function(){return T("Card Detail","Upload "+e)}).catch(function(){})}}(this)).then(function(){return h.hide()}).done():void 0},t.prototype.openGoogleDriveFilePicker=function(e){return v.stop(e),C(gapi,"load","picker").then(function(){var e;return e=d.validToken(),C(d,"authorize",e)}).then(function(e){return function(t){var n,i;return n=new google.picker.DocsView,n.setIncludeFolders(!0),i=(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(n).setOAuthToken(t).setCallback(function(t){return e.attachLinks("Google drive file",t.docs,_.id)}).build(),i.setVisible(!0),r("iframe.picker-frame[src*=authserviceid]").attr("src",function(){return r(this).attr("src").replace(/authserviceid/g,"fixgoogle")})}}(this)).done()},t.prototype.openDropboxFilePicker=function(e){v.stop(e),this._loadOnce(this._scripts.dropbox,function(e){return function(){Dropbox.init({appKey:window.dropboxClientAppKey}),Dropbox.choose({linkType:"preview",iframe:!0,success:function(t){return e.attachLinks("Dropbox file",t,function(e){return{url:e.link,name:e.name}})}}),r('iframe[src^="https://www.dropbox.com/chooser"]').parent().css("overflow","auto")}}(this))},t.prototype.openOneDriveFilePicker=function(e){v.stop(e),this._loadOnce(this._scripts.oneDrive,function(e){return function(){m.try(function(){return new m(function(e,t){var n;return n=window.OneDrive,n.open({clientId:window.oneDriveClientId,action:"share",multiSelect:!0,openInNewWindow:!0,success:function(t){return e(t.value)},cancel:function(){return e([])},error:function(e){return t(e)},advanced:{redirectUri:siteDomain+"/onedrive_callback_7.html"}})})}).then(function(t){return e.attachLinks("OneDrive file",t,function(e){return{url:e.webUrl,name:e.name}})}).done()}}(this))},t.prototype.openBoxFilePicker=function(e){return v.stop(e),this._loadOnce(this._scripts.box,function(e){return function(){var t,n;return t=new BoxSelect({clientId:window.boxClientId,linkType:"shared",multiselect:!0}),n=function(r){return t.unregister(t.SUCCESS_EVENT_TYPE,n),e.attachLinks("Box file",r,_.id)},t.success(n),t.launchPopup()}}(this))},t.prototype.keydown=function(e){return p.isSubmitEvent(e)?this.addUrl():void 0},t.prototype.addUrl=function(e){var t,n;n=this.$(".js-attachment-url").val().split(/\s+/),t=this.$(".js-attachment-name").val(),/\S/.test(t)||(t=void 0),n=y.filter(n,function(e){return/\S/.test(e)}),!y.isEmpty(n)&&n.length<10&&(h.pushView({view:g}),this.attachLinks("link",n,function(e){return{url:e,name:t}}))},t.prototype.attachCard=function(e){var t;return t=new c({model:this.model,card:this.model,modelCache:this.modelCache,button:!0,callback:function(e){return function(t){var n;return n=t.get("url"),e.attachLinks("card",[{url:n}])}}(this)}),h.pushView({view:t})},t}(b)},{}],413:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e(33),o=e(6),s=e(97),a=e(20),u=e(38),c=e(542),l=e(426),d=e(129),p=e(522),m=e(106),g=e(519),v=e(48),f=e(259),h=e(238),t.exports=m(l,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.viewTitleKey="copy card",t.prototype.initialize=function(e){var t;return this.onCopy=null!=(t=e.onCopy)?t:function(){}},t.prototype.showCurrentPosition=!0,t.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData",'keydown textarea[name="name"]':"keydownEvent","click .js-submit":"submit","submit form":"submit"},t.prototype.render=function(){var e,t,n,i,o,s,a,u,c,l,d,p;for(t=this.model.toJSON(),t.numChecklists=this.model.checklistList.length,t.numMembers=t.idMembers.length,t.numLabels=null!=(c=null!=(l=t.idLabels)?l.length:void 0)?c:0,t.numAttachments=t.badges.attachments,t.numComments=t.badges.comments,t.numStickers=t.stickers.length,t.hasChecklists=t.numChecklists>0,t.hasMembers=t.idMembers.length>0,t.hasLabels=t.numLabels>0,t.hasAttachments=t.badges.attachments>0,t.hasComments=t.badges.comments>0,t.hasStickers=t.stickers.length>0,t.hasStuff=t.numChecklists+t.idMembers.length+t.numLabels+t.badges.attachments+t.badges.comments+t.stickers.length>0,t.loading=this.loading,t.organizations=r.me().getOpenBoardsByOrg(!0),d=t.organizations,n=0,o=d.length;o>n;n++)for(a=d[n],p=a.boards,i=0,s=p.length;s>i;i++)e=p[i],e.id===this.model.get("idBoard")&&(e.selected=!0);return u={move_card_controls:g.move_card_controls},this.$el.html(g.fill("card_copy",t,{editable:this.model.editable()},u)),this.updateBoardData(),this},t.prototype.getData=function(){return this.loading=!0,u.loadCardCopyData(this.model.get("idBoard"),this.model.id).finally(function(e){return function(){return e.loading=!1,e.render()}}(this)).done()},t.prototype.keydownEvent=function(e){s.getKey(e)===a.Enter&&(d.stop(e),this.submit(e))},t.prototype.submit=function(e){var t,n,r,i;return d.stop(e),r=this.$('textarea[name="name"]'),""===r.val().trim()?void r.focus().select():(n=["due"],i=this.$("input:checkbox:checked").get().map(h.get("name")),t=n.concat(i),void this.model.copyTo({name:r.val().trim(),idList:this.$(".js-select-list").find("option:selected").val(),pos:this.$(".js-select-position").find("option:selected").val(),keepFromSource:t}).then(function(e){return function(){return c.hide(),e.onCopy(),v("Card","Copy Card")}}(this)))},t}(p))},{}],414:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e(490),i=e(413),s=e(534),a=e(80),u=e(536),h=e(139),c=e(542),l=e(129),d=e(522),m=e(85),f=e(519),g=e(48),p=e("underscore"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="more",t.prototype.events={"click .js-copy-card":"copyCard","click .js-delete":"deleteCard","click .js-short-url, .js-email, .js-embed":function(e){return this.focusInput(e.currentTarget)},"click .js-print":"printModel","click .js-export-json":"exportJSON"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:shortUrl",this.render)},t.prototype.copyCard=function(e){g("Card Detail","Card Copy Button","Via More Menu"),c.pushView({view:i,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.focusInput=function(e){return this.$(e).focus().select()},t.prototype.getShortLinkData=function(){null==this.model.get("shortUrl")&&this.model.fetch({fields:["shortUrl"]})},t.prototype.deleteCardConfirm=function(e){s.pushView("delete card",{model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return u.hide(),e.model.destroy(),g("Card","Delete")}}(this)})},t.prototype.render=function(){var e,t,n;return t={dateAdded:l.idToDate(this.model.id).toISOString(),jsonURL:"/"+this.model.typeName.toLowerCase()+"/"+this.model.id+"/"+l.makeSlug(this.model.get("name"))+".json"},e=this.model.getBoard(),null!=e&&p.extend(t,{pLevelClass:r.getPermLevelIconClassForBoard(e),pLevelAltText:r.getPermLevelAltTextForBoard(e)}),(null!=(n=m("embed"))?n.get("showEmbed"):void 0)&&(t.embed=['<blockquote class="trello-card">','<a href="'+h(this.model.get("url"))+'">'+h(this.model.get("name"))+"</a>","</blockquote>",'<script src="'+window.siteDomain+'/embed.js"></script>'].join("")),this.$el.html(f.fillFromModel("card_detail_more_menu",this.model,t,{meta:f.card_menu_meta})),this.getShortLinkData(),a.update(this.el),this.focusInput(this.$(".js-autofocus")[0]),this},t.prototype.deleteCard=function(e){l.stop(e),g("Card Detail","Delete Button","Via More Menu"),this.deleteCardConfirm()},t.prototype.printModel=function(e){l.stop(e),c.hide(),g("Card Detail","Print","Via More Menu"),this.defer(function(){return window.print()})},t.prototype.exportJSON=function(e){return g("Card Detail","Export JSON")},t}(d)},{}],415:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N,V,$,R,z,U,F,q,H,K,W,G,J,Q,Y,X,Z,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,pe,he,me,fe,ge,ve,be,ye,we,_e,ke,Ce,xe,je,Se,Te=function(e,t){function n(){this.constructor=e}for(var r in t)Me.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},Me={}.hasOwnProperty,Be=[].slice;r=e("jquery"),i=e(277),o=e(428),s=e(532),a=e(295),u=e(412),c=e(482),l=e(33),d=e(483),p=e(484),h=e(79),m=e(413),f=e(414),v=e(526),b=e(417),y=e(418),w=e(419),_=e(431),k=e(486),C=e(534),x=e(6),j=e(422),S=e(80),T=e(536),e(492),M=e(537),B=e(495),O=e(496),P=e(423),E=e("hearsay"),L=e(298),A=e(97),D=e(20),I=e(200),N=e(530),V=e(539),$=e(22),R=e(274),z=e(593),U=e(37),F=e(38),q=e(107),H=e(670),K=e(672),W=e(506),G=e(509),J=e(683),Q=e(542),Y=e("bluebird"),Ce=e(85),X=e(699),Z=e(114),ee=e(104),te=e(129),ne=e(151),re=e("underscore"),de=e(238),pe=e(498),ge=e(45),ve=e(106),xe=e(48),je=e(53),be=e("moment"),he=e(101),fe=e(99),we=e(501),Se=e(523),ye=e(132),ue=e(757),se=e(759),oe=e(758),ae=e(761),me=e(820),ce=e(762),le=e(780),ke=e(133),_e=e(510),ie=function(e){return"["+e.get("name")+"]("+e.get("url")+") "},t.exports=ve(d,k,w,g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Te(t,e),t.prototype.className="card-detail-window u-clearfix",t.prototype.defaultActionLimit=50,t.prototype.maxActionLimit=1e3,t.prototype.maximumCommentLength=16384,t.prototype.maxDescLength=1800,t.prototype.addListCloseEventListener=function(){var e,t,n;e=this.model.previous("idList"),e&&(this.stopListening(this.modelCache,"add:List:"+e),n=this.modelCache.get("List",e),this.stopListening(n,"change:closed")),t=function(e){return function(){return e.renderArchivedDebounced(),e.listenTo(e.model.getList(),{"change:closed":e.renderArchivedDebounced})}}(this),this.model.getList()?t():this.listenToOnce(this.modelCache,"add:List:"+this.model.get("idList"),t)},t.prototype.initialize=function(){var e,t;this.fEditingName=!1,this.makeDebouncedMethods("render","renderCover","renderStickers","renderName","renderDescription","renderArchived","renderLabels","renderList","renderVotes","renderDueDate","renderSubscribe","renderAttachments","renderMembers","renderAging"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:desc":this.renderDescriptionDebounced,"change:closed":this.renderArchivedDebounced,"change:labels":this.renderLabelsDebounced,"change:idList":function(e){return function(){return e.renderListDebounced(),e.addListCloseEventListener()}}(this),"change:idMembersVoted":this.renderVotesDebounced,"change:due change:dueComplete":this.renderDueDateDebounced,"change:subscribed":this.renderSubscribeDebounced,"change:dateLastActivity":this.renderAgingDebounced,"change:idAttachmentCover":function(){return this.renderCoverDebounced()},destroy:this.closeDialog}),this.addListCloseEventListener(),this.listenTo(this.model.labelList,"add remove reset change",function(e){return function(){return e.renderLabelsDebounced()}}(this)),this.listenTo(this.model.memberList,{"add remove reset":this.renderMembersDebounced}),this.listenTo(this.model.memberVotedList,{"add remove reset":this.renderVotesDebounced}),this.listenTo(this.model.checklistList,{"add reset":this.renderChecklists,remove:this.removeChecklist,sort:this.sortChecklists}),this.listenTo(this.model.attachmentList,{"add remove reset":this.renderAttachmentsDebounced,sort:this.renderAttachments}),this.listenTo(this.model.stickerList,{"add remove reset change sort":this.renderStickersDebounced}),this.listenTo(this.model.memberEditingList,{"add remove reset change:action":this.renderEditing}),e=this.model.getBoard(),this.listenTo(e,{"change:labelNames":this.renderLabelsDebounced,"change:labels":this.renderLabelsDebounced,"change:prefs":function(e){var t,n;return t=function(t){var n,r;return(null!=(n=e.get("prefs"))?n[t]:void 0)!==(null!=(r=e.previous("prefs"))?r[t]:void 0)},t("cardCovers")&&this.renderCover(),n=t("cardAging")||t("comments")||t("voting"),n&&0===this.$(".editing").length?this.renderDebounced():void 0}}),this.subscribe(_e(e,this.model),function(e){return function(){return e.renderAttachments()}}(this)),this.getData(),this.numAttachmentsProcessing=this.slot(0),this.watch("numAttachmentsProcessing",this.renderAttachmentsDebounced),this.fHideFullDescription=(null!=(t=this.model.get("desc"))?t.length:void 0)>this.maxDescLength,this.actionListView=this.collectionSubview(i,this.model.actionList,{renderOpts:{context:this.model,compact:!1}}),this.markNotificationsReadOnActive(),this.listenTo(U,"add:Notification",this.markNotificationsReadOnActive),this.listenTo(V,"cancelEdits",this.saveCommentDraft),r(window).on("beforeunload.CardDetailView-"+this.model.cid,de(this,"saveCommentDraft",!0)),this.pluginThumbTrackCache={}},t.prototype.remove=function(){this.saveCommentDraft(!0),r(window).off(".CardDetailView-"+this.model.cid),t.__super__.remove.apply(this,arguments)},t.prototype.markNotificationsReadOnActive=function(){"active"!==q.getStatus()||q.getHidden()?this.listenToOnce(q,"setStatus visibilitychange",this.markNotificationsReadOnActive):this.markRelatedNotificationsRead()},t.prototype.markRelatedNotificationsRead=function(){var e,t,n,r,i;for(e=function(e){return function(t){var n,r;return t.get("unread")&&(null!=(n=t.get("data"))&&null!=(r=n.card)?r.id:void 0)===e.model.id}}(this),i=this.modelCache.all("Notification"),t=0,n=i.length;n>t;t++)r=i[t],e(r)&&r.markRead()},t.prototype.events={"click .js-edit-labels":"editLabelsSidebar","click .js-change-card-members":"changeMembersSidebar","click .js-add-checklist-menu":"addChecklistSidebar","click .js-add-due-date":"dueDateSidebar","click .js-attach":"openAttachPicker","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-subscribe":"subscribeToCard","click .js-unsubscribe":"unsubscribeFromCard","click .js-vote":"vote","click .js-unvote":"unvote","click .js-archive-card":"archiveCard","click .js-unarchive-card":"unarchiveCard","click .js-delete-card":"deleteCardSidebar","click .js-more-menu":"showMoreMenu","keydown  .js-card-detail-title-input":"nameKeyDownEvent","focus    .js-card-detail-title-input":function(e){return this.startNameEditing({focus:!1})},"blur     .js-card-detail-title-input":"stopNameEditing","click .js-open-card-cover-in-viewer":"openCoverInViewer","click .js-open-move-from-header":"openMoveFromHeader","click .js-details-edit-members":"editMembersMain","click .js-details-edit-labels":"editLabelsMain","click .js-edit-label .card-label":"editLabelsMainSingleLabel","click .js-details-edit-due-date":"showDueDateBadgeMenu","click .js-details-toggle-due-date-complete":"toggleDueDateComplete","click .js-show-votes":"showVotes","click .js-edit-desc":"editDesc","click .js-desc-content.is-hide-full":"showFullDescription","click .js-member-on-card-menu":"openMemberOnCardMenu","click .js-format-help":"openFormatHelp","click .js-view-some-attachments":"showFewerAttachments","click .js-view-all-attachments":"showMoreAttachments","click .js-show-all-actions":"showAllActions","keydown .js-new-comment-input":"keydownCommentEvent","input .js-new-comment-input":"commentInputEvent","mutated .js-new-comment-input":"commentInputEvent","click .js-add-comment:not(:disabled)":"submitComment","click .js-attach-comment":"attachComment","click .js-truncate-comment":"truncateComment","click .js-new-comment":"inputComment","focus .js-new-comment-input":"inputComment","keyup .js-new-comment-input":"keyAutoMention",click:"clickAwayFromComment","click .js-new-comment .js-comment-add-attachment":"commentAddAttachment","click .js-new-comment .js-comment-mention-member":"commentMentionMember","click .js-new-comment .js-comment-add-emoji":"commentAddEmoji","click .js-new-comment .js-comment-add-card":"commentAddCard","click .js-show-details":"showDetails","click .js-hide-details":"hideDetails","click a[href]":"interceptHighlightLink","dd-enter:files":"dragenter","dd-leave:files":"dragleave","dd-drop:files":"dropFiles","dd-enter:url":"dragenter","dd-leave:url":"dragleave","dd-drop:url":"dropUrl","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl","sortstop .js-checklist-list":"sortStop","sortstop .js-attachment-list":"sortStopAttachments",shortcut:"shortcut",replyToAction:"replyToAction"},t.prototype.shortcut=function(e){var t,n,r,i,o,s,a;switch(t=this.model.getBoard(),n=this.model.editable(),i=l.isLoggedIn(),e){case D.Space:if(n&&t.hasActiveMembership(l.me()))return this.model.toggleMember(l.myId()),["Space - Toggle Assigning Self","Card Detail"];break;case D.A:case D.M:if(n)return this.changeMembersSidebar(),["A - Assign Members","Card Detail"];break;case D.E:if(n)return this.editDesc(),["E - Edit Description","Card Detail"];break;case D.L:if(n)return this._openEditLabelsSidebar({hideOnSelect:!1}),["L - Edit Labels","Card Detail"];break;case D.D:if(n)return null!=this.model.get("due")?this.showDueDateBadgeMenu():this.dueDateSidebar(),["D - Due Dates","Card Detail"];break;case D.C:if(n)return this.archiveCard(),["C - Archive Card"];break;case D.T:if(n)return this.editTitle(),"T - Edit Title";break;case D.AngleRight:case D.Period:if(n)return this.model.moveToNextList(e===D.AngleRight?"top":"bottom"),"> - Move to Next List";break;case D.AngleLeft:case D.Comma:if(n)return this.model.moveToPrevList(e===D.AngleLeft?"top":"bottom"),"< - Move to Previous List";break;case D._0:case D._1:case D._2:case D._3:case D._4:case D._5:case D._6:case D._7:case D._8:case D._9:if(n)return r=function(e){return function(t){return e._openEditLabelsSidebar({searchInit:t,hideOnSelect:!0})}}(this),N.setLabelFromKey(e,this.model,r),"0-9 - Toggle Specific Label";break;case D.V:if(t.canVote(l.me()))return this.model.toggleVote(),"V - Vote";break;case D.S:if(i)return a=this.model.get("subscribed"),this.model.subscribe(!a),["S - Subscribe",a?"Unsubscribe":"Subscribe"];break;case D.J:if(null!=(o=this.model.nextCard()))return x.showCardDetail(o,{isNavigating:!0}),"J - Down";break;case D.K:if(null!=(s=this.model.prevCard()))return x.showCardDetail(s,{isNavigating:!0}),"K - Up"}},t.prototype.incrementNumAttachmentsProcessing=function(e){return null==e&&(e=1),this.numAttachmentsProcessing.update(de.add(e))},t.prototype.decrementNumAttachmentsProcessing=function(e){return null==e&&(e=1),this.numAttachmentsProcessing.update(de.sub(e))},t.prototype.getData=function(){this.loading=!0,this.$(".js-loading-card-actions").show(),this.waitForId(this.model,function(e){return function(){var t;return t=e.fShowAllActions?e.maxActionLimit:e.defaultActionLimit,Y.try(function(){return!l.isLoggedIn()||l.me().getShowDetails()?F.loadCardDetails(e.model.id,t):F.loadCardHideDetails(e.model.id,t)}).finally(function(){return e.loading=!1,e.$(".js-loading-card-actions").hide()}).then(function(){return e.renderShowAllActionsButton(),e.scrollToHighlight()}).done()}}(this))},t.prototype.scrollToHighlight=function(){var e,t,n;e=Date.now(),cancelAnimationFrame(this.scrollInterval),t=null,(n=function(r){return function(){var i,o;T.scrolledSince(e)||(null!=(i=r.$(".mod-highlighted")[0])&&(t||(o=i.getBoundingClientRect(),t=o.top<0?"top":o.top+o.height>window.innerHeight?"bottom":null),"top"===t?i.scrollIntoView(!0):"bottom"===t&&i.scrollIntoView(!1),e=Date.now()),r.scrollInterval=r.requestAnimationFrame(n))}}(this))()},t.prototype.render=function(){var e,t;return this.fShowAllAttachments=!1,this.fShowAllActions=!1,e=re.extend(this.model.toJSON(),{canComment:this.model.getBoard().canComment(l.me()),canVote:this.model.getBoard().canVote(l.me()),canSubscribe:l.isLoggedIn(),canToggleDetails:l.isLoggedIn(),hasAttachments:this.model.attachmentList.length>0,me:l.me().toJSON(),loading:this.loading,editable:this.model.editable()}),e.showActions=e.canVote||e.canSubscribe,this.$el.html(ue(e)),this.actionListView.setElement(this.$(".js-list-actions")[0]),this.commentInput=this.$(".js-new-comment-input")[0],this.renderCover().renderStickers().renderName().renderDescription().renderList().renderActionList().renderMembers().renderArchived().renderChecklists().renderSubscribe().renderVotes().renderDueDate().renderAttachments().renderLabels().renderAging().renderEditing().renderPluginBadges().renderPluginButtons(),e.canComment&&this.recallDrafts(),this.$(".js-card-detail-title-input").autosize({append:!1}),this.$(".js-new-comment-input").autosize(),"chrome"!==(t=h.browserStr)&&this.defer(re.bind(this.fixSidebar,this)),S.update(this.el),this},t.prototype._commentDraftKey=function(){return"draft_"+this.model.id+"_comment"},t.prototype.recallDrafts=function(){var e;return e=Z.get(this._commentDraftKey()),e&&this.$(".js-new-comment-input").val(e),this.renderCommentSubmitAbility(),t.__super__.recallDrafts.apply(this,arguments)},t.prototype.saveCommentDraft=function(e){var t,n;null==e&&(e=!1),t=this.$(".js-new-comment-input"),0!==t.length&&(n=t.val(),n?(Z.set(this._commentDraftKey(),n),e&&(xe("Card Detail","Comment","Save Comment Draft"),je("Card Detail","save","comment draft","","","when closing a card",""))):Z.unset(this._commentDraftKey()))},t.prototype.saveCardName=function(){var e,t,n;e=this.$(".js-card-detail-title-input"),n=e.val(),t=this.model.get("name"),n=n.replace(/\s+/g," ").trim(),n!==t&&(n.length>16384||0!==n.trim().length&&this.model.update("name",n));
},t.prototype.nameKeyDownEvent=function(e){A.getKey(e)===D.Enter&&(te.stop(e),this.stopNameEditing()),A.getKey(e)===D.Escape&&(te.stop(e),this.stopNameEditing())},t.prototype.startNameEditing=function(e){var t;null==e&&(e={}),this.fEditingName||(t=this.$(".js-card-detail-title-input"),this.fEditingName=!0,t.addClass("is-editing"),e.focus&&t.focus().select())},t.prototype.stopNameEditing=function(e){var t;this.fEditingName&&(this.fEditingName=!1,t=this.$(".js-card-detail-title-input").removeClass("is-editing"),t.blur(),ke(),this.saveCardName())},t.prototype.setRelativeSidebarPos=function(){return this.fFixed=!1,this.fRelative=!0,this.$(".window-sidebar").css({left:"",top:"",position:"relative"})},t.prototype.setFixedSidebarLeftPos=function(){var e,t;return this.fFixed?(t=parseFloat(r(".window").offset().left),e=t+r(".window").width()-this.$(".window-sidebar").outerWidth(),this.$(".window-sidebar").css({left:e})):void 0},t.prototype.setFixedSidebarPos=function(){return this.fFixed=!0,this.fRelative=!1,this.setFixedSidebarLeftPos(),this.$(".window-sidebar").css({top:0,position:"fixed"})},t.prototype.fixSidebar=function(){var e,t,n,i,o;e=r(".window-overlay").off("scroll.fixSidebar"),this.fFixed=!1,this.fRelative=!1,t=parseInt(r(".window").css("margin-top")),n=parseInt(this.$(".window-sidebar").css("padding-top")),o=function(i){return function(){var o,s,a,u,c,l;a=i.$(".window-header").outerHeight(),s=null!=(u=i.$(".window-cover:visible").outerHeight())?u:0,o=null!=(c=i.$(".window-archive-banner:visible").outerHeight())?c:0,l=t+a+s+o+n,e.scrollTop()<=l||ne.fSmall||i.$(".window-sidebar").height()>r(window).height()?i.fRelative||i.setRelativeSidebarPos():i.fFixed||i.setFixedSidebarPos()}}(this),i=this.throttle(o,32),e.on("scroll.fixSidebar",i)},t.prototype.editDesc=function(e){te.stop(e),this.showFullDescription(),this.edit("desc")},t.prototype.expandDesc=function(e){te.stop(e),this.showFullDescription(),this.edit("desc",!1)},t.prototype.showFullDescription=function(e){this.fHideFullDescription=!1,r(".js-desc-content").removeClass("is-hide-full")},t.prototype.editTitle=function(e){this.startNameEditing({focus:!0})},t.prototype.archiveCard=function(e){this.model.close(),xe("Card Detail","Sidebar","Archive Button")},t.prototype.unarchiveCard=function(e){xe("Card Detail","Sidebar","Re-Open Button"),this.model.reopen()},t.prototype.deleteCardSidebar=function(e){C.toggle("delete card",{elem:e.target,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return T.hide(),e.model.destroy(),xe("Card","Delete")}}(this)}),xe("Card Detail","Sidebar","Open Delete Confirm")},t.prototype.showMoreMenu=function(e){te.stop(e),Q.toggle({elem:this.$(".js-more-menu"),view:f,options:{model:this.model,modelCache:this.modelCache}}),xe("Card Detail","Sidebar","Open More Menu")},t.prototype.openCoverInViewer=function(e){var t;te.stop(e),this.showCover()&&(t=this.model.attachmentList.get(this.model.get("idAttachmentCover")),c.isActive()||(c.show({model:this.model,attachmentModel:t}),xe("Card Detail","Open Attachment Viewer via Cover",t.getType())))},t.prototype.openMoveMenu=function(e){Q.toggle({elem:e,view:y,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openMoveFromHeader=function(e){te.stop(e),this.openMoveMenu(this.$(".js-open-move-from-header"),20),xe("Card Detail","Move Button (via Header)")},t.prototype.moveCard=function(e){te.stop(e),this.openMoveMenu(this.$(".js-move-card"),35),xe("Card Detail","Sidebar","Open Move Menu")},t.prototype.copyCard=function(e){te.stop(e),Q.toggle({elem:this.$(".js-copy-card"),view:m,options:{model:this.model,modelCache:this.modelCache}}),xe("Card Detail","Sidebar","Open Copy Menu")},t.prototype.openLabelsPopOver=function(e,t){Q.toggle({elem:e,view:v,options:re.extend({model:this.model,modelCache:this.modelCache},t)})},t.prototype.editLabelsMainSingleLabel=function(e){te.stop(e),this.openLabelsPopOver(this.$(e.target).closest(".card-label")),xe("Card Detail","Edit Labels Main Column - Single Label")},t.prototype.editLabelsMain=function(e){te.stop(e),this.openLabelsPopOver(this.$(".js-details-edit-labels")),xe("Card Detail","Edit Labels Main Column - Plus Button")},t.prototype.editLabelsSidebar=function(e){return te.stop(e),xe("Card Detail","Sidebar","Edit Labels Button"),this._openEditLabelsSidebar()},t.prototype._openEditLabelsSidebar=function(e){return this.openLabelsPopOver(this.$(".js-edit-labels"),e)},t.prototype.showVotes=function(e){te.stop(e),Q.toggle({elem:this.$(".js-show-votes"),view:z,options:{model:this.model,modelCache:this.modelCache}}),xe("Card Detail","Header Vote Button"),je("card detail","opens","Power-Up","","","card-detail-badge",$.voting)},t.prototype.doClicks=function(){return!M.sorting},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},t.prototype.checkShowCover=function(){var e,t;e=this.showCover(),t=this.model.hasStickers(),e?this.$(".js-card-cover-box").removeClass("hide window-cover-stickers-only").addClass("is-covered"):t?this.$(".js-card-cover-box").removeClass("hide is-covered").addClass("window-cover-stickers-only"):this.$(".js-card-cover-box").addClass("hide")},t.prototype.clearCover=function(){var e;return this.$(".js-card-cover-box").css({"background-color":"","background-image":""}),e=["dialog-close-button-light","dialog-close-button-dark"],r(".dialog-close-button").removeClass(e.join(" "))},t.prototype.renderCover=function(){var e,t,n,i,o,s,a,u,c,l,d,p,m,f,g,v,b,y,w,_;return this.clearCover(),this.showCover()&&(o=this.model.attachmentList.get(this.model.get("idAttachmentCover")),i=40,t=160,n=730,null!=o&&(h.isHighDPI()?(f=2*n,m=2*t):(f=n,m=t),v=o.get("previews"),g=null!=(y=te.previewBetween(v,0,m,f,1/0))?y:te.biggestPreview(v),c=null!=g?g.url:o.get("url"),e=this.$(".js-card-cover-box"),null!=(l=o.get("edgeColor"))&&(w=l.match(/[0-9a-f]{2}/gi).map(function(e){return parseInt(e,16)}),b=w[0],d=w[1],a=w[2],e.css("background-color","rgb("+b+", "+d+", "+a+")"),s=(b+d+a)/3,s>150?u="dark":105>s&&(u="light"),null!=u&&r(".dialog-close-button").addClass("dialog-close-button-"+u)),p=Math.max(i,Math.min(null!=(_=null!=g?g.height:void 0)?_:t,t)),this.$(".js-card-cover-box").css({"background-image":'url("'+c+'")',height:p,"background-size":(null!=g?g.height:void 0)<p?"initial":"contain"}))),this.checkShowCover(),this},t.prototype.renderPluginButtons=function(){var e;return e=this.subview(H,this.model),this.appendSubview(e,this.$(".js-plugin-buttons")),this},t.prototype.renderPluginBadges=function(){var e;return e=this.subview(K,this.model),this.appendSubview(e,this.$(".js-plugin-badges")),this},t.prototype.renderStickers=function(){var e,t,n,r,i;return e=this.$(".js-display-stickers").empty(),r=this.model.stickerList.models,t=r.length>0,t&&(i=function(){var e,t,i;for(i=[],e=0,t=r.length;t>e;e++)n=r[e],i.push(this.subview(X,n,{board:this.model}));return i}.call(this),this.appendSubviews(i,e)),this.checkShowCover(),this},t.prototype.renderName=function(){var e,t;return t=this.model.get("name"),e=this.model.getBoard().get("name"),this.$(".js-title-helper").text(t),this.fEditingName||this.$(".js-card-detail-title-input").val(t).trigger("autosize.resize",!1),x.title(he("card detail title",{cardName:t,boardName:e},{raw:!0})),this},t.prototype.renderDescription=function(){var e,t,n,i;return t=this.model.get("desc"),n=ee.description.format(null!=t?t:"",{textData:this.model.get("descData")}).output,e=this.$(".js-card-desc"),e.empty().append(n).data("unmarkeddown",t),pe(e[0],this.model.getBoard()),i=!/^\s*$/.test(n),this.$(".js-show-with-desc").toggleClass("hide",!i),this.$(".js-hide-with-desc").toggleClass("hide",i),r(".js-desc-content").toggleClass("is-hide-full",this.fHideFullDescription),this},t.prototype.renderList=function(){var e;return e=this.model.getList(),null!=e&&this.$(".js-current-list").removeClass("hide").html(se({listName:e.get("name"),editable:this.model.editable()})),this},t.prototype.renderArchived=function(){var e,t,n,r,i;return e=this.model.get("closed")===!0,t=(null!=(n=this.model.getList())?n.get("closed"):void 0)===!0,r=e,i=!e&&t,this.$(".js-archive-banner").toggleClass("hide",!r),this.$(".js-archived-list-banner").toggleClass("hide",!i),this.$(".js-archive-card").toggleClass("hide",e),this.$(".js-unarchive-card").toggleClass("hide",!e),this.$(".js-delete-card").toggleClass("hide",!e),this},t.prototype.showAllActions=function(e){return this.fShowAllActions=!0,this.renderShowAllActionsButton(),this.getData()},t.prototype.renderShowAllActionsButton=function(){var e,t,n,r;return r=!l.isLoggedIn()||l.me().getShowDetails(),e=this.model.actionList.filter(function(e){return r?!0:e.isCommentLike()}),n=e.length>=this.defaultActionLimit,t=this.fShowAllActions||!n,this.$(".js-show-all-actions").toggleClass("hide",t)},t.prototype.renderActionList=function(){var e;return e=!l.isLoggedIn()||l.me().getShowDetails(),this.actionListView.setShowDetails(e),this.waitForId(this.model,function(e){return function(){return e.actionListView.render()}}(this)),this.$(".js-show-details").toggleClass("hide",e),this.$(".js-hide-details").toggleClass("hide",!e),this},t.prototype.renderMembers=function(e){var t,n,r,i;return t=this.$(".js-card-detail-members-list").empty(),i=this.model.memberList.filterDeactivated({model:this.model.getBoard()}).models,r=function(){var e,t,r;for(r=[],e=0,t=i.length;t>e;e++)n=i[e],r.push(this.getMemberOnCardHtml(n));return r}.call(this).join(""),t.html(r),this.model.editable()&&t.append(oe({klass:"js-details-edit-members"})),this.$(".js-card-detail-members").toggleClass("hide",0===i.length),this},t.prototype.renderLabels=function(){var e,t,n,r,i;return t=this.model.getLabels().sort(I.compare),e=this.$(".js-card-detail-labels-list").empty(),i=function(){var e,i,o;for(o=[],e=0,i=t.length;i>e;e++)r=t[e],n=this.model.dataForLabel(r),n.extraClasses=["mod-card-detail"],this.model.editable()&&n.extraClasses.push("mod-clickable"),o.push(me(n));return o}.call(this),e.append(i),this.model.editable()&&e.append(oe({klass:"js-details-edit-labels"})).addClass("js-edit-label"),this.$(".js-card-detail-labels").toggleClass("hide",0===t.length),this},t.prototype.renderSubscribe=function(){var e,t,n;return e=this.$(".js-subscribe-sidebar-button"),t={subscribed:this.model.get("subscribed")||(null!=(n=this.model.get("badges"))?n.subscribed:void 0)},e.html(ae(t)),this.$(".js-subscribed-indicator-header").toggleClass("hide",!t.subscribed),this},t.prototype.renderAging=function(){var e,t,n,r;return n=this.model.getBoard(),t=n.isPowerUpEnabled("cardAging"),e=this.$(".js-card-detail-age-badge").removeClass(this.model.getAllAgingClasses()),t&&(r=this.model.getAgingData(),e.removeData("date").attr("dt",this.model.get("dateLastActivity")),"pirate"===r.mode&&e.addClass(r.agingClassesToAdd),S.update(this.$(".js-card-detail-age"))),this.$(".js-card-detail-age").toggleClass("hide",!t),this},t.prototype.renderDueDate=function(){var e,t,n,r,i,o;return n=this.model.get("due"),r=this.model.get("dueComplete"),n?(o=be(n).calendar(),i=B.relativeInfoForDueDate(n,r),null!=i&&(o+=" ("+i+")"),t=[],t.push(B.classForDueDate(n,r)),this.model.editable()&&t.push("is-clickable"),e=this.$(".js-card-detail-due-date-badge").removeClass(function(e,t){return(t.match(/is-due-\S+/g)||[]).join(" ")}).addClass(t.join(" ")).attr("title",B.titleForDueDate(n,r)),e.find(".js-date-text").text(o).toggleClass("js-details-edit-due-date",this.model.editable()),e.find(".js-card-detail-due-date-badge-complete").toggleClass("js-details-toggle-due-date-complete",this.model.editable()),this.$(".js-card-detail-due-date").removeClass("hide"),this):(this.$(".js-card-detail-due-date").addClass("hide"),this)},t.prototype.renderVotes=function(){var e,t,n,r,i,o,s;return t={voted:this.model.voted(),canVote:this.model.getBoard().canVote(l.me())},e=this.$(".js-vote-sidebar-button"),e.html(ce(t)),n=null!=(r=null!=(i=this.model.get("badges"))?i.votes:void 0)?r:0,n&&this.$(".js-card-detail-votes-badge").text(fe("votes",n)).toggleClass("is-voted",null!=(o=null!=(s=this.model.get("badges"))?s.viewingMemberVoted:void 0)?o:!1),this.$(".js-card-detail-votes").toggleClass("hide",0===n),this},t.prototype.sortChecklists=function(){var e;return e=this.$(".js-checklist-list"),te.withoutAlteringSelection(function(t){return function(){return t.model.checklistList.forEach(function(n){var r;return r=t.existingSubview(_,n),e.append(r.el)})}}(this)),this},t.prototype.removeChecklist=function(e){return this.deleteSubview(this.existingSubview(_,e))},t.prototype.renderChecklists=function(){var e,t,n,i;return ge("render","rendering checklists"),e=this.$(".js-checklist-list").empty(),i=function(){var e,n,r,i;for(r=this.model.checklistList.models,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(this.subview(_,t,{card:this.model}));return i}.call(this),this.appendSubviews(i,e),M.refreshIfInitialized(e),(null!=(n=this.model)?n.editable():void 0)&&this.$(".js-checklist-list").sortable({axis:"y",handle:".window-module-title",delay:75,distance:7,tolerance:"pointer",placeholder:"checklist placeholder",items:".checklist",start:function(e,t){var n;return n=r(t.helper).outerHeight(),r(t.placeholder).height(n)}}),this},t.prototype.showFewerAttachments=function(e){te.stop(e),this.fShowAllAttachments=!1,this.renderAttachments()},t.prototype.showMoreAttachments=function(e){te.stop(e),this.fShowAllAttachments=!0,this.renderAttachments()},t.prototype.renderAttachments=function(){var e,t;return null!=(t=this._renderAttachmentsPromise)&&t.cancel(),e=re.clone(this.model.attachmentList.models).reverse(),this._renderAttachmentsPromise=Y.try(function(t){return function(){return G.all({timeout:5e3,command:"attachment-sections",card:t.model,board:t.model.getBoard(),options:{entries:W.attachments(e)}})}}(this)).cancellable().then(function(t){return function(n){var r,i,o,s,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E;for(p={},E={},y=re.chain(n).pluck("idPlugin").uniq().value(),_=0,k=y.length;k>_;_++)b=y[_],je("card details","views","Power-Up","","","attachment-sections",b);u=t.$(".js-plugin-sections"),P=function(){var e,t,r,i,o,s,a;for(a=[],e=0,t=n.length;t>e;e++)if(M=n[e],(null!=M&&null!=(o=M.claimed)?o.length:void 0)>0){for(s=M.claimed,i=0,r=s.length;r>i;i++)h=s[i],p[h.id]=!0;O=M.id||M.title,(re.isFunction(O)||E[O])&&(O=re.uniqueId("attachment-section_")),E[O]=!0,B=this.subview(J,this.model,{},O),B.updateSection(M),a.push(B)}return a}.call(t),t.ensureSubviews(P,u),w=4,x=0,T=[];for(v in e){if(c=e[v],x===w||x===e.length)break;T.push(c),p.hasOwnProperty(c.id)||x++}return C=re.reject(e,function(e){return p[e.id]}),m=x>0,f=x<C.length,i=t.$(".js-attachments-section"),r=i.find(".js-attachment-list"),t.enableAttachmentSorting(r),g=(C.length-w).toString(),i.find(".js-view-all-attachments").text(he("view all attachments",{hiddenCount:g})),o=i.find(".js-show-fewer-attachments").addClass("hide"),s=i.find(".js-show-more-attachments").addClass("hide"),S=(j=t.numAttachmentsProcessing.get())?re.times(Math.min(3,j),function(e){return t.subview(L,t.model,null,"processing-"+e)}):[],d=m?(l=e,f?t.fShowAllAttachments?o.removeClass("hide"):(s.removeClass("hide"),l=T):void 0,l.map(function(e){var n;return n=p.hasOwnProperty(e.id),t.subview(a,e,{isHidden:n,onReply:function(){return t.replyToAttachment(e)},onPluginThumbnail:function(e){return t.pluginThumbTrackCache[e]?void 0:(t.pluginThumbTrackCache[e]=!0,je("card details","views","Power-Up","","","attachment-thumbnail",e))}})})):[],P=Be.call(S).concat(Be.call(d)),t.ensureSubviews(P,r),i.toggleClass("hide",re.isEmpty(P))}}(this)).catch(Y.CancellationError,function(){}),this._renderAttachmentsPromise.done(),this},t.prototype.renderEditing=function(){var e,t,n,r;return r=this.model.memberEditingList.models,e={members:function(){var e,i,o;for(o=[],e=0,i=r.length;i>e;e++)t=r[e],l.isMe(t)||null==t.get("editing")||(n=t.toJSON(),n.icon=function(){switch(t.get("editing").action){case"commenting":return"comment";case"editing":return"edit";default:return"edit"}}(),o.push(n));return o}()},this.$(".js-editing-members").empty().append(le(e)).toggleClass("hide",0===e.members.length),this},t.prototype.sortStop=function(e,t){te.stopPropagation(e),t.item.trigger("movechecklist",[t])},t.prototype.sortStopAttachments=function(e,t){return te.stopPropagation(e),t.item.trigger("moveattachment",[t])},t.prototype.keydownEvent=function(e){return t.__super__.keydownEvent.apply(this,arguments),l.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"editing"})},t.prototype.keydownCommentEvent=function(e){var t;return l.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"commenting"}),t=A.getKey(e),t!==D.Tab||!r(e.target).hasClass("new-comment-input")||!this.model.editable()||Q.view instanceof p||""!==r(e.target).val()||(te.stop(e),this.submitComment(e)),A.isForceSubmitEvent(e)&&!this._isCommentTooLong()?this.submitComment(e):this.checkInsert(e)},t.prototype._isCommentTooLong=function(){return this.$(".js-new-comment-input").val().length>this.maximumCommentLength},t.prototype.renderCommentSubmitAbility=function(e){var t,n;return t=this._isCommentTooLong(),n=0===this.$(".js-new-comment-input").val().length,this.$(".js-add-comment").prop("disabled",n||t),this.$(".comment-too-long-warning").toggleClass("is-shown",t),this.$(".comment-too-long-warning").find(".js-attach-comment").toggle("undefined"!=typeof Blob&&null!==Blob),this},t.prototype._cancelEditing=function(){return l.me().editing({idBoard:this.model.getBoard().id})},t.prototype.commentInputEvent=function(e){return this.renderCommentSubmitAbility(),this},t.prototype.clearComment=function(){var e;return e=r(this.commentInput),e.val("").css("height",""),this.renderCommentSubmitAbility()},t.prototype.submitComment=function(e){var t,n,i;return xe("Card Detail","Comment","Submit Comment"),te.stop(e),t=r(this.commentInput),i=t.val(),this.clearComment(),this._cancelEditing(),this.model.addComment(i),(null!=(n=Ce("commentAndSubscribe"))?n.get("subscribe"):void 0)&&this.model.subscribe(!0),V.cancelEdits(),this.collapseComment(),this.renderCommentSubmitAbility(),Q.hide(),!1},t.prototype.clearEdits=function(){return this._cancelEditing(),t.__super__.clearEdits.apply(this,arguments)},t.prototype.commitEdits=function(){return this._cancelEditing(),t.__super__.commitEdits.apply(this,arguments)},t.prototype.stopEditing=function(){return this._cancelEditing(),t.__super__.stopEditing.apply(this,arguments)},t.prototype.truncateComment=function(e){var t;return t=this.$(".js-new-comment-input"),t.val(t.val().substr(0,this.maximumCommentLength)),this.$(".js-new-comment-input").autosize(),this.renderCommentSubmitAbility()},t.prototype.attachComment=function(e){var t;return t=new Blob([this.$(".js-new-comment-input").val()],{type:"text/plain"}),this.incrementNumAttachmentsProcessing(),this.model.upload(t,"comment.txt",this.callback(function(e){return function(){return e.decrementNumAttachmentsProcessing()}}(this))),this.clearComment(),V.cancelEdits(),this.collapseComment()},t.prototype.inputComment=function(e){var t;t=this.$(".js-new-comment"),V.cancelEdits(this.commentInput),t.addClass("is-focused")},t.prototype.clickAwayFromComment=function(e){var t,n;if(!Q.isVisible&&(n=e.target,t=this.$(".js-new-comment"),!r(n).closest(t).length||0!==n.children.length))return this.collapseComment()},t.prototype.collapseComment=function(){return this.$(".js-new-comment").removeClass("is-focused")},t.prototype.replyToAction=function(e,t){var n,r,i,o,s,a,u;o=this.modelCache.get("Member",t.get("idMemberCreator")),u=null!=o?o.get("username"):void 0,n=this.$(this.commentInput),a=t.isCommentLike()&&null!=u?(V.cancelEdits(this.commentInput),RegExp("@"+u+"(\\W|$)").test(n.val())?(n.focus(),null):"@"+u+" "):t.isAddAttachment()&&null!=(r=this.model.attachmentList.get(null!=(s=t.get("data").attachment)?s.id:void 0))?(i=ie(r),l.isMe(o)?i:["@"+u,i].join(" ")):void 0,a&&(n.addClass("is-focused"),te.insertSelection(n,a),n.trigger("autosize.resize"))},t.prototype.replyToAttachment=function(e){var t;return V.cancelEdits(this.commentInput),t=this.$(this.commentInput),t.addClass("is-focused"),te.insertSelection(t,ie(e)),t.trigger("autosize.resize")},t.prototype.getCard=function(){return this.model},t.prototype.getTextInput=function(){return this.$(".js-new-comment-input")},t.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-comment-add-card:visible")[0]},t.prototype.openEditMembersPopOver=function(e){Q.toggle({elem:e,view:b,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.editMembersMain=function(e){te.stop(e),this.openEditMembersPopOver(this.$(".js-details-edit-members")),xe("Card Detail","Edit Members via Main Column")},t.prototype.changeMembersSidebar=function(e){te.stop(e),this.openEditMembersPopOver(this.$(".js-change-card-members")),xe("Card Detail","Sidebar","Open Manage Member Menu")},t.prototype.addChecklistSidebar=function(e){return te.preventDefault(e),Q.toggle({elem:e.target,view:o,options:{model:this.model,modelCache:this.modelCache,cardView:this}}),xe("Card Detail","Add Checklist Button","Open Add Checklist Menu"),!1},t.prototype.showDueDateBadgeMenu=function(e){te.stop(e),Q.toggle({elem:this.$(".js-details-edit-due-date"),view:j,options:{model:this.model,modelCache:this.modelCache}}),xe("Card Detail","Due Date Badge","Open Due Date Menu")},t.prototype.toggleDueDateComplete=function(e){var t;return t=!this.model.get("dueComplete"),this.model.update({dueComplete:t}),xe("Card Detail","Due Date Badge",t?"Marked Complete":"Marked Incomplete")},t.prototype.openAttachPicker=function(e){var t,n;return te.stop(e),t=r(e.target).closest(".js-attach"),Q.toggle({elem:t,view:u,options:{model:this.model,modelCache:this.modelCache}}),n=r(t).hasClass("inline")?"Inline":"Sidebar",xe("Card Detail","Open Attachment Type Picker","Via "+n+" Button"),!1},t.prototype.dueDateSidebar=function(e){return te.preventDefault(e),Q.toggle({elem:this.$(".js-add-due-date"),view:j,options:{model:this.model,modelCache:this.modelCache}}),xe("Card Detail","Sidebar","Open Due Date Menu"),!1},t.prototype.subscribeToCard=function(e){return this.model.subscribe(!0),xe("Card Detail","Sidebar","Subscribe"),!1},t.prototype.unsubscribeFromCard=function(e){return this.model.subscribe(!1),xe("Card Detail","Sidebar","Unsubscribe"),!1},t.prototype.vote=function(e){return te.preventDefault(e),this.model.vote(!0),xe("Card Detail","Sidebar","Vote"),je("card detail","opens","Power-Up","","","card-button",$.voting),!1},t.prototype.unvote=function(e){return te.preventDefault(e),xe("Card Detail","Sidebar","Unvote"),je("card detail","opens","Power-Up","","","card-button",$.voting),this.model.vote(!1),!1},t.prototype.openFormatHelp=function(e){return xe("Card Detail","Formatting Help"),Q.toggle({elem:this.$(".js-format-help"),view:P,options:{model:this.model,modelCache:this.modelCache},keepEdits:!0}),!1},t.prototype.dragenter=function(e){var t;if(this.model.editable())return this.$el.addClass("is-drophover"),t=r(".window-overlay").scrollTop()+200,this.$(".dropzone").css({"padding-top":t+"px"})},t.prototype.dragleave=function(e){return this.$el.removeClass("is-drophover")},t.prototype.dropFiles=function(e){var t,n;if(this.model.editable()&&(xe("Card Detail","Drop Attachment Upload"),t=e.detail,!Se(this.model.getBoard(),t)))return this.incrementNumAttachmentsProcessing(t.length),n=U.lock("card drop files"),Y.resolve(t).each(function(e){return function(t){var n;return n=t.name||we(),ye(e.model,"upload",t,n).finally(e.callback(function(){return e.decrementNumAttachmentsProcessing()}))}}(this)).catch(function(){return s.show("unable to upload file","error","upload",5e3)}).finally(function(){return U.unlock(n)}).done(),e.stopPropagation()},t.prototype.dropUrl=function(e){var t;if(this.model.editable())return xe("Card Detail","Drop Attachment Url"),t=e.detail,this.incrementNumAttachmentsProcessing(),this.model.uploadUrl(t,this.callback(function(e){return function(){return e.decrementNumAttachmentsProcessing()}}(this))),e.stopPropagation()},t.prototype.focusChecklistAdd=function(e){return this.existingSubview(_,e).focusNewTaskInput()},t.prototype.closeDialog=function(){return T.hide()},t.prototype.highlight=function(e,t){var n,r,i,o;if(null!=(i=/^([a-z]+)-([a-f0-9]{24})$/.exec(e)))switch(n=i[0],o=i[1],r=i[2],o){case"action":case"comment":this.actionListView.setHighlight(r),this.model.actionList.get(r)||this.showAllActions(),t&&this.scrollToHighlight()}},t.prototype.interceptHighlightLink=function(e){var t,n,r,i,o;e.target.href&&(o=te.relativeUrl(e.target.href),n=x.getCardUrl(this.model),null!=(i=RegExp("^"+n+"\\#([^\\#]+)$").exec(o))&&(t=i[0],r=i[1],r&&(te.stop(e),r===location.hash.substr(1)?(history.replaceState(null,null,location.pathname),this.actionListView.setHighlight(null)):(history.replaceState(null,null,location.pathname+"#"+r),this.highlight(r,!0)))))},t.prototype.showDetails=function(e){return te.stop(e),l.me().setShowDetails(!0),this.getData(),this.renderActionList()},t.prototype.hideDetails=function(e){return te.stop(e),l.me().setShowDetails(!1),this.getData(),this.renderActionList()},t.prototype.enableAttachmentSorting=function(e){var t;return(null!=(t=this.model)?t.editable():void 0)?e.sortable({axis:"y",handle:[".attachment-thumbnail-details",".attachment-thumbnail-preview"].join(","),delay:75,distance:7,tolerance:"pointer",helper:"clone",placeholder:"attachment-thumbnail placeholder",items:".attachment-thumbnail",start:function(e,t){var n;return n=r(t.helper).outerHeight(),r(t.placeholder).height(n)}}):void 0},t}(O))},{}],416:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e("jquery"),i=e(79),s=e(421),a=e(491),u=e(537),c=e(544),d=e(522),p=e("underscore"),f=e(45),l=e("bluebird"),m=e(238),h=function(e,t){var n;for(e=p.clone(e),n=[];e.length>0;)n.push(e.splice(0,t));return n},t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.viewType=s,t.prototype.getModels=function(){return this.collection.models},t.prototype.render=function(){return f("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),this.options.deferCards?c.enqueue("deferredCardList_"+this.cid,function(e){return function(){return e.progressiveRender()}}(this)):this.progressiveRender(),this},t.prototype.progressiveRender=function(){var e;return e=Math.max(10,Math.ceil(window.innerHeight/32)),l.resolve(h(this.getModels(),e)).each(function(e){return function(t){var n;return e.appendSubviews(function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push(this.subview(this.viewType,n));return i}.call(e)),new l(m(e,"defer"))}}(this)).tap(function(e){return function(){var t;"chrome"!==(t=i.browserStr)&&"firefox"!==t&&"opera"!==t&&"windows"===i.osStr&&(e.defer(function(){return r("#board").css("bottom",1)}),e.setTimeout(function(){return r("#board").css("bottom",0)},150))}}(this)).done()},t.prototype.insertSubview=function(e,t,n){var r;return null==n&&(n=this.$el),f("render","inserting "+e.$el.find("h2").text()+" at position "+t),"number"==typeof t?t=0>=t?n.children().eq(0):t<n.children().length?n.children().eq(t):void 0:t instanceof d&&(t=t.$el),r=e.model,e.$el.is(":empty")?(e.delegateEvents(),e.render()):n.hasClass("hide")||r.getBoard().filter.satisfiesFilter(r)||e.renderFiltered(),(null!=t?t.length:void 0)>0?e.$el.insertBefore(t):n.append(e.$el),u.refreshIfInitialized(this.$el)},t}(a)},{}],417:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),i=e(33),o=e(162),a=e(97),u=e(20),c=e(37),l=e(38),d=e("bluebird"),p=e(599),h=e(129),m=e(522),f=e("underscore"),g=e(910),v=e(48),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){return this.showAllOrgMembers=!1,this.updateSearch=f.debounce(this.updateSearch,100),this.makeDebouncedMethods("renderMems"),null!=this.model.memberList&&this.listenTo(this.model.memberList,"add remove reset",function(e){return function(){return e.updateOrdering(),e.renderMemsDebounced()}}(this)),this.updateOrdering()},t.prototype.events={"click .js-select-member":"selectMem","click .js-show-org-members":"showOrgMembers","mouseenter .pop-over-member-list .item":"hoverMemberSelect",input:"updateSearch",keydown:"keydownEvent"},t.prototype.updateOrdering=function(){var e;return this._onCardMembers={},this._onListMembers={},this._onBoardMembers={},e=function(e,t){return t.memberList.forEach(function(t){return e[t.id]=!0})},this.model instanceof o&&e(this._onCardMembers,this.model),this.model.getList().cardList.forEach(e.bind(null,this._onListMembers)),this.model.getBoard().listList.forEach(function(t){return function(n){return n.cardList.forEach(e.bind(null,t._onBoardMembers))}}(this))},t.prototype.render=function(){var e;return e=this.model.getBoard(),this.$el.html(g({includeOrgMembers:null!=e.getOrganization()&&e.canInviteMembers()})),this.renderMems()},t.prototype.getSearch=function(){return this.$(".js-search-mem").val().trim()},t.prototype.filteredMembers=function(e,t){var n;return n=RegExp("^"+h.escapeForRegex(t.toLowerCase())),f.chain(e).filter(function(e){return function(e){var t;return t=h.getMemNameArray(e),f.find(t,function(e){return n.test(e)})}}(this)).first(8).value()},t.prototype.filteredBoardMembers=function(e){var t,n,r,o;return n=this.model.getBoard(),r=this.model.getList(),t=n.memberList.filterDeactivated({force:!0}),o=t.sortBy(function(e){return function(t){var n;return n=i.isMe(t)?0:e._onCardMembers[t.id]?1:e._onListMembers[t.id]?2:e._onBoardMembers[t.id]?3:4,n+t.get("fullName")}}(this)),e?this.filteredMembers(o,e):o},t.prototype.filteredOrgMembers=function(e){var t;return this.showOrgSection()?(t=this.model.getBoard().getOrganization(),null==this.orgMembersPromise&&(this.orgMembersPromise=l.loadOrganizationMembersData(t.id)),this.orgMembersPromise.then(function(n){return function(r){var i,o;return i=(o=t.memberList.filterDeactivated({force:!0})).without.apply(o,n.model.getBoard().memberList.models),e?n.filteredMembers(i,e):i}}(this))):[]},t.prototype.hasSearch=function(){return""!==this.getSearch()},t.prototype.showOrgSection=function(){var e;return e=this.model.getBoard().getOrganization(),null!=e&&(this.showAllOrgMembers||this.hasSearch())},t.prototype.renderMems=function(){var e,t,n,r,i,o;return o=this.getSearch(),e=this.filteredBoardMembers(o),t=this.filteredOrgMembers(o),r={".js-board-members":e,".js-org-members":t},i=this.showOrgSection(),this.$(".js-show-org-members").toggleClass("hide",i),this.$(".js-org-members").toggleClass("hide",!i),null!=(n=this._renderMemsPromise)&&n.cancel(),this._renderMemsPromise=d.each(f.keys(r),function(e){return function(t){var n,i,o;return o=e.$(t),0!==o.length?(n=o.find(".js-loading"),i=o.find(".js-no-results"),n.removeClass("hide"),i.addClass("hide"),d.resolve(r[t]).then(function(t){var r,s,a;return n.addClass("hide"),r=o.find(".js-mem-list"),r.toggleClass("collapsed",t.length>9),i.toggleClass("hide",t.length>0),a=function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)s=t[e],r.push(this.subview(p,s,{showUnconfirmed:!0,card:this.model}));return r}.call(e),e.ensureSubviews(a,r)})):void 0}}(this)).cancellable().then(function(e){return function(){var t;return e.hasSearch()&&(t=e.$el.find(".item").first(),t.length>0)?h.selectMenuItem(e.$el,".item",t):void 0}}(this)).done(),this},t.prototype.hoverMemberSelect=function(e){return h.selectMenuItem(this.$el,".item",e.currentTarget);
},t.prototype.keydownEvent=function(e){var t;t=a.getKey(e),t===u.Tab||t===u.Enter?(h.stop(e),this.$(".js-mem-list .item.selected:first .js-select-member").first().click(),this.$(".js-search-mem").val(""),this.focusSearch(),this.renderMems()):(t===u.ArrowUp||t===u.ArrowDown)&&(h.stop(e),h.navMenuList(this.$el,".item",t))},t.prototype.updateSearch=function(e){return this.renderMems(),this.focusSearch()},t.prototype.selectMem=function(e){var t,n,i,o,s,a;h.stop(e),a=this.model,n=r(e.currentTarget),t=n.closest(".item"),o=n.attr("idMember"),t.hasClass("active")?(a.removeMember(o),t.removeClass("active"),v("Card","Change Member","Remove Member")):(i=this.model.getBoard(),s=c.get("Member",o),d.try(function(){return i.hasActiveMembership(s)?void 0:d.fromNode(function(e){return i.addMember(s,e),v("Card","Add Member to Board and Card")})}).then(function(){return a.addMember(o),t.addClass("active"),v("Card","Change Member","Add Member")}).done()),this.focusSearch()},t.prototype.focusSearch=function(){this.$(".js-search-mem").focus()},t.prototype.showOrgMembers=function(e){this.showAllOrgMembers=!0,this.renderMems()},t}(m)},{}],418:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e(215),i=e(33),s=e(536),a=e(34),u=e(542),c=e(426),l=e(522),d=e(106),p=e(519),h=e(48),t.exports=d(c,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="move card",t.prototype.initialize=function(e){var t;return t=e.onCommit,this.onCommit=null!=t?t:function(){},this.listenTo(i.me().boardList,"add remove reset",this.render)},t.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData","click .js-submit":"commitChange"},t.prototype.render=function(){var e,t,n,r,o,s,a,u,c,l;for(t={organizations:i.me().getOpenBoardsByOrg(!0)},c=t.organizations,n=0,o=c.length;o>n;n++)for(a=c[n],l=a.boards,r=0,s=l.length;s>r;r++)e=l[r],e.id===this.model.get("idBoard")&&(e.selected=!0);return u={move_card_controls:p.move_card_controls},this.$el.html(p.fill("popover_move_card",t,{},u)),this.updateBoardData(),this},t.prototype.commitChange=function(e){var t,n,i,o,a,c,l,d;t=this.$(".js-select-board"),n=this.$(".js-select-list"),i=this.$(".js-select-position"),o=t.find("option:selected").val(),a=n.find("option:selected").val(),d=i.find("option:selected").val(),c=parseInt(i.find("option:selected").prop("index"),10),o===this.model.getBoard().id?(l=this.model.getBoard().listList.get(a),this.model.moveToList(l,c),h("Card","Move Menu","Same Board")):null!=o&&null!=a&&null!=d&&(h("Card","Move Menu","Changed Board"),this.model.getList().cardList.remove(this.model),s.hide(),r({url:"/1/cards/"+this.model.id,type:"put",data:{idList:a,idBoard:o,pos:d},success:function(e){return function(t){return e.model.board=null,e.model.set("idBoard",t.idBoard),e.model.set("idList",t.idList),e.model.set("pos",t.pos)}}(this)})),this.onCommit(),u.hide()},t}(l))},{}],419:[function(e,t,n){var r,i,o,s,a;r=e(555),o=e(542),s=e(129),a=e(854),t.exports=i=function(){function e(){}return e.prototype.openMemberOnCardMenu=function(e){var t,n,i,a;s.stop(e),n=this.$(e.target).closest(".member"),i=n.attr("data-idmem"),a=this.modelCache.get("Member",i),t=this.model,o.toggle({elem:n,view:r,options:{model:a,modelCache:this.modelCache,card:t}})},e.prototype.getMemberOnCardHtml=function(e){var t,n,r;return n=e.toJSON(),t=this.model.getBoard(),n.isVirtual=(null!=(r=t.getOrganization())?r.isVirtual(e):void 0)||t.isVirtual(e),n.isDeactivated=t.isDeactivated(e),a(n)},e}()},{}],420:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p;r=e(79),i=e(80),o=e(495),s=e(200),p=e(519),a=e("underscore"),l=e(820),d=e(517)("badge"),c=e(101),u=d.renderable(function(e){var t,n,r,s,a,u,l,p,h,m,f,g;return h=e.notifications,m=e.subscribed,g=e.votes,f=e.viewingMemberVoted,l=e.due,p=e.dueComplete,u=e.description,a=e.comments,n=e.attachments,r=e.checkItems,s=e.checkItemsChecked,t=e.archived,h&&d.div(".badge.is-unread-notification",{title:c("badge.notifications")},function(){return d.span(".badge-icon.icon-sm.icon-notification"),d.span(".badge-text",function(){return d.text(h)})}),m&&d.div(".badge.is-icon-only",{title:c("badge.subscribed")},function(){return d.span(".badge-icon.icon-sm.icon-subscribe")}),g>0&&d.div(".badge",{title:c("badge.votes"),class:d.classify({"is-voted":f})},function(){return d.span(".badge-icon.icon-sm.icon-vote"),d.span(".badge-text",function(){return d.text(g)})}),l&&d.div(".badge",{title:o.titleForDueDate(l,p),class:o.classForDueDate(l,p)},function(){return d.span(".badge-icon.icon-sm.icon-clock"),d.span(".badge-text",function(){return d.text(i.toDateString(l))})}),u&&d.div(".badge.is-icon-only",{title:c("badge.description")},function(){return d.span(".badge-icon.icon-sm.icon-description")}),a>0&&d.div(".badge",{title:c("badge.comments")},function(){return d.span(".badge-icon.icon-sm.icon-comment"),d.span(".badge-text",function(){return d.text(a)})}),n>0&&d.div(".badge",{title:c("badge.attachments")},function(){return d.span(".badge-icon.icon-sm.icon-attachment"),d.span(".badge-text",function(){return d.text(n)})}),r>0&&d.div(".badge",{title:c("badge.checkitems"),class:d.classify({"is-complete":s===r})},function(){return d.span(".badge-icon.icon-sm.icon-checklist"),d.span(".badge-text",function(){return d.text(s),d.text("/"),d.text(r)})}),t?d.div(".badge",{title:c("badge.archived.title")},function(){return d.span(".badge-icon.icon-sm.icon-archive"),d.span(".badge-text",function(){return d.text(c("badge.archived.text"))})}):void 0}),t.exports={renderCover:function(){var e,t,n,i,o,s,a,u,c,l;return this.showCover()&&(n=this.model.attachmentList.get(this.model.get("idAttachmentCover"))),null!=n?(a=r.isHighDPI()?600:300,u=null!=(c=n.smallestPreviewBiggerThan(a))?c:n.biggestPreview(),o=null!=u?u.url:n.get("url"),e=this.$(".js-card-cover"),e.css({"background-color":null!=(l=n.get("edgeColor"))?l:"transparent","background-image":'url("'+o+'")'}).toggleClass("is-no-preview-size",null==u),null!=u&&(t=this.$(".js-card-stickers"),s=Math.min(u.height,260),i=245*u.height/u.width,s>=i?(e.css({height:i,"background-size":"cover"}),t.css("height",i)):(e.css({height:s,"background-size":"contain"}),t.css("height",s)))):this.$(".js-card-cover").css({"background-image":"","background-color":"",height:""}).removeClass("is-no-preview-size"),this.$el.toggleClass("is-covered",null!=n),this},getBadgesHtml:function(){var e,t;return e=null!=(t=this.model.get("badges"))?t:{},u({subscribed:e.subscribed,description:e.description,comments:e.comments,attachments:e.attachments,checkItems:e.checkItems,checkItemsChecked:e.checkItemsChecked,votes:e.votes,viewingMemberVoted:e.viewingMemberVoted,due:this.model.get("due"),dueComplete:this.model.get("dueComplete"),notifications:a.filter(this.modelCache.all("Notification"),function(e){return function(t){var n,r;return t.get("unread")&&null!=e.model.id&&(null!=(n=t.get("data"))&&null!=(r=n.card)?r.id:void 0)===e.model.id}}(this)).length,archived:this.model.get("closed")})},renderBadges:function(){var e,t;return e=null!=(t=this.model.get("badges"))?t:{},this.el.querySelector(".js-badges").innerHTML=this.getBadgesHtml(),this},renderMembers:function(e){var t,n,r,i;return t="",i=this.model.getBoard().getOrganization(),r=function(){var e,t,r;for(t=this.model.memberList.models,r=[],e=t.length-1;e>=0;e+=-1)n=t[e],r.push(this.getMemberOnCardHtml(n));return r}.call(this),this.$(".js-list-card-members").empty().append(r.join("")),this},labelsData:function(){return a.chain(this.model.getLabels()).sort(s.compare).map(function(e){return function(t){return e.model.dataForLabel(t)}}(this)).filter(function(e){return!a.isEmpty(e.color)}).value()},renderLabels:function(){var e,t,n;return n=function(){var n,r,i,o;for(i=this.labelsData(),o=[],n=0,r=i.length;r>n;n++)t=i[n],e=t,e.extraClasses=["mod-card-front"],o.push(l(e));return o}.call(this),this.$(".js-card-labels").empty().append(n),this}}},{}],421:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N,V,$,R,z,U,F,q,H=function(e,t){function n(){this.constructor=e}for(var r in t)K.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},K={}.hasOwnProperty;r=e("jquery"),i=e(532),o=e(33),s=e(79),a=e(526),u=e(417),l=e(419),d=e(420),p=e(6),h=e(422),m=e(80),e(492),f=e(537),v=e(20),b=e(530),y=e(272),w=e(665),_=e(542),k=e(544),C=e("bluebird"),j=e(425),x=e("promise-queue"),S=e(699),T=e(520),M=e(129),B=e(522),O=e("underscore"),D=e(45),I=e(106),U=e(519),F=e(48),N=e("moment"),A=e(101),q=e(523),$=e(501),z=e(138),V=e(132),L=e(238),R=e(510),P=e(763),g=new x(1),E=function(e){g.add(function(){return new C(function(t){e.hookDroppable(),O.defer(t)})})},t.exports=I(l,c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return H(t,e),O.extend(t.prototype,d),t.prototype.className="list-card js-member-droppable",t.prototype.tagName="a",t.prototype.filterDeactivated=!0,t.prototype.showMemberStatus=!1,t.prototype.applyBoardCardFilter=!0,t.prototype.events={moveto:"moveTo",movein:"moveIn",moveToCalendarDay:"moveToCalendarDay",moveInCalendarDay:"moveInCalendarDay","click .js-open-quick-card-editor":"openQuickCardEditor","click .js-member-on-card-menu":"openMemberOnCardMenu","click .card-label.mod-card-front":"labelClick",click:"showDetail",mouseenter:function(){return this.trigger("mouseEnterCardView")},mousemove:function(){return this.trigger("mouseMoveCardView")},mouseleave:function(){return this.trigger("mouseLeaveCardView")},"mouseenter .card-label.mod-card-front":"labelMouseEnter","mouseleave .card-label.mod-card-front":"labelMouseLeave","dd-enter:files":"dragenter","dd-leave:files":"dragleave","dd-drop:files":"dropFiles","dd-enter:url":"dragenter","dd-leave:url":"dragleave","dd-drop:url":"dropUrl",shortcut:"shortcut","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl"},t.prototype.initialize=function(){var e,t,n,r;for(r=["filterDeactivated","showMemberStatus","applyBoardCardFilter"],e=0,t=r.length;t>e;e++)n=r[e],null!=this.options[n]&&(this[n]=this.options[n]);k.enqueue("initialize_"+this.cid,function(e){return function(t){var n,r;return r=t.delayed,r&&e.render(),e.makeDebouncedMethods("renderName","renderLabels","renderCover","renderFiltered","renderPowerUpEffects","renderStickers","renderBadges","renderDueComplete"),e.listenTo(e.model,{"change:name":e.renderNameDebounced,"change:labels":e.renderLabelsDebounced,"change:idAttachmentCover":e.renderCoverDebounced,"change:name change:labels change:idLabels change:due change:dueComplete":e.renderFilteredDebounced,"change:dueComplete":e.renderDueComplete,"change:dateLastActivity":e.renderPowerUpEffectsDebounced,"change:badges change:due change:dueComplete change:subscribed":e.renderBadgesDebounced,keyboardMove:e.scrollIntoView}),e.listenTo(e.modelCache,"add:Notification remove:Notification change:Notification",e.renderBadgesDebounced),e.listenTo(m,"renderInterval",e.renderBadgesDebounced),e.listenTo(e.model.memberList,"add remove reset",e.frameDebounce(function(){return this.renderMembers(),this.renderFiltered()})),e.listenTo(e.model.labelList,"add remove reset change",e.renderLabelsDebounced),e.listenTo(e.model.stickerList,{"add remove reset change sort":e.renderStickersDebounced}),n=e.model.getBoard(),e.listenTo(n,"change:powerUps change:prefs.cardAging",e.renderPowerUpEffectsDebounced),e.subscribe(R(n,e.model),function(){return e.renderPowerUpEffectsDebounced()}),e.listenTo(n.filter,"change",e.renderFilteredDebounced),e.listenTo(n,"change:labels",e.renderLabelsDebounced),e.listenTo(n,"change:memberships",e.renderMembers),e.listenTo(n.viewState,"active-card-changed",e.renderActiveState),e.listenTo(e,"mouseEnterCardView",function(){return E(this)})}}(this))},t.prototype.renderActiveState=function(){var e;null!=this.$el&&(e=this.model.getBoard().viewState.isCardSelected(this.model),this.$el.toggleClass("active-card",e),e?T.addHandler(this,{scope:"card"}):T.removeHandler(this))},t.prototype.shortcut=function(e){var t,n,r,i,s;switch(r=o.isLoggedIn(),t=this.model.editable(),i=this.onCalendar,e){case v.Enter:return this.showDetail(),"Enter - Open Card";case v.E:if(t)return this.openQuickCardEditor(),"E - Open Quick Card Editor";break;case v.T:return p.showCardDetail(this.model,{runMethod:"editTitle"}),"T - Open Card and Edit Title";case v.D:if(t)return this.showPopOver(h),["D - Due Dates","On Board View"];break;case v.L:if(t)return this.showPopOver(a,{hideOnSelect:!1}),["L - Edit Labels","On Board View"];break;case v._0:case v._1:case v._2:case v._3:case v._4:case v._5:case v._6:case v._7:case v._8:case v._9:if(t)return n=function(e){return function(t){return e.showPopOver(a,{searchInit:t,hideOnSelect:!0})}}(this),b.setLabelFromKey(e,this.model,n),"0-9 - Toggle Specific Label";break;case v.A:case v.M:if(t)return this.showPopOver(u),["A - Assign Members","Board View"];break;case v.Space:if(t&&this.model.getBoard().hasActiveMembership(o.me()))return this.model.toggleMember(o.myId()),"Space - Toggle Assigning Self";break;case v.C:if(t)return this.model.close(),"C - Archive Card";break;case v.AngleRight:case v.Period:if(t&&!i)return this.model.moveToNextList(e===v.AngleRight?"top":"bottom"),"> - Move to Next List";break;case v.AngleLeft:case v.Comma:if(t&&!i)return this.model.moveToPrevList(e===v.AngleLeft?"top":"bottom"),"< - Move to Previous List";break;case v.V:if(r)return this.model.toggleVote(),"V - Vote";break;case v.S:if(r)return s=this.model.get("subscribed"),this.model.subscribe(!s),["S - Subscribe",s?"Unsubscribe":"Subscribe"]}},t.prototype.showPopOver=function(e,t){return null==t&&(t={}),_.toggle({elem:this.$(".js-card-menu"),view:e,options:O.extend({model:this.model,modelCache:this.modelCache,hideOnSelect:!0},t)})},t.prototype.render=function(){var e,t,n,r,i,o,s;for(D("render","rendering card "+this.model.get("name")),t=this.model.toJSON(),t.showCover=this.showCover(),t.showEditor=this.model.editable()&&!this.options.hideMenu,this.model.hasStickers()&&(t.hasStickers=!0),t.labels=this.labelsData(),e=this.model.getBoard(),t.members=[],o=this.model.memberList.models,n=o.length-1;n>=0;n+=-1)r=o[n],i=r.toJSON(),i.isVirtual=(null!=(s=e.getOrganization())?s.isVirtual(r):void 0)||e.isVirtual(r),i.isDeactivated=e.isDeactivated(r),t.members.push(i);return this.$el.toggleClass("js-archive-card",this.model.get("closed")),this.showCover()&&this.model.hasCover()&&this.$el.addClass("is-covered"),this.model.hasStickers()&&this.$el.addClass("is-stickered"),this.el.innerHTML=P(t),this.renderFiltered(),this.renderBadges(),this.renderPluginBadges(),this.renderDueComplete(),k.enqueue("render_"+this.cid,function(e){return function(){return e.renderActiveState(),e.renderCover(),e.renderStickers(),e.renderPowerUpEffects(),e.waitForId(e.model,function(){return e.renderLink()}),e._droppableHookedSinceRender=!1,E(e)}}(this)),this},t.prototype.hookDroppable=function(){var e;s.isTouch()||null!=this.$el&&(this._droppableHookedSinceRender||(this._droppableHookedSinceRender=!0,s.isTouch()||(e=this.throttle(function(){return r(".board-canvas")[0].getBoundingClientRect()},100,{trailing:!1}),this.$el.droppable({refreshPositions:!0,inBounds:function(t){var n,r,i;return n=e(),n.left<=(r=t.pageX)&&r<n.right&&n.top<=(i=t.pageY)&&i<n.bottom},accept:".js-list-draggable-board-members .member, .js-draggable-sticker",hoverClass:"active-card",drop:function(e){return function(t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y;n.draggable.hasClass("member")?(a=n.draggable.data("id"),s=n.draggable.clone(),u=e.model.memberList.detect(function(e){return e.id===a}),u||(e.model.addMember(a),F("Card","Add Member by Board Sidebar"))):n.draggable.hasClass("js-draggable-sticker")&&(h=n.draggable.data("sticker"),o=r=i=1,f=n.helper.offset(),g={top:e.$el.offset().top+o,left:e.$el.offset().left+r},v=e.$el.outerWidth()-r-i,l=f.left-g.left,d=f.top-g.top,c=l/v*100,m=e.$(".js-card-stickers").height(),b=e.$el.hasClass("is-stickered")||e.$el.hasClass("is-covered")?d/m*100:0,b>m&&(b=m),y=M.getElemTransformMatrix(n.helper.find(".sticker-select-fixed")),p=null!=y?M.getMatrixDegrees(y)%360:0,e.addNewStickerToList(h,c,b,p))}}(this)}))))},t.prototype.addNewStickerToList=function(e,t,n,r){var i,o;i=null!=(o=e.id)?o:e.get("image"),F("Card","Sticker",i),this.model.stickerList.create({image:i,left:z(t),top:z(n),rotate:r,zIndex:this.model.stickerList.nextZIndex(),imageUrl:e.get("url"),imageScaled:e.get("scaled")},{modelCache:this.modelCache})},t.prototype.showStickers=function(){return!this.onCalendar},t.prototype.renderStickers=function(e){var t,n,r,i,o;return this.showStickers()?(n=this.$(".list-card-stickers-area"),t=this.$(".js-card-stickers").empty(),r=this.model.hasStickers(),r?(this.$el.addClass("is-stickered"),n.removeClass("hide"),o=function(){var e,t,n,r;for(n=this.model.stickerList.models,r=[],e=0,t=n.length;t>e;e++)i=n[e],r.push(this.subview(S,i));return r}.call(this),this.appendSubviews(o,t)):(this.$el.removeClass("is-stickered"),n.addClass("hide")),this):void this.$el.removeClass("is-stickered")},t.prototype.renderName=function(){var e,t;return e=this.model.toJSON(),t=U.fill("card_title_on_card_front",e),this.$(".js-card-name").html(t),this},t.prototype.renderLink=function(){var e;return e=p.getCardUrl(this.model),this.$el.attr("href",e),this},t.prototype.renderPluginBadges=function(){var e;return e=this.$(".js-plugin-badges"),this.ensureSubviews([this.subview(w,this.model)],e),this},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()&&!this.onCalendar},t.prototype.renderFiltered=function(e){var t,n;if(null==this.options.dontFilter)return null==this._visible&&(this._visible=!0),t=this.model.getBoard(),n=null==t||!p.onBoardView(t.id)||!this.applyBoardCardFilter||t.filter.satisfiesFilter(this.model),this._visible!==n&&(this.$el.toggleClass("hide",!n).height(n?"":0),this._visible=n),this},t.prototype.renderDueComplete=function(){return this.$el.toggleClass("is-due-complete",this.model.get("dueComplete"))},t.prototype.renderPowerUpEffects=function(){var e,t;return e=this.model.getBoard(),this.$el.removeClass(this.model.getAllAgingClasses()),e.isPowerUpEnabled("cardAging")&&!this.model.get("closed")?(t=this.model.getAgingData(),this.$el.addClass(t.agingClassesToAdd)):void 0},t.prototype.openQuickCardEditor=function(e){return M.stop(e),_.hide(),j.open(this),F("Card Front","Open Quick Card Editor"),this},t.prototype.labelClick=function(e){return e&&(e.ctrlKey||e.metaKey||e.shiftKey)?void 0:(F("Toggle Labels Text on Card Front",y.getShowText()?"Show":"Hide",this.model.id,"click-label"),e.preventDefault(),e.stopPropagation(),y.toggleText())},t.prototype.labelMouseEnter=function(e){return this.$el.addClass("card-labels-hover")},t.prototype.labelMouseLeave=function(e){return this.$el.removeClass("card-labels-hover")},t.prototype.moveToCalendarDay=function(e,t,n){var r;return n.getCardView(this.model).delegateEvents(),r=new Date(n.data.day),this.model.changeDueDateMaintainTime(r),n.updateHeader(),n.renderCardsAndListHeaders()},t.prototype.moveInCalendarDay=function(e,t,n){return n.getCardView(this.model).delegateEvents(),n.renderCardsAndListHeaders()},t.prototype.moveTo=function(e,t,n,r){var i,o;return 0===t.item.parents(".js-list").length?void(null!=n&&n.renderCards()):(i=t.item.parents(".js-list").find(".list-card:not(.placeholder,.js-composer)"),o=i.index(t.item),r||t.item.remove(),void this.model.moveToList(n.model,o))},t.prototype.moveIn=function(e,t,n){n.model.id===this.model.get("idList")&&this.moveTo(e,t,n,!0)},t.prototype.showDetail=function(e){return e&&(e.ctrlKey||e.metaKey||e.shiftKey)||!this.doClicks()?void 0:(M.stop(e),p.showCardDetail(this.model,{runMethod:this.model.shouldSuggestDescription()?"expandDesc":void 0}))},t.prototype.dragenter=function(e){var t;if(this.model.editable())return t=this.$el.outerHeight(),this.$(".list-card-dropzone").css({height:t+"px","line-height":t+"px"}),this.$el.addClass("is-drophover")},t.prototype.dragleave=function(e){return this.$el.removeClass("is-drophover")},t.prototype.dropFiles=function(e){var t;if(this.model.editable()&&(t=e.detail,!q(this.model.getBoard(),t)))return C.resolve(t).each(function(e){return function(t){var n;return n=t.name||$(),V(e.model,"upload",t,n)}}(this)).catch(function(){return i.show("unable to upload file","error","upload",5e3)}).done(),e.stopPropagation()},t.prototype.dropUrl=function(e){var t;if(this.model.editable())return t=e.detail,this.model.uploadUrl(t),e.stopPropagation()},t.prototype.doClicks=function(){return!f.sorting},t.prototype.scrollIntoView=function(){var e,t,n,r;return e=this.$el.closest("#board"),t=this.$el.closest(".js-list"),n=t[0].getBoundingClientRect(),r=n.left+n.width-window.innerWidth,this.$el.closest(".js-list-cards").scrollTop(this.$el.position().top),n.left<0?e.animate({scrollLeft:t.position().left},150):r>0?e.animate({scrollLeft:e.scrollLeft()+r},150):void 0},t}(B))},{}],422:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;i=e(80),o=e(22),a=e(542),u=e(129),c=e(522),l=e(151),d=e("underscore"),v=e(777),y=e(48),w=e(53),f=e("moment"),s=e("pikaday"),m=e(101),p=function(){return{previousMonth:m("prev month button text"),nextMonth:m("next month button text"),months:f.months("MMMM"),weekdays:f.weekdays("dddd"),weekdaysShort:f.weekdaysMin("dddd")}},b="LT",g=[b,"h:mm A"],h=function(e){return f(e,g).isValid()},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.viewTitleKey="change due date",t.prototype.tagName="form",t.prototype.className="dpicker-widget u-clearfix",t.prototype.events={"click .js-remove-date":"removeDueDate","input .js-dpicker-time-input":"validateTimeInput","change .js-dpicker-time-input":"normalizeTimeInput",'click a[href="/business-class"]':function(){return y("Card Detail","Click Business Class Link","Date Picker PopOver")},submit:function(e){return e.preventDefault(),this.submitDueDate()},"click .js-enable-calendar-powerup":function(e){return e.preventDefault(),this.enableCalendarPowerUp()}},t.prototype.initialize=function(){return this.listenTo(this.model.getBoard(),"change:powerUps",this.renderCalendarPowerUp)},t.prototype.getSelectedDueDateMoment=function(){var e,t;return e=this.picker.getMoment(),e.isValid()?(e.year()<1e3&&e.add(2e3,"years"),t=this.selectedTimeMoment(),e.hour(t.hour()).minute(t.minute())):null},t.prototype.submitDueDate=function(){var e;return e=this.getSelectedDueDateMoment(),null!=e?this.setDueDate(e.toDate()):this.removeDueDate()},t.prototype.setDueDate=function(e){return t.lastDueDate=e,this.model.update("due",e.getTime()),a.hide()},t.prototype.removeDueDate=function(){return this.model.get("due")&&this.model.update("due",null),a.hide()},t.prototype.renderCalendarPowerUp=function(){var e,t,n,r,i;t=this.$(".js-cal-enabled").addClass("hide"),e=this.$(".js-enable-cal").addClass("hide"),n=this.model.getBoard(),r=n.isPowerUpEnabled("calendar"),i=n.owned()&&!r,r?t.removeClass("hide"):i&&e.removeClass("hide")},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,n,r,i,o;return e=this.model.getBoard(),o=f().startOf("day").add(1,"days").hour(12).toDate(),n=null!=(r=null!=(i=this.model.getDueDate())?i:t.lastDueDate)?r:o,this.$el.html(v({canChangePowerUps:e.owned(),canEnableAdditionalPowerUps:e.canEnableAdditionalPowerUps()})),this.picker=new s({field:this.$(".js-dpicker-date-input")[0],container:this.$(".js-dpicker-cal")[0],bound:!1,format:"l",firstDay:f.localeData().firstDayOfWeek(),i18n:p()}),this.picker.setDate(n),this.$timeInput().val(f(n).format(b)),this.renderCalendarPowerUp(),this},t.prototype.validateTimeInput=function(){return this.$timeInput().toggleClass("input-error",!this.isTimeInputValid())},t.prototype.normalizeTimeInput=function(){return this.$timeInput().val(this.selectedTimeMoment().format(b)),this.validateTimeInput()},t.prototype.selectedTimeMoment=function(){return this.isTimeInputValid()?f(this.$timeInput().val(),g):f().hours(12).minutes(0)},t.prototype.$timeInput=function(){return this.$(".js-dpicker-time-input")},t.prototype.isTimeInputValid=function(){return h(this.$timeInput().val())},t.prototype.enableCalendarPowerUp=function(){var e;e=o.calendar,this.model.getBoard().enablePlugin(e),y("Card Detail","Enable Calendar via Due Date Menu"),w("card detail","enables","Power-Up","","","due date",e)},t}(c)},{}],423:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(522),o=e(519),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewTitleKey="formatting help",t.prototype.render=function(){return this.$el.html(o.fill("formatting_help")),this},t}(i)},{}],424:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(421),o=e(522),s=e(519),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(e){return this.showBoard=e.showBoard,this.cardView=this.subview(r,this.model,{filterDeactivated:!1,showMemberStatus:!1})},t.prototype.className="card-grid-container",t.prototype.render=function(){var e;return e={listName:this.model.getList().get("name"),boardName:this.model.getBoard().get("name"),showBoard:this.showBoard},this.$el.html(s.fill("member_cards_card",e)),this.appendSubview(this.cardView,this.$(".js-card")),this},t}(o)},{}],425:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C=function(e,t){function n(){this.constructor=e}for(var r in t)x.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},x={}.hasOwnProperty;r=e("jquery"),i=e(413),o=e(526),s=e(417),a=e(418),u=e(419),c=e(420),l=e(422),d=e(97),p=e(20),h=e(542),f=e(697),g=e(520),v=e(129),b=e(522),y=e("underscore"),_=e(519),k=e(48),w=e(106),t.exports=w(u,m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),y.extend(t.prototype,c),t.prototype.className="quick-card-editor",t.open=function(e){var n,r,i;return this.close(),n=e.$el,r=n.offset(),i={width:n.width(),left:r.left,top:r.top},this.current=new t({model:e.model,modelCache:e.modelCache}).render(i)},t.close=function(){var e;return null!=(e=this.current)&&e.closeEditor(),this.current=null},t.prototype.initialize=function(){return this.makeDebouncedMethods("renderStickers","renderLabels"),this.listenTo(this.model,{"change:labels":this.renderLabelsDebounced,"change:idLabels":this.renderLabelsDebounced}),this.listenTo(this.model.labelList,"add remove reset change",function(e){return function(){return e.renderLabelsDebounced()}}(this)),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(this.renderMembers)),this.listenTo(this.model.stickerList,"add remove reset change sort",function(){return this.renderStickersDebounced()})},t.prototype.events={"keydown .js-edit-card-title":"quickCardEditKeydown","click .js-save-edits":"saveEdits","click .js-stop":"stopCard","click .js-edit-labels":"editLabels","click .js-edit-members":"editMembers","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-edit-due-date":"editDueDate","click .js-archive":"archive",click:"checkCloseEditor","click .js-close-editor":"closeEditor"},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},t.prototype.showStickers=function(){return!0},t.prototype.shortcut=function(e){switch(e){case p.Escape:return this.checkCloseEditor(),["Esc - Close Quick Card Editor","Quick Card Editor"];case p.Enter:return this.save(),["Enter - Save Quick Card Edits","Quick Card Editor"]}},t.prototype.render=function(e){var t,n,i,o;return n=this.model.toJSON(),n.labels=this.model.getLabels(),n.showCover=this.showCover(),n.hasStickers=this.model.hasStickers(),n.quickEdit=!0,n.members=[],n.left=this.cLeft=e.left,n.top=this.cTop=e.top,n.width=this.cWidth=e.width,t=this.cWidth+this.cLeft+160,i=r(window).height(),o=r(window).width(),t>o&&(n.leftButtons=!0,this._usingLeftButtons=!0),this.$el.html(_.fill("quick_card_editor",n,{})),this.renderStickers().renderCover().renderLabels().renderBadges().renderMembers().checkShowCover(),r("body").append(this.$el),this.calcHeight(),this.focusInput(),g.addHandler(this,{scope:"quick_card_editor",modal:!0}),this.defer(function(e){return function(){return e.$(".quick-card-editor-buttons").addClass("fade-in")}}(this)),this.$(".js-edit-card-title").autosize(),this},t.prototype.calcHeight=function(){var e,t,n,i,o,s,a;s=r(window).height(),a=r(window).width(),i=this.$(".quick-card-editor-card").outerHeight(),this.cTop+i>s&&(o=s-i-8,this.$(".quick-card-editor-card").css({top:o})),e=this.$(".quick-card-editor-buttons"),t=e.outerHeight(),n=e.offset(),t+n.top>s&&e.css({top:-36})},t.prototype.renderStickers=function(){var e,t,n;return this.$(".sticker.moving, .sticker.rotating").length>0?this:(e=this.$(".js-card-stickers").empty(),n=function(){var e,n,r,i;for(r=this.model.stickerList.models,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(this.subview(f,t));return i}.call(this),this.appendSubviews(n,e),this.$(".list-card").toggleClass("is-stickered",this.model.hasStickers()),this)},t.prototype.checkShowCover=function(){return this.$(".list-card").toggleClass("is-covered",this.showCover()).toggleClass("is-stickered",this.model.hasStickers()),this},t.prototype.focusInput=function(){return this.$(".js-edit-card-title").focus().select()},t.prototype.showPopOver=function(e,t,n,i){null==i&&(i={}),v.stop(e),h.toggle({elem:r(e.target).closest("a"),view:new t(y.extend({model:this.model,modelCache:this.modelCache},i)),alignRight:this._usingLeftButtons}),k("Quick Card Editor",n)},t.prototype.editLabels=function(e){return this.showPopOver(e,o,"Open Label Edit")},t.prototype.editMembers=function(e){return this.showPopOver(e,s,"Open Member Edit")},t.prototype.copyCard=function(e){return this.showPopOver(e,i,"Open Copy Card",{onCopy:this.closeEditor.bind(this)})},t.prototype.editDueDate=function(e){return this.showPopOver(e,l,"Open Due Date Edit")},t.prototype.moveCard=function(e){var t;return t=this.closeEditor.bind(this),this.showPopOver(e,a,"Open Move Card",{onCommit:t})},t.prototype.archive=function(e){v.stop(e),this.model.close(),this.closeEditor(),k("Quick Card Editor","Archive")},t.prototype.quickCardEditKeydown=function(e){return d.getKey(e)===p.Enter?this.saveEdits(e):void 0},t.prototype.saveEdits=function(e){var t;v.stop(e),t=this.$(".js-edit-card-title").val().trim(),t===this.model.get("name")?this.closeEditor():""!==t?(this.model.update({name:t}),this.closeEditor(),k("Quick Card Editor","Save Name")):this.$(".js-edit-card-title").focus().select()},t.prototype.checkCloseEditor=function(e){h.isVisible?h.hide():this.$(".sticker.editing").length>0?this.stopEditingStickers():this.closeEditor(e)},t.prototype.closeEditor=function(e){this.remove(),h.hide(),k("Quick Card Editor","Close")},t.prototype.stopEditingStickers=function(){var e,t,n,r;for(n=y.clone(this.model.stickerList.models),e=0,t=n.length;t>e;e++)r=n[e],r.trigger("stopEditing")},t.prototype.stopCard=function(e){v.stopPropagation(e),h.hide()},t}(b))},{}],426:[function(e,t,n){var r,i,o,s,a,u,c;r=e("jquery"),i=e(38),o=e(222),a=e(129),u=e("underscore"),c=e(101),t.exports=s=function(){function e(){}return e.prototype.renderValues=function(){var e,t,n,i,o,s,a;
n=this.$(".js-select-board option:selected").val(),i=this.$(".js-select-list option:selected").val(),a=parseInt(this.$(".js-select-position option:selected").prop("index"),10)+1,e=this.modelCache.get("Board",n),t=e.get("name"),o=u.find(e.listList.models,function(e){return function(e){return e.id===i}}(this)),this.$(".js-board-value").text(t),null!=o?(s=o.get("name"),a=a.toString(),this.$(".js-list-value").text(s),this.$(".js-pos-value").text(a),this.$(".js-select-list,.js-select-position,.js-commit-position,.js-submit").removeAttr("disabled")):(this.$(".js-list-value").empty().append(r("<i></i>").text(c("no lists"))),this.$(".js-pos-value").empty().append(r("<i></i>").text(c("n/a"))),this.$(".js-select-list,.js-select-position,.js-commit-position,.js-submit").attr("disabled","disabled"))},e.prototype.updateBoardData=function(){var e,t,n,r,s,a,u;if(e=this.$(".js-select-board"),n=e.find("option:selected").val(),t={},n===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),u=this._boardData.listList.models,r=0,s=u.length;s>r;r++)a=u[r],a.cardCount=this._boardData.listList.get(a.id).openCards().length;this.updateListList()}else null!=n&&(this.$(".js-submit").attr("disabled","disabled"),i.loadBoardData(n,o.cardsAndListsMinimal).then(function(e){return function(){return e._boardData=e.modelCache.get("Board",n),e.updateListList()}}(this)).done())},e.prototype.updateListList=function(){var e,t,n,i,o,s,a,u,c,l,d,p;for(t=this.$(".js-select-board"),n=this.$(".js-select-list").empty(),o=t.find("option:selected").val(),s=this.model.getList().id,a=o===this.model.getBoard().id?s:null!=(d=this._boardData.listList.at(0))?d.id:void 0,p=this._boardData.listList.models,u=0,c=p.length;c>u;u++)l=p[u],e=r("<option>").val(l.id).appendTo(n),i=l.id===s?e.format("current list",{listName:l.get("name")}):e.text(l.get("name")),l.id===a&&e.attr("selected","selected");return this.updatePositionList()},e.prototype.updatePositionList=function(){var e,t,n,i,o,s,a,u,l,d,p,h,m,f,g,v;if(t=this.$(".js-select-list"),n=this.$(".js-select-position").empty(),a=t.find("option:selected").val(),null==a)return void this.renderValues();for(d=null!=(m=this._boardData.listList.get(a))?m:this._boardData.listList.at(0),g=(null!=d?d.id:void 0)===this.model.getList().id,p=this._boardData.listList.get(a).cardList.length,g?(i=this.model.getList().openCards().indexOf(this.model),v=i,this.showCurrentPosition||(p-=1)):(i=-1,v=p),s=l=0,f=p;f>=0?f>=l:l>=f;s=f>=0?++l:--l)u=String(s+1),o=s===i?c("current position",{index:u}):u,h=0===s?"top":s===p?"bottom":d.calcPos(s),e=r("<option>").val(h).text(o).appendTo(n),s===v&&e.attr("selected","selected");this.$(".js-pos-value").text(String(v)),this.renderValues()},e}()},{}],427:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(522),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.viewTitleKey="sending links",t.prototype.render=function(){return this.$el.html('<div class="spinner loading"></div>'),this},t}(i)},{}],428:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(542),s=e(129),a=e(522),u=e("underscore"),l=e(768),d=e(48),i=e(37),c=function(e){return function(t,n){return t.get(e).localeCompare(n.get(e))}},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="add checklist",t.prototype.initialize=function(e){this.cardView=e.cardView},t.prototype.events={"click .js-add-checklist":"addChecklist","submit form":"addChecklist","change .js-checklist-copy-source":"changeSource","input .js-checklist-title":function(e){return this.$(".js-checklist-title").attr("data-changed",!0)}},t.prototype.render=function(){var e;return e=this.modelCache.find("Card",function(e){return function(t){return t.get("idBoard")===e.model.getBoard().id&&t.isOpen()&&t.checklistList.length>0}}(this)).sort(c("name")).map(function(e){return{name:e.get("name"),checklists:e.checklistList.chain().clone().sort(c("name")).map(function(e){return{id:e.id,name:e.get("name")}}).value()}}),this.$el.html(l({checklistCards:e})),this},t.prototype.addChecklist=function(e){var t,n,r,i,a;return s.stop(e),a=this.$(".js-checklist-title").val(),i=this.$(".js-checklist-copy-source").val(),0===a.length?void this.$(".js-checklist-title").focus().select():(n=""!==i?"Copied Checklist Items":"No Checklist Items Copied",r="Checklist"===a?"Default Title (Checklist), "+n+")":"Renamed Title, "+n+")",d("Checklist","Create",""+r),t=this.model.checklistList.create({name:a,idChecklistSource:i,idCard:this.model.id}),this.cardView.focusChecklistAdd(t),void o.hide())},t.prototype.changeSource=function(e){var t,n,r,o,s;return t=this.$(".js-checklist-title"),n=t.attr("data-default"),t.attr("data-changed")&&t.val()&&t.val()!==n?void 0:(r=this.$(".js-checklist-copy-source").val(),o=r&&null!=(s=i.get("Checklist",r))?s.get("name"):n,t.val(o).removeAttr("data-changed"))},t}(a)},{}],429:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(430),o=e(491),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewType=i,t}(o)},{}],430:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(483),o=e(486),s=e(496),a=e(489),u=e(542),c=e(104),l=e(129),d=e(498),p=e(106),h=e(519),m=e(48),t.exports=p(r,o,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.className="checklist-item",t.prototype.allowNewlines=!1,t.prototype.initialize=function(){return this.listenTo(this.model,{"change:name":this.renderName,"change:state":this.renderState}),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"keyup .js-checkitem-input":"keyAutoMention","click .js-toggle-checklist-item":"toggleState","click .js-delete-item":"delete","click .js-convert-item-to-card":"convertToCard","click .js-open-editing-menu":"openEditingMenu",movecheckitem:"moveCheckItem"},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.selfMention=!0,t.prototype.render=function(){var e,t;return t=this,e=this.model,this.$el.html(h.fill("checklist_item",{},{editable:this.model.editable()})),this.renderName(),this.renderState(),this.recallDrafts(),this},t.prototype.getTextInput=function(){return this.$(".js-checkitem-input")},t.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.renderName=function(e){var t,n;n=c.checkItems.format(this.model.get("name"),{textData:this.model.get("nameData")}).output,t=this.$(".js-checkitem-name"),t.empty().append(n),d(t[0],this.model.getBoard())},t.prototype.renderState=function(e){var t;t=this.model.toJSON(),t.checked="complete"===t.state,this.$el.toggleClass("checklist-item-state-complete",t.checked)},t.prototype.toggleState=function(e){var t,n;this.model.editable()&&(t="complete"===this.model.get("state"),n=t?"incomplete":"complete","complete"===n?(this.$el.addClass("checklist-item-fade-out"),this.setTimeout(function(e){return function(){return e.model.update("state",n),e.$el.removeClass("checklist-item-fade-out")}}(this),200)):(this.$el.removeClass("checklist-item-fade-out"),this.model.update("state",n)),m("Checklist","Toggle Checklist Item State",n))},t.prototype.delete=function(e){l.stop(e),this.model.destroy(),m("Checklist","Delete Single Checklist Item")},t.prototype.convertToCard=function(e){l.stop(e),this.model.run("convertToCard"),this.model.getChecklist().checkItemList.remove(this.model),m("Checklist","Convert Checklist Item to Card")},t.prototype.moveCheckItem=function(e,t,n,r){var i,o,s;if(r||this.model.getChecklist()===n)return i=t.item.parent().children(),o=i.index(t.item),s=n.calcPos(o,this.model),r?(this.model.update({pos:s,idChecklist:n.id}),this.model.collection.remove(this.model),n.checkItemList.add(this.model)):this.model.update("pos",s),n.checkItemList.sort({silent:!0}),m("Checklist","Reorder Checklist Item")},t.prototype.commitEdits=function(e){return u.hide(),0===this.$(".js-checkitem-input").val().length?this.model.destroy():t.__super__.commitEdits.apply(this,arguments)},t.prototype.openEditingMenu=function(e){return l.stop(e),u.toggle({elem:e.target,view:a,options:{model:this.model,modelCache:this.modelCache,parent:this},keepEdits:!0})},t}(s))},{}],431:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M=function(e,t){function n(){this.constructor=e}for(var r in t)B.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},B={}.hasOwnProperty;r=e("jquery"),i=e(33),o=e(483),s=e(484),a=e(429),c=e(486),l=e(534),d=e(537),p=e(496),h=e(487),m=e(489),f=e(97),g=e(539),v=e(274),b=e(542),y=e("bluebird"),w=e(129),_=e("underscore"),C=e(45),x=e(106),S=e(519),T=e(48),k=e(101),j=e(132),t.exports=x(o,c,u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),t.prototype.className="checklist",t.prototype.initialize=function(){return this.makeDebouncedMethods("renderCheckedState"),this.listenTo(this.model.checkItemList,{"add remove reset change:state":function(){return this.renderProgress(),this.renderCheckedStateDebounced()}}),this.listenTo(v,{"change:idCollapsedChecklists":this.renderCheckedStateDebounced}),this.listenTo(this.model,{"change:name":this.renderName})},t.prototype.events={"keydown .js-new-checklist-item-input":"keydownChecklistEvent","click .js-add-checklist-item":"submitTask","click .js-cancel-checklist-item":"cancelItemEditing","click .js-new-checklist-item-input":"focusNewTaskInput","click :not(.focus) .js-new-checklist-item-input":function(e){return r(e.currentTarget).select()},"click .js-confirm-delete":"confirmDeleteChecklist","click .js-hide-checked-items":"hideCheckedItems","click .js-show-checked-items":"showCheckedItems","sortstop .js-checklist-items-list":"sortStop","sortreceive .js-checklist-items-list":"sortReceive",movechecklist:"moveChecklist","click .js-open-editing-menu":"openEditingMenu","keyup .js-new-checklist-item-input":"keyAutoMention"},t.prototype.render=function(){var e,t;return C("render","rendering checklist state "+this.model.get("name")),this.$el.html(S.fillFromModel("checklist",this.model)),e=this.$(".js-checklist-items-list"),(null!=(t=this.getCard())?t.editable():void 0)&&e.sortable({axis:"y",delay:"75",distance:"7",tolerance:"pointer",placeholder:"checklist-item placeholder",items:".checklist-item",connectWith:".js-checklist-items-list",start:function(e,t){var n;return d.sorting=!0,n=r(t.helper).outerHeight(),r(t.placeholder).height(n)},stop:function(e){return function(){return e.defer(function(){return d.sorting=!1})}}(this)}),this.$newCheckItemInput=this.$(".js-new-checklist-item-input").autosize(),this.renderName(),this.renderCheckItems(),this.renderCheckedState(),this},t.prototype.renderName=function(){return this.$("div.checklist-title[attr=name] .current").text(this.model.get("name")),this},t.prototype.renderProgress=function(){var e,t,n,r;return t=this.model.getCompletedCount(this.getCard()),n=this.model.checkItemList.length,r=n>0?Math.round(100*t/n):0,e=t===n&&n>0,this.$(".js-checklist-progress-bar").width(r+"%"),this.$(".js-checklist-progress-percent").text(r+"%"),this.$(".js-checklist-progress-bar").toggleClass("checklist-progress-bar-current-complete",e),this},t.prototype.renderCheckItems=function(){var e,t;return e=this.$(".js-checklist-items-list"),t=this.collectionSubview(a,this.model.checkItemList,{el:e}),t.render(),d.refreshIfInitialized(e),this.renderProgress(),this},t.prototype.isChecklistCollapsed=function(){return v.inSet("idCollapsedChecklists",this.model.id)},t.prototype.renderCheckedState=function(e){var t,n,r,i;return r=this.model.checkItemList.length,n=this.model.getCompletedCount(this.getCard()),i=r>0,t=r===n&&r>0,this.$(".js-show-checked-items").text(k("show checked items",{count:n.toString()})),this.$(".js-completed-message").addClass("hide"),0!==n&&i?this.isChecklistCollapsed()?(this.$el.addClass("hide-completed-items"),this.$(".js-show-checked-items").removeClass("hide"),this.$(".js-hide-checked-items").addClass("hide"),this.$(".js-completed-message").toggleClass("hide",!t)):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items").addClass("hide"),this.$(".js-hide-checked-items").removeClass("hide")):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items").addClass("hide"),this.$(".js-hide-checked-items").addClass("hide")),this},t.prototype.hideCheckedItems=function(e){w.stop(e),v.pushCollapsedChecklist(this.model.id),T("Checklist","Hide Checked Items")},t.prototype.showCheckedItems=function(e){w.stop(e),v.pullCollapsedChecklist(this.model.id),T("Checklist","Show Checked Items")},t.prototype.getCard=function(){return this.options.card},t.prototype.selfMention=!0,t.prototype.cancelItemEditing=function(e){return r(e.target).closest(".js-new-checklist-item").find(".js-new-checklist-item-input").val(""),g.cancelEdits(),!1},t.prototype.focusNewTaskInput=function(e){g.cancelEdits(this.$newCheckItemInput),this.$newCheckItemInput.focus(),this.$(".js-new-checklist-item").addClass("focus")},t.prototype.keydownChecklistEvent=function(e){if(r(e.target).hasClass("js-new-checklist-item-input")){if(b.view instanceof h||b.view instanceof s)return this.checkInsert(e);if(f.isSubmitEvent(e))return this.submitTask(e)}},t.prototype.getTextInput=function(){return this.$(".js-new-checklist-item-input")},t.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.submitTask=function(e){var t,n,r,o;return w.stop(e),r=this.$newCheckItemInput.val().trim(),/^\s*$/.test(r)?(w.stop(e),this.focusNewTaskInput(),!1):(o=_.compact(r.split(/\r\n|\r|\n/)),t=this.model,y.using(t.modelCache.getLock(),function(e){return function(){return y.resolve(o).each(function(e){var n;return n=t.checkItemList.length>0?t.checkItemList.last().get("pos")+w.spacing:w.spacing,n+=Math.floor(1024*Math.random()),j(t.checkItemList,"create",{name:e.trim(),pos:n,nameData:{emoji:i.me().allCustomEmoji()}}).catch(function(){})})}}(this)).done(),this.$newCheckItemInput.val("").trigger("autosize.resize"),this.focusNewTaskInput(),n=1===o.length?"Single Item":"Multiple Items",T("Checklist","Add Checklist Item",n),void b.hide())},t.prototype.sortStop=function(e,t){w.stopPropagation(e),t.item.trigger("movecheckitem",[t,this.model,!1])},t.prototype.sortReceive=function(e,t){w.stopPropagation(e),t.item.trigger("movecheckitem",[t,this.model,!0])},t.prototype.confirmDeleteChecklist=function(e){var t;w.stop(e),t=this.model.get("name"),l.toggle("delete checklist",{elem:this.$(e.target).closest(".js-confirm-delete"),model:this.model,title:k("confirm.delete checklist.title",{checklistName:t}),confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return T("Checklist","Delete Checklist"),e.model.destroy()}}(this)})},t.prototype.moveChecklist=function(e,t){var n,r,i;n=this.model.getCard(),null!=n&&(r=t.item.parent().children(),i=r.index(t.item),this.model.update("pos",n.calcChecklistPos(i,this.model)),this.model.collection.sort({silent:!0}),T("Checklist","Reorder Checklist"))},t.prototype.openEditingMenu=function(e){return w.stop(e),b.toggle({elem:e.target,view:m,options:{model:this.model,modelCache:this.modelCache,parent:this},keepEdits:!0})},t}(p))},{}],432:[function(e,t,n){var r,i;r=e("react"),i=e(514)("enterprise_dashboard_team_of_member"),t.exports=r.createClass({render:i.renderable(function(){var e,t,n;return t=this.props.item,e=t.name,n=t.shortLink,i.a({href:"/b/"+n,title:e},function(){return i.div(".popover-item .u-clearfix",function(){return i.span(".popover-item-name",function(){return i.text(e)})})})})})},{}],433:[function(e,t,n){var r,i,o;i=e(99),r=e("react"),o=e(514)("enterprise_dashboard_bulk_actions"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r,s,a;return s=this.props,e=s.count,n=s.onClose,r=s.onTeamsPopoverClick,t=s.hasTeams,a=s.totalCount,o.div(function(n){return function(){return o.div(".enterprise-bulk-actions .enterprise-button-bar",{class:o.classify({"has-selected-items":n.props.hasSelectedItems&&!n.props.loading})},function(){return o.div(".v-centered",function(){return e>0&&o.span(function(){return o.text(i("selected",e))}),o.span(".select-links",function(){return n.props.allItemsAreSelected||o.a(".select-all.clickable",{onClick:n.props.onSelectAll},function(){return o.format("select-all")}),n.props.hasSelectedItems?o.a(".clear-all.clickable",{onClick:n.props.onClearAll},function(){return o.format("clear")}):void 0})}),e>0?o.div(".options",function(){return t?o.b(r,".option.button-link.role-button",{class:o.classify({disabled:!n.props.hasSelectedItems}),disabled:!n.props.hasSelectedItems},function(){return o.format("teams")}):void 0}):void 0})}}(this))})})},{}],434:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p;i=e(216),o=e(217),s=e(33),a=e("bluebird"),u=e("underscore"),r={COMMON:{unknown:"unknown","email restricted":"restricted","not found":"not-found","unauthorized permission requested":"unauthorized"},ADD:{"must first transfer account":"add:must-transfer","must reactivate":"add:must-reactivate","already invited":"add:existing","already in organization":"add:existing",success:"add:added"},REMOVE:{success:"remove:removed","remove deactivated member from only":"remove:deactivated","not enough admins":"remove:not-enough-admins"},DEACTIVATE:{success:"deactivate:deactivated","cannot deactivate yourself":"deactivate:cannot-deactivate-yourself","not enough admins":"deactivate:not-enough-admins"}},d=function(e){return u.groupBy(e,"status")},l=function(e,t){var n,i,o;return i=e.message.toLowerCase(),n=u.extend({},r.COMMON,t),o=u.find(n,function(e,t){return i.indexOf(t)>-1}),o||r.COMMON.unknown},c=function(e,t,n,r){return o(e).then(function(e){var i;return i=t.success,r(n,i,e),i}).catch(i,function(e){var i;return i=l(e,t),r(n,i),i}).then(function(e){return{status:e,member:n}})},p=function(e,t,n,i,o){return a.map(t,function(t){return function(t){var o;return o={method:"delete",url:"/1/organizations/"+e.get("name")+"/members/"+t.id},s.isMe(t)||!e.getMembershipFor(t).deactivated&&!i||(o.url=o.url+"/all"),c(o,r.REMOVE,t,n)}}(this),{concurrency:o})},t.exports.addToTeam=function(e,t,n,i){var o;return o=i.concurrency,a.map(t,function(t){return function(t){var i;return i={method:"post",url:"/1/organizations/"+e.get("name")+"/memberships",data:{idMember:t.id,type:"normal"}},c(i,r.ADD,t,n)}}(this),{concurrency:o}).then(d)},t.exports.removeFromTeam=function(e,t,n,r){var i,o,a,c;return o=r.concurrency,c=r.removeFromBoards,a=u.filter(t,function(t){return"admin"!==e.getMemberType(t.toBackbone())}),i=u.difference(t,a),i=u.sortBy(i,function(e){return s.isMe(e)}),p(e,a,n,c,{concurrency:o}).then(function(t){return p(e,i,n,c,1).then(function(e){var n;return n=t.concat(e),d(n)})})},t.exports.deactivateFromTeam=function(e,t,n,i){var o;return o=i.concurrency,a.map(t,function(t){return function(t){var i;return i={method:"put",url:"/1/organizations/"+e.id+"/members/"+t.id+"/deactivated",data:{value:!0}},c(i,r.DEACTIVATE,t,n)}}(this),{concurrency:o}).then(d)}},{}],435:[function(e,t,n){var r,i,o,s;r=e("react"),o=e(248),s=e(514)("enterprise_dashboard_bulk_actions_option"),i=e("underscore"),t.exports=r.createClass({getInitialState:function(){return{showingMembersList:!1}},render:s.renderable(function(){var e,t,n,r,a,u;return u=this.props,n=u.label,e=u.actionName,t=u.disabledMessage,r=u.members,a=u.onClick,s.a({class:s.classify({disabled:0===r.length}),onClick:a},function(a){return function(){return s.span(function(){return s.text(n)}),s.span(".sub-name",function(){var n,u;switch(n=i.map(r,function(e){return"@"+e.username}),!1){case 0!==n.length:return s.text(t);case!(n.length<=3):return u=o(n,", "," "+s.l("and")+" "),s.text(e+" "+u);default:return n=i.first(n,2),s.format("more-than-three-usersnames",{actionName:e,usernames:n.join(", ")}),s.text(" "),s.span(".bulk-list-option-other-members-link",{onClick:function(e){return a.setState({showingMembersList:!a.state.showingMembersList}),e.stopPropagation()}},function(){return s.format("others",{count:r.length-2}),s.text(" "),a.state.showingMembersList?s.format("hide"):s.format("show-all")})}}),s.div(".explanation-members-wrapper",{class:s.classify({disabled:!a.state.showingMembersList})},function(){return s.div(".quiet.bulk-list-option-explanation-members",{onClick:function(e){return e.stopPropagation()}},function(){var e,t,n,i;for(i=[],e=0,t=r.length;t>e;e++)n=r[e],i.push(s.div(function(){return s.text(n.fullName+" ("+n.username+")")}));return i})})}}(this))})})},{}],436:[function(e,t,n){var r,i,o,s;r=e(437),o=e(438),i=e("react"),s=e(514)(),t.exports=i.createClass({getInitialState:function(){return{state:"running"}},componentWillReceiveProps:function(e){return e.processed===e.total?this.setState({state:"done"}):void 0},render:s.renderable(function(){return"running"===this.state.state?s.addElement(i.createElement(o,{total:this.props.total,processed:this.props.processed})):s.addElement(i.createElement(r,{results:this.props.results,modelLabel:this.props.modelLabel,modelName:this.props.modelName,onDoneClick:this.props.onDoneClick,enterpriseDisplayName:this.props.enterpriseDisplayName}))})})},{}],437:[function(e,t,n){var r,i,o;r=e("react"),o=e(514)("enterprise_dashboard_bulk_actions_progress_done"),i=e("underscore"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r,s,a;return s=this.props,a=s.results,t=s.modelLabel,n=s.modelName,r=s.onDoneClick,e=s.enterpriseDisplayName,o.div(function(){var s,u,c,l;for(o.h5(function(){return o.text(" "+t+": "+n)}),c=i.keys(a),s=0,u=c.length;u>s;s++)l=c[s],a[l].length>0&&(o.div(".dash-bulk-add-results-heading",function(){return o.format(["status",l],{enterpriseDisplayName:e})}),o.div(".dash-bulk-add-results-list",function(){var e,t,n,r,i;for(r=a[l],i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(o.div(".dash-bulk-add-results-list-item",function(){return o.text(e.member.fullName+" ("+e.member.username+")")}));return i}));return o.div(function(){return o.button({class:"primary full",onClick:r},function(){return o.format("done")})})})})})},{}],438:[function(e,t,n){var r,i;r=e("react"),i=e(514)(),t.exports=r.createClass({render:i.renderable(function(){var e,t,n,r;return n=this.props,r=n.total,e=n.processed,t=r>0?e+"/"+r:"",i.div(function(){return i.div(".spinner.loading"),i.div(".dash-bulk-add-progress",function(){return i.text(t)})})})})},{}],439:[function(e,t,n){var r,i,o,s,a,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(435),i=e("react"),s=e(99),a=e(514)("enterprise_dashboard_bulk_actions_team_options_list"),o=e("underscore"),t.exports=i.createClass({getInitialState:function(){return{members:null}},componentDidMount:function(){return this.props.getSelectedMembers.then(function(e){return function(t){var n,r,i;return i=e._filterOnTeamMembers(t),r=o.difference(t,i),n=e._filterActiveMembers(i),e.setState({members:{onTeamMembers:i,notOnTeamMembers:r,activeMembers:n}})}}(this))},_filterActiveMembers:function(e){return o.filter(e,function(e){return function(t){var n;return n=e.props.team.toBackbone(),t=t.toBackbone(),!n.isVirtual(t)&&!n.isDeactivated(t)}}(this))},_filterOnTeamMembers:function(e){return o.filter(e,function(e){return function(t){var n;return n=e.props.team.id,u.call(o.pluck(t.organizations,"id"),n)>=0}}(this))},render:a.renderable(function(){return null==this.state.members?a.div(function(){return a.div(".spinner.loading")}):a.div(".bulk-action-options-list",function(e){return function(){return a.ul(".pop-over-list",function(){return a.li(function(){return a.addElement(i.createElement(r,{label:a.l(["add-to-team","label"],{teamDisplayName:e.props.team.displayName},{raw:!0}),actionName:a.l(["add-to-team","actionName"]),disabledMessage:s("members already in team",e.state.members.onTeamMembers.length),members:e.state.members.notOnTeamMembers,onClick:function(){return 0!==e.state.members.notOnTeamMembers.length?e.props.eventHandlers.runBulkActionAdd(e.state.members.notOnTeamMembers):void 0}}))}),a.li(function(){return a.addElement(i.createElement(r,{label:a.l(["deactivate-from-team","label"],{teamDisplayName:e.props.team.displayName},{raw:!0}),actionName:a.l(["deactivate-from-team","actionName"]),disabledMessage:a.l(["deactivate-from-team","disabledMessage"]),members:e.state.members.activeMembers,onClick:function(){return 0!==e.state.members.activeMembers.length?e.props.eventHandlers.runBulkActionDeactivate(e.state.members.activeMembers):void 0}}))}),a.li(function(){return a.addElement(i.createElement(r,{label:a.l(["remove-from-team","label"],{teamDisplayName:e.props.team.displayName},{raw:!0}),actionName:a.l(["remove-from-team","actionName"]),disabledMessage:s("members not in team",e.state.members.notOnTeamMembers.length),members:e.state.members.onTeamMembers,onClick:function(){return 0!==e.state.members.onTeamMembers.length?e.props.eventHandlers.runBulkActionRemove(e.state.members.onTeamMembers,e.refs.bulkHardRemove.checked):void 0}})),e.state.members.onTeamMembers.length>0?a.span(".check-div.quiet.u-clearfix.bulk-hard-remove",function(){return a.input(".bulk-hard-remove",{type:"checkbox",id:"bulkHardRemove",defaultChecked:!0,ref:"bulkHardRemove"}),a.label({htmlFor:"bulkHardRemove"},function(){return a.format("remove-from-all-team-boards")})}):void 0})})}}(this))})})},{}],440:[function(e,t,n){var r,i,o,s,a,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};a=e("underscore"),r=function(){function e(e){this.attr=e,this.bool=void 0}return e.prototype.toggle=function(){return this.bool=!this.bool},e.prototype.getValue=function(){return this.bool},e.prototype.hasValue=function(){return null!=this.bool},e.prototype.update=function(e){return this.bool=e},e.prototype.clear=function(){return this.bool=void 0},e.prototype.toStr=function(){return null==this.bool?"":this.attr+" eq "+this.bool},e}(),s=function(){function e(e){this.attr=e,this.values=[]}return e.prototype.update=function(e){return this.values.push(e)},e.prototype.getValue=function(){return this.values},e.prototype.hasValue=function(){return this.values.length>0},e.prototype.clearOne=function(e){var t;return t=this.values.indexOf(e),-1!==t?this.values.splice(t,1):void 0},e.prototype.clear=function(){return this.values=[]},e.prototype.toggle=function(e){return u.call(this.values,e)>=0?this.clearOne(e):this.update(e)},e.prototype.toStr=function(){return a.map(this.values,function(e){return function(t){return e.attr+' eq "'+t+'"'}}(this)).join(" or ")},e}(),o=function(){function e(e){this.searchFields=e,this.term=""}return e.prototype.update=function(e){return this.term=e},e.prototype.getValue=function(){return this.term},e.prototype.hasValue=function(){return""!==this.term},e.prototype.clear=function(){return this.term=""},e.prototype.toggle=function(){throw new Error("Can't toggle a TextSearchExpression.")},e.prototype.toStr=function(){var e;return this.term?(e=a.chain(this.searchFields).filter(function(e){return function(t){return null==t.useIfTermMatches||t.useIfTermMatches(e.term)}}(this)).pluck("fieldName").value(),a.map(e,function(e){return function(t){return t+' co "'+e.term+'"'}}(this)).join(" or ")):""},e}(),t.exports=i=function(){function e(e){this.expressions={search:new o(e),teams:new s("organizations.id"),userType:new s("userType"),hasTransferred:new r("ownedByEnterprise")}}return e.prototype.update=function(e,t){return this.expressions[e].update(t)},e.prototype.clearAll=function(){var e,t,n,r,i;for(r=a.keys(this.expressions),i=[],e=0,t=r.length;t>e;e++)n=r[e],i.push(this.clear(n));return i},e.prototype.clear=function(e){return this.expressions[e].clear()},e.prototype.toggle=function(e,t){return this.expressions[e].toggle(t)},e.prototype.toString=function(){return a.reduce(a.values(this.expressions),function(e,t){var n;return n=t.toStr(),n&&e.push("("+n+")"),e},[]).join(" and ")},e.prototype.getState=function(){return a.mapObject(this.expressions,function(e){return e.getValue()})},e.prototype.getActiveFilters=function(){return a.filter(a.keys(this.expressions),function(e){return function(t){return e.expressions[t].hasValue()}}(this))},e}()},{}],441:[function(e,t,n){var r,i,o,s=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("react"),o=e(514)("enterprise_dashboard_filters"),i=e("underscore"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r;return r=this.props,n=r.hasTeams,e=r.activeFilters,t=r.clickHandlers,e=i.without(e,"search"),o.div(function(r){return function(){return o.hr(),o.div(".enterprise-filters .enterprise-button-bar",function(){return o.div(".v-centered",function(){return o.format("filter-by")}),o.div(".options",function(){return o.b(t.team,".option.button-link.role-button",{class:o.classify({primary:s.call(e,"teams")>=0}),disabled:!n},function(){return o.format("teams")}),o.b(t.userType,".option.button-link.role-button",{class:o.classify({primary:s.call(e,"userType")>=0})},function(){return o.format("user-type")}),o.b(t.hasTransferred,".option.button-link.role-button",{class:o.classify({primary:s.call(e,"hasTransferred")>=0})},function(){return o.format("transferred")})}),o.b(t.clear,".option.last-option.button-link.role-button.primary",{class:o.classify({disabled:0===e.length}),disabled:0===e.length},function(){return o.format("clear-filters")})}),o.hr()}}(this))})})},{}],442:[function(e,t,n){var r,i;r=e("react"),i=e(514)("enterprise_dashboard_popover"),t.exports=r.createClass({render:i.renderable(function(){return i.div(".u-clearfix",function(e){return function(){return i.a(".dash-clear-filter",{href:"#",onClick:function(){return e.props.onClick()}},function(){return i.format("deselect")})}}(this))})})},{}],443:[function(e,t,n){var r,i;r=e("react"),i=e(514)("enterprise_dashboard_single_line_filter"),t.exports=r.createClass({render:i.renderable(function(){var e,t,n,r,o;return o=this.props,e=o.checkedStatus,t=o.eventHandlers,n=o.item,r=n.name,i.a(".popover-item .u-clearfix",{href:"#",onClick:function(e){return e.preventDefault(),t.onClick(n)}},function(){return i.span(".popover-item-name",function(){return i.format(r)}),null!=e&&e.isActive(n)?i.span(".dash-filter-marker .on",function(){return i.icon("check",{class:"light"})}):void 0})})})},{}],444:[function(e,t,n){var r,i,o,s,a,u,c=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e(446),s=e(453),o=e("react"),u=e(514)("enterprise_dashboard_popover"),a=e("underscore"),r=10,t.exports=o.createClass({getInitialState:function(){var e;return e=a.reduce(a.values(this.props.items),function(e,t){return e.concat(t)},[]),{isCollapsed:!0,allItems:e,searchMatches:e}},onSearchTermChange:function(e){return this.setState({searchMatches:a.filter(this.state.allItems,function(t){return t.isSearchMatch(e)})})},paginate:function(e){var t,n;return t=a.filter(e,function(e){return function(t){return c.call(e.state.searchMatches,t)>=0;
}}(this)),n=a.filter(a.values(this.props.items),function(e){return e.length>0}),this.state.isCollapsed?a.first(t,r/n.length):t},render:u.renderable(function(){return u.div(".enterprise-pop-over",function(e){return function(){var t,n,c;e.state.allItems.length>r&&u.addElement(o.createElement(s,{onChange:a.debounce(e.onSearchTermChange,300),placeholder:u.l(["search",e.props.modelName])})),null!=e.props.buttonData&&u.addElement(o.createElement(e.props.buttonData.componentClass,{onClick:e.props.buttonData.onClick})),c=e.props.items;for(t in c)n=c[t],n.length>0&&u.div(function(){return u.h3(".popover-group-header",function(){return u.format(t)}),u.addElement(o.createElement(i,{items:e.paginate(n),itemComponent:e.props.itemComponent,itemEventHandlers:e.props.itemEventHandlers,itemInlineButtons:e.props.itemInlineButtons,isPopOver:!0}))});return e.state.searchMatches.length>r?u.div(function(){return u.a(".quiet-button",{href:"#",style:{marginTop:"8px"},onClick:function(){return e.setState({isCollapsed:!e.state.isCollapsed})}},function(){return u.span(function(){return e.state.isCollapsed?u.format(["show-other",e.props.modelName]):u.format(["hide-other",e.props.modelName])})})}):void 0}}(this))})})},{}],445:[function(e,t,n){var r,i,o,s,a,u,c,l,d;r=e(234).Events,s=e(450),i=e(440),u=e("bluebird"),d=e(452),l=e("underscore"),a=function(){function e(e){this._hash=l.reduce(e,function(e,t){var n,r,i,o,s;for(s=t.get("memberships"),n=0,r=s.length;r>n;n++)i=s[n],null==e[o=i.idMember]&&(e[o]=[]),e[i.idMember].push(t);return e},{})}return e.prototype.get=function(e){var t;return null==(t=this._hash)[e]&&(t[e]=[]),this._hash[e]},e}(),t.exports.Member=o=function(){function e(t){var n,r,o,u,c;for(this.enterprise=t,this._mainPaginatedList=new s(this.enterprise),this.paginatedList=this._mainPaginatedList,this.orgsPerMember=new a(this.enterprise.organizationList.models),this.filterStringBuilder=new i(d.Member.prototype.API_SEARCH_FIELDS),this.renderables={},u=this.enterprise.memberList.models,n=0,r=u.length;r>n;n++)o=u[n],c=new d.Member(o,this.orgsPerMember.get(o.get("id"))),this.renderables[c.id]=c;this.sortField=e.prototype.DEFAULT_SORT_FIELD,this.sortOrder=e.prototype.DEFAULT_SORT_ORDER,this.resetState()}return l.extend(e.prototype,r),e.prototype.DEFAULT_SORT_FIELD="fullName",e.prototype.DEFAULT_SORT_ORDER="ascending",e.prototype.resetState=function(){return this.filterStringBuilder.clearAll(),this.updateFilter("search","")},e.prototype._isUsingDefaultSorting=function(){return this.sortField===e.prototype.DEFAULT_SORT_FIELD&&this.sortOrder===e.prototype.DEFAULT_SORT_ORDER},e.prototype.search=function(){var e;if(null!=(e=this.incomingPaginatedList)&&e.abortLoad(),0===this.filterStringBuilder.getActiveFilters().length&&this._isUsingDefaultSorting()){if(this.incomingPaginatedList=this._mainPaginatedList,this.incomingPaginatedList.totalLength>0)return this._swapInNewList(),void this.trigger("loaded")}else this.incomingPaginatedList=new s(this.enterprise,{filterStringBuilder:this.filterStringBuilder,sortField:this.sortField,sortOrder:this.sortOrder});return this.loadNextPage()},e.prototype.sort=function(e,t){return this.sortField=e,this.sortOrder=t,this.search()},e.prototype.getSortField=function(){return this.sortField},e.prototype.getSortOrder=function(){return this.sortOrder},e.prototype.updateFilter=function(e,t){return this.filterStringBuilder.update(e,t),this.search()},e.prototype.toggleFilter=function(e,t){return this.filterStringBuilder.toggle(e,t),this.search()},e.prototype.clearFilter=function(e){return this.filterStringBuilder.clear(e),this.search()},e.prototype.getFilterValueMap=function(){return this.filterStringBuilder.getState()},e.prototype.getActiveFilters=function(){return this.filterStringBuilder.getActiveFilters()},e.prototype._addLoadedRenderables=function(e){var t,n,r,i,o;for(o=[],t=0,n=e.length;n>t;t++)r=e[t],null==this.renderables[r.get("id")]&&(i=new d.Member(r,this.orgsPerMember.get(r.get("id"))),i.selected=this.paginatedList.loadAsSelected,o.push(this.renderables[i.id]=i));return o},e.prototype._swapInNewList=function(){return this.paginatedList!==this.incomingPaginatedList?(this.paginatedList=this.incomingPaginatedList,this.deselectAllItems()):void 0},e.prototype.loadNextPage=function(){return this.incomingPaginatedList.hasNext?(this.trigger(this.incomingPaginatedList===this.paginatedList?"loadingNext":"loading"),this.incomingPaginatedList.loadNext().tap(function(e){return function(t){return e._addLoadedRenderables(t),e._swapInNewList(),e.trigger("loaded")}}(this)).catch(u.CancellationError,function(){}).catch(function(e){return function(t){return e._swapInNewList(),e.trigger("loadError")}}(this))):u.resolve([])},e.prototype.hasNextPage=function(){return this.paginatedList.hasNext},e.prototype.items=function(){return l.map(this.paginatedList.items,function(e){return function(t){return e.renderables[t.get("id")]}}(this))},e.prototype.deselectAllItems=function(){return l.forEach(this.renderables,function(e){return e.selected=!1})},e.prototype.itemSelected=function(e,t){var n,r,i,o,s,a,u;if(e!==this.previousSelectedItem){if(!t||null==this.previousSelectedItem)return this.previousSelectedItem=e;for(o=this.items(),r=o.indexOf(e),i=o.indexOf(this.previousSelectedItem),n=s=a=r,u=i;u>=a?u>=s:s>=u;n=u>=a?++s:--s)o[n].selected=e.selected}},e.prototype.selectedItemsLength=function(){var e;return e=this._selectedRenderables().length,this.paginatedList.loadAsSelected&&(e+=this.paginatedList.lengthOfPending),e},e.prototype._selectedRenderables=function(){return l.filter(this.items(),function(e){return e.selected})},e.prototype.selectedItems=function(){return this.paginatedList.loadAsSelected?this.paginatedList.loadAll(this._addLoadedRenderables.bind(this)).then(this._selectedRenderables.bind(this)):u.resolve(this._selectedRenderables())},e.prototype._setSelected=function(e){var t,n,r,i,o;if(null!=this.paginatedList){for(this.paginatedList.loadAsSelected=e,r=this.items(),i=[],t=0,n=r.length;n>t;t++)o=r[t],i.push(o.selected=e);return i}},e.prototype.selectAll=function(){return this._setSelected(!0)},e.prototype.deselect=function(){return this._setSelected(!1)},e.prototype.lengthOfSearch=function(){return this.paginatedList.totalLength},e.prototype.lengthOfLoaded=function(){return this.paginatedList.items.length},e.prototype.totalLength=function(){return this._mainPaginatedList.totalLength},e}(),t.exports.Team=c=function(){function e(e){this.allItems=e.organizationList.models,this.resetState()}return l.extend(e.prototype,r),e.prototype.resetState=function(){var e,t,n,r,i;for(this.renderables={},r=this.allItems,t=0,n=r.length;n>t;t++)e=r[t],i=new d.Team(e),this.renderables[i.id]=i;return this.updateFilter("search","")},e.prototype.updateFilter=function(e,t){var n;return n=l.filter(this.allItems,function(e){return function(n){var r;return r=e.renderables[n.get("id")],r.isSearchMatch(t)}}(this)),this._items=l.map(n,function(e){return function(t){return e.renderables[t.get("id")]}}(this)),this.trigger("loaded")},e.prototype.loadNextPage=function(){return u.resolve([])},e.prototype.hasNextPage=function(){return!1},e.prototype.items=function(){return this._items},e.prototype.lengthOfSearch=function(){return this._items.length},e.prototype.lengthOfLoaded=function(){return this._items.length},e.prototype.totalLength=function(){return this.allItems.length},e.prototype.getActiveFilters=function(){return[]},e}()},{}],446:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;u=e("react"),c=e(514)("enterprise_list_component"),r=0,o=1,s=2,i=3,t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.LOADING_STATES={LOADED:r,LOADING_NEW:o,LOADING_NEXT:s,LOADING_ERROR:i},t.prototype.render=c.renderable(function(){var e,t,n,a,l,d,p;return p=this.props,a=p.itemInlineButtons,n=p.itemEventHandlers,t=p.itemComponent,e=p.isPopOver,d=p.loadingState,l=p.items,c.div({class:c.classify({"is-loading":d===o})},function(p){return function(){return c.div(".spinner.loading.search-spinner",{class:c.classify({hide:d!==o})}),d===i?c.div(".dashboard-list-item.dashboard-list-error",function(){return c.format("loading-error")}):d===r&&0===l.length&&c.div(".dashboard-list-item.dashboard-list-none",function(){return c.format("no-results")}),c.ul({class:c.classify({"pop-over-list":e})},function(){return l.forEach(function(e){return c.li(function(r){return function(){return c.addElement(u.createElement(t,{item:e,eventHandlers:n,checkedStatus:a}))}}(this))})}),d===s?c.div(".spinner.loading.pagination-spinner"):void 0}}(this))}),t}(u.Component)},{}],447:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e("react"),o=e(514)("enterprise_list_header_component"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=o.renderable(function(){return o.div(".title",function(e){return function(){return o.h2(function(){return o.text(e.props.title)}),e.props.allCount>0?o.div(".subtitle",function(){return e.props.isFiltering?o.format("showing-x-of-y",{count:e.props.count,total:e.props.allCount}):o.format("total-count",{count:e.props.allCount}),e.props.isSortable&&o.a({onClick:function(t){return t.stopPropagation(),t.preventDefault(),e.props.onSortClick(t.currentTarget)}},function(){return o.span(".dash-sorting",function(){return o.format([e.props.sortField,e.props.sortOrder]),o.icon("dropdown-menu")})}),e.props.isFiltering?o.a(".show-all.clickable",{onClick:e.props.onShowAll},function(){return o.format("show-all")}):void 0}):void 0}}(this))}),t}(i.Component)},{}],448:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(453),i=e("react"),s=e(514)("enterprise_dashboard_main_content"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=s.renderable(function(){return s.div(".enterprise-dash-layout",function(e){return function(){return s.div(".enterprise-dash-layout-sidebar",function(){return s.div(".js-sidebar-content")}),s.div(".enterprise-dash-layout-list",function(){return s.div(".indented-title.u-clearfix",function(){return s.div(".js-list-header-content .list-header"),s.addElement(i.createElement(o,{onChange:e.props.onSearchTermChange,clearValue:e.props.clearSearchValue,placeholder:s.l(["search",e.props.selectedTab]),debounce:!0}))}),s.div(".js-filters-content"),s.div(".js-bulk-actions-content"),s.div(".js-list-content.enterprise-dash-list")})}}(this))}),t}(i.Component)},{}],449:[function(e,t,n){var r,i;r=e("react"),i=e(514)("enterprise_dashboard_member_item_component"),t.exports=r.createClass({getInitialState:function(){return{selected:this.props.item.selected}},render:i.renderable(function(){var e,t,n,r,o,s,a,u,c,l,d,p,h;return l=this.props,n=l.eventHandlers,u=l.item,s=u.initials,r=u.fullName,h=u.username,e=u.avatarDomain,t=u.avatarHash,p=u.type,a=u.isDeactivated,o=u.hasTransferred,c=u.organizations,d=u.selected,i.div(".dashboard-list-item.u-clearfix",{class:i.classify({"multiple-select-state-selected":d}),onClick:function(e){return function(t){return u.selected=!u.selected,e.setState({selected:u.selected}),n.onSelectCheckboxClick(u,{selectRange:t.shiftKey})}}(this)},function(l){return function(){return i.div(".multiple-select-checkbox",function(){return i.icon("check",{class:"multiple-select-checkbox-check"})}),i.div(".member .member-no-menu",{class:i.classify({"member-deactivated":a})},function(){return t?i.img(".member-avatar",{height:"32",width:"32",src:[e,t,"50.png"].join("/"),srcSet:[e,t,"50.png 1x"].join("/")+", "+[e,t,"50.png 2x"].join("/"),alt:r+" ("+h+")",title:r+" ("+h+")"}):i.span(".member-initials",{title:r+" ("+h+")"},function(){return i.text(s)})}),i.div(".details",function(){return i.p(".name-line",function(){return i.span(".full-name",function(){return i.text(r)})}),i.p(".u-bottom.quiet",function(){return h?i.span(".quiet.u-inline-block",function(){return i.format("at-username",{username:h})}):void 0})}),i.div(".options",function(){return null!=p&&i.p(".option.status.quiet",function(){return i.format(p)}),a&&i.p(".option.status.quiet",function(){return i.format("deactivated")}),o||i.p(".option.status.quiet",function(){return i.format("not-transferred")}),c.length>0?i.a(".option.status.quiet-button.role-button",{href:"#",onClick:function(e){return e.stopPropagation(),e.preventDefault(),n.onPopoverClick(e.currentTarget,u)}},function(){return i.format("team-count",{count:c.length})}):i.p(".option.status.quiet.no-team",function(){return i.format("not-in-team")})})}}(this))})})},{}],450:[function(e,t,n){var r,i;i=e("bluebird"),t.exports=r=function(){function e(e,t){var n,r,i;null==t&&(t={}),this.enterprise=e,this.filter=null!=(n=t.filterStringBuilder)?n.toString():void 0,this.items=[],this.totalLength=0,this.lengthOfPending=0,this.loadAsSelected=!1,this.nextPageStartIndex=1,this.hasNext=!0,this.sortField=null!=(r=t.sortField)?r:"fullName",this.sortOrder=null!=(i=t.sortOrder)?i:"ascending"}return e.prototype.PAGE_SIZE=50,e.prototype._load=function(t){var n;return n={startIndex:t,count:e.prototype.PAGE_SIZE,sortBy:this.sortField,sortOrder:this.sortOrder},this.filter&&(n.filter=this.filter),this._loadPromise=this.enterprise.loadPageOfMembers(n).spread(function(e){return function(t,n){var r,i,o,s;for(s=n.totalResults,r=0,i=t.length;i>r;r++)o=t[r],e.items.push(o);return e.totalLength=s,e.lengthOfPending=e.totalLength-e.items.length,t}}(this))},e.prototype.loadNext=function(){return this.hasNext?this._load(this.nextPageStartIndex).tap(function(e){return function(t){return e.nextPageStartIndex+=t.length,e.hasNext=e.items.length<e.totalLength}}(this)):i.resolve([])},e.prototype.loadAll=function(t){var n,r;return this.hasNext?(n=function(){var n,i,o,s,a;for(a=[],r=n=i=this.nextPageStartIndex,o=this.totalLength,s=e.prototype.PAGE_SIZE;s>0?o>=n:n>=o;r=n+=s)a.push(this._load(r).tap(t));return a}.call(this),i.all(n).then(function(e){return function(){e.nextPageStartIndex=e.totalLength+1,e.hasNext=!1,e.lengthOfPending=0}}(this))):i.resolve([])},e.prototype.abortLoad=function(){var e;return null!=(e=this._loadPromise)?e.cancellable().cancel():void 0},e}()},{}],451:[function(e,t,n){var r,i;r=e("react"),i=e(514)("enterprise_dashboard_team_filter"),t.exports=r.createClass({render:i.renderable(function(){var e,t,n,r,o,s,a;return a=this.props,e=a.checkedStatus,n=a.eventHandlers,r=a.item,s=r.name,o=r.logoHash,t=r.displayName,i.a(".popover-item .u-clearfix",{href:"#",onClick:function(e){return e.preventDefault(),n.onClick(r)}},function(){return o?i.img(".popover-item-image",{src:[logoDomain,o,"30.png"].join("/")}):i.span(".popover-item-image.icon-lg.icon-organization"),i.span(".popover-item-name",function(){return i.text(t)}),null!=e&&e.isActive(r)?i.span(".dash-filter-marker .on",function(){return i.icon("check",{class:"light"})}):void 0})})})},{}],452:[function(e,t,n){var r,i,o,s,a,u,c,l=[].slice,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};c=e(121),u=e("underscore"),a=e(129),o=function(){function e(){var e,t,n,r,i;for(e=1<=arguments.length?l.call(arguments,0):[],this.selected=!1,this.source=e[0],this.id=e[0].get("id"),i=this.ATTRIBUTES,n=0,r=i.length;r>n;n++)t=i[n],this[t]=e[0].get(t);this._parseAttributes.apply(this,e)}return e.prototype._parseAttributes=function(){},e.prototype.isSearchMatch=function(e){return u.any(this.SEARCH_FIELDS,function(t){return function(n){return-1!==t[n].toLowerCase().indexOf(e.toLowerCase())}}(this))},e.prototype.toBackbone=function(){return this.source},e}(),t.exports.Board=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.SEARCH_FIELDS=["name"],t.prototype.ATTRIBUTES=["name","shortLink"],t}(o),t.exports.Team=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.SEARCH_FIELDS=["displayName","name"],t.prototype.ATTRIBUTES=["logoHash","name","displayName"],t.prototype._parseAttributes=function(e){return this.boards=e.boardList.filter(function(e){return!e.get("closed")}),this.memberCount=e.get("memberships").length},t}(o),t.exports.Member=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.API_SEARCH_FIELDS=[{fieldName:"username"},{fieldName:"fullName"},{fieldName:"emails.value",useIfTermMatches:function(e){return a.checkEmail(e,"A-Z")}}],t.prototype.SEARCH_FIELDS=["username","fullName","email"],t.prototype.ATTRIBUTES=["active","avatarHash","fullName","id","initials","username","email"],t.prototype._parseAttributes=function(e,t){return this.organizations=t,this.isDeactivated=!e.get("active"),this.hasTransferred=h.call(e.get("roles"),"enterprise.owned")>=0,this.avatarDomain=window.avatarDomain,this.type=h.call(e.get("roles"),"enterprise.admin")>=0?"admin":h.call(e.get("roles"),"organization.admin")>=0?"team-admin":"collaborator"===e.get("userType")?"collaborator":"ghost"===e.get("memberType")?"virtual":e.get("confirmed")?void 0:"unconfirmed"},t.prototype.orgAdded=function(e){return this.organizations.push(e),this.isDeactivated=!1,this.type="ghost"===this.toBackbone().get("memberType")?"virtual":this.toBackbone().get("confirmed")?void 0:"unconfirmed"},t.prototype.orgRemoved=function(e){return this.organizations?this.organizations=c(this.organizations,e):void 0},t}(o)},{}],453:[function(e,t,n){var r,i,o,s;o=e(106),r=e("react"),i=e(111),s=e(514)("enterprise_dashboard_search"),t.exports=o(i,r.createClass({getInitialState:function(){return{searchHasFocus:!1,query:""}},componentWillReceiveProps:function(e){return e.clearValue?(this.refs["search-input"].value="",this.setState({query:""})):void 0},onQueryChange:function(e){return this.props.onChange(e)},onClearClick:function(){return this.refs["search-input"].value="",this.setState({query:""}),this.props.onChange("")},componentWillMount:function(){return this.debouncedOnQueryChange=this.debounce(this.onQueryChange,300)},componentWillUnmount:function(){return this.cancelScheduled()},render:s.renderable(function(){return s.div(".enterprise-search-wrapper",function(e){return function(){return s.input(".enterprise-search-input",{class:s.classify({"js-autofocus":e.props.autofocus!==!1}),type:"text",ref:"search-input",placeholder:e.props.placeholder,onFocus:function(t){return e.setState({searchHasFocus:!0})},onBlur:function(t){return e.setState({searchHasFocus:!1})},onChange:function(t){var n;return n=t.target.value.trim(),e.setState({query:n}),e.props.debounce?e.debouncedOnQueryChange(n):e.onQueryChange(n)}}),""!==e.state.query?s.span(".enterprise-search-close-icon.icon-lg.icon-close.light",{class:s.classify({active:e.state.searchHasFocus}),onClick:e.onClearClick}):void 0}}(this))})}))},{}],454:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;s=e(99),r=e("react"),o=e(101),a=e(514)("enterprise_dashboard_sidebar"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.render=a.renderable(function(){var e,t,n,r,i,u,c,l,d,p,h,m,f;return d=this.props,m=d.teamsCount,i=d.membersCount,p=d.selectedTab,c=d.onSidebarTabClick,n=d.enterpriseMembersCount,t=d.enterpriseMaxMembers,l=d.outsideCollaboratorsCount,h=d.ssoUsersCount,e=d.deactivatedCount,u=d.nearMaxMembers,r=d.exceedingMaxMembers,f=d.userTypesLoaded,a.div(function(){return a.div(".enterprise-dash-sidebar",function(){var d;return a.div(".header",function(){return a.format("enterprise-administration")}),a.hr(),d=/^en/.test(window.locale),a.ul(function(){return a.li(function(){return a.b(function(){return c("teams")},".link",{class:a.classify({"is-active":"teams"===p})},function(){return a.text(o(["view title","teams"]))})}),a.li(function(){return a.b(function(){return c("members")},".link",{class:a.classify({"is-active":"members"===p})},function(){return a.text(o(["view title","members"]))})})}),a.div(".enterprise-dash-stats",{class:a.classify({"seat-limit-near":u,"seat-limit-exceeded":r})},function(){return f?(a.p(function(){var e,o;return e=function(e){var r,o;return r=s("seats",t),o=s("seats",t-n),i=d?1===n?"one billable team member":n+" billable team members":s("members",n),a.format(e,{membersCount:i,seatsCount:r,unusedSeatsCount:o})},null!=t?(o=t-n,e(r?"member-count-exceeding-seat-limit":0===o?"member-count-at-seat-limit":u?"member-count-nearing-seat-limit":"member-count-with-seat-limit")):e("member-count")}),d&&e&&a.p(function(){return a.text(s("deactivated count",e))}),l||h?a.p(function(){return l&&h?a.format("collaborators-and-sso-users-count",{outsideCollaboratorsCount:s("outside collaborators",l),ssoUsersCount:s("sso users",h)}):l?a.format("collaborators-count",{outsideCollaboratorsCount:s("outside collaborators",l)}):h&&a.format("sso-users-count",{ssoUsersCount:s("sso users",h)}),a.format("theyre-free")}):void 0):void a.div(".spinner",{title:"Loading statistics"})})})})}),t}(r.Component)},{}],455:[function(e,t,n){var r,i,o,s,a,u;i=e(446),s=e(453),o=e("react"),u=e(514)("enterprise_dashboard_popover"),a=e("underscore"),r=5,t.exports=o.createClass({getInitialState:function(){return{isCollapsed:!0,searchMatches:this.props.items}},paginatedItems:function(){return this.state.isCollapsed?a.first(this.state.searchMatches,r):this.state.searchMatches},onSearchTermChange:function(e){return this.setState({searchMatches:a.filter(this.props.items,function(t){return t.isSearchMatch(e)})})},render:u.renderable(function(){return u.div(function(e){return function(){return e.props.items.length>r&&u.addElement(o.createElement(s,{onChange:a.debounce(e.onSearchTermChange,300),placeholder:u.l(["search",e.props.modelName])})),null!=e.props.buttonData&&u.addElement(o.createElement(e.props.buttonData.componentClass,{onClick:e.props.buttonData.onClick})),u.div(function(){return u.addElement(o.createElement(i,{items:e.paginatedItems(),itemComponent:e.props.itemComponent,itemEventHandlers:e.props.itemEventHandlers,itemInlineButtons:e.props.itemInlineButtons,isPopOver:!0}))}),e.state.searchMatches.length>r?u.div(function(){return u.a(".quiet-button",{href:"#",style:{marginTop:"8px"},onClick:function(){return e.setState({isCollapsed:!e.state.isCollapsed})}},function(){return u.span(function(){return e.state.isCollapsed?u.format(["show-other",e.props.modelName]):u.format(["hide-other",e.props.modelName])})})}):void 0}}(this))})})},{}],456:[function(e,t,n){var r,i;r=e("react"),i=e(514)("enterprise_dashboard_team_item_component"),t.exports=r.createClass({render:i.renderable(function(){var e,t,n,r,o,s,a,u;return u=this.props,n=u.eventHandlers,r=u.item,a=r.name,o=r.logoHash,t=r.displayName,s=r.memberCount,e=r.boards,i.div(".dashboard-list-item",function(){return i.div(".member",function(){return i.a({href:"/"+a,title:a},function(){return o?i.img(".member-avatar",{src:[logoDomain,o,"30.png"].join("/")}):i.span(".team-of-member-image.icon-lg.icon-organization")})}),i.a({href:"/"+a,title:a},function(){return i.div(".details",function(){return i.p(".name-line.name-without-details",function(){return i.span(".full-name",function(){return i.text(t)})})})}),i.div(".options",function(){return e.length>0?i.b(function(e){return n.onPopoverClick(e,r)},".option.button-link.role-button",function(){return i.format("boards",{count:e.length})}):i.p(".option.status.quiet",function(){return i.format("boards",{count:e.length})}),i.p(".option.status.quiet",function(){return i.format("members",{count:s})})})})})})},{}],457:[function(e,t,n){var r,i;r=e("react"),i=e(514)("enterprise_dashboard_team_of_member"),t.exports=r.createClass({render:i.renderable(function(){var e,t,n,r;return r=this.props.item,n=r.name,t=r.logoHash,e=r.displayName,i.a({href:"/"+n,title:n},function(){return i.div(".popover-item .u-clearfix",function(){return t?i.img(".popover-item-image",{src:[logoDomain,t,"30.png"].join("/")}):i.span(".popover-item-image.icon-lg.icon-organization"),i.span(".popover-item-name",function(){return i.text(e)})})})})})},{}],458:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N,V,$,R,z,U,F,q=function(e,t){function n(){this.constructor=e}for(var r in t)H.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},H={}.hasOwnProperty,K=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e(432),s=e(433),l=e(441),c=e(442),d=e(444),w=e(448),b=e(446),y=e(447),_=e(449),p=e(538),h=e(445),k=e(542),o=e(533),P=e(455),C=e(451),O=e(443),x=e(436),a=e(439),S=e("react"),T=e("react-dom"),M=e(513),B=e(454),E=e(516),L=e(456),A=e(457),D=e(129),S=e("react"),I=e(522),r=e("jquery"),$=e(101),R=e(106),V=e(434),U=e(452),F=e(783),j=e("bluebird"),N=e("underscore"),z=b.LOADING_STATES,m=z.LOADED,g=z.LOADING_NEW,v=z.LOADING_NEXT,f=z.LOADING_ERROR,t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return q(t,e),R(E,t),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.itemLists={members:new h.Member(this.model),teams:new h.Team(this.model)},this.selectedTab="members",this._initLoadingIndicators()},t.prototype.remove=function(){var e;return null!=(e=this.infiniteScroll)?e.destroy():void 0},t.prototype._initTab=function(){return k.hide(),N.invoke(this.itemLists,"resetState"),this.infiniteScroll.reset()},t.prototype._initInfiniteScroll=function(){return this.infiniteScroll=new p(this.listRoot),this.infiniteScroll.on("nearEnd",function(e){return function(){return e.getActiveList().loadNextPage()}}(this))},t.prototype.getActiveList=function(){return this.itemLists[this.selectedTab]},t.prototype.render=function(){return this.$el.html(F({displayName:this.model.get("displayName"),enforcesSso:this.model.get("prefs").ssoOnly})),this.tabChanged&&this._initTab(),this.renderStatic(),this.renderDynamic(),this._initInfiniteScroll(),this._loadUserTypes(),this.tabChanged=!1,this},t.prototype._renderSection=function(e,t,n){var r;return this.$(t).append(e),r=S.createElement(M,{},n),T.render(r,e)},t.prototype.renderStatic=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this._renderSection(this.reactRoot,".js-content",this.getMainContentComponent())},t.prototype._renderMembersTabOnlySections=function(){return this.$(".js-filters-content").empty(),this.$(".js-bulk-actions-content").empty(),"members"===this.selectedTab?(null==this.filtersRoot&&(this.filtersRoot=document.createElement("div")),this._renderSection(this.filtersRoot,".js-filters-content",this.getFiltersComponent()),this.loadingState!==g?(null==this.bulkActionsRoot&&(this.bulkActionsRoot=document.createElement("div")),this._renderSection(this.bulkActionsRoot,".js-bulk-actions-content",this.getBulkActionsComponent())):void 0):void 0},t.prototype.renderDynamic=function(){return null==this.sidebarRoot&&(this.sidebarRoot=document.createElement("div")),this._renderSection(this.sidebarRoot,".js-sidebar-content",this.getSidebarComponent()),null==this.listHeaderRoot&&(this.listHeaderRoot=document.createElement("div")),this._renderSection(this.listHeaderRoot,".js-list-header-content",this.getListHeaderComponent()),null==this.listRoot&&(this.listRoot=document.createElement("div")),this._renderSection(this.listRoot,".js-list-content",this.getListComponent()),this._renderMembersTabOnlySections()},t.prototype.rerender=function(){return this.renderDynamic()},t.prototype.bulkAddToTeam=function(e,t,n){var r;return r=function(t){return function(t,r,i){return n(),"add:added"===r?(e.addMembership(i),t.orgAdded(e)):void 0}}(this),V.addToTeam(e,t,r,{concurrency:5})},t.prototype.bulkRemoveFromTeam=function(e,t,n,r){var i;return i=function(t){return function(t,n){var i;return r(),"remove:removed"===n?(i=e.getMembershipFor(t.toBackbone()),e.removeMembership(i),t.orgRemoved(e)):void 0}}(this),V.removeFromTeam(e,t,i,{removeFromBoards:n,concurrency:5})},t.prototype.bulkDeactivateFromTeam=function(e,t,n){var r;return r=function(t){return function(t,r){return n(),"deactivate:deactivated"===r?e.setOnMembership(t.toBackbone(),{deactivated:!0}):void 0}}(this),V.deactivateFromTeam(e,t,r,{concurrency:5})},t.prototype.displayBulkTeamOptions=function(e,t){return k.pushView({elem:e,alignRight:!0,getViewTitle:function(){return $(["view title","team bulk actions options"],{teamDisplayName:t.displayName},{raw:!0})},reactElement:S.createElement(a,{team:t,getSelectedMembers:this.itemLists.members.selectedItems(),eventHandlers:{runBulkActionAdd:function(n){return function(r){var i;return i=new o(e,t.toBackbone().get("displayName"),n.model.get("displayName"),r.length,"add"),n.bulkAddToTeam(t.toBackbone(),r,function(){return i.incrementProcessed()}).then(function(e){return i.done(e),n.rerender()})}}(this),runBulkActionRemove:function(n){return function(r,i){var s;return s=new o(e,t.toBackbone().get("displayName"),n.model.get("displayName"),r.length,"remove"),n.bulkRemoveFromTeam(t.toBackbone(),r,i,function(){return s.incrementProcessed()}).then(function(e){return s.done(e),n.rerender()})}}(this),runBulkActionDeactivate:function(n){return function(r){var i;return i=new o(e,t.toBackbone().get("displayName"),n.model.get("displayName"),r.length,"deactivate"),n.bulkDeactivateFromTeam(t.toBackbone(),r,function(){return i.incrementProcessed()}).then(function(e){return i.done(e),n.rerender()})}}(this)},key:"bulk-add-teams"})})},t.prototype.getMainContentComponent=function(){return S.createElement(w,{selectedTab:this.selectedTab,clearSearchValue:this.tabChanged||this.resetSearch,onSearchTermChange:this.search.bind(this)})},t.prototype.search=function(e){return this.getActiveList().updateFilter("search",e)},t.prototype._loadUserTypes=function(){return this.model.loadUserTypes().then(function(e){return function(){return e.rerender()}}(this))},t.prototype._initLoadingIndicators=function(){var e,t,n,r,i;for(this._setLoadingState(g),r=N.values(this.itemLists),i=[],e=0,n=r.length;n>e;e++)t=r[e],this.listenTo(t,"loading",this.onListLoading),this.listenTo(t,"loadingNext",this.onListLoadingNext),this.listenTo(t,"loaded",this.onListLoaded),i.push(this.listenTo(t,"loadError",this.onListLoadingError));return i},t.prototype._setLoadingState=function(e){return e===m||e===g||e===v||e===f?(this.loadingState=e,this.rerender()):void 0},t.prototype.onListLoading=function(){return this._setLoadingState(g)},t.prototype.onListLoadingNext=function(){return this._setLoadingState(v)},t.prototype.onListLoaded=function(){return this._setLoadingState(m),this.infiniteScroll.reset()},t.prototype.onListLoadingError=function(){return this._setLoadingState(f),this.infiniteScroll.reset()},t.prototype.onTeamsOfMemberPopoverClick=function(e,t){var n,r,i,o,s,a,u;if(t.organizations.length>0){for(r={active:[],deactivated:[]},a=t.organizations,i=0,o=a.length;o>i;i++)s=a[i],u=new U.Team(s),n=s.getMembershipFor(t.toBackbone()).deactivated?"deactivated":"active",r[n].push(u);k.toggle({elem:e,getViewTitle:function(){return $(["view title","teams"])},reactElement:S.createElement(d,{modelName:"teams",items:r,itemComponent:A,key:t.username+"-teams"})})}},t.prototype.onBoardsOfTeamPopoverClick=function(e,t){t.boards.length>0&&k.toggle({elem:e,getViewTitle:function(){
return $(["view title","boards"])},reactElement:S.createElement(P,{modelName:"boards",items:t.boards.map(function(e){return new U.Board(e)}),itemComponent:i,key:t.name+"-boards"})})},t.prototype.onSelectMemberClick=function(e,t){var n;return n=t.selectRange,this.getActiveList().itemSelected(e,n),this.rerender()},t.prototype.getListComponent=function(){var e;return e={loadingState:this.loadingState,items:this.getActiveList().items(),itemEventHandlers:{onSelectCheckboxClick:this.onSelectMemberClick.bind(this)}},"members"===this.selectedTab?(e.itemEventHandlers.onPopoverClick=this.onTeamsOfMemberPopoverClick,e.itemComponent=_):(e.itemEventHandlers.onPopoverClick=this.onBoardsOfTeamPopoverClick,e.itemComponent=L),S.createElement(b,e)},t.prototype.getSidebarComponent=function(){return S.createElement(B,{userTypesLoaded:null!=this.model.get("userTypes"),teamsCount:this.itemLists.teams.totalLength(),membersCount:this._getTotalUsersCount(),enterpriseMembersCount:this._getEnterpriseMembersCount(),outsideCollaboratorsCount:this._getOutsideCollaboratorsCount(),ssoUsersCount:this._getSsoUsersCount(),enterpriseMaxMembers:this._getMaxMembers(),deactivatedCount:this._getDeactivatedCount(),nearMaxMembers:this._isNearMaxMembers(),exceedingMaxMembers:this._isExceedingMaxMembers(),selectedTab:this.selectedTab,onSidebarTabClick:function(e){return function(t){return e.selectedTab=t,e.tabChanged=!0,e.render()}}(this)})},t.prototype.getBulkActionsComponent=function(){return S.createElement(s,{count:this.itemLists.members.selectedItemsLength(),totalCount:this.itemLists.members.lengthOfSearch(),onTeamsPopoverClick:function(e){return function(t){e.model.organizationList.models.length>0&&k.toggle({elem:t,maxWidth:410,alignRight:!0,getViewTitle:function(){return $("add or remove from team")},reactElement:S.createElement(P,{modelName:"teams",items:e.model.organizationList.map(function(e){return new U.Team(e)}),itemComponent:C,itemEventHandlers:{onClick:function(n){return e.displayBulkTeamOptions(t,n)}},key:"bulk-teams"})})}}(this),hasTeams:this.itemLists.teams.totalLength()>0,allItemsAreSelected:this.itemLists.members.selectedItemsLength()===this.itemLists.members.lengthOfSearch(),allVisibleItemsAreSelected:this.itemLists.members.selectedItemsLength()>=this.itemLists.members.items().length,onSelectAll:function(e){return function(){return e.itemLists.members.selectAll(),e.rerender()}}(this),onClearAll:function(e){return function(){return e.itemLists.members.deselect(),e.rerender()}}(this),hasSelectedItems:this.itemLists.members.selectedItemsLength()>0})},t.prototype.getListHeaderComponent=function(){var e,t,n;return n=this.getActiveList(),S.createElement(y,{isFiltering:this.getActiveList().getActiveFilters().length>0,title:D.capitalize(this.selectedTab),count:n.lengthOfSearch(),allCount:n.totalLength(),error:this.loadingState===f,isSortable:"members"===this.selectedTab,sortField:"function"==typeof(e=this.getActiveList()).getSortField?e.getSortField():void 0,sortOrder:"function"==typeof(t=this.getActiveList()).getSortOrder?t.getSortOrder():void 0,onSortClick:function(e){return function(t){k.toggle({elem:t,getViewTitle:function(){return $(["view title","sort by"])},reactElement:S.createElement(P,{items:[{name:"A-Z",sortField:"fullName",sortOrder:"ascending"},{name:"Z-A",sortField:"fullName",sortOrder:"descending"},{name:"least-recently-active",sortField:"dateLastActive",sortOrder:"ascending"},{name:"most-recently-active",sortField:"dateLastActive",sortOrder:"descending"}],itemComponent:O,itemEventHandlers:{onClick:function(t){var n,r;return n=t.sortField,r=t.sortOrder,k.hide(),e.getActiveList().sort(n,r),e.rerender()}},itemInlineButtons:{isActive:function(t){var n,r;return n=t.sortField,r=t.sortOrder,e.getActiveList().getSortField()===n&&e.getActiveList().getSortOrder()===r}},key:"sort-by-activity"})})}}(this),onShowAll:function(e){return function(){return e.search(),e.resetSearch=!0,e._clearFiltersExceptSearch(),e.getActiveList().clearFilter("search"),e.renderStatic(),e.resetSearch=!1}}(this)})},t.prototype._getTotalUsersCount=function(){var e;return null!=(e=this.model.get("userTypes"))?e.all:void 0},t.prototype._getEnterpriseMembersCount=function(){var e;return null!=(e=this.model.get("userTypes"))?e.member:void 0},t.prototype._getDeactivatedCount=function(){var e;return null!=(e=this.model.get("userTypes"))?e.none:void 0},t.prototype._getOutsideCollaboratorsCount=function(){var e;return null!=(e=this.model.get("userTypes"))?e.collaborator:void 0},t.prototype._getSsoUsersCount=function(){var e;return null!=(e=this.model.get("userTypes"))?e.saml:void 0},t.prototype._getMaxMembers=function(){return this.model.getPref("maxMembers")},t.prototype._isNearMaxMembers=function(){var e,t;return t=this._getMaxMembers(),null==t?!1:(e=this._getEnterpriseMembersCount(),t-e<=Math.min(Math.ceil(.05*t),20))},t.prototype._isExceedingMaxMembers=function(){var e;return e=this._getMaxMembers(),null!=e&&e<this._getEnterpriseMembersCount()},t.prototype._clearFiltersExceptSearch=function(){var e,t,n,r,i;for(k.hide(),r=["teams","userType","hasTransferred"],i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(this.getActiveList().clearFilter(e));return i},t.prototype.getFiltersComponent=function(){var e;return e=function(e){return function(t,n,r){var i,o,s,a,u;return s=r.items,o=r.itemComponent,u=r.optionIsActive,a=r.onFilterOptionClick,i=K.call(e.getActiveList().getActiveFilters(),t)>=0,{elem:n,alignRight:!0,getViewTitle:function(){return $(["view title",t])},hideHeader:!0,displayType:"filter-popover",reactElement:S.createElement(P,{modelName:t,isActive:i,buttonData:i?{componentClass:c,onClick:function(){return k.hide(),e.getActiveList().clearFilter(t),e.rerender()}}:void 0,items:s,itemComponent:o,itemInlineButtons:{isActive:u},itemEventHandlers:{onClick:a},key:t+"-filter"})}}}(this),S.createElement(l,{hasTeams:this.itemLists.teams.totalLength()>0,activeFilters:this.getActiveList().getActiveFilters(),clickHandlers:{team:function(t){return function(n){var r;t.model.organizationList.models.length>0&&(r=function(){return e("teams",n,{items:t.model.organizationList.map(function(e){return new U.Team(e)}),itemComponent:C,onFilterOptionClick:function(e){return t.getActiveList().toggleFilter("teams",e.id),t.rerender(),k.load(r())},optionIsActive:function(e){var n;return n=e.id,K.call(t.getActiveList().getFilterValueMap().teams,n)>=0}})},k.toggle(r()))}}(this),userType:function(t){return function(n){var r;r=function(){return e("userType",n,{items:[{name:"member"},{name:"collaborator"},{name:"saml"},{name:"none"}],itemComponent:O,onFilterOptionClick:function(e){return t.getActiveList().toggleFilter("userType",e.name),t.rerender(),k.load(r())},optionIsActive:function(e){var n;return n=e.name,K.call(t.getActiveList().getFilterValueMap().userType,n)>=0}})},k.toggle(r())}}(this),hasTransferred:function(t){return function(n){var r;r=function(){return e("hasTransferred",n,{items:[{name:"transferred"},{name:"not-transferred"}],itemComponent:O,optionIsActive:function(e){var n;return n=t.getActiveList().getFilterValueMap().hasTransferred,null==n?!1:"transferred"===e.name?n:!n},onFilterOptionClick:function(e){var n,i;return i=t.getActiveList().getFilterValueMap().hasTransferred,null==i?t.getActiveList().updateFilter("hasTransferred","transferred"===e.name):(n=i?"transferred"===e.name:"not-transferred"===e.name,n?t.getActiveList().clearFilter("hasTransferred"):t.getActiveList().updateFilter("hasTransferred","transferred"===e.name)),t.rerender(),k.load(r())}})},k.toggle(r())}}(this),clear:function(e){return function(){return e._clearFiltersExceptSearch(),e.rerender()}}(this)}})},t}(I)},{}],459:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),i=e(79),s=e(543),a=e(129),u=e(522),c=e(786),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.events={"click .js-login":"login"},t.prototype.login=function(e){var t,n;return a.stop(e),n=i.isEmbeddedDocument()?"/embed/login":this.model.url,t="/login?"+r.param({returnUrl:n}),i.isEmbeddedDocument()?new s(t).open():window.location=t},t.prototype.render=function(){return this.$el.html(c(this.model)),this},t}(u)},{}],460:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty,m=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e(80),o=e(129),s=e(481),d=e("moment"),u=e(809),a=e(808),c=e(810),l=e(811),t.exports=r=function(e){function t(e){var n;n=e.enterprise,t.__super__.constructor.apply(this,arguments),this.enterprise=n}var n;return p(t,e),n="AccountTransferRequired",t.prototype.events={"click .js-dismiss-account-transfer":"dismiss","click .js-begin-transfer":"beginTransfer"},t.prototype.dismiss=function(e){return o.stop(e),this.model.dismiss(n,function(e){return function(){return e.render()}}(this))},t.prototype.beginTransfer=function(e){return o.stop(e),window.location="/enterprise/"+this.enterprise.get("name")+"/transfer-account"},t.prototype._remainingDays=function(){var e;return e=i.parse(this.enterprise.get("prefs").mandatoryTransferDate),i.getDaysUntil(e)},t.prototype.renderCollapsed=function(){var e,t;return t=this._remainingDays(),e=0>=t,this.$el.html(u({remainingDays:t,overdue:e,enterpriseName:this.enterprise.get("name")}))},t.prototype.renderBig=function(){var e,t;return this.$el.html(a({targetDate:i.toDateString(this.enterprise.get("prefs").mandatoryTransferDate),enterpriseName:this.enterprise.get("name"),isAdmin:(e=this.model.id,m.call(null!=(t=this.enterprise.get("idAdmins"))?t:[],e)>=0)}))},t.prototype.renderDelayed=function(){return this.$el.html(c({enterpriseName:this.enterprise.get("name")}))},t.prototype.renderRemainingDays=function(){var e,t;return t=this._remainingDays(),t>1&&5>=t?this.$el.addClass("mod-medium-urgent"):1>=t&&this.$el.addClass("mod-urgent"),this.enterprise.get("ssoDateDelayed")&&(e=this.model.id,m.call(this.enterprise.get("idAdmins"),e)>=0)?this.renderDelayed():this.model.isDismissed(n)?this.renderCollapsed():this.renderBig()},t.prototype.renderMissedDate=function(){return this.$el.addClass("mod-urgent"),this.$el.html(l())},t.prototype.render=function(){return null!=this.enterprise?this.renderRemainingDays():this.renderMissedDate(),this},t}(s)},{}],461:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),i=e(153),a=e(114),u=e(522),p=e(791),h=e(48),d=e("moment"),l=e(36).locales,s=e(98),c=e(238),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return this.listenTo(i,"add remove reset",this.frameDebounce(this.render))},t.prototype.viewTitleKey="announcements",t.prototype.events={"click .js-blog":"clickBlog","click .js-t":"clickTwitter","click .js-fb":"clickFacebook","click .js-g":"clickGoogle","click a":"openAnnouncementLink"},t.prototype.render=function(){var e,t,n,r;for(t=i.forLocale(l[0]),n=0,r=t.length;r>n;n++)e=t[n],e.isUnread()&&e.markRead();return a.set("tacoShow",d().add(1,"hours").valueOf()),this.$el.html(p(t.map(c.method("toJSON")))),this},t.prototype.clickBlog=function(){return h("Header","Announcements Menu","Trello Blog")},t.prototype.clickTwitter=function(){return h("Header","Announcements Menu","Twitter Link")},t.prototype.clickFacebook=function(){return h("Header","Announcements Menu","Facebook Link")},t.prototype.clickGoogle=function(){return h("Header","Announcements Menu","Google+ Link")},t.prototype.openAnnouncementLink=function(e){return r(e.target).closest("a").is(".js-blog, .js-t, .js-fb, .js-g, .js-close-popover")?void 0:h("Info","Announcements","Open Announcement Link")},t}(u)},{}],462:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(79),u=e(48),o=e(481),s=e(517)("browser_will_be_unsupported"),a=s.renderable(function(){return s.p(".u-bottom",function(){var e;return e=r.browserVersionStr,console.log(e),/^explorer-10/.test(e)?(s.format("trello-is-ending-support-for-ie-10"),s.text(" "),s.format("please-upgrade-to-ie-11-or-newer",{url:"https://support.microsoft.com/en-us/help/17621/internet-explorer-downloads"})):/^safari-[678]/.test(e)?(/^safari-6/.test(e)?s.format("trello-is-ending-support-for-safari-6"):/^safari-7/.test(e)?s.format("trello-is-ending-support-for-safari-7"):s.format("trello-is-ending-support-for-safari-8"),s.text(" "),s.format("please-upgrade-to-safari-9-or-newer",{url:"https://support.apple.com/downloads/safari"})):void 0})}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.events={"click a":function(e){return u("Unsupported Browser Banner","Clicked Upgrade",r.browserVersionStr)}},t.prototype.render=function(){return this.$el.html(a()),this},t}(o)},{}],463:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(534),o=e(601),t.exports=i=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.template="confirm_merge"}return s(t,e),t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.appendSubview(this.subview(o,this.model),this.$(".js-member")),this},t}(r)},{}],464:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(215),o=e(481),s=e(519),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(){var e,t,n,i;n={gmail:/@(gmail|googlemail).com$/,yahoo:/@(yahoo|ymail).com$/,live:/@(hotmail|live).com$/,mac:/@(me|mac).com$/},e={gmail:"http://gmail.com",yahoo:"http://mail.yahoo.com",live:"http://live.com",mac:"https://www.icloud.com/"};for(t in n)if(i=n[t],i.test(this.model.get("email"))){this.emailInboxUrl=e[t];break}return null==this.emailInboxUrl?r({url:"/checkYourEmail",data:{email:this.model.get("email")},dataType:"json",success:function(e){return function(t){return null==t.error?(e.emailInboxUrl=t.url,e.render()):void 0}}(this)}):void 0},t.prototype.render=function(){var e;return e=this.model.toJSON(),null!=this.emailInboxUrl&&(e.emailInboxUrl=this.emailInboxUrl,e.knownEmailProvider=!0),this.$el.html(s.fill("header_warning_banner",e)),this},t}(o)},{}],465:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(379),i=e(620),s=e(542),a=e(129),u=e(522),c=e(519),l=e(48),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="create",t.prototype.events={"click .js-new-board":"newBoard","click .js-new-org":"newOrg","click .js-new-bc-org":"newBCOrg"},t.prototype.render=function(){return this.$el.html(c.fill("header_add_menu")),this},t.prototype.newBoard=function(e){return l("Header","Add Menu","New Board"),a.stop(e),s.pushView({view:new r({model:this.model,modelCache:this.modelCache,useLastOrganization:!0})})},t.prototype.newOrg=function(e){return l("Header","Add Menu","New Org"),a.stop(e),s.pushView({view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.newBCOrg=function(e){var t;return l("Header","Add Menu","New Business Class Org"),t={isBusinessClass:!0},a.stop(e),s.pushView({view:new i({model:this.model,modelCache:this.modelCache,createOpts:t})})},t}(u)},{}],466:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(129),i=e(545),s=e(522),a=e(519),u=e(48),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="header-back-button",t.prototype.events={"click .js-back-menu":"backPressed","mouseenter .js-back-menu":"showTooltip","mouseleave .js-back-menu":"hideTooltip"},t.prototype.render=function(){return this.$el.html(a.fill("header_back_menu_button")),this},t.prototype.backPressed=function(){return u("Header","Back to Home Menu","Clicked")},t.prototype.showTooltip=function(){var e;return e=this.$(".js-back-menu"),i.show(e.attr("aria-label"),e,!1,i.STYLE.MENU)},t.prototype.hideTooltip=function(){return i.hide()},t}(s)},{}],467:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;i=e(276),o=e(129),s=e(522),a=e(519),u=e(48),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="header-boards-button",t.prototype.events={"click .js-boards-menu":"toggleBoardsSidebar"},t.prototype.render=function(){return this.$el.html(a.fill("header_boards_menu_button")),this},t.prototype.toggleBoardsSidebar=function(e){o.stop(e),u("Header","Boards Menu","Toggle Boards Menu"),i.getShowSidebar()?i.hideSidebar():i.showSidebar()},t}(s)},{}],468:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),i=e(215),s=e(473),a=e(542),u=e(129),c=e(522),l=e(519),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.CHANNELS=["stable","beta","alpha"],t.prototype.viewTitleKey="switch channels",t.prototype.events={"click .js-select":"selectChannel","click .js-select-dev":"showDev","click .js-remove-cookie":"removeCookie"},t.prototype.initialize=function(){var e,t,n;return e=this.model.get("channels"),this.channels=function(){var t,r,i,o;for(i=this.CHANNELS,o=[],t=0,r=i.length;r>t;t++)n=i[t],h.call(e.allowed,n)>=0&&o.push({name:n,displayName:u.capitalize(n),active:n===e.active});return o}.call(this),this.isDev=e.dev,t=!!r.cookie("head"),t&&this.isDev?this.defer(function(e){return function(){return e.showDev()}}(this)):void 0},t.prototype.selectChannel=function(e){var t;return t=e.target.name,i({url:"/1/members/me/channels/active",type:"PUT",data:{value:t},success:function(e){return function(){return e.model.get("channels").active=t,a.hide(),document.location.reload()}}(this)})},t.prototype.removeCookie=function(e){return u.stop(e),r.cookie("head",null,{path:"/"}),this.render()},t.prototype.render=function(){var e,t;return e=!!r.cookie("head"),t=window.TrelloVersion,this.$el.html(l.fill("header_channel_picker",{channels:this.channels,cookie:e,version:t,dev:this.isDev})),this},t.prototype.showDev=function(e){return u.stop(e),a.pushView({view:s}),this},t}(c)},{}],469:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;u=e("underscore"),r=e(6),c=e(101),o=e(38),s=e("bluebird"),a=e(522),l=e(45),d=e(795),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.getViewTitle=function(){return"Trello Enterprise"},t.prototype.initialize=function(){return s.map(this.model.get("idEnterprisesAdmin"),function(e){return function(t){var n;return null!=(n=e.modelCache.get("Enterprise",t))?n:o.loadEnterprise(t)}}(this)).then(function(e){return function(t){return e.enterprises=t,e.render()}}(this))},t.prototype.render=function(){var e;return l("render","rendering HeaderEnterpriseAdminDashboardMenuView"),null!=this.enterprises?this.enterprises.length>0?(e=u.map(this.enterprises,function(e){return function(e){return{title:e.get("displayName"),url:r.getEnterpriseAdminDashboardUrl(e.get("name"))}}}(this)),this.$el.html(d(e))):this.$el.text("You are not an admin of any enterprise"):this.$el.text("Loading..."),this},t}(a)},{}],470:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;i=e(522),s=e(796),a=e(945),u=e(48),o=e(88),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="information",t.prototype.events={"click .js-new-tip":"newTipEvent","click .js-tip":"clickTip","click .js-meta-page-link":"clickMetaPage","click .js-meta-page-more-link":"showMoreLinks"},t.prototype.initialize=function(){return this.remainingTips=o.slice(0),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.$el.html(s()),this.newTip(),this},t.prototype.getFreshTip=function(){var e,t;return this.remainingTips.length<1&&(this.remainingTips=o.slice(0)),e=Math.floor(Math.random()*this.remainingTips.length),t=this.remainingTips[e],this.remainingTips.splice(e,1),t},t.prototype.newTipEvent=function(){u("Header Tips","Get a new tip."),this.newTip()},t.prototype.newTip=function(){var e;return e=this.getFreshTip(),this.$(".js-fill-tip").empty().append(a(e)),u("Header Tips",e.id,"Viewed"),this},t.prototype.clickTip=function(e){var t;return t=this.$(e.currentTarget).attr("data-tipid"),u("Header Tips",t,"Clicked")},t.prototype.clickMetaPage=function(e){var t;return t=this.$(e.currentTarget).attr("data-metapagename"),u("Header","Information Menu",t)},t.prototype.showMoreLinks=function(e){return this.$(".js-more-menu-button").addClass("hide"),this.$(".js-more-menu").removeClass("hide"),u("Header","Information Menu","Show More Links")},t}(i)},{}],471:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;r=e("jquery"),i=e(33),s=e(567),o=e(565),a=e(6),c=e(475),f=e(101),l=e(542),d=e("react"),p=e(129),h=e(522),v=e(45),m=e(238),b=e(799),g=e(36).locales,y=m(e(48),"Header","User Menu"),w=function(e){return function(){return y(e)}},t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.frameDebounce(this.render))},t.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},t.prototype.events={"click .js-profile":w("Profile"),"click .js-cards":w("Cards"),"click .js-billing":w("Billing"),"click .js-account":w("Settings"),"click .js-help":function(e){return w("Help"),i.isLoggedIn()?(p.stop(e),l.show({getViewTitle:function(){return f(["view title","help"])},maxWidth:500,clientx:r(window).width()-500,clienty:40,elem:e.currentTarget,reactElement:d.createElement(c,{key:"help"})})):void 0},"click .js-shortcuts":w("Shortcuts"),"click .js-change-locale":"changeLocale","click .js-logout":"logout"},t.prototype.render=function(){var e;return v("render","rendering HeaderMemberMenuView"),e={profileUrl:a.getMemberProfileUrl(),cardsUrl:a.getMemberCardsUrl(),billingUrl:a.getMemberBillingUrl(),accountUrl:a.getMemberAccountUrl(),canLogOut:i.canLogIn(),hasAccount:this.model.hasMemberOrOrgAccount()},this.$el.html(b(e)),this},t.prototype.changeLocale=function(e){y("Change Locale"),p.stop(e),l.pushView({view:new o({model:this.model,modelCache:this.modelCache,onChange:function(e,t){return t===e?l.popView():document.location.reload()}})})},t.prototype.logout=function(e){return i.canLogIn()?(i.logoutPost(),y("Log Out")):(l.pushView({view:new s({model:this.model,modelCache:this.modelCache})}),p.stop(e))},t}(h)},{}],472:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M=function(e,t){function n(){this.constructor=e}for(var r in t)B.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},B={}.hasOwnProperty;r=e(33),i=e(6),o=e(535),s=e(536),a=e(465),u=e(468),d=e(471),c=e(469),h=e(605),l=e(470),m=e(38),f=e(205),g=e(542),v=e("bluebird"),b=e("react"),y=e(115),w=e(129),_=e(522),k=e("underscore"),C=e(101),x=e(45),S=e(519),T=e(48),j=e(829),t.exports=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),t.prototype.className="header-user",t.prototype.initialize=function(){var e;return this.listenTo(this.modelCache,"add:Notification change:Notification remove:Notification",this.renderUnreadNotifications),this.listenTo(this.model,"change:showNps",this.renderUnreadNotifications),this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username",this.renderAvatar),this.idLastNotification=null!=(e=k.chain(this.modelCache.all("Notification")).pluck("id").compact().sort().last().value())?e:"",this.listenTo(this.modelCache,"add:Notification",this.showDesktopNotification),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-open-header-info-menu":"viewInfoMenu","click .js-open-header-notifications-menu":"viewNotificationsMenu","click .js-open-enterprise-dashboard-menu":"viewEnterpriseDashboardMenu","click .js-open-header-member-menu":"viewMemberMenu","click .js-open-add-menu":"openAddMenu","click .js-open-channel-picker":"viewChannelPicker"},t.prototype.render=function(){var e;return x("render","rendering header"),e={hasCrown:this.model.isFeatureEnabled("crown"),showChannelPicker:r.isLoggedIn()&&this.model.get("channels").allowed.length>1,escapedReturnUrl:w.escapedReturnUrl(),isEnterpriseAdmin:this.model.isEnterpriseAdmin()},this.$el.html(S.fill("header_user",e,{},{header_signup_login:S.header_signup_login})),this.renderUnreadNotifications(),this.renderAvatar(),this.renderMemberName(),this},t.prototype.renderMemberName=function(){var e;return this.$(".js-member-name").text(null!=(e=this.model.get("fullName"))?e:this.model.get("username"))},t.prototype.renderAvatar=function(){return x("render","rendering avatar"),this.$(".member").html(j(this.model.toJSON())),this},t.prototype.renderUnreadNotifications=function(){var e;return e=f.unreadCount(this.modelCache),this.$(".js-open-header-notifications-menu").toggleClass("new-notifications",e>0).toggleClass("other-notifications",0===e&&this.model.shouldShowSurvey()),i.title(),this},t.prototype.viewInfoMenu=function(e){T("Header","Information Menu","Open Information Menu"),w.stop(e),g.toggle({elem:this.$(".js-open-header-info-menu"),view:l,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.viewEnterpriseDashboardMenu=function(e){var t;w.stop(e),T("Header","Enterprise Dashboard Menu","Open Enterprise Dashboard Menu"),t=new c({model:r.me(),modelCache:this.modelCache}),g.toggle({elem:this.$(".js-open-enterprise-dashboard-menu"),view:t})},t.prototype.viewNotificationsMenu=function(e){w.stop(e),T("Header","Notifications Menu","Open Notifications Menu"),this.model.shouldShowSurvey()&&this.model.trackShowSurvey(),g.toggle({elem:this.$(".js-open-header-notifications-menu"),hidden:k.bind(this.model.clearAllNotifications,this.model),maxWidth:450,displayType:"mod-notifications",getViewTitle:function(){return C("view title.notifications")},reactElement:b.createElement(h,{key:"header-notifications",member:this.model,noteUrl:"/"+this.model.get("username")+"/notifications",showSurvey:this.model.shouldShowSurvey(),onDismissSurvey:function(e){return function(){return e.model.dismissSurvey()}}(this),submitSurvey:function(e){return function(t){return e.model.submitSurvey(t)}}(this)}),options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openAddMenu=function(e){w.stop(e),T("Header","Add Menu","Open"),g.toggle({elem:this.$(".js-open-add-menu"),view:new a({model:r.me(),modelCache:this.modelCache})})},t.prototype.viewMemberMenu=function(e){var t;w.stop(e),T("Header","User Menu","Open User Menu"),t=new d({model:r.me(),modelCache:this.modelCache}),g.toggle({elem:this.$(".js-open-header-member-menu"),view:t})},t.prototype.viewChannelPicker=function(e){w.stop(e),g.toggle({elem:this.$(".js-open-channel-picker"),view:new u({model:r.me(),modelCache:this.modelCache})})},t.prototype.showDesktopNotification=function(e){return!o.enabled()||e.id<=this.idLastNotification?void 0:(this.idLastNotification=e.id,v.try(function(){var t;return t=Date.now()-y.serverToClient(e.get("date")),t<w.getMs({minutes:1})?e:m.loadNotification(e.id)}).then(function(e){return e.get("unread")?new o(e):void 0}).done())},t}(_)},{}],473:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(129),s=e(522),a=e(519),u=e("xtend"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="select client version",t.prototype.LATEST_VERSION={"0.0":!0},t.prototype.events={"change .js-select-head":"updateHead","change .js-select-version":"updateVersion"},t.prototype.initialize=function(){var e,t;return this.active=function(){try{return JSON.parse(r.cookie("head"))}catch(e){}}()||{},this.active.version&&(this.active.version=[null!=(e=this.active.version)?e:0,null!=(t=this.active.patch)?t:0].join(".")),r.getJSON("/web/deployments").done(function(e){return function(t){return e.deployments=t,e.render()}}(this))},t.prototype.render=function(){return null!=this.deployments?this.$el.html(a.fill("header_version_picker",{active:this.formatActive(),heads:[null].concat(this.listHeads()),versions:[null].concat(this.listVersions())})):this.$el.text("Loading..."),this},t.prototype.formatVersion=function(e){return"0.0"===e?"latest":e},t.prototype.formatActive=function(){return{name:this.active.name,version:this.formatVersion(this.active.version)}},t.prototype.listHeads=function(){var e,t,n,r;t=this.deployments,n=[];for(e in t)r=t[e],n.push({displayName:e,value:e,selected:this.active.name===e});return n},t.prototype.listVersions=function(){var e,t,n,r,i;t=this.deployments[this.active.name],n=u(this.LATEST_VERSION,t),r=[];for(i in n)e=n[i],r.push({displayName:this.formatVersion(i),value:i,selected:this.active.version===i,active:e});return r},t.prototype.updateHead=function(e){return this.active.name=r(e.target).val(),this.active.version=null,this.render()},t.prototype.updateVersion=function(e){var t,n,i,o;return this.active.version=r(e.target).val(),this.render(),i=this.active.version.split("."),o=i[0],n=i[1],t={name:this.active.name,version:o,patch:n},parseInt(o)>=0?(r.cookie("head",JSON.stringify(t),{path:"/"}),document.location.reload()):void 0},t}(s)},{}],474:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty,_=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(153),i=e(461),o=e(155),s=e(33),c=e(542),l=e(114),d=e(129),p=e(522),h=e("underscore"),v=e(519),b=e(48),f=e(101),g=e(36).locales,
u=e(98),m=e(238),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("renderTacoState"),this.listenTo(o,"add remove reset",this.renderTacoStateDebounced),this.listenTo(r,"add remove reset change:unread",this.renderTacoStateDebounced),this.updateAllAnnouncements=h.debounce(this.updateAllAnnouncements,6e4,!0),this.setInterval(function(e){return function(){return e.renderTacoState()}}(this),3e4)},t.prototype.events={click:"openAnnouncement",mouseover:"updateAllAnnouncements"},t.prototype.render=function(){return this.$el.html(v.fill("woof_header")),this.renderTacoState(),this},t.prototype.renderTacoState=function(){var e,t,n,r;n={alert:"woof-alert",unread:"woof-up",recentlyRead:"woof-crouch",none:"woof-hide"},e=this.$(".header-btn");for(r in n)t=n[r],e.removeClass(t);_.call(h.pluck(o.toJSON(),"type"),"downtime")>=0?(e.find(".js-phrase").text(f("announcements.maintenance")),e.addClass(n.alert)):e.find(".js-phrase").text(f("announcements.new stuff")),e.addClass(this.interestingAnnouncementCount()>0?n.unread:l.get("tacoShow")>Date.now()?n.recentlyRead:n.none)},t.prototype.interestingAnnouncementCount=function(){return o.forLocale(g[0]).filter(m.method("isUnread")).length},t.prototype.updateAllAnnouncements=function(){return r.fetch()},t.prototype.openAnnouncement=function(e){d.stop(e),this.updateAllAnnouncements(),c.toggle({elem:this.$(".header-btn"),view:new i({model:s.me(),modelCache:this.modelCache})}),b("Header","Announcement","Unread",this.interestingAnnouncementCount())},t}(p)},{}],475:[function(e,t,n){var r,i;r=e("react"),i=e(514)(),t.exports=r.createClass({displayName:"HelpOverlay",componentDidMount:function(){return window.addEventListener("message",this.receiveMessage)},componentWillUnmount:function(){return window.removeEventListener("message",this.receiveMessage)},receiveMessage:function(e){var t,n,r,i;if(e.source===this.refs.iframe.contentWindow)switch(n=e.data,r=n.type,i=n.value,r){case"resize":if(this.refs.loading.style.display="none",t=parseFloat(this.refs.iframe.style.height),!this.refs.iframe.style.height||i>t&&50>t-i)return this.refs.iframe.style.height=i+"px"}},render:i.renderable(function(){return i.div(function(){return i.div(".spinner.loading",{ref:"loading"}),i.iframe(".help-embedded-iframe",{ref:"iframe",src:"/contact?compact=1&trello=1&url="+encodeURIComponent(location.href)+"&source=from%20in%20app"})})})})},{}],476:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),i=e(532),o=e(215),s=e(33),a=e(161),u=e(463),c=e(536),d=e(38),p=e(129),h=e(481),m=e("underscore"),g=e(797),v=e(48),f=e(101),t.exports=l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.events={"click .js-join-model":"joinModel","click .js-ignore-invite":"ignoreInvite","click .js-create-new-account":"createNewAccount"},t.prototype.className="header-banner mod-warning mod-invited",t.prototype.initialize=function(){return this.boardOrOrg=this.options.idBoard?this.modelCache.get("Board",this.options.idBoard):this.modelCache.get("Organization",this.options.idOrganization),d.loadMemberEmail(this.getGhost().id).then(function(e){return function(t){var n;if(null!=(n=t.get("email")))return o({url:"/1/search/members/",type:"get",data:{query:n},dataType:"json",success:function(t){return m.isEmpty(t)||"normal"!==t[0].memberType?void 0:e.hasAccount=!0}})}}(this)).finally(function(e){return function(){return e.render()}}(this)).done()},t.prototype.getInviteToken=function(){return p.inviteTokenFor(this.boardOrOrg.id)},t.prototype.getMemberAdder=function(){var e;return e=this.getInviteToken().split("-")[1],this.modelCache.get("Member",e)},t.prototype.getGhost=function(){var e;return e=this.getInviteToken().split("-")[0],this.modelCache.get("Member",e)},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.isLoggedIn=s.isLoggedIn(),this.boardOrOrg instanceof a?(e.isBoard=!0,e.modelName=this.boardOrOrg.get("name")):e.modelName=this.boardOrOrg.get("displayName"),e.modelType=this.boardOrOrg.typeName,n=this.getMemberAdder(),null!=n&&(e.memberAdder=n.toJSON(),e.isInviter=s.isMe(n)),t=this.getGhost(),e.ghost=null!=t?t.toJSON():void 0,e.signupUrl="/signup?"+r.param({reauthenticate:!0,returnUrl:location.pathname,email:null!=t?t.get("email"):void 0,fullName:null!=t?t.get("fullName"):void 0}),this.$el.html(g(e)),this},t.prototype.joinModel=function(e){var t;return p.stop(e),s.isLoggedIn()?(t=this.getGhost().get("email"),u.toggle("add email",{elem:r(e.target),model:this.model,html:f("confirm.add email.text",{ghostEmail:t}),data:this.model.toJSON(),fxConfirm:function(e){return function(){var t,n,r;return r=e.options.idBoard?"board":"organization",t=null!=(n=e.options.idBoard)?n:e.options.idOrganization,o({url:"/associate-json/"+r+"/"+t+"/"+p.inviteTokenFor(t),dataType:"json",type:"post",success:function(t){return null==t.error?(e.deleteTokenCookie(),window.location.reload()):void 0}})}}(this)})):void 0},t.prototype.deleteTokenCookie=function(){var e;return r.cookie("invite-token-"+(null!=(e=this.options.idBoard)?e:this.options.idOrganization),null,{path:"/"})},t.prototype.hideHeader=function(){return r(this.el).hide(),p.calcBoardLayout()},t.prototype.ignoreInvite=function(e){var t,n,r,o,s;return p.stop(e),null!=(t=this.getGhost())?(s=this.options.idBoard?"board":"organization",n=null!=(o=this.options.idBoard)?o:this.options.idOrganization,this.boardOrOrg.memberList.remove(this.getGhost(),{invite:!0}),this.hideHeader(),this.deleteTokenCookie(),r=function(){switch(s){case"board":return"rejected board invite";case"organization":return"rejected org invite"}}(),i.show(r,"error",null,5e3)):void 0},t.prototype.createNewAccount=function(e){return v("Header","Login/Signup Menu","Open Login/Signup Menu: Create New")},t}(h)},{}],477:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;s=e(76),i=e(481),d=e(517)(),c=e(238),p=c(e(48),"Header","New Locale Banner"),l=e(31),o=e("underscore"),u=e("locale").banners,a=e(77),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(e){this.locale=e.locale},t.prototype.events={"click .js-switch-language":function(){return p("Set locale to "+this.locale),this.setLocale()},"click .js-dismiss":function(){return p("Dismiss "+this.locale),this.dismiss(function(){})}},t.prototype.setLocale=function(){return this.model.setPref("locale",this.locale,function(e){return function(){return e.dismiss(function(){return document.location.reload()})}}(this))},t.prototype.dismiss=function(e){return this.model.dismissLanguageBannerFor(this.locale,function(t){return function(){return t.remove(),e()}}(this))},t.prototype.render=function(){var e,t,n,r,i;return i=this.locale.replace(/-/,"_"),e=null!=(n=null!=(r=u[this.locale])?r:u[i])?n:u[i.substr(0,i.indexOf("_"))],s(null!=e,"Attempt to show a NewLocaleBanner with an unrecognized locale"),t=o.find(l,function(e){return function(t){return t.code===e.locale}}(this)),s(null!=t,"Attempt to show a NewLocaleBanner with an unrecognized language"),this.$el.html(d.render(function(){return d.text(e.mainText.replace("{language}",t.name)),d.text(" "),d.a({href:"#",class:"quiet primary js-switch-language"},e.switchText),d.text(" - "),d.a({href:"#",class:"quiet js-dismiss"},e.dismissText)})),this},t}(i)},{}],478:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(6),o=e(481),a=e(519),s=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.render=function(){var e,t,n,i,o,u;return n=this.model.toJSON(),o=this.model.get("prefs"),t="public"===o.voting,e="public"===o.comments,i=t&&e?"subscribe vote comment":t?"subscribe vote":e?"subscribe comment":"subscribe",n.interactionText=s(["public interactions",i]),/^en/.test(window.locale)&&(n.interactionText="Visually collaborate with anyone, anywhere."),u=encodeURIComponent(r.getBoardUrl(this.model)),n.signupUrl="/signup?returnUrl="+u+"&source=public-board-banner",n.tourUrl="/tour?board="+u+"&source=public-board-banner",this.$el.html(a.fill("header_public_board",n)),this},t}(o)},{}],479:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),i=e(33),o=e(567),s=e(542),u=e(129),c=e(481),l=e(519),d=e(48),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",function(e){return function(){return e.$el.toggle(!i.canLogIn()),r(window).triggerHandler("resize")}}(this))},t.prototype.events={"click .js-change-password":"changePassword"},t.prototype.render=function(){return this.$el.html(l.fill("header_warning_password",this.model.toJSON())),this},t.prototype.changePassword=function(e){return u.stop(e),s.toggle({elem:this.$(".js-change-password"),view:new o({model:this.model,modelCache:this.modelCache})}),d("Header","Password Banner","Open Change Password Menu")},t}(c)},{}],480:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(481),o=e(519),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=function(){return this.$el.html(o.fill("header_two_factor_backups_banner")),this},t}(i)},{}],481:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(522),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.className="header-banner mod-warning",t}(r)},{}],482:[function(e,t,n){var r,i;r=e("jquery"),i=e(296),t.exports={clear:function(){this.isActive()&&(this.viewer.$el.off("remove.attachment-viewer",this._handleViewRemove),this.viewer.close(),this.viewer=null)},isActive:function(){return null!=this.viewer},_handleViewRemove:function(){return this.viewer=null},show:function(e){this.clear(),this.viewer=new i(e),this.viewer.$el.on("remove.attachment-viewer",this._handleViewRemove.bind(this)),r("body").append(this.viewer.render().el)}}},{}],483:[function(e,t,n){var r,i,o,s,a,u,c,l;r=e("jquery"),o=e(79),s=e(97),a=e(20),u=e(542),c=e(129),l=e("underscore"),t.exports=i=function(){function e(){}return e.prototype.checkInsert=function(e){var t,n,i,l,d,p,h,m;if(d=s.getKey(e),u.isVisible&&!o.isTouch())if(e.shiftKey&&(d===a.ArrowUp||d===a.ArrowDown)||e.altKey&&(d===a.ArrowUp||d===a.ArrowDown));else if(d===a.Escape)c.stop(e),u.hide();else for(n=[{listClass:".js-available-members",itemClass:".js-select-member"},{listClass:".js-available-emoji",itemClass:".js-select-emoji"},{listClass:".js-card-list",itemClass:".js-select-card"}],i=0,p=n.length;p>i;i++)if(m=n[i],h=m.listClass,l=m.itemClass,t=r(".pop-over").find(h),t.length>0){if(d===a.Enter||d===a.Tab)return c.stop(e),t.find(".item:first").hasClass("selected")&&(this.keyAutoMention(e),t=r(".pop-over").find(h)),t.find(".item.selected:first "+l).first().click(),u.hide(),!1;if(d===a.ArrowUp||d===a.ArrowDown)return c.stop(e),c.navMenuList(t,".item",d),!1}},e.prototype.keyAutoMention=function(e){var t,n,r;if(!o.isTouch()){if(s.isArrow(s.getKey(e))||s.getKey(e)===a.Enter)return;return s.getKey(e)===a.Escape?void(u.isVisible&&c.stop(e)):(r=c.getWordFromCaret(this.getTextInput()),/^@\S/.test(r.str.substring(0,2))?(t=this.getAutoMentionerView("input"),0===t.filterMentionablesForMatches(r.str.substring(1).toLowerCase()).length?void u.hide():(u.show({elem:this.getMentionTarget(),view:t,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus()))):/^:[a-z0-9_]+$/.test(r.str)?(n=this.getEmojiCompleterView("input"),u.show({elem:this.getEmojiTarget(),view:n,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus())):this.setTimeout(function(){return u.hide()},5))}},e}()},{}],484:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w=function(e,t){function n(){this.constructor=e}for(var r in t)_.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},_={}.hasOwnProperty,k=[].slice;r=e("jquery"),i=e(33),s=e(97),a=e(20),g=e(101),u=e(542),d=e(601),l=e(598),p=e(114),h=e(129),m=e(522),f=e("underscore"),b=e(519),y=e(48),c="recentMentions",v=p.get(c)||[],t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.viewTitleKey="mention",t.prototype.initialize=function(){var e,t,n;return(e=null!=(t=this.getCard())&&null!=(n=t.getBoard())?n.getOrganization():void 0)?this.listenTo(e.memberList,"add remove reset",this.frameDebounce(this.render)):void 0},t.prototype.events={"mouseenter .js-select-member":"hoverItem","click .js-select-member:not(.disabled)":"insertMember","click .js-select-all-card-members":"selectAllCardMembers","mouseenter .js-select-all-card-members":"deselectMember","click .js-select-all-board-members":"selectAllBoardMembers","mouseenter .js-select-all-board-members":"deselectMember","click .js-select-all-commenters":"selectAllCommenters","mouseenter .js-select-all-commenters":"deselectMember",keydown:"keydownEvent","keyup .js-filter-mentionables":"keyupEvent"},t.prototype.render=function(){var e,t,n,r,i,o;return o=this,t=this.getMentionables(),this.cardMentionables=t.cardMentionables,this.boardMentionables=t.boardMentionables,this.commenterMentionables=t.commenterMentionables,this.allMentionables=t.allMentionables,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0),e.showAllCardMembers=0<(n=this.cardMentionables.length)&&12>n,e.showAllBoardMembers=0<(r=this.boardMentionables.length)&&12>r,e.showAllCommenters=0<(i=this.commenterMentionables.length)&&12>i,this.$el.html(b.fill("popover_auto_mentioner",e)),this.$mentionablesList=this.$(".js-available-members"),e.button&&(this.$(".js-select-all-card-members .mem-count").text("("+this.cardMentionables.length+")"),this.$(".js-select-all-board-members .mem-count").text("("+this.boardMentionables.length+")"),this.$(".js-select-all-commenters .mem-count").text("("+this.commenterMentionables.length+")"),(e.showAllCardMembers||e.showAllBoardMembers||e.showAllCommenters)&&this.$(".js-select-multiple-options").removeClass("hide")),this.options.button?this.fillMentionables(this.allMentionables):this.options.input&&this.filterMentionables(),this},t.prototype.getCard=function(){return this.options.card},t.prototype.getTextInput=function(){return r(this.options.target)},t.prototype.getMentionables=function(){var e,t,n,r,o,s,a,u,c,l,d,p,m,b,y,w;return m=i.myId(),o=this.getCard(),n=o.getBoard(),d=function(e){return function(t,r){return null==r&&(r={}),f.chain(t).reject(function(t){return t===m&&!e.options.selfMention||n.isDeactivated(e.modelCache.get("Member",t))}).sortBy(function(e){var t;return t=v.indexOf(e),-1===t?v.length:t}).map(function(t){return f.extend({},r,{id:t,names:h.getMemNameArrayFromId(e.modelCache,t),type:"member"})}).value()}}(this),s=d(o.getIdCardMems()),r=d(n.getIdBoardMems()),a=n.isPublic()?d(o.getIdCommenters()):[],y=null!=(b=n.getOrganization())?(l=[],c=[],e=b.memberList.filter(function(e){return!b.isDeactivated(e)}),n.isPrivate()?b.isFeatureEnabled("superAdmins")?(p=f.groupBy(e,function(e){return function(e){return b.ownedByMember(e)?"admin":"not-admin"}}(this)),l=f.pluck(p.admin,"id"),c=f.pluck(p["non-admin"],"id")):c=f.pluck(e,"id"):l=f.pluck(e,"id"),k.call(d(l)).concat(k.call(d(c,{disabled:!0,extraText:g(["mention member","board not team visible"])})))):[],u=[{type:"extra",text:"card",names:["all","card"],extraText:g(["automentioner","all-members-on-card"])},{type:"extra",text:"board",names:["all","board"],extraText:g(["automentioner","all-members-on-board"])}],w=f.uniq(k.call(s).concat(k.call(r),k.call(a),k.call(y)),function(e){return e.id}),t=w.concat(u),{cardMentionables:s,boardMentionables:r,commenterMentionables:a,orgMentionables:y,allMentionables:t}},t.prototype.clearMentionables=function(){return this.$mentionablesList.empty()},t.prototype.keydownEvent=function(e){var t;((t=s.getKey(e))===a.Enter||t===a.Tab)&&(h.stop(e),this.$mentionablesList.find(".item.selected:first .js-select-member").click())},t.prototype.keyupEvent=function(e){var t;if(t=s.getKey(e),t===a.Enter||t===a.Tab||t===a.ArrowLeft||t===a.ArrowRight);else{if(t!==a.ArrowUp&&t!==a.ArrowDown)return this.filterMentionables();h.stop(e),h.navMenuList(this.$mentionablesList,".item",t)}},t.prototype.filterMentionables=function(e){var t,n,i,o;return this.clearMentionables(),this.options.button?i=r(".js-filter-mentionables").val().trim().toLowerCase():this.options.input&&(t=this.getTextInput(),o=h.getWordFromCaret(t),i=o.str.substring(1).toLowerCase()),n=this.filterMentionablesForMatches(i),this.options.input&&0===n.length?void this.setTimeout(function(){return u.hide()},5):(this.fillMentionables(n),h.selectMenuItem(this.$mentionablesList,".item",this.$mentionablesList.find(".item").first()))},t.prototype.filterMentionablesForMatches=function(e){var t;return t=RegExp("^"+h.escapeForRegex(e)),f.filter(this.getMentionables().allMentionables,function(e){return f.any(e.names,function(e){return t.test(e)})})},t.prototype.hoverItem=function(e){var t;return t=r(e.target).closest(".item"),h.selectMenuItem(this.$mentionablesList,".item",t)},t.prototype.deselectMember=function(e){return this.$mentionablesList.find(".item").removeClass("selected")},t.prototype._membersFromIds=function(e){return f.compact(f.map(e,function(e){return function(t){return e.modelCache.get("Member",t)}}(this)))},t.prototype.fillMentionables=function(e){var t,n,r,i,o,s,a,u,c,p,h;for(e=f.groupBy(e,"type"),n=(e.member||[]).map(function(e){return function(t){var n,r,i;return i=t.id,n=t.disabled,r=t.extraText,{member:e.modelCache.get("Member",i),disabled:n,extraText:r}}}(this)),this.$mentionablesList.empty(),o=0,a=n.length;a>o;o++)p=n[o],c=p.member,t=p.disabled,i=p.extraText,this.appendSubview(this.subview(d,c,{disabled:t,extraText:i}),this.$mentionablesList);if(null!=e.extra)for(h=e.extra,s=0,u=h.length;u>s;s++)r=h[s],this.$mentionablesList.append(new l(r).render().el);this.$(".js-empty-list").toggleClass("hide",f.keys(e).length>0)},t.prototype.insertMember=function(e){var t,n,i,o;h.stop(e),y("Card Detail","Mention Member Autocomplete","Insert"),n=r(e.currentTarget).attr("autocompleteText"),this.saveRecent(r(e.currentTarget).attr("idMember")),t=this.getTextInput(),this.options.input?(o=h.getWordFromCaret(t),h.insertSelection(t,"@"+n+" ",o.start,o.end)):(i=h.getCaretPosition(t),null!=i&&(o={start:i,end:i}),h.insertSelection(t,"@"+n+" ",null!=o?o.start:void 0,null!=o?o.end:void 0)),u.hide()},t.prototype.selectAllCardMembers=function(e){var t,n;h.stop(e),y("Card Detail","Mention Member Autocomplete","Insert - All Card Members"),t=this.getTextInput().focus(),n="@card ",h.insertSelection(t,n),u.hide()},t.prototype.selectAllBoardMembers=function(e){var t,n;h.stop(e),y("Card Detail","Mention Member Autocomplete","Insert - All Board Members"),t=this.getTextInput().focus(),n="@board ",h.insertSelection(t,n),u.hide()},t.prototype.selectAllCommenters=function(e){var t,n,r,i,o,s,a;for(h.stop(e),y("Card Detail","Mention Member Autocomplete","Insert - All Commenters"),t=this.getTextInput().focus(),r="",s=this._membersFromIds(this.commenterMentionables),n=0,i=s.length;i>n;n++)o=s[n],a=o.get("username"),r+="@"+a+" ";h.insertSelection(t,r),u.hide()},t.prototype.saveRecent=function(e){var t;return t=p.get(c)||[],t=f.chain([e].concat(k.call(t))).uniq().first(16).value(),p.set(c,t),v=t},t}(m)},{}],485:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;r=e("jquery"),s=e(97),a=e(20),u=e(38),f=e(148),c=e(542),l=e("bluebird"),d=e(129),p=e(522),h=e("underscore"),m=e(132),g=e(932),v=e(892),b=e(48),i=e(216),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="add card",t.prototype.events={"mouseenter .js-select-card":"hoverItem","click .js-select-card":"selectCard",keydown:"keydownEvent","keyup .js-search":"keyupEvent","input .js-search":"updateSearch"},t.prototype.initialize=function(){return this.cards=[],this.debouncedSearch=this.debounce(this.search,200).bind(this)},t.prototype.render=function(){var e,t;return t=this,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0,e.hideLoading=!0),this.$el.html(v(e)),this.renderCards()},t.prototype.renderCards=function(){var e,t,n,r,i;return this.$(".js-loading").addClass("hide"),e=this.$(".js-card-list").empty(),this.cards.length>0&&(r=function(){var e,r,o,s;for(o=this.cards,s=[],e=0,r=o.length;r>e;e++)n=o[e],i=n.toJSON(),t=n.getBoard(),null!=t&&(i.boardName=t.get("name")),s.push(g(i));return s}.call(this),e.append(r),d.selectMenuItem(e,".item",e.find(".item").first())),this.$(".js-no-results").toggleClass("hide",!this._lastQuery||this.cards.length>0),this},t.prototype.keyupEvent=function(e){var t;t=s.getKey(e),(t===a.ArrowUp||t===a.ArrowDown)&&(d.stop(e),d.navMenuList(this.$(".js-card-list"),".item",t))},t.prototype.updateSearch=function(e){var t;return t=this.$(".js-search").val(),this.debouncedSearch(t)},t.prototype.keydownEvent=function(e){var t,n,r;return t=this.$(".js-card-list"),((r=s.getKey(e))===a.Enter||r===a.Tab)&&(d.stop(e),n=t.find(".item.selected:first .js-select-card"),n.length>0)?n.click():void 0},t.prototype.getTextInput=function(){return r(this.options.target)},t.prototype._renderSettledCard=function(e){return l.resolve(e).then(function(e){return[e]}).catch(i,function(){return[]}).tap(function(e){return function(t){return e.cards=t,e.renderCards()}}(this)).done()},t.prototype.search=function(e){var t,n,r,i,o;if(e!==this._lastQuery){if(this._lastQuery=e,""===e)return this.cards=[],void this.renderCards();if(this.$(".js-card-list").empty(),this.$(".js-no-results").addClass("hide"),this.$(".js-loading").removeClass("hide"),r=f(e.trim()),"card"===r.type)return void this._renderSettledCard(u.loadCardData(r.shortLink));if(d.isShortId(e)&&(n=this.options.card,t=null!=n?n.getBoard():void 0,null!=t))return void(null!=(i=t.getCard(e))?this._renderSettledCard(i):this._renderSettledCard(u.loadCardData(t.id,e)));o={query:e,modelTypes:"cards",partial:!0},u.loadSearchData(o).nodeify(function(t){return function(n,r){return e===t._lastQuery?(t.$(".js-loading").addClass("hide"),(n||0===r.length)&&t.$(".js-no-results").removeClass("hide"),null==n?(t.cards=h.chain(r.cards).map(function(e){return t.modelCache.get("Card",e.id)}).sortBy(function(e){return e.get("idBoard")===t.model.get("idBoard")?0:1}).value(),t.options.input&&h.isEmpty(t.cards)&&c.hide(),t.renderCards()):(t.cards=[],t.options.input?c.hide():t.renderCards())):void 0}}(this))}},t.prototype.hoverItem=function(e){var t,n;return t=this.$(".js-card-list"),n=r(e.target).closest(".item"),d.selectMenuItem(t,".item",n)},t.prototype.selectCard=function(e){var t,n;d.stop(e),n=r(e.target).closest(".js-select-card").attr("data-id"),t=this.modelCache.get("Card",n),null!=t&&this.insertCard(t),c.hide()},t.prototype.insertCard=function(e){var t,n,r,i,o;return this.options.callback?void this.options.callback(e):(i=e.get("url"),t=this.getTextInput(),this.options.input?(o=d.getLineFromCaret(t),r=o.str.lastIndexOf("#"),-1!==r&&(o.start+=r)):(n=d.getCaretPosition(t),null!=n&&(o={start:n,end:n})),d.insertSelection(t,i+" ",null!=o?o.start:void 0,null!=o?o.end:void 0),b("Card Detail","Comment Box - Added Card",this.options.input?"inline":"via menu"))},t}(p)},{}],486:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h;r=e("jquery"),i=e(412),o=e(484),s=e(485),u=e(487),c=e(38),l=e(542),d=e(129),h=e(48),p={},t.exports=a=function(){function e(){}return e.prototype.openEmojiCompleter=function(e){return d.stop(e),l.pushView({view:this.getEmojiCompleterView("button")})},e.prototype.openAutoMentioner=function(e){return d.stop(e),l.pushView({view:this.getAutoMentionerView("button")}),h("Card Detail","Mention Autocomplete","Open Menu - With Click")},e.prototype.getAutoMentionerView=function(e){var t,n,r;return t=this.getCard(),null!=(n=null!=(r=t.getBoard())?r.getOrganization():void 0)&&(!p[n.id]||Date.now()-p[n.id]>3e5)&&(p[n.id]=Date.now(),c.loadOrganizationMembersData(n.id)),new o({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,selfMention:this.selfMention,modelCache:this.modelCache})},e.prototype.getEmojiCompleterView=function(e){var t;return t=this.getCard(),new u({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,modelCache:this.modelCache})},e.prototype.getCardCompleterView=function(e){var t;return t=this.getCard(),new s({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,modelCache:this.modelCache})},e.prototype.getInputCardCompleterView=function(){var e;return e=this.getCard(),new s({model:e,input:!0,target:this.getTextInput(),card:e,modelCache:this.modelCache})},e.prototype.commentAddAttachment=function(e){var t,n,o,s,a,u;e.preventDefault(),t=r(e.target).closest(".comment-box").find("textarea"),a=t.prop("selectionStart"),s=t.prop("selectionEnd"),o=t.val().substring(a,s),n=this.getCard(),u=new i({model:this.model,modelCache:this.modelCache,defaultName:o}),u.on("attach",function(e){var n,r,i;return i=e.url,n=e.name,n=n||o,r=n?"["+n+"]("+i+")":i,d.insertSelection(t,r+" ",a,s),t.trigger("autosize.resize")}),l.toggle({elem:r(e.currentTarget),keepEdits:!0,view:u,options:{model:n,modelCache:this.modelCache}}),h("Card Detail","Comment Box - Open Attachment Type Picker")},e.prototype.commentMentionMember=function(e){e.preventDefault(),l.toggle({elem:r(e.currentTarget),keepEdits:!0,view:this.getAutoMentionerView("button")}),h("Card Detail","Comment Box - Mention Members")},e.prototype.commentAddEmoji=function(e){e.preventDefault(),l.toggle({elem:r(e.currentTarget),keepEdits:!0,view:this.getEmojiCompleterView("button")}),h("Card Detail","Comment Box - Add Emoji")},e.prototype.commentAddCard=function(e){e.preventDefault(),l.toggle({elem:r(e.currentTarget),keepEdits:!0,view:this.getCardCompleterView("button")}),h("Card Detail","Comment Box - Add Card")},e}()},{}],487:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty,w=[].slice;r=e("jquery"),i=e(33),s=e(488),a=e(97),u=e(20),c=e(38),l=e(542),p=e(129),h=e(522),m=e("underscore"),g=e(519),v=e(48),d=e("emoji-map"),f=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.viewTitleKey="emoji",t.prototype.events={"mouseenter .js-select-emoji":"hoverItem","click .js-select-emoji":"selectEmoji",keydown:"keydownEvent","keyup .js-filter-emoji":"keyupEvent","click .js-upload-emoji":"openEmojiUploader"},t.prototype.initialize=function(){this._customEmoji={},i.me().isFeatureEnabled("customEmoji")&&(this.listenTo(i.me().customEmojiList,"change add remove reset",this.updateCustomEmoji),this.updateCustomEmoji())},t.prototype.render=function(){var e,t;return t=this,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0),this.$el.html(g.fill("popover_emoji_completer",e)),this.$emojiList=this.$(".js-available-emoji"),this.options.input&&this.filterEmoji(this.getInput()),this.options.button&&this.fillDefaultEmojiList(),this},t.prototype.keyupEvent=function(e){var t,n;return n=a.getKey(e),n===u.ArrowUp||n===u.ArrowDown?(p.stop(e),void p.navMenuList(this.$emojiList,".item",n)):n!==u.Enter&&n!==u.Tab?(t=this.getInput(),this.filterEmoji(t)):void 0},t.prototype.keydownEvent=function(e){var t,n;return((n=a.getKey(e))===u.Enter||n===u.Tab)&&(p.stop(e),t=this.$emojiList.find(".item.selected:first .js-select-emoji"),t.length>0)?t.click():void 0},t.prototype.updateCustomEmoji=function(){return this._customEmoji=m.object(i.me().customEmojiList.map(function(e){return[e.get("name"),e.get("url")]})),this.render()},t.prototype.getTextInput=function(){return r(this.options.target)},t.prototype.getInput=function(){var e,t;return this.options.button?this.$(".js-filter-emoji").val():(e=this.getTextInput(),t=p.getWordFromCaret(e),t.str.substring(1))},t.prototype.filterEmoji=function(e){return this.clearEmojiList(),this.fillEmojiList(e)?p.selectMenuItem(this.$emojiList,".item",this.$emojiList.find(".item").first()):void 0},t.prototype.renderEmojiList=function(e){var t,n,r,i,o;for(r=0,i=e.length;i>r;r++)n=e[r],t={name:n,image:null!=(o=this._customEmoji[n])?o:d[n]},this.$emojiList.append(g.fill("select_emoji",t));return this},t.prototype.fillDefaultEmojiList=function(e){var t;t=["thumbsup","smile","warning","sunglasses","ballot_box_with_check","facepalm"],this.renderEmojiList(t)},t.prototype.fillEmojiList=function(e){var t,n;return n=e.replace(/\W+/g,""),""===e?(this.fillDefaultEmojiList(),!1):/[A-Z]/.test(n)&&this.options.input?(l.hide(),!1):(n=n.toLowerCase(),this.$(".js-upload-emoji").text(f("upload emoji named",{emojiName:n})).attr("data-emojiname",n),this.$(".js-no-matching-emoji-helper").text(f("no matching emoji helper",{emojiName:n})),t=this.getEmojiSuggestions(n).slice(0,6),t.length>0?(this.$(".js-results").removeClass("hide"),this.$(".js-no-results").addClass("hide"),this.renderEmojiList(t)):(this.$(".js-results").addClass("hide"),this.$(".js-no-results").removeClass("hide")),0!==t.length)},t.prototype.clearEmojiList=function(){return this.$emojiList.empty()},t.prototype.getEmojiSuggestions=function(e){var t,n,r,i,o,s,a,u,c;if(a=RegExp("^"+p.escapeForRegex(e)),t=function(){var e;e=[];for(o in this._customEmoji)a.test(o)&&e.push(o);return e}.call(this),c=function(){var e;e=[];for(o in d)a.test(o)&&e.push(o);return e}(),null==this._sortOverride)for(u=["thumbsup","smile","warning","sunglasses","facepalm","question","thumbsdown","wink","smiley","smile_cat","bowtie","heart","laughing","bug","cry","dancer","dancers","clap","shipit","white_check_mark","star","arrow_down","point_down","point_up","point_left","metal"],this._sortOverride={},i=r=0,s=u.length;s>r;i=++r)n=u[i],this._sortOverride[n]=i+1;return m.uniq(w.call(t).concat(w.call(c))).sort(function(e){return function(t,n){var r,i;return r=e._sortOverride[t],i=e._sortOverride[n],r&&!i?-1:i&&!r?1:(r&&i&&(t=r,n=i),n>t?-1:t>n?1:0)}}(this))},t.prototype.hoverItem=function(e){var t;return t=r(e.target).closest(".item"),p.selectMenuItem(this.$emojiList,".item",t)},t.prototype.selectEmoji=function(e){var t;p.stop(e),t=r(e.target).closest(".js-select-emoji").find(".emoji-name").text(),this.insertEmoji(t),l.hide()},t.prototype.insertEmoji=function(e){var t,n,r;return t=this.getTextInput(),this.options.input?r=p.getWordFromCaret(t):(n=p.getCaretPosition(t),null!=n&&(r={start:n,end:n})),p.insertSelection(t,":"+(""+e).trim()+": ",null!=r?r.start:void 0,null!=r?r.end:void 0),
v("Emoji Select",e)},t.prototype.openEmojiUploader=function(e){var t;p.stop(e),t=this.$(e.target).attr("data-emojiname"),l.pushView({keepEdits:!0,view:s,options:{model:i.me(),emojiName:t,completerView:this}}),v("Card Detail","Open Custom Emoji Uploader")},t}(h)},{}],488:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),i=e(532),o=e(33),a=e(542),u=e(129),c=e(522),d=e(519),l=e(101),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="upload emoji",t.prototype.events=function(){return{"click .js-upload-emoji":"uploadEmoji","change .js-upload-emoji-file":"fileChange","input .js-emoji-name":"nameChange"}},t.prototype.initialize=function(e){var t,n,r,i,o;for(this.completerView=e.completerView,this.hasGold=this.model.isFeatureEnabled("customEmoji"),this.hasBCGold=!1,i=this.model.organizationList.models,o=[],t=0,n=i.length;n>t&&(r=i[t],this.hasBCGold=r.isFeatureEnabled("goldMembers"),!this.hasBCGold);t++)o.push(void 0);return o},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON(),e.emojiName=this.options.emojiName,e.hasGold=this.hasGold,e.hasBCGold=this.hasBCGold,e.canUpload=this.hasGold||this.hasBCGold,this.$el.html(d.fill("popover_emoji_uploader",e)),this._validate(),this.renderEmoji(),this},t.prototype.getName=function(){return this.$(".js-emoji-name").val().trim().toLowerCase().replace(/\s+/g,"_")},t.prototype.renderEmoji=function(){var e,t,n,r,i;return this.$(".js-emoji-preview-name").text(":"+(this.getName()||"???")+":"),e=this.$(".js-emoji-preview"),t=this.$(".js-upload-emoji-file"),n=null!=(i=t.prop("files"))?i[0]:void 0,/^image\/.*/.test(null!=n?n.type:void 0)?(r=new FileReader,r.onload=function(e){return function(t){return e.$(".js-emoji-conversion").removeClass("hide"),e.$(".js-emoji-preview").attr("src",t.target.result)}}(this),r.readAsDataURL(n)):this.$(".js-emoji-conversion").addClass("hide"),this},t.prototype.fileChange=function(e){var t,n,i,o,s,a,u;return n=this.$(".js-emoji-name"),t=this.$(".js-upload-emoji-file"),""===n.val()&&(o=r(e.target),i=null!=(a=t.prop("files"))?a[0]:void 0,null!=i?s=i.name:t.val()&&(s=null!=(u=/[^\/]+$/.exec(t.val()))?u[0]:void 0),null==s&&(s=""),s=s.split(".")[0],s=s.toLowerCase().replace(/[^a-z0-9_]/g,""),n.val(s),this.$(".js-emoji-name").focus().select()),this.renderEmoji(),this._validate()},t.prototype.nameChange=function(e){return this.renderEmoji(),this._validate()},t.prototype._validate=function(e){var t,n,r,i,o,s;return r=this.getName(),t=this.$(".js-upload-emoji-file"),i=/^[a-z0-9_\s]+$/.test(r),n=(null!=(o=t.prop("files"))?o.length:void 0)>0||t.val(),s=i&&n&&(this.hasGold||this.hasBCGold),this.$(".js-invalid-name").toggleClass("hide",i||""===r),this.$(".js-upload-emoji").toggleClass("disabled",!s)},t.prototype.uploadEmoji=function(e){var t,n,s,c,l,d,p;if(u.stop(e),!r(".js-upload-emoji").hasClass("disabled")){if(this.$(".error").addClass("hide"),t=this.$(".js-upload-emoji-file"),s=null!=(p=t.prop("files"))?p[0]:void 0,c=this.getName(),l=function(e){return function(){return e.completerView.insertEmoji(c),a.hide()}}(this),!s&&t.val())return void u.uploadFile(o.myToken(),t,l);if(null!=s&&!u.validFileSize(s))return void i.flash("file too large","error");if(null!=s&&c)return d=new FileReader,n=new FormData,n.append("token",o.myToken()),n.append("file",s),n.append("name",c),d.onload=function(e){return function(t){return e.model.customEmojiList.create({url:t.target.result,name:c},{data:n,processData:!1,contentType:!1,success:l,error:function(){return this.$(".error").removeClass("hide")}})}}(this),d.readAsDataURL(s)}},t}(c)},{}],489:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(486),o=e(97),s=e(20),a=e(129),u=e(522),c=e(106),l=e(519),t.exports=c(r,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="options",t.prototype.events=function(){return{"click .js-open-mention-selector":"openAutoMentioner","click .js-open-emoji-selector":"openEmojiCompleter",keydown:"keydownEvent"}},t.prototype.render=function(){return this.$el.html(l.fill("popover_insertion_menu")),this},t.prototype.keydownEvent=function(e){var t;return t=o.getKey(e),t===s.Enter?(a.stop(e),this.$emojiList.find(".item.selected:first .js-select-emoji").click()):t===s.Enter?(a.stop(e),this.$memList.find(".item.selected:first .js-select-member").click()):void 0},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.selfMention=!0,t.prototype.getTextInput=function(){return this.options.parent.getTextInput()},t}(u))},{}],490:[function(e,t,n){var r,i;i=e(101),r={getPermLevelAltText:function(e){return i(["board perms",e,"short summary"])},getPermLevelAltTextForBoard:function(e){return r.getPermLevelAltText(e.getPermLevel())},getPermLevelIconClass:function(e){return"org"===e?"organization-visible":e},getPermLevelIconClassForBoard:function(e){return r.getPermLevelIconClass(e.getPermLevel())}},t.exports=r},{}],491:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].slice;r=e("jquery"),o=e(522),s=e("underscore"),a=e(45),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return this.listenPropagators={},this.listenTo(this.collection,{sort:this.sort,add:this.addModel,remove:this.removeModel,reset:this.reset}),t.__super__.initialize.apply(this,arguments)},t.prototype.getModels=function(){return this.collection.models},t.prototype.subview=function(){var e,n,r;return r=t.__super__.subview.apply(this,arguments),null==(e=this.listenPropagators)[n=r.cid]&&(e[n]=this.listenTo(r,"all",function(e){return function(){var t,n;return n=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],e.trigger.apply(e,[n,r].concat(l.call(t)))}}(this))),r},t.prototype.addModel=function(e,t){var n;a("render","adding "+this.collection.model.name+" to "+this.viewType.name),n=this.subview(this.viewType,e),this.el&&this.insertSubview(n,s.indexOf(this.getModels(),e))},t.prototype.removeModel=function(e,t){return a("render","removing "+this.collection.model.name+" from "+this.viewType.name),this.removeSubview(this.viewForModel(e))},t.prototype.reset=function(e,t){var n,r,i,o,s,a,u,c;for(u=t.previousModels,i={},c=e.models,n=0,o=c.length;o>n;n++)a=c[n],i[a.cid]=!0;for(r=0,s=u.length;s>r;r++)a=u[r],i[a.cid]||this.removeModel(a);return this.sort()},t.prototype.sort=function(){var e,t,n,r,i;for(i=this.getModels(),t=e=0,n=i.length;n>e;t=++e)r=i[t],this.moveSubviewToPosition(this.subview(this.viewType,r),t)},t.prototype.render=function(){var e;return a("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),this.appendSubviews(function(){var t,n,r,i;for(r=this.getModels(),i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(this.subview(this.viewType,e));return i}.call(this)),this},t.prototype.viewForModel=function(e){return this.existingSubview(this.viewType,e)},t.prototype.removeSubview=function(e){return this.deleteSubview(e)},t.prototype.insertSubview=function(e,t,n){null==n&&(n=this.$el),a("render","inserting "+e.$el.find("h2").text()+" at position "+t),"number"==typeof t?t=0>=t?n.children().eq(0):t<n.children().length?n.children().eq(t):void 0:t instanceof o&&(t=t.$el),e.$el.is(":empty")&&(e.delegateEvents(),e.render()),(null!=t?t.length:void 0)>0?e.$el.insertBefore(t):n.append(e.$el)},t.prototype.moveSubviewToPosition=function(e,t,n){var i,o,s,u,c;if(null==n&&(n=this.$el),e.$el.is(":empty"))return void this.insertSubview(e,t,n);for(c=n.children(".placeholder,.card-composer"),o=0,u=c.length;u>o;o++)s=c[o],r(s).index()<=t&&t++;i=e.$el.index(),i!==t&&(a("render","moving "+e.$el.find("h2").text()+" into position "+t),0===t?n.prepend(e.$el):t>=n.children().length?n.append(e.$el):e.$el.insertAfter(n.children().eq(t-1)))},t}(o)},{}],492:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m;r=e("underscore"),i=e(120),p=e(126),d=e(493),a=d.getTypes,s=d.getDropped,l=function(e,t){document.addEventListener(e,t)},h=function(e,t,n,r){var i,o,s;for(i=0,o=n.length;o>i;i++)s=n[i],p(e,t+":"+s,r)},o=function(e){var t;return e?(t=o(e.parentElement),t.push(e),t):[]},u=[],c=null,m=function(e,t){var n,r,s,a,l,d,p,m,f;if(clearTimeout(c),!(u.length>0&&u[u.length-1]===e)){for(p=o(e),s=i(p,u,function(e,t){return e===t}),m=u.slice(s),r=0,l=m.length;l>r;r++)n=m[r],h(n,"dd-leave",t,{bubbles:!1});for(f=p.slice(s),a=0,d=f.length;d>a;a++)n=f[a],h(n,"dd-enter",t,{bubbles:!1});return u=p}},l("dragenter",function(e){return m(e.target,a(e.dataTransfer)),e.preventDefault()}),l("dragover",function(e){var t;return t=a(e.dataTransfer),t.length>0&&(e.dataTransfer.dropEffect="copy"),m(e.target,t),e.preventDefault()}),l("dragleave",function(e){var t;return t=a(e.dataTransfer),c=setTimeout(function(){return m(null,t)},200)}),l("dragend",function(e){return m(null,[])}),l("drop",function(e){var t;t=a(e.dataTransfer),s(e).then(function(n){var r,i;for(i in n)r=n[i],p(e.target,"dd-drop:"+i,{detail:r});return m(null,t)}),e.preventDefault()})},{}],493:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w;r=e("bluebird"),i=e("underscore"),w=e(146),p=function(e){var t;return t=function(){switch(e.kind){case"file":return"files";case"string":switch(e.type){case"text/uri-list":return"url";case"text/plain":return"text"}}}(),t||"unknown"},g=function(e){return i.chain(e.items).map(p).compact().uniq().value()},h=function(e){switch(e){case"Files":case"application/x-moz-file":return"files";case"Url":case"text/x-moz-url":case"text/uri-list":return"url";case"Text":case"text/plain":return"text";default:return"unknown"}},v=function(e){return i.chain(e.types).map(h).compact().uniq().value()},f=function(e){return e.files.length>0?["files"]:[]},l=function(e){return r.all(i.toArray(e.items).map(function(e){var t;return t=p(e),"text"===t||"url"===t?new r(function(n){return e.getAsString(function(e){return n({type:t,content:e})})}):"files"===t?{type:t,content:e.getAsFile()}:null}))},u=function(e){return i.map(e.files,function(e){return{type:"files",content:e}})},c=function(e){var t;return t=e.types,null==t&&(t=e.getData("Text")?["Text"]:[]),i.map(t,function(t){var n,r;return r=h(t),"text"!==r&&"url"!==r||!(n=e.getData(t))?null:{type:r,content:n}})},o=function(e){return r.all(s.map(function(t){return t(e)})).then(function(e){return i.chain(e).flatten().compact().each(function(e){"text"===e.type&&w(e.content)&&(e.type="url")}).reject(function(e){return"url"===e.type&&!w(e.content)}).groupBy("type").mapObject(function(e,t){return"files"===t?i.pluck(e,"content"):e[0].content}).value()})},y=function(){return/mac/i.test(navigator.platform)&&/safari/i.test(navigator.userAgent)},b=function(e){var t;return t=window.DataTransfer||window.Clipboard,t?t.prototype.hasOwnProperty(e)||"types"===e&&y()||!window.DataTransfer&&"files"===e&&y():!1},m=b("items")?g:b("types")?v:b("files")?f:function(){return[]},s=b("items")?[l]:i.compact([b("files")?u:void 0,b("getData")&&b("types")?c:void 0]),a=function(e){return o(e.dataTransfer)},d=function(e){return null!=e.clipboardData?o(e.clipboardData):null!=window.clipboardData?o(window.clipboardData):r.resolve({})},t.exports={getTypes:m,getDropped:a,getPasted:d}},{}],494:[function(e,t,n){var r,i;r=e("jquery"),t.exports=i=function(){function e(){}return e.prototype.checkLength=function(e){var t,n,i,o;o=r(e.target).val(),i=this.maxLength||16384,t=0===o.length||/^\s*$/.test(o),n=!t&&o.length>i,null!=this.preventSubmit?this.preventSubmit(n,t):this._preventSubmit(n,t)},e.prototype._preventSubmit=function(e,t){return this.$(".js-too-long-warning").toggleClass("hide",!e),this.$(".js-is-empty-warning").toggleClass("hide",!t),this.$('input[type="submit"]').prop("disabled",t||e)},e}()},{}],495:[function(e,t,n){var r,i,o,s,a;a=e("moment"),r=e("underscore"),o=e(101),i=function(e,t){var n,i,o,s,a;for(o=0,s=t.length;s>o;o++){if(i=t[o],!r.isArray(i))return i;if(n=i[0],a=i[1],n>=e)return a}throw new Error("no matching dispatch value for "+e+"!")},s=function(e){var t,n,r;return t=e.complete,r=e.incomplete,n=null,function(e,o){return o?t():(null==n&&(n=r()),i(a(e).diff(a(),"hours",!0),n))}},t.exports={classForDueDate:s({complete:function(){return"is-due-complete"},incomplete:function(){return[[-36,"is-due-past"],[0,"is-due-now"],[24,"is-due-soon"],"is-due-future"]}}),titleForDueDate:s({complete:function(){return o("badge.due.complete")},incomplete:function(){return[[-36,o("badge.due.overdue")],[0,o("badge.due.recently overdue")],[1,o("badge.due.less than an hour")],[24,o("badge.due.less than a day")],o("badge.due.later")]}}),relativeInfoForDueDate:s({complete:function(){return null},incomplete:function(){return[[-36,o("badge.due.overdue short")],[0,o("badge.due.recently overdue short")],[24,o("badge.due.due soon short")],null]}})}},{}],496:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;r=e("jquery"),i=e(484),o=e(537),a=e(487),v=e(134),u=e(97),c=e(20),l=e(539),d=e(542),p=e(114),h=e(129),m=e(522),f=e("underscore"),y=e(45),w=e(519),b=e(101),g=e(91),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.allowNewlines=!0,t.prototype._draftKey=function(e){return"draft_"+this.model.id+"_"+e},t.prototype._saveDraft=function(e,t){return p.set(this._draftKey(e),t)},t.prototype._recallDraft=function(e){return p.get(this._draftKey(e))},t.prototype._discardDraft=function(e){return p.unset(this._draftKey(e))},t.prototype.editField=function(e){var t,n,i;return n=r(e.target).closest("a"),n.length>0&&"#"!==n.attr("href")||o.sorting||(t=r(e.target).closest(".editable"),0===t.length||v(t))?void 0:(h.stop(e),d.hide(),i=t.attr("attr"),this.edit(i))},t.prototype.edit=function(e,t){var n,r,i,o,s,a,u,c,d;null==t&&(t=!0),e.indexOf(".")>-1&&(d=e.split("."),e=d[1]),n=this.$("[attr="+e+"]"),c=this.$(".js-no-higher-edits [attr="+e+"]"),r=n.not(c),0!==r.length&&(l.cancelEdits(),o=r.find(".edit:first"),0!==o.length&&(s=r.find(".field:first"),u=s.is("textarea"),a=s.parent().is(".card-detail-edit"),i=r.find(".current"),o.append(w.fill("edit_controls")),o.hasClass("delete")||o.find(".delete").remove(),o.hasClass("convert")||o.find(".convert").remove(),o.hasClass("options-menu")||o.find(".options-menu").remove(),r.addClass("editing"),""===s.val()&&s.val(h.traverse(this.model.attributes,null!=d?d:e)),this.waitForId(this.model,function(t){return function(){return s.data("draftKey",t._draftKey(e))}}(this)),y("editable",this.model),t&&s.focus().select(),s.autosize({append:!1})))},t.prototype.recallDrafts=function(){var e,t,n;return n=this,e=this.$("[attr]"),t=this.$(".js-no-higher-edits [attr]"),e.not(t).each(function(e){return function(t,i){var o,s,a,u;o=r(i),a=o.attr("attr"),null!=e.model.id&&(u=n._recallDraft(a),null!=u&&(s=o.find(".field:first"),s.val(u),e.defer(function(){return o.find(".edits-warning").show()})))}}(this))},t.prototype.stopEditing=function(e){return h.stop(e),l.cancelEdits(),!1},t.prototype.clearEdits=function(e){var t,n;return h.stop(e),t=r(e.target).closest(".editable[attr]"),n=t.attr("attr"),null!=n&&this._discardDraft(n),t.find(".field").val(""),t.find(".edits-warning").hide(),t.find(".edits-error").hide(),l.cancelEdits(),!1},t.prototype.validate=function(){var e,t,n,i,o,s,a,u,c;for(a=this.$(".editing.non-empty .field"),n=0,o=a.length;o>n;n++)if(e=a[n],/^\s*$/.test(r(e).val()))return!1;for(u=this.$(".editing .field"),i=0,s=u.length;s>i;i++)if(e=u[i],t=(null!=(c=r(e).val())?c:"").length,t>16384)return r(".editing").find(".edits-error").text(b("text too long",{over:g(t-16384)})).show(),!1;return!0},t.prototype.keydownEvent=function(e){var t;t=u.getKey(e),l.isEditing()&&(d.view instanceof a||d.view instanceof i?"function"==typeof this.checkInsert&&this.checkInsert(e):u.isForceSubmitEvent(e)||t===c.Enter&&(!r(e.target).is("textarea")||r(e.currentTarget).hasClass("single-line"))&&!e.shiftKey?(h.stop(e),this.commitEdits(e)):t!==c.Enter||this.allowNewlines||h.stop(e))},t.prototype.commitEdits=function(e){var t,n,i,o;return h.stop(e),t=r(e.target).closest(".editable.editing[attr]"),t.find(".edits-error").hide(),this.validate()?(o=this,i=this.model,n=this.customSet,t.remove("input[type=submit]"),t.removeClass("editing").each(function(){var e,n;return e=r(this).attr("attr"),n=r(this).find(".field").val(),o.allowNewlines||(n=n.replace(/[\r\n]+/g," ")),0===r.trim(n).length&&(n=""),i.get(e)===n?o._discardDraft(e):i.update(e,n,function(n){null!=n?t.find(".edits-error").text(n.message).show():o._discardDraft(e)})}).find(".field").val(""),t.find(".edits-warning").hide(),!0):void 0},t.prototype.clickSetting=function(e){var t,n,i,o;t=r(e.target),t.hasClass("disabled")||t.closest(".js-disabled").length||(n=t.attr("href"),n&&"#"!==n||(i=t.closest(".pref").attr("name"),i&&(o=t.attr("value"),o=function(){switch(o){case"true":return!0;case"false":return!1;default:return o}}(),this.model.setPref(i,o),this.model.save(),h.stop(e))))},t.prototype.delegateEvents=function(e){var n;return n={"click .current":"editField","click .js-cancel-edit":"clearEdits","click .js-discard-edits":"clearEdits","click .js-view-edits":"editField","click .js-save-edit":"commitEdits","keydown .field":"keydownEvent","click input":h.stopPropagation,"click textarea":h.stopPropagation},null!=this.model.setPref&&(n["click a"]="clickSetting"),t.__super__.delegateEvents.call(this,f.extend(n,e||this.events))},t}(m)},{}],497:[function(e,t,n){var r,i,o,s,a,u,c;u=e(101),i=e(542),o=e("react"),c=e(514)("file_link_handler"),s=e(129),a=e("underscore"),r=o.createClass({displayName:"FileLinkComponent",render:function(){var e;return e=this.props.url,c.render(function(){return c.div(function(){return c.p(function(){return c.format("browsers-prevent-file-links")}),c.input(".js-autofocus",{type:"text",value:e,readOnly:!0,onFocus:function(e){return a.defer(function(){return e.target.select()})}})})})}}),t.exports=function(e){return i.show({elem:e,getViewTitle:function(){return u(["view title","open file link"])},reactElement:o.createElement(r,{key:"FileLinkComponent",url:e.href})})}},{}],498:[function(e,t,n){var r,i,o,s,a,u,c,l;i=e(35),u=e(102),o=e(509),s=e("bluebird"),c=e(257),a=e("underscore"),r=u("FriendlyLink",["BoardRequired"]),l=c.renderable(function(e){var t,n;return t=e.icon,n=e.text,c.img(".known-service-icon",{src:t}),c.text(n)}),t.exports=function(e,t){var n;if(null==t)throw r.BoardRequired();return n="A"===e.tagName?[e]:a.toArray(e.querySelectorAll("a")),s.map(n,function(e){var n,r;return r=e.href,(n=e.textContent)===r||n===decodeURIComponent(r)?o.one({command:"format-url",board:t,options:{url:r}}).catch(o.Error.NotHandled,function(){return null}).then(function(n){return null!=(null!=n?n.text:void 0)?n:i.interpret(e.href,t.modelCache)}).then(function(t){return null!=t?(e.classList.add("known-service-link"),e.innerHTML=l(t)):void 0}):void 0}).done()}},{}],499:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m;i=e(6),o=e(497),p=e(147),s=e(539),a=e(37),u=e(542),m=e(137),c=e(276),l=e(129),r=e("jquery"),d=function(e){var t,n,s,a;if(t=r(e.target).closest("a"),n=t.attr("href"),n&&"#"!==n){if(0===n.indexOf("file://"))l.preventDefault(e),o(t[0]);else if(0===n.indexOf("/")||0===n.indexOf(siteDomain+"/")){if(a=n.replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),s=a!==location.pathname.slice(1),window!==window.top&&h(a))return l.preventDefault(e),void window.open(a);p(n)&&null==t.attr("target")&&(l.preventDefault(e),s&&i.navigate(a,{trigger:!0}))}}else l.preventDefault(e)},h=function(e){var t,n,r,o,s,u;if(null==(n=i.getCurrentBoard()))return!1;if(o=/^([bc])\/([^\/]+)/.exec(e),null==o)return!0;switch(t=o[0],r=o[1],u=o[2],r){case"b":return u!==n.get("shortLink");case"c":return(null!=(s=a.get("Card",u))?s.getBoard():void 0)!==n;default:return!0}},t.exports=function(e){var t,n,o;if(n=i.getCurrentBoard(),o=n&&i.getCurrentBoardView(),u.isVisible&&!u.hardToClose&&0===r(e.target).closest(".pop-over").length&&r(e.target).closest("body").length>0)u.hide();else{if(r(e.target).is("input")||r(e.target).is("textarea")||e.target.attributes["data-reactid"])return void l.stopPropagation(e);u.isVisible&&r(e.target).closest(".pop-over").length>0||(c.get("showBoardsListSidebar")&&0===r(e.target).closest(".boards-drawer").length?c.hideUnpinnedSidebar():r(".new-comment").hasClass("focus")?r(".new-comment").removeClass("focus").find("textarea").blur():(null!=n?n.viewState.get("listComposerOpen"):void 0)?null!=n&&n.viewState.set("listComposerOpen",!1):(null!=n?n.composer.get("vis"):void 0)&&!r(e.target).closest(".card-composer").length>0?n.composer.save("vis",!1):s.isEditing()?s.cancelEdits():i.showingCalendar(o)&&0===r(e.target).closest(".calendar-day").length?r(".calendar-day.active").removeClass("active"):r("input, textarea").blur())}t=r(e.target).closest("a"),t.length&&m(e)&&d(e)}},{}],500:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(37),i=e("react"),o=e("xtend"),t.exports=function(e){return function(t){function n(e){n.__super__.constructor.apply(this,arguments),this.listeners=[]}return s(n,t),n.prototype.listenTo=function(e,t){return r.on(e,t),this.listeners.push({events:e,callback:t})},n.prototype.componentWillUnmount=function(){return this.listeners.forEach(function(e){var t,n;return n=e.events,t=e.callback,r.off(n,t)})},n.prototype.render=function(){var t;return t=o(this.props,{listenTo:this.listenTo.bind(this)}),i.createElement(e,t)},n}(i.Component)}},{}],501:[function(e,t,n){var r,i;i=e("moment"),r=e(101),t.exports=function(){var e,t;return t=i(),e=r("pasted file name",{date:t.format("l"),time:t.format("LTS")}),e+".png"}},{}],502:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O=[].slice;m=e("underscore"),r=e(33),o=e(162),s=e(6),i=e(161),u=e(203),l=e(209),p=e("bluebird"),j=e(102),c=e(37),B=e("xtend"),d=j("PluginHandlerContext",["InvalidSignature","InvalidType","NotSerializable"]),y={},C=function(e){var t;return null!=(t=s.getCurrentBoard())&&t.id===e},f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWYXZ",S=function(e){var t,n,r,i;for(null==e&&(e=16),t=[],n=r=0,i=e;i>=0?i>r:r>i;n=i>=0?++r:--r)t.push(f[Math.floor(Math.random()*f.length)]);return t.join("")},k={},v={card:{type:o,serialize:function(e){return{value:e.id}},deserialize:function(e){var t;return t=c.get("Card",e),null!=t&&C(t.get("idBoard"))?t:null}},board:{type:i,serialize:function(e){return{value:e.id}},deserialize:function(e){return C(e)?c.get("Board",e):null}},member:{type:u,serialize:function(e){return{value:e.id}},deserialize:function(e){return r.isMe(e)?c.get("Member",e):null}},el:{type:Element,serialize:function(e){var t;return t=S(),y[t]=e,{value:t,disposer:function(){return delete y[t]}}},deserialize:function(e){return y[e]}}},h="__insecure_signature",a=S(64),_=function(e){var t;return t=m.chain(e).pairs().sortBy(function(e){var t,n;return t=e[0],n=e[1],t}).filter(function(e){var t;return t=e[0],t!==h}).object().value(),[a,JSON.stringify(t),a].join("\n").split("").reduce(function(e,t){return e.map(function(e){return 31*e+t.charCodeAt(0)&4294967295})},[0,1,2,3]).map(function(e){return("00000000"+e.toString(16)).substr(-8,8)}).join("")},M=function(e){return e[h]=_(e),e},g=function(e){return _(e)===e[h]},x=function(e){return m.isString(e)||m.isNumber(e)||m.isBoolean(e)||m.isNull(e)||m.isUndefined(e)?!0:m.isFunction(e)||m.isRegExp(e)||m.isDate(e)?!1:m.isArray(e)?m.every(e,x):m.isObject(e)?x(m.values(e)):!1},T=function(e){var t;return t=[],p.try(function(){return M(m.mapObject(e,function(e,n){var r,i,o,s;if(null!=(r=v[n])){if(!(e instanceof r.type)){if(null==e)return null;throw d.InvalidType("value in context did not have the expected type")}return o=r.serialize(e),s=o.value,i=o.disposer,null!=i&&t.push(i),s}if(x(e))return e;throw d.NotSerializable("the value for "+n+" was not serializable")}))}).disposer(function(){var e,n,r;for(n=0,r=t.length;r>n;n++)(e=t[n])()})},b=function(e){if(!e||!g(e))throw d.InvalidSignature("Context signature check failed. This usually means that the Power-Up modified the context between calls to Trello.");return m.mapObject(e,function(e,t){var n;return null!=e&&v.hasOwnProperty(t)&&null!=(n=v[t])?n.deserialize(e):e})},w=function(){var e;return e=1<=arguments.length?O.call(arguments,0):[],M(B.apply(null,e))},t.exports={Error:d,serialize:T,deserialize:b,extend:w}},{}],503:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N,V,$;r=e("jquery"),S=e("underscore"),i=e(33),s=e(6),D=e(146),I=e(147),N=e(132),a=e(97),u=e(20),f=e(37),g=e(38),v=e(666),b=e(502),y=e(540),w=e(506),_=e(679),k=e(680),C=e(681),x=e(542),V=e(508),j=e("bluebird"),$=e("xtend"),c="Invalid context, missing board",l="Invalid context, missing card",d="Invalid context, missing el (or attempt to use el after initial request)",p="Invalid context, missing list",h="Invalid context, missing member",o="Card not found or not on current board",m="Invalid context, missing organization",E=function(e,t,n){var r,i,s,a,u,m,f;if(s=t.context,u=t.idCard,r=s.board,i=s.card,a=s.el,m=s.list,f=s.member,(null!=n?n.board:void 0)&&null==r)throw e.NotHandled(c);if((null!=n?n.el:void 0)&&null==a)throw e.NotHandled(d);if((null!=n?n.list:void 0)&&null==m)throw e.NotHandled(p);if((null!=n?n.member:void 0)&&null==f)throw e.NotHandled(h);if(null!=u){if(null==r)throw e.NotHandled(c);if(null==(i=r.getCard(u)))throw e.NotHandled(o)}if((null!=n?n.card:void 0)&&null==i)throw e.NotHandled(l);return $(t,{context:$(s,{card:i})})},A=function(e,t){var n,r;return n=t.el,null!=n&&(x.contains(n)||x.toggledBy(n))?!0:null!=(r=L(e))&&x.contains(r)?!0:!1},P=null,B=function(){null!=P&&P.remove(),P=null},O=null,T=0,M=function(){r(window).off("resize.plugin-board-bar"),null==O||O.isRemoved||(O.remove(),O=null)},t.exports=function(e){var t,n,o,a;return o=e.idPlugin,t=e.allowRestricted,a=function(e){return S.mapObject(e,function(t){return function(n,r){var i,o,s;if(null==(i=null!=r?r.context:void 0))throw n.NotHandled("Missing context");if(s=function(e){var t,r,o;return t=e.command,o=e.el,r=e.options,j.using(b.serialize({el:o}),function(e){return n.request(t,$(r,{context:b.extend(i,e)})).then(function(e){return function(e){return V(e,s)}}(this))})},r=V(r,s),o=b.deserialize(i),null==o)throw n.NotHandled("Invalid context");return t.call(e,n,$(r,{context:o}))}})},n={data:function(e,t){var n,r,s,a,u,c;return u=E(e,t,{board:!0}).context,n=u.board,r=u.card,s=null!=r?r.getPluginData(o):void 0,a=null!=(c=i.me())?c.getPluginData(o):void 0,$(n.getPluginData(o),s,a)},set:function(e,t){var n,r,s,a,u,c,l,d;if(a=E(e,t,{board:!0}),u=a.context,n=u.board,r=u.card,c=a.scope,d=a.visibility,s=a.data,"private"!==d&&"shared"!==d)throw e.NotHandled("Invalid value for visibility");if(!S.isString(s))throw e.NotHandled("Invalid value for data");if(l=function(){switch(c){case"card":return r||function(){throw e.NotHandled("Card scope not available without card context")}();case"board":return n;case"member":return i.me()||function(){throw e.NotHandled("No active member")}();case"organization":return n.getOrganization()||function(){throw e.NotHandled("Unable to save plugin data at the organization level because the member is not in the organization")}();default:throw e.NotHandled("Invalid value for scope")}}(),"shared"===d){if(!("card"!==c&&"board"!==c||(null!=l?l.editable():void 0)))throw e.NotHandled("Scope not editable by active member");if("organization"===c&&!l.hasActiveMembership(i.me()))throw e.NotHandled("Scope not editable by active member")}l.setPluginData(o,d,s)},navigate:function(e,t){var n,r;if(n=t.url,!D(n))throw e.NotHandled("Not a supported url");if(!I(n))throw e.NotHandled("Navigation only allowed to Trello client URLs");r=n.replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),r!==location.pathname.slice(1)&&s.navigate(r,{trigger:!0})},showCard:function(e,t){var n;return n=E(e,t,{card:!0}).context.card,B(),y.close(),s.showCardDetail(n)},popup:function(e,t){var n,r,i,o,s,a,u,c;if(u=E(e,t,{board:!0}),o=u.context,c=u.title,i=u.content,r=u.callback,n=o.board,s=o.el,a=function(){var t;switch(t={model:n,title:c,content:i,callback:r},i.type){case"iframe":return new k(t);case"list":return new C(t);default:throw e.NotHandled("Uknown type for popup")}},A(e,o))x.pushView({view:a()});else{if(null==s)throw e.NotHandled(d);x.toggle({elem:s,view:a()})}},"close-popup":function(e,t){var n;n=t.context,A(e,n)?x.hide():"undefined"!=typeof console&&null!==console&&console.error("Error: No popover in context. Are you using the correct t?")},"pop-popup":function(e,t){var n;n=t.context,A(e,n)&&x.popView()},overlay:function(e,t){var n,i,o,s;o=E(e,t,{board:!0}),s=o.context,n=s.board,i=o.content,B(),P=new _({model:n,content:i}),r("body").append(P.render().el)},"close-overlay":function(e){null!=P?B():"undefined"!=typeof console&&null!==console&&console.warn("Warning: No overlay is being displayed")},modal:function(e,t){var n,r,i,s,a;i=E(e,t,{board:!0}),s=i.context,n=s.board,r=i.content,r.title||(r.title=(null!=(a=f.get("Plugin",o))?a.get("name"):void 0)||""),y.open({model:n,content:r})},"close-modal":function(e){return y.close()},"board-bar":function(e,t){var n,i,s,a,u,c;s=E(e,t,{board:!0}),a=s.context,n=a.board,i=s.content,i.title||(i.title=(null!=(u=f.get("Plugin",o))?u.get("name"):void 0)||""),M(),O=new v({model:n,content:i}),r(".board-main-content").append(O.render().el),T=i.height||200,c=function(){var e,t,n,i;return e=r(".plugin-board-bar iframe"),e.length?(n=e.height(),t=r(".board-main-content").height(),i=.4*t-48,n>i?e.height(i+"px"):T>n?e.height(Math.min(T,i)+"px"):void 0):void 0},c(),r(window).on("resize.plugin-board-bar",S.debounce(function(){return c()},300))},"close-board-bar":function(e){null!=O?M():"undefined"!=typeof console&&null!==console&&console.warn("Warning: No board bar is being displayed")},resize:function(e,t){var n,i,o;if(n=t.height,i=L(e),!i)throw e.NotHandled("Could not find iframe to resize");return r(i).parents(".plugin-modal>.fullscreen").length?void("undefined"!=typeof console&&null!==console&&console.warn("Warning: Fullscreen modals cannot be resized with t.sizeTo")):void(n&&(r(i).parents(".plugin-board-bar").length?(T=n,o=.4*r(".board-main-content").height()-48,i.style.height=Math.min(n,o)+"px"):i.style.height=n+"px"))},card:function(e,t){var n,r,i,o;return i=E(e,t,{card:!0}),o=i.context,n=o.card,r=i.fields,w.card(n,r)},cards:function(e,t){var n,r,i,o;return i=E(e,t,{board:!0}),o=i.context,n=o.board,r=i.fields,w.cards(n.openCards(),r)},list:function(e,t){var n,r;return n=t.context,r=t.fields,j.try(function(){var e,t;return null!=(t=n.list)?t:null!=(e=n.card)?null!=(t=e.getList())?t:g.getCardList(e.id):null}).then(function(t){if(null==t)throw e.NotHandled(p);return w.list(t,r)})},lists:function(e,t){var n,r,i,o;return i=E(e,t,{board:!0}),o=i.context,n=o.board,r=i.fields,w.lists(n.listList.models,r)},member:function(e,t){var n,r,i,o;return i=E(e,t,{member:!0}),o=i.context,r=o.member,n=i.fields,w.member(r,n)},board:function(e,t){var n,r,i,o;return i=E(e,t,{board:!0}),o=i.context,n=o.board,r=i.fields,w.board(n,r)},"attach-to-card":function(e,t){var n,r,i,o,s,a;return o=E(e,t,{card:!0}),s=o.context,n=s.card,a=o.url,i=o.name,r=o.mimeType,N(n,"uploadUrl",{url:a,name:i,mimeType:r}).return();
},organization:function(e,t){var n,r,i,o;if(i=E(e,t,{board:!0}),o=i.context,n=o.board,r=i.fields,null!=n.hasOrganization()&&null!=n.getOrganization())return w.organization(n.getOrganization(),r);throw e.NotHandled(m)}},t&&S.extend(n,{"request-token":function(e,t){var n,i,o,s;if(n=t.context,o=t.name,i=t.key,s=t.scope,!i)throw e.NotHandled("Missing API key");if(!o)throw e.NotHandled("Missing app name");if(!s)throw e.NotHandled("Missing scope");return new j(function(t){var n,a;return a=function(n){var r;if(r=/<pre>\s*([0-9a-f]+)\s*<\/pre>/.exec(n),!r)throw e.NotHandled("Failed to fetch token");return t(r[1])},n=function(t){var n,i;if(n=/input type="hidden" name="requestKey" value="([0-9a-f]+)"/.exec(t),i=/input type="hidden" name="signature" value="([0-9a-f\/]+)"/.exec(t),!n||!i)throw e.NotHandled("Unable to get required parameters");return r.post("/1/token/approve",{approve:"Allow",requestKey:n[1],signature:i[1]},a)},r.get("/1/authorize?expiration=never&response_type=token&name="+encodeURIComponent(o)+"&scope="+encodeURIComponent(s)+"&key="+encodeURIComponent(i),n)})}}),a(n)},L=function(e){var t;return t=document.querySelectorAll("iframe.plugin-iframe"),S.find(t,function(t){return t.contentWindow===e.source})}},{}],504:[function(e,t,n){var r,i,o,s,a,u,c,l;c=e(102),r=e(209),i=e(503),o=e(505),u=e(512),l=e("xtend"),a=c("PluginCache",["InconsistentUrlForId","InvalidArgument"]),s=function(){function e(){this.pluginFromUrl={},this.pluginFromId={}}return e.prototype.Error=a,e.prototype.get=function(e){var t,n,s;if(!(e instanceof r))throw a.InvalidArgument("expected a plugin");if(n=e.id,s=n===u.id&&null!=u.url?u.url:e.get("url"),null!=(t=this.fromId(n))){if(t.manifestUrl!==s)throw a.InconsistentUrlForId("the cached plugin is using a different url");return t}return e=new o(n,e.get("name"),s,i({idPlugin:n,allowRestricted:/^https:\/\/[\w-]+\.(?:staging\.)?trello\.services\/manifest\.json$/.test(s)||/^http:\/\/localhost:\d+\/[\w-]+\/manifest\.json$/.test(s)})),this.pluginFromUrl[s]=this.pluginFromId[n]=e,e},e.prototype.fromUrl=function(e){return this.pluginFromUrl[e]},e.prototype.fromId=function(e){return this.pluginFromId[e]},e.prototype.drop=function(e){var t;return null!=(t=this.pluginFromId[e])?(delete this.pluginFromUrl[t.manifestUrl],delete this.pluginFromId[e],t.drop()):void 0},e}(),t.exports=new s},{}],505:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=[].slice,g=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),c=e("underscore"),l=e(123),d=e(102),i=e(219),p=e(259),a=e("bluebird"),u=e(263),s=d("Plugin",["InvalidManifestUrl","UnableToLoadManifest","NotHandled","Timeout"]),h=function(e,t){return l(t,function(t,n){return"url"===n&&c.isString(t)?t.replace(/^\.\//,e):void 0})},m=function(e){var t;return t=p(e).set("hash",null).set("query",null),t.set("pathname",t.pathname.replace(/[^\/]+$/,"")),t.href},t.exports=o=function(){function e(e,t,n,r){if(this.id=e,this.name=t,this.manifestUrl=n,this.handlers=r,null==this.manifestUrl)throw s.InvalidManifestUrl("invalid url")}return e.Error=s,e.prototype.readFromManifest=function(){var e,t,n,r,i,o,s;for(i=2<=arguments.length?f.call(arguments,0,t=arguments.length-1):(t=0,[]),e=arguments[t++],s=this._loadManifest(),n=0,o=i.length;o>n;n++)r=i[n],s=s.get(r);return s.then(function(t){return c.isUndefined(t)?e:t})},e.prototype.getName=function(){return this.readFromManifest("name","").catch(s.UnableToLoadManifest,function(e){return function(){return e.name}}(this))},e.prototype.getDescription=function(){return this.readFromManifest("description","")},e.prototype.getDetails=function(){return this.readFromManifest("details","")},e.prototype.getImages=function(){return this.readFromManifest("images",[])},e.prototype.getRecommend=function(){return this.readFromManifest("recommend",{})},e.prototype.getIconUrl=function(){return this.readFromManifest("icon","url",null)},e.prototype._loadManifest=function(){return null!=this._manifest?this._manifest:this._manifest=a.try(function(e){return function(){return new a(function(t,n){return r.ajax({url:e.manifestUrl,dataType:"json",timeout:1e4}).done(t).fail(function(t,r){return"undefined"!=typeof console&&null!==console&&console.error("Unable to load manifest. Error="+r+" Url="+e.manifestUrl),n(s.UnableToLoadManifest())})})}}(this)).then(function(e){return function(t){return h(m(e.manifestUrl),t)}}(this))},e.prototype._getIo=function(){return null!=this._io?this._io:this._io=this.readFromManifest("connectors","iframe","url",null).then(function(e){return function(t){return new i(t,e.handlers)}}(this))},e.prototype.request=function(e,t,n){return new a(function(e){return u.onVisible(e)}).then(function(r){return function(){return r._getIo().call("request",e,t,n).catch(i.Error.NotHandled,function(){throw s.NotHandled()}).catch(i.Error.Timeout,function(e){throw s.Timeout(e.message)})}}(this))},e.prototype.supports=function(e){return this.readFromManifest("capabilities",[]).then(function(t){return g.call(t,e)>=0}).catch(s.UnableToLoadManifest,function(){return!1})},e.prototype.canReadManifest=function(){return this._loadManifest().then(function(){return!0}).catch(s.UnableToLoadManifest,function(){return!1})},e.prototype.drop=function(){return this._getIo().then(function(e){return null!=e?e.drop():void 0})},e}()},{}],506:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("underscore"),o=e(102),r=o("PluginModelSerializer",["InvalidField"]),s=function(e,t,n){if(i.any(n,function(e){return k.call(t,e)<0}))throw r.InvalidField();return i.pick(e,n)},a=function(e,t,n,o){return null==o&&(o={}),i.isEqual(["all"],i.values(n))&&(n=t),i.chain(n).map(function(n){var i;if(k.call(t,n)<0)throw r.InvalidField();return i=null!=o[n]?o[n](e,n):e.get(n),[n,i]}).object().value()},w=function(e,t){return null==t&&(t=["bytes","height","scaled","url","width"]),s(e,["bytes","height","scaled","url","width"],t)},_=function(e,t){return e.map(i.partial(w,i,t))},u=function(e,t){return null==t&&(t=["id","url","name","edgeColor","previews"]),a(e,["id","url","name","edgeColor","previews"],t,{previews:function(){var t;return _(null!=(t=e.get("previews"))?t:[])}})},c=function(e,t){return e.map(i.partial(u,i,t))},l=function(e,t){var n;return null==t&&(t=["id","name"]),n=["id","name","url","shortLink","members","dateLastActivity","idOrganization"],a(e,n,t,{members:function(){return b(e.memberList)}})},y=function(e,t){return null==t&&(t=["id"]),a(e,["id","name"],t)},d=function(e,t){var n;return null==t&&(t=["id","name"]),n=["attachments","badges","closed","cover","dateLastActivity","desc","due","id","idList","idShort","labels","members","name","shortLink","url"],a(e,n,t,{attachments:function(){return c(e.attachmentList)},cover:function(){var t,n;return null!=(n=e.get("idAttachmentCover"))&&null!=(t=e.attachmentList.get(n))?u(t):null},labels:function(){return m(e.labelList)},members:function(){return b(e.memberList)}})},p=function(e,t){return null==t&&(t=["id","name"]),e.map(i.partial(d,i,t))},h=function(e,t){return null==t&&(t=["name","color"]),a(e,["name","color"],t)},m=function(e,t){return e.map(i.partial(h,i,t))},f=function(e,t){return null==t&&(t=["id","name"]),a(e,["id","name","cards"],t,{cards:function(){return p(e.cardList.models,["all"])}})},g=function(e,t){return null==t&&(t=["id","name"]),e.map(i.partial(f,i,t))},v=function(e,t){return null==t&&(t=["id","fullName","username"]),a(e,["id","fullName","username","avatar"],t,{avatar:function(){var t;return t=e.get("avatarHash"),t?[window.avatarDomain,t,"50.png"].join("/"):null}})},b=function(e,t){return e.map(i.partial(v,i,t))},t.exports={Error:r,attachment:u,attachments:c,board:l,card:d,cards:p,list:f,lists:g,member:v,organization:y}},{}],507:[function(e,t,n){var r;r=e("xtend"),t.exports=function(e){return r(e,{locale:window.locale})}},{}],508:[function(e,t,n){var r,i,o;r=e(123),i=e(507),o=e("xtend"),t.exports=function(e,t){return r(e,function(e){var n,r,s;return null!=e&&null!=(s=e._callback)?(n=function(e,n){return function(r){return null==r&&(r={}),t(o(r,{command:"callback",options:{action:n,callback:e,options:i(r.options)}}))}},r=n(s,"run"),r.retain=n(s,"retain"),r.release=n(s,"release"),r):void 0})}},{}],509:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S;f=e("underscore"),r=e(33),k=e(102),s=e(37),a=e(38),u=e(209),l=e(505),d=e(504),c=e(502),C=e(507),x=e(508),m=e("bluebird"),S=e("xtend"),h=k("PluginRunner",["NotHandled","InvalidPlugin","Timeout"]),i=5e3,o=1e4,g={},w=function(e){return null==g[e]&&(g[e]=a.loadBoardEnabledPlugins(e),g[e].delay(o).then(function(){return delete g[e]})),g[e]},_=function(e,t){return m.try(function(){var n,r;if(t instanceof u)return t;if(!f.isString(t))throw h.InvalidPlugin("invalid plugin specifier");if(r=t,null!=(n=s.get("Plugin",r)))return n;if(null==e)throw h.InvalidPlugin("unable to find plugin");return w(e.id).then(function(){if(null!=(n=s.get("Plugin",r)))return n;throw h.InvalidPlugin("plugin not available to board")})})},y=function(e){var t,n,r;return r=e.plugins,n=e.plugin,t=e.board,r=null!=r?r:null!=n?[n]:null!=t?t.idPluginsEnabled():[],m.map(r,function(e){return function(e){return _(t,e)}}(this))},b=function(e){var t,n,i,o,s,a;return t={member:r.me(),permissions:{board:(null!=e&&null!=(o=e.board)?o.editable():void 0)?"write":"read"}},null!=(n=null!=e&&null!=(s=e.board)?s.hasOrganization():void 0)&&(t.organization=n),null!=(i=null!=e&&null!=(a=e.board)?a.getOrganization():void 0)&&(t.permissions.organization=(null!=i?i.hasActiveMembership(r.me()):void 0)?"write":"read"),null!=e.card&&(t.permissions.card=e.card.editable()?"write":"read"),S(t,f.pick(e,["board","card","command","el","options"]))},v=function(e){var t;return t=e.options},j=function(e){if(0===e.length)throw h.NotHandled("no plugin handles this command");return e[0]},p=function(){function e(){}return e.prototype.Error=h,e.prototype.processCallbacks=function(e,t,n){return x(e,function(e){return function(r){var i;return i=S(n,r),e._run([t],b(i),v(i)).then(j).catch(h.NotHandled,function(e){throw h.NotHandled("attempt to run callback on plugin "+t.plugin.id+" ("+t.io.name+") failed")})}}(this))},e.prototype._run=function(e,t,n,r){var o,s,a,u;return null==r&&(r=i),a=t.command,o=t.board,s=t.card,u=t.member,m.using(c.serialize(t),function(t){return function(i){return m.filter(e,function(e){var t;return t=e.io,t.supports(a)}).map(function(e){var c,d,p;return p=e.plugin,d=e.io,c=S(n,{context:i}),d.request(a,C(c),r).then(function(n){return{response:t.processCallbacks(n,e,{board:o,card:s,member:u}),idPlugin:p.id}}).catch(l.Error.NotHandled,l.Error.Timeout,function(){return null})}).filter(function(e){return null!=e}).map(function(e){var t,n;return n=e.response,t=e.idPlugin,Array.isArray(n)&&n.every(f.isObject)?f.map(n,function(e){return S(e,{idPlugin:t})}):f.isObject(n)?S(n,{idPlugin:t}):n})}}(this))},e.prototype._runFromOptions=function(e){var t,n,r;return r=y(e),n=b(e),t=v(e),m.resolve(r).map(function(e){return{plugin:e,io:d.get(e)}}).then(function(r){return function(i){return r._run(i,n,t,e.timeout)}}(this))},e.prototype.all=function(e){return this._runFromOptions(e).then(f.flatten)},e.prototype.one=function(e){return this._runFromOptions(e).then(j)},e}(),t.exports=new p},{}],510:[function(e,t,n){var r,i,o,s,a,u;o=e("underscore"),r=e(33),s=e(122),i=e("hearsay"),u={},a=function(e,t){var n,a,u;return u=e.snoopIdPluginsEnabled().map(function(n){var s;return 0===n.length?i.const({}):(s=n.map(function(n){return t?i.combine(r.me().snoopPluginData(n),e.snoopPluginData(n),t.snoopPluginData(n)):i.combine(r.me().snoopPluginData(n),e.snoopPluginData(n))}),i.combine.apply(i,s).map(function(e){return o.object(n,e)}))}).latest(),a=u.distinct(o.isEqual),n=s(a),n.use(),n},t.exports=function(e,t){var n,r;return t?null!=u[n=e.id+t.cid]?u[n]:u[n]=a(e,t):null!=u[r=e.id]?u[r]:u[r]=a(e)}},{}],511:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e("react"),o=e(514)(""),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=o.renderable(function(){var e;return e=this.props.items,o.ul(".pop-over-list",function(){return e.forEach(function(e){return o.li({onClick:e.onClick},function(){return o.addElement(e.content)})})})}),t}(i.Component),t.exports=r},{}],512:[function(e,t,n){var r,i;r=e(114),i=r.getRaw("powerUpPreviewUrl"),t.exports=null!=i?{id:"55a5d917446f51777421000d",url:i}:{}},{}],513:[function(e,t,n){var r,i,o,s,a,u;r=e("react-dnd-html5-backend"),i=e(542),o=e("react"),u=e(499),s=e("react-dnd"),a=o.createClass({displayName:"ReactRootComponent",render:function(){return o.createElement("div",{className:"js-react-root",onClick:this.dismissPopover},this.props.children)},dismissPopover:function(e){e.isDefaultPrevented()||u(e)}}),t.exports=s.DragDropContext(r)(a)},{}],514:[function(e,t,n){var r,i,o,s,a,u,c=[].slice;r=e(6),u=e(518),a=e(137),s=e("recup"),o=e(256),i=e("underscore"),t.exports=u(o(s,{b:function(){var e,t,n,r,i,o;if(i=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],o=this.normalizeArgs(e),t=o.attrs,n=o.contents,null!=t.href)throw Error("Can't specify an href on a `b` tag");if(t.href="#",null!=t.onClick)throw Error("onClick must be a positional argument to `b`");return r=t.disabled,t.onClick=function(e){return e.preventDefault(),r?void 0:i(e.currentTarget)},this.a(t,n)},link:function(){var e,t,n,i,o,s;if(s=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],o=this.normalizeArgs(e),t=o.attrs,n=o.contents,null!=t.href)throw Error("Can't specify an href on a `link` tag");return t.href=s,i=t.onClick,t.onClick=function(e){a(e)&&(e.preventDefault(),"function"==typeof i&&i(),r.navigate(s,{trigger:!0}))},this.a(t,n)},radio:function(e,t,n,r){var o,s;return s=function(o){var s;o.target.checked&&(s={},s[t]=n,e.setState(s),i.isFunction(r)&&r())},o=i.isEqual(e.state[t],n),this.input({type:"radio",name:t,value:n,checked:o,onChange:s})},statelessRenderable:function(e,t){return i.extend(this.renderable(t,{displayName:e}))}}))},{}],515:[function(e,t,n){var r,i;i=function(){function e(){this.viewsToBeRemoved=[]}return e.prototype.enqueue=function(e){var t,n,r,i;for(r=[],t=0,n=e.length;n>t;t++)i=e[t],i.$el.detach(),r.push(this.viewsToBeRemoved.push(i));return r},e.prototype.processQueue=function(){var e,t,n,r;for(n=Date.now(),e=0,t=[];Date.now()-n<10&&this.viewsToBeRemoved.length>0;)r=this.viewsToBeRemoved.shift(),r.remove(),t.push(e++);return t},e}(),t.exports=r=new i,setInterval(function(){return r.processQueue()},10)},{}],516:[function(e,t,n){var r,i;i=e(48),t.exports=r=function(){function e(){}return e.prototype.switchSection=function(e){return this.$(".js-content").addClass("hide").detach(),this.$(".js-loading-page").removeClass("hide"),this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e.target).addClass("active"),i(this.model.typeName+" View","Tab Navigation","Open "+this.$(e.target)[0].getAttribute("data-tab")+" Page")},e}()},{}],517:[function(e,t,n){var r,i;i=e(518),r=e(72),t.exports=i(r)},{}],518:[function(e,t,n){var r,i,o,s,a,u,c,l={}.hasOwnProperty,d=[].slice;r=e("underscore"),i=e(77),o=e(101),a=e(256),c=e("xtend"),u=function(e){var t,n;return r.object(function(){var r;r=[];for(t in e)l.call(e,t)&&(n=e[t],r.push([t,n.toString()]));return r}())},s={format:function(){this.raw(this.l.apply(this,arguments))},formatText:function(){return this.text(this.l.apply(this,arguments))},classify:function(e){var t,n;return function(){var r;r=[];for(t in e)n=e[t],n&&r.push(t);return r}().join(" ")},urlify:function(e){return e=e.replace("'","\\'").replace('"','\\"').replace("(","\\(").replace(")","\\)"),"url('"+e+"')"},stylify:function(e){var t,n;return function(){var r;r=[];for(t in e)n=e[t],n&&r.push(t+": "+n+";");return r}().join("")},optionSelected:function(e,t,n){return e&&(t=r.extend({selected:"selected"},t)),this.option(t,n)},check:function(e,t){this.format(t),this.text(" "),e&&(this.icon("check"),this.text(" "))},icon:function(e,t,n){var r,i,o;null==n&&(n={}),"object"==typeof t&&(n=t,t=void 0),r=null!=(o=n.class)?o:"",i=c(n,{class:("icon-sm icon-"+e+" "+r).trim()}),this.span(i),null!=t&&(this.raw("&nbsp;"),this.format(t))}},t.exports=function(e){var t;return t=a(e,s),function(e){return a(t,{l:function(t,n,r){return t=i.normalizeKeyPath(t),o(["templates",e].concat(d.call(t)),u(n),r)}})}}},{}],519:[function(e,t,n){var r,i,o,s,a;r=e(33),s=e(517)(),a=e(814),i=e("underscore"),o={mustacheRenderWithHelpers:function(e,t,n,o){var a;return null==n&&(n={}),null==o&&(o={}),a=i.extend({__ed:n.editable,__own:n.owned,__loggedIn:r.isLoggedIn(),__siteDomain:siteDomain,__avatarDomain:avatarDomain,__logoDomain:logoDomain},t),s.mustacheRender(e,a,o)},mustacheRenderModel:function(e,t,n,r){var s;return null==r&&(r={}),s={editable:"function"==typeof t.editable?t.editable():void 0,owned:"function"==typeof t.owned?t.owned():void 0},n=i.extend(t.toJSON(),n),o.mustacheRenderWithHelpers(e,n,s,r)},fill:function(e,t,n,r){var i;if(null==t&&(t={}),null==n&&(n={}),null==r&&(r={}),i=a[e],null==i)throw new Error("Could not find template "+e+"!");return o.mustacheRenderWithHelpers(i,t,n,r)},fillFromModel:function(e,t,n,r){var i;if(null==n&&(n={}),null==r&&(r={}),i=a[e],null==i)throw new Error("Could not find template "+e+"!");return o.mustacheRenderModel(i,t,n,r)},fillMenu:function(e,t,n){return o.fill("menu_base",{content:this.fill(e,t,n)})}},t.exports=e(256)(a,o)},{}],520:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=[].slice;r=e("jquery"),i=e(79),o=e(97),s=e(20),a=e(116),c=e(129),l=e("underscore"),m=e(45),g=e(48),f=e(493),h=f.getTypes,p=f.getPasted,v=e(125),d=e(238),t.exports=u=new(function(){function e(){var e,t,n,i;for(this._handlers={},this.clear(),i=["keydown","keypress","paste"],t=0,n=i.length;n>t;t++)e=i[t],r(document).bind(e,this[e].bind(this));a.on("pasteImage",function(e){return function(t){return e.triggerPasted("files",[t])}}(this))}var t;return e.prototype.precedence={global:0,default:1,header:2,board:3,board_sidebar:3,list:4,card:5,search_box:6,dialog:10,dialog_view:12,plugin_modal:20,popover:30,popover_view:32,attachment_viewer:100,quick_card_editor:100},e.prototype._isKeyEligible=function(e){var t;return t=o.getKey(e),!(i.isTouch()||t===s.Unknown||t!==s.Escape&&r(e.target).is("input:visible,textarea:visible,select:visible")||e.ctrlKey||e.altKey||e.metaKey)},e.prototype.addHandler=function(e,t){var n,r,i,o;return o=t.scope,i=t.precedence,r=t.modal,null==i&&(i=this.precedence[o]),null==i&&(m("userinput","Missing precedence for "+o),i=this.precedence.default),null==r&&(r=!1),null==(n=this._handlers)[o]&&(n[o]={}),this._handlers[o]={target:e,scope:o,precedence:i,modal:r},m("userinput","Adding handler for "+o)},e.prototype.removeHandlerScope=function(e){var t,n;t=[];for(n in this._handlers)n===e&&(m("userinput","Removing handlers for "+n),t.push(delete this._handlers[n]));return t},e.prototype.removeHandler=function(e){var t,n,r,i;n=this._handlers,r=[];for(i in n)t=n[i].target,e===t&&(m("userinput","Removing handler for "+i),r.push(delete this._handlers[i]));return r},e.prototype.clear=function(){var e,t;m("userinput","Removing all non-global handlers"),e=[];for(t in this._handlers)"global"!==t&&(m("userinput","Removing handler for "+t),e.push(delete this._handlers[t]));return e},t=function(e,t){var n,r,i,o;for(o=[],n=0,i=e.length;i>n&&(r=e[n],o.push(r),!t(r));n++);return o},e.prototype._sortedHandlers=function(){var e;return e=l.sortBy(l.values(this._handlers),function(e){return-e.precedence}),t(e,d.get("modal"))},e.prototype._triggerOnTargets=function(){var e,t,n,r,i,o,s;for(t=arguments[0],e=2<=arguments.length?b.call(arguments,1):[],o=this._sortedHandlers(),r=0,i=o.length;i>r;r++)if(s=o[r].target,n=null!=(null!=s?s[t]:void 0)?s[t].apply(s,e):null!=(null!=s?s.triggerHandler:void 0)?s.triggerHandler(t,e):void 0)return(l.isString(n)||l.isArray(n))&&this._track(n),!0;return!1},e.prototype.keydown=function(e){var t;t=o.getKey(e),t===s.Escape&&c.stop(e),this._isKeyEligible(e)&&this._triggerOnTargets("shortcut",t,e)&&c.stop(e)},e.prototype.keypress=function(e){var t;t=o.getKey(e),this._isKeyEligible(e)&&this._triggerOnTargets("shortcut",t,e)&&c.stop(e)},e.prototype.paste=function(e){p(e.originalEvent).then(function(t){return function(n){var r,i,o,s,u;if(!l.isEmpty(n)&&(!n.text&&!n.url||"INPUT"!==(o=e.target.tagName)&&"TEXTAREA"!==o||a.isClipboard(e.target)))for(s=["url","text","files"],r=0,i=s.length;i>r;r++)if(u=s[r],n[u]){t.triggerPasted(u,n[u]);break}}}(this))},e.prototype.triggerPasted=function(e,t){var n;return n=l.compact(this._sortedHandlers().map(function(e){var t;return null!=(t=e.target)?t.el:void 0})),v(n,"userinput-paste:"+e,{detail:t})},e.prototype._track=function(e){return null!=e?(l.isArray(e)||(e=[e]),g.apply(null,["Keyboard Shortcuts"].concat(b.call(e)))):void 0},e}())},{}],521:[function(e,t,n){var r,i,o;r=e(152),i=e(38),t.exports=o=function(){function e(){}return e.prototype.limit=50,e.prototype.nextPage=1,e.prototype.shortLoad=!1,e.prototype.loading=!1,e.prototype.idModels=null,e.prototype.loadMoreActions=function(){return this.loading?void 0:(this.loading=!0,this.waitForId(this.model,function(e){return function(){var t;return i.loadMoreActionData(e.model.typeName.toLowerCase(),e.model.id,e.nextPage,e.limit,e.idModels,null!=(t="function"==typeof e.getActionsFilter?e.getActionsFilter():void 0)?t:"all").finally(function(){return e.loading=!1}).then(function(t){return e.shortLoad=t.length<e.limit,e.renderActions(),++e.nextPage}).done()}}(this)))},e.prototype.hasMoreActions=function(){return!this.loading&&!this.shortLoad&&this.getActions().length>=this.limit},e.prototype.getActions=function(){var e,t,n;return e=null!=(t="function"==typeof this.getFilteringModels?this.getFilteringModels():void 0)?t:[],(n=this.model).getActions.apply(n,e)},e}()},{}],522:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty,y=[].slice;r=e("jquery"),i=e(234),o=e(83),s=e("hearsay"),u=e(111),l=e(520),h=e("underscore"),g=e(106),m=e(101),f=e(43),a=e("bluebird"),c=e(515),d={NONE:0,SOME:1,LOTS:2},t.exports=g(o,u,p=function(e){function t(e){this._subviews={},this.modelCache=null!=e?e.modelCache:void 0,this.handleDOMRemove=function(e){return function(){return e._delegated=!1}}(this),t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype._rendered=!1,t.VIGOR=d,t.prototype.vigor=d.LOTS,t.prototype.render=function(){var e;if(e=1<=arguments.length?y.call(arguments,0):[],null==this.renderOnce)return this;if(this._rendered)switch(this.vigor){case d.NONE:return this;case d.SOME:return f(Error("rendered more than once: "+this.constructor.name)),this;default:throw Error("You cannot render me more than once!")}return this._rendered=!0,this.renderOnce.apply(this,e),this},t.prototype.getViewTitle=function(){var e,t,n;return null==this.viewTitleKey?"":(t=h.result(this,"viewTitleKey"),e=null!=(n=h.result(this,"viewTitleArguments"))?n:{},m(["view title",t],e))},t.prototype.subview=function(e,t,n,r){return null==n&&(n={}),null==r&&(r=e.prototype.uniqueId()+"_"+t.cid),r in this._subviews||(this._subviews[r]=new e(h.extend({model:t,modelCache:this.modelCache},n))),this._subviews[r]},t.prototype.existingSubview=function(e,t,n){if(null==n&&(n=e.prototype.uniqueId()+"_"+t.cid),!(n in this._subviews))throw new Error("existingSubview called before subview was created");return this._subviews[n]},t.prototype.existingSubviewOrUndefined=function(e,t,n){return null==n&&(n=e.prototype.uniqueId()+"_"+t.cid),this._subviews[n]},t.prototype.collectionSubview=function(e,t,n,r){var i,o;return null==n&&(n={}),null==r&&(r=e.prototype.uniqueId()),o=null!=(i=this._subviews)[r]?i[r]:i[r]=new e(h.extend({collection:t,modelCache:this.modelCache},n)),null!=n.el&&o.el!==n.el&&o.setElement(n.el),o},t.prototype.subviewsOfType=function(e){var t,n,r,i;n=this._subviews,r=[];for(t in n)b.call(n,t)&&(i=n[t],i instanceof e&&r.push(i));return r},t.prototype.deleteSubview=function(e,t){if(null==t&&(t=e.constructor.prototype.uniqueId()+"_"+e.model.cid),e!==this._subviews[t])throw new Error("incorrect key for subview in deleteSubview");return e.remove(),delete this._subviews[t]},t.prototype.removeSubviews=function(){var e;e=h.values(this._subviews),this._subviews={},c.enqueue(e)},t.prototype.deleteSubviewsOfType=function(e){var t,n,r,i;for(r=this.subviewsOfType(e),t=0,n=r.length;n>t;t++)i=r[t],this.deleteSubview(i)},t.prototype.remove=function(){return this.unsubscribe(),this.stopUsing(),this.removeSubviews(),this.cancelScheduled(),l.removeHandler(this),t.__super__.remove.apply(this,arguments)},t.prototype.frameDebounce=function(e,t){var n;return null==t&&(t=this),n=!1,function(){n||(n=!0,this.requestAnimationFrame(function(){n=!1,e.call(t)}))}},t.prototype.makeDebouncedMethods=function(){var e,t,n,r;for(r=1<=arguments.length?y.call(arguments,0):[],e=0,t=r.length;t>e;e++)n=r[e],this[n+"Debounced"]=this.frameDebounce(this[n])},t.prototype.delegateEvents=function(){var e,n,r;if(!this._delegated){this.$el.on("remove",this.handleDOMRemove),t.__super__.delegateEvents.apply(this,arguments),n=this._subviews;for(e in n)r=n[e],r.delegateEvents();this._delegated=!0}},t.prototype.undelegateEvents=function(){var e,n,r;if(this._delegated){this.$el.off("remove",this.handleDOMRemove),t.__super__.undelegateEvents.apply(this,arguments),n=this._subviews;for(e in n)r=n[e],r.undelegateEvents();this._delegated=!1}},t.prototype.appendSubview=function(e,t){return null==t&&(t=this.$el),this.appendSubviews([e],t)},t.prototype.appendSubviews=function(e,t){var n,r,i;for(null==t&&(t=this.$el),n=0,r=e.length;r>n;n++)i=e[n],i.delegateEvents();return t.append(function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)i=e[t],r.push(i.render().el);return r}())},t.prototype.ensureSubviews=function(e,t){var n,i,o,s,a,u,c,l,d,p,m,f,g,v,b;for(null==t&&(t=this.$el),i=t[0],o=h.clone(i.childNodes),u=a=0,p=o.length;p>a;u=++a)if(n=o[u],!h.find(e,function(e){return e.el===n})){s=!1,g=this._subviews;for(d in g)b=g[d],b.el!==n||s||(this.deleteSubview(b,d),s=!0);if(!s)throw new Error("Could not find view associated with element to remove")}for(c=0,m=e.length;m>c;c++)v=e[c],h.find(o,function(e){return v.el===e})||(v.delegateEvents(),v.render());for(u=l=0,f=e.length;f>l;u=++l)v=e[u],v.el!==i.childNodes[u]&&(0===u?r(i).prepend(v.el):r(e[u-1].el).after(v.el))},t.prototype.uniqueId=function(){return this.hasOwnProperty("_uniqueId")||(this._uniqueId=h.uniqueId("view")),this._uniqueId},t}(i.View)),h.extend(p.prototype,s.mixin)},{}],523:[function(e,t,n){var r,i,o,s;r=e(532),i=e(33),o=e("underscore"),s=function(e){var t,n,o,s;return t=i.me().isFeatureEnabled("largeAttachments"),o=e.getOrganization(),s=null!=o&&o.isFeatureEnabled("largeAttachments"),n=t||s?"file size exceeds 250mb":"file size exceeds 10mb",r.show(n,"error","upload",5e3)},t.exports=function(e,t){var n,r,a;for(o.isArray(t)||(t=[t]),r=0,a=t.length;a>r;r++)if(n=t[r],!i.me().canUploadAttachment(n))return s(e),!0;return!1}},{}],524:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),i=e(216),o=e(217),a=e(129),u=e(522),c=e(48),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype._secretUrl=function(){return this.model.url()+"/invitationSecret"},t.prototype.showInvitationLink=function(e){return this.$(".js-show-invitation-link").addClass("hide"),this.$(".js-invitation-link-container").removeClass("hide"),o({method:"post",url:this._secretUrl()}).get("secret").then(function(e){return function(t){var n;return n=e.model.get("url").replace(/(\/b\/[^\/]+|\/[^\/]+$)(.*)$/,"/invite$1/"+t+"$2"),e.$(".js-invitation-link").val(n).focus().select()}}(this)).done()},t.prototype.clickInvitationLink=function(e){return r(".js-invitation-link").select()},t.prototype.deactivateInvitationLink=function(e){return this.$(".js-show-invitation-link").removeClass("hide"),this.$(".js-invitation-link-container").addClass("hide"),this.$(".js-invitation-link").val(""),o({method:"delete",url:this._secretUrl()}).done()},t.prototype.copyInvitationLink=function(e){return r(".js-invitation-link").select(),document.execCommand("copy")},t}(u)},{}],525:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;i=e(216),o=e(33),s=e(79),f=e(101),u=e(97),g=e(100),c=e(38),l=e(543),d=e("bluebird"),b=e(517)("invitation_link"),p=e(129),h=e(522),w=e("xtend"),m=e("underscore"),r=e("jquery"),v=function(e){return/^\*@[^\*]+$/.test(e)?e.replace(/^\*@/,""):null},y=b.renderable(function(e){var t,n,r,i,o,s,a,u,c,l,d,p;o=e.isLoggedIn,i=e.isConfirmed,s=e.isValidEmail,l=e.returnUrl,r=e.inviter,a=e.name,c=e.requiredDomain,n=e.firstDomain,t=e.emailRestrictions,u=e.pendingEmail,p=e.willJoinOnConfirm,d=e.transferUrl,b.div(".invitation-link-description",function(){return b.format("youve-been-invited",{inviterName:r.fullName,name:a})}),u?b.p(".invitation-link-explanation",function(){return b.format("waiting-for-you-to-click-on-the-link-we-sent-to-email",{email:u})}):o?s?i?b.div(".invitation-link-options",function(){return b.button(".button.primary.js-join",function(){return b.format("join")})}):(b.p(".invitation-link-explanation.js-you-need-to-confirm",function(){return b.format("before-you-can-join-you-ll-need-to-confirm-your-email-address")}),p||(b.p(".invitation-link-explanation.js-will-join-on-confirm.hide",function(){return b.format("youll-be-added-as-soon-as-you-confirm-your-email")}),b.div(".invitation-link-options",function(){return b.button(".button.primary.js-join-on-confirm",function(){return b.format("join-after-i-confirm-my-email")})}))):(c?(b.p(".invitation-link-explanation",function(){return b.format("to-join-this-team-you-need-to-confirm-an-email-from-domain",{domain:c})}),b.h2(".add-email-to-your-account-heading",function(){return b.format("add-email-to-your-account")}),b.div(".invitation-link-add-email",function(){return b.input(".invitation-link-add-email-prefix.js-email-prefix-to-add",{placeholder:b.l("yourname"),"data-domain":c}),b.span(".invitation-link-add-email-domain",function(){return b.text("@"+c)})})):(b.p(".invitation-link-explanation",function(){return b.format("to-join-this-team-you-need-to-confirm-an-email-matching-one-of-the-following")}),b.ul(function(){var e,n,r,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],i.push(b.li(function(){return b.text(r)}));return i}),b.h2(".add-email-to-your-account-heading",function(){return b.format("add-email-to-your-account")}),b.div(".invitation-link-add-email",function(){var e;return e=n?b.l("yourname-at-domain",{domain:n}):void 0,b.input(".invitation-link-add-email.js-email-to-add",{placeholder:e})})),b.div(".invitation-link-options",function(){return b.div(function(){return b.a(".button.primary.js-add-email",{href:"#"},function(){return b.format("add-email")})}),b.div(".invitation-link-switch-accounts",function(){return b.a(".quiet",{href:"/login?reauthenticate=1&returnUrl="+encodeURIComponent(l)},function(){return b.format("switch-accounts")})})})):(b.p(".invitation-link-explanation",function(){return b.format("before-you-can-join-you-ll-need-a-trello-account")}),(c||t.length>0)&&(c?b.p(function(){return b.format("note-this-team-requires-you-log-in-with-an-email-from-domain",{domain:c})}):(b.p(function(){return b.format("note-this-team-requires-you-log-in-with-an-email-matching-one-of-the-following");
}),b.ul(function(){var e,n,r,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],i.push(b.li(function(){return b.text(r)}));return i}))),b.div(".invitation-link-options",function(){return b.button(".button.primary.js-signup",function(){return b.format("sign-up")}),b.button(".button.js-login",function(){return b.format("log-in")})}),b.div(".invitation-link-options-learn-more",function(){return b.a(".quiet",{href:"/tour",target:"tour"},function(){return b.format("learn-more-about-trello")})})),b.p(".error.js-deactivated.hide",function(){return b.format("unfortunately-this-invitation-link-has-been-deactivated")}),b.p(".error.js-only-team-members.hide",function(){return b.format("only-team-members-can-join-this-board")}),b.div(".error.js-must-join-enterprise.hide",function(){return b.p(function(){return b.format("before-you-can-join-this-team-you-must-join-the-enterprise-it-belongs-to")}),b.p(function(){return b.a(".button.primary",{href:d},function(){return b.format("transfer-account")})})}),b.p(".error.js-error.hide",function(){})}),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.className="invitation-link",t.prototype.events={"click .js-join":function(e){return this._disableJoin(),this.fxJoin().catch(i.NotFound,function(e){return function(t){return e.$(".js-deactivated").removeClass("hide")}}(this)).catch(i.Other,function(e){return function(t){if(/organization restricts invites/.test(t.message))return e.$(".js-only-team-members").removeClass("hide");throw t}}(this)).catch(i.Conflict,function(e){return function(t){return e.$(".js-must-join-enterprise").removeClass("hide")}}(this)).catch(i,function(e){return function(t){var n;return n=g(t),e.$(".js-error").text(n).removeClass("hide")}}(this)).done()},"click .js-add-email":function(e){var t;return this.$(".js-email-to-add,.js-email-prefix-to-add").prop("disabled",!0),this.$(".js-add-email").prop("disabled",!0).addClass("disabled"),t=this._getEmail(),this.model.run("logins",{email:t},function(e){return function(n){e.pendingEmail=t,e.render()}}(this))},"input .js-email-to-add":"updateButton","input .js-email-prefix-to-add":"updateButton","keydown .js-email-prefix-to-add,.js-email-to-add":function(e){return u.isSubmitEvent(e)?this.$(".js-add-email:not(:disabled)").click():void 0},"click .js-join-on-confirm":function(e){return this._queueAutoJoin(),this.$(".js-join-on-confirm,.js-you-need-to-confirm").addClass("hide"),this.$(".js-will-join-on-confirm").removeClass("hide")},"click .js-signup":function(e){var t,n,i;return this._queueAutoJoin(),t=this._requiredDomain(),i=t?b.l("yourname-at-domain",{domain:t}):"",n="/signup?"+r.param({returnUrl:s.isEmbeddedDocument()?"/embed/signup":this._returnUrl(),confirmReturnUrl:this._returnUrl(),email:i}),s.isEmbeddedDocument()?new l(n).open():window.location=n},"click .js-login":function(e){var t,n;return this._queueAutoJoin(),n=s.isEmbeddedDocument()?"/embed/login":this._returnUrl(),t="/login?"+r.param({returnUrl:n}),s.isEmbeddedDocument()?new l(t).open():window.location=t}},t.prototype._disableJoin=function(){return this.$(".js-join").addClass("disabled").prop("disabled",!0)},t.prototype.initialize=function(e){var t;return this.fxJoin=e.fxJoin,this.fxQueueJoin=e.fxQueueJoin,this.inviter=e.inviter,this.name=e.name,this.emailRestrictions=e.emailRestrictions,this.transferUrl=e.transferUrl,this.willJoinOnConfirm=e.willJoinOnConfirm,null!=(t=o.me())?this.listenTo(t,"change:confirmed change:logins",function(e){return function(){return e.$(".js-join").addClass("disabled"),setTimeout(function(){return window.location.reload()},1e3)}}(this)):void 0},t.prototype.updateButton=function(){var e;return e=this._isValidEmail(this._getEmail()),this.$(".js-add-email").prop("disabled",!e).toggleClass("disabled",!e)},t.prototype._queueAutoJoin=function(){return this.fxQueueJoin()},t.prototype._getEmail=function(){var e,t;return e=this.$(".js-email-to-add"),t=this.$(".js-email-prefix-to-add"),e.length?e.val():t.length?t.val()+"@"+t.attr("data-domain"):void 0},t.prototype._isValidEmail=function(e){return 0===this.emailRestrictions.length?!0:m.any(this.emailRestrictions,function(t){return RegExp("^"+p.escapeForRegex(t).replace(/\\\*/g,"[^@]*")+"$").test(e)})},t.prototype._returnUrl=function(){return window.location.pathname},t.prototype._requiredDomain=function(){return 1===this.emailRestrictions.length&&v(this.emailRestrictions[0])},t.prototype.render=function(){var e,t,n,r,i,s;return i=o.me(),n=o.isLoggedIn(),t=null!=i?i.get("confirmed"):void 0,r=n&&m.chain(i.get("logins")).pluck("email").any(this._isValidEmail.bind(this)).value(),s=this._requiredDomain(),e=m.chain(this.emailRestrictions).map(v).compact().first().value(),this.$el.html(y({emailRestrictions:this.emailRestrictions,requiredDomain:s,firstDomain:e,inviter:this.inviter,name:this.name,isConfirmed:t,isLoggedIn:n,isValidEmail:r,pendingEmail:this.pendingEmail,returnUrl:this._returnUrl(),transferUrl:this.transferUrl,willJoinOnConfirm:this.willJoinOnConfirm})),this.updateButton(),this.defer(function(e){return function(){return e.$(".js-email-prefix-to-add,.js-email-to-add").focus().select()}}(this)),this},t}(h)},{}],526:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(531),o=e(542),s=e(522),a=e(48),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="labels",t.prototype.el=function(){return this.labelsView=this.subview(i,this.model,{board:this.model.getBoard(),selectLabel:this.toggleLabel.bind(this),renderOn:[{source:this.model.labelList,events:"add remove reset change"},{source:this.model,events:"change:labels, change:idLabels"}],popOverMethod:"pushView",searchInit:this.options.searchInit}),this.labelsView.render().el},t.prototype.toggleLabel=function(e){a(this.model.typeName,"Card Labels Menu","Change Label"),this.model.toggleLabel(this.modelCache.get("Label",e)),this.options.hideOnSelect&&o.popView()},t}(s)},{}],527:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(200),o=e(528),s=e(542),a=e(522),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="create label",t.prototype.el=function(){var e,t;return e=this.options.color,t=this.options.name,l.call(r.colors,t)>=0&&(e=t,t=""),new o({model:{name:t},submitTextKey:"create",color:e,onSubmit:function(e){return function(t,n){var r;return"function"==typeof(r=e.options).onSubmit&&r.onSubmit(t,n),s.popView()}}(this)}).render().el},t}(a)},{}],528:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(200),o=e(129),s=e(522),a=e("underscore"),c=e(519),u=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.tagName="form",t.prototype.className="edit-label",t.prototype.events={"click .js-palette-color":"pickColor","click .js-submit":"submit",submit:"submit"},t.prototype.initialize=function(e){return this.accessoryView=e.accessoryView,this.color=e.color,this.onSubmit=e.onSubmit,this.submitTextKey=e.submitTextKey,t.__super__.initialize.apply(this,arguments)},t.prototype.renderOnce=function(){var e,t,n;return t=function(){var t,n,i,o;for(i=r.colors.concat(null),o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push({color:e,selected:e===this.color});return o}.call(this),n={label:{name:this.model.name},colors:t},n.submitText=u(this.submitTextKey),this.$el.html(c.fill("label_edit_component",n)),null!=this.accessoryView&&this.$(".js-accessory-view-holder").append(this.accessoryView.render().el),this},t.prototype.pickColor=function(e){var t;return o.stop(e),this.$(".js-palette-select").hide(),t=this.$(e.target).closest(".js-palette-color"),this.color=t.attr("data-color"),t.find(".js-palette-select").show()},t.prototype.submit=function(e){var t;return o.stop(e),t=this.$(".js-label-name").val().trim(),a.isEmpty(t)&&a.isEmpty(this.color)?void 0:this.onSubmit(t,a.isEmpty(this.color)?null:this.color)},t}(s)},{}],529:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(534),i=e(528),s=e(542),a=e(129),u=e(522),l=e(48),c=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return d(t,e),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.tagName="input",t.prototype.className="negate",t.prototype.attributes=function(){return{type:"submit",value:c("delete")}},t.prototype.events={click:function(e){return a.stop(e),this.options.onClick()}},t}(u),t.prototype.viewTitleKey="change label",t.prototype.el=function(){return new i({model:this.model.toJSON(),submitTextKey:"save",onSubmit:function(e){return function(t,n){var r;return e.model.update({color:n,name:t}),"function"==typeof(r=e.options).onSubmit&&r.onSubmit(),s.popView()}}(this),color:this.model.get("color"),accessoryView:new n({onClick:this.confirmDeleteLabel.bind(this)})}).render().el},t.prototype.confirmDeleteLabel=function(){return r.pushView("delete label",{model:this.model,confirmBtnClass:"negate",popOnClick:!0,popDepth:2,fxConfirm:function(e){return function(t){var n;return e.model.destroy(),"function"==typeof(n=e.options).onSubmit&&n.onSubmit(),l("Label","Delete")}}(this)})},t}(u)},{}],530:[function(e,t,n){var r,i,o,s;r=e(20),i=e(200),s=e("underscore"),t.exports=o=function(){function e(){}return e.keyboardIndex=[s.last(i.colors)].concat(s.initial(i.colors)),e.keyNumberForColor=function(e){var t;return t=this.keyboardIndex.indexOf(e),t>=0?""+t:null},e.colorForKey=function(e){var t;return t=e-r._0,this.keyboardIndex[t]},e.setLabelFromKey=function(e,t,n){var r,i;i=this.colorForKey(e),r=t.getBoard().labelsForColors()[i],1===(null!=r?r.length:void 0)?t.toggleLabelColor(i):"function"==typeof n&&n(i)},e}()},{}],531:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;r=e("jquery"),i=e(33),o=e(97),s=e(20),a=e(200),u=e(527),c=e(529),l=e(530),p=e(542),h=e(129),m=e(522),f=e("underscore"),v=e(519),b=e(48),g=e(101),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return y(t,e),n=12,t.prototype.labelsToShow=n,t.prototype.events={"click .js-select-label":"clickLabel","click .js-toggle-color-blind-mode":"toggleColorBlindMode","click .js-edit-label":"clickEditLabel","click .js-add-label":"clickAddLabel","click .js-show-more":"showMore","input .js-label-search":"renderLabels","keyup .js-label-search":"keyUp","mouseover .card-label":"hoverLabel"},t.prototype.initialize=function(e){var n,r,o,s,a;for(this.selectLabel=e.selectLabel,this.board=e.board,this.modelCache=e.modelCache,this.renderOn=e.renderOn,this.popOverMethod=e.popOverMethod,this.searchInit=e.searchInit,this.makeDebouncedMethods("render","renderLabels"),this.listenTo(i.me(),{"change:prefs":this.renderDebounced}),this.listenTo(this.board.labelList,{"add remove reset change":this.renderLabelsDebounced}),s=null!=(o=this.renderOn)?o:[],n=0,r=s.length;r>n;n++)a=s[n],this.listenTo(a.source,a.events,this.renderLabelsDebounced);return this._keepVisible={},t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){var e,t,n,r;return t=this.board.labelColors(),n={editable:this.board.editable()},e={colors:t,isColorBlindEnabled:i.isLoggedIn()&&i.me().get("prefs").colorBlind,searchInit:null!=(r=this.searchInit)?r:""},this.searchInit=null,this.$el.html(v.fill("popover_change_labels",e,n)),this.renderLabels()},t.prototype.renderLabels=function(){var e,t,n,r,i,o,s,a,u,c,l;return o=this.board.labelsForColors(),r=this._filteredLabels(),e=f.map(r,function(e){return function(t){return e.model.dataForLabel(t)}}(this)),c=function(e){return function(t){return t.isActive||e._keepVisible[t.id]}}(this),i=e.length>this.labelsToShow?(n=e.filter(c),a=this.labelsToShow-n.length,f.chain(e).filter(function(e){return function(e){return c(e)||a-->0}}(this)).first(this.labelsToShow).value()):e,this.$(".js-show-more").toggleClass("hide",i.length===e.length),t={labels:i},s={editable:this.board.editable()},this.$(".js-labels-list").empty().append(v.fill("select_labels",t,s)),u=this._searchVal(),l=f.isEmpty(u)||r.length>0?g("create new label.unnamed"):g("create new label.named",{name:u}),this.$(".js-add-label").text(l),!f.isEmpty(u)&&r.length>0&&this.selectFirstLabelInList(),this},t.prototype.highlightElement=function(e){return h.selectMenuItem(this.$(".js-labels-list"),".card-label",e)},t.prototype.getHighlightedElement=function(){return this.$(".js-labels-list .card-label.selected").first()},t.prototype.selectFirstLabelInList=function(e){this.highlightElement(this.$(".js-labels-list .card-label").first())},t.prototype.toggleColorBlindMode=function(e){var t;t=i.me(),t.toggleColorBlindMode(),b(this.model.typeName,"Labels Menu","Toggle Color Blind Friendly Mode.")},t.prototype.clickEditLabel=function(e){var t,n;return h.stop(e),t=r(e.target).closest(".js-edit-label"),n=t.attr("data-idLabel"),this.editLabel(n)},t.prototype.selectLabelViaElem=function(e){var t;return t=e.attr("data-idLabel"),this._keepVisible[t]=!0,this.selectLabel(t)},t.prototype.clickLabel=function(e){var t;return h.stop(e),t=r(e.target).closest(".js-select-label"),this.selectLabelViaElem(t)},t.prototype.findElementForLabel=function(e){return this.$(".js-edit-label").filter(function(t){return function(t,n){return r(n).attr("data-idLabel")===e}}(this))},t.prototype.editLabel=function(e){var t,n;return t=this.findElementForLabel(e),n=this.modelCache.get("Label",e),p[this.popOverMethod]({elem:t,view:c,options:{model:n,board:this.board,modelCache:this.modelCache}})},t.prototype.clickAddLabel=function(e){var t;h.stop(e),t=this._searchVal(),p[this.popOverMethod]({elem:this.$(".js-add-label"),view:u,options:{board:this.board,name:t,color:this._nextColor(),onSubmit:function(e){return function(t,n){return e.model.createLabel(t,n),e.clearSearch()}}(this)}})},t.prototype.showMore=function(){return this.labelsToShow+=n,this.renderLabels()},t.prototype.hoverLabel=function(e){this.highlightElement(r(e.target).closest(".card-label"))},t.prototype.keyUp=function(e){var t,n,r;return n=o.getKey(e),n===s.ArrowUp||n===s.ArrowDown?(h.stop(e),void h.navMenuList(this.$(".js-labels-list"),".card-label",n)):n===s.Enter?(r=this._filteredLabels(),r.length>0?(t=this.getHighlightedElement(),t.length>0&&(this.selectLabelViaElem(t),this.clearSearch()),b(this.model.typeName,"Labels Menu","Add By Filter")):this.clickAddLabel()):void 0},t.prototype.clearSearch=function(){return this.$(".js-label-search").val(""),this.renderLabels()},t.prototype._nextColor=function(){var e,t;return t=f.chain(this.board.getLabels()).map(function(e){return e.get("color")}).uniq().value(),null!=(e=f.difference(a.colors,t)[0])?e:""},t.prototype._searchVal=function(){var e,t;return null!=(e=null!=(t=this.$(".js-label-search").val())?t.trim():void 0)?e:""},t.prototype._filteredLabels=function(){var e;return e=this._searchVal().toLowerCase(),f.chain(this.board.getLabels()).filter(function(t){var n,r;return f.isEmpty(e)||(null!=(n=t.get("name"))?n.toLowerCase().indexOf(e):void 0)>-1||0===(null!=(r=t.get("color"))?r.toLowerCase().indexOf(e):void 0)||t.get("color")===l.keyboardIndex[parseInt(e)]}).value()},t}(m)},{}],532:[function(e,t,n){var r,i,o,s,a,u,c=[].slice;r=e("jquery"),i=e("underscore"),s=e(45),a=e(226),u=e(519),o=e(101),t.exports=new(function(){function e(){var e,t,n,r;r=null,n=function(e){return function(){var t;return clearTimeout(r),e.hide("connection"),t=o("alerts.could not connect"),e.showHtml(u.fill("connect_failed",{msg:t}),"error","connectionDead")}}(this),a.on("connect_failed",n),a.on("reconnect_failed",n),t=function(e){return function(){return clearTimeout(r),e.hide("connection"),e.hide("connectionDead")}}(this),e=function(e){return function(){return clearTimeout(r),r=setTimeout(function(){return r=null,e.show("reconnecting","error","connection")},500)}}(this),a.on("reconnect",t),a.on("connecting",e)}return e.prototype._alerts={},e.prototype._hide=function(e){var t;return t=this._alerts[e],(null!=t?t.timeout:void 0)&&clearTimeout(t.timeout),delete this._alerts[e],r("#notification_"+e).remove(),this._showHideContainer()},e.prototype._show=function(e,t,n,i,o){var a,u;return s("alerts","show",e,t,n,i,o),this._hide(i),o&&(u=setTimeout(function(e){return function(){return e.hide(i)}}(this),o)),this._alerts[i]={timeout:u},a=r("<div>").attr("id","notification_"+i).addClass("app-alert-item mod-"+n).appendTo("#notification"),t?a.html(e):a.text(e),this._showHideContainer()},e.prototype._showHideContainer=function(){return r("#notification").toggle(!i.isEmpty(this._alerts))},e.prototype.show=function(){var e,t,n,r;return n=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],Array.isArray(n)?(r=n,n=r[0],t=r[1]):t={},this.showLiteralText.apply(this,[o(["alerts",n],t)].concat(c.call(e)))},e.prototype.showLiteralText=function(e,t,n,r){return this._show(e,!1,t,n,r)},e.prototype.showHtml=function(e,t,n,r){return this._show(e,!0,t,n,r)},e.prototype.flash=function(e,t,n){return this.show(e,t,n,2e3)},e.prototype.hide=function(e){return s("alerts","hide",e),this._hide(e)},e.prototype.hideAll=function(){var e,t;t=[];for(e in this._alerts)t.push(this.hide(e));return t},e}())},{}],533:[function(e,t,n){var r,i,o,s,a,u,c=[].slice;o=e(542),a=e("react"),s=e(436),u=e(101),i="enterprise_dashboard_bulk_actions_progress_display",t.exports=r=function(){function e(e,t,n,r,i){this.element=e,this.modelName=t,this.enterpriseDisplayName=n,this.total=r,this.action=i,this.processed=0,this.results=[],this.currentViewTitle=this._getLocalizedString([this.action,"running"]),this.modelLabel=this._getLocalizedString(["modelLabel"]),this._showProgressDisplayPopover()}return e.prototype.incrementProcessed=function(){return this.processed=this.processed+1,this._showProgressDisplayPopover()},e.prototype.done=function(e){return this.results=e,this.currentViewTitle=this._getLocalizedString([this.action,"done"]),this._showProgressDisplayPopover()},e.prototype._getLocalizedString=function(e){return u(["templates",i].concat(c.call(e)))},e.prototype._showProgressDisplayPopover=function(){return o.show({alignRight:!0,elem:this.element,getViewTitle:function(e){return function(){return e.currentViewTitle}}(this),reactElement:a.createElement(s,{processed:this.processed,total:this.total,modelLabel:this.modelLabel,modelName:this.modelName,results:this.results,enterpriseDisplayName:this.enterpriseDisplayName,onDoneClick:function(){return o.hide()},key:"bulk-action-progress-display-component"})})},e}()},{}],534:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;i=e(542),o=e(129),s=e(522),a=e("underscore"),c=e(519),u=e(101),t.exports=r=function(e){function t(e){var n,r,i,o,s,u,c,l;this.model=e.model,l=e.text,c=e.html,this.elem=e.elem,this.top=e.top,i=e.confirmText,r=e.confirmBtnClass,n=e.cancelText,this.title=e.title,this.template=e.template,this.templateData=e.templateData,o=e.data,u=e.fxConfirm,s=e.fxCancel,this.popOnClick=e.popOnClick,this.popDepth=e.popDepth,null==this.template&&(this.template="confirm"),this.confirm=this._handleClick(u),this.cancel=s?this._handleClick(s):function(){},this.data=a.extend({text:l,html:c,confirmText:i,confirmBtnClass:r,cancelText:n},null!=o?o:{}),null==this.templateData&&(this.templateData={}),t.__super__.constructor.apply(this,arguments)}var n,r;return l(t,e),n=function(e,t){var n,r,i;r=a.clone(e);for(n in t)d.call(t,n)&&(i=t[n],n in r||(r[n]=i()));return r},r=function(e,t){var r;return r=n(t,{title:function(){return u(["confirm",e,"title"],t.templateData)},html:function(){return u(["confirm",e,"text"],t.templateData)},confirmText:function(){return u(["confirm",e,"confirm"],t.templateData)}}),"fxCancel"in r&&!("cancelText"in r)&&(r.cancelText=u(["confirm",e,"cancel"],t.templateData)),r},t.toggle=function(e,t){return t=1===arguments.length?e:r(e,t),i.toggle({elem:t.elem,top:t.top,view:this,options:t})},t.pushView=function(e,t){return t=1===arguments.length?e:r(e,t),i.pushView({view:this,options:t})},t.prototype.getViewTitle=function(){return this.title},t.prototype.events={"click .js-confirm":"confirm","click .js-cancel":"cancel"},t.prototype.render=function(){return this.$el.html(c.fill(this.template,this.data,{},{member:c.member})),this},t.prototype._handleClick=function(e){return function(t){return function(n){return o.stop(n),t.popOnClick?i.popView(t.popDepth):i.hide(),"function"==typeof e&&e(n),t.remove(),!1}}(this)},t}(s)},{}],535:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p;r=e(6),o=e(81),a=e("bluebird"),u=e(114),c=e(104),l=e("underscore"),p=e("xtend"),s=null!=(d=window.Notification)?d:{permission:"denied"},t.exports=i=function(){function e(t){this.model=t,(e.enabled()||window.fluid)&&this.model.get("unread")&&(this.localNotification()?this.show():setTimeout(this.show.bind(this),i))}var t,n,i,c;return n=100,i=1e3,t=1e4,e.enabled=function(){return"granted"===s.permission},e.denied=function(){return"denied"===s.permission},e.notEnabled=function(){return"default"===s.permission},e.requestPermission=function(){return new a(function(e,t){var n;return n=s.requestPermission,n?n(function(n){return"denied"===n?t(n):e(n)}):t("denied")})},e.prototype.show=function(){return this.getLock(function(e){return function(){var n,r,i,o,a,u;return o=e.render(),u=o.title,n=o.body,r=o.icon,a=o.tag,window.fluid?window.fluid.showGrowlNotification({title:u,priority:1,sticky:!1,description:n,icon:r}):(i=new s(u,{body:n,icon:r,tag:a}),i.model=e.model,i.addEventListener("click",e.clickHandler.bind(e)),setTimeout(function(){return i.close()},t))}}(this))},c=function(e){switch(e.type){case"relDate":return e.current;case"comment":case"attachmentPreview":return"";default:return e.text}},e.prototype.render=function(){var e,t,n,r,i,s,a;return n=new o("notification").getEntities(this.model.get("display")),a=l.chain(n).map(c).compact().value().join("").trim(),t=l.find(n,function(e){return"comment"===e.type}),e=null!=t?t.text:"",i=this.model.getMember(),r="/favicon.ico",(null!=i?i.avatarHash:void 0)&&(r=[window.avatarDomain,i.avatarHash,"50.png"].join("/")),s=this.model.id,{title:a,body:e,icon:r,tag:s}},e.prototype.clickHandler=function(e){var t,n,i;return t=this.model.get("data"),this.model.markRead(),e.target.close(),this.localNotification()?(this.model.navigateToView()||r.memberNotificationsView(),window.focus()):(i=this.model.getUrlOfTarget(),n=window.open(i),null!=n?n.focus():window.location=i)},e.prototype.localNotification=function(){var e;return e=this.model.get("data"),l.any(l.invoke([function(){var t;return r.onBoardView(null!=(t=e.board)?t.id:void 0)},function(){var t;return r.onOrganizationView(null!=(t=e.organization)?t.id:void 0)},function(){return 0===location.pathname.indexOf(r.getMemberNotificationsUrl())}],"call"))},e.prototype.getLock=function(e){var r,i;return r="notification_lock_"+this.model.id,u.get(r)?void 0:(i=Math.random(),u.set(r,i),setTimeout(function(t){return function(){return u.get(r)===i?e():void 0}}(this),n),setTimeout(function(e){return function(){return u.unset(r)}}(this),t))},e}()},{}],536:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f;r=e("jquery"),i=e(6),s=e(20),a=e(539),u=e(540),c=e(542),l=e(276),d=e(520),p=e(129),h=e(151),m=e("underscore"),f=e(519),t.exports=o=new(function(){function e(){}var t,n,g,v;return v=e,n=null,t=null,g=null,e.prototype.shortcut=function(e){switch(e){case s.Escape:return this.hide(),["Esc - Hide Dialog","Dialog"]}},e.prototype.init=function(){n=r(".window"),t=n.find(".window-wrapper"),t.addClass("js-tab-parent"),this.scrolltop=0,this.isVisible=!1,this.displayType=null,this.lastScroll=0,r(".window-overlay").on("scroll mousedown keydown",function(e){return function(t){return e.lastScroll=Date.now()}}(this))},e.prototype.scrolledSince=function(e){return this.lastScroll>e},e.prototype.calcPos=function(e){var t,r;r=h.fSmall?"auto":null!=e?e:this._lastArgs.maxWidth,n.css({width:r}),null!=(null!=(t=this.view)?t.setFixedSidebarLeftPos:void 0)&&o.isVisible&&this.view.setFixedSidebarLeftPos(),o.isVisible||n.show()},e.prototype.show=function(e){var s;this._lastArgs=e,this.isVisible&&this.hide(e.isNavigating),a.cancelEdits(),c.hide(),u.close(),l.hideUnpinnedSidebar(),g=e.hide,this.scrolltop=r(window).scrollTop(),r("body").addClass("window-up"),null!=(s=i.getCurrentBoard())&&s.composer.save("vis",!1),r("body").find(".js-disable-on-dialog:not([disabled])").addClass("disabled-for-dialog").attr("disabled","disabled"),null!=e.displayType&&(n.addClass(e.displayType),this.displayType=e.displayType),t.empty().append(f.fill("dialog_close_button")),null!=e.maxWidth?this.calcPos(e.maxWidth):this.calcPos(""),e.view?(this.view=e.view,t.append(this.view.el),this.view.render(),this.view.delegateEvents(),d.addHandler(this.view,{scope:"dialog_view"})):e.html&&(this.view=null,t.append(e.html)),this.isVisible=!0,this.lastScroll=0,m.defer(function(e){return function(){return r(".window").css({height:1e5}),r(".window-overlay").scrollTop(1),r(".window-overlay").scrollTop(0),r(".window").css({height:""})}}(this)),n.find(".js-autofocus:first,.focus-dummy").focus().select(),n.find("input[type=submit]").click(function(e){p.preventDefault(e)}),n.find(".js-close-window").click(function(e){p.stop(e),o.hide(null,!0)}),d.addHandler(this,{scope:"dialog",modal:!0})},e.prototype.hide=function(e,t){(this.isVisible&&!a.isEditing()&&!r(".new-comment").hasClass("focus")||t)&&(this._lastArgs=null,"function"==typeof g&&g(e),g=null,null!=this.view&&(d.removeHandler(this.view),n.removeClass(this.displayType),this.displayType=null,this.view.remove(),this.view=null),d.removeHandler(this),n.hide(),r("body").removeClass("window-up"),m.defer(function(e){return function(){return r(window).scrollTop(e.scrolltop),e.scrolltop=0}}(this)),this.isVisible=!1,r(".window-overlay").off("scroll.fixSidebar"),r(".disabled-for-dialog").removeAttr("disabled"),c.hide(),this.clear())},e.prototype.clear=function(){t.width(""),t.empty()},e}()),r(function(){return o.init()})},{}],537:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=[].slice;r=e("jquery"),i=e(79),o=e(6),u=e(542),c=e(544),l=e(276),d=e(129),p=e("underscore"),C=e(48),_=function(e,t){var n,r,i;return i=e.x,n=t.left,r=t.right,i>=n&&r>i},y=function(e,t,n){var r,i,o,s;return s=e.top,i=e.left,r=e.bottom,o=e.right,{top:s+n,bottom:r-n,left:i+t,right:o-t}},g=function(e){return{x:e.pageX,y:e.pageY}},h=function(){var e;return e=1<=arguments.length?x.call(arguments,0):[],function(){var t,n,r;for(n=0,r=e.length;r>n;n++)t=e[n],null!=t&&t.apply(this,arguments)}},k=function(e,t){return h(t,e)},s=function(){function e(e){this.scrollBoard=e.scrollBoard,this.scrollLists=e.scrollLists,this.commitEvent=e.commitEvent,this.cancelMethod=e.cancelMethod,this._queue=[]}return e.prototype.hasMousedLeft=!1,e.prototype.hasMousedRight=!1,e.prototype.stopped=!1,e.prototype.aborted=!1,e.prototype.start=function(e,t){this.$helper=t.helper,this.$target=r(e.target),this.initialMousePosition=g(e),this.lockModelCache(),l.hideSidebar(),this.startTrackingMouse(),this.hidePopoversForSomeReason(),this.boardElement=r("#board")[0],this.boardCanvasElement=r(".board-canvas")[0],this.cachedHoveredList=this.getHoveredListForPoint(this.initialMousePosition),(this.scrollLists||this.scrollBoard)&&this.startAutoscrolling(),a.sorting=!0,this.onStop(function(){return p.defer(function(){return a.sorting=!1})})},e.prototype.lockModelCache=function(){var e,t;if(t=o.getCurrentModelCache(),null==t)throw new Error("Attempt to use DragInfo on a page with no modelCache!");return e=t.lock("DragSort.startSort"),this.onStop(function(){return t.unlock(e)})},e.prototype.hidePopoversForSomeReason=function(){0===this.$target.closest(".pop-over").length&&u.hide()},e.prototype.startAutoscrolling=function(){var e,t;return e=Math.floor(1e3/60),t=setInterval(this.autoscroll.bind(this),e),this.onStop(function(){return clearInterval(t)})},e.prototype.getHoveredListForPoint=function(e){var t,n,i,o;for(o=r(".js-list"),n=0,i=o.length;i>n;n++)if(t=o[n],_(e,t.getBoundingClientRect()))return r(t).find(".list-cards")[0];return null},e.prototype.startTrackingMouse=function(){var e,t;return t=p.throttle(function(e){return function(t){return e.stopped?void 0:e.cachedHoveredList=e.getHoveredListForPoint(t)}}(this),100),e=20,r(document).on("mousemove.dragsort",function(n){return function(r){var i;i=g(r),i.x<n.initialMousePosition.x-e&&(n.hasMousedLeft=!0),i.x>n.initialMousePosition.x+e&&(n.hasMousedRight=!0),t(i)}}(this)),this.onStop(function(){return r(document).off("mousemove.dragsort")})},e.prototype.onStop=function(e){return this._queue.push(e)},e.prototype.stop=function(e,t){var n,r,i,o;for(this.stopped=!0,o=this._queue,r=0,i=o.length;i>r;r++)n=o[r],n.call(this);delete this._queue,this.aborted||this.$target.trigger(this.commitEvent,t)},e.prototype.scrollDeltaForOverhang=function(e){return.1*e},e.prototype.autoscrollBoard=function(){var e,t,n,r,i,o;n=this.$helper[0].getBoundingClientRect(),e=n.left,r=n.right,o=y(this.boardCanvasElement.getBoundingClientRect(),100,0),t=o.left-e,t>0&&this.hasMousedLeft&&(this.boardElement.scrollLeft-=this.scrollDeltaForOverhang(t)),i=r-o.right,i>0&&this.hasMousedRight&&(this.boardElement.scrollLeft+=this.scrollDeltaForOverhang(i))},e.prototype.autoscrollLists=function(){var e,t,n,r,i,o;n=this.$helper[0].getBoundingClientRect(),i=n.top,e=n.bottom,r=y(this.cachedHoveredList.getBoundingClientRect(),0,50),o=r.top-i,o>0&&(this.cachedHoveredList.scrollTop-=this.scrollDeltaForOverhang(o)),t=e-r.bottom,t>0&&(this.cachedHoveredList.scrollTop+=this.scrollDeltaForOverhang(t))},e.prototype.autoscroll=function(){this.scrollBoard&&this.autoscrollBoard(),this.scrollLists&&null!=this.cachedHoveredList&&this.autoscrollLists()},e.prototype.abort=function(){var e;return this.aborted=!0,null!=(e=r.ui.ddmanager.current)&&(e.currentContainer=e),this.$target[this.cancelMethod]("cancel")},e}(),m=null,w=function(e,t){return t=p.defaults({},t,{distance:7,scroll:!1}),e.scrollLists&&(t.custom={refreshContainers:function(){var e,t,n,i;this.containers=function(){var o,s,a,u,c,l,d;for(c=this.containers,d=[],o=0,a=c.length;a>o;o++)if(e=c[o],r.contains(document,e.element[0])){for(t=e.element.closest(".js-list")[0],i=t.getBoundingClientRect(),l=["left","top","width","height"],s=0,u=l.length;u>s;s++)n=l[s],e.containerCache[n]=i[n];d.push(e)}return d}.call(this)}}),t.start=k(t.start,function(t,n){if(null!=m)throw new Error("Attempt to start a drag event while another is in progress!");m=new s(e),m.start(t,n)}),t.stop=k(t.stop,function(e,t){d.stopPropagation(e),m.stop(e,t),m=null}),t},f=function(e){return{width:e.outerWidth(),height:e.outerHeight()}},b=function(e,t,n){var o,s;i.isTouch()||(o=null,s=!("helper"in n)||"original"===n.helper,n.start=k(n.start,function(e,r){var i,a,u,c;s&&"appendTo"in n&&(r.helper.appendTo(n.appendTo),o.sortable("refreshPositions",!0)),u=(null!=(a=t.calcSize)?a:f)(r.item),c=u.width,i=u.height,r.placeholder.width(c),r.placeholder.height(i)}),t=p.extend({commitEvent:"sortcommit",
cancelMethod:"sortable"},t),n=w(t,n),c.enqueue(function(){return o=r(e),o.sortable(n)}))},v=function(e,t,n){i.isTouch()||(t=p.extend({commitEvent:"dragcommit",cancelMethod:"draggable"},t),n=w(t,n),c.enqueue(function(){return r(e).draggable(n)}))},t.exports=a={refreshListSortable:function(){return b(".js-list-sortable",{scrollBoard:!0,scrollLists:!1,calcSize:function(e){var t;return t=e.children(".list"),{width:t.outerWidth(),height:t.outerHeight()}}},{handle:".list-header",tolerance:"pointer",placeholder:"list-wrapper placeholder",items:".js-list",appendTo:"body"})},refreshCalendarCardSortable:function(){return b(".js-calendar-sortable",{scrollBoard:!1,scrollLists:!1},{connectWith:".js-calendar-sortable",placeholder:"list-card placeholder-none",items:".list-card:not(.placeholder-none, .hide, .js-composer)",appendTo:".calendar-drag-area",over:function(e,t){return r(e.target).closest(".calendar-day").addClass("drop")},out:function(e,t){return r(e.target).closest(".calendar-day").removeClass("drop")}})},refreshListCardSortable:function(){return b(".js-sortable",{scrollBoard:!0,scrollLists:!0},{connectWith:".js-sortable",placeholder:"list-card placeholder",items:".list-card:not(.placeholder, .hide, .js-composer)",appendTo:"body"})},refreshDraggableSidebarMembers:function(){return v(".js-list-draggable-board-members .member:not(.js-member-deactivated)",{scrollBoard:!0,scrollLists:!0},{revert:"invalid",revertDuration:150,appendTo:"body",zIndex:100,helper:"clone",start:function(e,t){C("Board Menu","Drag Member from Sidebar"),r(".list-card.active-card").removeClass("active-card")}})},refreshDraggableStickers:function(){return v(".js-draggable-sticker:not(.disabled)",{scrollBoard:!0,scrollLists:!0},{revert:"invalid",revertDuration:150,appendTo:"body",zIndex:100,helper:"clone",start:function(e,t){var n;C("Board Menu","Drag Sticker from Sidebar"),n=20*Math.random()-10,t.helper.find(".sticker-select-fixed").css({transform:"rotate("+n+"deg)","-webkit-transform":"rotate("+n+"deg)"})}})},abort:function(){if(null==m)throw new Error("Abort called while not dragging!");return m.abort()},refreshIfInitialized:function(e){return(null!=e?e.hasClass("ui-sortable"):void 0)?e.sortable("refresh"):void 0}}},{}],538:[function(e,t,n){var r,i,o,s;i=e(234).Events,r=e("jquery"),s=e("underscore"),t.exports=o=function(){function e(e,t){var n;this.options=s.extend({scrollableContainer:"#content",threshold:.75,debounce:50},null!=t?t:{}),this.$scrollableContainer=r(this.options.scrollableContainer),this.$listElement=r(e),this.reset(),n=s.debounce(this._onScroll.bind(this),this.options.debounce),this.$scrollableContainer.scroll(n)}return s.extend(e.prototype,i),e.prototype.destroy=function(){return this.$scrollableContainer.off("scroll")},e.prototype._scrollBottom=function(){return this.$scrollableContainer.height()-(this.$listElement.offset().top-this.containerOffset)},e.prototype._listHeight=function(){return this.$listElement.height()},e.prototype._onScroll=function(){var e;if(!this.locked)return e=this._scrollBottom(),e/this._listHeight()>this.options.threshold?(this.locked=!0,this.trigger("nearEnd")):this.previousScrollBottom=e},e.prototype.reset=function(){return this.locked=!1,this.containerOffset=this.$scrollableContainer.offset().top,this.previousScrollBottom=this._scrollBottom(),this._onScroll()},e}()},{}],539:[function(e,t,n){var r,i,o,s;r=e("jquery"),i=e(234),o=e(114),s=e("underscore"),t.exports=new(function(){function e(){}return s.extend(e.prototype,i.Events),e.prototype.cancelEdits=function(e){var t;return r(".edit-controls:not(.keep)").remove(),r(".editing").removeClass("editing"),r(".is-editing").removeClass("is-editing"),r(".is-focused").removeClass("is-focused"),r(".checklist-new-item").removeClass("focus"),r("input").not(e||"none").blur(),r("textarea").not(e||"none").blur(),this.trigger("cancelEdits"),t=r(".editable"),t.length>0?t.each(function(e){var t,n,i,s,a,u,c;return i=r(".editable")[e],c=r(i).find(".edits-warning:first"),t=r(i).find(".current:first"),s=r(i).find(".field:first"),n=s.data("draftKey"),a=null!=(u=t.data("unmarkeddown"))?u!==s.val():s.val()!==t.text(),a&&""!==s.val()&&null!=n?(o.set(n,s.val()),c.show()):void 0}):void 0},e.prototype.isEditing=function(){return r(".editing").length+r(".checklist-new-item.focus").length+r(".is-focused").length>0},e}())},{}],540:[function(e,t,n){var r,i,o,s,a,u,c,l,d;r=e("jquery"),i=e(536),o=e(20),a=e(678),u=e(542),c=e(276),l=e(520),d=e(129),t.exports=s=new(function(){function e(){}return e.modalView=null,e.prototype.shortcut=function(e){switch(e){case o.Escape:return this.close(),["Esc - Hide Plugin Modal","Plugin Modal"]}},e.prototype.isOpen=function(){return null!=this.modalView},e.prototype.open=function(e){var t,n;n=e.model,t=e.content,u.hide(),c.hideUnpinnedSidebar(),i.isVisible&&i.hide(!0),null!=this.modalView&&this.close(),this.modalView=new a({model:n,content:t}),r(".pop-over").before(this.modalView.render().el),this.modalView.$el.find("a[data-index].plugin-chrome-header-action").click(function(e){var n,i;i=parseInt(r(e.currentTarget).attr("data-index"),10),n=t.actions[i],null!=n&&"function"==typeof n.callback&&n.callback({el:e.currentTarget})}),this.modalView.$el.find(".js-close-plugin-chrome").click(function(e){d.stop(e),s.close()}),this.modalView.$el.click(function(e){r(e.target).closest(".plugin-chrome-wrapper").length||r(".pop-over.is-shown").length||s.close()}),l.addHandler(this,{scope:"plugin_modal",modal:!0})},e.prototype.close=function(){null!=this.modalView&&(this.modalView.close(),this.modalView=null)},e}())},{}],541:[function(e,t,n){var r,i,o,s,a,u;s=e(238),i=e("react"),r=e("bluebird"),a=e(514)("popover"),u=e("xtend"),o=e("underscore"),t.exports=i.createClass({displayName:"Popover",getInitialState:function(){return{title:""}},componentDidMount:function(){return this.updateTitle(this.props)},componentWillReceiveProps:function(e){var t;return null!=(t=this._titlePromise)&&t.cancel(),this.updateTitle(e)},updateTitle:function(e){return this._titlePromise=r.resolve(e.getViewTitle()).cancellable().then(function(e){return function(t){return e.isMounted()?e.setState({title:t}):void 0}}(this)).catch(r.CancellationError,function(){})},componentWillUnmount:function(){var e;return null!=(e=this._titlePromise)?e.cancel():void 0},render:a.renderable(function(){var e,t,n,r,u;return u=this.props,t=u.hideHeader,n=u.onBack,r=u.onClose,e=u.children,a.div(function(u){return function(){return t||a.div(".pop-over-header.js-pop-over-header",function(){return null!=n&&a.a(".pop-over-header-back-btn.icon-sm.icon-back.is-shown",{onClick:n,href:"#"}),a.span(".pop-over-header-title",function(){return a.text(u.state.title)}),a.a(".pop-over-header-close-btn.icon-sm.icon-close",{onClick:r,href:"#"})}),a.div(function(){var t,n,r;return r={className:"pop-over-content js-pop-over-content u-fancy-scrollbar js-tab-parent"},t=function(e,t){return o.chain(null!=t?t.split(" "):void 0).union(e.split(" ")).value().join(" ")},n=function(e,n){return i.cloneElement(n,{className:t("js-popover-pushed hide",n.props.classNames)})},e=o.chain(e).initial().map(s(n,"js-popover-pushed hide")).value().concat(o.last(e)),a.addElement(i.createElement("div",r,e))})}}(this))})})},{}],542:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b;r=e("jquery"),i=e(79),v=e(238),o=e(20),s=e(539),a=e(541),u=e("bluebird"),m=e(522),c=e("react"),l=e("react-dom"),p=e(520),h=e(129),f=e(151),d=e(108),b=e("xtend"),g=e("underscore"),t.exports=new(function(){function e(){this.argsStack=[],this.position={},this.isVisible=!1,this.hardToClose=!1,r(function(e){return function(){return t=r(".pop-over")}}(this))}var t,n,u,h;return t=null,n=null,u=null,h=null,e.prototype.shortcut=function(e,t){switch(e){case o.Escape:return this.popView(),t.stopImmediatePropagation(),["Esc - Pop Pop-over View","Pop Over"]}},e.prototype.contains=function(e){return r.contains(t[0],e)},e.prototype.toggledBy=function(e){return g.any(this.argsStack,function(t){return t.elem===e})},e.prototype.onWindowResize=function(){return this.isVisible?this.load(this.argsStack.pop()):void 0},e.prototype.calcPos=function(e){var n,i,o,s,a,u,c,l,d,p,h,m,v,b,y,w;return w=r(window).width(),y=r(window).height(),null!=e.maxWidth?e.maxWidth>w?t.width(w-16):t.width(e.maxWidth):t.width(""),a=w,b=y,h=t.outerWidth(),s=null!=e.elem&&r(e.elem).is(":visible"),s?(v=null!=e.top?e.top:null!=e.elem?r(e.elem).outerHeight()+6:35,n=e.alignRight?r(e.elem).offset().left+r(e.elem).outerWidth()-h:r(e.elem).offset().left,o=r(e.elem).offset().top+v):null!=e.clientx&&null!=e.clienty&&(n=e.clientx,o=e.clienty),u=b-68,e.hideHeader||(u-=t.find(".js-pop-over-header").outerHeight()),null!=e.clientx&&null!=e.clienty||s&&g.include(["block","inline-block","inline","table-cell","flex"],r(null!=e?e.elem:void 0).css("display"))?(p=o>0?o:5,l=t.outerHeight(),c=p+l,(f.fLarge||f.fExtraLarge)&&(m=y+r(window).scrollTop(),c>m&&(p=m-l-8),l>m-44&&(p=44)),d=n>0?n:5,i=d+h+16,i>a&&(d=a-(h+5)),{left:d,top:p,contentHeight:u}):void 0},e.prototype.load=function(e){var n,r,i,o;if(this.view=e.view,this.hardToClose=e.hardToClose,t.addClass(e.displayType),!c.isValidElement(e.reactElement))throw new Error("PopOver args.reactElement has to be a react element");return n=(null!=(o=g.last(this.argsStack))?o.keepInDOM:void 0)?(r=g.chain(this.argsStack).filter(function(e){return e.keepInDOM}).pluck("reactElement").value(),r.concat(e.reactElement)):[e.reactElement],i={key:"PopOver",onBack:this.argsStack.length>0?function(e){return function(){return e.popView()}}(this):null,onClose:v(this,"hide"),getViewTitle:e.getViewTitle,hideHeader:e.hideHeader},this.por=l.render(c.createElement(a,i,n),t[0]),g.defer(function(n){return function(){var r;return n.position=null!=(r=n.calcPos(e))?r:n.position,t.css({left:n.position.left,top:n.position.top}),t.find(".js-pop-over-content").css({maxHeight:n.position.contentHeight}),t.addClass("is-shown")}}(this)),this.argsStack.push(e)},e.prototype.extractViewArgs=function(e){var t,n;if(null!=e.reactElement)return e;if(null==e.view&&(e={view:e}),g.isFunction(e.view)&&(e.view=new e.view(null!=(n=e.options)?n:{})),!(e.view instanceof m))throw new Error("PopOver args.view has to be a backbone instance");return t=function(e,t){return g.isFunction(e[t])?v(e,t):void 0},e.reactElement=c.createElement(d,{key:e.view.cid,view:e.view}),b({maxWidth:e.view.maxWidth,displayType:e.view.displayType,keepInDOM:e.view.keepInDOM,hideHeader:e.view.hideHeader,getViewTitle:t(e.view,"getViewTitle"),willBePushedDown:t(e.view,"willBePushedDown"),willBePopped:t(e.view,"willBePopped")},e)},e.prototype.show=function(e){e.keepEdits||s.cancelEdits(e.elActive),this.reset(),this.load(this.extractViewArgs(e)),g.defer(function(e){return function(){if(t.find(".js-autofocus").length>0){if(i.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return t.find(".js-autofocus:first").focus().select()}}}(this)),this.isVisible=!0,"function"==typeof e.shown&&e.shown(t),u=e.hidden,this.positionInterval=setInterval(this.checkPosition.bind(this),150),p.addHandler(this,{scope:"popover",modal:!0})},e.prototype.checkPosition=function(){var e,n,i,o,s;return this.isVisible?(i=t.offset().top,s=r(window).scrollTop(),i!==s?(o=r(window).height(),n=t.outerHeight(),s>i&&o>=n?void t.css({top:s}):i+n>s+o&&(e=s+Math.max(0,o-n),e!==i)?t.css({top:e}):void 0):void 0):void clearInterval(this.positionInterval)},e.prototype.pushView=function(e){var n;if(this.clearDisplayTypes(),n=g.last(this.argsStack),null!=n&&"function"==typeof n.willBePushedDown&&n.willBePushedDown(),this.load(this.extractViewArgs(e)),t.find(".js-autofocus").length>0){if(i.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return setTimeout(function(e){return function(){return t.find(".js-autofocus:first").focus().select()}}(this),10)}},e.prototype.popView=function(e){var n,r,o,s,a,u;for(null==e&&(e=1),this.clearDisplayTypes(),n=r=0,s=e;s>=0?s>r:r>s;n=s>=0?++r:--r)if(o=g.last(this.argsStack),null!=o&&"function"==typeof o.willBePopped&&o.willBePopped(),null!=o&&null!=(a=o.reactElement.props)&&null!=(u=a.view)&&u.remove(),this.argsStack.pop(),null==g.last(this.argsStack))return void this.hide();if(this.load(this.argsStack.pop()),t.find(".js-autofocus").length>0){if(i.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return setTimeout(function(e){return function(){return t.find(".js-autofocus:first").focus().select()}}(this),10)}},e.prototype.toggle=function(e){var t;return t=function(e,t){return e&&t&&r(e)[0]===r(t)[0]},g.last(this.argsStack)&&t(g.last(this.argsStack).elem,e.elem)?this.hide():this.show(e)},e.prototype.hide=function(){return clearInterval(this.positionInterval),t.removeClass("is-shown"),this.reset(),l.unmountComponentAtNode(t[0])},e.prototype.reset=function(){var e,n,r,i,o;for(this.clearDisplayTypes(),r=this.argsStack,n=r.length-1;n>=0;n+=-1)e=r[n],"function"==typeof e.willBePopped&&e.willBePopped(),null!=(i=e.reactElement.props)&&null!=(o=i.view)&&o.remove();return p.removeHandlerScope("popover_view"),p.removeHandler(this),this.view=null,this.argsStack=[],this.isVisible=!1,this.hardToClose=!1,"function"==typeof u&&u(t),u=null},e.prototype.clearDisplayTypes=function(){return t.removeClass("mod-mini-profile mod-avdetail mod-search-over mod-notifications")},e}())},{}],543:[function(e,t,n){var r;t.exports=r=function(){function e(e,t,n,r){null==t&&(t="Trello"),null==n&&(n=450),null==r&&(r=700),this.url=e,this.windowName=t,this.width=n,this.height=r}return e.prototype.open=function(){var e,t;return e=window.screenX+(window.innerWidth-this.width)/2,t=window.screenY+(window.innerHeight-this.height)/2,this.popup=window.open(this.url,this.windowName,"width="+this.width+",height="+this.height+",top="+t+",left="+e)},e}()},{}],544:[function(e,t,n){var r,i=[].slice;r=e("underscore"),t.exports=new(function(){function e(){this.holding=!1,this.fxs={},this._unnamed=0}return e.prototype.hold=function(){return this.holding=!0},e.prototype.enqueue=function(){var e,t,n,r;e=2<=arguments.length?i.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],r=e[0],null==r&&(r="unnamed_"+this._unnamed++),this.holding?this.fxs[r]=t:t({immediate:!0,delayed:!1})},e.prototype.release=function(){var e;this.holding=!1,e=this.fxs,this.fxs={},r.defer(function(){var t,n;for(n in e)(t=e[n])({immediate:!1,delayed:!0})})},e}())},{}],545:[function(e,t,n){var r,i,o;r=e("jquery"),o=e(519),t.exports=i=new(function(){function e(){this.tooltip=null}return e.prototype.show=function(e,t,n,i){var s,a,u,c,l,d;return null==n&&(n=!0),null==i&&(i=this.STYLE.DEFAULT),r(window).on("click",t[0],this.windowClick),clearTimeout(this.emptyTimer),"function"==typeof e.renderOnce&&(e=e.renderOnce().$el.html()),s=r(o.fill("tooltip_content",{tooltipHtml:e,closeable:n,style:i})),a=r("."+this.TOOLTIP_CONTAINER).attr("class",this.TOOLTIP_CONTAINER),i!==this.STYLE.DEFAULT&&a.addClass("tooltip-"+i),a.html(s),this.tooltip={tooltipHtml:e,$anchor:t,$elem:s},d=t.offset(),c=d.left,l=d.top,u=t.outerHeight(),a.css({left:Math.max(c-5,5),top:Math.max(l+u,5)}),s.addClass("active")},e.prototype.windowClick=function(e){var t;return t=r(e.target),e.target!==e.data&&0===t.closest(".js-tooltip-content").length||0!==t.closest(".js-tooltip-close-button").length?i.hide():void 0},e.prototype.hide=function(){var e;return this.tooltip=null,e=r("."+this.TOOLTIP_CONTAINER),e.find(".tooltip-content").removeClass("active"),this.emptyTimer=setTimeout(function(t){return function(){return e.empty()}}(this),300),r(window).off("click",this.windowClick)},e.prototype.STYLE={DEFAULT:"default",MENU:"menu",BILLING:"billing"},e.prototype.TOOLTIP_CONTAINER="tooltip-container",e}())},{}],546:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),o=e(542),s=e(129),a=e(522),u=e(519),c=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="js-add-list list-wrapper mod-add is-idle",t.prototype.initialize=function(){return this.listenTo(this.model.viewState,"change:listComposerOpen",this.frameDebounce(this.renderListComposer))},t.prototype.events={"click .js-open-add-list":"setOpen","click .js-cancel-edit":"setClose",submit:"addList"},t.prototype.render=function(){var e;return e=this.model.toJSON({board:!0}),this.$el.html(u.fill("list_add",e)),this.renderListComposer(),this.model.editable()&&this.$el.removeClass("fade hide"),this},t.prototype.setOpen=function(e){s.stop(e),this.model.viewState.set("listComposerOpen",!0)},t.prototype.setClose=function(e){s.stop(e),this.model.viewState.set("listComposerOpen",!1)},t.prototype.renderListComposer=function(){return this.model.viewState.get("listComposerOpen")?this.renderOpen():this.renderClose()},t.prototype.renderOpen=function(e){s.stop(e),this.$el.removeClass("is-idle"),this.defer(function(e){return function(){return e.$(".list-name-input").blur().focus().select()}}(this)),o.hide()},t.prototype.renderClose=function(e){s.stop(e),this.$el.addClass("is-idle")},t.prototype.addList=function(e){var t,n,r,i;return s.stop(e),t=this.$(".list-name-input"),r=this.model.listList,i=r.length+1,n=t.val().trim(),""===n?void t.focus().select():(this.model.listList.create({name:n,pos:this.model.calcPos(i),closed:!1},{success:function(e){return function(e){return c("Board View","Add List - via Inline List Composer")}}(this)}),t.val(""),void this.renderOpen())},t}(a)},{}],547:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),o=e(542),s=e(522),a=e("underscore"),u=e(519),c=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="move all cards in list",t.prototype.events={"click .js-select-list":"selectList"},t.prototype.render=function(){var e,t,n,r,i,o;for(t=this.model.toJSON(),t.lists=[],o=this.model.getBoard().listList.models,n=0,r=o.length;r>n;n++)i=o[n],e=a.clone(i.toJSON()),e.id===this.model.id&&(e.current=!0),t.lists.push(e);return this.$el.html(u.fill("list_bulk_card_move",t)),this},t.prototype.selectList=function(e){var t,n,i,s,u,l,d;if(t=r(e.target).closest(".js-select-list"),d=t.attr("name"),!t.hasClass("disabled")){for(l=this.modelCache.get("List",d),c("Card","Moved in Bulk via List Menu"),i=a.clone(this.model.openCards().models),s=0,u=i.length;u>s;s++)n=i[s],n.moveToList(l,1e3);o.hide()}},t}(s)},{}],548:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(97),i=e(20),s=e(542),a=e(129),u=e(522),c=e(519),l=e(48),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="copy list",t.prototype.tagName="form",t.prototype.events={"click .js-submit":"submit",submit:"submit",'keydown textarea[name="name"]':"keydownEvent"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(c.fill("list_copy",e,{editable:this.model.editable()})),this},t.prototype.keydownEvent=function(e){r.getKey(e)===i.Enter&&(a.stop(e),this.submit(e))},t.prototype.submit=function(e){var t,n,r,i;return a.stop(e),r=this.$('textarea[name="name"]'),""===r.val().trim()?void r.focus().select():(t=this.model.getBoard(),n=t.listList.calcPos(this.model.getIndexInList()+1,this.model,!0),i={idListSource:this.model.id,idBoard:this.model.get("idBoard"),pos:n,name:r.val().trim(),closed:!1},t.listList.create(i),s.hide(),void l("List","Copy List"))},t}(u)},{}],549:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(491),i=e(537),o=e(546),a=e(552),u=e(544),l=e(76),c=e("underscore"),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewType=a,t.prototype.initialize=function(e){return this.resetCallback=e.resetCallback,t.__super__.initialize.apply(this,arguments),l(null!=this.resetCallback),this.listenTo(this.collection,{reset:this.resetCallback,"change:idBoard":this.boardChange})},t.prototype.render=function(){var e,t;return e=Math.max(3,Math.ceil(window.innerWidth/270)),t=this.getModels().map(function(t){return function(n,r){return t.subview(t.viewType,n,{deferCards:r>=e})}}(this)),this.model.editable()&&t.push(this.subview(o,this.model)),this.ensureSubviews(t),this.resetCallback()},t.prototype.boardChange=function(e,t){return t!==this.collection.board.get("id")?(this.collection.remove(e),i.refreshIfInitialized(this.$el)):void 0},t.prototype.addModel=function(){return t.__super__.addModel.apply(this,arguments),this.resetCallback()},t.prototype.removeSubview=function(){t.__super__.removeSubview.apply(this,arguments),i.refreshListCardSortable()},t.prototype.insertSubview=function(e){t.__super__.insertSubview.apply(this,arguments),e.$el.find(".ui-sortable").length>0?i.refreshIfInitialized(this.$el):i.refreshListCardSortable()},t}(r)},{}],550:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty,_=[].slice;r=e(534),i=e(547),o=e(548),a=e(551),u=e(542),c=e("bluebird"),l=e(129),d=e(522),g=e(826),b=e(48),p=e("underscore"),h=function(e){var t,n,r,i,o,s,a,u,c;for(s=e.list,u=e.posBefore,a=e.posAfter,r=e.count,c=[],n=i=0,o=s.length;o>i;n=++i)t=s[n],c.push({card:t,pos:u+(n+1)*(a-u)/(s.length+1)});return c},f=function(e,t){var n,r;return r=e.length-1,p.flatten(function(){var i;for(i=[];r>=0;){for(n=r,r--;r>=0&&t[e[r].id]>t[e[n].id];)r--;i.push(h({list:e.slice(r+1,n),posBefore:r>=0?t[e[r].id]:0,posAfter:t[e[n].id]}))}return i}())},m=function(e,t){var n,r;return n=0,p.flatten(function(){var i;for(i=[];n<e.length;){for(r=n,n++;n<e.length&&t[e[n].id]<t[e[r].id];)n++;i.push(h({list:e.slice(r+1,n),posBefore:t[e[r].id],posAfter:n<e.length?t[e[n].id]:t[e[r].id]+l.spacing*(n-r)}))}return i}())},v=function(e,t){var n,r,i,o;return r=t.fx,o=t.updatesPerMinute,n=t.concurrency,i=n*(6e4/o),c.map(e,function(e){var t;return t=Date.now(),c.resolve(r(e)).then(function(){var e;return e=i-(Date.now()-t),e>0?c.delay(e):void 0})},{concurrency:n})},t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="list actions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:subscribed",this.frameDebounce(this.render))},t.prototype.events={"click .js-add-card":"addCard","click .js-move-list":"moveList","click .js-copy-list":"copyList","click .js-list-subscribe":"toggleSubscribe","click .js-move-cards":"moveCards","click .js-archive-cards":"archiveCards","click .js-sort-by-date":"sortByDate","click .js-close-list":"closeList"},t.prototype.render=function(){return this.$el.html(g({editable:this.model.editable(),subscribed:this.model.get("subscribed"),canSortByDate:this.model.cardList.any(function(e){return function(e){return e.get("due")}}(this))})),this},t.prototype.addCard=function(e){l.stop(e),u.hide(),this.model.getBoard().composer.save({list:this.model,index:0,vis:!0}),b("List Menu","Add Card"),b("Card Composer","Open","Via List Menu")},t.prototype.moveList=function(e){l.stop(e),b("List Menu","Open Move List Popover"),u.pushView({view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.copyList=function(e){l.stop(e),b("List Menu","Open Copy List Popover"),u.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.toggleSubscribe=function(e){l.preventDefault(e),this.model.get("subscribed")?(this.model.subscribe(!1),b("List Menu","Subscribe","Unsubscribe")):(this.model.subscribe(!0),b("List Menu","Subscribe","Subscribe"))},t.prototype.moveCards=function(e){l.stop(e),b("List Menu","Open Move All Cards in List"),u.pushView({view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.archiveCards=function(e){l.stop(e),b("List Menu","Open Archive All Cards in List"),r.pushView("archive all cards",{model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){var n,r,i,o;for(u.hide(),o=p.clone(e.model.cardList.models),r=0,i=o.length;i>r;r++)n=o[r],n.set({closed:!0});return e.model.run("archiveAllCards",{},e.listViewListen)}}(this)})},t.prototype.sortByDate=function(e){return l.stop(e),u.hide(),b("List Menu","Sort Cards By Date"),this.applySort(function(e){var t,n;return t=e.get("due"),n=e.get("dueComplete"),[t?n?"1":"0":"2",null!=t?t:""].join(":")})},t.prototype.applySort=function(e){var t,n,r,i,o,s,a,u,l,d;if(!(this.model.cardList.length<=1)){for(i=this.model.cardList.sortBy(e),o=p.chain(i).map(function(e){return[e.id,e.get("pos")]}).object().value(),t=10,n=p.chain(function(){d=[];for(var e=0;t>=0?t>=e:e>=t;t>=0?e++:e--)d.push(e);return d}.apply(this)).map(function(e){return function(e){return Math.round((i.length-1)*e/t)}}(this)).uniq().map(function(e){return _.call(f(i.slice(0,+e+1||9e9),o)).concat(_.call(m(i.slice(e),o)))}).sortBy(function(e){return e.length}).first().value(),s=0,a=n.length;a>s;s++)l=n[s],r=l.card,u=l.pos,r.set("pos",u);return v(n,{fx:function(e){var t,n;return t=e.card,n=e.pos,c.fromNode(function(e){return t.update("pos",n,e)})},updatesPerMinute:60,concurrency:5})}},t.prototype.closeList=function(e){var t,n;return l.stop(e),n=this,t=this.model,b("List Menu","Archive List"),u.hide(),t.close(),!1},t}(d)},{}],551:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e("jquery"),i=e(33),s=e(38),a=e(222),u=e(542),c=e(129),l=e(522),d=e("underscore"),h=e(519),m=e(48),p=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="move list",t.prototype.tagName="form",t.prototype.events={"change .js-select-list-pos":"renderValues","change .js-select-board":"updateBoardData","click .js-commit-position":"commitChange",submit:"commitChange"},t.prototype.render=function(){var e,t,n,r,o,s,a,u,c,l,d;for(d=this,a=d.model,t={organizations:i.me().getOpenBoardsByOrg(!0)},c=t.organizations,n=0,o=c.length;o>n;n++)for(u=c[n],l=u.boards,r=0,s=l.length;s>r;r++)e=l[r],e.id===a.get("idBoard")&&(e.selected=!0);return this.$el.html(h.fill("popover_move_list",t)),this.updateBoardData(),this},t.prototype.renderValues=function(){var e,t,n,i,o;e=r(this.el),i=e.find(".js-select-board option:selected").val(),o=parseInt(e.find(".js-select-list-pos option:selected").text(),10),t=this.modelCache.get("Board",i),n=t.get("name"),e.find(".js-board-value").text(n),e.find(".js-pos-value").text(String(o))},t.prototype.updateBoardData=function(){var e,t,n,i,o,u,c,l;if(e=r(this.el),n=e.find(".js-select-board"),i=n.find("option:selected").val(),i===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),l=this._boardData.listList.models,o=0,u=l.length;u>o;o++)c=l[o],c.cardCount=this._boardData.listList.get(c.id).openCards().length;this.updateListList()}else t=e.find(".select-list,.select-position"),t.attr("disabled","disabled"),s.loadBoardData(i,a.listsMinimal).then(function(e){return function(){return e._boardData=e.modelCache.get("Board",i),e.updateListList(),t.removeAttr("disabled")}}(this)).done()},t.prototype.updateListList=function(){var e,t,n,i,o,s,a,u,c,l,h,m,f,g;for(g=this,l=g.model,t=this.$(".js-select-list-pos"),t.empty(),h=this._boardData.listList.models,u=this._boardData.id===this.model.getBoard().id,u?(i=d.indexOf(h,this.model),n=h.length):(i=-1,n=h.length+1),s=c=0,f=n;f>=0?f>c:c>f;s=f>=0?++c:--c)a=String(s+1),o=s===i?p("current position",{index:a}):a,m=this._boardData.listList.calcPos(s,l),e=r("<option>").val(m).text(o).appendTo(t),s===i&&e.attr("selected","selected");return this.renderValues()},t.prototype.commitChange=function(e){var t,n,r;c.stop(e),t=this.$(".js-select-list-pos"),r=parseInt(t.find("option:selected").val(),10),n=this.$(".js-select-board option:selected").val(),this.model.getBoard().composer.save("vis",!1),n===this.model.getBoard().id?(this.model.update({pos:r}),m("List Menu","Move Menu","Successfully Moved")):null!=n&&null!=r&&(this.model.update({idBoard:n,pos:r}),m("List Menu","Move Menu","Changed Board")),u.hide()},t}(l)},{}],552:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N=function(e,t){function n(){this.constructor=e}for(var r in t)V.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},V={}.hasOwnProperty;r=e("jquery"),i=e(33),o=e(79),s=e(406),a=e(416),u=e(6),e(492),c=e(537),w=e(522),p=e(550),f=e(542),v=e(116),B=e(148),O=e(259),m=e(509),g=e("bluebird"),b=e(520),y=e(129),_=e("underscore"),S=e(45),T=e(106),L=e(519),x=e(822),A=e(48),D=e(53),j=e(99),I=e(523),P=e(501),l=e(97),d=e(20),C=e(101),k=e(238),M=e(132),E=e(133),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return N(t,e),t.prototype.className="js-list list-wrapper",t.prototype.events={"click .js-open-list-menu":"openMenu","mousedown .list-cards":"eventStopPropagation","click .js-open-card-composer":"openCardComposer","keydown  .js-list-name-input":"keyDownEvent","blur     .js-list-name-input":"stopEditing","click  .js-editing-target":"startEditing",movelist:"moveList",sortreceive:"sortReceive",sortcommit:"sortCommit","dd-drop:files":"dropFiles","dd-drop:text":"dropText","dd-drop:url":"dropUrl",mouseenter:"mouseenter",mouseleave:"mouseleave",mousemove:"mousemove","userinput-paste:text":"dropText","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl"},t.prototype.initialize=function(){var e,n,i,o,s;for(t.__super__.initialize.apply(this,arguments),this.fEditingName=!1,this.makeDebouncedMethods("toggleComposerLink","renderComposer","renderCardCount","renderName"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:subscribed":this.renderSubscribed}),this.listenTo(this.model.cardList,{"add remove change:idList change:closed reset":this.renderCardCountDebounced}),this.listenTo(this.model.getBoard(),"permChange",this.renderEditable),this.listenTo(this.model.getBoard().composer,{"change:list change:index change:vis":this.renderComposerDebounced,"change:list change:vis":this.toggleComposerLinkDebounced}),this.cardListView=this.collectionSubview(a,this.model.cardList,{className:"list-cards u-fancy-scrollbar u-clearfix js-list-cards",deferCards:this.options.deferCards}),r(window).on("resize."+this.uniqueId(),k(this,"hackFlexboxForSadBrowsers")),s=["mouseEnterCardView","mouseLeaveCardView","mouseMoveCardView"],n=function(e){return function(t){return e.listenTo(e.cardListView,t,function(e){return this.trigger(t,e)})}}(this),i=0,o=s.length;o>i;i++)e=s[i],n(e)},t.prototype.render=function(){return S("render","rendering list "+this.model.get("name")),this.cardListView.$el.detach(),this.$el.html(x({name:this.model.get("name"),subscribed:this.model.get("subscribed"),loggedIn:i.isLoggedIn()})),this.cardListView.$el.insertAfter(this.$(".js-list-header")),this.cardListView.render(),this.cardListView.$el.toggleClass("js-sortable",this.model.editable()),this.toggleComposerLinkDebounced(),this.renderComposerDebounced(),this.renderCardCount(),this.renderEditable(),this.hackFlexboxForSadBrowsers(),_.defer(function(e){return function(){return e.$(".js-list-name-input").autosize({append:!1})}}(this)),this},t.prototype.remove=function(){
return r(window).off("."+this.uniqueId()),t.__super__.remove.apply(this,arguments)},t.prototype.renderName=function(){return this.$(".js-list-name-assist").text(this.model.get("name")),this.fEditingName||this.$(".js-list-name-input").val(this.model.get("name")).trigger("autosize.resize",!1),this},t.prototype.renderSubscribed=function(){return this.$(".js-list-subscribed").toggleClass("hide",!this.model.get("subscribed")),this.$(".js-list-header").toggleClass("is-subscribe-shown",this.model.get("subscribed")),this.$(".js-list-name-input").trigger("autosize.resize",!1),this},t.prototype.renderEditable=function(){var e;return e=this.model.editable(),this.$(".js-list-cards").toggleClass("js-sortable",e),e?this.$(".js-list-name-input").removeAttr("disabled"):this.$(".js-list-name-input").attr("disabled","disabled"),this.$(".js-open-card-composer").toggleClass("hide",!e),this},t.prototype.hackFlexboxForSadBrowsers=function(){var e;("explorer-10"===(e=o.browserVersionStr)||"explorer-11"===e)&&this.defer(function(e){return function(){var t,n,i,o,s;return t=e.$el,s=e.$(".list-header").outerHeight(),i=e.$(".open-card-composer").outerHeight(),n=r("#board").height(),o=n-s-i-20,e.$(".list-cards").css({"max-height":o})}}(this))},t.prototype.saveListName=function(e){var t,n,r;t=this.$(".js-list-name-input"),n=this.model.get("name"),r=t.val(),r=r.replace(/\s+/g," ").trim(),r!==n&&(r.length>16384||0!==r.trim().length&&this.model.update("name",r))},t.prototype.keyDownEvent=function(e){return l.getKey(e)===d.Enter?(y.stop(e),void this.stopEditing()):l.getKey(e)===d.Escape?void this.stopEditing():void 0},t.prototype.startEditing=function(e){y.stop(e),this.fEditingName||c.sorting||(this.fEditingName=!0,this.$(".js-editing-target").addClass("is-hidden"),_.defer(function(e){return function(){return e.$(".js-list-name-input").focus().select().addClass("is-editing")}}(this)))},t.prototype.stopEditing=function(e){var t;this.fEditingName&&(this.$(".js-editing-target").removeClass("is-hidden"),t=this.$(".js-list-name-input").removeClass("is-editing"),t.is(":focus")&&t.blur(),E(),this.fEditingName=!1,this.saveListName())},t.prototype.toggleComposerLink=function(){return this.$(".js-open-card-composer").toggleClass("hide",this.composerOpen()||!this.model.editable())},t.prototype.composerOpen=function(){var e,t;return e=null!=(t=this.model.getBoard())?t.composer:void 0,null!=e&&e.get("vis")&&e.get("list")===this.model},t.prototype.renderComposer=function(){var e,t;return this.composerOpen()&&(e=this.model.getBoard().composer,t=u.getCurrentBoardView().subview(s,e),this.insertComposerAtIndex(e.get("index"),t),t.scrollIntoView(),_.debounce(t.delegateEvents(),150)),this},t.prototype.insertComposerAtIndex=function(e,t){var n,r;0===e?this.$(".list-cards").prepend(t.render().el):(r=e-1,n=this.$(".list-card").not(".js-composer"),r>=n.length&&(r=n.length-1),n.eq(r).after(t.render().el))},t.prototype.renderCardCount=function(){return this.$(".js-num-cards").text(j("cards",this.model.openCards().length))},t.prototype.openCardComposer=function(e){var t;y.stop(e),f.hide(),t=this.model.getBoard(),t.composer.save({list:this.model,index:this.model.openCards().length,vis:!0}),A("Card Composer","Open","Via Bottom of List")},t.prototype.triggerOnItem=function(e,t,n){y.stopPropagation(e),this.defer(function(e){return function(){return t.item.trigger(n,[t,e])}}(this))},t.prototype.sortReceive=function(e,t){this.triggerOnItem(e,t,"moveto")},t.prototype.sortCommit=function(e,t){this.triggerOnItem(e,t,"movein")},t.prototype.openMenu=function(e){var t;return t=this,c.sorting?void 0:(y.preventDefault(e),A("List Menu","Open List Menu"),f.toggle({elem:e.currentTarget,view:new p({model:this.model,modelCache:this.modelCache})}),!1)},t.prototype.moveList=function(e,t){var n,r;y.stop(e),n=t.item.parent().children(),r=n.index(t.item),this.model.move(r)},t.prototype.eventStopPropagation=function(e){y.stopPropagation(e)},t.prototype.scrollToCard=function(e){var t;t=this.cardListView.viewForModel(e),y.scrollElementIntoView(this.$(".js-list-cards")[0],t.el,{vertical:!0,animated:!0})},t.prototype.mouseenter=function(e){return this.trigger("mouseEnterListView"),b.addHandler(this,{scope:"list"})},t.prototype.mouseleave=function(e){return this.trigger("mouseLeaveListView"),b.removeHandler(this,{scope:"list"})},t.prototype.mousemove=function(e){return this.trigger("mouseMoveListView")},t.prototype.dropText=function(e){var t;if(this.model.editable())return t=e.detail,this.model.uploadText(t)},t.prototype.dropUrl=function(e){var t,n,r,i,o;if(this.model.editable()){if(e.stopPropagation(),o=e.detail,i=B(o),"card"===i.type)return n=v.isCut(o)?"moveCard":"copyCard",void this.trigger(n,{shortLink:i.shortLink,idList:this.model.id});r=O(o),null!=(t=r.host)&&m.one({timeout:2e3,command:"card-from-url",list:this.model,board:this.model.getBoard(),options:{url:o}}).catch(m.Error.NotHandled,function(){return{}}).then(function(e){return function(n){var r,i;return i=C("loading from domain",{domain:t}),r=_.pick(n,"name","desc"),(null!=n?n.idPlugin:void 0)&&D("board view","creates","Power-Up","","","card-from-url",n.idPlugin),M(e.model,"uploadUrl",o,r,i)}}(this)).done()}},t.prototype.dropFiles=function(e){var t;if(this.model.editable()&&(t=e.detail,!I(this.model.getBoard(),t)))return g.resolve(t).each(function(e){return function(t){var n;return n=t.name||P(),M(e.model,"upload",t,n)}}(this)).catch(function(){}).done()},t}(w)},{}],553:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e(557),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.renderMenu=function(){},t}(i)},{}],554:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e(560),i=e(532),o=e(33),a=e(566),u=e(534),c=e(6),l=e(557),d=e(542),p=e(129),h=e("underscore"),m=e(101),f=e(43),g=e(519),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.className="board-member-menu",t.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board,"change:prefs",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-remove-member":"removeMember","click .js-add-to-team":"addMemberToTeam","click .js-change-role":"changeRole"},t.prototype.renderMenu=function(){var e,t,n,r;return t=h.extend(this.model.toJSON(),"function"==typeof(e=this.board).premiumFeatures?e.premiumFeatures():void 0,this.model.getMembershipData(this.board)),r=this.board.getOrganization(),t.boardProfileUrl=c.getMemberBoardProfileUrl(this.model.get("username"),this.board.id),n=this.board.getMemberType(this.model),t.canInviteMemberToTeam=r&&this.canInviteMemberToTeam(r),t.isGhost="virtual"===n,t.type=m(["member types",n]),("superadmin"===n||"deactivated"===n)&&(t.canChangeRole=!1),this.$el.append(g.fillMenu("member_on_board_menu",t,{editable:this.board.editable(),owned:this.board.owned()})),this},t.prototype.canInviteMemberToTeam=function(e){var t,n,r,i,s,a;return e.hasActiveMembership(this.model)?!1:(s=o.me(),i=e.ownedByMember(s),n=e.belongsToRealEnterprise(),t=e.get("idEnterprise"),r=(null!=(a=s.get("idEnterprisesAdmin"))?a.indexOf(t):void 0)>=0,i||n&&r)},t.prototype.changeRole=function(e){p.stop(e),d.pushView({view:new a({model:this.model,parent:this.board,modelCache:this.modelCache})})},t.prototype.removeMember=function(e,t){return p.stop(e),u.pushView(this.model.removeMembershipConfirmationKey(this.board),{confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.board.removeMember(e.model),d.hide()}}(this)})},t.prototype.showError=function(e){var t;return f(new Error("Unknown server error message '"+e+"'")),t=m(["server error","unknown"]),i.showLiteralText(t,"error","alert",5e3)},t.prototype.addMemberToTeam=function(e,t){var n,i,o;p.stop(e),o=this.board.getOrganization(),i=o.belongsToRealEnterprise(),n=o.isBusinessClass(),i||n?d.pushView({view:new r({isBC:n,isEnterprise:i,model:this.model,org:o})}):o.addMember(this.model).then(function(e){return function(){return d.hide()}}(this)).catch(function(e){return function(t){return e.showError(t.message),d.hide()}}(this))},t}(l)},{}],555:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(557),o=e(542),s=e(519),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.events={"click .js-remove-member":"removeMember"},t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.card=this.options.card},t.prototype.renderMenu=function(){return this.$el.append(s.fillMenu("member_on_card_menu",this.model.toJSON(),{editable:this.card.editable()})),this},t.prototype.removeMember=function(e){var t;o.hide(),t=this.model.id,this.card.removeMember(t)},t}(i)},{}],556:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(542),o=e(522),s=e(850),a=e(48),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.getViewTitle=function(){return this.model.get("fullName")},t.prototype.displayType="mod-avdetail",t.prototype.events={"click .js-profile":"showProfile"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(s(e)),this},t.prototype.showProfile=function(){a("Mini Profile","Large Avatar - Click Profile")},t}(o)},{}],557:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(33),i=e(562),o=e(568),s=e(556),u=e(38),c=e(542),l=e(129),d=e(522),p=e("underscore"),h=e(863),m=e(48),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},t.prototype.displayType="mod-mini-profile",t.prototype.delegateEvents=function(e){var n;return n={"click .js-profile":"showProfile","click .js-edit-profile":"editProfile","click .js-view-large":"viewLarge","click .js-change-av":"changeAvatar"},t.__super__.delegateEvents.call(this,p.extend(n,e||this.events))},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.isMe=r.isMe(this.model),e.showEmail=null!=e.email&&!e.isMe,null!=e.email||"ghost"!==this.model.get("memberType")||this.loaded||this.loadEmail(),this.$el.html(h(e)),this.renderMenu(),this},t.prototype.loadEmail=function(){return u.loadMemberEmail(this.model.id).then(function(e){return function(){return e.loaded=!0}}(this)).done()},t.prototype.showProfile=function(){m("Mini Profile","Click Profile")},t.prototype.editProfile=function(e){l.stop(e),m("Mini Profile","Click Edit Profile"),c.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.viewLarge=function(e){l.stop(e),m("Mini Profile","View Large Avatar"),c.pushView({view:new s({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAvatar=function(e){l.stop(e),m("Mini Profile","Change Avatar"),c.pushView({view:new i({model:this.model,modelCache:this.modelCache})})},t}(d)},{}],558:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),i=e(554),o=e(537),a=e(542),u=e(129),c=e(522),l=e(76),d=e(45),p=e(829),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="member",t.prototype.events={click:"showMenu"},t.prototype.initialize=function(e){this.board=e.board,l(null!=this.model,"You cannot have a deleted member as a board member!"),this.listenTo(this.model,"change",this.render),this.listenTo(this.board,"change:memberships",this.render)},t.prototype.render=function(){var e,t,n;return d("render","rendering "+this.constructor.name+" "+this.model.get("fullName")),e=this.model.toJSON(),t=function(e){return function(t){var n;return n=t.getMembershipFor(e.model),"admin"===(null!=n?n.memberType:void 0)}}(this),e.isBoardAdmin=t(this.board)||(null!=(n=this.board.getOrganization())?n.isPremOrgAdmin(this.model):void 0),e.isGhost="ghost"===this.model.get("memberType"),e.isDeactivated=this.board.isDeactivated(this.model),this.$el.html(p(e)),this.model.isFeatureEnabled("crown")&&this.$el.addClass("has-crown"),this.$el.toggleClass("member-deactivated js-member-deactivated",e.isDeactivated),e.isGhost&&this.$el.addClass("member-virtual"),this.$el.data("id",this.model.id),this},t.prototype.showMenu=function(e){this.doClicks()&&(u.stop(e),a.toggle({elem:e.currentTarget,view:new i({board:this.board,model:this.model,modelCache:this.modelCache})}))},t.prototype.doClicks=function(){return!o.sorting},t}(c)},{}],559:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;i=e(532),o=e(542),s=e(129),a=e(522),l=e(519),d=e(48),u=e(101),c=e(43),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="add email",t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){return this.$el.html(l.fill("popover_add_email")),this},t.prototype.showError=function(e){var t;return t=function(){switch(e.trim().toLowerCase()){case"the email address is already in use":return"address in use";case"this email is already on this account":return"on account";case"invalid email address":return"invalid email address";default:return c(new Error("Unknown server error message '"+e+"'")),"unknown"}}(),this.$("#account-error").text(u(["email error",t])).show()},t.prototype.saveChanges=function(e){var t;return s.preventDefault(e),t=this.$('[name="email"]').val(),this.model.run("logins",{email:t},function(e){return function(t){t?e.showError(t.message):(o.popView(),i.flash("email sent","confirm"),d("Member","Added Email Address"))}}(this))},t}(a)},{}],560:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;i=e(532),o=e(542),s=e(129),a=e(522),u=e(889),c=e(101),l=e(100),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="add to team",t.prototype.events={"click .js-add-to-team":"addToTeam"},t.prototype.render=function(){var e;return e=c(["products",this.options.isBC?"bc":"enterprise"]),this.$el.html(u({teamType:e})),this},t.prototype.showError=function(e){var t;return t=l(e),i.showLiteralText(t,"error","alert",5e3)},t.prototype.addToTeam=function(e){return s.preventDefault(e),this.$(".js-add-to-team").attr("disabled",!0).addClass("disabled"),this.options.org.addMember(this.model).then(function(e){return function(){return o.hide()}}(this)).catch(function(e){return function(t){return e.showError(t.message),o.hide()}}(this))},t}(a)},{}],561:[function(e,t,n){var r,i;r=e("react"),i=e(514)("boards_page_add_org_button"),t.exports=r.createClass({displayName:"MemberBoardsAddOrgComponent",render:i.renderable(function(){var e;return e=this.props.onClick,i.div(".boards-page-board-section.u-clearfix",function(){return i.b(e,".quiet-button.u-float-left",function(){return i.format("create-a-new-organization-ellipsis")})})})})},{}],562:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty,y=[].slice;r=e("jquery"),i=e(215),o=e(33),s=e(402),m=e(100),u=e(542),c=e(404),l=e(129),d=e(522),f=e(519),g=e(48),h=e(101),p=e(143),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="change avatar",t.prototype.initialize=function(){return this.listenTo(this.model,"change:avatarSource change:uploadedAvatarHash",this.frameDebounce(this.render))},t.prototype.events={"change .js-upload-avatar":"startUpload","click .js-use-gravatar":"useGravatar","click .js-use-uploaded-avatar":"useUploadedAvatar","click .js-take-photo":"takePhoto","click .js-no-avatar":"clearAvatar"},t.prototype.render=function(){var e,t,n,r,i;return i=this,t=this.model.toJSON({prefs:!0}),t["avatarSource_"+t.avatarSource]=!0,t.canTakePhoto=s.supportsGetUserMedia(),this.$el.html(f.fill("avatar_change",t)),n=this.$(".js-grav"),e=n.find("img"),r="https://secure.gravatar.com/avatar/"+(this.model.get("gravatarHash")+".png?s=50&r=PG&d=404")+("&_="+Math.random()),l.waitForImageLoad(r,function(){return n.show()}),this},t.prototype.startUpload=function(e){var t,n,s,a,u,c,d;return u=this.model,a=r(e.target),s=null!=(c=a[0])&&null!=(d=c.files)?d[0]:void 0,t=this.$(".js-error").hide(),null==s||l.validFileSize(s)?(g("Member","Avatar","Use Uploaded - New"),!s&&a.val()?l.uploadFile(o.myToken(),a,this.uploadResult.bind(this)):null!=s?(n=new FormData,n.append("token",o.myToken()),n.append("file",s),i({url:a.closest("form").attr("action"),data:n,type:"post",processData:!1,contentType:!1,error:function(e){return function(t){return e.uploadResult(new Error(m(t)))}}(this),success:function(e){return function(){return e.uploadResult.apply(e,[null].concat(y.call(arguments)))}}(this),timeout:12e4})):void 0):(t.text(h("images can not be larger than 10mb")).show(),void g("Member","Avatar","Upload Error - File Too Large"))},t.prototype.uploadResult=function(e){var t;return t=this.$(".js-error").hide(),e?t.show().text(e):void 0},t.prototype.useUploadedAvatar=function(e){return g("Member","Avatar","Use Uploaded - Existing"),this.model.update("avatarSource","upload"),u.popView()},t.prototype.useGravatar=function(e){return g("Member","Avatar","Use Gravatar"),this.model.update("avatarSource","gravatar"),u.popView()},t.prototype.clearAvatar=function(e){return g("Member","Avatar","Use Initials"),this.model.update("avatarSource","none"),u.popView()},t.prototype.takePhoto=function(e){var t;return t=function(e){return function(t){var n,r;return n=p(t),r=new FormData,r.append("token",o.myToken()),r.append("file",n,"avatar.png"),i({url:"/1/member/"+e.model.id+"/avatar",data:r,type:"post",processData:!1,contentType:!1,error:function(e,t,n,r){var i,o;return o=e.status,i=e.responseText,413!==o?r():void 0},timeout:6e4})}}(this),u.pushView({view:new c({model:this.model,modelCache:this.modelCache,savePhoto:t})}),g("Member","Avatar","Take Photo")},t}(d)},{}],563:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(542),s=e(522),a=e(519),u=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="send emails",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.events={"click li a":"changeFreq"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(a.fill("popover_set_email_freq",e)),this},t.prototype.changeFreq=function(e){var t;t=parseInt(r(e.target).closest("a").attr("value")),u("Member","Changed Email Frequency",this.model.getPref("minutesBetweenSummaries"),t),this.model.setPref("minutesBetweenSummaries",t).save(),o.popView()},t}(s)},{}],564:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;r=e(532),i=e(217),o=e(33),a=e(97),m=e(101),f=e(43),u=e(38),c=e(542),l=e("bluebird"),g=e(517)("change_email"),b=e(48),d=e(129),p=e(522),v=g.renderable(function(e){var t;return t=e.currentEmail,g.p(".error.account-error"),g.label(function(){return g.format("current-email")}),g.div(".js-current-email",function(){return g.text(t)}),g.br(),g.label(function(){return g.format("new-email"),g.input(".full.js-new-email.js-autofocus")}),g.button(".primary.full.js-save-changes.disabled",{disabled:!0},function(){return g.format("change-email")})}),h=g.renderable(function(e){var t;return t=e.email,g.p(function(){return g.format("we-sent-an-email-to-the-address-you-entered",{email:t})}),g.p(function(){return g.format("click-the-link-in-the-email")})}),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="change email",t.prototype.className="member-change-email",t.prototype.events={"click .js-save-changes":"saveChanges","keydown .js-new-email":function(e){return a.isSubmitEvent(e)?this.$(".js-save-changes").click():void 0},"input .js-new-email":function(e){var t,n,r;return n=this.$(".js-new-email").val(),r=/@[^\.]+\.[^\.]+/.test(n),r&&this._loginsPromise.then(function(e){return function(){var t;return n===e.$(".js-new-email").val()?(t=e.model.loginList.any(function(e){return e.get("email")===n}),e.$(".js-send-confirmation").toggleClass("hide",t),e.$(".js-update-email").toggleClass("hide",!t)):void 0}}(this)),t=!r,this.$(".js-save-changes").prop("disabled",t).toggleClass("disabled",t)}},t.prototype.initialize=function(){return this._loginsPromise=u.loadMemberLogins("me")},t.prototype.render=function(){var e,t;return t=o.me(),e=t.get("email"),this.$el.html(v({currentEmail:e})),this._loginsPromise.then(function(e){return function(){return e.$(".js-current-email").text(t.get("email"))}}(this)),this},t.prototype.showError=function(e){var t;return t=function(){switch(e.trim().toLowerCase()){case"the email address is already in use":return"address in use";case"this email is already on this account":return"on account";case"invalid email address":return"invalid email address";default:return f(new Error("Unknown server error message '"+e+"'")),"unknown"}}(),this.$(".account-error").text(m(["email error",t])).show()},t.prototype.saveChanges=function(e){var t,n;return d.preventDefault(e),t=this.$(".js-save-changes"),n=this.$(".js-new-email").val(),t.prop("disabled",!0).addClass("disabled"),this._loginsPromise.then(function(e){return function(){var r;return r=e.model.loginList.find(function(e){return e.get("email")===n}),r?(e.model.set("email",n),i({url:"/1/members/me/logins/"+r.id+"/primary",type:"put"}).then(function(e){return r.set("primary",!0),c.popView()}).done()):e.model.run("logins",{email:n,primary:!0},function(r){r?(t.prop("disabled",!1).removeClass("disabled"),e.showError(r.message)):(e.$el.html(h({email:n})),b("Member","Changed Email Address"))})}}(this))},t}(p)},{}],565:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(98),s=e(31),a=e(517)(),o=e(522),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="change locale",t.prototype.events={"click .js-select-locale":function(e){return this.selectLocale(e.currentTarget.getAttribute("data-locale"))}},t.prototype.initialize=function(e){return this.onChange=e.onChange,this.listenTo(this.model,"change:prefs.locale",this.render)},t.prototype.selectLocale=function(e){var t;t=this.model.getPref("locale"),this.model.setPref("locale",e,function(n){return function(){return n.onChange(e,t)}}(this))},t.prototype.render=function(){var e,t;return e=this.model.getLocale(),t=function(t,n){a.li(function(){a.a(".js-select-locale",{href:"#","data-locale":t},function(){a.text(n),t===e&&(a.text(" "),a.icon("check"))})})},this.$el.html(a.render(function(){return a.ul(".pop-over-list",function(){var e,n,r,o,a,u;for(n=0,r=s.length;r>n;n++)u=s[n],e=u.code,o=u.name,a=i.normalizeLocale(e),t(a,o)})})),this},t}(o)},{}],566:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e("jquery"),i=e(215),o=e(33),a=e(534),u=e(542),c=e(129),l=e(522),d=e("underscore"),h=e(519),m=e(48),p=e(101),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="change permissions",t.prototype.initialize=function(){this.parent=this.options.parent,this.listenTo(this.parent,"change:memberships",this.render)},t.prototype.events={"click .js-make-admin":"makeAdmin","click .js-make-member":"makeMember","click .js-make-observer":"makeObserver"},t.prototype.render=function(){var e,t,n,r,i,o,s;for(s=this,e=this.model.getMembershipData(this.parent),e.showObserver=this.parent.hasObservers(),e.canMakeAdmin=this.model.get("confirmed"),r=function(){if("Organization"===this.parent.typeName)return"org roles";if("Board"===this.parent.typeName)return"board roles";throw new Error("A fragile abstraction has broken")}.call(this),i=this.parent.getAvailableRoles(),t=0,n=i.length;n>t;t++)o=i[t],e["roleText_"+o]=p([r,o,"text"]);return null==e.roleText_admin&&(e.roleText_admin=e.roleText_superadmin),this.$el.html(h.fill("popover_change_roles",e)),this},t.prototype.apiChangeRole=function(e){this.$el.find("ul a").addClass("disabled"),this.parent.changeMemberRole(this.model,{type:e}).done(),u.hide()},t.prototype.getMemberType=function(){return this.parent.getExplicitMemberType(this.model)},t.prototype.isAdminAndMe=function(){return"admin"===this.getMemberType()&&o.isMe(this.model)},t.prototype.makeAdmin=function(e){c.stop(e),r(e.target).closest("a").hasClass("disabled")||"admin"!==this.getMemberType()&&this.apiChangeRole("admin")},t.prototype.makeMember=function(e){c.stop(e),r(e.target).closest("a").hasClass("disabled")||"normal"!==this.getMemberType()&&(this.isAdminAndMe()?a.pushView("demote admin to normal member",{fxConfirm:function(e){return function(t){return e.apiChangeRole("normal")}}(this)}):this.apiChangeRole("normal"))},t.prototype.makeObserver=function(e){c.stop(e),r(e.target).closest("a").hasClass("disabled")||"observer"!==this.getMemberType()&&(this.isAdminAndMe()?a.pushView("demote admin to observer",{fxConfirm:function(e){return function(t){return e.apiChangeRole("observer")}}(this)}):this.apiChangeRole("observer"))},t}(l)},{}],567:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty,p=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e(542),o=e(129),s=e(522),u=e(519),c=e(48),a=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.frameDebounce(this.render))},t.prototype.viewTitleKey=function(){return p.call(this.model.get("loginTypes"),"password")<0?"set password":"change password"},t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0,hasPassword:!0}),this.$el.html(u.fill("popover_change_set_password",e)),this},t.prototype.getValue=function(e){return this.$("[name="+e+"]").val()},t.prototype.showPasswordError=function(e){return this.$("#password-error").text(a(["password error",e])).show()},t.prototype.saveChanges=function(e){var t,n,r;return o.preventDefault(e),this.$("#password-error").hide(),r=this.getValue("oldpassword"),t=this.getValue("password"),n=this.getValue("password2"),t||n?void(t!==n?this.showPasswordError("must match"):this.model.run("updatePassword",{oldPassword:r,newPassword:t},function(e){return function(t){return null==t?(c("Member","Changed Password"),void i.popView()):void e.showPasswordError(function(){switch(t.message.trim()){case"invalid value for newPassword":return"not long enough";case"The old password was incorrect":return"old password";default:return"unknown"}}())}}(this))):void 0},t}(s)},{}],568:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),o=e(6),s=e(542),a=e(129),u=e(522),d=e(519),p=e(48),c=e(101),l=e(43),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change name and bio",t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(d.fill("popover_change_user_info",e)),this},t.prototype.getValue=function(e){return this.$("[name="+e+"]").val()},t.prototype.showError=function(e){var t;return t=function(){switch(e.trim().toLowerCase()){case"username is taken":return"username taken";case"username must be at least 3 characters":return"username too short";case"username is invalid: only lowercase letters, underscores, and numbers are allowed":return"username invalid";case"full name must be at least 1 character":return"full name too short";case"initials must contain 1-4 characters":return"initials wrong length";default:return l(new Error("Unknown server error message '"+e+"'")),"unknown"}}(),this.$("#account-error").text(c(["member profile error",t])).show()},t.prototype.saveChanges=function(e){var t,n,i,u,c,l,d;for(l=this,a.preventDefault(e),t={},this.$("#account-error").hide(),c=["fullName","initials","username","bio"],n=0,i=c.length;i>n;n++)u=c[n],t[u]=r.trim(this.getValue(u));t.username=t.username.toLowerCase().replace(/[^a-z0-9_]/g,""),t.initials=t.initials.toUpperCase(),d=o.getMemberProfileUrl(this.model.get("username"))===o.location,this.model.update(t,{waitForServer:!0},function(e){return function(t){t?e.showError(t.message):(s.popView(),d&&o.setLocation({location:o.getMemberProfileUrl(e.model.get("username"))}),p("Member","Successfully Change User Info"))}}(this))},t}(u)},{}],569:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e("react"),s=e(514)("boards_page_gold_banner"),o=e(249),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.displayName="GoldBanner",t.prototype.render=s.renderable(function(){var e,t,n,r,i,a,u;return i=this.props,e=i.hasGold,t=i.invitedMemberNames,n=i.localizedMonthsOfCreditMessage,r=i.onDismissBanner,e?(u="welcome heading-upgrade",a=[{key:"tip-power-ups",props:{url:"https://trello.com/power-ups?utm_source=welcome-banner&utm_medium=inapp&utm_term=gold-subscribe"}},{key:"tip-board backgrounds",props:{url:"http://help.trello.com/article/818-changing-board-backgrounds?utm_source=welcome-banner&utm_medium=inapp&utm_term=gold-subscribe"
}},{key:"tip-premium stickers",props:{url:"http://help.trello.com/article/817-trello-gold-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=gold-subscribe"}}]):(u="welcome heading-recommendation",a=[{key:"tip-these people joined",props:{invited_members:t.join(", ")}},{key:"tip-account settings",props:{url:"/my/account?utm_source=welcome-banner&utm_medium=inapp&utm_term=gold-recommend"}},{key:"tip-learn trello gold",props:{url:"http://help.trello.com/article/817-trello-gold-user-guide?utm_source=welcome-banner&utm_medium=inapp&utm_term=gold-recommend"}}]),s.div(".gold-banner",function(t){return function(){return s.button(".icon-lg.icon-close",{onClick:r}),s.div(".gold-banner-content",function(){return s.div(".gold-banner-welcome-section",function(){return s.h1(".gold-banner-welcome-heading",function(){return s.format(u)}),s.p(".gold-banner-welcome-subheading",function(){return e?s.format("welcome subheading-upgrade"):s.text(n)})}),s.ol(".gold-banner-tip-list",function(){return o.map(a,function(e,t){return s.li(".gold-banner-tip-list-item",function(){return s.span(".gold-banner-tip-list-item-bullet",{"aria-hidden":!0}),s.span(".gold-banner-tip-list-item-text",function(){return e.hasOwnProperty("props")?s.format(e.key,e.props):s.format(e.key)})})})})})}}(this))}),t}(i.Component),t.exports=r},{}],570:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),i=e(33),a=e(569),c=e("react"),l=e("react-dom"),d=e(513),p=e(522),h=e("underscore"),f=e("recup"),v=e(519),m=e(99),g=e(17),o=g.GOLD_RECOMMENDATION,s=g.GOLD_UPGRADE,t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.initialize=function(){return this.listenTo(i.me(),{"change:oneTimeMessagesDismissed":this.frameDebounce(this.render)})},t.prototype.getReactRoot=function(){return c.createElement(d,{},this.getGoldBanner())},t.prototype.renderReactSection=function(){return l.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.render=function(){return null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$el.append(this.$reactRoot),this.renderReactSection(),this},t.prototype.getGoldBanner=function(){var e,t,n,r,u,c,l,d;return l=this.options,e=l.banner,n=l.idNuxBannersToDismiss,r=e.invitedMemberNames,u=e.numCreditMonths,d=e.type,t=(n||[]).concat([d]),c=function(e){return function(){return t.forEach(function(t){return e.model.dismiss(t)})}}(this),f.render(function(e){return function(){return i.isMe(e.model)?d!==s||e.model.isDismissed(s)?d!==o||e.model.isDismissed(o)?f.div():f.div(function(){return f.createElement(a,{hasGold:!1,invitedMemberNames:r,onDismissBanner:c,localizedMonthsOfCreditMessage:m("months of trello gold on us",u)})}):f.div(function(){return f.createElement(a,{hasGold:!0,onDismissBanner:c})}):f.div()}}(this))},t.prototype.remove=function(){return l.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(p)},{}],571:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(215),i=e(534),o=e(80),a=e(129),u=e(522),c=e("underscore"),d=e(519),l=e(101),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.className="member-login",t.prototype.events={"click .js-primary":"setPrimary","click .js-remove":"confirmDeleteLogin"},t.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.dateAdded=a.idToDate(e.id).toISOString(),this.$el.html(d.fill("member_login",e)),o.update(this.el),this},t.prototype.setPrimary=function(e){return r({url:"/1/members/me/logins/"+this.model.id+"/primary",type:"put",success:function(e){return function(t){return e.model.set("primary",!0)}}(this)})},t.prototype.confirmDeleteLogin=function(e){return a.stop(e),this.model.hasConflict()?void this.trigger("requestSetPassword"):i.toggle("delete credential",this.popover({html:l("confirm.delete credential.text",{email:this.model.get("email")}),confirmBtnClass:"negate",fxConfirm:function(e){return function(){return e.deleteLogin()}}(this)}))},t.prototype.popover=function(e){return c.extend({elem:this.$(".js-remove")},e)},t.prototype.deleteLogin=function(){return r({url:"/1/members/me/logins/"+this.model.id,type:"delete",success:function(e){return function(t){return e.model.trigger("destroy",e.model,e.model.collection)}}(this)})},t}(u)},{}],572:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S=function(e,t){function n(){this.constructor=e}for(var r in t)T.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},T={}.hasOwnProperty;C=e("underscore"),r=e("jquery"),i=e(559),o=e(33),s=e(562),u=e(564),a=e(563),c=e(565),l=e(567),d=e(568),p=e(535),m=e(574),f=e(585),g=e(586),v=e(587),b=e(591),y=e(592),w=e(594),_=e(542),k=e(129),x=e(519),j=e(48),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:loginTypes change:prefs change:tokens change:credentials",this.frameDebounce(this.renderMainContent))},t.prototype.events={"click .js-change-avatar":"changeAvatar","click .js-change-name-and-bio":"changeUserInfo","click .js-change-password":"changePassword","click .js-change-email":"changeEmail","click .js-change-locale":"changeLocale","click .js-configure-2fa":"configure2FA","click .js-change-email-freq":"changeEmailFreq","click .js-allow-desktop-notifications":"allowDesktopNote","click .js-toggle-cb-mode":"toggleCB","click .js-confirm-delete-member":"deleteConfirm","click .js-add-email":"addEmail","click .js-mobile-temp-password":"mobileTempPassword"},t.prototype.renderMainContent=function(){var e,t,n,r;return n=this.model.toJSON({prefs:!0,hasPassword:!0}),n["avatarSource_"+n.avatarSource]=!0,n.canAllowDesktopNotifications=p.notEnabled(),n.cbEnabled=this.model.get("prefs").colorBlind,n.showMobileLoginPassword=C.any(this.model.get("credentials"),function(e){return"saml"===e.type}),this.$(".js-content").html(x.fill("member_account",n,{editable:o.isMe(this.model)})),this.$(".js-member-applications").html(this.subview(m,this.model).render().el),this.$(".js-member-sessions").html(this.subview(b,this.model).render().el),t=this.$(".js-credentials-section"),e=this.$(".js-credentials-list"),e.empty(),this.model.get("logins").length>0&&(r=this.collectionSubview(v,this.model.loginList,{model:this.model}),this.appendSubview(r,e)),this.$(".js-content").prepend(this.subview(g,this.model,{allowDismiss:!1}).render().el),this.setActiveView(".js-member-account"),this},t.prototype.changeUserInfo=function(e){return k.stop(e),j("Member View","Settings Page","Open Change User Info Menu"),_.toggle({elem:this.$(".js-change-name-and-bio"),view:new d({model:this.model,modelCache:this.modelCache})})},t.prototype.addEmail=function(e){return k.stop(e),j("Member View","Settings Page","Open Add Email Menu"),_.toggle({elem:r(e.target),view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.mobileTempPassword=function(e){return k.stop(e),j("Member View","Settings Page","Generate Temporary Mobile Password"),this.model.getMobileTempPassword(function(t){return _.toggle({elem:r(e.target),view:new w({tempPassword:t})})})},t.prototype.changeAvatar=function(e){return k.stop(e),j("Member View","Settings Page","Open Change Avatar Menu"),_.toggle({elem:this.$(".js-change-avatar"),view:new s({model:this.model,modelCache:this.modelCache})})},t.prototype.changePassword=function(e){return k.stop(e),j("Member View","Settings Page","Open Change Password Menu"),_.toggle({elem:this.$(".js-change-password"),view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.changeEmail=function(e){return k.stop(e),j("Member View","Settings Page","Open Change Email Menu"),_.toggle({elem:this.$(".js-change-email"),view:new u({model:this.model,modelCache:this.modelCache})})},t.prototype.configure2FA=function(e){return j("Member View","Settings Page","Configure 2FA")},t.prototype.changeLocale=function(e){var t;return k.stop(e),j("Member View","Settings Page","Change Language"),t=function(e,t){return e!==t?document.location.reload():void 0},_.toggle({elem:this.$(".js-change-locale"),view:new c({model:this.model,modelCache:this.modelCache,onChange:t})})},t.prototype.changeEmailFreq=function(e){return k.stop(e),j("Member View","Settings Page","Open Change Frequency Menu"),_.toggle({elem:this.$(".js-change-email-freq"),view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.allowDesktopNote=function(e){k.stop(e),j("Member View","Settings Page","Allow Desktop Notifications"),p.requestPermission().finally(function(e){return function(){return e.render()}}(this))},t.prototype.toggleCB=function(e){k.stop(e),j("Member View","Settings Page","Toggle Color Blind Mode"),this.model.toggleColorBlindMode()},t.prototype.deleteConfirm=function(e){k.stop(e),j("Member View","Settings Page","Open Delete Account Confirmation Menu"),_.toggle({elem:this.$(".js-confirm-delete-member"),view:new f({model:this.model,modelCache:this.modelCache})})},t}(y)},{}],573:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),i=e(33),s=e(542),a=e(600),u=e(602),c=e(129),l=e(522),d=e(48),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.hoverMember=function(e){var t;return t=r(e.target).closest(".item"),c.selectMenuItem(this.$(".pop-over-member-list"),".item",t)},t.prototype.openOption=function(e){var t,n,o,l;c.stop(e),d("Invitations","Open Role Selector"),l=r(e.target).closest(".js-select-member").find(".username").text(),o=this.modelCache.findOne("Member","username",l),n=!1,r(e.target).closest(".item.js-email-invite").length>0&&(n=!0,t=r(e.target).closest(".js-email-invite").find(".full-name").attr("name")),o?s.pushView({view:new a({modelCache:this.modelCache,model:o,parent:this.model,onSendInvite:this.willBePopped.bind(this),canMakeAdmin:o.get("confirmed")})}):s.pushView({view:new u({model:i.me(),modelCache:this.modelCache,parent:this.model,email:t,onSendInvite:this.willBePopped.bind(this),canMakeAdmin:!1})})},t}(l)},{}],574:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(604),o=e(522),s=e(519),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=function(){var e,t,n,r,o;return e=this.model.toJSON({prefs:!0}),o=null!=(t=e.tokens)?t:[],e.hasTokens=o.length>0,this.$el.html(s.fill("member_application_list",e)),r=function(){var e,t,r;for(r=[],e=0,t=o.length;t>e;e++)n=o[e],r.push(this.subview(i,this.model,n,n.id));return r}.call(this),this.appendSubviews(r,this.$(".js-list-member-applications")),this},t}(o)},{}],575:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(131),i=e("react"),s=e(514)("member"),t.exports=r=function(e){function t(e){t.__super__.constructor.call(this,e)}return a(t,e),t.prototype.displayName="MemberAvatar",t.prototype.shouldComponentUpdate=o,t.prototype.render=s.renderable(function(){var e,t,n,r,i,o,a,u,c;return u=this.props,e=u.avatarHash,c=u.username,t=u.fullName,n=u.initials,i=u.isDeactivated,r=u.isBoardAdmin,o=u.isOrganizationAdmin,a=u.onClick,s.div(function(){var a,u,l;return l=t+" ("+c+")",e?(a=[window.avatarDomain,e,"30.png"].join("/"),u=[window.avatarDomain,e,"50.png"].join("/"),s.img({class:"member-avatar",height:"30",width:"30",src:a,srcSet:a+" 1x, "+u+" 2x",alt:l,title:l})):null!=n&&s.span(".member-initials",{title:l},function(){return s.text(n)}),i||(r&&s.span(".member-type.admin",{title:s.l("this-member-is-an-admin-of-this-board")}),o&&s.span(".member-type.admin",{title:s.l("this-member-is-an-admin-of-this-organization")})),s.span(".member-gold-badge",{title:s.l("this-member-has-trello-gold")})})}),t}(i.Component)},{}],576:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I=function(e,t){function n(){this.constructor=e}for(var r in t)N.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},N={}.hasOwnProperty;r=e("jquery"),i=e(71),s=e(213),a=e(33),c=e(304),l=e(305),d=e(306),p=e(534),h=e(6),f=e(307),m=e(310),o=e(309),T=e(318),C=e(316),v=e(23),b=e(592),y=e(38),w=e(221),_=e(286),k=e(542),u=e(301),x=e("react"),j=e("react-dom"),S=e(513),M=e(319),O=e(101),B=e(238),P=e("moment"),E=e(110),A=e(519),D=e(48),L=e("recup"),t.exports=g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),t.prototype.renderMainContent=function(){return D("Member Billing Page","Open"),this.$(".js-content").empty(),null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-billing"),this.renderBanner(),this},t.prototype.renderReactSection=function(){return j.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){var e;return x.createElement(S,{},i.hasAccount(null!=(e=this.model.get("paidAccount"))?e.standing:void 0)?this.getBillingComponent():this.getSignUpForGoldComponent())},t.prototype.getBillingComponent=function(){var e;return e=M(this.model,v,{type:"gold",productName:O("products.gold"),productIconClass:"trello-gold",detailsUrl:"/gold",onRenewClick:B(this,"renew"),cancelProduct:B(this,"cancel"),onSwitchToYearly:B(this,"switchToYearly"),didntGetAuthStatus:function(e){return function(){return y.loadMemberAccountData(e.model.get("username")).done()}}(this),didGetAuthStatus:function(e){return function(){return y.loadMemberAccountData(e.model.get("username")).done()}}(this),onChangeBillingContactClick:B(this,"changeBillingContactPopover"),reactivateProduct:B(w,"reactivate",this.model),changeCreditCard:B(w,"changeCreditCard",this.model),createPaidAccount:B(w,"createAccount",this.model),paidAccountPoll:B(s,{url:this.model.urlRoot+"/"+this.model.id+"?paid_account=true"}),onClickChangeCC:B(this,"changeCreditCardPopover"),onChangeAdditionalDetailsClick:B(this,"changeAdditionalDetailsPopover")}),x.createElement(u,e)},t.prototype.getSignUpForGoldComponent=function(){return L.render(function(e){return function(){return L.div(function(){var t,n,r,i,u,c,l;return L.createElement(_,{stringsKey:"gold",subtitleCount:1,infoUrl:"/gold",epilogueCount:0,icon:"trello-gold"}),t=v.currentPriceObjectForModel(e.model),L.createElement(f,{onSubmit:B(w,"createAccount",e.model),doPoll:B(s,{url:e.model.urlRoot+"/"+e.model.id+"?paid_account=true"}),buttonKey:"upgrade-me",contentBuilders:[E(C,{productName:"Trello Gold",monthlyProduct:t.monthly,yearlyProduct:t.yearly,defaultProduct:t.monthly.productNumber,billingStrategy:t.billingStrategy}),E(m),E(o),E(T)],extraData:{billingContactFullName:null!=(n=null!=(r=e.model.get("paidAccount"))?r.contactFullName:void 0)?n:a.me().get("fullName"),billingContactEmail:null!=(i=null!=(u=e.model.get("paidAccount"))?u.contactEmail:void 0)?i:a.me().get("email"),billingContactLocale:null!=(c=null!=(l=e.model.get("paidAccount"))?l.contactLocale:void 0)?c:a.me().getPref("locale")},didntGetAuthStatus:function(){return y.loadMemberAccountData(e.model.get("username")).done()},didGetAuthStatus:function(){return h.memberBoardsView()}})})}}(this))},t.prototype.renderBanner=function(){var e,t,n,r,i,o;if(this.model.get("idPremOrgsAdmin").length>0&&(e=this.model.organizationList.filter(function(e){return!e.paysWithPurchaseOrder()}),e.length>0))for(n=A.fill("member_billing_org_link_list"),this.$(".js-content").prepend(n),r=0,i=e.length;i>r;r++)o=e[r],t=o.toJSON(),o.isPremium()&&o.owned()&&(t.billingLink=h.getOrganizationBillingUrl(o),this.$(".js-org-link-list").append(A.fill("member_billing_org_link",t)));return this},t.prototype.cancel=function(){return D("Member View","Billing Page","Cancel Gold"),w.cancel(this.model).then(function(e){return function(t){return D("Member","Successfully Canceled Paid Account"),e.model.set(t)}}(this))},t.prototype.renew=function(){return D("Member View","Billing Page","Renew Expiring Gold Subscription"),w.renew(this.model).then(function(e){return function(t){return D("Member","Successfully Renewed Expiring Yearly Gold Subscription"),e.model.set(t)}}(this)).done()},t.prototype.switchToYearly=function(e){return p.toggle("yearly billing switch",{elem:e,model:this.model,confirmBtnClass:"primary",fxConfirm:function(e){return function(t){return w.changeProduct(e.model,v.currentProducts.yearly).then(function(t){return D("Organization","Successfully Switched Business Class to Yearly Billing"),e.model.set(t)}).done()}}(this)})},t.prototype.changeBillingContactPopover=function(e){return D("Member View","Billing Page","Open Change Billing Contact Info"),k.toggle({elem:e,view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.changeCreditCardPopover=function(e){return D("Member View","Billing Page","Open Change Credit Card"),k.toggle({elem:e,view:new d({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAdditionalDetailsPopover=function(e){return D("Member View","Billing Page","Open Change Additional Details"),k.toggle({elem:e,view:new c({model:this.model,modelCache:this.modelCache})})},t.prototype.remove=function(){return j.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(b)},{}],577:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(152),i=e(165),o=e(277),a=e(222),c=e(521),u=e(522),l=e(106),d=e(519),t.exports=l(c,s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-more-actions":"loadMoreActions"},t.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board.memberList,"add remove reset",this.frameDebounce(this.render)),this.actionListView=this.collectionSubview(o,new i(this.model.getActions(this.board),{modelCache:this.modelCache}),{renderOpts:{context:this.model,readOnly:!0}}),this.listenTo(this.modelCache,"add:Action:"+this.model.id+" remove:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.model.getActions(e.board),{silent:!0}),e.renderActions()}}(this)),this.idModels=[this.board.id],this.nextPage=0,this.loadMoreActions()},t.prototype.render=function(){return this.$el.html(d.fill("board_member_profile",this.model.toJSON())),this.actionListView.setElement(this.$(".list-actions")[0]),this.renderActions()},t.prototype.renderActions=function(){return this.actionListView.render(),this.$(".js-more-actions").toggle(this.hasMoreActions()),this},t.prototype.getActionsFilter=function(){return a.memberActions},t}(u))},{}],578:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N,V,$,R,z,U=function(e,t){function n(){this.constructor=e}for(var r in t)F.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},F={}.hasOwnProperty;P=e("underscore"),r=e("jquery"),i=e(33),o=e(327),s=e(328),a=e(329),u=e(330),c=e(334),l=e(335),d=e(336),p=e(337),h=e(561),m=e(15),f=e(6),g=e(379),v=e(620),b=e(80),E=e(238),D=e(101),_=e(586),y=e(570),C=e(596),x=e(542),j=e("bluebird"),S=e("react"),T=e("react-dom"),M=e(513),N=e("recup"),V=e(85),$=e(519),R=e(48),z=e(53),B=e(129),O=e(522),k=e(37),I=e(132),A=e(128),L=e(127),t.exports=w=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.organizationList,"add remove reset change:memberships",this.frameDebounce(this.renderBanner)),this.listenTo(this.model.organizationList,"add remove reset change:name change:displayName change:logoHash change:products",this.frameDebounce(this.renderReactSection)),this.listenTo(this.model.boardList,"add remove reset change:name change:idOrganization change:dateLastActivity change:dateLastView",this.frameDebounce(this.renderReactSection)),this.listenTo(this.model.boardStarList,"add remove reset change:pos",this.renderReactSection),this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderReactSection),this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderBanner)},t.prototype.className="member-boards-view",t.prototype.getReactRoot=function(){return S.createElement(M,{},this.getMemberBoardsElements())},t.prototype.renderReactSection=function(){return T.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.renderBanner=function(){var e,t,n,r,i;return e=this.$(".js-boards-page-banners").empty(),i=A(this.model),t=i.bannerToDisplay,r=i.idBannersToDismiss,n=L(this.model),t?n&&!t.doesIncludeGold?e.prepend(this.subview(y,this.model,{banner:n,idNuxBannersToDismiss:r}).render().el):(e.prepend(new C({bannerToDisplay:t,idBannersToDismiss:r,model:this.model}).render().el),R("Boards Page","NUX Banner Displayed",t.type),z("Boards Page","display","nux banner","","to a user","",t.type)):n?e.prepend(this.subview(y,this.model,{banner:n}).render().el):void 0},t.prototype.render=function(){return this.$el.html('<div class="js-boards-page-banners"></div><div class="js-boards-page"></div>'),null==this.$reactRoot&&(this.$reactRoot=this.$(".js-boards-page")),this.renderReactSection(),this.renderBanner(),this},t.prototype.getMemberBoardsElements=function(){return N.render(function(e){return function(){return N.div(function(){var t,n,r,a,u,d,p,h;for(p=(null!=m?m.enabled:void 0)&&!e.model.isDismissed(m.id)&&window.locale===m.locale&&Date.now()<b.parse(m.dateExpires),h=function(){var t;return(null!=(t=V("northstar"))?t.inExperiment:void 0)&&!e.model.isDismissed("northstar-feedback")&&!i.me().accountNewerThan(new Date(2017,6,10))&&!i.me().accountNewerThan(B.dateBefore({hours:1}))},p?(e._recordedDisplayed||(e._recordedDisplayed=!0,R("Boards Page Announcement","Displayed",m.id)),N.createElement(o,{icon:m.icon,message:m.message,onClick:function(e){return null!=e.target.href?R("Boards Page Announcement","Click",m.id,e.target.href):void 0},onDismiss:function(t){return e.model.dismiss(m.id),R("Boards Page Announcement","Dismiss",m.id)}})):h()&&(r=V("northstar").get("variation"),N.createElement(o,{icon:m.icon,message:["control"===r?"Got a minute?":"We've got a new look.","[Tell us what you think](https://trello.typeform.com/to/lWGiM3?memberid="+i.myId()+"&testvar="+r+")!"].join(" "),onClick:function(t){return null!=t.target.href?(e.model.dismiss("northstar-feedback"),R("Boards Page Announcement","Click","northstar-feedback",t.target.href)):void 0},onDismiss:function(t){return e.model.dismiss("northstar-feedback"),R("Boards Page Announcement","Dismiss","northstar-feedback")}})),u={items:e.getStarredBoards().map(E(e,"boardToBoardItemDndElement")),header:e.getStarredBoardsHeader(),noSidebarMod:!0,isStarredSection:!0},u.items.length>0&&N.createElement(l,u),u={items:e.getMyBoards().map(E(e,"boardToBoardItemElement")),header:e.getMyBoardsHeader(),mayBeSorted:!0,noSidebarMod:!0,createNewItem:S.createElement(s,{newBoard:E(e,"newBoard",e.model)})},N.createElement(c,u),d=e.model.getSortedOrgs(),t=0,n=d.length;n>t;t++)a=d[t],u={items:e.getOrgBoards(a).map(E(e,"boardToBoardItemElement")),header:e.getOrgHeader(a),mayBeSorted:!0,noSidebarMod:!0,createNewItem:S.createElement(s,{newBoard:E(e,"newBoard",a)}),orgId:a.id,orgName:a.get("name")},N.createElement(c,u);return N.addElement(e.getAddOrgButtonElement())})}}(this))},t.prototype.backgroundObjForBoard=function(e){var t,n,r,i;return P.extend({brightness:e.getPref("backgroundBrightness")},e.getPref("backgroundTile")?{image:e.getPref("backgroundImage"),tiled:!0}:(t=null!=(n=null!=(r=B.smallestPreviewBiggerThan(e.getPref("backgroundImageScaled"),400,200))?r.url:void 0)?n:e.getPref("backgroundImage"))?{image:t,tiled:!1}:{color:null!=(i=e.getPref("backgroundColor"))?i:e.getClientBackgroundColor("blue")})},t.prototype.boardToBoardItemDndElement=function(e){var t,n;return t=this.boardToBoardItemProps(e),t.onDragHover=function(t){return function(t){var n,r,o,s;return r=i.me().boardStarList,n=r.getBoardStar(t),o=r.getBoardIndex(e.id),s=r.getNewPos(n,o),n.set({pos:s})}}(this),t.onDragEnd=function(){var t,n;n=i.me().boardStarList,t=n.getBoardStar(e.id),j.using(k.getLock(),function(){return I(t,"update",{pos:t.get("pos")}).catch(function(){})}).done()},t.orgname=null!=(n=e.getOrganization())?n.get("displayName"):void 0,t.isDraggable=!0,S.createElement(u,t)},t.prototype.boardToBoardItemElement=function(e){return S.createElement(a,this.boardToBoardItemProps(e))},t.prototype.boardToBoardItemProps=function(e){var t;return{id:e.id,name:e.get("name"),hasUnseenActivity:e.hasUnseenActivity(),dateLastActivity:new Date(null!=(t=e.get("dateLastActivity"))?t:B.idToDate(e.id)),isLessActive:e.isLessActive(),background:this.backgroundObjForBoard(e),showOptions:i.isLoggedIn(),isStarred:null!=i.me().boardStarList.getBoardStar(e.id),relUrl:e.getUrl(),onStarClick:function(e){return function(e){var t;t=i.me().boardStarList,j.using(k.getLock(),function(){return null==t.getBoardStar(e)?t.starBoard(e):t.unstarBoard(e)}).done()}}(this),badgeComponents:[],tagComponents:[],key:e.id}},t.prototype.newBoard=function(e,t){x.toggle({elem:t,top:0,view:g,options:{model:e,modelCache:this.modelCache}}),R("Boards View","Clicked 'Create new board' Button")},t.prototype.getAddOrgButtonElement=function(){var e;return e={onClick:E(this,"showAddOrgPopOver")},S.createElement(h,e)},t.prototype.showAddOrgPopOver=function(e){return R("Boards View","Clicked Add Org Button"),x.toggle({elem:e,top:0,view:v,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.getMyBoardsHeader=function(){return S.createElement(d,{title:D("board section title.personal boards"),iconClass:"member"})},t.prototype.getMyBoards=function(){return P.filter(this.model.boardList.models,function(e){return!e.isOrgBoard()&&e.isOpen()})},t.prototype.getOrgHeader=function(e){var t;return t={title:e.get("displayName"),iconClass:"organization",logoHash:e.get("logoHash"),linkElements:[{url:f.getOrganizationUrl(e),iconClass:"board",titleKey:"boards",trackOnClick:function(){return R("Boards View","Clicked Team Boards Button")}},{url:f.getOrganizationMembersUrl(e),iconClass:"member",titleKey:"members",trackOnClick:function(){return R("Boards View","Clicked Team Members Button")}},{url:f.getOrganizationAccountUrl(e),iconClass:"gear",titleKey:"settings",trackOnClick:function(){return R("Boards View","Clicked Team Settings Button")}}].map(E.choke(1,S,"createElement",p))},e.isFeatureEnabled("enterpriseUI")?(t.smallIconClass="enterprise",t.smallIconTitleKey="enterprise"):e.isPremium()&&(t.smallIconClass="business-class",t.smallIconTitleKey="business-class"),S.createElement(d,t)},t.prototype.getOrgBoards=function(e){return P.filter(this.model.boardList.models,function(t){return function(t){var n;return(null!=(n=t.getOrganization())?n.id:void 0)===e.id&&t.isOpen()}}(this))},t.prototype.getStarredBoardsHeader=function(){return S.createElement(d,{title:D("board section title.starred boards"),iconClass:"star"})},t.prototype.getStarredBoards=function(){return P.filter(this.model.boardStarList.getBoards(),function(e){return e.isOpen()})},t.prototype.remove=function(){return T.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(O)},{}],579:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;l=e("underscore"),d=e(76),r=e(14),i=e(490),o=e(421),s=e(6),p=e(101),h=e(725),m=e(838),u=e(129),c=e(522),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.className="window-module",t.prototype.initialize=function(e){return this.cards=e.cards,d(this.cards.length>0)},t.prototype.events=function(){return{click:function(e){return this.$(e.target).closest("a").length?void 0:s.navigate(s.getBoardUrl(this.model),{trigger:!0})}}},t.prototype.render=function(){var e,t,n,s,a,c,d,f,g,v,b,y,w,_,k;if(f=null!=(d=this.model.getOrganization())?{url:d.get("url"),name:d.get("displayName")}:void 0,c=l.groupBy(this.cards,function(e){return e.get("idList")}),this.$el.html(m({name:this.model.get("name"),url:this.model.get("url"),permissionLevel:this.model.get("prefs").permissionLevel,starred:this.model.isStarred(),org:f,lists:this.model.listList.chain().filter(function(e){return c[e.id]}).map(function(e){return{id:e.id,name:e.get("name")}}).value()})),t=this.$(".js-permission-level"),s={permIconClass:i.getPermLevelIconClassForBoard(this.model),permText:p(["board perms",this.model.getPermLevel(),"name"])},t.html(h(s)),g=this.model.get("prefs"),e=this.$(".js-board"),null!=g.backgroundColor)a=this.model.getClientBackgroundColor(g.background),e.css({"background-color":a});else{switch(k=r.hasOwnProperty(g.background)&&null!=(v=null!=(b=u.smallestPreviewBiggerThan(g.backgroundImageScaled,640,480))?b.url:void 0)?v:g.backgroundImage,_=g.backgroundTile?k:null!=(y=null!=(w=u.smallestPreviewBiggerThan(g.backgroundImageScaled,64,64))?w.url:void 0)?y:g.backgroundImage,e.addClass("body-custom-board-background"),g.backgroundTile&&e.addClass("body-custom-board-background-tiled"),n=g.backgroundBrightness){case"light":e.addClass("body-light-board-background");break;case"dark":e.addClass("body-dark-board-background")}e.css({"background-image":'url("'+k+'")'})}return l.each(this.$(".js-list"),function(e){return function(t){var n,r,i;return n=e.$(t),r=n.attr("data-idList"),i=l.chain(c[r]).sortBy(function(e){return e.get("pos")}).map(function(t){return e.subview(o,t)}).value(),e.appendSubviews(i,n)}}(this)),this},t}(c)},{}],580:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(80),i=e(424),s=e(129),a=e(522),u=e("underscore"),c=e(519),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="window-module",t.prototype.initialize=function(e){this.templateData=e.templateData},t.prototype.render=function(){var e;return e={iconType:"clock",isOverdue:!1,isDueSoon:!1},u.extend(e,this.templateData),this.groupedCards.length>0?(this.$el.html(c.fill("member_cards_date",e)),this.renderCards()):this.$el.empty(),this},t.prototype.renderCards=function(){var e;return e=this.groupedCards.map(function(e){return function(t){return e.subview(i,t,{showBoard:!0})}}(this)),this.appendSubviews(e,this.$(".js-list"))},t}(a)},{}],581:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;i=e(274),o=e(542),s=e(129),a=e(522),u=e(841),c=e(48),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),
t.prototype.viewTitleKey="filter cards",t.prototype.initialize=function(){return this.listenTo(i,"change:cardsPageFilter",function(){return this.render()})},t.prototype.events={"click .js-set-filter":"setFilter"},t.prototype.render=function(){return this.$el.html(u({filter:i.getCardsPageFilter()})),this},t.prototype.setFilter=function(e){var t;t=this.$(e.currentTarget).attr("data-filter"),s.stop(e),i.setCardsPageFilter(t),o.hide(),c("Member View","Cards Page","Filter",t)},t}(a)},{}],582:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(33),o=e(274),s=e(542),a=e(129),u=e(522),l=e(842),d=e(48),c=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="filter cards",t.prototype.initialize=function(){return this.listenTo(o,"change:cardsPageGroup",function(){return this.render()})},t.prototype.events={"click .js-set-group":"setGroup"},t.prototype.render=function(){var e;return e=r.isMe(this.model)?this.model.organizationList.models:this.modelCache.find("Organization",function(e){return function(t){return null!=t.getMembershipFor(e.model)}}(this)),this.$el.html(l({group:o.getCardsPageGroup(),organizations:c.chain(e).map(function(e){return{id:e.id,name:e.get("displayName")}}).sortBy(function(e){var t;return t=e.name,t.toLowerCase()}).value()})),this},t.prototype.setGroup=function(e){var t;t=this.$(e.currentTarget).attr("data-group"),a.stop(e),o.setCardsPageGroup(t),s.hide(),d("Member View","Cards Page","Group",t)},t}(u)},{}],583:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;i=e(274),o=e(542),s=e(129),a=e(522),u=e(843),c=e(48),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="sort cards",t.prototype.initialize=function(){return this.listenTo(i,"change:cardsPageSortType",function(){return this.render()})},t.prototype.events={"click .js-sort-by-board":"sortByBoard","click .js-sort-by-due-date":"sortByDueDate"},t.prototype.render=function(){return this.$el.html(u({sort:i.getCardsPageSortType()})),this},t.prototype.sortByBoard=function(e){s.stop(e),i.sortCardsPageByBoard(),o.hide(),c("Member View","Cards Page","Sort by Board")},t.prototype.sortByDueDate=function(e){s.stop(e),i.sortCardsPageByDate(),o.hide(),c("Member View","Cards Page","Sort by Due Date")},t}(a)},{}],584:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O=function(e,t){function n(){this.constructor=e}for(var r in t)P.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},P={}.hasOwnProperty,E=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(216),i=e(33),o=e(6),s=e(80),k=e(782),a=e(579),c=e(581),l=e(582),u=e(580),d=e(583),h=e(274),m=e(592),f=e(38),g=e(542),v=e("bluebird"),b=e(129),y=e("underscore"),T=e(517)(),M=e(837),B=e(48),S=e("moment"),x=e(101),_=function(e){return Date.now()-b.getMs({days:e})},w=function(e){return function(t){return s.parse(t.get("dateLastActivity"))>_(e)}},C={"active-day":w(1),"active-week":w(7),"active-month":w(30),"active-year":w(365),all:function(e){return!0}},j=T.renderable(function(){return T.div(".spinner.loading")}),t.exports=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return O(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this._oldestLoaded=null,this._loadedUnknown={},this.listenTo(this.model.boardList,"add remove reset",this.frameDebounce(this.renderMainContent)),this.listenTo(this.model.organizationList,"add remove reset change:memberships",this.frameDebounce(this.renderMainContent)),this.listenTo(h,"change:cardsPageSortType change:cardsPageGroup",function(){return this.renderCardsSection()}),this.listenTo(h,"change:cardsPageGroup",function(){return this._updateUrl()}),this.listenTo(h,"change:cardsPageFilter",function(){return this.getData()}),v.try(function(e){return function(){var t,n,r;return t=e.options.orgname&&null!=(r=e.modelCache.findOne("Organization","name",e.options.orgname))?r.id:void 0,null==t&&(t=e.getSelectedGroup()),n=function(t){var n;return"personal"===t||"all"===t?!0:(n=e.modelCache.get("Organization",t),null!=(null!=n?n.getMembershipFor(e.model):void 0)||E.call(e.model.get("idOrganizations"),t)>=0)},n(t)?t:f.loadOrganizationMembersMinimal(t).then(function(e){return n(t)?t:"all"})}}(this)).then(function(e){return function(t){return e.getSelectedGroup()!==t&&h.setCardsPageGroup(t),t!==e.options.orgname?e._updateUrl():void 0}}(this)).done()},t.prototype.events={"click .js-toggle-sort":"toggleSort","click .js-set-filter":"toggleFilter","click .js-set-group":"toggleGroup"},t.prototype._updateUrl=function(){var e,t,n;return e=this.getSelectedGroup(),n=(t=this.modelCache.get("Organization",e))?o.getMemberCardsUrl(this.model.get("username"),t.get("name")):"personal"===e?o.getMemberCardsUrl(this.model.get("username"),"personal"):o.getMemberCardsUrl(this.model.get("username")),o.navigate(n,{replace:!0})},t.prototype.renderMainContent=function(){return this.setActiveView(".js-member-cards"),this.$(".js-content").html(M({showGroup:"all"!==this.getSelectedGroup()||this.model.organizationList.length>0})),this.renderCardsSection(),this},t.prototype.getData=function(){var e,t,n,o,s,a;return e=this.getFilterType(),t=this.getSelectedGroup(),n=function(){switch(e){case"active-day":return _(1);case"active-week":return _(7);case"active-month":return _(30);case"active-year":return _(365);default:return void 0}}(),s=_(14600),o=null!=n?n:s,a=function(e){return function(){return e.loading=!0,e.renderCardsSection()}}(this),v.try(function(e){return function(){var n;if(!i.isMe(e.model)&&!e._loadedMemberships)return e._loadedMemberships=!0,a(),n=i.me(),f.loadMyOrganizations().then(function(){var r;return r=n.organizationList.filter(function(e){return e.isFeatureEnabled("deactivated")}),0!==r.length?f.loadMemberOrganizationsDeactivatedMembers().then(function(){var n;return"all"===t?(n=r.filter(function(t){return t.isDeactivated(e.model)}),v.map(n,function(t){return f.loadOrgMemberCardData(t.id,e.model.id).then(function(){return e._loadedUnknown[t.id]=!0})},{concurrency:3})):void 0}):void 0})}}(this)).then(function(e){return function(){var r;if(b.checkId(t)){if(e._loadedUnknown[t])return;if(r=e.modelCache.get("Organization",t),null==r||r.isDeactivated(e.model)||null==r.getMembershipFor(e.model))return a(),f.loadOrgMemberCardData(r.id,e.model.id).then(function(){return e._loadedUnknown[r.id]=!0,e._oldestLoaded=s})}return null==e._oldestLoaded||e._oldestLoaded>o?(a(),f.loadMemberCards(e.model.id,n).then(function(){return e._oldestLoaded=o})):void 0}}(this)).catch(r,function(e){return function(){}}(this)).then(function(e){return function(){return e.loading=!1,e.renderCardsSection()}}(this)).done()},t.prototype.getCards=function(){var e,t;return e=this.getFilterType(),t=this.getSelectedGroup(),this.modelCache.find("Card",function(n){return function(r){var i;return i=r.getBoard(),r.isOpen()&&r.hasMember(n.model)&&(null!=i?i.isOpen():void 0)&&function(){switch(t){case"all":return!0;case"personal":return null==(null!=i?i.getOrganization():void 0);default:return(null!=i?i.get("idOrganization"):void 0)===t}}()&&(!C.hasOwnProperty(e)||C[e](r))}}(this))},t.prototype.getSortType=function(){return h.getCardsPageSortType()},t.prototype.getFilterType=function(){return h.getCardsPageFilter()},t.prototype.getSelectedGroup=function(){var e;return e=h.getCardsPageGroup(),"personal"===e||"all"===e||null!=this.modelCache.get("Organization",e)?e:"all"},t.prototype.renderSortText=function(){var e,t;return this.$(".js-sort-text").html(x(["sorting cards by",this.getSortType()])),this.$(".js-filter-text").html(x(["filtering cards by",this.getFilterType()])),e=this.getSelectedGroup(),this.$(".js-group-text").html("personal"===e?x(["showing cards in group","personal"]):null!=e&&null!=(t=this.modelCache.get("Organization",e))?x(["showing cards in group","organization"],{name:t.get("displayName")}):x(["showing cards in group","all"]))},t.prototype.toggleSort=function(e){b.stop(e),B("Member View","Cards Page","Open Sorting Options"),g.toggle({elem:this.$(".js-toggle-sort"),view:new d({model:this.model,modelCache:this.modelCache})})},t.prototype.toggleFilter=function(e){b.stop(e),B("Member View","Cards Page","Open Filtering Options"),g.toggle({elem:this.$(".js-set-filter"),view:new c({model:this.model,modelCache:this.modelCache})})},t.prototype.toggleGroup=function(e){return b.stop(e),B("Member View","Cards Page","Open Group Options"),g.toggle({elem:this.$(".js-set-group"),view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.clearContent=function(){return this.$(".js-cards-content").empty()},t.prototype.renderCardsSection=function(){if(this.clearContent(),this.renderSortText(),this.loading)this.renderLoading();else switch(this.getSortType()){case"board":this.renderBoardSort();break;case"date":this.renderDateSort()}},t.prototype._appendNoVisibleCards=function(){var e,t;t=x(i.isMe(this.model)?"no assigned cards.at all":"no assigned cards.that you can see"),e={message:t,classes:"gutter",style:"padding: 60px 10px;"},this.$(".js-cards-content").html(k(e))},t.prototype.renderLoading=function(){return this.$(".js-cards-content").html(j())},t.prototype.renderBoardSort=function(){var e,t,n,r,i,o,s,u,c;for(r=this.getCards(),i=!1,n=y.chain(r).map(function(e){return e.getBoard()}).uniq().compact().filter(function(e){return null!=e?e.isOpen():void 0}).sortBy(function(e){return e.get("name").toLowerCase()}).sortBy(function(e){return e.isStarred()?0:1}).value(),o=0,u=n.length;u>o;o++)e=n[o],t=y.filter(r,function(t){return function(t){return t.get("idBoard")===e.id}}(this)),s=y.chain(t).pluck("id").sort().value().join(","),y.isEmpty(t)||(i=!0,c=this.subview(a,e,{cards:t},s),this.appendSubview(c,this.$(".js-cards-content")));return i||this._appendNoVisibleCards(),this},t.prototype.renderDateSort=function(){var e,t,n,r,o,a,c,l,d,p,h,m;n=function(e,t){var n,r;return r=S().add(e,"days"),n=S().add(t,"days"),function(e,t){return!t&&S(e).isBetween(r,n)}},e=function(e){var t;return t=e.get("due"),null!=t?s.parse(t):null},a={"overdue cards":{fxTest:function(e,t){return!t&&S(e).isBefore(S())},data:{isOverdue:!0}},"due in the next day":{fxTest:n(0,1),data:{isDueSoon:!0}},"due in the next 7 days":{fxTest:n(1,7)},"due in the next month":{fxTest:n(7,28)},"due later":{fxTest:function(e,t){return!t&&S(e).isAfter(S().add(28,"days"))}},"due date met":{fxTest:function(e,t){return t}},"cards with no due date":{fxTest:function(e){return null==e},data:{iconType:"card"}}},h=y.sortBy(this.getCards(),function(e){return function(e){var t;return null!=(t=e.get("due"))?t:""}}(this)),c=!1;for(l in a)d=a[l],r=d.fxTest,t=d.data,o=h.filter(function(t){return function(t){return r(e(t),t.get("dueComplete"))}}(this)),y.isEmpty(o)||(c=!0,m=y.extend({header:x(["card group headers",l])},t),p=this.subview(u,i.me(),{templateData:m},"datesectionview-"+l),p.groupedCards=o,this.appendSubview(p,this.$(".js-cards-content")));return c||this._appendNoVisibleCards(),this},t}(m)},{}],585:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(532),o=e(542),s=e(129),a=e(522),c=e(519),l=e(48),u=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="delete account",t.prototype.events={"click .js-delete-member":"deleteMember","click .js-cancel-delete":"cancelDeleteMember"},t.prototype.render=function(){var e;return e=this,this.$el.html(c.fill("popover_confirm_member_delete",this.model.toJSON())),this},t.prototype.deleteMember=function(e){s.stop(e),this.$(".js-delete-member").attr("disabled","disabled"),this.model.run("deleteAccount",{msg:"troodbye!"},function(){o.hide(),r.flash("email sent","confirm"),l("Member","Sent Account Delete Email")})},t.prototype.cancelDeleteMember=function(e){s.stop(e),o.hide()},t}(a)},{}],586:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(532),i=e(33),o=e(23),a=e(38),u=e(129),c=e(522),l=e("underscore"),d=e(847),p=e(848),h=e(101),m=e(99),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderDebounced),this.listenTo(this.model,"change:paidAccount",this.renderDebounced)},t.prototype.events={"click .js-close-modal":"closeGoldEarned","click .js-close-intro-helper":"closeGoldIntro","click .js-start-using-gold":"startUsingGold"},t.prototype.render=function(){var e,t,n,r,o,s;return this.$el.empty(),i.isMe(this.model)?(s=this.viewShown,this.model.isGold()&&!this.model.isDismissed("GoldIntro")?(this.viewShown="intro",this.$el.html(p({hasThreePowerups:this.model.isFeatureEnabled("threePlugins")}))):this.model.isDismissed("GoldEarned")&&this.options.allowDismiss||this.activating||(this.viewShown="earned",t=this.model.get("credits"),o=l.filter(t,function(e){var t;return!e.applied&&e.count>0&&("invitation"===(t=e.type)||"promoCode"===t)}),e=l.reduce(o,function(e,t){return e+t.count},0),e&&(e>12&&(e=12),r=l.chain(o).filter(function(e){return"invitation"===e.type&&null!=e.memberInvited}).pluck("memberInvited").pluck("fullName").value(),n={hasInvitations:r.length>0,joinedNames:r,localizedCongratulations:m("months of trello gold",e),showClose:this.options.allowDismiss,hasGold:this.model.isGold()},this.$el.html(d(n)))),null!=s&&s!==this.viewShown&&this.delegateEvents(),this):this},t.prototype.refreshPaidAccount=function(){return null==this.startedPolling&&(this.startedPolling=Date.now()),this.startedPolling+u.getMs({minutes:1})<Date.now()?(r.hide("activating"),void r.show("activating gold timeout","error","activating-failed")):a.loadMemberPaidAccount(this.model.id).then(function(e){return function(){e.model.isGold()?(delete e.startedPolling,e.activating=!1,r.hide("activating")):e.setTimeout(l.bind(e.refreshPaidAccount,e),u.getMs({seconds:1}))}}(this)).done()},t.prototype.startUsingGold=function(e){return u.stop(e),this.activating=!0,r.show("activating gold","info","activating"),this.render(),this.model.run("unpaidAccount",{products:[o.productShortNames.trelloGoldMonthly]},function(e){return function(t,n){return null==t&&n?e.refreshPaidAccount():void 0}}(this))},t.prototype.closeGoldEarned=function(e){return u.stop(e),this.model.dismiss("GoldEarned")},t.prototype.closeGoldIntro=function(e){return u.stop(e),this.model.dismiss("GoldIntro")},t}(c)},{}],587:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(567),i=e(491),o=e(534),s=e(571),u=e(542),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewType=s,t.prototype.initialize=function(){return this.listenTo(this,"requestSetPassword",this.showSetPassword),t.__super__.initialize.apply(this,arguments)},t.prototype.showSetPassword=function(e){return o.toggle("cant remove credential",e.popover({confirmBtnClass:"confirm",fxConfirm:function(t){return function(n){return u.show(e.popover({view:r,options:{model:t.model,modelCache:t.modelCache}}))}}(this)}))},t}(i)},{}],588:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;i=e(37),o=e(500),s=e(38),a=e(205),u=e(606),c=e("react"),d=e(514)("member_notifications"),l=e("underscore"),r=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.loadMore=this.loadMore.bind(this),this.updateNotifications=this.updateNotifications.bind(this),this.state={nextPage:1,isMore:!1,notifications:[]}}return p(t,e),t.prototype.displayName="MemberNotifications",t.prototype.componentDidMount=function(){return this.props.listenTo("add:Notification remove:Notification change:Notification",this.updateNotifications),this.updateNotifications()},t.prototype.updateNotifications=function(){return this.setState({notifications:a.sortedByDateDescending(i),isMore:!0})},t.prototype.loadMore=function(){return s.loadMoreNotificationData(this.props.member.get("username"),this.state.nextPage).then(function(e){return function(t){return e.setState({nextPage:e.state.nextPage+1,isMore:t.length>9,notifications:a.sortedByDateDescending(i)})}}(this)).done()},t.prototype.render=d.renderable(function(){return d.div(function(e){return function(){return d.div(".window-module-title",function(){return d.span(".window-module-title-icon.icon-lg.icon-notification"),d.h3(function(){return d.format("notifications")})}),0===e.state.notifications.length&&d.div(".empty-list",function(){return d.format("no-notifications")}),d.div(".js-list-notifications",function(){return d.createElement(u,{notifications:e.state.notifications,context:"notifications-page"})}),d.a(".show-more.js-more-notifications",{onClick:e.loadMore,class:d.classify({hide:!e.state.isMore})},function(){return d.format("load-more-notifications")})}}(this))}),t}(c.Component),t.exports=o(r)},{}],589:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;s=e(38),i=e(588),a=e("react"),u=e("react-dom"),c=e(513),d=e("recup"),l=e(522),r=e("jquery"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.className="member-notifications-view",t.prototype.renderOnce=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$el.prepend(this.reactRoot),this.renderReactSection(),this},t.prototype.getReactRoot=function(){return a.createElement(c,{},this.getNotificationListComponent())},t.prototype.renderReactSection=function(){return u.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getNotificationListComponent=function(){return d.render(function(e){return function(){return d.div(function(){return d.createElement(i,{member:e.model})})}}(this))},t}(l)},{}],590:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e(165),i=e(277),s=e(592),a=e(647),u=e(222),c=e(521),l=e(106),d=e(519),p=e(48),t.exports=l(c,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.events={"click .js-more-actions":"loadMoreActionsAndRemoveDateLimit"},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),p("Member Profile Page","Open"),this.limit=10,this.nextPage=1+Math.floor(this.getActions().length/this.limit),this.daysBack=u.memberProfile_daysBack,this.actionListView=this.collectionSubview(i,new r(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{context:this.model,showBoard:!0,showOrganization:!0,readOnly:!0}}),this.listenTo(this.model.organizationList,"add remove reset",this.frameDebounce(this.renderMainContent)),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.getActions(),{silent:!0}),e.renderActions()}}(this))},t.prototype.renderMainContent=function(){var e;return e=this.model.toJSON(),this.setActiveView(".js-member-profile"),this.$(".js-content").html(d.fill("member_profile",e)),this.defer(function(e){return function(){var t,n;return e.model.organizationList.length>0?(n=e.subview(a,e.model),t=e.$(".js-list-orgs").empty(),e.appendSubview(n,t)):e.$(".js-list-orgs").closest(".window-module").hide(),e.actionListView.setElement(e.$(".list-actions")[0]),e.renderActions()}}(this)),this},t.prototype.renderActions=function(){return 0===this.actionListView.collection.length?this.actionListView.$el.html(d.fill("actions_empty",{daysBack:this.daysBack})):this.actionListView.render(),this.$(".js-more-actions").toggleClass("hide",!this.hasMoreActionsOrDateLimited()),this},t.prototype.hasMoreActionsOrDateLimited=function(){return null!=this.daysBack||this.hasMoreActions()},t.prototype.loadMoreActionsAndRemoveDateLimit=function(){return this.daysBack=null,this.loadMoreActions()},t.prototype.getActionsFilter=function(){return u.memberActions},t}(s))},{}],591:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;i=e(603),o=e(129),s=e(522),a=e("underscore"),u=e(519),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:sessions",this.frameDebounce(this.render))},t.prototype.events={"click .js-log-out-other":"logOutOther"},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),this.$el.html(u.fill("member_session_list",e)),n=function(){var n,r,o,s,a;for(s=null!=(o=e.sessions)?o:[],a=[],n=0,r=s.length;r>n;n++)t=s[n],a.push(this.subview(i,this.model,t,t.id));return a}.call(this),this.ensureSubviews(n,this.$(".js-sessions")),this},t.prototype.logOutOther=function(e){return o.stop(e),this.model.run("logoutOtherSessions"),this.model.set("sessions",a.filter(this.model.get("sessions"),function(e){return function(e){return e.isCurrent}}(this))),this.render()},t}(s)},{}],592:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e(71),i=e(33),o=e(562),s=e(103),p=e(100),u=e(542),c=e(516),l=e(129),d=e(522),m=e(106),f=e(519),g=e(48),v=e("xtend"),h=e(844),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),m(c,t),t.prototype.initialize=function(){this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username change:bio change:prefs change:paidAccount",this.render),this.listenTo(this.model,"change:initials change:fullName change:username change:bio",this.renderDetails)},t.prototype.events={"click .js-change-avatar-profile":"changeAvInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,v(t.prototype.events,e||this.events))},t.prototype.render=function(){var e,t,n,o;return t=i.isMe(this.model),e=this.model.toJSON(),this.model.organizationList.models.length>0&&(e.showOrgs=!0),t&&(o=null!=(n=e.paidAccount)?n.standing:void 0,e.hasAccount=this.model.hasMemberOrOrgAccount(),e.accountProblem=r.isProblem(o),e.isMe=!0),e.hasCrown=this.model.isFeatureEnabled("crown"),e.editable=t,this.$el.html(h(e)),this.renderDetails(),this.renderMainContent(),this},t.prototype.renderDetails=function(){var e,t;return t=i.isMe(this.model),e=this.model.toJSON(),e.bioHtml=s.markdownAsHtml(e.bio,{textData:e.bioData}),e.hasCrown=this.model.isFeatureEnabled("crown"),this.$(".js-current-details").empty().append(f.fill("member_detail_profile_info",e,{editable:t})),t&&this.$(".js-profile-form").empty().append(f.fill("member_detail_profile_edit",e,{editable:t})),this},t.prototype.setActiveView=function(e){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e).addClass("active")},t.prototype.changeAvInProfile=function(e){l.stop(e),g("Member View","Header","Change Avatar Menu"),u.toggle({elem:this.$(".js-change-avatar-profile"),view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.editProfile=function(e){l.stop(e),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),g("Member View","Click Edit Profile")},t.prototype.cancelEditProfile=function(e){l.stop(e),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset()},t.prototype.submitProfile=function(e){var t,n,r,i,o;if(l.stop(e),!this.disabled){for(t={},o=["fullName","username","bio","initials"],r=0,i=o.length;i>r;r++)n=o[r],t[n]=this.$(".js-profile-form [name="+n+"]").val();t.initials=t.initials.toUpperCase(),this.disableSubmit(),this.model.update(t,{waitForServer:!0},function(e){return function(t){var n;e.disabled=!1,e.$(".js-submit-profile").removeAttr("disabled"),t?(n=t.message.trim().toLowerCase(),e.$(".js-profile-form-error").removeClass("hide").text(p(n))):(e.$(".js-profile-form-error").addClass("hide"),e.cancelEditProfile(),g("Member","Successfully Change User Info"))}}(this))}},t.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},t}(d)},{}],593:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(33),o=e(38),s=e(542),a=e(129),u=e(522),c=e("underscore"),l=e(519),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="voters",t.prototype.events={"click .js-more-members-voted":"showAll","click .js-vote":"vote","click .js-unvote":"unvote"},t.prototype.initialize=function(){return o.loadCardVoters(this.model.id).done(),this.listenTo(this.model.memberVotedList,"add remove reset",this.frameDebounce(this.render))},t.prototype.showAll=function(){return this.render(!0)},t.prototype.render=function(e){var t,n,i;return i=this.model.memberVotedList,t={members:function(){var e,t,r,o;for(r=i.models,o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(n.toJSON());return o}()},e!==!0&&(t.members=t.members.slice(0,48),t.loading=0===i.length,t.fewMembers=i.length<14,t.moreMembers=i.length>48,t.lengthDiff=i.length-48,t.canVote=this.model.getBoard().canVote(r.me()),t.voted=c.include(this.model.get("idMembersVoted"),r.myId())),this.$el.html(l.fill("members_voted",t,{},{member:l.member})),this},t.prototype.vote=function(e){return a.preventDefault(e),this.model.vote(!0),!1},t.prototype.unvote=function(e){return a.preventDefault(e),this.model.vote(!1),0===this.model.get("idMembersVoted").length&&s.hide(),!1},t}(u)},{}],594:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(522),o=e(517)("member_account"),s=o.renderable(function(e){var t;return t=e.tempPassword,o.p(function(){return o.format("temporary-mobile-password")}),o.p(".u-text-align-center",function(){return o.strong(function(){return o.text(t)})})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="temporary mobile password",t.prototype.render=function(){return this.$el.html(s({tempPassword:this.options.tempPassword})),this},t}(i)},{}],595:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;a=e("react"),l=e(514)("nux_boards_page_banner"),u=e("underscore"),c=e(26),o=c.ORG_TYPE_ENTERPRISE,i=c.ORG_TYPE_BUSINESS_CLASS,s=c.ORG_TYPE_FREE,r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.displayName="NUXBanner",t.prototype.render=l.renderable(function(){var e,t,n,r,s,a,c,d,p,h,m,f;return d=this.props,t=d.heading,s=d.isUpgrade,a=d.onDismissBanner,c=d.orgType,h=d.subheading,m=d.tips,f=d.utmTerm,n=c===i,r=c===o,p=function(){switch(!0){case r:return".nux-banner-section-ent";case n:return".nux-banner-section-bc";default:return".nux-banner-section"}}(),e=".nux-banner-content",s&&(e+=".nux-banner-content-upgraded-org"),l.div(".nux-banner",function(n){return function(){return l.button(".icon-lg.icon-close",{onClick:a}),l.div(p,function(){return l.div(e,function(){return l.div(".nux-banner-welcome-section",function(){return l.h1(".nux-banner-welcome-heading",function(){return l.format(t)}),l.p(".nux-banner-welcome-subheading",function(){return l.format(h)})}),l.ol(".nux-banner-tip-list",function(){return u.map(m,function(e,t){return l.li(".nux-banner-tip-list-item",function(){return l.span(".nux-banner-tip-list-item-index",{"aria-hidden":!0},function(){return l.text(t+1)}),l.span(".nux-banner-tip-list-item-text",function(){return e.imgSrc?(l.format(e.key),l.a({href:e.url,target:"_blank"},function(){return l.img(".nux-banner-tip-list-app-download-button",{alt:l.l(e.imgAlt),src:e.imgSrc})})):e.url?l.format(e.key,{url:e.url}):l.format(e.key)})})})})})})}}(this))}),t}(a.Component),t.exports=r},{}],596:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),i=e(33),o=e(79),s=e(595),u=e("react"),c=e("react-dom"),l=e(513),d=e(114),m=e(522),f=e("underscore"),g=e("recup"),v=e(519),p={key:"tip-download app",url:"https://play.google.com/store/apps/details?id=com.trello",imgAlt:"tip-google play",imgSrc:"https://a.trellocdn.com/images/buttons/2d8bf64328f6c2666c1d5a3558fd7042/btn-playstore.png"},h={key:"tip-download app",url:"https://itunes.apple.com/app/trello-organize-anything/id461504587",imgAlt:"tip-app store",imgSrc:"https://a.trellocdn.com/images/buttons/0c89bea1f934eadd07d8284fead760d6/btn-appstore.png"},t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.initialize=function(){return this.listenTo(i.me(),{"change:oneTimeMessagesDismissed":this.frameDebounce(this.render)})},t.prototype.getReactRoot=function(){return u.createElement(l,{},this.getNuxBanner())},t.prototype.renderReactSection=function(){return c.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.render=function(){return null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$el.append(this.$reactRoot),this.renderReactSection(),this},t.prototype.getNuxBanner=function(){var e,t,n,r,i,a,u;return u=this.options,e=u.bannerToDisplay,n=u.idBannersToDismiss,t=function(e){return function(){return n.forEach(function(t){return e.model.dismiss(t)})}}(this),r=o.isAndroid(),i=o.isIos(),a=e.tips.length-1,r?e.tips[a]=p:i&&(e.tips[a]=h),g.render(function(n){return function(){return g.div(function(){return g.createElement(s,f.extend({onDismissBanner:t},e))})}}(this))},t.prototype.remove=function(){return c.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(m)},{}],597:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;
r=e(566),i=e(6),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.apiChangeRole=function(e){return t.__super__.apiChangeRole.apply(this,arguments),"admin"!==e&&this.isAdminAndMe()?i.navigate(i.getOrganizationUrl(this.parent),{trigger:!0}):void 0},t}(r)},{}],598:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;a=e(519),i=e(522),o=e(517)("select_member"),s=o.renderable(function(e){var t,n;return n=e.text,t=e.extraText,o.li({class:"item js-member-item"},function(){return o.a({href:"#",class:"js-select-member ",title:n,autocompleteText:n},function(){return o.span(".text",{title:"card"},function(){return o.text(t)})})})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.render=function(){return this.$el.html(s(this.options)),this},t}(i)},{}],599:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e(601),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.initialize=function(){return this.listenTo(this.options.card,"change:idMembers",this.renderActive)},t.prototype.renderActive=function(){var e;return this.$(".js-member-item").toggleClass("active",(e=this.model.id,a.call(this.options.card.get("idMembers"),e)>=0))},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.renderActive(),this},t}(i)},{}],600:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e("jquery"),i=e(532),o=e(215),s=e(161),a=e(207),u=e(542),l=e(129),d=e(522),p=e("underscore"),f=e(519),g=e(48),h=e(101),m=e(100),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="add as",t.prototype.initialize=function(){if(this.parent=this.options.parent,this.member=this.model,this.isBoard=this.isOrg=!1,this.objText="",this.didSendInvite=!0,this.parent instanceof s)this.isBoard=!0,this.objText="Board",this.invitationList=this.parent.invitationList;else{if(!(this.parent instanceof a))throw new Error("A fragile abstraction has broken");this.isOrg=!0,this.objText="Org"}return this.invitationList=this.parent.invitationList},t.prototype.events={"click .js-invite":"invite"},t.prototype.render=function(){var e,t,n,r,i,o;for(e={showAdmin:this.parent.owned(this.member)&&this.options.canMakeAdmin,showObserver:this.parent.hasObservers()},r=function(){if(this.isBoard)return"board roles";if(this.isOrg)return"org roles";throw new Error("A fragile abstraction has broken")}.call(this),i=this.parent.getAvailableRoles(),t=0,n=i.length;n>t;t++)o=i[t],e["roleText_"+o]=h([r,o,"text"]);return null==e.roleText_admin&&(e.roleText_admin=e.roleText_superadmin),this.$el.html(f.fill("manage_members_select_role",e)),this},t.prototype.invite=function(e){var t,n,s;l.stop(e),t=r(e.target).closest(".js-invite"),s=t.hasClass("js-select-admin")?"admin":t.hasClass("js-select-member")?"normal":t.hasClass("js-select-observer")?"observer":void 0,o({url:"/1/"+this.parent.typeName.toLowerCase()+"/"+this.parent.id+"/members/"+this.member.id,type:"put",data:{type:s},dataType:"json",success:function(e){return function(e){return g("Invitations","Add Member to Board","Role: "+s)}}(this),error:function(e){return function(e,t){var n;n=m(e),i.showLiteralText(n,"error","alert",3e3),g("Invitations","Error: "+e.responseText)}}(this)}),"function"==typeof(n=this.options).onSendInvite&&n.onSendInvite(),this.options.onSendInvite=null,u.hide()},t}(d)},{}],601:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(519),i=e(522),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(){},t.prototype.render=function(){var e;return e=this.model.toJSON(),"ghost"===this.model.get("memberType")&&(e.isVirtual=!0),e.unconfirmed=this.options.showUnconfirmed&&!e.isVirtual&&!e.confirmed,e.inactive=this.options.showInactive&&!e.active,e.isKnownMember=this.options.isKnownMember,e.extraText=this.options.extraText,e.disabled=this.options.disabled,this.options.linkName?e.url="/"+this.model.get("username"):delete e.url,this.$el.html(o.fill("select_member",e,{},{member:o.member})),this.$(".js-member").data("id",this.model.id),this},t}(i)},{}],602:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),i=e(199),o=e(542),s=e(600),u=e(129),c=e(48),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.invite=function(e){var t,n;u.stop(e),t=r(e.target).closest(".js-invite"),n=t.hasClass("js-select-admin")?"admin":t.hasClass("js-select-member")?"normal":t.hasClass("js-select-observer")?"observer":void 0,i.prototype.create.call(this,{model:this.parent,data:{type:n,email:this.options.email},success:function(e){return function(t){return c("Invitations","Send Email "+e.objText+" Invite to New Member","Role: "+n)}}(this)}),o.popView()},t}(s)},{}],603:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(80),s=e(522),a=e("underscore"),u=e(519),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="member-account-session",t.prototype.events={"click .js-revoke":"revoke"},t.prototype.render=function(){var e,t;return e=this.options,e["type_"+this.options.type]=!0,t=e.ipAddress,this.$el.html(u.fill("member_session",e)),i.update(this.el),this},t.prototype.revoke=function(e){return r.get("/login/revoke",{id:this.options.id},function(e){return function(){return e.model.set("sessions",a.filter(e.model.get("sessions"),function(t){return t.id!==e.options.id}))}}(this))},t}(s)},{}],604:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e(534),i=e(80),s=e(129),a=e(522),u=e("underscore"),d=e(519),p=e(48),l=e("moment"),c=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="member-applications-list-item",t.prototype.events={"click .js-revoke":"revoke"},t.prototype.render=function(){var e,t,n,r,o,s;return s=this.options,n=s.dateExpires,o=s.permissions,r=s.identifier,t=s.dateCreated,e={identifier:r,dateApproved:l(i.parse(t)).calendar(),dateExpires:n?l(i.parse(n)).calendar():null,neverExpires:null==n},e.permissions=u.isEmpty(o)?[c("token perms.none")]:o.map(function(e){var t,n,r;return n=e.write?"readwrite":"read",t="*"===e.idModel?"general":"specific",r=e.modelType.toLowerCase(),c(["token perms",n,t,r])}),this.$el.html(d.fill("member_application",e)),this},t.prototype.revoke=function(e){return s.stop(e),r.toggle("revoke token",{elem:e.currentTarget,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.set("tokens",u.filter(e.model.get("tokens"),function(t){return t.id!==e.options.id})),e.model.pull("tokens",e.options.id,function(){return p("Member","Applications","Revoke App")})}}(this)})},t}(a)},{}],605:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;r=e(33),i=e(563),o=e(535),a=e(37),u=e(500),d=e(205),p=e(606),c=e(608),h=e(542),m=e("react"),f=e(129),v=e(514)("header_notification_list_menu"),b=e(48),g=e("underscore"),l=10,s=function(e){function t(e){this.state={canAllowDesktopNotifications:o.notEnabled(),notifications:[],remainingUnread:0,surveyDismissed:!1}}return y(t,e),t.prototype.displayName="HeaderNotifications",t.prototype.componentDidMount=function(){return this.props.listenTo("add:Notification remove:Notification change:Notification",this.updateNotifications.bind(this)),this.updateNotifications()},t.prototype.componentWillUnmount=function(){var e;return null!=(e=this._notificationPermissionPromise)?e.cancel():void 0},t.prototype.updateNotifications=function(){var e,t;return e=d.sortedByDateDescending(a),t=e.slice(l).filter(function(e){return e.get("unread")}),this.setState({notifications:e.slice(0,l),remainingUnread:t.length})},t.prototype.render=v.renderable(function(){var e,t,n,i,o;return n=this.state,e=n.canAllowDesktopNotifications,t=n.notifications,i=n.remainingUnread,o=n.surveyDismissed,v.div(function(n){return function(){var s;return n.props.showSurvey&&!o&&v.createElement(c,{username:null!=(s=r.me())?s.get("username"):void 0,onDismiss:function(){return n.setState({surveyDismissed:!0}),n.props.onDismissSurvey()},submitSurvey:n.props.submitSurvey}),0===t.length?v.p(".empty",{style:{padding:"24px 6px"}},function(){return v.format("no-notifications")}):v.div(function(){return v.createElement(p,{notifications:t,context:"header"}),v.ul(".pop-over-list.mod-add-top-margin",function(){return v.li(function(){return v.a(".js-view-all-notifications",{href:n.props.noteUrl,onClick:n.viewAllNotifications},function(){return i>0?v.format("see-all-notifications-remainingunread-more-unread",{remainingUnread:i}):v.format("see-all-notifications")})}),v.li(function(){return v.a(".js-change-email-frequency",{onClick:n.changeEmailFrequency.bind(n)},function(){return v.format("change-notification-email-frequency")})}),e?v.li(function(){return v.a(".js-allow-desktop-notifications",{onClick:n.allowDesktopNote.bind(n)},function(){return v.format("allow-desktop-notifications")})}):void 0})})}}(this))}),t.prototype.viewAllNotifications=function(){return b("Header","Notifications Menu","See All Notifications")},t.prototype.changeEmailFrequency=function(e){f.stop(e),b("Header","Notifications Menu","Change Email Frequency"),h.pushView({view:new i({model:this.props.member,modelCache:a})})},t.prototype.allowDesktopNote=function(e){f.stop(e),b("Header","Notifications Menu","Allow Desktop Notifications"),this._notificationPermissionPromise=o.requestPermission().then(function(e){return function(t){return e.setState({canAllowDesktopNotifications:o.notEnabled()})}}(this)).catch(function(e){return function(){return e.setState({canAllowDesktopNotifications:!1})}}(this)).cancellable()},t}(m.Component),t.exports=u(s)},{}],606:[function(e,t,n){var r,i,o,s,a,u,c,l;r=e(81),i=e(607),o=e("react"),c=e("recup"),l=e(517)(""),s=e(104),a=e("underscore"),u=new r("notification"),t.exports=o.createClass({displayName:"NotificationsList",getInitialState:function(){return{now:new Date}},componentDidMount:function(){return this.interval=setInterval(this.updateNow,1e4)},componentWillUnmount:function(){return clearInterval(this.interval)},updateNow:function(){return this.setState({now:new Date})},render:function(){var e,t,n,r;return r=this.props,t=r.notifications,e=r.context,n=this.state.now,t=a.map(t,function(t){var r,a,c,l,d,p;for(l=t.getExpandedData(),l.entities=u.getEntities(t.get("display")),d=l.entities,a=0,c=d.length;c>a;a++)r=d[a],"comment"===r.type?r.textHtml=s.comments.format(r.text).output:"relDate"===r.type&&(r.text=u.relDateText(r.date,n));return"cardDueSoon"===t.get("type")?l.isDueDateNotification=!0:("declinedInvitationToBoard"===(p=t.get("type"))||"declinedInvitationToOrganization"===p)&&(l.isDeclinedInvitationNotification=!0),l.isDueSoon="cardDueSoon "===t.get("type"),l.isCommentLike=t.isCommentLike(),l.isAddAttachment=t.isAddAttachment(),l.idMemberCreator=t.get("idMemberCreator"),l.markRead=t.markRead.bind(t),l.navigateToView=t.navigateToView.bind(t),l.context=e,l.member=t.getMember(),l.key=t.id,o.createElement(i,l)}),o.createElement("div",null,t)}})},{}],607:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;i=e(553),o=e(80),s=e(784),m=e(45),a=e(575),u=e(37),l=e(542),d=e("react"),f=e(514)("notification"),g=e(48),p=e(129),h=e("underscore"),r=e("jquery"),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.displayName="Notification",t.prototype.render=f.renderable(function(){var e,t,n,r,i,u,c,l,d,p;return l=this.props,r=l.isCommentLike,n=l.isAddAttachment,p=l.unread,d=l.type,c=l.member,u=l.isDueDateNotification,e=l.date,i=l.isDeclinedInvitationNotification,t=l.entities,c=l.member,f.div({class:f.classify({"mod-comment-type":r,"mod-attachment-type":n,"mod-unread":p,"mod-due-soon":"cardDueSoon"===d,phenom:!0}),ref:function(e){return o.update(e)},onClick:this.clickedNotification.bind(this)},function(n){return function(){return f.div(".phenom-creator",function(){c?f.div(".member.js-show-mem-menu",{"data-idmember":c.id,onClick:n.viewMemberActionMenu.bind(n)},function(){return f.createElement(a,c)}):u?f.span(".icon-lg.icon-clock"):i?f.span(".icon-lg.icon-close"):f.span(".icon-lg.icon-member")}),f.div(".phenom-desc",function(){return h.forEach(t,function(e){return f.createElement(s,{entity:e,context:{},options:{}})})}),f.p(".phenom-meta.quiet",function(){return e?f.span(".date",{"data-date":e}):void 0})}}(this)),m("notifications",this.props)}),t.prototype.clickedNotification=function(e){return this.props.markRead(),"header"===this.props.context?g("Header","Notifications Menu","Clicked Notification"):"notifications-page"===this.props.context&&g("Member View","Notifications Page","Clicked Notification"),r(e.target).is("a")?void 0:(this.props.navigateToView(),p.stop(e))},t.prototype.viewMemberActionMenu=function(e){var t,n;p.stop(e),t=u.get("Member",null!=(n=r(e.target).closest("[data-idmember]").attr("data-idmember"))?n:this.props.idMemberCreator),r(e.target).closest(".pop-over").length>0?l.pushView({view:i,options:{model:t,modelCache:u}}):l.toggle({elem:this.$(".js-show-mem-menu"),view:i,options:{model:t,modelCache:u}})},t}(d.Component)},{}],608:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;a=e("react"),c=e(514)("nps"),d=e(48),u=e("underscore"),r=e("jquery"),o=10,i=256,l=[c.l(["recommend","1"]),c.l(["recommend","2"]),c.l(["recommend","3"]),c.l(["recommend","4"])],t.exports=s=function(e){function t(e){this.state={visible:!0,feedback:"",stage:"choose-score"}}return p(t,e),t.prototype.displayName="HeaderNotifications",t.prototype.render=c.renderable(function(){return this.state.visible?c.div(".nps-container",function(e){return function(){switch(c.div(".nps-dismiss",function(){return c.a(".quiet",{onClick:function(t){return null!=e.state.score?(e.props.submitSurvey({completed:!1,score:e.state.score,trackScore:!0}),d("NPS","Dismiss","With Score")):d("NPS","Dismiss","Without Score"),e.props.onDismiss()}},function(){return c.format("close")})}),e.state.stage){case"choose-score":return e.renderChooseScore();case"follow-up":return e.renderFollowUp();case"complete-promoter":return e.renderCompletePromoter();case"complete-passive":return e.renderCompletePassive();case"complete-detractor":return e.renderCompleteDetractor()}}}(this)):c.div()}),t.prototype.renderChooseScore=function(){var e;return e=function(e){return function(t){return function(){return e.setState({score:t,stage:"follow-up"}),e.props.submitSurvey({completed:!0,score:t,trackScore:!0})}}}(this),c.p(".nps-prelude",function(){return c.format("we-want-to-know")}),c.h2(".nps-question",function(){return c.format("how-likely-are-you-to-recommend-trello-to-others")}),c.div(".nps-buttons",function(){var t,n,r;for(n=[],r=t=0;10>=t;r=++t)n.push(c.button(".nps-button",{onClick:e(r)},function(){return c.text(r)}));return n}),c.div(".quiet.nps-explanation",function(){return c.div(".nps-low",function(){return c.format("not-likely")}),c.div(".nps-spacing",function(){}),c.div(".nps-high",function(){return c.format("very-likely")})})},t.prototype.renderFollowUp=function(){var e,t,n;return t=function(e){return function(){return e.setState({stage:function(){switch(this.state.score){case 9:case 10:return"complete-promoter";case 6:case 7:case 8:return"complete-passive";case 0:case 1:case 2:case 3:case 4:case 5:return"complete-detractor"}}.call(e)}),e.props.submitSurvey({completed:!0,score:e.state.score,comment:e.state.feedback,usage:e.state.usage,trackUsage:!0})}}(this),n=function(e){return function(t){return function(){return e.setState({usage:t})}}}(this),e=function(e){return function(){return d("NPS","Click Back"),e.setState({stage:"choose-score"})}}(this),c.p(".nps-back-container.quiet",function(){return c.span(".nps-back",{onClick:e},function(){return c.span(".icon-sm.icon-back"),c.text(" "),c.span(".nps-back-text",function(){return c.format("back")})})}),c.p(".nps-prelude",function(){return c.format("thanks-one-more-quick-thing")}),c.h2(".nps-question",function(){return c.format("tell-us-more-about-that-score")}),c.textarea(".nps-feedback",{maxLength:i,defaultValue:this.state.feedback,placeholder:c.l("were-all-ears")+" ",onInput:function(e){return function(t){return e.setState({feedback:t.target.value})}}(this)}),c.div(".nps-remaining.quiet",function(e){return function(){var t;return t=i-e.state.feedback.length,0===t?(c.format("you-re-out-of-room-send-more-via"),c.a({href:"/contact",target:"contact"},function(){return c.format("our-contact-page")})):100>t?c.text(t):void 0}}(this)),c.h2(".nps-question",function(){return c.format("how-do-you-use-trello")}),c.div(".nps-uses",function(e){return function(){var t,r,i,o,s;for(i=["business","personal","both"],o=[],t=0,r=i.length;r>t;t++)s=i[t],o.push(c.button(".nps-use",{class:c.classify({"nps-use-selected":s===e.state.usage}),onClick:n(s)},function(){return c.format(["usage",s])}));return o}}(this)),c.button(".nps-submit",{onClick:t},function(){return c.format("submit")})},t.prototype.renderCompletePromoter=function(){var e,t;return e=function(e){return function(){return e.setState({visible:!1}),d("NPS","Complete Promoter","Click Tweet"),window.open("https://twitter.com/intent/tweet?"+r.param({text:u.sample(l),url:"https://trello.com/"+e.props.username+"/recommend",related:"trello,TacoTrello"}))}}(this),t=function(e){return function(){return d("NPS","Complete Promoter","Click Finish"),e.setState({visible:!1})}}(this),c.p(".nps-submitted",function(){return c.format("submitted")}),c.div(".nps-illustration",function(){return c.img(".nps-illustration-image",{src:"https://a.trellocdn.com/images/stickers/06ddf78e10598774b89e3264d8e414da/taco-love%402x.png"})}),c.p(".nps-follow-up",function(){return c.format("we-love-your-enthusiasm")}),c.p(function(){return c.img(".nps-twitter-icon",{src:"https://a.trellocdn.com/images/nps/3f9b6f94a110473bc5b822708970b69e/twitter.svg"}),c.format("care-to-share")}),c.button(".nps-tweet",{onClick:e},function(){return c.format("tweet-about-trello")}),c.button(".nps-finish",{onClick:t},function(){return c.format("finish")})},t.prototype.renderCompletePassive=function(){var e,t;return e=function(e){return function(){return e.setState({visible:!1}),d("NPS","Complete Passive","Click Game"),window.open("/taco-out")}}(this),t=function(e){return function(){return e.setState({visible:!1}),d("NPS","Complete Passive","Click Finish")}}(this),c.p(".nps-submitted",function(){return c.format("feedback-submitted")}),c.div(".nps-illustration",function(){return c.img(".nps-illustration-image",{src:"https://a.trellocdn.com/images/stickers/905a89b9fb1f867747130360e6cbb4d4/taco-celebrate%402x.png"})}),c.p(".nps-follow-up",function(){return c.format("thanks-for-your-time")}),c.p(function(){return c.format("not-ready-to-get-back-to-work")}),c.button(".nps-game",{onClick:e},function(){return c.format("play-a-game-with-taco")}),c.button(".nps-finish",{onClick:t},function(){return c.format("finish")})},t.prototype.renderCompleteDetractor=function(){var e,t;return e=function(e){return function(){return e.setState({visible:!1}),d("NPS","Complete Detractor","Click Contact Support"),window.open("/contact")}}(this),t=function(e){return function(){return e.setState({visible:!1}),d("NPS","Complete Detractor","Click Finish")}}(this),c.p(".nps-submitted",function(){return c.format("feedback-submitted")}),c.div(".nps-illustration",function(){return c.img(".nps-illustration-image",{src:"https://a.trellocdn.com/images/stickers/60cf2c2b89c387f8c1ed92f301492b28/taco-alert%402x.png"})}),c.p(".nps-follow-up",function(){return c.format("we-re-sorry-to-hear-that")}),c.p(function(){return c.format("is-there-anything-we-can-do-to-help")}),c.button(".nps-support",{onClick:e},function(){return c.format("contact-support")}),c.button(".nps-finish",{onClick:t},function(){return c.format("finish")})},t}(a.Component)},{}],609:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(658),i=e(542),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.onSubmit=function(e){e&&(this.model.tagList.create({name:e},{wait:!0}),i.popView())},t.prototype.viewTitleKey="add tag",t}(o)},{}],610:[function(e,t,n){var r,i;r=e("react"),i=e(514)("ask_an_admin"),t.exports=r.createClass({displayName:"AskAnAdminComponent",render:i.renderable(function(){var e;return e=this.props.admins,i.div(function(){return i.div(".ask-an-admin",function(){return i.format("seem-helpful-ask-an-admin-to-consider-upgrading-your-team")}),i.h3(function(){return i.format("team-admins")}),i.ul(".organization-admin-list",function(){return e.forEach(function(e){return i.li(".organization-admin-list-item",function(){return i.div(".organization-admin-list-item-avatar",function(){var t;return t=e.avatarHash,t?t?i.img({src:avatarDomain+"/"+t+"/30.png"}):void 0:i.span(".icon.icon-lg.icon-member")}),i.div(".organization-admin-list-item-details",function(){return i.div(".organization-admin-list-item-name",function(){return i.text(e.fullName)}),i.div(".organization-admin-list-item-username",function(){return i.text("@"+e.username)})})})})})})})})},{}],611:[function(e,t,n){var r,i,o,s,a;r=e(216),i=e("react"),a=e(514)("bc_info"),o=e(238),s=e(89),t.exports=i.createClass({displayName:"BC3UpgradeComponent",getInitialState:function(){return{showingYearly:!1,upgradeDisabled:!1,error:null}},render:a.renderable(function(){var e,t,n,i,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C;return d=this.props,C=d.yearlyDiscountAmount,k=d.yearlyDiscount,n=d.isMonthly,_=d.userCount,u=d.onUpgradeClick,i=d.isPerActiveUser,p=this.state,g=p.showingYearly,w=p.upgradeDisabled,e=p.error,f=n&&!g,t=!(n||0===k),b=o.choke(0,o(this,"setState",{showingYearly:!0})),v=o.choke(0,o(this,"setState",{showingYearly:!1})),h=f?this.props.monthly:this.props.yearly,c=h.price,y=h.totalPrice,l=h.productNumber,m=function(e){return function(t){return e.setState({upgradeDisabled:!0}),u(l,t).catch(r.BadRequest,r.Unauthorized,function(t){return e.setState({error:t.message,upgradeDisabled:!1})}).done()}}(this),C=s.money(C),c=s.money(c),y=s.money(y),a.div(".business-class-upgrade-box.u-gutter",function(){return i&&(a.p(function(){return a.format("were also introducing smart billing")}),a.p(function(){return a.format("theres also new pricing")})),a.p(function(){return i?f?a.format("when paid monthly per active user",{price:c}):a.format("when paid annually per active user",{price:c}):f?a.format("when paid monthly per user",{price:c}):a.format("when paid annually per user",{price:c})}),a.p(function(){return i?a.format("your new price per month per active user",{totalPrice:y,userCount:_}):a.format("your new price per month per user",{totalPrice:y,userCount:_})}),t&&a.p(function(){return a.format("discount upgrade to yearly",{yearlyDiscountAmount:C,yearlyDiscountPercent:s.percentage(k)})}),e&&a.p(function(){return a.text(e)}),a.button({onClick:m,class:"primary",disabled:w},function(){return a.format("upgrade my team")}),a.p(".quiet.business-class-upgrade-box-spaced-item",function(){return t?a.format("youll be chargedminus your discount",{totalPrice:y,yearlyDiscountAmount:C}):a.format("youll be charged",{totalPrice:y})}),n?a.p(function(){return g?a.b(v,function(){return a.format("or go back to monthly pricing")}):(k>0&&(a.format("or switch to paying annually",{yearlyDiscountPercent:s.percentage(k)}),a.text(" ")),a.b(b,function(){return a.format("see annual pricing")}))}):void 0})})})},{}],612:[function(e,t,n){var r,i;r=e("react"),i=e(514)("bc_info"),t.exports=r.createClass({displayName:"BC3UpgradeContactUsComponent",render:i.renderable(function(){return i.div(".business-class-upgrade-box.u-gutter",function(){return i.p(function(){return i.format("contact us to upgrade")}),i.p(".business-class-upgrade-box-header",function(){return i.format("contact options",{phoneNumber:"1 (844) 873-5561",emailAddress:"sales@trello.com"})})})})})},{}],613:[function(e,t,n){var r,i,o,s;r=e("react"),o=e(514)("org_account"),s=e(48),i=e(101),t.exports=r.createClass({displayName:"BoardCreateVisibilityRestrictionsComponent",render:o.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.restrictions,o.div(".setting-item-detail",function(){return o.div(".markeddown",function(){var e,t,n,i,s;for(n=["public","org","private"],i=[],e=0,t=n.length;t>e;e++)s=n[e],i.push(o.p(function(){return o.format(["board create visibility",s,r[s]])}));return i}),e&&!t?o.p(".helper.u-float-left",function(){return o.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})})})},{}],614:[function(e,t,n){var r,i,o,s;r=e("react"),o=e(514)("org_account"),s=e(48),i=e(101),t.exports=r.createClass({displayName:"BoardInviteRestrictionsComponent",render:o.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.restricted,o.div(".setting-item-detail",function(){return o.div(function(){return r?o.p(function(){return o.format("only-team-members-can-be-added-to-boards-inside-this-team")}):o.p(function(){return o.format("anybody-can-be-added-to-boards-inside-this-team")})}),e&&!t?o.p(".helper.u-float-left",function(){return o.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})})})},{}],615:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;i=e(609),s=e(622),a=e(542),u=e(129),c=e(522),r=e("jquery"),d=e(517)("org_filtering"),p=d.renderable(function(e,t){return e.tagList.models.length||d.p(function(){return d.format("tags-explanation")}),d.ul(".select-tags-list",function(){var n,r,i,o;for(i=e.tagList.models,n=0,r=i.length;r>n;n++)o=i[n],d.li(".select-tags-list-item.js-tag-item",{"data-id-tag":o.id},function(){return d.a(".select-tags-list-item-name-link.js-toggle-tag",function(){var e;return e=o.id,h.call(t.getIdTags(),e)>=0&&d.icon("check",{class:"select-tags-list-item-name-link-check-icon"}),d.text(o.get("name"))}),d.a(".select-tags-list-item-edit-button.icon-sm.icon-edit.js-edit-tag",{href:"#"})})}),d.div(function(){return d.a(".quiet-button.full.js-add-tag",{href:"#"},function(){return d.format("create-tag")})})}),l=function(e){return r(e.target).closest(".js-tag-item")[0].getAttribute("data-id-tag")},t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:idTags",this.render),this.listenTo(this.options.org.tagList,"add remove reset change",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-add-tag":"addTag","click .js-toggle-tag":function(e){return this.toggleTag(l(e))},"click .js-edit-tag":function(e){return this.editTag(e,l(e))}},t.prototype.viewTitleKey="pick tags",t.prototype.addTag=function(e){return u.stop(e),a.pushView({view:i,options:{model:this.options.org,modelCache:this.modelCache}})},t.prototype.toggleTag=function(e){return this.model.toggleTag(e)},t.prototype.editTag=function(e,t){return u.stop(e),a.pushView({view:s,options:{modelCache:this.modelCache,model:this.options.org.tagList.get(t)}})},t.prototype.render=function(){return this.$el.html(p(this.options.org,this.model)),this},t}(c)},{}],616:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty,w=[].slice,_=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};l=e("underscore"),r=e(216),i=e(217),a=e(542),u=e("bluebird"),g=e(48),m=e(517)("bulk_add_org_members"),c=e(522),s={RESTRICTED:"restricted",MUST_REACTIVATE:"must-reactivate",USERNAME_NOT_FOUND:"username-not-found",NOT_IN_ENTERPRISE:"not-in-enterprise",UNKNOWN:"unknown",EXISTING:"existing",ADDED:"added"},d=/^[^@]+@[a-z0-9-]+(\.[a-z0-9-]+)+$/i,v=/^@[a-z0-9_]{3,}$/,f=m.renderable(function(){return m.div(function(){return m.label(function(){return m.format("emails-or-usernames"),m.textarea(".org-members-bulk-add.js-list",{placeholder:m.l("list-placeholder")})}),m.div(".org-members-bulk-add-found.quiet",function(){return m.div(".org-members-bulk-add-found-entry.js-emails-found",function(){return m.format("email-addresses-found"),m.text(" "),m.span(".js-email-count",function(){return m.text("0")})}),m.div(".org-members-bulk-add-found-entry.js-usernames-found",function(){return m.format("usernames-found"),m.text(" "),m.span(".js-username-count",function(){return m.text("0")})})}),m.button(".primary.full.js-add",function(){return m.format("add")})})}),p=m.renderable(function(){return m.div(function(){return m.div(".spinner.loading"),m.div(".org-members-bulk-add-progress.js-progress")})}),h=m.renderable(function(e,t){return m.div(function(){var n,r,i,o,a;for(o=l.values(s),r=0,i=o.length;i>r;r++)n=o[r],(null!=(a=e[n])?a.length:void 0)>0&&(m.div(".org-members-bulk-add-results-heading",function(){var r;return m.format(["category",n],{enterpriseDisplayName:null!=(r=null!=t?t.get("displayName"):void 0)?r:""}),m.text(" ("),m.text(e[n].length),m.text(")")}),m.div(".org-members-bulk-add-results-list",function(){var t,r,i,o,s;for(o=e[n],s=[],r=0,i=o.length;i>r;r++)t=o[r],s.push(m.div(".org-members-bulk-add-results-list-item",function(){return m.text(t)}));return s}));return m.div(function(){return m.button(".primary.full.js-close",function(){return m.format("done")})})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.viewTitleKey="add members",t.prototype.events={"click .js-add":"addMembers","input .js-list":"updateMembers","click .js-close":function(e){return a.hide()}},t.prototype.render=function(){return this.$el.html(f()),this.updateMembers(),this},t.prototype._parseEntries=function(){return this.$(".js-list").val().split(/[\s,;"<>]/)},t.prototype._parseEmails=function(){return l.chain(this._parseEntries()).map(function(e){
return e.replace(/^\s+|\s+$/g,"").toLowerCase()}).filter(function(e){return d.test(e)}).uniq().sort().value()},t.prototype._parseUsernames=function(){return l.chain(this._parseEntries()).map(function(e){return e.replace(/^\s+|\s+$/g,"").toLowerCase()}).filter(function(e){return v.test(e)}).map(function(e){return e.replace(/@/g,"")}).uniq().sort().value()},t.prototype.updateMembers=function(e){var t,n,r;return n=this._parseEmails().length,r=this._parseUsernames().length,t=n+r,this.$(".js-email-count").text(n),this.$(".js-username-count").text(r),this.$(".js-emails-found").toggleClass("hide",0===n),this.$(".js-usernames-found").toggleClass("hide",0===r),this.$(".js-add").prop("disabled",0===t).toggleClass("disabled",0===t)},t.prototype.addMembers=function(e){var t,n;return n=w.call(this._parseEmails()).concat(w.call(this._parseUsernames())),this.$el.html(p()),g("Organization View","Members Page","Bulk Add",n.length),t=0,u.map(n,function(e){return function(o){return i({method:"get",url:"/1/members/"+o,data:{fields:"idOrganizations"}}).catch(r.NotFound,function(e){return null}).then(function(t){var n;if(null!=t){if(n=e.model.id,_.call(t.idOrganizations,n)>=0)throw new r.Conflict("already in organization");return i({method:"put",url:"/1/organizations/"+e.model.id+"/members/"+t.id,data:{type:"normal"}})}if(d.test(o))return i({method:"post",url:"/1/organizations/"+e.model.id+"/memberships",data:{email:o,type:"normal"}});throw new r.NotFound("username not found")}).then(function(e){return s.ADDED}).catch(r,function(e){var t;return t=e.message,/email restricted/.test(t)?s.RESTRICTED:/already invited/.test(t)||/already in organization/.test(t)?s.EXISTING:/must reactivate/.test(t)?s.MUST_REACTIVATE:/username not found/.test(t)?s.USERNAME_NOT_FOUND:/Must first transfer account to the/.test(t)?s.NOT_IN_ENTERPRISE:s.UNKNOWN}).then(function(e){return t++,this.$(".js-progress").text(t+"/"+n.length),{user:o,state:e}})}}(this),{concurrency:5}).then(function(e){return function(t){var r,i,o,s;o=l.chain(t).groupBy("state").pairs().map(function(e){var t,n;return t=e[0],n=e[1],[t,l.chain(n).pluck("user").sortBy(function(e){return e.toLowerCase().replace(/@.*$/,"")}).value()]}).object().value(),e.$el.html(h(o,e.model.getEnterprise())),s=[];for(r in o)i=o[r],s.push(g("Organization View","Members Page","Bulk Add",r,n.length));return s}}(this)).done()},t}(c)},{}],617:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),o=e(620),s=e(542),a=e(129),u=e(522),c=e("underscore"),l=e(519),d=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-select-org":"chooseOrg","click .js-disabled":"stop","click .js-create-org":"createOrg"},t.prototype.render=function(){var e;return e={},this.model.organizationList.length>0&&(e.orgs=this.model.organizationList.map(function(e){return function(e){var t,n,r,i,o,s;return t=e.owned(),r=e.isPremium(),o=e.needsBCUpgrade(),n=!o||!t,s=!t||r&&!o?"#":"/"+e.get("name")+"/billing",i=e.get("memberships").length,c.extend(e.toJSON(),{memberCount:i,isAdmin:t,isPremium:r,needsBCUpgrade:o,orgUrl:s,isDisabled:n})}}(this))),this.$el.html(l.fill("select_org_to_upgrade",e)),this},t.prototype.chooseOrg=function(e){return d("Select Team to Upgrade","Choose Team")},t.prototype.stop=function(e){return a.stop(e)},t.prototype.createOrg=function(e){a.stop(e),s.toggle({elem:r(e.target),top:20,view:o,options:{model:this.model,modelCache:this.modelCache,createOpts:{isBusinessClass:!0}}}),d("Business Class Choose Org Page","Create New Org")},t}(u)},{}],618:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].slice;r=e("jquery"),i=e(215),o=e(33),a=e(542),u=e(129),c=e(522),d=e(519),p=e(48),l=e(101),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change logo",t.prototype.initialize=function(){return this.listenTo(this.model,"change:logoHash",this.frameDebounce(this.render))},t.prototype.events={"change .js-upload-logo":"startUpload","click .js-remove-logo":"removeLogo"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(d.fill("popover_org_logo",e)),this},t.prototype.startUpload=function(e){var t,n,s,a,c,d,h;return c=this.model,a=r(e.target),t=this.$(".js-error").hide(),s=null!=(d=a[0])&&null!=(h=d.files)?h[0]:void 0,null==s||u.validFileSize(s)?!s&&a.val()?u.uploadFile(o.myToken(),a,this.uploadResult.bind(this)):null!=s?(n=new FormData,n.append("token",o.myToken()),n.append("file",s),i({url:a.closest("form").attr("action"),data:n,type:"post",processData:!1,contentType:!1,error:function(e){return function(t){var n,r;return r=t.status,n=t.responseText,e.uploadResult(Error(n))}}(this),success:function(e){return function(){return e.uploadResult.apply(e,[null].concat(f.call(arguments)))}}(this),timeout:12e4})):void 0:(t.text(l("images can not be larger than 10mb")).show(),void p("Organization","Logo","Upload Error - File Too Large"))},t.prototype.uploadResult=function(e){var t;return t=this.$(".js-error").hide(),e?(p("Organization","Logo","Error - "+e),t.show().text(e)):(p("Organization","Logo","Use Uploaded - New"),a.hide())},t.prototype.removeLogo=function(e){u.stop(e),i({url:"/1/organizations/"+this.model.id+"/logo",type:"DELETE",success:function(e){return function(){return p("Organization","Logo","Remove Logo"),a.hide()}}(this)})},t}(c)},{}],619:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;i=e(207),o=e(542),s=e(129),a=e(522),c=e(519),l=e(48),u=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="select team visibility",t.prototype.tagName="ul",t.prototype.className="pop-over-list",t.setVisibility=function(e){return function(t){return s.stop(t),l("Organization","Changed Visibility"),this.model.setPref("permissionLevel",e),o.hide()}},t.prototype.events={"click .js-select-members":t.setVisibility("private"),"click .js-select-public":t.setVisibility("public")},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0}),e["permissionLevel_"+this.model.get("prefs").permissionLevel]=!0,e.publicText=u("org perms.public.text"),e.privateText=u("org perms.private.text"),this.$el.html(c.fill("change_org_vis",e)),this},t}(a)},{}],620:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(33),i=e(6),s=e(38),a=e(542),u=e(129),c=e(522),l=e(519),d=e(48),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="create organization",t.prototype.initialize=function(e){return this.createOpts=e.createOpts,null!=this.createOpts?this.createOpts:this.createOpts={isBusinessClass:!1}},t.prototype.events={"click .js-save":"submit","submit form":"submit","click .js-business-class":"clickBusinessClassMore","input .js-display-name":function(){return this.updateSubmitButton()}},t.prototype.getValue=function(e){var t;return null!=(t=this.$("[name="+e+"]").val())?t.trim():void 0},t.prototype.render=function(){return this.$el.html(l.fill("org_create")),this.updateSubmitButton(),this},t.prototype.updateSubmitButton=function(){return this.$(".js-save").prop("disabled",0===this.getValue("displayName").length)},t.prototype.submit=function(e){var t,n,o,c,l;for(u.stop(e),t={},l=["displayName","desc"],n=0,o=l.length;o>n;n++)c=l[n],t[c]=this.getValue(c);r.me().organizationList.create(t,{modelCache:this.modelCache,silent:!0,success:function(e){return function(t){s.loadOrganizationMembersMinimal(t.id),e.createOpts.isBusinessClass?(i.organizationBillingView(t.get("name")),d("New Team","Create Business Class Team",void 0,t.id)):(i.organizationBoardsView(t.get("name"),t.id),d("New Team","Create Team",void 0,t.id)),a.hide()}}(this)})},t.prototype.clickBusinessClassMore=function(){return d("New Org","Click Business Class Link")},t}(c)},{}],621:[function(e,t,n){var r,i,o;r=e("react"),o=e(514)("org_account"),i=e(101),t.exports=r.createClass({displayName:"DeleteOrgButtonComponent",render:o.renderable(function(){var e;return e=this.props.onClick,o.div(".window-module.u-gutter",function(){return o.b(e,".quiet-button",{style:{padding:"6px 11px",marginTop:"32px"}},function(){return o.format("delete-this-organization")})})})})},{}],622:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(542),s=e(522),o=e(658),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.getName=function(){return this.model.get("name")},t.prototype.onSubmit=function(e){e&&(this.model.update({name:e}),i.popView())},t.prototype.onDelete=function(){return this.model.destroy(),i.popView()},t.prototype.viewTitleKey="edit tag",t}(o)},{}],623:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O=function(e,t){function n(){this.constructor=e}for(var r in t)P.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},P={}.hasOwnProperty;r=e("jquery"),i=e(281),o=e(532),s=e(215),a=e(216),u=e(33),c=e(616),l=e(524),d=e(199),h=e(97),m=e(20),S=e(100),j=e(817),f=e(203),g=e(573),v=e(692),y=e(645),b=e(25),w=e(542),_=e(129),k=e(522),C=e("underscore"),T=e(106),M=e(519),x=e(816),B=e(48),t.exports=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return O(t,e),T(v,g,l,t),t.prototype.viewTitleKey="add members",t.prototype.initialize=function(){this.savedSearch=""},t.prototype.events={"click .js-search-results .js-select-member":"addMember","paste .js-search-input":"searchPaste","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember","click .js-show-invitation-link":"showInvitationLink","click .js-invitation-link":"clickInvitationLink","click .js-deactivate-link":"deactivateInvitationLink","click .js-copy-link":"copyInvitationLink","click .js-bulk-add-members":"showBulkAddView","click .js-link-google-apps":"startLinkingGoogleApps"},t.prototype.render=function(){var e,t,n;return t={},t.canInviteMembers=!0,t.canAddMembers=!0,t.isPerUser=b.isPerUser(this.model.get("products")),t.perUserPrice=null!=(n=b.getPrice(this.model.get("products")))?n.toFixed(2):void 0,t.isYearly="yearly"===b.getInterval(this.model.get("products")),t.isMonthly="monthly"===b.getInterval(this.model.get("products")),t.canLinkGoogleApps=this.model.isFeatureEnabled("googleApps")&&(!this.model.get("prefs").associatedDomain||this.googleAppsFetchFailed)&&this.model.editable(),this.$el.html(j(t)),null!=(e=i.addMemberToOrganizationAd(u.me(),this.model))&&this.$(".js-ad").html(this.subview(e,this.model).render().el),this.setTimeout(function(e){return function(){return e.input=e.$(".js-search-input"),e.input.click(function(e){return _.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(e){var t;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),t=this.input.val().toLowerCase().trim(),""===t)return void this.clearSearchResults();this.loadingEl.show(),s({url:"/1/search/members/",type:"get",data:{idOrganization:this.model.id,query:t},dataType:"json",success:function(e){return function(n){return e.renderSearchResults(t,n)}}(this)})}},t.prototype.keydownEvent=function(e){var t;t=h.getKey(e),t===m.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(_.stop(e),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(_.stop(e),this.$(".email-invite:first").click()):(t===m.ArrowUp||t===m.ArrowDown)&&(_.stop(e),_.navMenuList(this.$(".js-search-results .js-list"),"li",t))},t.prototype._handleError=function(e){var t;return t=S(e),o.showLiteralText(t,"error","alert",3e3),B("Invitations","Error: "+t),this.input.focus().select()},t.prototype.addMember=function(e){var t,n;_.stop(e),r(e.target).closest(".item.disabled").length>0||(this.clearSearchResults(),t=r(e.target).closest(".js-select-member").attr("idMember"),n=this.modelCache.get("Member",t),s({url:"/1/organization/"+this.model.id+"/members/"+t,type:"put",data:{type:"normal"},dataType:"json",success:function(e){return function(r){return null!=r.token||e.model.memberList.find(function(e){return e.id===t})?void 0:(e.model.memberList.add(n),B("Invitations","Add Member to Organization","Role: Member"))}}(this),error:this._handleError.bind(this)}))},t.prototype.renderEmailInviteToSearchResults=function(e){var t,n,r;return r=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,t=C.compact(_.removeDomainFromEmailAddress(e.email).split(r)).join(" ").replace(n,""),e.fullName=_.toTitleCase(t),e.modelType="Organization",this.$(".js-uninvited-search-results").append(x(e)).show()},t.prototype.sendEmailInvite=function(e){var t,n,i,o;if(_.stop(e),n=this.$(".js-send-email-invite"),null==n.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),o=t.val().trim(),!_.validName(o))return _.setCaretAtEnd(t),void r(".js-name-error").show();i={fullName:o,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},n.attr("disabled","disabled"),s({url:"/1/organizations/"+this.model.id+"/members",type:"put",dataType:"json",data:i,success:function(e){return function(t){var r;return r=new f(t,{modelCache:e.modelCache}),e.model.memberList.get(r.id)||e.model.memberList.add(r),B("Invitations","Send Email Org Invite to New Member","Role: "+t.type),n.removeAttr("disabled"),w.hide()}}(this),error:this._handleError.bind(this)})}},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-uninvited-search-results").hide().empty(),r(".js-search-results").hide()},t.prototype.removeInvitation=function(e){var t;t=r(e.currentTarget).closest(".invitation").data("id"),d.prototype.delete({model:this.model,idInvitation:t,success:function(e){return function(){return B("Invitations","Delete Organization Invite"),e.search}}(this)}),_.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===u.myId()||this.model.owned()},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t.prototype.showBulkAddView=function(e){return _.stop(e),w.pushView({view:c,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.startLinkingGoogleApps=function(e){return B("Organization View","Members Page","Start Linking Google Apps Domain"),w.pushView({view:y,options:{model:this.model,modelCache:this.modelCache}})},t}(k)},{}],624:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v=[].slice;i=void 0,t(function(){return i=e(217)}),o=e(33),d=e(542),p=e("react"),g=e(514)("manage_members"),m=e("underscore"),u=e(625),c=e(626),l=e(627),h=e(629),s=250,f=function(e){return m.debounce(e,s)},a=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/,n.exports=p.createClass({displayName:"ManageOrgMembersComponent",getInitialState:function(){return{isSearching:!1,members:null,searchValue:null,selectedMembers:[]}},render:g.renderable(function(){var e,t,n,r,i,s,u;return r=this.state,t=r.isSearching,n=r.members,s=r.searchValue,u=r.selectedMembers,i=t?"":".hide",e=s&&a.test(s)&&o.me().attributes.email!==s,g.div(".add-member-popup",function(t){return function(){return g.div(".search-with-spinner",function(){return g.input(".search-member",{type:"text",onChange:t.onSearchInputChange}),g.div(".spinner.small"+i)}),n?n.length?(t.renderMemberList(),u.length?t.renderSummary():void 0):e?(t.renderInviteAddName(),t.renderInvitationLink()):g.div(".quiet.search-text.no-results",function(){return g.format("no-results")}):(g.div(".quiet.search-text",function(){return g.format("search-for-a-person-in-trello-by-name-or-email-address-or-enter-an-email-address-to-invite-someone-new")}),t.renderInvitationLink())}}(this))}),renderMemberList:function(){var e,t,n;return t=this.state,e=t.members,n=t.selectedMembers,g.createElement(l,{members:e,selectedMembers:n,toggleMember:this.toggleMember})},renderInvitationLink:function(){var e;return e=this.props.model,g.createElement(u,{apiUrl:e.url(),teamUrl:e.get("url")})},renderInviteAddName:function(){var e,t,n,r,i;return r=this.props,t=r.model,n=r.modelCache,i=this.state.searchValue,e=i,g.createElement(c,{email:e,model:t,modelCache:n})},renderSummary:function(){var e,t,n,r,i;return n=this.state.selectedMembers,e=this.props.model,r=n.length,t=e.calculateTotalPrice(r),e.isPremiumMonthly()&&(i="monthly-subscription"),e.isPremiumYearly()&&(i="yearly-subscription"),g.createElement(h,{addSelectedMembers:this.addSelectedMembers,price:t,selectedMembersCount:r,subscriptionIntervalKey:i})},toggleMember:function(e){var t;return t=this.state.selectedMembers.some(function(t){return t===e})?this.state.selectedMembers.filter(function(t){return t!==e}):v.call(this.state.selectedMembers).concat([e]),this.setState({selectedMembers:t})},onSearchInputChange:function(e){var t;return t=e.target.value,this.setState({selectedMembers:[]}),t.length?this.searchMembers(t):this.setState({members:null,searchValue:null})},searchMembers:f(function(e){return this.setState({isSearching:!0,searchValue:e}),i({url:"/1/search/members/",type:"get",data:{idOrganization:this.props.model.id,query:e},dataType:"json"}).then(function(e){return function(t){return t=m.sortBy(t.filter(function(e){return e.confirmed&&!e.joined}),function(e){var t;return null!=(t=e.fullName)?t.toLocaleLowerCase():void 0}),e.setState({isSearching:!1,members:t})}}(this))}),addSelectedMembers:function(){var e,t,n,r;return n=this.state,e=n.members,r=n.selectedMembers,t=this.props.model,r.forEach(function(n){return function(n){var r;return r=e.filter(function(e){return e.id===n})[0],t.addMember(r)}}(this)),d.hide()}})},{}],625:[function(e,n,r){var i,o,s;i=void 0,t(function(){return i=e(217)}),o=e("react"),s=e(514)("manage_members"),n.exports=o.createClass({displayName:"InvitationLink",getInitialState:function(){return{linkEnabled:!1,invitationUrl:""}},render:s.renderable(function(){var e,t,n;return n=this.state,e=n.invitationUrl,t=n.linkEnabled,s.div(".invitation-link-wrapper",function(n){return function(){return t?(s.format("anyone-you-share-this-link-with-will-be-able-to-join"),s.input({type:"text",readOnly:!0,placeholder:s.l("loading"),ref:n.inputDidMount,value:e,onClick:n.copyInvitationLink}),s.button(".quiet-button",{onClick:n.deactivateInvitationLink},function(){return s.format("disable-this-link")})):s.button(".quiet-button",{onClick:n.showLink},function(){return s.format("you-can-also-invite-people-by-giving-them-a-special-link")})}}(this))}),showLink:function(){return this.setState({linkEnabled:!0})},inputDidMount:function(e){var t,n,r;return e?(n=this.props,t=n.apiUrl,r=n.teamUrl,i({method:"post",url:t+"/invitationSecret"}).get("secret").then(function(t){return function(n){var i;return i=r.replace(/(\/b\/[^\/]+|\/[^\/]+$)(.*)$/,"/invite$1/"+n+"$2"),t.setState({invitationUrl:i}),e.focus()}}(this)).done()):void 0},deactivateInvitationLink:function(e){var t;return t=this.props.apiUrl,this.setState({invitationUrl:"",linkEnabled:!1}),i({method:"delete",url:t+"/invitationSecret"}).done()},copyInvitationLink:function(e){var t;return t=e.target,t.select(),document.execCommand("copy")}})},{}],626:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g;i=e(532),o=e(216),s=void 0,t(function(){return s=e(217)}),h=e(100),a=e(203),u=e(542),c=e("react"),m=e(514)("invite_add_name"),f=e(48),l=e(129),d=e("underscore"),p=function(e){var t,n,r;return r=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,t=d.compact(l.removeDomainFromEmailAddress(e).split(r)).join(" ").replace(n,""),l.toTitleCase(t)},g=function(e){return e.length<=4},n.exports=c.createClass({displayName:"InviteAddName",getInitialState:function(){var e;return e=p(this.props.email),{err:g(e),fullName:e}},componentWillReceiveProps:function(e){var t,n;return t=e.email,n=p(t),this.setState({err:g(n),fullName:n})},render:m.renderable(function(){var e,t,n,r,i,o,s,a,u;return o=this.props,e=o.email,r=o.model,i=o.modelCache,s=this.state,t=s.err,n=s.fullName,a=s.submitting,u=t?"":".hide",m.div({style:{marginTop:"10px"}},function(t){return function(){return m.p(".quiet",function(){return m.format("we dont know that personteam",{email:e})}),m.p(".error"+u,function(){return m.format("full-name-must-be-more-than-4-characters")}),m.form({onSubmit:t.onSubmit},function(){return m.label(function(){return m.format("full-name")}),m.input({type:"text",value:n,onChange:t.onNameChange}),m.input(".wide.primary",{type:"submit",disabled:a,value:m.l("send")})})}}(this))}),onNameChange:function(e){var t,n;return n=e.target,t=n.value,this.setState({err:g(t.trim()),fullName:t})},onSubmit:function(e){var t;return e.preventDefault(),t=this.state.err,t?void 0:this.sendEmailInvite()},sendEmailInvite:function(e){var t,n,r,i,c,l;return l=this.props,t=l.email,r=l.member,i=l.model,c=l.modelCache,n=this.state.fullName,e={fullName:n,email:t,type:"normal"},this.setState({submitting:!0}),s({url:"/1/organizations/"+i.id+"/members",type:"put",dataType:"json",data:e}).then(function(e){return function(e){return r=new a(e,{modelCache:c}),i.memberList.get(r.id)||i.memberList.add(r),f("Invitations","Send Email Org Invite to New Member","Role: "+e.type),u.hide()}}(this)).finally(function(e){return function(){return e.setState({submitting:!1})}}(this)).catch(o,this._handleError)},_handleError:function(e){var t,n;return t=h(e),i.showLiteralText(t,"error","alert",3e3),f("Invitations","Error: "+(null!=(n=e.message)?n:e.responseText))}})},{}],627:[function(e,t,n){var r,i;i=e(514)("manage_members"),r=e(628),t.exports=i.statelessRenderable("MemberList",function(e){var t,n,o;return t=e.members,n=e.selectedMembers,o=e.toggleMember,i.div(function(){return i.div(".member-list-header",function(){return i.div(".name.quiet",function(){return i.format("name")}),i.div(".select.quiet",function(){return i.format("select")})}),t.forEach(function(e){var t;return t=n.some(function(t){return t===e.id}),i.createElement(r,{isSelected:t,member:e,toggleMember:o})})})})},{}],628:[function(e,t,n){var r;r=e(514)("manage_members"),t.exports=r.statelessRenderable("Member",function(e){var t,n,i,o,s,a,u,c,l,d,p,h;return s=e.isSelected,a=e.member,p=e.toggleMember,t=a.avatarHash,n=a.fullName,o=a.initials,i=a.id,h=a.username,u=function(){return p(i)},c=function(e){return"Enter"===e.key||" "===e.key?u():void 0},l=s?".checked":"",d=n+" ("+h+")",r.div(".member-wrapper",{tabIndex:0,onClick:u,onKeyUp:c},function(){return r.div(".member",function(){return t?r.img(".member-avatar",{height:"32",width:"32",src:window.avatarDomain+"/"+t+"/50.png",srcSet:window.avatarDomain+"/"+t+"/50.png 1x, "+window.avatarDomain+"/"+t+"/50.png 2x",alt:d,title:d}):r.span(".member-initials",{title:d},function(){return r.text(o)})}),r.div(".full-name",function(){return r.text(n)}),r.div(".quiet",function(){return r.text("@"+h)}),r.div(".checkbox"+l,function(){return r.span(".icon-lg.icon-check")})})})},{}],629:[function(e,t,n){var r,i,o;r=e(90),i=e(99),o=e(514)("manage_members"),t.exports=o.statelessRenderable("Summary",function(e){var t,n,s,a,u,c,l;return t=e.addSelectedMembers,u=e.price,c=e.selectedMembersCount,l=e.subscriptionIntervalKey,n=c?"":".disabled",a=i("new member license count",c),s=r(u),o.div(function(){return o.div(".summary-header.quiet",function(){return o.format("summary")}),o.div(".summary",function(){return o.div(".license-count",function(){return o.text(a)}),o.div(".quiet",function(){return o.format(l)}),o.div(".total",function(){return o.format("total-price",{price:s})})}),o.button(".primary"+n,{onClick:t,disabled:!c},function(){return o.format("add-to-team")})})})},{}],630:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M=function(e,t){function n(){this.constructor=e}for(var r in t)B.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},B={}.hasOwnProperty;r=e("jquery"),i=e(281),o=e(532),s=e(215),a=e(216),u=e(33),c=e(524),l=e(199),d=e(97),p=e(20),C=e(100),x=e(827),m=e(203),f=e(573),g=e(692),v=e(25),b=e(542),y=e(129),w=e(522),_=e("underscore"),j=e(106),S=e(519),k=e(816),T=e(48),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),j(g,f,c,t),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){this.savedSearch=""},t.prototype.events={"click .js-search-results .js-select-member":"addMember","paste .js-search-input":"searchPaste","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember","click .js-show-invitation-link":"showInvitationLink","click .js-invitation-link":"clickInvitationLink","click .js-deactivate-link":"deactivateInvitationLink"},t.prototype.render=function(){var e,t,n;return t={},t.canInviteMembers=!0,t.canAddMembers=!0,t.isPerUser=v.isPerUser(this.model.get("products")),t.perUserPrice=null!=(n=v.getPrice(this.model.get("products")))?n.toFixed(2):void 0,t.isYearly="yearly"===v.getInterval(this.model.get("products")),t.isMonthly="monthly"===v.getInterval(this.model.get("products")),this.$el.html(x(t)),null!=(e=i.addMemberToOrganizationAd(u.me(),this.model))&&this.$(".js-upgrade-team").html(this.subview(e,this.model).render().el),this.setTimeout(function(e){return function(){return e.input=e.$(".js-search-input"),e.input.click(function(e){return y.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(e){var t;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),t=this.input.val().toLowerCase().trim(),""===t)return void this.clearSearchResults();this.loadingEl.show(),s({url:"/1/search/members/",type:"get",data:{idOrganization:this.model.id,query:t},dataType:"json",success:function(e){return function(n){var r;return r=_.sortBy(n,function(e){var t;return null!=(t=e.fullName)?t.toLocaleLowerCase():void 0}),e.renderSearchResults(t,r)}}(this)})}},t.prototype.keydownEvent=function(e){var t;t=d.getKey(e),t===p.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(y.stop(e),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(y.stop(e),this.$(".email-invite:first").click()):(t===p.ArrowUp||t===p.ArrowDown)&&(y.stop(e),y.navMenuList(this.$(".js-search-results .js-list"),"li",t))},t.prototype._handleError=function(e){var t,n;return t=C(e),o.showLiteralText(t,"error","alert",3e3),T("Invitations","Error: "+(null!=(n=e.message)?n:e.responseText)),this.input.focus().select()},t.prototype.addMember=function(e){var t,n;y.stop(e),r(e.target).closest(".item.disabled").length>0||(this.clearSearchResults(),t=r(e.target).closest(".js-select-member").attr("idMember"),n=this.modelCache.get("Member",t),this.model.addMember(n).catch(a,this._handleError.bind(this)))},t.prototype.renderEmailInviteToSearchResults=function(e){var t,n,r;return r=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,t=_.compact(y.removeDomainFromEmailAddress(e.email).split(r)).join(" ").replace(n,""),e.fullName=y.toTitleCase(t),e.modelType="Organization",this.$(".js-uninvited-search-results").append(k(e)).show()},t.prototype.sendEmailInvite=function(e){var t,n,i,o;if(y.stop(e),n=this.$(".js-send-email-invite"),null==n.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),o=t.val().trim(),!y.validName(o))return y.setCaretAtEnd(t),void r(".js-name-error").show();i={fullName:o,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},n.attr("disabled","disabled"),s({url:"/1/organizations/"+this.model.id+"/members",type:"put",dataType:"json",data:i,success:function(e){return function(t){var r;return r=new m(t,{modelCache:e.modelCache}),e.model.memberList.get(r.id)||e.model.memberList.add(r),T("Invitations","Send Email Org Invite to New Member","Role: "+t.type),n.removeAttr("disabled"),b.hide()}}(this),error:this._handleError.bind(this)})}},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-uninvited-search-results").hide().empty(),r(".js-search-results").hide()},t.prototype.removeInvitation=function(e){var t;t=r(e.currentTarget).closest(".invitation").data("id"),l.prototype.delete({model:this.model,idInvitation:t,success:function(e){return function(){return T("Invitations","Delete Organization Invite"),e.search}}(this)}),y.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===u.myId()||this.model.owned()},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t}(w)},{}],631:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty,g=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(6),i=e(80),s=e(642),a=e(542),u=e(129),c=e(522),l=e("underscore"),p=e(519),h=e(48),d=e(99),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="org activity for member",t.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},t.prototype.initialize=function(){return this.org=this.options.org},t.prototype.events={"click .js-view-org-boards-for-member":"viewBoards","click .js-view-member-org-cards":"viewCards"},t.prototype.render=function(e){var t,n,o,s,a,u,c;for(o=this.model.toJSON(),n=0,u=l.filter(this.org.boardList.models,function(e){return function(e){return e.isOpen()}}(this)),s=0,a=u.length;a>s;s++)t=u[s],c=this.model,g.call(t.memberList.models,c)>=0&&n++;return o.boardCount=d("boards",n),o.hasBoards=n>0,this.org.isFeatureEnabled("orgCards")&&(o.orgCardsUrl=r.getOrganizationMemberCardsUrl(this.org.get("name"),o.username)),
this.$el.html(p.fill("org_member_activity",o)),i.update(this.el),this},t.prototype.viewCards=function(){return h("Organization View","Members Page","Activity - View Org Cards")},t.prototype.viewBoards=function(e){u.stop(e),h("Organization View","Members Page","Activity - View Boards"),a.pushView({view:new s({model:this.model,parent:this.org,modelCache:this.modelCache})})},t}(c)},{}],632:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e("react"),o=e(514)("org_account"),s=e(48),r=function(e){function t(){this.state={hasEnterprise:!0}}return a(t,e),t.displayName="OrgBCSettingsComponent",t.prototype.componentDidMount=function(){return this.props.hasEnterprisePromise.then(function(e){return function(t){return e.setState({hasEnterprise:t})}}(this))},t.prototype.render=o.renderable(function(){var e,t,n,r,i,a,u,c;return c=this.props,u=c.items,a=c.isAdmin,r=c.hasBC,e=c.billingUrl,i=this.state.hasEnterprise,n=function(e){return"/business-class"===e.target.getAttribute("href")?s("Organization View","Settings Page","A Whole Lot More Link"):void 0},t=function(){return s("Organization View","Settings Page","Upgrade My Team Button")},o.div(function(){return r?o.div(function(){return u.forEach(o.addElement)}):i?void 0:o.div(".org-bc-settings",function(){return o.div(".org-bc-settings-header",{onClick:n},function(){return o.span(function(){return o.img({src:"https://a.trellocdn.com/images/3494275fd68fd1b05677e97f6c0874e3/business-class-logo-blue.svg"})}),o.br(),o.format("upgrade-to-trello-business-class-to-unlock-these-settings"),o.br(),a?o.link(e,".button-link.primary",{onClick:t},function(){return o.format("upgrade-my-team")}):(o.br(),o.format("seem-helpful-ask-your-team-admin-to-consider-upgrading-your-team"),o.br(),o.br())}),u.forEach(o.addElement)})})}),t}(i.Component),t.exports=r},{}],633:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e("react"),o=e(514)("org_account"),s=e(48),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.displayName="OrgInviteRestrictionsContentsComponent",t.prototype.render=o.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.restrictions,o.div(function(){return o.div(".setting-item-detail",function(){return o.div(".markeddown",function(){return r.length?(o.p(function(){return o.format("only-people-with-these-email-domains-can-join-this-organization")}),o.ul(function(){var e,t,n,i;for(i=[],e=0,t=r.length;t>e;e++)n=r[e],i.push(o.li(function(){return o.strong(function(){return o.text(n)})}));return i})):o.p(function(){return o.format("anyone-with-any-email-domain-can-be-added-to-this-organization")})})}),e&&!t?o.p(".helper.u-float-left",function(){return o.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})}),t}(i.Component),t.exports=r},{}],634:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;m=e(514)("org_account"),r=e(613),i=e(614),s=e(632),a=e(633),u=e("react"),c=e("react-dom"),l=e(659),d=e(660),p=e(661),h=e(663),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.displayName="OrgAccountComponent",t.prototype.render=m.renderable(function(){return m.div(function(e){return function(){return m.addElement(e.getVisibilitySection()),e.props.hasBC?(m.addElement(e.getBCSettingsComponent()),m.addElement(e.getSlackSection())):(m.addElement(e.getSlackSection()),m.addElement(e.getBCSettingsComponent()))}}(this))}),t.prototype.getVisibilitySection=function(){return u.createElement(l,{header:m.render(function(){return m.format("team-visibility")}),contents:u.createElement(h,{canChange:this.props.isAdmin,visibility:this.props.visibility}),onChange:this.props.openChangeOrgVis,canChange:this.props.isAdmin})},t.prototype.getBCSettingsComponent=function(){var e;return e={items:[this.getOrgInviteRestrictionsSection(),this.getBoardCreateVisibilityRestrictionsSection(),this.getBoardInviteRestrictionsSection(),this.getSlackRestrictionsSection()],isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,billingUrl:this.props.billingUrl,hasEnterprisePromise:this.props.hasEnterprisePromise},u.createElement(s,e)},t.prototype.canChange=function(){return this.props.isAdmin&&this.props.prefsEnabled},t.prototype.getOrgInviteRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("team-membership-restrictions"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(a,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,restrictions:this.props.inviteRestrictions}),onChange:this.props.openChangeOrgInviteRestrictions,canChange:this.canChange()})},t.prototype.getBoardCreateVisibilityRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("board-creation-restrictions"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(r,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,restrictions:this.props.boardVisibilityRestrictions}),onChange:this.props.openChangeBoardVisRestrictions,canChange:this.canChange()})},t.prototype.getBoardInviteRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("inviting-non-org-members-to-boards"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(i,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,restricted:this.props.externalMembersDisabled}),onChange:this.props.openChangeNonOrgMemberBoardInvites,canChange:this.canChange()})},t.prototype.getSlackRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("slack-team-restrictions"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(p,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,slackAssociation:this.props.slackAssociation}),onChange:this.props.openChangeSlackRestrictions,canChange:this.canChange()})},t.prototype.getSlackSection=function(){return u.createElement(d,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,slackAssociation:this.props.slackAssociation,deleteSlackAssociation:this.props.deleteSlackAssociation,changeSlackSelfJoin:this.props.changeSlackSelfJoin})},t}(u.Component),t.exports=o},{}],635:[function(e,n,r){var i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N=function(e,t){function n(){this.constructor=e}for(var r in t)V.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},V={}.hasOwnProperty;i=e("jquery"),o=e(71),s=e(216),a=e(33),u=e(303),c=e(619),l=e(534),d=e(6),p=e(621),E=e(100),L=e(43),h=void 0,t(function(){return h=e(38)}),m=e(634),f=e(25),v=e(638),b=e(653),y=e(654),w=e(655),_=e(656),k=e(221),C=e(542),x=e("bluebird"),j=e("react"),S=e("react-dom"),T=e(513),M=e(129),B=e("underscore"),D=e(48),I=e(47),P=e(101),A=e(514)("org_account"),O=e(238),n.exports=g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return N(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:prefs",this.renderMainContent),this.listenTo(this.model,"change:slack-association",this.renderMainContent)},t.prototype.renderMainContent=function(){return null==this.$reactRoot&&(this.$reactRoot=i("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-org-account"),this},t.prototype.renderReactSection=function(){return S.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){return j.createElement(T,{},A.render(function(e){return function(){return A.div(function(){return A.addElement(e.getOrgAccountComponent()),e.model.owned()?e.model.isPremium()&&!o.willExpire(e.model.get("paidAccount"))?A.addElement(e.orgBCDelete()):A.createElement(p,{onClick:O(e,"orgDeleteConfirm")}):void 0})}}(this)))},t.prototype.getOrgAccountComponent=function(){var e,t;return e={isAdmin:this.model.owned(),slackAssociation:this.model.getLatestSlackAssociation(),prefsEnabled:this.model.isFeatureEnabled("prefs"),hasBC:this.model.isPremium(),hasEnterprisePromise:this.hasEnterprise(),visibility:this.model.getPermLevel(),billingUrl:this.model.get("name")+"/billing",changeSlackSelfJoin:this.model.changeSlackSelfJoin.bind(this.model),deleteSlackAssociation:this.model.deleteSlackAssociation.bind(this.model),inviteRestrictions:null!=(t=this.model.get("prefs").orgInviteRestrict)?t:[],boardVisibilityRestrictions:this.model.get("prefs").boardVisibilityRestrict,externalMembersDisabled:this.model.get("prefs").externalMembersDisabled,openChangeOrgVis:this.openChangeOrgVis.bind(this),openChangeOrgInviteRestrictions:this.openChangeOrgInviteRestrictions.bind(this),openChangeBoardVisRestrictions:this.openChangeBoardVisRestrictions.bind(this),openChangeNonOrgMemberBoardInvites:this.openChangeNonOrgMemberBoardInvites.bind(this),openChangeSlackRestrictions:this.openChangeSlackRestrictions.bind(this)},this.model.ensureSlackAssociation(),j.createElement(m,e)},t.prototype.hasEnterprise=function(){return x.map(a.me().get("idOrganizations"),function(e){return h.loadOrganizationData(e)}).then(function(e){return 0!==e.filter(function(e){return e.get("idEnterprise")}).length})},t.prototype.openChangeOrgVis=function(e){C.toggle({elem:e,view:new c({model:this.model,modelCache:this.modelCache})}),D("Organization View","Settings Page","Open Change Org Visibility")},t.prototype.openChangeOrgInviteRestrictions=function(e){C.toggle({elem:e,view:new y({model:this.model,modelCache:this.modelCache})}),D("Organization View","Settings Page","Open Restrict Org Invites by Email Domain")},t.prototype.openChangeNonOrgMemberBoardInvites=function(e){C.toggle({elem:e,view:new v({model:this.model,modelCache:this.modelCache})}),D("Organization View","Settings Page","Toggle Allow Inviting Non-Org Members to Boards")},t.prototype.openChangeSlackRestrictions=function(e){C.toggle({elem:e,view:new w({model:this.model,modelCache:this.modelCache})}),D("Organization View","Settings Page","Toggle Slack Team Linking Restrictions")},t.prototype.openChangeBoardVisRestrictions=function(e){C.toggle({elem:e,view:new b({model:this.model,modelCache:this.modelCache})}),D("Organization View","Settings Page","Open Change Board Visibility")},t.prototype.bcAdLink=function(){return D("Organization View","Settings Page","Inline Business Class Ad Link")},t.prototype.orgBCDelete=function(){var e;return D("Organization View","Settings Page","Open Delete Org Dialog"),e=function(e){return function(){return new x(function(t,n){return e.model.destroy({success:function(){return D("Organization","Successfully Delete"),t()},error:function(e,t){return n(s.fromResponse(t.status,E(t)))}})}).then(function(){return d.navigate("/",{trigger:!0})})}}(this),D("Organization View","Settings Page","Open Cancel Business Class and Delete Team Dialog"),j.createElement(u,{key:"cancel bc",isDeleting:!0,productName:P("products.bc"),id:this.model.id,cancelProduct:function(t){return function(n){var r,i;return n&&(i=n.reason,r=n.details,I(t.model,i,r)),t.model.paysWithPurchaseOrder()?e():k.cancel(t.model).then(function(e){return D("Organization","Successfully Canceled Paid Account"),t.model.set(e)}).catch(function(e){return L(e)}).then(function(){return e()})}}(this)})},t.prototype.orgDeleteConfirm=function(e){var t;D("Organization View","Settings Page","Open Delete Org Dialog"),t=function(e){return function(){return new x(function(t,n){return e.model.destroy({success:function(){return D("Organization","Successfully Delete"),t()},error:function(e,t){return n(s.fromResponse(t.status,E(t)))}})}).then(function(){return C.hide(),d.navigate("/",{trigger:!0})})}}(this),this.model.isPremium()&&!o.willExpire(this.model.get("paidAccount"))?(D("Organization View","Settings Page","Open Cancel Business Class and Delete Team Dialog"),C.toggle({elem:e,getViewTitle:function(){return P(["view title","delete team"])},maxWidth:600,reactElement:j.createElement(u,{key:"cancel bc",initialIsCancelling:!0,isDeleting:!0,productName:P("products.bc"),cancelProduct:function(e){return function(n){var r,i;return i=n.reason,r=n.details,I(e.model,i,r),e.model.paysWithPurchaseOrder()?t():k.cancel(e.model).then(function(t){return D("Organization","Successfully Canceled Paid Account"),e.model.set(t)}).catch(function(e){return L(e)}).then(function(){return t()})}}(this)})})):l.toggle("delete organization",{elem:e,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return t().done()}}(this)})},t.prototype.remove=function(){return S.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(_)},{}],636:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e("react"),o=e(514)("org_members"),t.exports=r=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={showingAll:!1}}return s(t,e),t.prototype.render=o.renderable(function(){var e,t,n,r,i,s,a,u,c,l,d,p,h;return l=this.props,t=l.canManageMembers,e=l.canLinkGoogleApps,n=l.canShowAll,c=l.openManageMembers,u=l.openBulkAdd,r=l.filter,s=l.onFilterChange,a=l.onShowAllChange,i=l.inviteTeamMembers,p=l.teamMemberCount,d=this.state.showingAll,h=function(e){return function(){return d=!e.state.showingAll,e.setState({showingAll:d}),a(d)}}(this),o.div(function(){return o.div(".org-members-actions-container",function(){return o.div(".org-members-actions-header",function(){return o.h1(function(){return o.format("team-members"),o.raw("&nbsp;"),o.span(".team-member-count",function(){return o.text("("+p+")")})}),o.p(function(){return o.format("team-members-view")})}),o.div(".org-members-actions",function(){return o.div(".org-members-actions-search",function(){return o.input(".org-members-page-navigation-input",{type:"text",placeholder:o.l("filter-by-name"),value:r,onChange:function(e){return s(e.target.value)}})}),o.div(".org-members-actions-add",function(){return t?o.b(i,{class:"primary button-link autowrap"},function(){return o.icon("add-member","invite-team-members")}):void 0})})})})}),t}(i.Component)},{}],637:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e("react"),s=e(514)("org_ads"),a=e(48),i=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.dismissAndTrack=this.dismissAndTrack.bind(this)}return u(t,e),t.prototype.dismissAndTrack=function(){return a("Organization View","Members Page","Dismiss Security Ad"),this.props.dismissAd()},t.prototype.render=s.renderable(function(){var e;return e=this.props.billingUrl,s.div(".org-ad",function(t){return function(){return s.div(".close-ad",{onClick:t.dismissAndTrack},function(){return s.icon("close")}),s.img(".org-upsell-image",{src:"https://a.trellocdn.com/images/ads/2d6f0633d534c6c18f992b9b71b96f49/lock.svg"}),s.div(".org-ad-description",function(){return s.p(".bold",function(){return s.format("need-more-security")}),s.p(function(){return s.format("deactivate-former-members")})}),s.a(".button.primary.js-lets-do-this",{href:e,onClick:function(){return a("Organization View","Members Page","Lets Do This Button")}},function(){return s.format("lets-do-this")})}}(this))}),t}(o.Component),r=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.dismissAndTrack=this.dismissAndTrack.bind(this)}return u(t,e),t.prototype.dismissAndTrack=function(){return a("Organization View","Boards Page","Dismiss Collections Ad"),this.props.dismissAd()},t.prototype.render=s.renderable(function(){var e;return e=this.props.billingUrl,s.div(".org-ad",function(t){return function(){return s.div(".close-ad",{onClick:t.dismissAndTrack},function(){return s.icon("close")}),s.div(".org-ad-description",function(){return s.p(".bold",function(){return s.format("need-more-control")})}),s.img(".org-upsell-image",{src:"https://a.trellocdn.com/images/collections/04c368f4479f478b6705bbd4cc373387/business-class-feature-roadmap.png"}),s.div(".org-ad-description",function(){return s.p(function(){return s.format("manage-with-business-class")})}),s.a(".button.primary.js-lets-do-this",{href:e,onClick:function(){return a("Organization View","Boards Page","Lets Do This Button")}},function(){return s.format("lets-do-this")})}}(this))}),t}(o.Component),t.exports={OrganizationMembersAd:i,OrganizationBoardsAd:r}},{}],638:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(129),o=e(522),s=e(878),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="inviting non-org members",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.render)},t.prototype.events={"click a":"setPref"},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),e.externalMembersDisabled=e.prefs.externalMembersDisabled,this.$el.html(s(e)),this},t.prototype.setPref=function(e){i.stop(e),e.target.parentElement.classList.contains("active")||this.model.setPref("externalMembersDisabled",!this.model.getPref("externalMembersDisabled"))},t}(o)},{}],639:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N,V,$,R,z,U,F,q,H=function(e,t){function n(){this.constructor=e}for(var r in t)K.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},K={}.hasOwnProperty,W=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),i=e(71),s=e(213),a=e(610),u=e(33),p=e(304),c=e(611),l=e(612),h=e(305),m=e(306),f=e(534),g=e(6),b=e(307),v=e(310),o=e(309),P=e(317),E=e(318),S=e(316),y=e(38),w=e(25),d=e(301),k=e(656),C=e(221),x=e(286),j=e(542),M=e("react"),B=e("react-dom"),O=e(513),L=e(129),A=e("underscore"),D=e(319),z=e(85),N=e(101),I=e(238),U=e(48),F=e(47),V=e("moment"),$=e(110),q=e("xtend"),R=e("recup"),T=e("bluebird"),t.exports=_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return H(t,e),t.prototype.renderMainContent=function(){return U("Team Billing Page","Open"),this.$(".js-content").empty(),null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-billing"),this},t.prototype.renderReactSection=function(){return B.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){var e;return M.createElement(O,{},i.hasAccount(null!=(e=this.model.get("paidAccount"))?e.standing:void 0)&&this.model.owned()?this.getBillingComponent():this.getSignUpComponent())},t.prototype.getBillingComponent=function(){var e;return e=D(this.model,w,{type:"bc",productName:N("products.bc"),productIconClass:"business-class",detailsUrl:"/business-class",onRenewClick:I(this,"renew"),cancelProduct:I(this,"cancel"),onSwitchToYearly:I(this,"switchToYearly"),didntGetAuthStatus:function(e){return function(){return y.loadOrganizationData(e.model.get("name")).done()}}(this),didGetAuthStatus:function(e){return function(){return y.loadOrganizationData(e.model.get("name")).done()}}(this),onChangeBillingContactClick:I(this,"changeBillingContactPopover"),reactivateProduct:I(C,"reactivate",this.model),changeCreditCard:I(C,"changeCreditCard",this.model),createPaidAccount:I(C,"createAccount",this.model),paidAccountPoll:I(s,{url:this.model.urlRoot+"/"+this.model.id+"?paid_account=true"}),onClickChangeCC:I(this,"changeCreditCardPopover"),onChangeAdditionalDetailsClick:I(this,"changeAdditionalDetailsPopover")}),R.render(function(t){return function(){return R.div(function(){var n,i,o,s,a,u;return i=null!=(o=e.paidAccount)&&null!=(s=o.products)?s[0]:void 0,null!=i&&w.isUpgrade(i)&&(a=w.isPerActiveUser(i)?t.model.get("activeBillableMemberCount"):t.model.get("billableMemberCount"),n=W.call(w.BC1Products,i)>=0&&a>=10&&!r.cookie("upgrade-bc")||t.model.isEnterprise(),R.createElement(x,{stringsKey:"business-class-upgrade",subtitleCount:2,infoUrl:"/business-class",epilogueCount:n?2:1,icon:"business-class"}),n?R.createElement(l):(u=0,R.createElement(c,q(w.currentPriceObjectForModel(t.model),{isMonthly:w.isMonthly(i),yearlyDiscount:u,yearlyDiscountAmount:e.current.yearly.totalPrice*u,isPerActiveUser:w.isPerActiveUser(i),userCount:a,onUpgradeClick:function(e){return C.changeProduct(t.model,e).then(function(e){return U("Organization","Successfully Upgraded to BC3"),t.model.set(e)})}})))),R.createElement(d,e)})}}(this))},t.prototype.getSignUpComponent=R.renderable(function(){return R.div(function(e){return function(){var t,n,r,i,c,l;return e.model.isFeatureEnabled("plugins")||R.createElement(x,{stringsKey:"business-class",subtitleCount:1,infoUrl:"/business-class",epilogueCount:0,icon:"business-class"}),e.model.owned()?(r=w.currentPriceObjectForModel(e.model),(null!=(l=z("billingComponent"))?l.get("showNewBillingComponent"):void 0)?(n="start-business-class-test",t=".bc-billing-test",i=!0,c=[$(S,{inBillingTest:!0,productName:"Business Class",monthlyProduct:r.monthly,yearlyProduct:r.yearly,defaultProduct:r.yearly.productNumber,billingStrategy:r.billingStrategy}),$(v,{inBillingTest:!0}),$(o,{inBillingTest:!0}),$(P,{monthlyProduct:r.monthly,yearlyProduct:r.yearly,defaultProduct:r.yearly.productNumber,billingStrategy:r.billingStrategy}),$(E)]):(n="upgrade-team",c=[$(S,{productName:"Business Class",monthlyProduct:r.monthly,yearlyProduct:r.yearly,defaultProduct:r.yearly.productNumber,billingStrategy:r.billingStrategy}),$(v),$(o),$(E)]),R.div(t,function(){var t,o,a,l,d,p;return R.createElement(b,{defaultProduct:r.yearly.productNumber,monthlyProduct:r.monthly,yearlyProduct:r.yearly,onSubmit:I(C,"createAccount",e.model),doPoll:I(s,{url:e.model.urlRoot+"/"+e.model.id+"?paid_account=true"}),buttonKey:n,inBillingTest:i,contentBuilders:c,extraData:{billingContactFullName:null!=(t=null!=(o=e.model.get("paidAccount"))?o.contactFullName:void 0)?t:u.me().get("fullName"),billingContactEmail:null!=(a=null!=(l=e.model.get("paidAccount"))?l.contactEmail:void 0)?a:u.me().get("email"),billingContactLocale:null!=(d=null!=(p=e.model.get("paidAccount"))?p.contactLocale:void 0)?d:u.me().getPref("locale")},didntGetAuthStatus:function(){return y.loadOrganizationData(e.model.get("name")).done()},didGetAuthStatus:function(){var t,n;return null!=(n=null!=(t=e.options.urlOptions)?t.returnUrl:void 0)?y.loadOrganizationPaidAccount(e.model.id).then(function(){return g.navigate(n,{trigger:!0})}):g.organizationBoardsView(e.model.get("name"),e.model.id)}})})):e.model.isFeatureEnabled("plugins")?void 0:R.createElement(a,{admins:e.model.memberList.chain().filter(function(t){return e.model.ownedByMember(t)}).map(function(e){return{avatarHash:e.get("avatarHash"),fullName:e.get("fullName"),username:e.get("username")}}).value()})}}(this))}),t.prototype.cancel=function(e){var t,n;return e&&(n=e.reason,t=e.details),U("Organization View","Billing Page","Open Cancel Business Class Dialog"),F(this.model,n,t),e?T.resolve():C.cancel(this.model).then(function(e){return function(t){return U(e.model.typeName,"Successfully Canceled Paid Account"),e.model.set(t)}}(this))},t.prototype.renew=function(){return U("Organization View","Billing Page","Renew Expiring Business Class Subscription"),C.renew(this.model).then(function(e){return function(t){return U("Organization","Successfully Renewed Expiring Yearly Business Class Subscription"),e.model.set(t)}}(this)).done()},t.prototype.switchToYearly=function(e){return f.toggle("yearly billing switch",{elem:e,model:this.model,confirmBtnClass:"primary",fxConfirm:function(e){return function(t){return C.changeProduct(e.model,w.getYearlyEquivalent(e.model.get("paidAccount").product)).then(function(t){return U("Organization","Successfully Switched Business Class to Yearly Billing"),e.model.set(t)}).done()}}(this)})},t.prototype.changeBillingContactPopover=function(e){return U("Organization View","Billing Page","Open Change Billing Contact Info"),j.toggle({elem:e,view:new h({model:this.model,modelCache:this.modelCache})})},t.prototype.changeCreditCardPopover=function(e){return U("Organization View","Billing Page","Open Change Credit Card"),j.toggle({elem:e,view:new m({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAdditionalDetailsPopover=function(e){return U("Organization View","Billing Page","Open Change Additional Details"),j.toggle({elem:e,view:new p({model:this.model,modelCache:this.modelCache})})},t.prototype.remove=function(){return B.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(k)},{}],640:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};l=e("underscore"),i=e(329),r=e(328),o=e(332),s=e(334),a=e(641),u=e("react"),c=e(129),v=e(514)("org_filtering"),h=e(101),d=e(238),p=e(91),m=e(131),y=e("xtend"),b=e(48),g=["active","members","stars","alphabetical"],f=["tagFilter","sort"],t.exports=u.createClass({displayName:"OrganizationBoardsComponent",getInitialState:function(){var e,t;return e=l.defaults(null!=(t=this.props.initialFilterState)?t:{},{filter:"",tagFilter:null,sort:g[0],showOtherPrivateBoards:!1}),this.filterDoesntExist(e.tagFilter,this.props.tags)&&(e.tagFilter=null),e},render:v.renderable(function(){return v.div(".boards-page-layout",function(e){return function(){return v.div(".boards-page-layout-sidebar",function(){return v.addElement(e.getFilterComponent())}),v.div(".boards-page-layout-list",function(){return v.addElement(e.getBoardsComponent())})}}(this))}),componentWillReceiveProps:function(e){return this.filterDoesntExist(this.state.tagFilter,e.tags)?this.setState({tagFilter:null}):void 0},componentWillUpdate:function(e,t){return l.isEqual(l.pick(t,f),l.pick(this.state,f))?void 0:this.props.onFilterChange(l.pick(t,f))},shouldComponentUpdate:m,filterDoesntExist:function(e,t){return e&&!(w.call(l.pluck(t,"id"),e)>=0)},toggleTagFilter:function(e){return e===this.state.tagFilter?this.setState({tagFilter:null}):this.setState({tagFilter:e})},toggleShowOtherPrivateBoards:function(){return this.setState({showOtherPrivateBoards:!this.state.showOtherPrivateBoards})},isVisibleBoard:function(e){var t;return(!this.state.tagFilter||(t=this.state.tagFilter,w.call(e.idTags,t)>=0))&&(!this.state.filter||c.buildFuzzyMatcher(this.state.filter)(e.name))&&(this.state.showOtherPrivateBoards||!e.isOtherPrivate)},getBoardsComponent:function(){var e;return e={items:l.chain(this.props.boards.slice().sort(function(e,t){return e.name.localeCompare(t.name)})).sortBy(function(e){return function(t){switch(e.state.sort){case"alphabetical":return 0;case"active":return-t.dateLastActivity.valueOf();case"members":return-t.membershipCount;case"stars":return-t.starCount}}}(this)).map(function(e){return function(t){return y(t,{hidden:!e.isVisibleBoard(t),tagComponents:t.tags.map(function(t){return u.createElement(o,{text:t.name,key:t.id,selected:t.id===e.state.tagFilter,onClick:function(){return b("Organization View","Boards Page","Click Tag Under Board"),e.toggleTagFilter(t.id)}})}).concat(t.extraTagComponents)})}}(this)).map(function(e){return u.createElement(i,e)}).value(),createNewItem:null!=this.props.newBoard?u.createElement(r,{newBoard:this.props.newBoard}):void 0},u.createElement(s,e)},getFilterComponent:function(){var e,t,n;return e=function(e,t){var n,r,i,o,s,a,u,c;for(u={},r=0,s=e.length;s>r;r++)for(i=e[r],c=t(i),o=0,a=c.length;a>o;o++)n=c[o],Object.hasOwnProperty.call(u,n)||(u[n]=0),u[n]++;return u},t=e(this.props.boards,d.get("idTags")),n={tags:this.props.tags.map(function(e){return function(n){var r;return{html:v.l("tag-with-count",{name:n.name,count:p(null!=(r=t[n.id])?r:0)}),onClick:e.toggleTagFilter.bind(e,n.id),selected:n.id===e.state.tagFilter}}}(this)),sorts:g.map(function(e){return function(t){return{html:h(["org sort",t]),onClick:function(){return b("Organization View","Boards Page","Select Sort",t),e.setState({sort:t})},selected:t===e.state.sort}}}(this)),onFilterChange:function(e){return function(t){return e.setState({filter:t})}}(this),onAddTag:this.props.addTag,filter:this.state.filter,showOtherPrivateBoards:this.state.showOtherPrivateBoards,canShowOtherPrivateBoards:l.find(this.props.boards,"isOtherPrivate"),toggleOtherPrivateBoards:d(this,"toggleShowOtherPrivateBoards"),key:this.id},u.createElement(a,n)}})},{}],641:[function(e,t,n){var r,i,o,s;r=e("react"),s=e(514)("org_filtering"),o={alphabetical:"Alphabetical",active:"Most Active",members:"Number of Members",stars:"Number of Stars"},i=function(e,t,n){var r,i,o;return o=null!=n?n:{},r=o.hasCloseableItems,i=o.onAddTag,s.ul(".boards-page-navigation-list",function(){var n,o,a,u,c,l;for(s.li(".boards-page-navigation-list-header",function(){return s.text(t)}),o=0,a=e.length;a>o;o++)c=e[o],n=c.html,l=c.selected,u=c.onClick,s.li(".boards-page-navigation-list-item",function(){var e;return e={"boards-page-navigation-list-item-link":!0,"mod-closeable":r,"is-active":l},s.b(u,{class:s.classify(e)},function(){return s.raw(n),r&&l?s.icon("close",{class:"boards-page-navigation-list-item-link-icon"}):void 0})});null!=i&&s.li(".boards-page-navigation-list-item",function(){return s.b(i,{class:"boards-page-navigation-list-item-link mod-quiet"},function(){return s.format("create-tag")})})})},t.exports=r.createClass({displayName:"OrganizationBoardsFilterComponent",render:s.renderable(function(){var e,t,n,r,o,a,u,c,l;return o=this.props,t=o.filter,u=o.sorts,c=o.tags,r=o.onFilterChange,n=o.onAddTag,a=o.showOtherPrivateBoards,e=o.canShowOtherPrivateBoards,l=o.toggleOtherPrivateBoards,s.div(".boards-page-navigation",function(){return s.input(".boards-page-navigation-input",{type:"text",placeholder:s.l("search-for-boards"),value:t,onChange:function(e){return r(e.target.value)}}),i(u,s.l("sort")),c.length?i(c,s.l("filter-by-tag"),{hasCloseableItems:!0,onAddTag:n}):(s.p(".quiet.boards-page-navigation-explainer",function(){return s.format("tags-explanation")}),s.b(n,{class:"quiet-button"},function(){return s.format("create-tag")})),e?s.ul(".boards-page-navigation-list",function(){s.li(".boards-page-navigation-list-header",function(){return s.format("visibility")}),s.li(".boards-page-navigation-list-item",function(){var e;return e={"boards-page-navigation-list-item-link":!0,"mod-closeable":!0,"is-active":a},s.b(l,{class:s.classify(e)},function(){return s.format("show other private boards"),a?s.icon("close",{class:"boards-page-navigation-list-item-link-icon"}):void 0})})}):void 0})})})},{}],642:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;i=e(129),o=e(522),s=e("underscore"),u=e(519),a=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="boards for member",t.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},t.prototype.initialize=function(){this.org=this.options.parent},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.boards=this.org.boardList.models.filter(function(e){
return function(t){return s.contains(t.memberList.models,e.model)&&t.isOpen()}}(this)).map(function(e){return function(t){var n;return n=t.toJSON(),n.memberType=a(["member types",t.getMemberType(e.model)]),n.url=t.getUrl(),n}}(this)),this.$el.html(u.fill("org_boards_for_member",e)),this},t}(o)},{}],643:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A=function(e,t){function n(){this.constructor=e}for(var r in t)D.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},D={}.hasOwnProperty,I=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};j=e("underscore"),r=e("jquery"),i=e(609),o=e(33),c=e(329),a=e(328),u=e(300),l=e(331),d=e(334),p=e(615),s=e(490),m=e(379),f=e(80),g=e(640),b=e(656),h=e(6),y=e(542),w=e("react"),_=e("react-dom"),k=e(513),C=e(114),x=e(129),P=e(866),M=e(101),S=e(238),E=e(48),O=e(514)("org_filtering"),T=e(91),L=e("xtend"),B=e("moment"),t.exports=v=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return A(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),E("Organization Boards Page","Open"),this.listenTo(this.model,"change",this.renderReactSection),this.listenTo(this.model.boardList,"change:idTags change:name",this.renderReactSection),this.listenTo(this.model.tagList,"add remove reset change",this.renderReactSection),this.listenTo(o.me().boardStarList,"add remove reset",this.frameDebounce(this.renderReactSection)),this.listenTo(o.me(),"change:messagesDismissed",this.frameDebounce(this.renderReactSection))},t.prototype.events={"click .js-close-intro-helper":"closeBCIntro"},t.prototype.isFullWidth=function(){return!this.isAdDismissed("collection-features")||this.model.isFeatureEnabled("tags")},t.prototype.boardToModelForBoardItem=function(e){var t,n;return t={id:e.id,name:e.get("name"),idTags:e.getIdTags(),isOtherPrivate:null==o.me().boardList.get(e.id)&&"private"===e.getPref("permissionLevel"),membershipCount:e.getMembershipCount(),starCount:e.getStarCount("organization"),dateLastActivity:new Date(null!=(n=e.get("dateLastActivity"))?n:x.idToDate(e.id)),background:this.backgroundObjForBoard(e),showOptions:o.isLoggedIn(),isStarred:null!=o.me().boardStarList.getBoardStar(e.id),relUrl:e.getUrl(),onStarClick:function(e){return function(e){var t;t=o.me().boardStarList,null==t.getBoardStar(e)?t.starBoard(e):t.unstarBoard(e)}}(this),badgeComponents:this.model.isFeatureEnabled("tags")?this.badgeComponentsForBoard(e):[],key:e.id}},t.prototype.boardToModelForBoardItemWithTags=function(e){return L(this.boardToModelForBoardItem(e),{tags:this.tagsForBoard(e),extraTagComponents:[w.createElement(l,{onClick:this.addTagToBoard.bind(this,e),key:e.id,id:e.id})]})},t.prototype.boardToModelForBoardItemWithNoTags=function(e){return L(this.boardToModelForBoardItem(e),{tagComponents:[]})},t.prototype.backgroundObjForBoard=function(e){var t,n,r,i;return j.extend({brightness:e.getPref("backgroundBrightness")},e.getPref("backgroundTile")?{image:e.getPref("backgroundImage"),tiled:!0}:(t=null!=(n=null!=(r=x.smallestPreviewBiggerThan(e.getPref("backgroundImageScaled"),400,200))?r.url:void 0)?n:e.getPref("backgroundImage"))?{image:t,tiled:!1}:{color:null!=(i=e.getPref("backgroundColor"))?i:e.getClientBackgroundColor("blue")})},t.prototype.tagsForBoard=function(e){return this.model.tagList.models.filter(function(t){var n;return n=t.id,I.call(e.getIdTags(),n)>=0}).map(function(e){return{id:e.id,name:e.get("name")}})},t.prototype.storedTagsCleanup=function(e){var t,n;return t=C.get(this.localStorageKey()),n=null!=t?t.tagFilter:void 0,!n||I.call(j.map(e,function(e){return e.id}),n)>=0?void 0:(t.tagFilter=null,C.set(this.localStorageKey(),t))},t.prototype.addTagToBoard=function(e,t){return E("Organization View","Boards Page","Open Tag Select Menu"),y.toggle({elem:t,view:p,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.badgeComponentsForBoard=function(e){var t,n,r,i,o,a;return i=e.getStarCount("organization"),n=e.getMembershipCount(),t=null!=(r=e.get("dateLastActivity"))?r:x.idToDate(e.id),o=s.getPermLevelIconClassForBoard(e),a=s.getPermLevelAltTextForBoard(e),j.compact([w.createElement(u,{icon:o,title:a,iconClass:"is-vis-color",key:["vis",e.id].join("-")}),w.createElement(u,{icon:"member",text:T(n),title:O.l("members"),key:["member",e.id].join("-")}),i?w.createElement(u,{icon:"star",text:T(i),title:O.l("members-who-starred-board"),key:["star",e.id].join("-")}):void 0,w.createElement(u,{icon:"activity",text:f.toDateString(t),title:O.l("last-activity"),key:["activity",e.id].join("-")})])},t.prototype.renderMainContent=function(){var e;return e=this.model.isPremium()&&this.model.owned(),this.$(".js-content").empty(),e&&!o.me().isDismissed("BCIntro-"+this.model.id)&&this.$(".js-content").append(P({isEnterprise:this.model.belongsToRealEnterprise(),hasCSVExport:this.model.isFeatureEnabled("csvExport"),hasGoldMembers:this.model.isFeatureEnabled("goldMembers")})),null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-org-profile"),this},t.prototype.renderReactSection=function(){return _.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.localStorageKey=function(){return"orgFilteringState-"+this.model.id},t.prototype.saveFilter=function(e){return C.set(this.localStorageKey(),e)},t.prototype.getReactRoot=function(){return w.createElement(k,{},this.model.isFeatureEnabled("tags")?this.getFilterableBoardsComponent():this.getBoardsComponent())},t.prototype.getFilterableBoardsComponent=function(){var e;return e={key:this.model.id,id:this.model.id,tags:this.model.tagList.toJSON(),boards:this.getBoardItemsWithTags(),newBoard:o.me().canAddBoardsTo(this.model)?this.newBoard.bind(this):void 0,addTag:S(this,"addTag"),onFilterChange:S(this,"saveFilter"),initialFilterState:C.get(this.localStorageKey())},w.createElement(g,e)},t.prototype.getBoardsComponent=function(){var e,t,n;return t=o.me(),e=this.isAdDismissed("collection-features"),n={billingUrl:h.getOrganizationBillingUrl(this.model),showAd:!e,isAdDismissed:e,dismissAd:t.dismissAd.bind(t,"collection-features"),items:this.getBoardItemsWithNoTags().map(S.choke(1,w,"createElement",c))},o.me().canAddBoardsTo(this.model)&&(n.createNewItem=w.createElement(a,{newBoard:S(this,"newBoard")})),w.createElement(d,n)},t.prototype.addTag=function(e){return E("Organization View","Boards Page","Open Create Tag Menu"),y.toggle({elem:e,view:i,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.newBoard=function(e){return E("Organization View","Boards Page","Open Create Board Menu"),y.toggle({elem:e,view:m,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.getVisibleBoards=function(){return this.model.boardList.models.filter(function(e){return e.isOpen()})},t.prototype.getBoardItemsWithTags=function(){return this.getVisibleBoards().map(S(this,"boardToModelForBoardItemWithTags"))},t.prototype.getBoardItemsWithNoTags=function(){return this.getVisibleBoards().map(S(this,"boardToModelForBoardItemWithNoTags"))},t.prototype.remove=function(){return _.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t.prototype.closeBCIntro=function(){o.me().dismiss("BCIntro-"+this.model.id),E("Organization View","Profile Page","Dismiss BC Intro Helper"),this.renderMainContent(),x.scrollToTop()},t}(b)},{}],644:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e(532),i=e(215),o=e(80),s=e(103),u=e(656),c=e(129),l=e("underscore"),d=e(43),h=e(519),m=e(48),p=e("moment"),f=e(117),g=e("xtend"),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:exports",this.renderExports)},t.prototype.events={"click .js-create-new-export":"clickCreateNewExport","click .js-download-export":"downloadExport"},t.prototype.renderMainContent=function(){var e;return e={},e.hasCSV=this.model.isFeatureEnabled("csvExport"),this.$(".js-content").html(h.fill("org_export",e,{editable:this.model.editable()})),this.renderExports(),this.setActiveView(".js-org-export"),this},t.prototype.renderExports=function(){var e,t,n,r,i,a,u,c;if(t=this.model.toJSON({prefs:!0}),e=this.$(".js-list-exports").empty(),l.isEmpty(t.exports))r=h.fill("org_export_empty");else for(r="",u=t.exports,i=0,a=u.length;a>i;i++)n=u[i],t=l.clone(n),t.size=s.bytes(t.size),t.time=p(o.parse(t.startedAt)).calendar(),t.generating=null==t.exportUrl,c=f(["exports",t.status.stage]),null!=c?t.status=g(t.status,{stage:c}):d(new Error("Missing export stage for "+t.status.stage)),r+=h.fill("org_export_item",t);return e.append(r),this},t.prototype.export=function(e){return i({url:"/1/organizations/"+this.model.get("name")+"/exports",method:"post",data:{attachments:e},success:function(t){return function(n){return m("Organization","Export",e?"With Attachments":"Without Attachments"),null!=n?(t.model.get("exports").unshift(n),t.model.trigger("change:exports")):void 0}}(this),error:function(e){return function(e,t,n,i){return e.responseText.indexOf("in progress")>-1?r.show("ongoing org export","error","alert",5e3):i()}}(this)})},t.prototype.clickCreateNewExport=function(e){return c.stop(e),this.$("#includeAttachments").is(":checked")?this.export(!0):this.export(!1)},t.prototype.downloadExport=function(e){m("Organization","Download Export")},t}(u)},{}],645:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(114),o=e(522),s=e(519),a=e(48),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="link google apps domain",t.prototype.events={"click .js-link":"link"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(s.fill("org_link_ga_helper",e,{editable:this.model.editable()})),this},t.prototype.link=function(){a("Organization View","Members Page","Google Apps Marketplace link"),i.enabled()&&i.set("idOrganizationLinking",this.model.id)},t}(o)},{}],646:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(522),o=e(519),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="li",t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0}),e.visIconClass=this.model.getPermLevel(),e.hasBusinessClass=this.model.isPremium(),this.$el.html(o.fill("organization_list_item",e)),this},t}(i)},{}],647:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e("jquery"),i=e(646),s=e(522),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.tagName="ul",t.prototype.className="org-list",t.prototype.initialize=function(e){this.listenTo(this.model.organizationList,{"add remove reset change:closed":this.frameDebounce(this.render)})},t.prototype.render=function(){var e;return this.$el.empty(),e=this.model.getSortedOrgs().map(function(e){return function(t){return e.subview(i,t)}}(this)),this.appendSubviews(e),this},t}(s)},{}],648:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C=function(e,t){function n(){this.constructor=e}for(var r in t)x.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},x={}.hasOwnProperty;g=e("underscore"),v=e(238),r=e(631),i=e(636),s=e(637).OrganizationMembersAd,o=e(597),u=e(649),c=e(650),l=e(651),m=e(657),d=e("react"),p=e("react-dom"),h=e(513),b=e("recup"),y=e(85),w=e(514)("org_members"),_=e(48),f=e(129),k=e("xtend"),t.exports=a=function(e){function t(e){var n;t.__super__.constructor.apply(this,arguments),this.state={filter:"",showAll:!1,showNewLayout:null!=(n=y("teamMembersTabLayout"))?n.get("enabled"):void 0}}return C(t,e),t.prototype.render=w.renderable(function(){return w.div(".org-members-page-layout",function(e){return function(){return w.div(".org-members-page-layout-sidebar",function(){return w.addElement(e.orgSidebarPropsToElement()),e.props.sidebar.hasBC||e.props.sidebar.isAdDismissed?void 0:w.addElement(e.orgAdComponent())}),w.div(".org-members-page-layout-list",function(){return e.state.showNewLayout&&w.addElement(e.getOrganizationActionsElement()),w.addElement(e.getMemberListElement())})}}(this))}),t.prototype.orgAdComponent=function(){var e;return e={billingUrl:this.props.sidebar.billingUrl,dismissAd:this.props.sidebar.dismissAd},d.createElement(s,e)},t.prototype.orgSidebarPropsToElement=function(){var e;return this.state.showNewLayout?null:(e=k(this.props.sidebar,{filter:this.state.filter,onFilterChange:function(e){return function(t){return e.setState({filter:t})}}(this),onShowAllChange:function(e){return function(t){return e.setState({showAll:t})}}(this)}),d.createElement(l,e))},t.prototype.getMemberListElement=function(){var e;return e={items:this.props.memberModels.map(v(this,"memberModelToMemberItemElement"))},d.createElement(c,e)},t.prototype.isVisibleMember=function(e){return(!e.hidden||this.state.showAll)&&(!this.state.filter||f.buildFuzzyMatcher(this.state.filter)(e.fullName))},t.prototype.memberModelToMemberItemElement=function(e){var t;return t=g.extend({isFilterMatch:this.isVisibleMember(e)},e),d.createElement(u,t)},t.prototype.getOrganizationActionsElement=function(){var e;return e=k(this.props.sidebar,{teamMemberCount:this.props.orgMemberList.length,filter:this.state.filter,onFilterChange:function(e){return function(t){return e.setState({filter:t})}}(this),onShowAllChange:function(e){return function(t){return e.setState({showAll:t})}}(this)}),d.createElement(i,e)},t}(d.Component)},{}],649:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e("react"),o=e(514)("member_list_item_detail"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=o.renderable(function(){var e,t,n,r,i,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B;return S=this.props,f=S.isVirtual,l=S.isDeactivated,s=S.fullName,B=S.username,M=S.showGoogleApps,a=S.gMail,h=S.isOrgMember,T=S.showActivity,t=S.allowTypeChange,x=S.orgMemberType,e=S.allowReactivate,p=S.isMe,i=S.canRemove,C=S.orgIsBC,j=S.ownsOrg,u=S.hidden,k=S.onViewActivity,w=S.onRoleChange,y=S.onRemoveOrDeactivate,r=S.avatarHash,n=S.avatarDomain,c=S.initials,m=S.isOrganizationAdmin,b=S.onReactivateClick,_=S.onUnhideMember,g=S.onHideMember,v=S.onInviteMember,d=S.isFilterMatch,o.div({class:o.classify({"member-list-item-detail":!0,hide:!d})},function(){return o.div({class:o.classify({member:!0,"member-no-menu":!0,"member-virtual":f,"member-deactivated":l})},function(){return r?o.img(".member-avatar",{height:"30",width:"30",src:[n,r,"30.png"].join("/"),srcSet:[n,r,"30.png 1x"].join("/")+", "+[n,r,"50.png 2x"].join("/"),alt:s+" ("+B+")",title:s+" ("+B+")"}):o.span(".member-initials",{title:s+" ("+B+")"},function(){return c?o.text(c):void 0}),l||m&&o.span(".member-type.admin",{title:o.l("this-member-is-an-admin-of-this-organization")}),o.span(".member-gold-badge",{title:o.l("this-member-has-trello-gold")})}),o.div(".details",function(){return o.p(".name-line",function(){return o.span(".full-name",function(){return s?o.text(s):void 0})}),o.p(".u-bottom.quiet",function(){return B&&o.span(".quiet.u-inline-block",function(){return o.format("at-username",{username:B})}),M&&a?(B&&o.text("- "),o.icon("google"),o.text(a)):void 0})}),o.div(".options",function(){if(h){if(T&&o.b(k,".option.quiet-button",function(){return o.format("activity")}),t?o.b(w,".option.button-link.role-button",function(){return o.text(x),o.icon("dropdown-menu")}):o.p(".option.status.quiet",function(){return o.text(x)}),e&&o.b(b,".option.quiet-button",function(){return o.format("reactivate")}),p)return o.b(y,{class:o.classify({option:!0,"button-link":!0,"remove-button":!0,disabled:!i}),disabled:!i},function(){return C?o.icon("close","leave-ellipsis"):o.icon("close","leave")});if(j)return o.b(y,{class:o.classify({option:!0,"button-link":!0,"remove-button":!0,disabled:!i}),disabled:!i},function(){return o.icon("close","remove-ellipsis")})}else if(M)return u?o.b(_,".option.quiet-button",function(){return o.format("always-show")}):o.b(g,".option.quiet-button",function(){return o.format("dismiss")}),o.b(v,".option.button-link.primary",function(){return o.icon("add","add-member")})})})}),t}(i.Component)},{}],650:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e("react"),o=e(514)("org_members"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=o.renderable(function(){var e;return e=this.props.items,o.div(function(){e.forEach(o.addElement)})}),t}(i.Component)},{}],651:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e("react"),o=e(514)("org_members"),t.exports=r=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={showingAll:!1}}return s(t,e),t.prototype.render=o.renderable(function(){var e,t,n,r,i,s,a,u,c,l,d,p;return l=this.props,t=l.canManageMembers,e=l.canLinkGoogleApps,n=l.canShowAll,s=l.onLinkGoogleApps,c=l.openManageMembers,u=l.openBulkAdd,r=l.filter,i=l.onFilterChange,a=l.onShowAllChange,d=this.state.showingAll,p=function(e){return function(){return d=!e.state.showingAll,e.setState({showingAll:d}),a(d)}}(this),o.div(function(){return o.div(".org-members-page-navigation-list",function(){return o.div(".org-members-options",function(){return o.div(".org-members-page-navigation-list-header",function(){return o.format("search-team")}),o.hr(),o.input(".org-members-page-navigation-input",{style:{marginBottom:50},type:"text",placeholder:o.l("find-members-by-name-ellipsis"),value:r,onChange:function(e){return i(e.target.value)}}),t&&(o.div(".org-members-page-navigation-list-header",function(){return o.format("add-members")}),o.hr(),o.b(c,{class:"primary button-link autowrap"},function(){return o.icon("member","add-by-name-or-email")}),o.b(u,{class:"button-link autowrap"},function(){return o.icon("member","add-a-list-of-emails-or-usernames")})),e&&o.div(function(){return o.b(s,{class:"button-link"},function(){return o.icon("google","link-google-apps-domain")})}),n?o.b(p,".quiet-button",function(){return o.format(d?"hide-dismissed":"show-dismissed-accounts")}):void 0})})})}),t}(i.Component)},{}],652:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T,M,B,O,P,E,L,A,D,I,N=function(e,t){function n(){this.constructor=e}for(var r in t)V.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},V={}.hasOwnProperty,$=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),B=e("underscore"),i=e(532),o=e(216),s=e(33),O=e(238),E=e(101),u=e(6),a=e(616),P=e(85),c=e(623),d=e(630),l=e(624),p=e(203),h=e(631),m=e(597),f=e(645),g=e(648),v=e(649),b=e(650),y=e(651),_=e(656),C=e("bluebird"),k=e(542),x=e("react"),j=e("react-dom"),S=e(513),L=e("recup"),T=e(657),A=e(85),D=e(514)("org_members"),I=e(48),M=e(129),t.exports=w=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return N(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.getGoogleAppsData(),this.listenTo(this.model,{"change:memberships":this.frameDebounce(this.renderReactSection)}),this.listenTo(s.me(),"change:messagesDismissed",this.frameDebounce(this.renderReactSection))},t.prototype.isFullWidth=function(){return!0},t.prototype.renderMainContent=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$(".js-content").append(this.reactRoot),this.renderReactSection(),this.setActiveView(".js-org-members"),this},t.prototype.renderReactSection=function(){return j.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getReactRoot=function(){return x.createElement(S,{},this.getOrgMembersComponent())},t.prototype.getOrgMembersComponent=function(){var e;return e={memberModels:this.getMembers().map(O(this,"memberToModelForMemberItemElement")),sidebar:this.orgToOrgSidebarProps(),orgMemberList:this.getMembers()},x.createElement(g,e)},t.prototype.orgToOrgSidebarProps=function(){var e,t,n,r;return t=s.me(),e=this.isAdDismissed("security-features"),n={canManageMembers:this.model.editable(),canLinkGoogleApps:this.model.isFeatureEnabled("googleApps")&&(!this.model.get("prefs").associatedDomain||this.googleAppsFetchFailed)&&this.model.editable(),canShowAll:this.model.isFeatureEnabled("googleApps")&&B.any(this.mappingsData,function(e){return function(t){var n;return(null!=(n=e.modelCache.findOne("Member","gMail",t.gMail))?n.get("hidden"):void 0)||t.hidden}}(this)),onLinkGoogleApps:this.startLinkingGoogleApps.bind(this),openManageMembers:this.openManageMembers.bind(this),openBulkAdd:this.openBulkAdd.bind(this),billingUrl:u.getOrganizationBillingUrl(this.model),hasBC:this.model.isPremium(),isAdDismissed:e,dismissAd:t.dismissAd.bind(t,"security-features"),inviteTeamMembers:(null!=(r=A("teamMembersTabLayout"))?r.get("enabled"):void 0)&&this.inviteTeamMembers.bind(this)||null}},t.prototype.getGoogleAppsData=function(){return this.model.isLinkedToGoogleApps()&&this.model.editable()?this.model.getGoogleAppsMappings().then(function(e){return function(t){return e.mappingsData=t}}(this)).catch(function(e){return function(t){return e.googleAppsFetchFailed=!0}}(this)).finally(function(e){return function(){return e.renderMainContent()}}(this)).done():void 0},t.prototype.startLinkingGoogleApps=function(e){return I("Organization View","Members Page","Start Linking Google Apps Domain"),k.toggle({elem:e,view:f,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openManageMembers=function(e){var t,n,r;I("Organization View","Members Page","Open Manage Members"),r=P("newMemberChargesPopup").get("enabled"),n=this.model.owned()&&this.model.isBusinessClass(),t=!!this.model.calculateTotalPrice(1),r&&n&&t?k.toggle({elem:e,getViewTitle:function(){return E(["view title","members"])},reactElement:x.createElement(l,{key:"members",model:this.model,modelCache:this.modelCache})}):k.toggle({elem:e,view:d,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.inviteTeamMembers=function(e){I("Organization View","Members Page","Invite Team Members"),k.toggle({elem:e,view:c,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openBulkAdd=function(e){I("Organization View","Members Page","Open Bulk Add"),k.toggle({elem:e,view:a,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.memberToModelForMemberItemElement=function(e){var t,n;return t=this.model.getMemberType(e),n={isVirtual:"virtual"===t,isDeactivated:"deactivated"===t,fullName:e.get("fullName"),username:e.get("username"),showGoogleApps:this.model.isLinkedToGoogleApps()&&this.model.editable()&&null!=this.mappingsData,gMail:e.get("gMail"),isOrgMember:"public"!==t,showActivity:this.model.owned()&&"virtual"!==t,allowTypeChange:this.model.owned()&&"deactivated"!==t&&"unconfirmed"!==t&&"virtual"!==t,orgMemberType:E(["member types",t]),allowReactivate:this.model.owned()&&"deactivated"===t,isMe:s.isMe(e),canRemove:e.getMembershipData(this.model).canRemove,orgIsBC:this.model.isPremium(),ownsOrg:this.model.owned(),hidden:e.get("hidden"),onViewActivity:this.viewMemberActivity.bind(this,e),onRoleChange:this.changeRole.bind(this,e),onRemoveOrDeactivate:this.removeOrDeactivate.bind(this,e),avatarHash:e.get("avatarHash"),avatarDomain:window.avatarDomain,initials:e.get("initials"),isOrganizationAdmin:"admin"===t,onReactivateClick:this.reactivateMember.bind(this,e),onUnhideMember:this.unhideMember.bind(this,e),onHideMember:this.hideMember.bind(this,e),onInviteMember:this.inviteToOrg.bind(this,e)}},t.prototype.getMembers=function(){var e,t,n,r,i,o,s,a,u,c,l,d,h,m;if(d=B.clone(this.model.memberList.models),null!=this.mappingsData)for(h=this.mappingsData,r=0,s=h.length;s>r;r++)m=h[r],null!=m.idMember?(l=this.modelCache.get("Member",m.idMember),null==l?l=new p({id:m.idMember,fullName:m.fullName,gMail:m.gMail,initials:m.initials,hidden:m.hidden},{modelCache:this.modelCache}):l.set("gMail",m.gMail)):(l=this.modelCache.findOne("Member","gMail",m.gMail),null==l&&(l=new p({fullName:m.fullName,gMail:m.gMail,initials:m.initials,hidden:m.hidden},{modelCache:this.modelCache}),m.idMember=l.cid)),$.call(d,l)<0&&d.push(l);for(t=[],i=0,a=d.length;a>i;i++)c=d[i],"deactivated"===this.model.getMemberType(c)&&t.push(c);for(n=[],o=0,u=d.length;u>o;o++)c=d[o],"virtual"===this.model.getMemberType(c)&&n.push(c);return e=B.difference(d,n,t),e.concat(t).concat(n)},t.prototype.inviteToOrg=function(e){return I("Organization View","Members Page","Add Google Apps Member"),C.try(function(t){return function(){return e.id?t.model.changeMemberRole(e,{type:"normal"}):t.model.addMemberRole({fullName:e.get("fullName"),email:e.get("gMail"),type:"normal"}).then(function(){return i.show("invitation sent","info","alert",3e3)})}}(this)).catch(o,function(e){i.showLiteralText(e.localizedMessage(),"error","alert",3e3),I("Invitations","Error: "+e.message)}).done()},t.prototype.hideMember=function(e){return e.get("gMail")?(e.set("hidden",!0),this.model.toggleMemberHidden(e,{type:"post"}),this.renderReactSection()):void 0},t.prototype.unhideMember=function(e){return e.get("gMail")?(e.set("hidden",!1),this.model.toggleMemberHidden(e,{type:"delete"}),this.renderReactSection()):void 0},t.prototype.reactivateMember=function(e,t){return I("Organization View","Members Page","Reactivate"),this.model.reactivateMember(e).catch(o,function(e){i.showLiteralText(e.message,"error","alert",3e3),I("Invitations","Error: "+e.message)}).done()},t.prototype.removeOrDeactivate=function(e,t){I("Organization View","Members Page","Remove or Deactivate Member Button"),k.toggle({elem:t,view:T,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.viewMemberActivity=function(e,t){I("Organization View","Members Page","View Member Activity"),k.toggle({elem:t,view:h,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.changeRole=function(e,t){I("Organization View","Members Page","Change Role Button"),k.toggle({elem:t,view:m,options:{model:e,parent:this.model,modelCache:this.modelCache}})},t}(_)},{}],653:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e("jquery"),o=e(522),s=e(519),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="board creation restrictions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.events={"click a":"changeRestriction"},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0}),this.$el.html(s.fill("org_prefs_vis",e)),this},t.prototype.changeRestriction=function(e){var t,n,i;return t=r(e.target),n="boardVisibilityRestrict/"+t.closest("ul").attr("data-vis"),i=t.attr("data-restriction"),this.model.setPref(n,i)},t}(o)},{}],654:[function(e,t,n){var r,i,o,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),i=e(215),o=e(20),u=e(522),c=e(879),l=e(519),a=e(129),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="org membership restrictions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.renderRestrictions))},t.prototype.events={"click .js-form-submit-input":"addRestriction","submit .js-form":"addRestriction","click .js-restricted-address":"removeRestriction"},t.prototype.render=function(){var e;return this.$el.html(c({hasRestrictions:(null!=(e=this.model.get("prefs").orgInviteRestrict)?e.length:void 0)>0})),this.renderRestrictions(),this},t.prototype.renderRestrictions=function(){var e,t,n,r,i,o;if(e=this.$(".js-list").empty(),(null!=(r=this.model.get("prefs").orgInviteRestrict)?r.length:void 0)>0){for(i=this.model.get("prefs").orgInviteRestrict,t=0,n=i.length;n>t;t++)o=i[t],e.append(l.fill("org_pref_restriction",{restriction:o}));return this.$(".js-restriction-list").show()}return this.$(".js-restriction-list").hide()},t.prototype.addRestriction=function(e){var t;return a.stop(e),t=this.$(".js-input-restricted").val(),/^@/.test(t)?t="*"+t:-1===t.indexOf("@")&&t.indexOf(".")>0&&(t="*@"+t),this.$(".js-loading").removeClass("hide"),i({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"put",data:{value:t},dataType:"json",success:function(e){return function(){return e.$(".js-input-restricted").val("").select().focus(),e.$(".js-loading").addClass("hide"),e.$(".js-errors").hide()}}(this),error:function(e){return function(t){return e.$(".js-loading").addClass("hide"),e.$(".js-errors").text(t.responseText).show()}}(this)})},t.prototype.removeRestriction=function(e){var t;return t=r(e.target).closest("a").attr("data-pattern"),r(e.target).closest("li").remove(),i({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"delete",data:{value:t},dataType:"json",success:function(e){return function(){return e.$(".js-input-restricted").select().focus(),e.$(".js-errors").hide()}}(this)})},t.prototype.enableSelfJoin=function(e){return this.model.changeSlackSelfJoin(!0)},t.prototype.disableSelfJoin=function(e){return this.model.changeSlackSelfJoin(!1)},t}(u)},{}],655:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(129),o=e(522),s=e(882),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="slack team restrictions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:slack-association",this.render)},t.prototype.events={"click a":"setRestriction"},t.prototype.render=function(){var e;return e=this.model._slackAssociation,this.$el.html(s(e)),this},t.prototype.setRestriction=function(e){var t;i.stop(e),e.target.parentElement.classList.contains("active")||(t=e.target.parentElement.classList.contains("js-enable-admin-only"),this.model.changeSlackAdminOnlyLinking(t))},t}(o)},{}],656:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k=function(e,t){function n(){this.constructor=e}for(var r in t)C.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},C={}.hasOwnProperty;i=e(33),o=e(618),s=e(103),r=e(71),u=e(542),c=e(516),l=e(129),d=e(522),f=e(106),
v=e(871),y=e(519),w=e(48),h=e(100),p=e(101),m=e(43),_=e("xtend"),b=e(869),g=e("moment"),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return k(t,e),f(c,t),t.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:logoHash change:products change:paidAccount change:prefs change:name",this.render),this.listenTo(this.model,"change:name change:displayName change:website change:desc",this.renderDetails),this.listenTo(this.model,"change:memberships",this.membershipChange),this.listenTo(this.model.memberList,"add remove reset",this.renderDebounced),this.listenTo(this.model,"change:name",function(e){return function(){var t;return t=location.pathname.replace(/[^\/]+/,e.model.get("name")),history.replaceState(null,null,t)}}(this)),this.memberTypeMe=this.model.getMemberType(i.me())},t.prototype.events={"click .js-change-org-logo":"changeLogoInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},t.prototype.isFullWidth=function(){return!1},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),this.model.editable()&&(n=null!=(t=e.paidAccount)?t.standing:void 0,e.hasAccount=r.hasAccount(n),e.accountActive=r.isActive(e.paidAccount),e.accountProblem=r.isProblem(n),e.accountInactive=r.isInactive(n)),e.isInOrg=this.model.isMember(i.me()),e.hasBusinessClass=this.model.isPremium(),e.isEnterprise=this.model.isEnterprise(),e.paysWithPurchaseOrder=this.model.paysWithPurchaseOrder(),e.isOrgAdmin=this.model.owned(),e.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned(),e.pLevelAltText=p(["org perms",this.model.getPermLevel(),"text"]),e.pLevelDisplayText=p(["org perms",this.model.getPermLevel(),"name"]),e.websiteHref=l.sanitizeWebAddress(e.website),e.descriptionHtml=s.markdownAsHtml(e.desc,{textData:e.descData}),e.isFullWidth=this.isFullWidth(),e.editable=this.model.editable(),e.hasUnlimitedPowerUps=this.model.isFeatureEnabled("plugins"),this.$el.empty(),this.$el.html(b(e)),this.renderDetails(),this.renderMainContent(),this},t.prototype.renderDetails=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),e.enterpriseUI=this.model.isFeatureEnabled("enterpriseUI"),e.isBusinessClass=this.model.isPremium(),e.isOrgAdmin=this.model.owned(),e.pLevelAltText=p(["org perms",this.model.getPermLevel(),"text"]),e.pLevelDisplayText=p(["org perms",this.model.getPermLevel(),"name"]),e.websiteHref=l.sanitizeWebAddress(e.website),e.descriptionHtml=s.markdownAsHtml(e.desc,{textData:e.descData}),e.canEdit=this.model.owned(),this.$(".js-current-details").html(v(e)),this.model.editable()&&this.$(".js-profile-form").empty().append(y.fill("org_detail_profile_edit",e,{editable:this.model.editable()})),this},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,_(t.prototype.events,e||this.events))},t.prototype.membershipChange=function(){var e;return e=this.model.getMemberType(i.me()),e!==this.memberTypeMe?(this.memberTypeMe=e,this.render()):void 0},t.prototype.setActiveView=function(e){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e).addClass("active")},t.prototype.changeLogoInProfile=function(e){l.stop(e),w("Organization View","Open Change Logo Menu from Profile Image"),u.toggle({elem:this.$(".js-change-org-logo"),view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.editProfile=function(e){l.stop(e),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),w("Organization View","Click Edit Profile")},t.prototype.cancelEditProfile=function(e){l.stop(e),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset(),w("Organization View","Cancel Edit Profile")},t.prototype.submitProfile=function(e){var t,n,r,i,o,s,a,u;if(l.stop(e),!this.disabled){for(t={},a=["displayName","name","website","desc"],r=0,o=a.length;o>r;r++)n=a[r],t[n]=this.$(".js-profile-form [name="+n+"]").val();for(t.name=t.name.toLowerCase().replace(/[^a-z0-9_]/g,""),u=["displayName","website"],i=0,s=u.length;s>i;i++)n=u[i],t[n]=t[n].trim();this.disableSubmit(),this.model.update(t,{waitForServer:!0},function(e){return function(t){var n;e.disabled=!1,e.$(".js-submit-profile").removeAttr("disabled"),t?(n=t.message.trim().toLowerCase(),e.$(".js-profile-form-error").removeClass("hide").text(h(n))):(e.$(".js-profile-form-error").addClass("hide"),e.cancelEditProfile(),w("Organization View","Changed Name and Details"))}}(this))}},t.prototype.isAdDismissed=function(e){var t,n;return n=i.me(),t=n.isAdDismissed(e),t?g().diff(g(t.lastDismissed),"days")<=14:!1},t.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},t}(d)},{}],657:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),i=e(215),o=e(33),s=e(6),a=e(542),c=e(129),l=e(522),p=e(519),h=e(48),d=e(101),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey=function(){return this.org.isPremium()?"remove or deactivate member":"remove member"},t.prototype.initialize=function(){return this.org=this.options.org},t.prototype.events={"click .js-deactivate":"deactivateMember","click .js-soft-remove":"removeMember"},t.prototype.render=function(){var e,t;return t=this.org.getMemberType(this.model),e=this.model.toJSON(),e.orgMemberType=d(["member types",t]),e.ownsOrg=this.org.owned(),e.orgIsBC=this.org.isPremium(),e.isDeactivated="deactivated"===t,e.isOrgMember="public"!==t,e.isVirtual="virtual"===t,e.canDeactivate=this.org.isPremOrgAdmin(o.me())&&!e.isVirtual&&!e.isDeactivated,e.isMe=o.isMe(this.model),this.$el.html(p.fill("org_remove_or_deactivate_member",e)),this},t.prototype._checkIfLostVisibility=function(){return o.isMe(this.model)?s.navigate("/",{trigger:!0}):void 0},t.prototype.deactivateMember=function(e){c.stop(e),this.org.deactivateMember(this.model),this._checkIfLostVisibility(),a.hide()},t.prototype.removeMember=function(e){var t;c.stop(e),r(this.el).find("#hardRemove").is(":checked")||"deactivated"===this.org.getMemberType(this.model)?(t="Hard Remove",this.org.memberList.remove(this.model,{mass:!0})):(t="Soft Remove",this.org.memberList.remove(this.model)),h("Organization","Remove Member From Organization",t),a.hide(),this._checkIfLostVisibility()},t}(l)},{}],658:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(542),o=e(129),s=e(522),c=e(48),a=e(517)("org_filtering"),u=a.renderable(function(e){var t,n;return n=e.name,t=e.isDeleteable,a.form(".js-add-tag-form",function(){return a.label(function(){return a.format("name"),a.input(".js-add-tag-name.js-autofocus",{type:"text",value:n})}),a.input(".primary",{type:"submit",value:a.l("save")}),t?a.button(".negate.u-float-right.js-delete-tag",{type:"button"},function(){return a.format("delete")}):void 0})}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.events={"submit .js-add-tag-form":function(e){var t;e.preventDefault(),this.options.boardView?c("Board Menu","Collections Menu","Save New Collection"):c("Team Page","Collections Menu","Save New Collection"),t=this.$(".js-add-tag-name").val().trim(),this.onSubmit(t)},"click .js-delete-tag":function(e){o.stop(e),this.onDelete()}},t.prototype.getName=function(){return""},t.prototype.render=function(){return this.$el.html(u({name:this.getName(),isDeleteable:null!=this.onDelete})),this},t}(s)},{}],659:[function(e,t,n){var r,i;r=e("react"),i=e(514)("org_account"),t.exports=r.createClass({displayName:"SettingSectionComponent",render:i.renderable(function(){var e,t,n,r,o,s,a;return a=this.props,o=a.header,r=a.contents,s=a.onChange,e=a.canChange,n=a.changeContent,t=a.changeClasses,i.div(".window-module.u-clearfix",function(){return i.div(".window-module-title",function(){return i.h3(".u-inline",function(){return i.addElement(o)})}),i.div(".setting-item",function(){return i.div(".setting-item-detail",function(){return i.addElement(r)}),i.div(".setting-item-action",function(){var r;return r={"button-link":!0,"u-text-align-center":!0,disabled:!e},n?i.div({class:t,onClick:s},function(){return i.addElement(n)}):i.b(s,{disabled:!e,class:i.classify(r)},function(){return i.format("change")})})})})})})},{}],660:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;u=e(101),r=e("react"),o=e(659),a=e(662),c=e(514)("org_account"),i="https://slack.com/oauth/authorize",s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.displayName="SlackComponent",t.prototype.render=c.renderable(function(){var e,t,n,r,s,u;return s=this.props,r=s.isAdmin,n=s.hasBC,u=s.slackAssociation,t=s.deleteSlackAssociation,e=s.changeSlackSelfJoin,c.div(function(s){return function(){var s,l,d,p,h,m,f,g;return u?(l=u.associated,p=u.canChange,s=u.adminOnly,g=u.teams,m=u.qs,h=c.render(function(){return c.div(function(){return c.p(function(){return c.format("link-your-trello-and-slack-teams-together"),c.text(" "),c.a(".quiet",{href:"http://help.trello.com/article/1049-slack-app",target:"slack_help"},function(){return c.format("learn-more")})}),p?void 0:c.p(".helper.u-float-left",function(){return c.format("you-need-to-be-an-admin-to-link-this-trello-team-to-a-slack-team")})})}),f=p?i+m:"#",d={"slack-button":"slack-button",disabled:!p},c.createElement(o,{header:c.render(function(){return c.format("slack-team-linking")}),contents:h,changeContent:c.render(function(){return c.a({href:f,disabled:!p},function(){return c.img({class:c.classify(d),alt:c.l("add-to-slack"),src:"https://platform.slack-edge.com/img/add_to_slack.png",srcSet:"https://platform.slack-edge.com/img/add_to_slack.png 1x, https://platform.slack-edge.com/img/add_to_slack@2x.png 2x"})})}),changeClasses:c.classify({"u.text-align-center":"u.text-align-center"})}),void(l&&g.forEach(function(i){return c.createElement(a,{icon:c.render(function(){return c.img({class:"slack-team-icon",alt:"Slack Team Icon",src:i.icon})}),header:c.render(function(){return c.div(function(){return c.text(i.name)})}),contents:c.render(function(){return c.div(function(){return c.div(function(){return c.p(function(){return c.format("this-team-is-linked-to-domain",{domain:i.domain})}),c.p({class:c.classify({quiet:!n||!r})},function(){return i.selfJoin?c.format("slack-members-self-join"):c.format("slack-members-invite-only"),c.icon("business-class",{class:"icon-business-class-color"})})}),p?void 0:c.p(".helper.u-float-left",function(){return c.format("you-need-to-be-an-admin-to-change-this-setting")})})}),canChange:p,isAdmin:r,hasBC:n,team:i,changeSlackSelfJoin:e,deleteSlackAssociation:t})}))):void c.createElement(o,{header:c.render(function(){return c.format("slack-team-linking")}),contents:c.render(function(){return c.format("loading")}),changeContent:c.render(function(){return c.a({href:i,disabled:!0,class:".button-link.u-text-align-center.disabled"},function(){return c.text("")})}),changeClasses:c.classify({"u.text-align-center":"u.text-align-center"})})}}(this))}),t}(r.Component),t.exports=s},{}],661:[function(e,t,n){var r,i;r=e("react"),i=e(514)("org_account"),t.exports=r.createClass({displayName:"SlackRestrictionsComponent",render:i.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.slackAssociation,i.div(".setting-item-detail",function(){return i.div(function(){return i.p(function(){return(null!=r?r.adminOnly:void 0)?i.format("slack-admin-only-linking"):i.format("slack-normal-member-linking")})}),e&&!t?i.p(".helper.u-float-left",function(){return i.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})})})},{}],662:[function(e,t,n){var r,i,o,s,a,u;s=e(238),r=e(542),i=e(511),o=e("react"),a=e(514)("org_account"),u=e(48),t.exports=o.createClass({displayName:"SlackTeamComponent",changeAssociatedSlack:function(e){var t,n,s,c,l,d,p,h;return p=this.props.team,n=p.domain,c=p.id,d=p.name,h=p.selfJoin,s=this.props.hasBC,l=this.props.isAdmin,t=s&&l,r.toggle({elem:e,getViewTitle:function(){return d},reactElement:o.createElement(i,{key:"slack team linking",items:[{onClick:function(e){return function(){return u("Slack Association","Unlink"),r.hide(),e.props.deleteSlackAssociation(c)}}(this),content:a.render(function(){return a.a({href:"#"},function(){return a.format("unlink"),a.span({className:"sub-name"},function(){return a.format("this-trello-team-will-no-longer-be-linked-to-domain",{domain:n})})})})},{content:a.render(function(){return a.hr()})},{content:a.render(function(){return a.p(function(){return a.format("who-can-join-team")})})},{onClick:function(e){return function(){return t?(u("Slack Association","SelfJoin"),r.hide(),e.props.changeSlackSelfJoin(!0,c)):void 0}}(this),content:a.render(function(){return a.a({class:a.classify({disabled:!t}),href:"#"},function(){return a.format("slack-self-join"),h&&a.icon("check"),a.span({className:"sub-name"},function(){return a.format("slack-team-members-can-join-team")})})})},{onClick:function(e){return function(){return t?(u("Slack Association","InviteOnly"),r.hide(),e.props.changeSlackSelfJoin(!1,c)):void 0}}(this),content:a.render(function(){return a.a({class:a.classify({disabled:!t}),href:"#"},function(){return a.format("slack-invite-only"),h||a.icon("check"),a.span({className:"sub-name"},function(){return a.format("slack-team-members-require-invite")})})})},{content:a.render(function(){return a.div(function(){return l?s?void 0:(a.hr(),a.icon("business-class",{class:"icon-business-class-color u-float-left"}),a.p(".slack-bc-upsell",function(){return a.format("slack-upgrade-to-business-class")})):(a.hr(),a.p(".helper",function(){return a.format("you-need-to-be-an-admin-to-change-this-setting")}))})})}]})})},render:a.renderable(function(){var e,t,n,r,i,o;return o=this.props,r=o.icon,n=o.header,t=o.contents,e=o.canChange,i=s(this,"changeAssociatedSlack"),a.div(".window-module.u-clearfix.slack-team",function(){return a.div(".u-float-left",function(){return a.addElement(r)}),a.div(function(){return a.div(".slack-team-header",function(){return a.h3(".u-inline",function(){return a.addElement(n)})}),a.div(".slack-team-body",function(){return a.div(".slack-team-detail",function(){return a.addElement(t)}),a.div(".slack-team-action",function(){var t;return t={"button-link":!0,"u-text-align-center":!0,disabled:!e},a.b(i,{disabled:!e,class:a.classify(t)},function(){return a.format("change")})})})})})})})},{}],663:[function(e,t,n){var r,i,o;r=e("react"),o=e(514)("org_account"),i=e(101),t.exports=r.createClass({displayName:"VisibilityContentsComponent",render:o.renderable(function(){var e,t,n;return t=this.props,e=t.canChange,n=t.visibility,o.div(function(){return o.div(function(){var e;switch(e=i(["org perms",n,"text"]),n){case"public":return o.p(function(){return o.icon("public"),o.format("public-helpertext",{helperText:e})});case"private":return o.p(function(){return o.icon("private"),o.format("private-helpertext",{helperText:e})});default:throw new Error("Unrecognized visibility setting: "+n)}}),e?void 0:o.p(".helper.u-float-left",function(){return o.format("you-need-to-be-an-admin-to-change-this-setting")})})})})},{}],664:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;i=e(509),o=e(685),s=e("bluebird"),a=e("underscore"),d=e(517)(),h=e("xtend"),p=d.renderable(function(e){var t,n,r;return t=e.icon,r=e.text,n=e.iconColor,null!=t&&d.span(".badge-icon.icon-sm.plugin-icon",{style:d.stylify({"background-image":d.urlify(t+"?color="+n)})}),r?d.span(".badge-text",function(){return d.text(r)}):void 0}),c={green:"plugin-color-green",red:"plugin-color-red",yellow:"plugin-color-yellow"},u=a.values(c).join(" "),l=function(e){return c[e]},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.tagName="div",t.prototype.className="badge",t.prototype.initialize=function(e){this.pluginBadge=e.pluginBadge},t.prototype.renderBadge=function(e){return this.$el.html(p(e)),this.$el},t.prototype.render=function(){var e,t,n,r;return t=this.pluginBadge,n=l(t.color),r=null!=n?"fff":"999",e=this.renderBadge(h(t,{iconColor:r})),e.removeClass(u),null!=n&&e.addClass(n),this},t.prototype.updateBadge=function(e){return a.isEqual(this.pluginBadge,e)?void 0:(this.pluginBadge=e,this.render(e))},t}(o)},{}],665:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e("hearsay"),h=e(510),i=e(664),s=e(509),a=e(685),u=e(544),c=e("bluebird"),m=e(53),l=e("underscore"),d={},p=null,f={},t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.tagName="span",t.prototype.badgeView=i,t.prototype.runnerOptions=function(){return{command:"card-badges",board:this.model.getBoard(),card:this.model,timeout:1e4}},t.prototype._cacheKey=function(){var e,t,n,r;return r=this.runnerOptions(),n=r.command,e=r.board,t=r.card,[n,null!=e?e.id:void 0,null!=t?t.id:void 0].join(":")},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t,n;return null!=(e=d[this._cacheKey()])&&this.renderResolvedBadges(e),t=null!=(n=this.model.getBoard())?n.id:void 0,t&&t!==p&&(p=t,f={}),u.enqueue("plugin_badges_render_"+this.cid,function(e){return function(t){var n,i,o,a;return i=t.delayed,a=e.runnerOptions(),o=null,n=r.combine(h(a.board,a.card),e.model.snoop()),e.subscribe(n,function(){return s.all(a).then(function(t){var n,r,i;return o=t,i=[],n=function(){return o===t},r=function(){return n()?(e.renderResolvedBadges(i),d[e._cacheKey()]=i.map(function(e){return l.omit(e,"callback")})):void 0},e.cancelOnRemove(c.map(t,function(t,o){var a;return e.retain(t),null!=t.dynamic?(a=function(){var u;return u=t.dynamic().cancellable().then(function(t){var s;return i[o]=t,r(),t.refresh&&n()?(s=Math.max(10,t.refresh),s+=2*Math.random()-1,e.setTimeout(a,1e3*s)):void 0}).catch(s.Error.NotHandled,function(){return null}),e.cancelOnRemove(u),u})():i[o]=t})).cancellable().then(function(){return r()}).catch(c.CancellationError,function(){})}).done()})}}(this)),this},t.prototype.trackBadges=function(e){return f[e]?void 0:(f[e]=!0,m("board view","views","Power-Up","","","card-badges",e))},t.prototype.renderResolvedBadges=function(e){var t;return t=e.map(function(e){return function(t,n){var r;return(null!=t?t.idPlugin:void 0)&&e.trackBadges(t.idPlugin),r=e.subview(e.badgeView,e.model,{pluginBadge:t},n),r.updateBadge(t),r}}(this)),this.ensureSubviews(l.compact(t))},t}(a)},{}],666:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e("jquery"),s=e(885),o=e(673),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.className="plugin-board-bar",t.prototype.events=function(){return{"click a[data-index].plugin-chrome-header-action":function(e){var t,n;return n=parseInt(r(e.currentTarget).attr("data-index"),10),t=this.content.actions[n],null!=t&&"function"==typeof t.callback?t.callback({el:e.currentTarget}):void 0},"click .js-close-plugin-chrome":function(e){return this.close()}}},t}(o)},{}],667:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;s=e(146),i=e(685),o=e(129),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.tagName=function(){return null!=this.options.pluginButton.url?"a":"span"},t.prototype.attributes=function(){var e,t,n;return e=this.options.pluginButton,n=e.url,t=e.target,n&&s(n)?{href:n,target:null!=t?t:n}:void 0},t.prototype.initialize=function(e){return this.pluginButton=e.pluginButton,this.retain(this.pluginButton)},t.prototype.events={click:function(e){return o.stopPropagation(e),"function"==typeof this.trackClick&&this.trackClick(this.pluginButton),null!=this.pluginButton.callback?this.pluginButton.callback({el:e.currentTarget}).done():void 0}},t.prototype.template=function(){throw Error("no template specified")},t.prototype.renderOnce=function(){return this.$el.html(this.template(this.pluginButton)),this},t}(i)},{}],668:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;s=e("underscore"),i=e(509),a=e(510),o=e(685),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.buttonsSelector=".js-button-list",t.prototype.buttonView=null,t.prototype.renderContainer=function(){return this.$el},t.prototype.runnerOptions=function(){throw Error("runnerOptions not specified")},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=this.runnerOptions(),e=this.renderContainer(),this.subscribe(a(t.board,t.card),function(n){return function(){return i.all(t).then(function(t){var r;return n.$el.toggleClass("hide",0===t.length),n.removeSubviews(),r=s.sortBy(t,"text").map(function(e,t){return n.subview(n.buttonView,n.model,{pluginButton:e},t)}),n.appendSubviews(r,e)}).done()}}(this)),this},t}(o)},{}],669:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(667),o=e(517)(),a=e(48),u=e(53),s=o.renderable(function(e){var t,n;t=e.icon,n=e.text,t&&(o.span(".icon-sm.plugin-icon",{style:o.stylify({"background-image":o.urlify(t+"?color=999")})}),o.raw(" ")),o.text(n)}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.template=s,t.prototype.className="button-link",t.prototype.trackClick=function(e){return a("Card Detail","Sidebar Plugin Button",e.text),u("card detail","opens","Power-Up","","","card-button",e.idPlugin)},t}(r)},{}],670:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(668),i=e(669),s=e(517)("card_detail"),a=s.renderable(function(){return s.h3(function(){return s.format("plugins")}),s.div(".u-clearfix.js-button-list")}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.tagName="div",t.prototype.className="window-module u-clearfix hide",t.prototype.buttonsSelector=".js-button-list",t.prototype.buttonView=i,t.prototype.renderContainer=function(){return this.$el.html(a()),this.$(".js-button-list")},t.prototype.runnerOptions=function(){return{command:"card-buttons",board:this.model.getBoard(),card:this.model}},t}(r)},{}],671:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;s=e(146),r=e(664),a=e(257),c=e(53),o=e(129),u=a.renderable(function(e){var t,n,r,i,o;return n=null!=e?e:{},t=n.callback,o=n.url,i=n.title,r=n.text,a.h3(".card-detail-item-header",function(){return a.text(i)}),o&&s(o)?a.a(".card-detail-badge.plugin-card-detail-badge.is-clickable.js-badge",{href:o,target:o,title:r},function(){return a.text(r)}):t?a.a(".card-detail-badge.plugin-card-detail-badge.is-clickable.js-badge",{href:"#",title:r},function(){return a.text(r)}):a.span(".card-detail-badge.plugin-card-detail-badge.js-badge",{title:r},function(){return a.text(r)})}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.tagName="div",t.prototype.className="card-detail-item",t.prototype.renderBadge=function(e){return this.$el.html(u(e)),this.$(".js-badge")},t.prototype.events={"click .js-badge":function(e){return o.stopPropagation(e),c("card detail","opens","Power-Up","","","card-detail-badge",this.pluginBadge.idPlugin),null!=this.pluginBadge.callback?(e.preventDefault(),this.pluginBadge.callback({el:e.currentTarget}).done()):void 0}},t}(r)},{}],672:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(665),i=e(671),s=e(53),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.tagName="div",t.prototype.badgeView=i,t.prototype.runnerOptions=function(){return{command:"card-detail-badges",board:this.model.getBoard(),card:this.model}},t.prototype.trackBadges=function(e){return null==this.trackedDetailsBadges&&(this.trackedDetailsBadges={}),this.trackedDetailsBadges[e]?void 0:(this.trackedDetailsBadges[e]=!0,s("card details","views","Power-Up","","","card-detail-badges",e))},t}(r)},{}],673:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e("jquery"),s=e(885),o=e(685),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.renderOnce=function(){return this.$el.html(s(this.content)),this.initIFrames(this.model),this},t.prototype.close=function(){var e;return"function"==typeof(e=this.content).callback&&e.callback(),this.isRemoved=!0,this.remove()},t}(o)},{}],674:[function(e,t,n){var r,i,o,s,a,u,c,l;r=e(103),i=e(505),o=e("bluebird"),s=e("react"),u=e(514)(),l=e("xtend"),a=e("underscore"),c=u.renderable(function(e){var t;return t=(null!=e?e:{}).detailsHtml,u.div(".markeddown",function(){return u.raw(t)})}),t.exports=s.createClass({displayName:"PluginGearComponent",keepInDOM:!0,propTypes:{io:s.PropTypes.instanceOf(i),model:s.PropTypes.object},getInitialState:function(){return{details:""}},componentDidMount:function(){o.props({details:this.props.io.getDetails()}).then(function(e){return function(t){return e.setState(t)}}(this))},render:function(){return c({detailsHtml:r.markdownAsHtml(this.state.details)})}})},{}],675:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x=function(e,t){function n(){this.constructor=e}for(var r in t)j.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},j={}.hasOwnProperty;r=e("jquery"),v=e("underscore"),i=e(33),o=e(6),y=e(99),s=e(38),u=e(542),m=e("bluebird"),f=e(129),g=e(522),b=e(101),_=e(517)("board_power_ups"),k=e(48),C=e(53),c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.initialize=function(){var e;return e=i.me(),this.listenTo(e.organizationList,"add remove reset change",this.frameDebounce(this.render)),this.createNewTeam=0===e.organizationList.length},t.prototype.events=function(){return{"click .js-team":"clickTeam","click .js-create-team":"clickCreateTeam","click .js-create":"clickCreateNewTeam","click .js-cancel":"clickCancelNewTeam"}},t.prototype.render=function(){return this.$el.html(_.render(function(e){return function(){var t,n;return e.createNewTeam?(t=e.model.memberList.length,_.div(".power-ups-create-team",function(){return _.p(function(){return _.format("first-create-your-business-class-team")}),_.p(function(){return _.label(function(){var e;return _.format("team-name"),e=1===t?{value:_.l("names-projects",{name:i.me().get("fullName")},{raw:!0})}:2===t?{placeholder:_.l("eg-names-projects",{name:i.me().get("fullName")},{raw:!0})}:{},e.maxLength=100,_.input(".full.js-autofocus.js-name",e)}),t>1?_.label(".power-ups-create-team-add-members",function(e){return function(){return _.input(".js-add-members",{type:"checkbox",checked:!0}),_.format("add-the-members-of-this-board-to-the-team")}}(this)):void 0}),_.div(function(){return _.button(".primary.js-create",function(){return _.format("create")}),_.a(".power-ups-create-team-cancel.js-cancel",{href:"#"},function(){return _.format("cancel")})}),_.hr()}),v.defer(function(){return e.$(".js-name").select().focus()})):(n=i.me().organizationList.sortBy(function(e){return e.get("displayName").toLowerCase()}),_.div(".power-ups-assign-to-team",function(){return _.p(function(){return _.format("this-board-is-not-in-a-team-yet"),_.text(" "),_.format("please-select-a-team-or-create-a-new-team-to-upgrade")})}),n.length>0&&_.ul(".power-ups-assign-to-team-list",function(){var t,r,i,o,s;for(s=[],r=0,i=n.length;i>r;r++)o=n[r],t=o.canAddBoard(e.model)?{class:"js-team","data-idOrganization":o.id}:{class:"disabled",title:_.l("team-restrictions-prevent-you-from-adding-this-board-to-this-team")},s.push(_.li(".power-ups-assign-to-team-list-item",t,function(){return _.div(".power-ups-assign-to-team-list-item-content",function(){return _.div(".power-ups-assign-to-team-list-item-logo",function(){var e;return e=o.get("logoHash"),e?_.img({src:logoDomain+"/"+e+"/30.png"}):_.span(".icon-lg.icon-organization")}),_.div(".power-ups-assign-to-team-list-item-details",function(){return _.div(".power-ups-assign-to-team-list-item-name",function(){return _.text(o.get("displayName")),o.isFeatureEnabled("plugins")?(_.text(" "),_.icon("business-class",{class:"icon-business-class-color"})):void 0}),_.div(".power-ups-assign-to-team-list-item-member-count",function(){var e;return null!=(e=o.get("memberships"))?_.text(y("members",e.length)):void 0})})})}));return s}),_.div(".power-ups-assign-to-team-create.js-create-team",function(){return _.div(".power-ups-assign-to-team-create-content",function(){return _.button(".button.primary",function(){return _.format("create-a-new-team")})})}))}}(this))),this},t.prototype.clickTeam=function(e){var t;return t=this.$(e.currentTarget).attr("data-idOrganization"),this.model.trigger("added-to-team"),m.fromNode(function(e){return function(n){return e.model.update("idOrganization",t,{waitForServer:!0},n)}}(this)).then(function(e){return function(){return o.navigate(o.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}}(this)).done()},t.prototype.clickCreateTeam=function(e){return this.createNewTeam=!0,this.render()},t.prototype.clickCancelNewTeam=function(e){return f.stop(e),this.createNewTeam=!1,this.model.trigger("cancel-add-to-team")},t.prototype.clickCreateNewTeam=function(e){var t,n;return n=this.$(".js-name").val(),/\S/.test(n)?(t={displayName:n},this.$(".js-create,.js-cancel").prop("disabled",!0).addClass("disabled"),i.me().organizationList.create(t,{modelCache:this.modelCache,silent:!0,success:function(e){return function(t){var n;return n=t.id,e.model.trigger("added-to-team"),
e.model.update("idOrganization",n,{waitForServer:!0}),s.loadOrganizationMembersMinimal(n).then(function(){var n;return e.$(".js-add-members").prop("checked")?(n=e.model.getOrganization(),k("New Org","Create","Power-Ups Sidebar (with members)",t.id),m.map(e.model.memberList.models,function(e){return n.isMember(e)?void 0:n.changeMemberRole(e,{type:"normal"})},{concurrency:3})):k("New Org","Create","Power-Ups Sidebar (without members)",t.id)}).then(function(){return o.navigate(o.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}).done()}}(this)})):void 0},t}(g),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(_.render(function(e){return function(){return _.div(".power-ups-count-explanation",function(){return _.p(function(){return _.format("only-team-members-can-enable-power-ups")})})}}(this)))},t}(g),l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(_.render(function(e){return function(){return _.div(".power-ups-count-explanation",function(){return _.p(function(){return _.format("ask-an-admin-to-add-this-board-to-a-team")})}),_.div(".power-ups-board-admins",function(){return _.b(function(){return _.format("board-admins")}),_.ul(".power-ups-admin-list",function(){return e.model.memberList.filter(function(t){return e.model.ownedByMember(t)}).forEach(function(e){return _.li(".power-ups-admin-list-item",function(){return _.div(".power-ups-admin-list-item-avatar",function(){var t;return t=e.get("avatarHash"),t?_.img({src:avatarDomain+"/"+t+"/30.png"}):_.span(".icon.icon-lg.icon-member")}),_.div(".power-ups-admin-list-item-details",function(){return _.div(".power-ups-admin-list-item-name",function(){return _.text(e.get("fullName"))}),_.div(".power-ups-admin-list-item-username",function(){return _.text("@"+e.get("username"))})})})})})})}}(this)))},t}(g),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.className="power-ups-explainer power-ups-limit-reached",t.prototype.events={"click .js-upgrade-team":function(e){return k("Power-Ups Menu","Banner Ad","Get More Power-Ups Button")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=o.getBoardPowerUpsUpgradeUrl(this.model),e=i.me(),this.$el.html(_.render(function(e){return function(){return _.p(".power-ups-limit-reached-message",function(){return _.format("it-looks-like-youve-reached-your-power-ups-limit-for-this-board")}),_.p(".power-ups-limit-reached-sub",function(){return _.format("business-class-teams-get-unlimited-power-ups")}),_.p(".power-ups-limit-reached-sub",{style:"margin: 8px 40px"},function(){return _.format("to-unlock-more-upgrade-to-business-class-today")}),_.p(".power-ups-limit-reached-button",function(){return e.model.hasOrganization()?_.a(".button.primary.js-upgrade-team",{href:t},function(){return _.format("lets-do-this")}):_.a(".button.primary.js-add-to-team",{href:"#"},function(){return _.format("lets-do-this")})}),_.a(".power-ups-limit-reached-no-thanks.js-no-thanks",{href:"#"},function(){return _.format("no-thanks")})}}(this)))},t}(g),w=_.renderable(function(){return _.div(function(){return _.div(".spinner.loading")})}),h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.render=function(){return this.$el.html(w()),this},t}(g),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.viewTitleKey="power ups",t.prototype.noPadding=!0,t.prototype.className="plugin-enable-pop-over",t.prototype.initialize=function(e){return this.plugin=e.plugin,this.listenTo(this.model,"cancel-add-to-team",function(e){return function(){return e.addToTeam=!1,e.render()}}(this)),this.listenTo(this.model,"added-to-team",function(e){return function(){return e.redirecting=!0,e.render()}}(this)),this.redirecting=!1,this.addToTeam=!1},t.prototype.events=function(){return{"click .js-add-to-team":function(e){return f.stop(e),this.addToTeam=!0,this.render()},"click .js-no-thanks":function(e){return f.stop(e),u.hide()}}},t.prototype.render=function(){return this.$el.empty(),this.redirecting?this.renderSpinner():this.addToTeam?this.renderAddToTeam():(C("card-detail","opens","BC upgrade dialog","","","enable button",this.plugin.id),this.renderLimitAd()),this},t.prototype.renderSpinner=function(){return this.appendSubview(this.subview(h,this.model)),this},t.prototype.renderAddToTeam=function(){return this.model.hasOrganization()?(this.appendSubview(this.subview(d,this.model)),this):this.model.owned()?(s.loadMyOrganizations(),this.appendSubview(this.subview(c,this.model))):(this.appendSubview(this.subview(l,this.model)),this)},t.prototype.renderLimitAd=function(){return this.appendSubview(this.subview(p,this.model))},t}(g)},{}],676:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(667),o=e(517)(),a=e(48),u=e(53),s=o.renderable(function(e){var t,n,r;t=e.icon,r=e.text,n="light"===this.model.get("prefs").backgroundBrightness?"000":"f6f6f6",t&&o.span(".board-header-btn-icon.icon-sm.plugin-icon",{style:o.stylify({"background-image":o.urlify(t+"?color="+n)})}),o.span(".board-header-btn-text.u-text-underline",function(){return o.text(r)})}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="board-header-btn",t.prototype.template=s,t.prototype.trackClick=function(e){return a("Board Header","Board Plugin Button",e.text),u("board view","opens","Power-Up","","","board-button",e.idPlugin)},t}(r)},{}],677:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(668),i=e(676),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="span",t.prototype.className="board-header-plugin-btns",t.prototype.buttonView=i,t.prototype.runnerOptions=function(){return{command:"board-buttons",timeout:1e4,board:this.model}},t}(r)},{}],678:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(885),r=e(673),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.className="plugin-modal",t}(r)},{}],679:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e("bluebird"),i=e(685),s=e(517)(),a=s.renderable(function(e){var t,n,r,i;switch(t=(null!=e?e:{}).content,t.type){case"iframe":i=t.url,r=t.height,n=t.context,s.iframe(".plugin-iframe",{src:i})}}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.className="plugin-overlay",t.prototype.renderOnce=function(){return this.$el.html(a({content:this.content})),this.initIFrames(this.model),this},t}(i)},{}],680:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(685),s=e(542),a=e(517)(),u=a.renderable(function(e){var t,n;null==e&&(e={}),n=e.url,t=e.height,a.iframe(".plugin-iframe",{src:n,style:t?"height:"+t+"px;":void 0})}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(e){return this.title=e.title,this.content=e.content,this.callback=e.callback,this.retain(this.callback)},t.prototype.getViewTitle=function(){return this.title},t.prototype.keepInDOM=!0,t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(u(this.content)),this.initIFrames(this.model),this},t.prototype.handleIFrameMessage=function(e,t){switch(t){case"done":if(null!=this.callback)return this.callback({el:e});s.hide()}},t}(o)},{}],681:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w=function(e,t){function n(){this.constructor=e}for(var r in t)_.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},_={}.hasOwnProperty;r=e("jquery"),p=e("underscore"),m=e(146),h=e(122),i=e("hearsay"),o=e(97),s=e(20),u=e(685),c=e(542),l=e("bluebird"),b=e(517)("plugin_popover"),d=e(129),y=e("xtend"),f=b.renderable(function(e){var t,n;null==e&&(e={}),n=e.showSearch,t=e.search,t&&n&&b.input(".js-search.js-autofocus",{type:"text",placeholder:t.placeholder}),b.div(".js-results")}),g=b.renderable(function(e){var t,n,r,i;r=e.search,n=e.noSearchResults,t=e.items,i=e.selectedIndex,n&&b.p(".empty.plugin-pop-over-search-empty",function(){r.empty?b.text(r.empty):b.format("no results")}),b.ul(".pop-over-list.js-list.navigable",function(){var e,n,r,o,s,a,u,c;for(n=0,o=t.length;o>n;n++)s=t[n],u=s.text,r=s.index,e=s.callback,c=s.url,a=r===i,b.li({class:b.classify({selected:a})},function(){var t;t=null!=e?{"data-index":r}:null!=c&&m(c)?{href:c,target:c}:void 0,b.a(t,function(){b.text(u)})})})}),v=b.renderable(function(e){var t;return t=(null!=e?e:{}).search,b.p(".quiet.plugin-pop-over-search-searching",function(){(null!=t?t.searching:void 0)?b.text(t.searching):b.format("searching")})}),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.initialize=function(e){return this.title=e.title,this.content=e.content,this.retain(this.content),this.searchText=this.slot("")},t.prototype.getViewTitle=function(){return this.title},t.prototype.keepInDOM=!0,t.prototype.events=function(){return{"click a[data-index]":function(e){var t,n;return t=parseInt(r(e.currentTarget).attr("data-index"),10),n=p.isFunction(this.content.items)?this.content.searchResults[t]:this.content.items[t],n.callback({el:e.currentTarget}).done()},"click a[href]":function(e){return c.hide()},"input .js-search":function(e){return this.searchText.set(r(e.currentTarget).val())},"mouseenter li":function(e){return d.selectMenuItem(this.$(".js-list"),"li",r(e.currentTarget))},keydown:function(e){var t,n;n=o.getKey(e),t=this.$(".js-list"),n===s.ArrowUp||n===s.ArrowDown?(d.stop(e),d.navMenuList(t,"li",n)):(n===s.Enter||n===s.Tab)&&(d.stop(e),t.find("li.selected a").click())}}},t.prototype.renderOnce=function(){var e,t,n,r,i;return i=p.isFunction(this.content.items),this.$el.html(f({search:this.content.search,showSearch:this.content.search&&(i||this.content.items.length>this.content.search.count)})),e=this.$el.find(".js-results"),r=function(e){return function(t){return l.try(function(){var n,r,o,s,a;return i?e.content.items({options:{search:t}}):(r=e.content.items,r=r.map(function(e,t){return y(e,{index:t})}),e.content.search&&(t&&(a=d.buildFuzzyMatcher(t),r=r.filter(function(e){var t,n;return n=e.text,t=e.alwaysVisible,t||a(n)})),null!=(o=null!=(s=e.content.search)?s.count:void 0)&&(n=0,r=p.filter(r,function(e,t){return e.alwaysVisible?!0:o>n?(n++,!0):!1}))),r)}).then(function(t){return i?(e.content.searchResults=t.map(function(e,t){return y(e,{index:t})}),e.retain(e.content.searchResults),e.content.searchResults):t})}}(this),this.content.search?(t=300,p.isFinite(this.content.search.debounce)&&this.content.search.debounce>t&&(t=this.content.search.debounce),n=h(this.searchText,t),this.subscribe(n,function(t){return function(n){return e.html(v({search:t.content.search})),null!=t._outstandingSearch&&t._outstandingSearch.cancel(),t._outstandingSearch=r(n).cancellable(),t._outstandingSearch.then(function(n){var r,i,o,s;return t._outstandingSearch=null,r=!p.any(n,function(e){var t;return t=e.alwaysVisible,!t}),s=null!=(i=null!=(o=n[0])?o.index:void 0)?i:-1,e.html(g({search:t.content.search,noSearchResults:r,items:n,selectedIndex:s}))})}}(this))):(e.html(v()),r().then(function(t){return e.html(g({items:t,selectedIndex:0}))})),this},t}(u)},{}],682:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e("jquery"),i=e(534),o=e(509),a=e(542),u=e("bluebird"),d=e(257),h=e(48),c=e(129),l=e(522),m=e("xtend"),p=d.renderable(function(e){d.ul(".pop-over-list",function(){var t,n,r,i,o,s;for(t=0,r=e.length;r>t;t++)o=e[t],i=o.name,s=o.url,n=o.id,d.li(function(){d.a(".js-remove",{"data-id-attachment":n},function(){d.text(i)})})})}),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="remove attachments",t.prototype.initialize=function(e){var t;return t=e.section,this.section=t},t.prototype.events={"click .js-remove":"confirmRemove"},t.prototype.renderOnce=function(){var e;return e=this.model.getBoard(),u.map(this.section.claimed,function(t){return o.one({command:"format-url",board:e,options:{url:t.url}}).get("text").catch(o.Error.NotHandled,function(){return t.url}).then(function(e){return m(t,{name:e})})}).then(function(e){return function(t){return e.$el.html(p(t))}}(this)),this},t.prototype.confirmRemove=function(e){var t,n;return c.stop(e),t=r(e.currentTarget).attr("data-id-attachment"),n=this.model.attachmentList.get(t),i.pushView("remove attachment",{model:n,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return n.destroy(),h("Attachment","Delete Attachment",n.getType())}}(this)})},t}(l)},{}],683:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e("jquery"),h=e("underscore"),i=e(534),o=e("hearsay"),l=e(542),s=e(509),a=e(682),c=e(685),d=e("bluebird"),m=e(517)("plugin_section"),g=e(48),p=e(129),f=m.renderable(function(e){var t;t=e.content,m.div(".window-module.u-clearfix",function(){var e,n;m.div(".window-module-title.window-module-title-no-divider",function(){m.span(".window-module-title-icon.icon-lg.plugin-section-icon.js-icon"),m.h3(".u-inline-block.plugin-section-title.js-title"),m.div(".window-module-title-options",function(){m.a(".quiet.js-remove",{href:"#"},function(){m.format("remove")})})}),"iframe"===t.type&&(n=t.url,e=t.height,m.div(".u-gutter",function(){m.iframe(".plugin-iframe.plugin-section",{src:n,style:m.stylify({height:e?e+"px;":void 0})})}))})}),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.initialize=function(){return this.section=new o.Slot(null)},t.prototype.renderOnce=function(){var e;if(e=this.section.get(),null==e)throw Error("updateSection not called before render");return this.$el.html(f(e)),this.subscribe(this.section,function(e){return function(t){return d.resolve(h.result(t,"title")).then(function(t){return e.$(".js-title").text(t)}).catch(s.Error.Timeout,function(){}),d.resolve(h.result(t,"icon")).then(function(t){return e.$(".js-icon").css("background-image",m.urlify(t+"?color=999"))}).catch(s.Error.Timeout,function(){})}}(this)),this.initIFrames(this.model.getBoard(),this.model,this.section),this},t.prototype.updateSection=function(e){return this.retain(e),this.section.set(e)},t.prototype.events={"click .js-remove":"confirmRemove"},t.prototype.confirmRemove=function(e){var t,n;p.stop(e),n=this.section.get(),1===n.claimed.length?(t=this.model.attachmentList.get(n.claimed[0].id),i.toggle("remove attachment",{elem:this.$(e.currentTarget),model:t,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return t.destroy(),g("Attachment","Delete Attachment",t.getType())}}(this)})):l.toggle({elem:r(e.currentTarget),view:new a({model:this.model,section:n})})},t}(c)},{}],684:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e(33),i=e(6),o=e(103),c=e(542),a=e(675),m=e(522),h=e(129),g=e(517)("board_power_ups"),f=e(85),v=e(53),s="https://info.trello.com/power-ups",l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.events={"click .js-enable-power-up":"enablePowerUp"},t.prototype.initialize=function(){return this.powerUpEnablementInProgress=!1},t.prototype.enablePowerUp=function(e){var t;return h.stop(e),t=this.options.board,t.canEnableAdditionalPowerUps()?t.isPluginEnabled(this.model.id)?void c.hide():(this.powerUpEnablementInProgress=!0,this.render(),void t.enablePlugin(this.model.id).then(function(e){return function(){return v("card-detail","enables","Power-Up","","","enable button",e.model.id),e.powerUpEnablementInProgress=!1,c.hide()}}(this))):void c.toggle({elem:this.$(e.target),view:new a({model:t,plugin:this.model}),autoPosition:!0})},t.prototype.render=function(){var e;return e=this.model.details,this.$el.html(g.render(function(t){return function(){return g.p(function(){return g.div(".markeddown",function(){return g.raw(o.markdownAsHtml(e))}),g.a(".quiet",{href:s,target:"_blank",rel:"noopener"},function(){return g.format("learn-more")})}),g.p(function(){return t.powerUpEnablementInProgress?g.button(".button.primary",function(){return g.format("power-up-enablement-in-progress")}):g.button(".button.primary.js-enable-power-up",function(){return g.format("enable-power-up")})}),g.p(".secondary-links.quiet",function(){return g.a(".js-dismiss-power-up-suggestion",{href:"#"},function(){return g.format("not-now")})})}}(this))),this},t}(m),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.render=function(){return this.$el.html(g.render(function(e){return function(){return g.p(function(){return g.format("got-it-we-wont-ask-you-again")}),g.a(".quiet",{href:i.getMemberAccountUrl()},function(){return g.format("power-up-suggestion-settings")})}}(this))),this},t}(m),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.render=function(){return this.$el.html(g.render(function(e){return function(){return g.p(function(){return g.format("looks-like-you-dont-want-these-suggestions-we-wont-ask-you-again")})}}(this))),this},t}(m),u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.viewTitleKey="power up suggestions",t.prototype.className="plugin-suggestion-pop-over",t.prototype.initialize=function(e){this.board=e.board},t.prototype.events={"click .js-dismiss-power-up-suggestion":"dismissPowerUpSuggestion"},t.prototype.render=function(){return this.renderPowerUpSuggestionDetails(),this},t.prototype.renderPowerUpSuggestionDetails=function(){return this.$el.empty(),this.appendSubview(this.subview(l,this.model,{board:this.board})),this},t.prototype.renderStopSuggestingPowerUps=function(){return v("card-detail","opens","Power-up suggestions disabled screen","","","not now button",this.model.id),this.$el.empty(),this.appendSubview(this.subview(p,this.model)),this},t.prototype.renderPowerUpSuggestionsTurnedOff=function(){return this.$el.empty(),this.appendSubview(this.subview(d,this.model)),this},t.prototype.dismissPowerUpSuggestion=function(e){var t,n,i,o,s;h.stop(e),n=this.model.id,o=r.me().getDismissedPowerUpSuggestions(),null!=o&&(t=++o.length),s=f("powerUpSuggestions"),i=s.get("maxDismissalCount"),t===i?(v("Power-Up enable suggestion info screen","disables","all Power-Up enable suggestions","","","not now button",n),this.renderStopSuggestingPowerUps()):(v("Power-Up enable suggestion info screen","disables","Power-Up suggestion","","","not now button",n),c.hide()),r.me().dismissPowerUpSuggestionFor(n)},t}(m),t.exports=u},{}],685:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty,d=[].slice;r=e("jquery"),a=e("underscore"),i=e("hearsay"),u=e(510),s=e(522),t.exports=o=function(e){function t(){this._retained=[],this._pendingPromises=[],this._eventListeners=[],t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype._retainCallback=function(e){return null!=e&&null!=this._retained&&(e.retain().done(),this._retained.push(e)),e},t.prototype.retain=function(e){a.isFunction(e)?this._retainCallback(e):a.isArray(e)?e.forEach(function(e){return function(t){return e.retain(t)}}(this)):a.isObject(e)&&this.retain(a.values(e))},t.prototype.cancelOnRemove=function(e){return null!=this._pendingPromises?(this._pendingPromises.push(e),e.then(function(t){return function(){return t._pendingPromises=a.without(t._pendingPromises,e)}}(this))):e.cancel(),e},t.prototype.remove=function(){var e,n,r,i,o,s,a,u,c,l,d,p,h,m,f;for(t.__super__.remove.apply(this,arguments),c=this._pendingPromises,n=0,o=c.length;o>n;n++)u=c[n],u.cancel();for(delete this._pendingPromises,l=this._eventListeners,r=0,s=l.length;s>r;r++)d=l[r],m=d.target,f=d.type,e=d.callback,m.removeEventListener(f,e);for(delete this._eventListeners,p=this._retained,i=0,a=p.length;a>i;i++)h=p[i],h.release().done();delete this._retained},t.prototype.addEventListener=function(e,t,n){return e.addEventListener(t,n),this._eventListeners.push({target:e,type:t,callback:n})},t.prototype.handleIFrameMessage=null,t.prototype.initIFrames=function(){var e,t,n,o,s;t=arguments[0],n=arguments[1],o=3<=arguments.length?d.call(arguments,2):[],e=this.$el.find("iframe.plugin-iframe"),s=i.combine.apply(i,o.concat(u(t,n))),a.each(e,function(e){return function(t){var n,i;i=s.use(),n=r(t),n.addClass("iframe-loading").one("load",function(r){n.removeClass("iframe-loading"),e.subscribe(s,function(){return t.contentWindow.postMessage("render","*")}),i(),null!=e.handleIFrameMessage&&e.addEventListener(window,"message",function(n){n.source===t.contentWindow&&e.handleIFrameMessage(t,n.data)})})}}(this))},t}(s)},{}],686:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(33),s=e(129),a=e(522),u=e(919),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="calendar settings",t.prototype.initialize=function(){return this.generating=!1,this.listenTo(this.model,{"change:prefs":this.render,"change:myPrefs.calendarKey":this.generationComplete})},t.prototype.events={"click .js-calendar-pref-feed:not(.disabled)":"selectFeedEnabled","click .js-calendar-feed-url:not(:disabled)":"focusInput","click .js-regen-calendar-url:not(.disabled)":"generateNewFeedURL"},t.prototype.generationComplete=function(){return this.generating=!1,this.render()},t.prototype.generateNewFeedURL=function(e){return s.stop(e),this.generating=!0,this.model.generateCalendarKey(),this.render()},t.prototype.render=function(){var e,t,n;return n=this.model.toJSON({prefs:!0}).prefs,t=this.model.getPref("calendarKey"),e="https://"+location.host+"/calendar/"+(i.me().id+"/"+this.model.id+"/"+t+".ics"),t||(this.generating=!0,this.model.generateCalendarKey()),this.$el.html(u({isEnabled:n.calendarFeedEnabled,isGenerated:null!=t&&!this.generating,url:e,canChange:this.model.editable()})),this},t.prototype.focusInput=function(e){return this.$(".js-calendar-feed-url").focus().select()},t.prototype.selectFeedEnabled=function(e){var t,n;return s.stop(e),t=r(e.target).closest("a"),n="enabled"===t.attr("name"),this.model.setPref("calendarFeedEnabled",n)},t}(a)},{}],687:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),o=e(129),s=e(522),a=e(920),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="card aging settings",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-select:not(.disabled)":"selectMode"},t.prototype.render=function(){return this.$el.html(a({agingMode:this.model.getPref("cardAging"),canChange:this.model.editable()})),this},t.prototype.selectMode=function(e){var t,n;return o.stop(e),t=r(e.target).closest(".js-select"),n=t.attr("name"),this.model.setPref("cardAging",n)},t}(s)},{}],688:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),i=e(129),o=e(522),a=e(923),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="voting settings",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-voting-select:not(.disabled)":"selectPerm"},t.prototype.render=function(){var e;return this.$el.html(a({canChange:this.model.editable(),canSetObservers:null!=(e=this.model.getOrganization())?e.isFeatureEnabled("observers"):void 0,canSetOrganization:this.model.hasOrganization(),canSetPublic:this.model.isPublic(),votingMode:this.model.getPref("voting")})),this},t.prototype.selectPerm=function(e){var t,n;return i.stop(e),t=r(e.target).closest(".js-voting-select"),n=t.attr("name"),this.model.setPref("voting",n)},t}(o)},{}],689:[function(e,t,n){var r,i,o,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(490),o=e(421),s=e(522),a=e("underscore"),u=e(519),c=e(48),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="search-result-card",t.prototype.events={"click .list-card":"openCard"},t.prototype.render=function(){var e,t,n,i,s;return e=this.model.getBoard(),s=this.model.getList(),i=this.model.toJSON(),i=a.extend(i,{listName:s.get("name"),boardName:e.get("name"),permLevel:r.getPermLevelIconClassForBoard(e),archivedList:s.get("closed")}),n={hideMenu:!0,applyBoardCardFilter:!1},this.$el.html(u.fill("search_results_card",i)),t=this.subview(o,this.model,n),this.appendSubview(t,this.$(".js-list-card-container")),this},t.prototype.openCard=function(e){this.model.showDetail(),c("Search","Select Card")},t}(s)},{}],690:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k=function(e,t){function n(){this.constructor=e}for(var r in t)C.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},C={}.hasOwnProperty;r=e("jquery"),i=e(33),o=e(333),s=e(689),a=e(6),u=e(537),l=e(691),d=e(38),p=e("bluebird"),h=e(693),m=e(695),f=e(275),g=e(129),v=e(522),b=e("underscore"),y=e(45),w=e(519),_=e(48),t.exports=c=function(e){function t(){this.results=null,this.serial=0,this.suggestSerial=0,this.idCardsLoaded=[],this.cardsLimit=a.isOnSearchPage()?12:8,this.cardsDesired=this.cardsLimit,this.noMoreCardMatches=!1,this.searchStates=["no-results","no-input","searching","search-results","err"],this.searchState="no-results",t.__super__.constructor.apply(this,arguments)}return k(t,e),t.prototype.viewTitleKey="search results",t.prototype.className="search-results-view",t.prototype.displayType="mod-search-over",t.prototype.hideHeader=!0,t.prototype.maxWidth="600",t.prototype.initialize=function(){var e,t,n;return n=function(e){return function(t){return e.dynamicDebounce(t,function(e){var t;return t=600,e.length<=1?3*t:e.length<=3?2*t:t})}}(this),t=n(this.update).bind(this),e=n(this.renderSearchedSuggestions).bind(this),this.listenTo(f,{"change:query":function(e,n){return t(n)},"change:suggestions":this.renderSuggestions,"change:suggestionSearchTerm":function(t,n){return e(n)}}),this.listenTo(i.me().savedSearchList,"add remove reset change",this.renderSavedSearches)},t.prototype.events={"click .js-see-all-saved-searches":"seeAllSavedSearchesEvent","click .js-saved-search-name":"doSavedSearch","sortstop .js-saved-searches-list":"sortStop","click .js-save-this-search":"saveThisSearch","input .js-saved-search-name-input":"changeSearchName","submit .js-save-this-search-form":"confirmSave","click .js-save-this-search-cancel":"cancelSave","click .js-show-search-tips":"showTips","click .js-card-results .js-list a":"trackCardClick","click .js-member-results .js-list .js-select-member":"trackMemClick","click .js-org-results .js-list .list-card":"trackOrgClick","click .js-select-suggestion":"selectSuggestion","mouseenter .js-select-suggestion":"mouseenterSuggestion","mouseleave .js-select-suggestion":"mouseleaveSuggestion","click .js-show-more-cards":"showMoreCards","click .js-show-more-boards":"showMoreBoards","click .js-show-more-members":"showMoreMembers","click .js-show-more-orgs":"showMoreOrgs","mouseenter .search-result-card-hover-target":"highlightCard","mouseleave .search-result-card-hover-target":"unHighlightCard","click .js-open-help-query":"trackOpenHelpQuery","click .js-open-help a":"trackOpenHelp","click .js-business-class-link":"trackBusinessClassClick","click .js-gold-link":"trackGoldClick"},t.prototype.update=function(e){var t,n,r,i,o,s;this.err=null,this.results=b.isEmpty(e)?{}:null,++this.serial,s=this.serial,this.renderResults(),b.isEmpty(e)||(o={query:e,partial:!0,modelTypes:"cards,boards,organizations,members",board_fields:"name,url,prefs",cards_limit:this.cardsLimit+1,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover",boards_limit:8,members_limit:8,organizations_limit:6},n=this.$(".js-open-help-query"),t=this.$(".js-open-help"),i=e.replace(/"/g,""),r=/\S/.test(i),t.toggleClass("hide",r),n.toggleClass("hide",!r).attr("href","http://help.trello.com/search?query="+encodeURIComponent(i)+"&source=trello-search").find(".js-query").text(i),d.loadSearchData(o).nodeify(function(e){return function(t,n){var r,i;return e.err=t,s!==e.serial?(i=b.pluck(null!=n&&null!=(r=n.options)?r.terms:void 0,"text"),void y("search","discarding search for "+i+", serial "+s)):(e.results=n,e.renderResults())}}(this)))},t.prototype.getMoreCards=function(e,t){var n;n=t.partial,p.try(function(t){return function(){var r,i;return t.idCardsLoaded.length<=t.cardsDesired&&!t.noMoreCardMatches?(r=Math.floor(t.cardsDesired/(t.cardsLimit+1)),i={query:e,partial:null!=n?n:!1,modelTypes:"cards",board_fields:"name,url,prefs",cards_limit:t.cardsLimit+1,cards_page:r,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover"},d.loadSearchData(i).then(function(e){var n;return t.idCardsLoaded=b.uniq(t.idCardsLoaded.concat(b.pluck(null!=(n=null!=e?e.cards:void 0)?n:[],"id")))}).catch(function(e){return t.err=e})):void 0}}(this)).then(function(e){return function(){return e.noMoreCardMatches=e.idCardsLoaded.length<=e.cardsDesired,e.renderCardResults(),e.$(".js-loading-cards").addClass("hide")}}(this)).done()},t.prototype.render=function(){var e;return e={savedSearchesEnabled:i.me().isFeatureEnabled("savedSearches")},this.$el.html(w.fill("search_instant_results",e)),this.update(f.getQuery()),
this.renderSuggestions(),this.renderSearchedSuggestions(f.getSuggestionSearchTerm()),this},t.prototype.selectSuggestion=function(e){var t,n,i,o,s,a,u;g.stop(e),t=r(e.target).closest(".js-select-suggestion"),s=t.attr("data-suggestionphrase"),a=m.getKeywordMap()[s],i=f.getQuery(),n=m.inputIndex,o=g.removeWordAtIndex(i,n),u=g.stripExtraSpaces(o+" "+s),(null!=a?a.moreInputNeeded:void 0)||(u+=" "),f.clearSuggestions(),f.setQuery(u),f.clearSuggestionSearchTerm(),f.clearSuggestionSearchModelTypes(),_("Search","Select Suggestion")},t.prototype.mouseleaveSuggestion=function(e){return this.$(".js-select-suggestion").removeClass("selected")},t.prototype.mouseenterSuggestion=function(e){return r(e.target).closest(".js-select-suggestion").addClass("selected")},t.prototype.renderSuggestions=function(){var e,t,n,r,i,o,s,a,u,c;if(c=f.getSuggestions(),n=c.length>0,e=this.$(".js-search-suggestions"),t=e.find(".js-search-suggestions-list").empty(),n){for(r="",i=0,s=c.length;s>i;i++)o=c[i],a=m.getSuggestionObjectContainingVariantOrKey(o),u=a.obj,u.phrase=a.key,r+=w.fill("search_suggetion",u);t.append(r),this.$(".js-select-suggestion").first().addClass("selected"),e.removeClass("hide")}else e.addClass("hide");return this},t.prototype.renderSearchedSuggestions=function(e){var t,n,r,i;t=this.$(".js-search-suggestions").addClass("hide"),n=t.find(".js-search-suggestions-list").empty(),++this.suggestSerial,i=this.suggestSerial,""!==e&&(r={query:e,modelTypes:f.getSuggestionSearchModelTypes(),partial:!0,board_fields:"name,url,prefs",boards_limit:6,members_limit:6},d.loadSearchData(r).nodeify(function(e){return function(r,o){var s,a,u,c,l,d,p,h,m,f,g,v,b,y,_;if(i===e.suggestSerial&&(a=(null!=o&&null!=(g=o.boards)?g.length:void 0)>0,u=(null!=o&&null!=(v=o.members)?v.length:void 0)>0,c=a||u,l="",c&&!r)){if(a)for(b=o.boards,d=0,h=b.length;h>d;d++)_=b[d],s=_,s.phrase='board:"'+_.name+'"',l+=w.fill("search_suggetion_board",s);else if(u)for(y=o.members,p=0,m=y.length;m>p;p++)_=y[p],s=_,s.phrase="@"+_.username,f={member:w.member},l+=w.fill("search_suggetion_member",s,"",f);return n.append(l),e.$(".js-select-suggestion").first().addClass("selected"),t.removeClass("hide")}}}(this)))},t.prototype.renderResults=function(){var e,t,n,i,o,s,a,u,c,l,d,p,h,m,g,v,y;for(this.idCardsLoaded=b.pluck(null!=(a=null!=(u=this.results)?u.cards:void 0)?a:[],"id"),this.noMoreCardMatches=this.idCardsLoaded.length<=this.cardsLimit,n=b.pluck(null!=(c=null!=(l=this.results)?l.boards:void 0)?c:[],"id"),i=b.pluck(null!=(d=null!=(p=this.results)?p.members:void 0)?d:[],"id"),o=b.pluck(null!=(h=null!=(m=this.results)?m.organizations:void 0)?h:[],"id"),this.searchState=null!=this.err?"err":""===f.getQuery()?"no-input":null==this.results?"searching":b.all([this.idCardsLoaded,n,i,o],b.isEmpty)?"no-results":(this.renderCardResults(),this.renderBoardResults(n),this.renderMemberResults(i),this.renderOrganizationResults(o),"search-results"),this.renderSavedSearches(),y={err:"js-err","no-input":"js-no-input",searching:"js-searching","no-results":"js-no-results","search-results":"js-search-results"},g=this.searchStates,t=0,s=g.length;s>t;t++)v=g[t],e=y[v],r(this.el.getElementsByClassName(e)).toggleClass("hide",v!==this.searchState);return this},t.prototype.renderSavedSearches=function(){var e,t,n,r,o,s;return o="no-input"===this.searchState,e=this.$(".js-save-this-search-menu"),r=!e.hasClass("hide"),this.$(".js-saved-search-links").toggleClass("hide",o||r),t=this.$(".js-saved-searches").toggleClass("hide",!o),o?(e.addClass("hide"),this.renderSavedSearchItems(t)):(s=f.getQuery(),n=b.find(i.me().savedSearchList.models,function(e){return e.toJSON().query===s}),null!=n&&this.$(".js-current-search-name").text(n.get("name")),this.$(".js-save-this-search").toggleClass("hide",null!=n),this.$(".js-current-search").toggleClass("hide",null==n)),this},t.prototype.renderSavedSearchItems=function(e){var t,n,o,s,a;return t=e.find(".js-saved-searches-list"),t.sortable({axis:"y",delay:"75",distance:"7",containment:".js-saved-searches-list",tolerance:"pointer",items:".saved-search",start:function(e,t){var n;return u.sorting=!0,n=r(t.helper).outerHeight(),r(t.placeholder).height(n)},stop:function(e){return function(){return e.defer(function(){return u.sorting=!1})}}(this)}),n=i.me(),s=n.savedSearchList.models,this.$(".js-no-saved-searches").toggleClass("hide",s.length>0),a=function(){var e,t,n;for(n=[],e=0,t=s.length;t>e;e++)o=s[e],n.push(this.subview(h,o,{parent:this}));return n}.call(this),t.empty(),this.appendSubviews(a,t),this},t.prototype.renderCardResults=function(){var e,t,n;return e=this.$(".js-card-results"),t=e.find(".js-list"),n=this.idCardsLoaded.slice(0,this.cardsDesired).map(function(e){return function(t){var n;return n=e.modelCache.get("Card",t),e.subview(s,n)}}(this)),this.ensureSubviews(n,t),e.toggleClass("hide",0===this.idCardsLoaded.length),this.$(".js-show-more-cards").toggleClass("hide",this.noMoreCardMatches),this},t.prototype.renderBoardResults=function(e){var t,n,r,i,s;return t=this.$(".js-board-results").addClass("hide"),e.length>0&&(n=t.find(".js-list").empty(),r=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)i=e[t],r.push(this.subview(o,this.modelCache.get("Board",i)));return r}.call(this),this.appendSubviews(r,n),t.removeClass("hide")),s=!1,this.$(".js-show-more-boards").toggleClass("hide",!s),this},t.prototype.renderMemberResults=function(e){var t,n,r,i,o;return t=this.$(".js-member-results").addClass("hide"),e.length>0&&(n=t.find(".js-list").empty(),i=function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)r=e[t],i.push(this.subview(l,this.modelCache.get("Member",r)));return i}.call(this),this.appendSubviews(i,n),t.removeClass("hide")),o=!1,this.$(".js-show-more-members").toggleClass("hide",!o),this},t.prototype.renderOrganizationResults=function(e){var t,n,r,i;return t=this.$(".js-org-results").addClass("hide"),e.length>0&&(i=function(){var t,r,i;for(i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(w.fill("organization_search_list_item",this.modelCache.get("Organization",n).toJSON()));return i}.call(this),t.removeClass("hide").find(".js-list").empty().append(i)),r=!1,this.$(".js-show-more-orgs").toggleClass("hide",!r),this},t.prototype.seeAllSavedSearchesEvent=function(){return this.clearSearch(),_("Search","Saved Search","See All Saved Searched (Go Back)")},t.prototype.clearSearch=function(){return f.setQuery("")},t.prototype.doSavedSearch=function(e){var t;return t=this.$(e.target).closest(".saved-search").find(".js-saved-search-query").text(),f.setQuery(t),_("Search","Saved Search","Open Saved Search")},t.prototype.sortStop=function(e,t){g.stopPropagation(e),t.item.trigger("movesavedsearch",[t]),_("Search","Saved Search","Reorder Saved Searches")},t.prototype.saveThisSearch=function(){return this.$(".js-saved-search-links").addClass("hide"),this.$(".js-save-this-search-menu").removeClass("hide"),this.$(".js-saved-search-name-input").val("").focus(),this.$(".js-save-this-search-submit").addClass("disabled")},t.prototype.changeSearchName=function(){var e,t;return t=this.$(".js-save-this-search-submit"),e=this.$(".js-saved-search-name-input"),t.toggleClass("disabled",0===e.val().trim().length),_("Search","See All Saved Searches")},t.prototype.confirmSave=function(e){var t,n;return g.preventDefault(e),this.$(".js-save-this-search-submit").hasClass("disabled")?void 0:(t=this.$(".js-saved-search-name-input").val().trim(),n=f.getQuery(),i.me().savedSearchList.saveSearch(t,n),this.cancelSave(),_("Search","Saved Search","Save"))},t.prototype.cancelSave=function(){return this.$(".js-saved-search-links").removeClass("hide"),this.$(".js-save-this-search-menu").addClass("hide"),_("Search","Saved Search","Cancel Save")},t.prototype.closeAllDeleteMenus=function(){var e,t,n,r,i;for(n=this.subviewsOfType(h),r=[],e=0,t=n.length;t>e;e++)i=n[e],r.push(i.cancelDeletion());return r},t.prototype.trackCardClick=function(){return _("Search","Select Item","Card")},t.prototype.trackMemClick=function(){return _("Search","Select Item","Member")},t.prototype.trackOrgClick=function(){return _("Search","Select Item","Team")},t.prototype.trackOpenHelpQuery=function(){return _("Search","Open Help with Query")},t.prototype.trackOpenHelp=function(){return _("Search","Open Help or Guide")},t.prototype.trackBusinessClassClick=function(){return _("Search","Click Business Class Link","Save Search Menu")},t.prototype.trackGoldClick=function(){return _("Search","Click Gold Link","Save Search Menu")},t.prototype.showTips=function(e){g.stop(e),this.$(".js-search-tips-helper").addClass("hide"),this.$(".js-search-tips-list").removeClass("hide"),_("Search","Show Tips")},t.prototype.showMoreCards=function(e){this.$(".js-loading-cards").removeClass("hide"),this.$(".js-show-more-cards").addClass("hide"),this.cardsDesired+=this.cardsLimit,this.getMoreCards(f.getQuery(),{partial:!0}),_("Search","Show More Cards")},t.prototype.showMoreBoards=function(e){},t.prototype.showMoreMembers=function(e){},t.prototype.showMoreOrgs=function(e){},t.prototype.highlightCard=function(e){var t;t=r(e.target).closest(".search-result-card").addClass("search-result-card-highlight-card"),t.closest(".js-list").addClass("search-result-card-highlight-section")},t.prototype.unHighlightCard=function(e){var t;t=r(e.target).closest(".search-result-card").removeClass("search-result-card-highlight-card"),t.closest(".js-list").removeClass("search-result-card-highlight-section")},t}(v)},{}],691:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),o=e(601),s=e(129),a=e(522),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.tagName="li",t.prototype.className="search-result-member",t.prototype.events={"mouseenter .js-select-member":"hoverMember","mouseleave .js-select-member":"blurMember"},t.prototype.render=function(){return this.$el.empty(),this.appendSubview(this.subview(o,this.model,{linkName:!0})),this},t.prototype.blurMember=function(e){var t;t=r(e.target).closest(".item").removeClass("selected")},t.prototype.hoverMember=function(e){var t;t=r(e.target).closest(".item"),s.selectMenuItem(r(e.target).closest(".js-list"),".item",t)},t}(a)},{}],692:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;i=e(542),o=e("bluebird"),s=e(601),a=e(129),u=e(522),c=e("underscore"),l=e(101),d=e(132),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.previousRender=null,t.prototype.renderSearchResults=function(e,t){var n,r,i,u,p,h,m;return this.$(".js-org-members").hide(),this.$el.find(".js-error").hide(),r=this.$el.find(".js-search-results"),n=r.find(".js-list").empty(),i=this.$el.find(".js-uninvited-search-results").hide().empty(),""===e?(this.clearSearchResults(),void this.loadingEl.hide()):(h=c.isEmpty(t),u=e.trim().length>=3,p=1===t.length&&a.checkEmail(e),this.$(".js-no-results").toggleClass("hide",!h),r.toggle(!h),!u&&h&&"function"==typeof this.renderOrgMembers&&this.renderOrgMembers(),this.helperEl.hide(),h||null!=t[0].id?(null!=(m=this.previousRender)&&m.cancel(),this.previousRender=o.resolve(t).map(function(e){return function(t){var n,r,i,o,s,a;return i=t.joined,a=t.similarity>0,delete t.joined,delete t.similarity,r={id:t.id},i?("ghost"===t.memberType?r.extraText=l("invited"):r.extraText=l("joined"),r.className="disabled"):null!=(s="function"==typeof(n=e.model).getOrganization?n.getOrganization():void 0)&&null!=(o=e.modelCache.get("Member",t.id))&&(null!=s?s.hasActiveMembership(o):void 0)&&(r.extraText=l("member-of-org",{orgName:s.get("displayName")},{raw:!0})),r.isKnownMember=a||p,d(e.modelCache,"enqueueDelta","Member",t).return(r)}}(this)).cancellable().tap(function(e){return function(){return e.deleteSubviewsOfType(s)}}(this)).each(function(e){return function(t){e.appendMemberToSearchResults(t)}}(this)).tap(function(e){return function(){var t;return e.loadingEl.hide(),t=e.$(".js-search-results .js-list li.js-autoselect:first"),a.selectMenuItem(e.$(".js-search-results .js-list"),"li",t)}}(this)).catch(o.CancellationError,function(){})):(this.renderEmailInviteToSearchResults(t[0]),r.hide(),void this.loadingEl.hide()))},t.prototype.appendMemberToSearchResults=function(e){var t,n,r,i,o;return r=this.modelCache.get("Member",e.id),o="function"==typeof(t=this.model).getOrganization?t.getOrganization():void 0,n=(null!=o?o.isPremOrgAdmin(r):void 0)?c.compact([e.className,"no-option"]).join(" "):e.className,i=this.subview(s,r,c.extend({showUnconfirmed:!0,showInactive:!0},e)),this.appendSubview(i,this.$(".js-search-results .js-list")),i.$("li").addClass(n)},t}(u)},{}],693:[function(e,t,n){var r,i,o,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(33),o=e(129),s=e(522),a=e(519),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.className="saved-search",t.prototype.events={"click .js-delete-saved-search":"deleteSavedSearch","click .js-delete-saved-search-confirm":"confirmDeletion","click .js-delete-saved-search-cancel":"cancelDeletion",movesavedsearch:"moveSavedSearch"},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.allowDelete=r.me().isFeatureEnabled("savedSearches")||"@me"!==e.query,this.$el.html(a.fill("saved_search",e)),this},t.prototype.deleteSavedSearch=function(e){return this.options.parent.closeAllDeleteMenus(),this.$(".js-saved-search-name").addClass("saved-search-item-faded"),this.$(".js-delete-saved-search").addClass("hide"),this.$(".js-delete-saved-search-menu").removeClass("hide"),this.defer(function(e){return function(){return e.$(".js-delete-saved-search-menu").addClass("saved-search-delete-menu-shown")}}(this))},t.prototype.confirmDeletion=function(e){return this.model.destroy()},t.prototype.cancelDeletion=function(e){return this.$(".js-saved-search-name").removeClass("saved-search-item-faded"),this.$(".js-delete-saved-search").removeClass("hide"),this.$(".js-delete-saved-search-menu").addClass("hide").removeClass("saved-search-delete-menu-shown")},t.prototype.moveSavedSearch=function(e,t){var n,i;return i=t.item.parent().children(),n=i.index(t.item),this.model.update("pos",o.calcPos(n,r.me().savedSearchList,this.model)),this.model.collection.sort({silent:!0})},t}(s)},{}],694:[function(e,t,n){var r,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),i=e(6),o=e(690),s=e(97),a=e(20),u=e(542),c=e(695),d=e(275),p=e(520),h=e(129),m=e(522),f=e("underscore"),g=e(519),v=e(48),t.exports=l=function(e){function t(){this.fSearchOpen=!1,this.saveQueryDebounced=f.debounce(this.saveQuery,100),this.openSearchResultsViewDebounced=f.debounce(this.openSearchResultsView,100),this.autosuggestDebounced=f.debounce(this.autosuggest,100),p.addHandler(this,{scope:"search_box"}),t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("renderInputState"),this.listenTo(d,{"change:query":this.renderInputQuery})},t.prototype.events={"keydown .js-search-input":"searchKeydown","input .js-search-input":"search","click .js-search-input":function(e){return h.stop(e),this.openSearchResultsView()},"focus .js-search-input":"openSearchResultsView","click .js-open-search-page":"openSearchPage","mousedown .js-search-close":"clearSearch",shortcut:"shortcut"},t.prototype.render=function(){return this.$el.html(g.fill("header_search")),this.renderInputStateDebounced(),this.$(".js-search-input").val(d.getQuery()),this},t.prototype.renderInputQuery=function(){var e,t,n;e=this.$(".js-search-input"),n=e.val(),t=d.getQuery(),e.length>0&&n!==t&&(e.val(t),h.setCaretAtEnd(e))},t.prototype.renderInputState=function(){var e,t;t=this.fSearchOpen,e=this.hasInputValue(),this.$(".js-search-input").toggleClass("header-search-input-wide focus",t),this.$(".js-search-icon, .js-close-icon, .js-open-button").toggleClass("header-search-icon-dark",t),this.$(".js-search-icon").toggleClass("hide",t),this.$(".js-close-icon").toggleClass("hide",!t),this.$(".js-open-button").toggleClass("hide",!t)},t.prototype.hasInputValue=function(){var e;return(null!=(e=this.$(".js-search-input").val())?e.length:void 0)>0},t.prototype.shortcut=function(e){return e===a.ForwardSlash?(this.focusInput(),"Search"):void 0},t.prototype.focusInput=function(){var e;e=this.$(".js-search-input"),e.length&&h.setCaretAtEnd(e)},t.prototype.clearSearch=function(e){h.stop(e),u.hide(),this.closeSearch()},t.prototype.closeSearch=function(){this.$(".js-search-input").val("").blur(),d.setQuery(""),this.fSearchOpen=!1,this.renderInputStateDebounced()},t.prototype.searchKeydown=function(e){var t,n,i,o;i=s.getKey(e),this.renderInputStateDebounced(),n=e.target.selectionStart===(o=e.target.selectionEnd)&&o===e.target.value.length,i===a.Enter||i===a.Tab||i===a.ArrowRight&&n?(t=r(".js-select-suggestion.selected").length,t&&(h.stop(e),r(".js-select-suggestion.selected").click())):(i===a.ArrowUp||i===a.ArrowDown)&&(t=r(".js-select-suggestion.selected").length,t&&(h.stop(e),h.navMenuList(r(".js-search-suggestions-list"),".js-select-suggestion",i)))},t.prototype.search=function(e){return this.autosuggestDebounced(),this.saveQueryDebounced(),this.openSearchResultsViewDebounced()},t.prototype.autosuggest=function(e){var t,n,r,i,o,s,a,u,l,p,m,g;t=this.$(".js-search-input"),m=h.getWordFromCaret(t).str,i=c.findUniqueKeywords(m),a=d.getQuery(),c.inputIndex=h.getCaretPosition(t),o=f.filter(i,function(e){var t;return t=c.getSuggestionObjectContainingVariantOrKey(e).obj.containsRegex,!t.test(a)}),d.setSuggestions(o),n=!1,l=c.getKeywordsWithSearchSuggest();for(r in l)if(p=l[r],u=p.containsRegex,u.test(m))return n=!0,g=p.suggestionsSearchModelTypes,d.setSuggestionSearchModelTypes(g),s=m.replace(RegExp("^"+r),""),void d.setSuggestionSearchTerm(s);n||(d.clearSuggestionSearchTerm(),d.clearSuggestionSearchModelTypes())},t.prototype.saveQuery=function(){var e;e=this.$(".js-search-input").val(),d.setQuery(e),/\/search/.test(location.pathname)&&i.navigate(i.getSearchUrl(e),{replace:!0})},t.prototype.getResultsView=function(){return this.subview(o,null,null,"headerSearchResultsView")},t.prototype.openSearchResultsView=function(){var e;this.fSearchOpen||i.isOnSearchPage()||(this.fSearchOpen=!0,e=this.$(".js-search-input"),e.focus(),h.setCaretAtEnd(e),u.show({elem:e,view:new o({model:this.model,modelCache:this.modelCache}),elActive:e,hidden:f.bind(this.closeSearch,this)})),this.fSearchOpen=!0,this.renderInputStateDebounced()},t.prototype.openSearchPage=function(e){var t;return h.stop(e),t=d.getQuery(),u.hide(),c.navigateToSearch(t,{trigger:!0}),v("Header","Open Search Page")},t}(m)},{}],695:[function(e,t,n){var r,i,o,s,a,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),i=e(6),o=e(129),s=e("underscore"),a=e(101),t.exports=window.Search={navigateToSearch:function(e,t){var n;return n=(null!=t?t:{trigger:!1}).trigger,i.navigate(i.getSearchUrl(e),{trigger:n})},inputIndex:null,getSuggestionObjectContainingVariantOrKey:function(e){var t,n,r;if(n=this.getKeywordMap()[e],null!=n)return{key:e,obj:n};r=this.getKeywordsWithVariants();for(t in r)if(n=r[t],u.call(n.variants,e)>=0)return{key:t,obj:n};return{}},findKeywords:function(e){var t;return""===e?[]:t=s.filter(this.getKeywordsAndVariants(),function(t){return RegExp("^"+o.escapeForRegex(e)).test(t)})},findUniqueKeywords:function(e){var t,n;return t=this.findKeywords(e),n=s.uniq(t,!1,function(e){return function(t){return e.getSuggestionObjectContainingVariantOrKey(t).key}}(this))},_keywordsWith:function(e){var t,n;return s.object(function(){var r,i;r=this.getKeywordMap(),i=[];for(t in r)n=r[t],n.hasOwnProperty(e)&&i.push([t,n]);return i}.call(this))},getKeywordsWithVariants:function(){return null!=this._keywordsWithVariants?this._keywordsWithVariants:this._keywordsWithVariants=this._keywordsWith("variants")},getKeywordsWithSearchSuggest:function(){return null!=this._keywordsWithSearchSuggest?this._keywordsWithSearchSuggest:this._keywordsWithSearchSuggest=this._keywordsWith("suggestionsSearchModelTypes")},getKeywords:function(){return null!=this._keywords?this._keywords:this._keywords=s.keys(this.getKeywordMap())},getVariants:function(){var e,t;return null!=this._variants?this._variants:this._variants=s.flatten(function(){var n,r;n=this.getKeywordsWithVariants(),r=[];for(e in n)t=n[e],r.push(t.variants);return r}.call(this))},getKeywordsAndVariants:function(){return null!=this._keywordsAndVariants?this._keywordsAndVariants:this._keywordsAndVariants=this.getKeywords().concat(this.getVariants())},getKeywordMap:function(){return null!=this._keywordMap?this._keywordMap:this._keywordMap={"is:archived":{variants:["archived","is:closed","closed"],description:a("search.only include archived cards"),containsRegex:/\bis:archived\b/},"is:open":{variants:["open"],description:a("search.only include open cards"),containsRegex:/\bis:open\b/},"is:starred":{variants:["is:starred"],description:a("search.only include cards on starred boards"),containsRegex:/\bis:starred\b/},"has:attachments":{variants:["attachments"],description:a("search.only include cards with attachments"),containsRegex:/\bhas:attachments\b/},"has:cover":{variants:["cover"],description:a("search.only include cards with a cover"),containsRegex:/\bhas:cover\b/},"has:description":{variants:["description"],description:a("search.only include cards that have a description"),containsRegex:/\bhas:description\b/},"has:stickers":{variants:["stickers"],description:a("search.only include cards that have stickers"),containsRegex:/\bhas:stickers\b/},"has:members":{variants:["members"],suggestString:"has:members",description:a("search.only include cards that have members assigned"),containsRegex:/\bhas:members\b/},"@":{moreInputNeeded:!0,description:a("search.cards assigned to a member"),containsRegex:/@\S*\b/,suggestionsSearchModelTypes:"members"},"@me":{variants:["me"],description:a("search.only include cards assigned to me"),containsRegex:/\b@me\b/},"member:":{moreInputNeeded:!0,description:a("search.cards assigned to a member"),containsRegex:/\bmember:\S*\b/,suggestionsSearchModelTypes:"members"},"label:":{moreInputNeeded:!0,description:a("search.cards with this label"),containsRegex:/\blabel:\S*\b/},"#":{moreInputNeeded:!0,description:a("search.cards with this label"),containsRegex:/\b\#\S*\b/},"board:":{moreInputNeeded:!0,description:a("search.only cards on a particular board"),containsRegex:/\bboard:\S*\b/,suggestionsSearchModelTypes:"boards"},"list:":{moreInputNeeded:!0,description:a("search.cards in the list with matching text"),containsRegex:/\blist:\S*\b/},"name:":{moreInputNeeded:!0,description:a("search.cards that match text in the name"),containsRegex:/\bname:\S*\b/},"comment:":{moreInputNeeded:!0,description:a("search.cards that match text in the comment"),containsRegex:/\bcomment:\S*\b/},"checklist:":{moreInputNeeded:!0,description:a("search.cards that match text in a checklist"),containsRegex:/\bchecklist:\S*\b/},"description:":{moreInputNeeded:!0,description:a("search.cards that match text in the description"),containsRegex:/\bdescription:\S*\b/},"due:day":{variants:["day","today"],description:a("search.cards due in the next 24 hours"),containsRegex:/\bdue:day\b/},"due:week":{description:a("search.cards due in the next 7 days"),containsRegex:/\bdue:week\b/},"due:month":{description:a("search.cards due in the next 28 days"),containsRegex:/\bdue:month\b/},"due:overdue":{variants:["overdue"],description:a("search.cards that are past due"),containsRegex:/\bdue:overdue\b/},"due:incomplete":{variants:["notcomplete","incomplete","stilldue"],description:a("search.cards that are incomplete"),containsRegex:/\bdue:incomplete\b/},"created:day":{description:a("search.cards created in the last 24 hours"),containsRegex:/\bcreated:day\b/},"created:week":{description:a("search.cards created in the last 7 days"),containsRegex:/\bcreated:week\b/},"created:month":{description:a("search.cards created in the last 28 days"),containsRegex:/\bcreated:month\b/},"edited:day":{description:a("search.cards edited in the last 24 hours"),containsRegex:/\bedited:day\b/},"edited:week":{description:a("search.cards edited in the last 7 days"),containsRegex:/\bedited:week\b/},"edited:month":{description:a("search.cards edited in the last 28 days"),containsRegex:/\bedited:month\b/}}}}},{}],696:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(33),o=e(534),a=e(698),u=e(129),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.toggleSelectable(),this.waitForId(this.model,function(e){return function(){return e.toggleSelectable()}}(this)),this.listenTo(this.model,"change:error",this.render)},t.prototype.events={"click .js-delete-sticker":"deleteSticker"},t.prototype.enabled=function(){var e;return i.me().isFeatureEnabled("customStickers")||(null!=(e=this.options.org)?e.isFeatureEnabled("customStickers"):void 0)},t.prototype.toggleSelectable=function(){var e;return e=null!=this.model.id,this.$el.toggleClass("js-draggable-sticker",e),this.$el.toggleClass("sticker-unselectable",!e)},t.prototype.deleteSticker=function(e){return u.stop(e),o.toggle("delete sticker",{elem:r(e.target).closest(".js-delete-sticker"),top:32,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy()}}(this)})},t}(a)},{}],697:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(542),s=e(699),a=e(129),u=e("underscore"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"stopEditing",this.stopEditing),this.listenTo(this.model,"startEditing",this.editSticker),this.listenTo(this.model,"disableEditing",this.disableEditing),this.listenTo(this.model,"enableEditing",this.enableEditing)},t.prototype.events={mouseenter:"mouseenter",mouseleave:"mouseleave",mousedown:"editSticker","mousedown .js-remove-sticker":"removeSticker","mousedown .js-rotate-sticker":"startRotate","mousedown .js-move-sticker":"startMove"},t.prototype.showEditControls=function(){return!0},t.prototype.disableEditing=function(){return this.$el.addClass("editing-disabled")},t.prototype.enableEditing=function(){return this.$el.removeClass("editing-disabled")},t.prototype.endCurrentEdit=function(){return r(document).off(".stickerrotate .stickermove .stickerautomove"),this.$el.removeClass("moving rotating"),r(".quick-card-editor").removeClass("invalid dragging")},t.prototype.stopEditing=function(e){var t,n,i,o,s;if(a.stop(e),this.isEditing()){for(this.endCurrentEdit(),this.$el.removeClass("editing"),r(".quick-card-editor").removeClass("quick-card-editor-editing-stickers"),i=this.model.collection.models,o=[],t=0,n=i.length;n>t;t++)s=i[t],o.push(s.trigger("enableEditing"));return o}},t.prototype.isEditing=function(){return this.$el.is(".moving, .rotating, .editing")},t.prototype.isEditingDisabled=function(){return this.$el.is(".editing-disabled")},t.prototype.isMovingOrRotating=function(){return this.$el.is(".moving, .rotating")},t.prototype.saveStickerAttrs=function(e){var t,n,r,i,o,s,u,c,l;i=e.position,o=e.rotation,s=function(e){return Math.round(100*e)/100},l={zIndex:this.model.collection.nextZIndex(this.model)},i&&(t=this.$el.closest(".list-card"),n=t.find(".js-card-stickers"),c=n.width(),u=n.height(),l.left=s(parseFloat(this.$el.css("left"))/c*100),l.top=s(parseFloat(this.$el.css("top"))/u*100)),o&&(r=a.getElemTransformMatrix(this.$el.find(".sticker-image")),l.rotate=s(a.getMatrixDegrees(r)%360)),this.model.update(l)},t.prototype.mouseenter=function(e){this.isEditingDisabled()||this.isEditing()||this.isMovingOrRotating()||this.$el.addClass("hover")},t.prototype.mouseleave=function(e){this.$el.removeClass("hover")},t.prototype.editSticker=function(e){var t,n,o,s,c,l,d,p,h;if(null==e||1===e.which){for(a.stop(e),s=!1,null!=e&&"mousedown"===e.type&&(l=e.pageX,d=e.pageY,n=function(e){return function(){return r(document).off(".stickerautomove"),clearTimeout(t)}}(this),r(document).on("mousemove.stickerautomove",function(e){return function(t){return Math.pow(t.pageX-l,2)+Math.pow(t.pageY-d,2)>25?(s=!0,n(),e.startMove(t)):void 0}}(this)),r(document).on("mouseup.stickerautomove",n),t=this.setTimeout(n,1e3)),h=u.clone(this.model.collection.models),o=0,c=h.length;c>o;o++)p=h[o],p!==this.model&&(p.trigger("stopEditing"),p.trigger("disableEditing"));this.defer(function(e){return function(){return i.hide(),e.$el.addClass("editing"),r(".quick-card-editor").addClass("quick-card-editor-editing-stickers")}}(this))}},t.prototype.startRotate=function(e){var t,n,i,o,s,u;if(this.isEditing())return a.preventDefault(e),u={x:this.$el.offset().left+this.$el.width()/2,y:this.$el.offset().top+this.$el.height()/2},i={x:e.pageX,y:e.pageY},o=a.calcDistanceFromCenter(this.$el,i.x,i.y),s=0,n=a.getElemTransformMatrix(this.$el.find(".sticker-image")),null!=n&&(s=a.getMatrixDegrees(n)),t=!1,r(document).on("mousemove.stickerrotate",function(e){return function(n){var c,l,d,p,h,m,f,g,v;t||(e.$el.removeClass("hover").addClass("rotating"),r(".quick-card-editor").addClass("dragging"),t=!0),g={x:n.pageX,y:n.pageY},l=4*a.calcDistanceFromCenter(e.$el,g.x,g.y),d=l-4*o,h=g.x-u.x,m=g.y-u.y,f=a.getDegrees(i.y-u.y,i.x-u.x),p=a.getDegrees(m,h),c=p-f,v=s+c,e.$el.find(".sticker-image").css({transform:"rotate("+v+"deg)","-webkit-transform":"rotate("+v+"deg)"})}}(this)),r(document).on("mouseup.stickerrotate",function(e){return function(){return t?(e.saveStickerAttrs({rotation:!0}),e.endCurrentEdit()):r(document).off(".stickerrotate")}}(this)),!1},t.prototype.startMove=function(e){var t,n,i,o,s,u,c,l,d,p,h,m,f;if(this.isEditing())return a.stop(e),t=this.$el.closest(".list-card"),n=t.find(".js-card-stickers"),h=n.offset(),l=h.left,d=h.top,f=this.$el.width(),m=this.$el.height(),p=n.width(),c=n.height(),i={left:-40,right:p-10,top:-40,bottom:c-10},null!=e?(s=this.$el.offset().left+this.$el.width()/2-e.pageX,u=this.$el.offset().top+this.$el.height()/2-e.pageY):(s=0,u=0),o=!1,r(document).on("mousemove.stickermove",function(e){return function(t){var n,a,c;return o||(e.$el.removeClass("hover").addClass("moving"),r(".quick-card-editor").addClass("dragging"),o=!0),n=t.pageX-l-f/2+s,a=t.pageY-d-m/2+u,c=!0,n>i.right&&(n=i.right,c=!1),n<i.left&&(n=i.left,c=!1),a>i.bottom&&(a=i.bottom,c=!1),a<i.top&&(a=i.top,c=!1),r(".quick-card-editor").toggleClass("invalid",!c),e.$el.css({left:n,top:a})}}(this)),r(document).on("mouseup.stickermove",function(e){return function(){return o?(e.saveStickerAttrs({position:!0}),e.endCurrentEdit()):r(document).off(".stickermove")}}(this)),!1},t.prototype.removeSticker=function(e){var t;this.isEditing()&&(t=u.once(function(e){return function(){e.stopEditing(),e.model.destroy(),e.$el.remove()}}(this)),this.$el.one("transitionEnd webkitTransitionEnd",t),this.setTimeout(t,100),this.$el.addClass("fade-out"))},t}(s)},{}],698:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);
return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(33),o=e(129),s=e(522),u=e(519),a=e(29),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="sticker-select js-draggable-sticker",t.prototype.enabled=function(){var e;return!this.model.get("premium")||r.me().isFeatureEnabled("additionalStickers")||(null!=(e=this.options.org)?e.isFeatureEnabled("additionalStickers"):void 0)},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.url=null!=(t=null!=(n=o.smallestPreviewBiggerThan(e.scaled,a))?n.url:void 0)?t:e.url,e.pending=null==e.image&&null==e.id&&null==e.error,this.$el.toggleClass("disabled",!this.enabled()).html(u.fill("sticker_select_item",e)).data("sticker",this.model),this},t}(s)},{}],699:[function(e,t,n){var r,i,o,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;i=e(129),o=e(522),u=e(519),a=e(29),s=e(138),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="sticker",t.prototype.showEditControls=function(){return!1},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.url=null!=(t=null!=(n=i.smallestPreviewBiggerThan(e.imageScaled,a))?n.url:void 0)?t:e.imageUrl,e.showEditControls=this.showEditControls(),this.$el.html(u.fill("sticker_on_card",e)).css({left:s(e.left)+"%",top:s(e.top)+"%"}),this},t}(o)},{}],700:[function(e,t,n){var r,i,o;o=e(517)("action"),r=e(785),i=e(833),t.exports=o.renderable(function(e,t,n){var s,a,u,c,l,d,p,h,m,f,g,v,b,y,w;return h=e.entities,g=e.saved,p=e.dateLastEdited,d=e.date,b=e.url,m=t.member,s=t.board,f=t.organization,l=t.canReply,u=t.canDelete,c=t.canEdit,a=t.canAttachLink,y=n.useEmbedly,w=n.usePreviews,v=n.showOptions,o.div(".phenom-creator",function(){return m?o.div(".member.js-show-mem-menu",{idmember:m.id},function(){return i(m)}):o.span(".icon-lg.icon-member")}),o.div(".phenom-desc",function(){var e,i,s;for(i=0,s=h.length;s>i;i++)e=h[i],r(e,t,n);return y&&o.div(".hide.embedly.js-embedly"),w?o.div(".hide.previews.js-previews"):void 0}),o.p(".phenom-meta.quiet",function(){var e,n,r,i;return g&&(b?o.a(".date.js-hide-on-sending.js-highlight-link",{dt:d,href:b}):o.span(".date.js-hide-on-sending",{dt:d,href:b})),p&&o.span(".js-date-title.js-hide-on-sending",{dt:p},function(){return o.text(" "),o.format("edited")}),o.span({class:o.classify({"js-spinner":!0,hide:g})},function(){return o.format("sending-ellipsis")}),s&&(e=t.boardPLevelAltText,n=t.boardPLevelIconClass,o.text(" - "),o.format("on-board-name",{url:s.url,name:s.name,boardPLevelAltText:e,boardPLevelIconClass:n})),f&&(r=t.orgPLevelAltText,i=t.orgPLevelIconClass,o.text(" - "),o.format("on-organization-name",{url:f.url,name:f.name,orgPLevelAltText:r,orgPLevelIconClass:i})),v?o.span(".js-hide-on-sending",function(){return l&&(o.text(" - "),o.a(".js-reply-to-action",{href:"#"},function(){return o.format("reply")})),c&&(o.text(" - "),o.a(".js-edit-action",{href:"#"},function(){return o.format("edit")})),a&&(o.text(" - "),o.a(".js-attach-link",{href:"#"},function(){return o.format("attach link")})),u?(o.text(" - "),o.a(".js-confirm-delete-action",{href:"#"},function(){return o.format("delete")})):void 0}):void 0})})},{}],701:[function(e,t,n){var r;r=e(517)("actions_empty"),t.exports=function(){return r.p(".empty-list",function(){return r.mustacheBlock("daysBack",function(){return r.format("no-actions-in-the-last-daysback-days",{daysBack:r.mustacheVar("daysBack")})}),r.mustacheBlockInverted("daysBack",function(){return r.format("no-actions")})})}},{}],702:[function(e,t,n){var r;r=e(517)("ad_business_class"),t.exports=function(){return r.format("check-out-business-class")}},{}],703:[function(e,t,n){var r;r=e(517)("ad_business_class_google_apps"),t.exports=function(){return r.span(".title",function(){return r.format("using-google-apps")}),r.span(".learn-more",function(){return r.a({href:"#"},function(){return r.format("learn-about-business-class-ellipsis")})})}},{}],704:[function(e,t,n){var r,i;i=e(517)("announcement"),r=function(e){var t;return t=["announcement"],e&&t.push(["announcement",e].join("-")),t.join(" ")},t.exports=i.renderable(function(e){var t,n,o,s;return t=e.url,o=e.title,n=e.html,s=e.type,i.div({class:r(s)},function(){i.h3(".announcement-header",function(){null!=t?i.a(".announcement-header-link",{target:"_blank",href:t},function(){return i.text(o)}):i.text(o)}),i.p(function(){return i.raw(n)}),null!=t&&i.p(".quiet",function(){return i.a({href:t,target:"_blank"},function(){return i.format("read-more-ellipsis")})})})})},{}],705:[function(e,t,n){var r;r=e(517)("archived_card_options"),t.exports=function(){return r.mustacheBlock("__ed",function(){return r.p(".quiet",{style:"margin-left: 8px;"},function(){return r.a(".js-reopen",{href:"#"},function(){return r.text(r.mustacheVar("reOpenText"))}),r.mustacheBlock("canDelete",function(){return r.text(" - "),r.a(".js-delete",{href:"#"},function(){return r.format("delete")})})})})}},{}],706:[function(e,t,n){var r;r=e(517)("archived_cards"),t.exports=function(){return r.div(".js-archive-items"),r.p(".empty-list.js-empty-message"),r.a(".show-more.js-more-cards",{href:"#"},function(){return r.format("load-more-cards")})}},{}],707:[function(e,t,n){var r;r=e(517)("archived_lists"),t.exports=function(){return r.ul(".archive-list.js-archive-items"),r.p(".js-empty-message.empty-list")}},{}],708:[function(e,t,n){var r;r=e(517)("atMention"),t.exports=function(){return r.span({class:"atMention"+r.mustacheBlock("isMe",function(){return" me"}),title:r.mustacheVar("fullName")},function(){return r.text(r.mustacheVar("atMention"))})}},{}],709:[function(e,t,n){var r;r=e(517)("attachment_thumb"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k;return t=e.canReply,n=e.canUseViewer,i=e.date,o=e.doDownload,s=e.edgeColor,a=e.editable,u=e.ext,l=e.imgSrc,d=e.isCover,p=e.isHidden,h=e.name,m=e.openIconClass,f=e.openText,g=e.plugin,v=e.pluginEnablementInProgress,b=e.previewClass,y=e.removeText,c=e.url,_={"attachment-thumbnail-preview":!0,"js-open-viewer":n,"attachment-thumbnail-preview-is-cover":d},p?r.div:(w={},l&&(w["background-image"]=r.urlify(l)),s&&(w["background-color"]=s),r.a({href:c,class:r.classify(_),target:"_blank",title:h,style:r.stylify(w)},function(){return b?r.span({class:["attachment-thumbnail-preview-service-logo",b].join(" ")}):l?void 0:u?r.span(".attachment-thumbnail-preview-ext",function(){return r.text(u)}):r.span(".icon-lg.icon-attachment.attachment-thumbnail-preview-attachment-icon")}),k=function(){return i&&r.span(function(){return r.format("added",{date:i})}),t&&r.span(function(){return r.a(".attachment-thumbnail-details-title-options-item.js-reply",{href:"#"},function(){return r.span(".attachment-thumbnail-details-options-item-text",function(){return r.format("comment")})})}),a?r.span(function(){return r.a(".attachment-thumbnail-details-title-options-item.dark-hover.js-confirm-delete",{href:"#"},function(){return r.span(".attachment-thumbnail-details-options-item-text",function(){return r.text(y)})})}):void 0},void r.p(".attachment-thumbnail-details",{class:r.classify({"js-open-viewer":n,"js-open-in-new-window":!n})},function(){r.span(".attachment-thumbnail-name.js-attachment-name",function(){return r.text(h)}),o||r.a(".attachment-thumbnail-details-title-action.dark-hover.js-attachment-action.js-direct-link",{href:c,target:"_blank"},function(){return r.icon(m)}),r.textarea(".attachment-thumbnail-details-title.js-attachment-thumbnail-details hide",{maxlength:256},function(){return r.text(h)}),r.span(".u-block.quiet.attachment-thumbnail-details-title-options",function(){return k()}),g&&r.span(".quiet.attachment-thumbnail-details-powerup",function(){return r.a(".attachment-thumbnail-details-powerup-item-button.js-enable-power-up",{href:"#","data-plugin":g.name},function(){return g.icon?r.span(".icon-sm.plugin-icon",{style:r.stylify({"background-image":r.urlify(g.icon+"?color=999")})}):r.span(".icon-sm.icon-power-up"),r.format("enable-power-up",{powerUpName:g.name})}),r.a(".attachment-thumbnail-details-powerup-item.js-show-power-up-suggestions-info",{href:"#","data-plugin":g.name},function(){return r.icon("information",{class:"power-up-item-suggestions-info-icon"})})}),v&&r.span(".quiet.attachment-thumbnail-details-powerup",function(){return r.a(".attachment-thumbnail-details-powerup-item-button.power-up-enablement-in-progress",{href:"#"},function(){return r.span(".icon-sm.icon-power-up",function(){}),r.format("enabling-power-up")})}),r.span(".quiet.attachment-thumbnail-details-options",function(){o&&r.a(".attachment-thumbnail-details-options-item.dark-hover.js-download",{href:c,target:"_blank",download:"download"},function(){return r.icon("download"),r.text(" "),r.span(".attachment-thumbnail-details-options-item-text",function(){return r.text(f)})}),a&&(r.a(".attachment-thumbnail-details-options-item.dark-hover.hide.js-make-cover",{href:"#"},function(){return r.icon("card-cover"),r.text(" "),r.span(".attachment-thumbnail-details-options-item-text",function(){return r.format("make-cover")})}),r.a(".attachment-thumbnail-details-options-item.dark-hover.hide.js-remove-cover",{href:"#"},function(){return r.icon("card-cover"),r.text(" "),r.span(".attachment-thumbnail-details-options-item-text",function(){return r.format("remove-cover")})}))})}))})},{}],710:[function(e,t,n){var r;r=e(517)("attachment_thumb_processing"),t.exports=r.renderable(function(){return r.div(".attachment-thumbnail.attachment-thumbnail-processing.js-attachment-thumb-processing",function(){return r.format("processing-ellipsis")})})},{}],711:[function(e,t,n){var r;r=e(517)("attachment_viewer"),t.exports=function(){return r.div(".attachment-viewer-header.js-close-viewer",function(){return r.span(".icon-lg.icon-close.attachment-viewer-header-close-icon")}),r.div(".attachment-viewer-underlay.js-close-viewer"),r.div(".attachment-viewer-frames.js-frames"),r.div(".attachment-viewer-overlay",function(){return r.div(".attachment-viewer-frame-details.js-display-frame-details")}),r.a(".attachment-viewer-next-frame-btn.js-show-next-frame",function(){return r.span(".icon-lg.icon-forward.light.attachment-viewer-next-frame-btn-icon")}),r.a(".attachment-viewer-prev-frame-btn.js-show-prev-frame",function(){return r.span(".icon-lg.icon-back.light.attachment-viewer-prev-frame-btn-icon")})}},{}],712:[function(e,t,n){var r;r=e(517)("attachment_viewer_frame"),t.exports=function(){return r.div({class:"attachment-viewer-frame js-close-viewer "+r.mustacheVar("directionClass"),"data-idAttachment":r.mustacheVar("id")},function(){return r.div(".attachment-viewer-frame-preview-wrapper",function(){return r.div({class:"attachment-viewer-frame-preview"+r.mustacheBlock("isImage",function(){return" attachment-viewer-frame-preview-image-wrapper"})},function(){return r.mustacheBlock("isImage",function(){return r.img(".attachment-viewer-frame-preview-image.js-stop",{src:r.mustacheVar("url"),alt:r.mustacheVar("name")})}),r.mustacheBlock("isAudio",function(){return r.audio(".attachment-viewer-frame-preview-audio.js-stop",{controls:!0,name:r.mustacheVar("name")},function(){return r.source({src:r.mustacheVar("url"),type:"audio/"+r.mustacheVar("ext")})})}),r.mustacheBlock("isVideo",function(){return r.video(".attachment-viewer-frame-preview-video.js-stop",{controls:!0,name:r.mustacheVar("name"),src:r.mustacheVar("url")})}),r.mustacheBlock("isIFrameable",function(){return r.iframe(".attachment-viewer-frame-preview-iframe.js-stop",{src:r.mustacheVar("url")})}),r.mustacheBlock("isPlaceholder",function(){return r.p(".attachment-viewer-frame-preview-placeholder",function(){return r.format("there-is-no-preview-available-for-this-attachment-opentext",{url:r.mustacheVar("url"),openText:r.mustacheVar("openText")})})})})})})}},{}],713:[function(e,t,n){var r;r=e(517)("attachment_viewer_frame_details"),t.exports=function(){return r.div(".attachment-viewer-frame-details",function(){return r.h2(".attachment-viewer-frame-details-title",function(){return r.text(r.mustacheVar("name"))}),r.p(function(){return r.mustacheBlock("date",function(){return r.format("added",{date:r.mustacheVar("date")})}),r.mustacheBlock("meta",function(){return r.text(" - "),r.text(r.mustacheVar("meta"))})}),r.p(function(){return r.span(".js-meta",function(){var e;return e={href:r.mustacheVar("url"),target:"_blank"},r.mustacheBlock("doDownload",function(){return e.download=r.mustacheVar("name")}),r.a(e,function(){return r.span({class:"icon-sm icon-"+r.mustacheVar("openIconClass")+" light attachment-viewer-option-icon"}),r.text(r.mustacheVar("openText"))}),r.mustacheBlock("__ed",function(){return r.span({class:"js-cover-options"+r.mustacheBlockInverted("canMakeCover",function(){return" hide"})},function(){return r.span({class:"js-make-cover-box"+r.mustacheBlock("isCover",function(){return" hide"})},function(){return r.a(".js-make-cover",{href:"#"},function(){return r.icon("card-cover",{class:"light attachment-viewer-option-icon"}),r.format("make-cover")})}),r.span({class:"js-remove-cover-box"+r.mustacheBlockInverted("isCover",function(){return" hide"})},function(){return r.a(".js-remove-cover",{href:"#"},function(){return r.icon("card-cover",{class:"light attachment-viewer-option-icon"}),r.format("remove-cover")})})}),r.a(".js-open-delete-confirm",{href:"#"},function(){return r.icon("close",{class:"light attachment-viewer-option-icon"}),r.text(r.mustacheVar("removeButtonText"))})})}),r.span(".js-confirm-delete.hide",function(){return r.text(r.mustacheVar("removeMessageText")),r.a(".attachment-viewer-delete-link.js-delete",{href:"#"},function(){return r.text(r.mustacheVar("removeConfirmText"))}),r.a(".attachment-viewer-delete-link.js-close-delete-confirm",{href:"#"},function(){return r.text(r.mustacheVar("removeCancelText"))})})})})}},{}],714:[function(e,t,n){var r;r=e(517)("avatar_change"),t.exports=function(){return r.mustacheBlock("uploadedAvatarHash",function(){return r.a({class:"avatar-option js-use-uploaded-avatar "+r.mustacheBlock("avatarSource_upload",function(){return"active"}),href:"#"},function(){return r.img(".pic",{src:r.mustacheVar("__avatarDomain")+"/"+r.mustacheVar("uploadedAvatarHash")+"/50.png"}),r.span(".text",function(){return r.format("uploaded-picture"),r.icon("check")})}),r.hr()}),r.div(".js-grav.hide",function(){return r.a({class:"avatar-option js-use-gravatar "+r.mustacheBlock("avatarSource_gravatar",function(){return"active"}),href:"#"},function(){return r.img(".pic",{src:"https://secure.gravatar.com/avatar/"+r.mustacheVar("gravatarHash")+".png?s=50&r=PG&d=404"}),r.span(".text",function(){return r.format("gravatar"),r.icon("check")})}),r.hr()}),r.a({class:"avatar-option js-no-avatar "+r.mustacheBlock("avatarSource_none",function(){return"active"}),href:"#"},function(){return r.span(".pic.member",function(){return r.span(".member-initials",function(){return r.text(r.mustacheVar("initials"))})}),r.span(".text",function(){return r.format("initials-no-avatar"),r.icon("check")})}),r.hr(),r.mustacheBlock("canTakePhoto",function(){return r.a(".button-link.js-take-photo",{href:"#"},function(){return r.icon("camera","take-photo-with-camera")}),r.hr()}),r.p(".error.hide.js-error"),r.div(".uploader",function(){return r.form(".realfile",{action:"/1/member/"+r.mustacheVar("id")+"/avatar",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.input(".js-upload-avatar",{type:"file",name:"file",style:"margin-bottom: 0;",tabindex:"-1",accept:"image/*;capture=camera"})}),r.a(".button-link.fakefile",function(){return r.mustacheBlock("uploadedAvatarHash",function(){return r.icon("attachment","upload-a-new-picture")}),r.mustacheBlockInverted("uploadedAvatarHash",function(){return r.icon("attachment","upload-a-picture")})})})}},{}],715:[function(e,t,n){var r;r=e(517)("badge"),t.exports=function(){return r.span({class:"badge-icon icon-sm icon-"+r.mustacheVar("icon")}),r.mustacheBlock("text",function(){return r.span(".badge-text",function(){return r.text(r.mustacheVar("text"))})})}},{}],716:[function(e,t,n){var r,i;i=e(517)("billing_contact"),r=e(31),t.exports=i.renderable(function(e){var t,n,o;return n=e.fullName,t=e.email,o=e.locale,i.div(".error",{style:"display:hidden"}),i.form(function(){return i.label({for:"billingContactFullName"},function(){return i.format("name")}),i.input(".text",{name:"billingContactFullName",type:"text",id:"billingContactFullName",value:n,maxlength:"50"}),i.label({for:"billingContactEmail"},function(){return i.format("email")}),i.input(".text",{name:"billingContactEmail",type:"text",id:"billingContactEmail",value:t}),i.label({for:"billingContactLocale"},function(){return i.format("language")}),i.select({name:"billingContactLocale",id:"billingContactLocale"},function(){var e,t,n,s,a,u,c;for(a=[],e=0,t=r.length;t>e;e++)s=r[e],c=s.code,n=s.name,u=c.toLowerCase()===o.toLowerCase(),a.push(i.option({value:c,selected:u},function(){return i.text(n)}));return a}),i.input(".primary.js-submit",{type:"submit",value:i.l("save")})})})},{}],717:[function(e,t,n){var r;r=e(517)("board"),t.exports=function(){return r.div(".board-main-content",function(){return r.div(".board-header.u-clearfix.js-board-header"),r.div(".board-warnings.u-clearfix.js-board-warnings"),r.div(".board-canvas")}),r.div(".board-menu.js-fill-board-menu")}},{}],718:[function(e,t,n){var r;r=e(517)("board_archive"),t.exports=function(){return r.div(".archive-controls",function(){return r.div(".archive-controls-search",function(){return r.input(".js-search.js-autofocus",{type:"text",placeholder:r.l("search archive")})}),r.a(".archive-controls-switch.quiet-button.js-switch-section",{href:"#"})}),r.div(".spinner.loading.js-loading-spinner"),r.div(".archive-content.js-archive-content")}},{}],719:[function(e,t,n){var r;r=e(517)("board_background_options"),t.exports=function(){return r.p(".u-font-weight-bold.quiet",function(){return r.format("display-type")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select-option",{href:"#","data-background-display-type":"cover"},function(){return r.check(!r.mustacheVar("tile"),"cover")})}),r.li(function(){return r.a(".js-select-option",{href:"#","data-background-display-type":"tile"},function(){return r.check(r.mustacheVar("tile"),"tile")})})}),r.hr(),r.p(".u-font-weight-bold.quiet",function(){return r.format("board-text")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select-option",{href:"#","data-board-brightness":"dark"},function(){return r.check(r.mustacheVar("brightnessDark"),"light")})}),r.li(function(){return r.a(".js-select-option",{href:"#","data-board-brightness":"light"},function(){return r.check(r.mustacheVar("brightnessLight"),"dark")})})}),r.hr(),r.a(".quiet-button.js-delete-background",{href:"#"},function(){return r.format("delete-background")})}},{}],720:[function(e,t,n){var r;r=e(517)("board_background_selection"),t.exports=function(){return r.span({class:"background-box "+r.mustacheBlock("pending",function(){return"background-box-unselectable"})+r.mustacheBlock("tile",function(){return" background-tile"}),style:" "+r.mustacheBlock("backgroundImageThumbnail",function(){return'background-image: url("'+r.mustacheVar("backgroundImageThumbnail")+'")'})+"; "+r.mustacheBlock("color",function(){return"background-color: "+r.mustacheVar("color")+";"})+" "},function(){return r.mustacheBlock("attribution",function(){return r.a(".background-option.js-background-attribution",{href:r.mustacheVar("url"),target:"_blank",title:r.mustacheVar("url")},function(){return r.img({src:"https://a.trellocdn.com/images/d906fe5c1274c56c5571d49705547587/cc.png",style:"height: 14px; width: 14px; vertical-align: text-top;",title:r.mustacheVar("license")}),r.span(".text",{style:"margin-left: 2px;"},function(){return r.text(r.mustacheVar("name"))})})}),r.mustacheBlock("id",function(){return r.a(".background-option.js-options",function(){return r.icon("overflow-menu-horizontal",{class:"light",style:"vertical-align: bottom;"}),r.span(".text",function(){return r.format("options")})})}),r.mustacheBlock("error",function(){return r.span(".background-info",function(){return r.span(".text",function(){return r.text(r.mustacheVar("error"))})})}),r.mustacheBlock("pending",function(){return r.span(".background-info",function(){return r.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),r.span(".text",function(){return r.format("uploading-ellipsis")})})})})}},{}],721:[function(e,t,n){var r;r=e(517)("board_change_background"),t.exports=function(){return r.div(".board-backgrounds-section-tiles.u-clearfix",function(){return r.div(".board-backgrounds-section-tile.board-backgrounds-colors-tile.js-bg-colors",function(){return r.div(".image"),r.div(".title",function(){return r.format("colors")})}),r.div(".board-backgrounds-section-tile.board-backgrounds-photos-tile.js-bg-photos",function(){return r.div(".image"),r.div(".title",function(){return r.format("photos")})})}),r.hr(".board-menu-header-divider"),r.h2(function(){return r.format("custom")}),r.div({class:"board-backgrounds-list u-relative u-clearfix js-custom-list"+r.mustacheBlockInverted("enabled_customBoardBackgrounds",function(){return" disabled"})},function(){return r.div(".board-background-select.board-background-select-upload.js-uploader",function(){return r.form({action:"/1/member/"+r.mustacheVar("idMember")+"/customBoardBackgrounds",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.span(".background-box",function(){return r.span(".icon-lg.icon-add")}),r.input(".upload-background.js-upload-image",{type:"file",name:"file",multiple:"multiple",accept:"image/*"})})})})}},{}],722:[function(e,t,n){var r;r=e(517)("board_closed"),t.exports=r.renderable(function(e){var t,n,i,o;return o=e.name,i=e.deleting,n=e.canReopen,t=e.canDelete,r.div(".big-message.quiet",function(){return r.h1(function(){return r.format("name-is-closed",{name:o})}),i?r.format("deleting"):(n&&r.p(function(){return r.a(".js-reopen",{href:"#"},function(){return r.format("reopen")})}),t&&r.p({style:"margin-top: 64px"},function(){return r.a(".quiet.js-delete",{href:"#"},function(){return r.format("permanently-delete-board")})}),n||t?void 0:r.p(function(){return r.format("you-re-a-member-of-this-board-but-only-board-admins-are-able-to-re-open-it")}))})})},{}],723:[function(e,t,n){var r;r=e(517)("board_desc"),t.exports=function(){return r.div(".window-header.u-clearfix",function(){return r.span(".window-header-icon.icon-lg.icon-board"),r.div({class:"window-title non-empty u-inline "+r.mustacheBlock("__own",function(){return" editable "})+" ",attr:"name"},function(){return r.h2(".window-title-text.current.hide-on-edit",function(){return r.text(r.mustacheVar("name"))}),r.mustacheBlock("__own",function(){return r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})}),r.div(".edit.edit-heavy",function(){return r.textarea(".field.single-line",{type:"text"})})})})}),r.div(".window-main-col.window-main-col-full",function(){return r.div({class:"board-description u-clearfix"+r.mustacheBlock("__ed",function(){return" editable"}),attr:"desc"},function(){return r.div(".current.markeddown.hide-on-edit.u-bottom",function(){return r.mustacheBlockInverted("hasDesc",function(){return r.p(".u-bottom",function(){return r.mustacheBlock("__ed",function(){return r.a(".quiet.empty",{style:"padding: 100px 0;",href:"#"},function(){return r.format("no-description-click-to-edit")})}),r.mustacheBlockInverted("__ed",function(){return r.span(".quiet.empty",{style:"padding: 100px 0;"},function(){return r.format("no-description")})})})})}),r.mustacheBlock("__ed",function(){return r.mustacheBlock("hasDesc",function(){return r.p(".u-bottom.js-edit-desc",function(){return r.a(".quiet-button.mod-with-image.hide-on-edit",{href:"#"},function(){return r.icon("edit","edit-the-board-description",{class:"quiet-button-icon"})})})}),r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})}),r.div(".board-description-edit.edit",function(){return r.p(".helper",function(){return r.format("markdown-accepted")}),r.textarea(".field")})})})})}},{}],724:[function(e,t,n){var r;r=e(517)("board_header"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d;return t=e.canRename,c=e.orgLogoUrl,l=e.orgLogoUrl2x,o=e.hasBusinessClass,u=e.orgDisplayName,a=e.name,d=e.orgName,s=e.isLoggedIn,n={"board-header-btn":!0,"board-header-btn-name":!0,"js-rename-board":t,"no-edit":!t,"board-header-btn-name-with-org-logo":c},i={"board-header-btn":!0,"board-header-btn-org-name":!0,"js-open-org-menu":!0,"board-header-btn-without-icon":!o},r.a({href:"#",class:r.classify(n)},function(){return c&&r.img({class:"board-header-btn-name-org-logo",src:c,srcSet:c+" 1x, "+l+" 2x"}),r.span(".board-header-btn-text",{dir:"auto"},function(){return r.text(a)})}),u&&r.a({href:"/"+d,class:r.classify(i)},function(){return o&&r.icon("business-class",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text",function(){return r.text(u)})}),r.div(".board-header-btns.mod-left",function(){return s&&r.a(".board-header-btn.js-star-board",{href:"#",title:r.l("click-to-star-or-unstar-this-board-starred-boards-show-up-at-the-top-of-your-boards-list"),"aria-label":r.l("star-or-unstar-board")},function(){return r.icon("star",{class:"board-header-btn-icon"})}),r.a(".board-header-btn.hide.js-open-desc.js-fill-desc",{href:"#"},function(){return r.icon("description",{class:"board-header-btn-icon"})}),r.a(".board-header-btn.perms-btn.js-change-vis",{href:"#",id:"permission-level"}),r.a(".board-header-btn.hide.js-collection",{href:"#"},function(){return r.img(".board-header-btn-icon.icon-sm.collection-icon-img.dark-icon",{src:"https://a.trellocdn.com/images/collections/9dc0b9b8f7804172b734bbdc3ea7c382/collections-black.svg"}),r.img(".board-header-btn-icon.icon-sm.collection-icon-img.light-icon",{src:"https://a.trellocdn.com/images/collections/0e197fd2ec35638b8d79e7eee235497c/collections.svg"})})}),r.div(".board-header-btns.mod-right",function(){return r.a(".board-header-btn.board-header-btn-filter-indicator.hide.js-filter-cards-indicator",{href:"#"},function(){return r.icon("filter",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("filtering-is-on")}),r.icon("close",{class:"board-header-btn-icon-close js-filter-card-clear"})}),r.a(".board-header-btn.sub-btn.hide.js-board-header-subscribed",{href:"#"},function(){return r.icon("subscribe",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("subscribed")})}),r.a(".board-header-btn.calendar-btn.hide.js-calendar",{href:"#"},function(){return r.icon("calendar",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("calendar")})}),r.span(".js-plugin-header-btns"),r.a(".board-header-btn.mod-show-menu.js-show-sidebar",{href:"#"},function(){return r.icon("overflow-menu-horizontal",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("show-menu")})})})})},{}],725:[function(e,t,n){var r;r=e(517)("board_header_permissions"),t.exports=r.renderable(function(e){var t,n,i;return n=e.permIconClass,i=e.permText,r.span({class:r.classify((t={"board-header-btn-icon":!0,"icon-sm":!0},t["icon-"+n]=!0,t))}),r.span(".board-header-btn-text",function(){return r.text(i)})})},{}],726:[function(e,t,n){var r;r=e(517)("board_header_warnings"),t.exports=r.renderable(function(e){var t,n,i,o;return t=e.canDismiss,o=e.warning,i=o.key,n=o.dismiss,r.div(".board-warning",function(){return r.format(i),t?r.span(".js-dismiss-warning.board-warning-close.icon-sm.icon-close",{"data-dismiss":n}):void 0})})},{}],727:[function(e,t,n){var r;r=e(517)("board_member_profile"),t.exports=function(){return r.div(".window-header.u-clearfix",function(){return r.span(".window-header-icon.icon-lg.icon-activity"),r.h2(".window-title",function(){return r.text(r.mustacheVar("fullName")),r.span(".quiet",{style:"margin-left: 3px"},function(){return r.format("username",{username:r.mustacheVar("username")})})})}),r.div(".window-main-col.window-main-col-full",function(){return r.div(".list-actions",function(){return r.p(".js-board-member-profile-no-activity",function(){return r.format("this-member-has-no-board-activity")})}),r.a(".show-more.js-more-actions",{href:"#"},function(){return r.format("load-more-activity")})})}},{}],728:[function(e,t,n){var r;r=e(517)("board_menu_activity"),t.exports=function(){return r.div(".segmented-control",function(e){return function(){return r.a(".segmented-control-item.js-show-all.js-control-option",{href:"#"},function(){return r.format("all")}),r.a(".segmented-control-item.js-show-comments.js-control-option",{href:"#"},function(){return r.format("comments")})}}(this)),r.div(".phenom-list.js-list-activity"),r.a(".show-more.js-more-actions",{href:"#"},function(e){return function(){return r.format("load-more-activity")}}(this))}},{}],729:[function(e,t,n){var r;r=e(517)("board_menu_commenting"),t.exports=function(){return r.li(function(){return r.a(".js-select",{href:"#",name:"disabled"},function(){return r.check(r.mustacheVar("comments_disabled"),"disabled"),r.span(".sub-name",function(){return r.format("no-one-is-allowed-to-comment")})})}),r.li(function(){return r.a(".js-select",{href:"#",name:"members"},function(){return r.check(r.mustacheVar("comments_members"),"members"),r.span(".sub-name",function(){return r.format("allow-admins-and-normal-members-to-comment")})})}),r.li(function(){return r.a({href:"#",class:"js-select"+r.mustacheBlockInverted("comments_showObservers",function(){return" disabled"}),name:"observers"},function(){return r.check(r.mustacheVar("comments_observers"),"members-and-observers"),r.span(".sub-name",function(){return r.format("allow-admins-normal-members-and-observers-to-comment")})})}),r.li(function(){return r.a({href:"#",class:"js-select"+r.mustacheBlockInverted("orgCanSee",function(){return" disabled"}),name:"org"},function(){return r.check(r.mustacheVar("comments_org"),"organization-members"),r.span(".sub-name",function(){return r.format("allow-admins-normal-members-observers-and-organization-members-to-comment")})})}),r.li(function(){return r.a({href:"#",class:"js-select"+r.mustacheBlockInverted("permissionLevel_public",function(){return" disabled"}),name:"public"},function(){return r.check(r.mustacheVar("comments_public"),"public-members"),r.span(".sub-name",function(){return r.format("allow-any-trello-member-to-comment")})})})}},{}],730:[function(e,t,n){var r;r=e(517)("board_menu_default"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d,p,h,m,f,g,v;for(n=e.canAssign,s=e.canInviteMembers,a=e.canJoin,v=e.selfJoin,i=e.canChangeBackground,o=e.canEnablePowerUps,u=e.hasBCPowerUps,c=e.hasGoldPowerUps,t=e.addMembersLabelKey,m=e.powerUpsExplanationText,r.p(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},function(){return r.format("file-too-large-10mb-limit")}),g=[{key:"members",jsClass:"js-list-members"},{key:"team-members",jsClass:"js-list-team-members"},{key:"invited-members",jsClass:"js-list-invited-members"},{key:"non-team-members",jsClass:"js-list-non-team-members"},{key:"observers",jsClass:"js-list-observers"},{key:"deactivated-members",jsClass:"js-deactivated-members"}],l=0,h=g.length;h>l;l++)f=g[l],p=f.key,d=f.jsClass,r.div(".board-menu-member-section."+d,function(){
return r.div(".board-menu-member-section-header.js-heading",function(){return r.format(p)}),r.div(".u-clearfix.js-list",{class:r.classify({"js-list-draggable-board-members":n})})});return r.div(".board-members-extras-button.u-clearfix.js-show-extra-members-button",function(){return r.a(".quiet-button.js-show-extra-members",{href:"#"},function(){return r.format("show-hidden-members")})}),r.div(".board-members-extras-button.u-clearfix.js-hide-extra-members-button",function(){return r.a(".quiet-button.js-hide-extra-members",{href:"#"},function(){return r.format("show-fewer-members")})}),s&&r.a(".button-link.mod-full.js-open-manage-board-members",{href:"#"},function(){return r.icon("add-member",t)}),a&&(r.a(".button-link.js-join-board",{href:"#",style:"margin-bottom: 0;"},function(){return r.icon("add-member","join-board")}),v&&r.p(".helper",{style:"margin-top: 8px;"},function(){return r.format("org-members-can-join-this-board")})),r.hr(),r.ul(".board-menu-navigation",function(){return i&&r.li(".board-menu-navigation-item.mod-background",function(){return r.a(".board-menu-navigation-item-link.js-change-background",{href:"#"},function(){return r.span(".board-menu-navigation-item-link-icon.js-fill-background-preview"),r.raw("&nbsp;"),r.format("change-background")})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-card-filter",{href:"#"},function(){return r.icon("filter","filter-cards",{class:"board-menu-navigation-item-link-icon"})})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-stickers",{href:"#"},function(){return r.icon("sticker","stickers",{class:"board-menu-navigation-item-link-icon"})})}),o&&r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-power-ups",{href:"#"},function(){return r.icon("power-up","power-ups",{class:"board-menu-navigation-item-link-icon"}),r.raw("&nbsp;"),u?r.icon("business-class",{class:"icon-business-class-color"}):c&&r.icon("trello-gold",{class:"icon-trello-gold-color"}),r.span(".board-menu-navigation-item-link-count.js-enabled-power-up-count"),r.span(".board-menu-navigation-item-new.js-power-up-new",function(){return r.format("new")}),r.span(".board-menu-navigation-item-link-warning.js-power-up-disable-timer"),null!=m?r.div(".board-menu-navigation-item-link-summary",function(){return r.raw("&nbsp;"),r.raw(m)}):void 0})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-more",{href:"#"},function(){return r.icon("overflow-menu-horizontal","more",{class:"board-menu-navigation-item-link-icon"})})})}),r.hr(),r.a(".board-menu-section-header.js-open-activity",{href:"#"},function(){return r.span(".board-menu-section-header-icon.icon-lg.icon-activity"),r.span(".board-menu-section-header-title",function(){return r.format("activity")}),r.span(".board-menu-section-header-count.js-unread-activity-count")}),r.div(".js-menu-action-list"),r.a(".show-more.js-fill-activity-button.js-open-activity",{href:"#"})})},{}],731:[function(e,t,n){var r;r=e(517)("board_menu_email"),t.exports=r.renderable(function(e){var t,n,i,o,s,a;return t=e.commentsEnabled,n=e.email,i=e.listName,o=e.lists,s=e.position,a=e.positionName,t?(r.label({for:"boardEmail"},function(){return r.format("your-email-address-for-this-board")}),r.input(".non-empty.js-autofocus",{id:"boardEmail",type:"text",name:"boardEmail",readonly:"readonly",placeholder:r.l("loading-ellipsis"),value:n,style:"margin: 4px 0 8px;"}),r.a(".quiet-button.js-generate-address",{href:"#"},function(){return r.format("generate-a-new-email-address")}),r.a(".quiet-button.js-send-address",{href:"#"},function(){return r.format("email-me-this-address")}),r.hr(),r.label(function(){return r.format("your-emailed-cards-appear-in-ellipsis")}),r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-twothirds",function(){return r.span(".label",function(){return r.format("list")}),r.span(".value.js-list-value",function(){return r.text(i)}),r.label(function(){return r.format("list")}),r.select(".js-select-list",function(){var e,t,n,i,s,a,u;for(a=[],e=0,n=o.length;n>e;e++)s=o[e],t=s.id,i=s.name,u=s.selected,a.push(r.optionSelected(u,{value:t},function(){return r.text(i)}));return a})}),r.div(".button-link.setting.form-grid-child.form-grid-child-third",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value",function(){return r.text(a)}),r.label(function(){return r.format("position")}),r.select(".js-select-position",function(){return r.optionSelected("top"===s,{value:"top"},function(){return r.format("top")}),r.optionSelected("bottom"===s,{value:"bottom"},function(){return r.format("bottom")})})})}),r.hr(),r.p(".u-bottom.quiet",function(){return r.format("tip-dont-share-this-email-address-anyone-who-has-it-can-add-cards-as-you-when-composing-emails-the-card-title-goes-in-the-subject-and-the-card-description-in-the-body-more-email-formatting-tips")})):(r.p(function(){return r.format("requires-comments-enabled")}),void r.p(function(){return r.format("enabled-by-enabling-comments")}))})},{}],732:[function(e,t,n){var r;r=e(517)("board_menu_invitations"),t.exports=function(){return r.li(function(){return r.a(".js-select",{href:"#",name:"admins"},function(){return r.check(r.mustacheVar("invitations_admins"),"admins"),r.span(".sub-name",function(){return r.format("allow-only-admins-to-add-and-remove-others")})})}),r.li(function(){return r.a(".js-select",{href:"#",name:"members"},function(){return r.check(r.mustacheVar("invitations_members"),"all-members"),r.span(".sub-name",function(){return r.format("allow-members-and-admins-to-add-and-remove-others")})})})}},{}],733:[function(e,t,n){var r;r=e(517)("board_menu_more"),t.exports=function(){return r.ul(".board-menu-navigation",function(){return r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-settings",{href:"#"},function(){return r.icon("gear","settings",{class:"board-menu-navigation-item-link-icon"})})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-labels",{href:"#"},function(){return r.icon("label","labels",{class:"board-menu-navigation-item-link-icon"})})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-collections",{href:"#"},function(){return r.img(".board-menu-navigation-item-link-icon.collection-icon-img",{src:"https://a.trellocdn.com/images/collections/5ebebc0a66b74d9246ce03c8c59b3a61/collections-grey.svg"}),r.raw("&nbsp;"),r.format("collections")})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-archive",{href:"#"},function(){return r.icon("archive","archived-items",{class:"board-menu-navigation-item-link-icon"})})})}),r.hr(),r.ul(".board-menu-navigation",function(){return r.mustacheBlock("editableByMember",function(){return r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-email",{href:"#"},function(){return r.icon("email","email-to-board-settings",{class:"board-menu-navigation-item-link-icon"})})})}),r.mustacheBlock("__loggedIn",function(){return r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-board-subscribe",{href:"#"},function(){return r.icon("subscribe",{class:"board-menu-navigation-item-link-icon"}),r.raw("&nbsp;"),r.span(".js-subscribed-state")})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-copy-board",{href:"#"},function(){return r.icon("board","copy-board",{class:"board-menu-navigation-item-link-icon"})})})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-share",{href:"#"},function(){return r.icon("share","print-and-export",{class:"board-menu-navigation-item-link-icon"})})})}),r.mustacheBlock("canCloseOrLeave",function(){return r.hr(),r.ul(".board-menu-navigation",function(){return r.mustacheBlock("canCloseBoard",function(){return r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-close-board",{href:"#"},function(){return r.raw("&nbsp;"),r.format("close-board-ellipsis")})})}),r.mustacheBlock("canLeaveBoard",function(){return r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-leave-board",{href:"#"},function(){return r.raw("&nbsp;"),r.format("leave-board-ellipsis")})})})})}),r.hr(),r.form(".u-gutter",function(){return r.label({for:"id-short-url"},function(){return r.format("link-to-this-board")}),r.input(".js-short-url",{type:"text",readonly:"readonly",id:"id-short-url",value:r.mustacheVar("shortUrl")}),r.p(".quiet",function(){return r.span({class:"icon-sm icon-"+r.mustacheVar("pLevelClass"),title:r.mustacheVar("pLevelAltText")}),r.text(r.mustacheVar("helperText"))})})}},{}],734:[function(e,t,n){var r;r=e(517)("board_menu_more_activity_button"),t.exports=function(){return r.mustacheBlockInverted("hasCount",function(e){return function(){return r.format("view-all-activity-ellipsis")}}(this)),r.mustacheBlock("hasCount",function(e){return function(){return r.format("view-all-unread-activity-count-ellipsis",{count:r.mustacheVar("count")})}}(this))}},{}],735:[function(e,t,n){var r;r=e(517)("board_menu_settings"),t.exports=function(){return r.ul(".pop-over-list.inset",function(e){return function(){return r.li(function(){return r.a({class:"js-change-org"+r.mustacheBlockInverted("canChangeOrg",function(){return" disabled"}),href:"#"},function(){return r.mustacheBlock("setOrgNull",function(){return r.format("remove-from-organization")}),r.mustacheBlockInverted("setOrgNull",function(){return r.format("change-organization-ellipsis")}),r.mustacheBlock("orgDisplayName",function(){return r.span(".sub-name",function(){return r.text(r.mustacheVar("orgDisplayName"))})})})}),r.hr(),r.li(function(){return r.a({class:r.mustacheBlock("__own",function(){return"js-toggle-covers"})+r.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return r.mustacheBlockInverted("cardCovers",function(){return r.format("enable-card-cover-images")}),r.mustacheBlock("cardCovers",function(){return r.format("card-cover-images-enabled"),r.icon("check")}),r.span(".sub-name",function(){return r.format("show-images-on-front-of-cards")})})}),r.hr(),r.li(function(){return r.a({class:r.mustacheBlock("__own",function(){return"js-change-comments"})+r.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return r.format("commenting-permissions-ellipsis-commentsdisplay",{commentsDisplay:r.mustacheVar("commentsDisplay")})})}),r.li(function(){return r.a({class:r.mustacheBlock("__own",function(){return"js-change-add-members"})+r.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return r.format("invitations-permissions-ellipsis-invitationsdisplay",{invitationsDisplay:r.mustacheVar("invitationsDisplay")})})}),r.hr(),r.li(function(){return r.a({class:" "+r.mustacheBlock("__own",function(){return" js-toggle-org-mem-join "})+" "+r.mustacheBlockInverted("__own",function(){return" disabled "})+" "+r.mustacheBlockInverted("hasOrg",function(){return" disabled "})+" "+r.mustacheBlock("permissionLevel_private",function(){return" disabled "})+" ",href:"#"},function(){return r.check(r.mustacheVar("selfJoin_true"),"allow-org-members-to-join"),r.span(".sub-name",function(){return r.mustacheBlock("hasOrg",function(){return r.mustacheBlock("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-cant-be-private")})}),r.mustacheBlock("hasOrg",function(){return r.mustacheBlockInverted("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited")})}),r.mustacheBlockInverted("hasOrg",function(){return r.mustacheBlock("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org-and-the-board-cant-be-private")})}),r.mustacheBlockInverted("hasOrg",function(){return r.mustacheBlockInverted("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org")})})})})})}}(this))}},{}],736:[function(e,t,n){var r;r=e(517)("board_menu_subscribed_state"),t.exports=function(){return r.check(r.mustacheVar("subscribed"),"subscribe")}},{}],737:[function(e,t,n){var r;r=e(517)("board_menu_vis"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d,p,h,m,f,g,v,b,y;n=e.current,u=e.isNewBoard,t=e.canChange,c=e.mustChange,o=e.hasSuperAdmins,i=e.hasOrg,d=e.orgName,f=e.privateRestricted,p=e.orgRestricted,g=e.publicRestricted,c&&d&&r.p(".quiet",function(){return r.format("illegal org visibility",{orgName:d})}),l=o?"with super admins":i?"with organization":"without organization",m={private:{iconClass:"icon-private",restricted:f},org:{iconClass:"icon-organization",restricted:p,invalid:u&&!i},public:{iconClass:"icon-public",restricted:g}},y=[];for(h in m)v=m[h],b=v.restricted,a=v.invalid,s=v.iconClass,y.push(r.li(function(){var e;return e=b||a||!t,r.a(".js-select",{class:r.classify({"light-hover":!e,disabled:e}),href:"#",name:h},function(){return r.span(".icon-sm.vis-icon",{class:s},function(){}),r.check(n===h,h),r.span(".sub-name",function(){var e;return e=null!=d?{orgName:d}:{},r.format(["permission subtext",l,h],e),t&&b?(r.raw(" "),r.span(".error",function(){return u?r.format(["illegal visibility","create"]):r.format(["illegal visibility","change"])})):void 0})})}));return y})},{}],738:[function(e,t,n){var r;r=e(517)("board_new"),t.exports=function(){return r.form(function(){return r.label({for:"boardNewTitle"},function(){return r.format("title")}),r.input(".non-empty.js-autofocus",{id:"boardNewTitle",type:"text",name:"name",placeholder:r.mustacheVar("placeholder"),value:r.mustacheVar("name"),dir:"auto"}),r.div({class:r.mustacheBlock("hideOrg",function(){return"hide"})},function(){return r.div(".u-clearfix",function(){return r.label(".u-float-left",{style:"margin-right: 8px;"},function(){return r.format("organization")}),r.mustacheBlock("canAddToOrgs",function(){return r.a(".icon-sm.icon-information.dark-hover.js-helper-add-org",{href:"#"})})}),r.mustacheBlockInverted("canAddToOrgs",function(){return r.p(".quiet",{style:"margin-bottom: 16px;"},function(){return r.format("organization-whisk-n-tsk"),r.text(" "),r.a(".js-create-org",{href:"#"},function(){return r.format("create-an-organization")})})}),r.select({name:"org-id",class:r.mustacheBlockInverted("canAddToOrgs",function(){return"hide"})},function(){return r.option({value:""},function(){return r.format("none")}),r.mustacheBlock("orgs",function(){return r.optionSelected(r.mustacheVar("selectOrg"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("displayName"))})})})}),r.input({type:"hidden",name:"permissionLevel",value:r.mustacheVar("pLevel")}),r.p(".quiet.js-vis-display"),r.ul(".pop-over-list.js-vis-chooser.hide"),r.p(".error.u-bottom.js-no-valid-org-privs.u-clearfix.hide"),r.mustacheBlock("isCopyBoard",function(){return r.div(".check-div.u-clearfix",{style:"margin-top: 10px;"},function(){return r.input({type:"checkbox",id:"idKeepCards",name:"cards",checked:!0}),r.label({for:"idKeepCards"},function(){return r.format("keep-cards")})}),r.p(".quiet",function(){return r.format("activity-and-members-will-not-be-copied")}),r.mustacheBlock("willRemovePowerUps",function(){return r.p(".quiet",function(){return r.format("power-ups-will-not-be-copied")})})}),r.input(".primary.wide.js-submit.disabled",{type:"submit",value:r.l("create")})})}},{}],739:[function(e,t,n){var r;r=e(517)("board_new_vis"),t.exports=function(){return r.format("this-board-will-be-visdisplaytext",{visIconClass:r.mustacheVar("visIconClass"),visDisplayText:r.mustacheVar("visDisplayText")}),r.text(" "),r.a(".js-change-vis",{href:"#"},function(){return r.format("change")})}},{}],740:[function(e,t,n){var r;r=e(517)("board_observer_count"),t.exports=function(){return r.a(".quiet-button.js-show-observers",{href:"#",style:"margin: 4px 0 0;"},function(){return r.text(r.mustacheVar("localizedObserverCount"))})}},{}],741:[function(e,t,n){var r;r=e(517)("board_sidebar"),t.exports=function(){return r.div(".board-menu-header.js-board-menu-title",function(){return r.a(".board-menu-header-back-button.icon-lg.icon-back.js-pop-widget-view",{href:"#",title:r.l("go-back")}),r.h3(".board-menu-header-title.js-board-menu-title-text"),r.a(".board-menu-header-close-button.icon-lg.icon-close.js-hide-sidebar",{href:"#",title:r.l("close-the-board-menu")}),r.hr(".board-menu-header-divider")}),r.div(".board-menu-content.u-fancy-scrollbar.js-board-menu-content-wrapper")}},{}],742:[function(e,t,n){var r;r=e(517)("boards_page_add_org_button"),t.exports=function(){return r.div(".boards-page-board-section.u-clearfix",function(){return r.a(".quiet-button.u-float-left.js-add-org-boards-page",{href:"#"},function(){return r.format("create-a-new-organization-ellipsis")})})}},{}],743:[function(e,t,n){var r;r=e(517)("boards_sidebar"),t.exports=r.renderable(function(){return r.div(".boards-drawer-header",function(){return r.h3(function(){return r.format("boards")})}),r.div(".board-drawer-content.u-fancy-scrollbar",function(){return r.input(".js-search-boards",{type:"text",placeholder:r.l("find-boards-by-name-ellipsis")}),r.div(".js-board-drawer-boards"),r.div(".js-board-drawer-buttons")})})},{}],744:[function(e,t,n){var r;r=e(517)("boards_sidebar"),t.exports=r.renderable(function(){return r.p(".quiet.u-text-align-center.hide",{style:"margin: 6px 4px 0 0; padding: 8px 12px;"},function(){return r.format("no-boards")}),r.div(".starred-sidebar-boards-list.js-starred-boards"),r.div(".js-recent-boards"),r.div(".js-all-boards")})},{}],745:[function(e,t,n){var r;r=e(517)("boards_sidebar"),t.exports=r.renderable(function(){return r.a(".quiet-button.js-add-board",{href:"#"},function(){return r.format("create-new-board-ellipsis")}),r.a(".quiet-button.hide.js-pin",{href:"#"},function(){return r.format("always-keep-this-menu-open")}),r.a(".quiet-button.hide.js-unpin",{href:"#"},function(){return r.format("don-t-keep-this-menu-open")}),r.a(".quiet-button.js-open-closed-boards",{href:"#"},function(){return r.format("see-closed-boards-ellipsis")})})},{}],746:[function(e,t,n){var r;r=e(517)("boards_sidebar"),t.exports=r.renderable(function(){return r.ul(".sidebar-boards-list.js-board-results")})},{}],747:[function(e,t,n){var r;r=e(517)("boards_sidebar"),t.exports=r.renderable(function(){return r.a(".quiet-button.js-add-board-with-name",{href:"#"})})},{}],748:[function(e,t,n){var r,i;i=e(517)("calendar_day"),r=function(){return i.div({class:"calendar-day js-expand-day "+i.mustacheBlock("isToday",function(){return"today"})},function(){return i.div(".day-header.u-clearfix.js-toggle-day",function(){return i.h3(".date",function(){return i.text(i.mustacheVar("date"))}),i.div(".quiet.num-cards",function(){return i.div(".day-cards-header")}),i.a(".close-button.icon-sm.icon-close.dark-hover",{href:"#"})}),i.div(".calendar-day-list.js-calendar-sortable.u-fancy-scrollbar"),i.mustacheBlock("__ed",function(){return i.a(".calendar-card-composer.quiet-button.js-open-card-composer",{href:"#"},function(){return i.format("add-a-card-ellipsis")})})})},t.exports=function(){return i.mustacheVar("monthView")?i.div(".calendar-day-spacer-div",r):r()}},{}],749:[function(e,t,n){var r;r=e(517)("calendar_day_list_header"),t.exports=function(){return r.span(".calendar-list-header",{name:r.mustacheVar("listID")},function(){return r.icon("list"),r.text(" "),r.text(r.mustacheVar("listName"))})}},{}],750:[function(e,t,n){var r;r=e(517)("calendar_month"),t.exports=function(){return r.table(".calendar-table")}},{}],751:[function(e,t,n){var r;r=e(517)("calendar_toolbar"),t.exports=function(){return r.div(".calendar-header",function(){return r.div(".calendar-header-toolbar",function(){return r.h2(".calendar-header-toolbar-title.js-calendar-header"),r.div(".calendar-header-toolbar-today",function(){return r.a(".button-link.today-button.js-today",{href:"#"},function(){return r.format("today")})}),r.div(".calendar-header-toolbar-nav",function(){return r.a(".button-link.js-left-arrow.left-arrow",{href:"#"},function(){return r.icon("up")}),r.a(".button-link.js-right-arrow.right-arrow",{href:"#"},function(){return r.icon("down")})}),r.div(".calendar-header-toolbar-close",function(){return r.a(".icon-lg.icon-close.dark-hover.js-close-calendar",{href:"#"})}),r.div(".calendar-header-toolbar-type",function(){return r.a(".button-link.js-week-view.week-button",{href:"#"},function(){return r.format("week")}),r.a(".button-link.js-month-view.month-button",{href:"#"},function(){return r.format("month")})})}),r.div(".days-of-week",function(){return r.mustacheBlock("days",function(){return r.div(".quiet",function(){return r.text(r.mustacheVar("."))})})})}),r.div(".calendar-content")}},{}],752:[function(e,t,n){var r;r=e(517)("calendar_week"),t.exports=function(){return r.div(".week-horizontal-canvas")}},{}],753:[function(e,t,n){var r;r=e(517)("cant_add_board_to_org"),t.exports=function(){return r.p(".quiet",function(){return r.mustacheBlock("isOrgAdmin",function(){return r.format("organization-displayname-does-not-allow-new-boards-you-can-change-this-on-the-organization-settings-page-by-clicking-on-board-creation-restrictions",{"organization.displayName":r.mustacheVar("organization.displayName"),orgSettingsUrl:r.mustacheVar("orgSettingsUrl")})}),r.mustacheBlockInverted("isOrgAdmin",function(){return r.format("organization-displayname-does-not-allow-new-boards-only-an-admin-of-the-organization-can-change-this-setting",{"organization.displayName":r.mustacheVar("organization.displayName")})})})}},{}],754:[function(e,t,n){var r;r=e(517)("card_attach_links"),t.exports=r.renderable(function(e){return r.div(".card-attach-link-list",function(){var t,n,i,o,s,a,u,c;for(a=[],i=0,o=e.length;o>i;i++)s=e[i],c=s.url,u=s.text,n=s.domain,t=s.attached,a.push(r.div(".card-attach-link-list-item",{class:r.classify({attached:t})},function(){return r.div(".card-attach-link-list-item-title",function(){return u?r.text(u):r.format("link to domain",{domain:n})}),r.div(".card-attach-link-list-item-url.quiet",function(){return r.text(c)}),t?r.div(".card-attach-link-list-item-attached.quiet",function(){return r.span(".icon-lg.icon-check")}):r.button(".card-attach-link-list-item-attach.js-attach",{"data-url":c,"data-text":u},function(){return r.format("attach")})}));return a})})},{}],755:[function(e,t,n){var r;r=e(517)("card_composer_inline"),t.exports=function(){return r.div(".list-card.js-composer",function(){return r.div(".list-card-details.u-clearfix",function(){return r.div(".list-card-labels.u-clearfix.js-list-card-composer-labels"),r.textarea(".list-card-composer-textarea.js-card-title",{dir:"auto"},function(){return r.text(r.mustacheVar("title"))}),r.div(".list-card-members.js-list-card-composer-members")})}),r.div(".cc-controls.u-clearfix",function(){return r.div(".cc-controls-section",function(){return r.input(".primary.confirm.mod-compact.js-add-card",{type:"submit",value:r.l("add")}),r.a(".icon-lg.icon-close.dark-hover.js-cancel",{href:"#"})}),r.div(".cc-controls-section.mod-right",function(){return r.a(".icon-lg.icon-overflow-menu-horizontal.dark-background-hover.js-cc-menu",{href:"#"})})})}},{}],756:[function(e,t,n){var r;r=e(517)("card_copy"),t.exports=function(){return r.mustacheBlock("loading",function(){return r.div(".spinner.loading.js-loading-card-actions")}),r.mustacheBlockInverted("loading",function(){return r.form(function(){return r.label(function(){return r.format("title")}),r.textarea(".js-autofocus",{name:"name",style:"margin-bottom: 12px;"},function(){return r.text(r.mustacheVar("name"))}),r.mustacheBlock("hasStuff",function(){return r.p({style:"margin-bottom: 4px;"},function(){return r.strong(function(){return r.format("keep-ellipsis")})}),r.mustacheBlock("hasChecklists",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepChecklists",type:"checkbox",name:"checklists",checked:!0}),r.label({for:"idKeepChecklists"},function(){return r.format("checklists-numchecklists",{numChecklists:r.mustacheVar("numChecklists")})})})}),r.mustacheBlock("hasLabels",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepLabels",type:"checkbox",name:"labels",checked:!0}),r.label({for:"idKeepLabels"},function(){return r.format("labels-numlabels",{numLabels:r.mustacheVar("numLabels")})})})}),r.mustacheBlock("hasMembers",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepMembers",type:"checkbox",name:"members",checked:!0}),r.label({for:"idKeepMembers"},function(){return r.format("members-nummembers",{numMembers:r.mustacheVar("numMembers")})})})}),r.mustacheBlock("hasAttachments",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepAttachments",type:"checkbox",name:"attachments",checked:!0}),r.label({for:"idKeepAttachments"},function(){return r.format("attachments-numattachments",{numAttachments:r.mustacheVar("numAttachments")})})})}),r.mustacheBlock("hasComments",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepComments",type:"checkbox",name:"comments",checked:!0}),r.label({for:"idKeepComments"},function(){return r.format("comments-numcomments",{numComments:r.mustacheVar("numComments")})})})}),r.mustacheBlock("hasStickers",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepStickers",type:"checkbox",name:"stickers",checked:!0}),r.label({for:"idKeepStickers"},function(){return r.format("stickers-numstickers",{numStickers:r.mustacheVar("numStickers")})})})})}),r.br(),r.label(function(){return r.format("copy-to-ellipsis")}),r.mustachePartial("move_card_controls"),r.input(".primary.wide.js-submit",{type:"submit",value:r.l("create-card")})})})}},{}],757:[function(e,t,n){var r,i,o,s;s=e(517)("card_detail"),r=e(772),i=e(833),o=e(85),t.exports=s.renderable(function(e){var t,n,o,a,u,c,l,d;return a=e.editable,l=e.name,t=e.canComment,c=e.me,u=e.loading,d=e.showActions,n=e.canSubscribe,o=e.canToggleDetails,s.div(".window-cover.hide.js-card-cover-box.js-open-card-cover-in-viewer",function(){return s.div(".window-cover-stickers.js-display-stickers")}),s.div(".window-archive-banner.hide.js-archive-banner",function(){return s.span(".icon-lg.icon-archive.window-archive-banner-icon"),s.p(".window-archive-banner-text",function(){return s.format("this-card-is-archived")})}),s.div(".window-archive-banner.hide.js-archived-list-banner",function(){return s.span(".icon-lg.icon-archive.window-archive-banner-icon"),s.p(".window-archive-banner-text",function(){return s.format("this-card-is-in-an-archived-list")})}),s.div(".window-header",function(){var e;return s.span(".window-header-icon.icon-lg.icon-card"),e={"window-title":!0},s.div({class:s.classify(e)},function(){var e;return s.h2(".card-detail-title-assist.js-title-helper",{dir:"auto"}),e={"mod-card-back-title":!0,"js-card-detail-title-input":!0},s.textarea({class:s.classify(e),disabled:!a,dir:"auto"})}),s.div(".window-header-inline-content.hide.quiet.js-current-list"),s.div(".window-header-inline-content.hide.js-subscribed-indicator-header",function(){return s.icon("subscribe")})}),s.div(".window-main-col",function(){return s.div(".card-detail-data.u-gutter",function(){return s.div(".card-detail-item.u-clearfix.hide.js-card-detail-members",function(){return s.h3(".card-detail-item-header",function(){return s.format("members")}),s.div(".js-card-detail-members-list")}),s.div(".card-detail-item.card-detail-item-labels.u-clearfix.hide.js-card-detail-labels",function(){return s.h3(".card-detail-item-header",function(){return s.format("labels")}),s.div(".u-clearfix.js-card-detail-labels-list")}),s.div(".card-detail-item.hide.js-card-detail-due-date",function(){return s.h3(".card-detail-item-header",function(){return s.format("due-date")}),s.span(".card-detail-badge.card-detail-due-date-badge.js-card-detail-due-date-badge",function(){return s.span(".card-detail-badge-due-date-complete-box.js-card-detail-due-date-badge-complete",function(){return s.span(".icon-sm.icon-check.card-detail-badge-due-date-complete-icon")}),s.text(" "),s.span(".js-date-text.card-detail-due-date-text")})}),s.div(".card-detail-item.hide.js-card-detail-votes",function(){return s.h3(".card-detail-item-header",function(){return s.format("votes")}),s.a(".card-detail-badge.is-clickable.js-card-detail-votes-badge.js-show-votes",{href:"#"})}),s.div(".card-detail-item.hide.js-card-detail-age",function(){return s.h3(".card-detail-item-header",function(){return s.format("last-updated")}),s.div(".card-detail-badge.date.mod-last-updated.js-card-detail-age-badge")}),s.div(".js-plugin-badges"),s.div({class:s.classify({"card-detail-item":!0,"card-detail-item-block":!0,"u-clearfix":!0,editable:a}),attr:"desc"},function(){return s.h3(".card-detail-item-header.hide.js-show-with-desc",function(){return s.format("description")}),a&&s.a(".card-detail-item-header-edit.hide-on-edit.js-show-with-desc.js-edit-desc",{href:"#"},function(){return s.format("edit")}),s.div(".description-content.js-desc-content",function(){return s.div(".description-content-fade-button",function(){return s.span(".description-content-fade-button-text",function(){return s.format("show-full-description")})}),s.div(".current.markeddown.hide-on-edit.js-card-desc.js-show-with-desc.hide",{dir:"auto"}),a?(s.p(".u-bottom",function(){return s.a(".quiet-button.mod-with-image.hide-on-edit.js-edit-desc.js-hide-with-desc",{href:"#"},function(){return s.icon("description","edit-the-description-ellipsis",{class:"quiet-button-icon"})})}),s.div(".card-detail-edit.edit",function(){return s.a(".helper.js-format-help",{href:"#"},function(){return s.format("formatting-help")}),s.textarea(".field",{placeholder:s.l("add-a-more-detailed-description")})}),s.p(".edits-warning.quiet",function(){return s.format("you-have-unsaved-edits-on-this-field"),s.text(" "),s.a(".js-view-edits",{href:"#"},function(){return s.format("view-edits")}),s.text(" - "),s.a(".js-discard-edits",{href:"#"},function(){return s.format("discard")})}),s.p(".edits-error.error",function(){return s.format("edit-not-saved")})):void 0})})}),s.div(".js-plugin-sections"),s.div(".window-module.js-attachments-section.u-clearfix.hide",function(){return s.div(".window-module-title.window-module-title-no-divider",function(){return s.span(".window-module-title-icon.icon-lg.icon-attachment"),s.h3(".u-inline-block",function(){return s.format("attachments")})}),s.div(".u-gutter",function(){return s.div(".u-clearfix.js-attachment-list"),s.p(".js-show-fewer-attachments.hide",function(){return s.a(".quiet-button.js-view-some-attachments",{href:"#"},function(){return s.format("show-fewer-attachments")})}),s.p(".js-show-more-attachments.hide",function(){return s.a(".quiet-button.js-view-all-attachments",{href:"#"})}),a?s.p(function(){return s.a(".quiet-button.js-attach",{href:"#"},function(){return s.format("add-an-attachment-ellipsis")})}):void 0})}),s.div(".checklist-list.window-module.js-checklist-list.js-no-higher-edits"),t&&s.div(".window-module.add-comment-section",function(){return s.div(".window-module-title.window-module-title-no-divider",function(){return s.span(".window-module-title-icon.icon-lg.icon-comment"),s.h3(function(){return s.format("add-comment")}),s.span(".editing-members.js-editing-members.hide")}),s.div(".new-comment.js-new-comment",function(){return c&&s.div(".member.member-no-menu",function(){return i(c)}),s.form(function(){return s.div(".comment-frame",function(){return s.div(".comment-box",function(){return s.textarea(".comment-box-input.js-new-comment-input",{
placeholder:s.l("write-a-comment-ellipsis"),tabindex:"1",dir:"auto"}),r(a)})}),s.div(".comment-controls.u-clearfix",function(){return s.input(".primary.confirm.mod-no-top-bottom-margin.js-add-comment",{disabled:"disabled",tabindex:"3",type:"submit",value:s.l("save")})})}),s.div(".comment-too-long-warning",function(){return s.p(function(){return s.format("your-comment-is-too-long-you-can-add-it-as-a-text-attachment-or-truncate-it")}),s.input(".primary.js-attach-comment",{type:"submit",value:s.l("add-as-an-attachment"),tabindex:4}),s.input(".js-truncate-comment",{type:"submit",value:s.l("truncate"),tabindex:5})})})}),s.div(".window-module",function(){return s.div(".window-module-title.window-module-title-no-divider",function(){return s.span(".window-module-title-icon.icon-lg.icon-activity"),s.h3(function(){return s.format("activity")}),o?s.div(".window-module-title-options",function(){return s.a(".quiet.hide.js-show-details",{href:"#"},function(){return s.format("show-details")}),s.a(".quiet.hide.js-hide-details",{href:"#"},function(){return s.format("hide-details")})}):void 0}),s.div(".js-list-actions"),u&&s.div(".spinner.loading.js-loading-card-actions"),s.p(".u-bottom",function(){return s.a(".show-more.hide.js-show-all-actions",{href:"#"},function(){return s.format("show-all-actions-ellipsis")})})})}),s.div(".window-sidebar",function(){return a&&s.div(".window-module.u-clearfix",function(){return s.h3(function(){return s.format("add")}),s.div(".u-clearfix",function(){return s.a(".button-link.js-change-card-members",{href:"#"},function(){return s.icon("member","members")}),s.a(".button-link.js-edit-labels",{href:"#"},function(){return s.icon("label","labels")}),s.a(".button-link.js-add-checklist-menu",{href:"#"},function(){return s.icon("checklist","checklist")}),s.a(".button-link.js-add-due-date",{href:"#"},function(){return s.icon("clock","due-date")}),s.a(".button-link.js-attach",{href:"#"},function(){return s.icon("attachment","attachment")})})}),s.div(".js-plugin-buttons"),a?s.div(".window-module.other-actions.u-clearfix",function(){return s.h3(function(){return s.format("actions")}),s.div(".u-clearfix",function(){return s.a(".button-link.js-move-card",{href:"#"},function(){return s.icon("move","move")}),s.a(".button-link.js-copy-card",{href:"#"},function(){return s.icon("card","copy")}),s.div(".js-subscribe-sidebar-button"),s.div(".js-vote-sidebar-button"),s.hr(),s.a(".button-link.js-archive-card",{href:"#"},function(){return s.icon("archive","archive")}),s.a(".button-link.js-unarchive-card",{href:"#"},function(){return s.icon("refresh","send-to-board")}),s.a(".button-link.negate.hide.js-delete-card",{href:"#"},function(){return s.icon("remove","delete")})})}):d&&n&&s.div(".window-module.u-clearfix",function(){return s.h3(function(){return s.format("actions")}),s.div(".u-clearfix",function(){return s.div(".js-subscribe-sidebar-button"),s.div(".js-vote-sidebar-button")})}),s.div(".window-module.u-clearfix",function(){return s.p(".quiet.u-bottom",function(){return s.a(".quiet-button.js-more-menu",{href:"#"},function(){return s.format("share-and-more-ellipsis")})})})}),s.p(".dropzone",function(){return s.format("drop-files-to-upload")})})},{}],758:[function(e,t,n){var r;r=e(517)("card_detail_add_button"),t.exports=r.renderable(function(e){var t,n;return n=e.klass,t={"card-detail-item-add-button":!0,"dark-hover":!0},t[n]=!0,r.a({class:r.classify(t)},function(){return r.icon("add")})})},{}],759:[function(e,t,n){var r;r=e(517)("card_detail_list"),t.exports=r.renderable(function(e){var t,n;return t=e.editable,n=e.listName,r.p(".u-inline-block.u-bottom",function(){return r.format("in-list"),r.text(" "),r.a({href:"#",class:r.classify({"js-open-move-from-header":t,disabled:!t})},function(){return r.text(n)})})})},{}],760:[function(e,t,n){var r;r=e(517)("card_detail_more_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-print",{href:"#"},function(){return r.format("print-ellipsis")})}),r.li(function(){return r.a(".js-export-json",{href:r.mustacheVar("jsonURL")},function(){return r.format("export-json")})})}),r.mustachePartial("meta")}},{}],761:[function(e,t,n){var r;r=e(517)("card_detail_subscribe"),t.exports=r.renderable(function(e){var t,n;return n=e.subscribed,t={"button-link":!0,"is-on":n,"js-subscribe":!n,"js-unsubscribe":n},r.a({class:r.classify(t),title:r.l("subscribe-to-the-card-to-get-notifications-when-something-changes")},function(){return r.icon("subscribe","subscribe"),r.span(".on",function(){return r.icon("check",{class:"light"})})})})},{}],762:[function(e,t,n){var r;r=e(517)("card_detail_vote_btn_sidebar"),t.exports=r.renderable(function(e){var t,n,i;return t=e.canVote,i=e.voted,t?(n={"button-link":!0,"is-on":i,"js-unvote":i,"js-vote":!i},r.a({class:r.classify(n)},function(){return r.icon("vote","vote"),r.span(".on",function(){return r.icon("check",{class:"light"})})})):void 0})},{}],763:[function(e,t,n){var r,i,o;o=e(517)("card_in_list"),r=e(820),i=e(854),t.exports=o.renderable(function(e){var t,n,s,a,u,c,l,d;return n=e.hasStickers,a=e.labels,l=e.quickEdit,s=e.idShort,c=e.name,u=e.members,d=e.showEditor,t=e.badgesHTML,o.div(".list-card-cover.js-card-cover"),d&&o.icon("edit",{class:"list-card-operation dark-hover js-open-quick-card-editor js-card-menu"}),o.div(".list-card-stickers-area",{class:o.classify({hide:!n})},function(){return o.div(".stickers.js-card-stickers")}),o.div(".list-card-details",function(){return o.div(".list-card-labels.js-card-labels",function(){var e,t,n,i;for(i=[],e=0,n=a.length;n>e;e++)t=a[e],i.push(r({name:t.name,color:t.color,extraClasses:["mod-card-front"]}));return i}),l?o.textarea(".list-card-edit-title.js-edit-card-title",{dir:"auto"},function(){return o.text(c)}):o.span(".list-card-title.js-card-name",{dir:"auto"},function(){return s&&o.span(".card-short-id.hide",function(){return o.format("idshort",{idShort:s})}),o.text(c)}),o.div(".badges",function(){return o.span(".js-badges",function(){return o.raw(t)}),o.span(".js-plugin-badges")}),o.div(".list-card-members.js-list-card-members",function(){var e,t,n,r;for(r=[],e=0,t=u.length;t>e;e++)n=u[e],r.push(i(n));return r})}),o.p(".list-card-dropzone",function(){return o.format("drop-files-to-upload")})})},{}],764:[function(e,t,n){var r;r=e(517)("card_menu_meta"),t.exports=function(){return r.hr(),r.div(function(){return r.div(function(){return r.label(function(){return r.format("link-to-this-card"),r.text(" "),r.icon(r.mustacheVar("pLevelClass"),{title:r.mustacheVar("pLevelAltText")})}),r.input(".js-short-url.js-autofocus",{type:"text",readonly:"readonly",value:r.mustacheVar("shortUrl")})}),r.mustacheVar("embed")&&r.div(function(){return r.label(function(){return r.format("embed-this-card")}),r.input(".js-embed",{type:"text",readonly:"readonly",value:r.mustacheVar("embed")})}),r.mustacheBlock("email",function(){return r.mustacheBlock("__ed",function(){return r.div(function(){return r.label(function(){return r.format("email-for-this-card")}),r.input(".js-email",{type:"text",readonly:"readonly",value:r.mustacheVar("email")}),r.p(".quiet",{stlye:"margin: 0 4px;"},function(){return r.l("emails-sent-to-this-address-will-appear-as-a-comment-by-you-on-the-card")})})})}),r.hr(),r.div(".quiet",function(){return r.mustacheBlock("idShort",function(){return r.p({style:"display: inline-block; margin: 0 8px 0 0;"},function(){return r.format("card-idshort",{idShort:r.mustacheVar("idShort")}),r.text(" ")})}),r.p({style:"display: inline-block; margin: 0;"},function(){return r.mustacheBlock("dateAdded",function(){return r.format("added",{dateAdded:r.mustacheVar("dateAdded")})}),r.mustacheBlock("__ed",function(){return r.text(" - "),r.a(".js-delete",{href:"#"},function(){return r.format("delete")})})})})})}},{}],765:[function(e,t,n){var r;r=e(517)("card_title_on_card_front"),t.exports=function(){return r.mustacheBlock("idShort",function(){return r.span(".card-short-id.hide",function(){return r.format("idshort",{idShort:r.mustacheVar("idShort")})})}),r.text(r.mustacheVar("name"))}},{}],766:[function(e,t,n){var r;r=e(517)("change_org_vis"),t.exports=function(){return r.li(function(){return r.a(".highlight-icon.js-select-members",{href:"#"},function(){return r.icon("private","private"),r.mustacheBlock("permissionLevel_private",function(){return r.icon("check")}),r.span(".sub-name",function(){return r.text(r.mustacheVar("privateText"))})})}),r.li(function(){return r.a(".highlight-icon.js-select-public",{href:"#"},function(){return r.icon("public","public"),r.mustacheBlock("permissionLevel_public",function(){return r.icon("check")}),r.span(".sub-name",function(){return r.text(r.mustacheVar("publicText"))})})})}},{}],767:[function(e,t,n){var r;r=e(517)("checklist"),t.exports=function(){return r.div({class:"window-module-title window-module-title-no-divider u-clearfix"+r.mustacheBlock("__ed",function(){return" ed grab"})},function(){return r.span(".window-module-title-icon.icon-lg.icon-checklist"),r.mustacheBlock("__ed",function(){return r.div(".editable.non-empty.checklist-title",{attr:"name"},function(){return r.h3(".current.hide-on-edit",{dir:"auto"},function(){return r.text(r.mustacheVar("name"))}),r.div(".window-module-title-options",function(){return r.mustacheBlock("__ed",function(){return r.a(".hide.hide-on-edit.quiet.js-show-checked-items",{href:"#",style:"margin: 0 8px;"}),r.a(".hide.hide-on-edit.quiet.js-hide-checked-items",{href:"#",style:"margin: 0 8px;"},function(){return r.format("hide-completed-items")}),r.a(".hide-on-edit.quiet.js-confirm-delete",{href:"#"},function(){return r.format("delete-ellipsis")})})}),r.div(".edit.edit-heavy",function(){return r.textarea(".field.full.single-line",{dir:"auto"})}),r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})})})}),r.mustacheBlockInverted("__ed",function(){return r.h3(function(){return r.text(r.mustacheVar("name"))})})}),r.div(".checklist-progress",function(){return r.span(".checklist-progress-percentage.js-checklist-progress-percent",function(){return r.text("0%")}),r.div(".checklist-progress-bar",function(){return r.div(".checklist-progress-bar-current.js-checklist-progress-bar")}),r.span(".checklist-completed-text.hide.quiet.js-completed-message",function(){return r.format("everything-in-this-checklist-is-complete")})}),r.div(".checklist-items-list.js-checklist-items-list.js-no-higher-edits"),r.mustacheBlock("__ed",function(){return r.div(".checklist-new-item.u-gutter.js-new-checklist-item",function(){return r.textarea(".checklist-new-item-text.js-new-checklist-item-input",{placeholder:r.l("add-an-item-ellipsis")}),r.div(".checklist-add-controls.u-clearfix",function(){return r.input(".primary.confirm.mod-submit-edit.js-add-checklist-item",{type:"submit",value:r.l("add")}),r.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-checklist-item",{href:"#"}),r.a(".checklist-add-controls-option.options-menu.dark-hover.js-open-editing-menu",{href:"#"},function(){return r.span(".icon-lg.icon-overflow-menu-horizontal")})})})})}},{}],768:[function(e,t,n){var r;r=e(517)("checklist_add_menu"),t.exports=r.renderable(function(e){var t;return t=e.checklistCards,r.form(function(){return r.label({for:"id-checklist"},function(){return r.format("title")}),r.input(".js-checklist-title.js-autofocus",{type:"text",id:"id-checklist",value:r.l("default-checklist-name"),"data-default":r.l("default-checklist-name"),dir:"auto"}),t.length>0&&r.span(function(){return r.label({for:"js-checklist-copy-source"},function(){return r.format("copy-items-from-ellipsis")}),r.select(".js-checklist-copy-source",function(){var e,n,i,o,s,a;for(r.option({value:"",selected:!0},function(){return r.format("none")}),a=[],n=0,i=t.length;i>n;n++)s=t[n],o=s.name,e=s.checklists,a.push(r.optgroup({label:o},function(){var t,n,i,s,a;for(a=[],n=0,i=e.length;i>n;n++)s=e[n],t=s.id,o=s.name,a.push(r.option({value:t},function(){return r.text(o)}));return a}));return a})}),r.input(".primary.wide.confirm.js-add-checklist",{type:"submit",value:r.l("add")})})})},{}],769:[function(e,t,n){var r;r=e(517)("checklist_item"),t.exports=function(){return r.div({class:"checklist-item-checkbox "+r.mustacheBlock("__ed",function(){return"enabled js-toggle-checklist-item"})},function(){return r.icon("check",{class:"checklist-item-checkbox-check"})}),r.div({class:"checklist-item-details non-empty "+r.mustacheBlock("__ed",function(){return"editable"}),attr:"name"},function(){return r.p(".checklist-item-details-text.current.hide-on-edit.markeddown.js-checkitem-name"),r.mustacheBlock("__ed",function(){return r.div(".edit.delete.convert.options-menu",function(){return r.textarea(".field.full.single-line.js-checkitem-input",{type:"text"})}),r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})})})})}},{}],770:[function(e,t,n){var r;r=e(517)("closed_boards"),t.exports=function(){return r.div(".window-header",function(){return r.span(".window-header-icon.icon-lg.icon-archive"),r.h2(".window-title",function(){return r.format("closed-boards")})}),r.div(".window-main-col",function(){return r.mustacheBlockInverted("empty",function(){return r.div(".window-module.u-clearfix",function(){return r.ul(".archive-list.u-gutter.js-archive-items")})}),r.mustacheBlock("empty",function(){return r.p(".empty-list",function(){return r.format("no-boards-have-been-closed")})})}),r.div(".window-sidebar",function(){return r.p(".helper",function(){return r.format("you-have-to-have-been-a-board-admin-to-re-open-or-delete-a-closed-board")})})}},{}],771:[function(e,t,n){var r;r=e(517)("comment_edit_controls"),t.exports=function(){return r.div(".edit-controls.u-clearfix",function(){return r.div(".js-too-long-warning.hide",function(){return r.p(function(){return r.format("your-comment-is-too-long")})}),r.div(".js-is-empty-warning.hide",function(){return r.p(function(){return r.format("must-have-at-least-one-character")})}),r.input(".primary.confirm.js-save-edit",{type:"submit",value:r.l("save"),tabindex:"2"}),r.a(".js-discard-comment-edits.icon-lg.icon-close.dark-hover.cancel",{href:"#"})})}},{}],772:[function(e,t,n){var r;r=e(517)("comment_options"),t.exports=r.renderable(function(e){return r.div(".comment-box-options",function(){return e&&r.a(".comment-box-options-item.js-comment-add-attachment",{href:"#",title:r.l("add-an-attachment-ellipsis")},function(){return r.icon("attachment")}),r.a(".comment-box-options-item.js-comment-mention-member",{href:"#",title:r.l("mention-a-member-ellipsis")},function(){return r.icon("mention")}),r.a(".comment-box-options-item.js-comment-add-emoji",{href:"#",title:r.l("add-emoji-ellipsis")},function(){return r.icon("emoji")}),r.a(".comment-box-options-item.js-comment-add-card",{href:"#",title:r.l("add-card-ellipsis")},function(){return r.icon("card")})})})},{}],773:[function(e,t,n){var r;r=e(517)("confirm"),t.exports=function(){return r.p(function(){return r.mustacheVar("html")?r.raw(r.mustacheVar("html")):r.text(r.mustacheVar("text"))}),r.input(".js-confirm.full",{type:"submit",class:r.mustacheVar("confirmBtnClass"),value:r.mustacheVar("confirmText")}),r.mustacheBlock("cancelText",function(){return r.input(".js-cancel.full",{type:"submit",value:r.mustacheVar("cancelText")})})}},{}],774:[function(e,t,n){var r;r=e(517)("confirm_merge"),t.exports=function(){return r.p(function(){return r.text(r.mustacheVar("text"))}),r.ul(".pop-over-member-list.js-member"),r.input(".js-confirm.full",{type:"submit",value:r.mustacheVar("confirmText")})}},{}],775:[function(e,t,n){var r;r=e(517)("connect_failed"),t.exports=function(){return r.text(r.mustacheVar("msg")),r.br(),r.a(".app-alert-item-button",{href:"#",onclick:"window.location.reload()"},function(){return r.format("reload-page")})}},{}],776:[function(e,t,n){var r;r=e(517)("crop_photo"),t.exports=function(){return r.img(".crop-image"),r.button(".primary.js-done",function(){return r.format("looks-good")}),r.button(".js-back",function(){return r.format("try-again-ellipsis")})}},{}],777:[function(e,t,n){var r;r=e(517)("date_picker"),t.exports=r.renderable(function(e){var t,n;return t=e.canChangePowerUps,n=e.canEnableAdditionalPowerUps,r.div(".datepicker-select.u-clearfix",function(){return r.div(".datepicker-select-date",function(){return r.label(".datepicker-select-label",function(){return r.format("date"),r.input(".datepicker-select-input.js-dpicker-date-input.js-autofocus",{type:"text",placeholder:r.l("enter-date"),tabindex:101})})}),r.div(".datepicker-select-time",function(){return r.label(".datepicker-select-label",function(){return r.format("time"),r.input(".datepicker-select-input.js-dpicker-time-input",{type:"text",placeholder:r.l("enter-time"),tabindex:102})})})}),r.div(".pickers.js-dpicker-cal"),r.div(".datepicker-confirm-btns",function(){return r.input(".primary.wide.confirm",{type:"submit",value:r.l("save"),tabindex:103}),r.button(".negate.remove-date.js-remove-date",{type:"button",tabindex:104},function(){return r.format("remove")})}),r.div(".js-enable-cal.hide",function(){return r.hr(),n?(r.p(function(){return r.a(".quiet-button.mod-with-image.js-enable-calendar-powerup",{href:"#"},function(){return r.icon("power-up","enable-the-calendar-power-up",{class:"quiet-button-icon"})})}),r.p(".u-bottom.quiet",function(){return r.format("you-ll-get-a-calendar-view-of-your-cards-and-an-ical-feed-woo")})):r.p(".u-bottom.quiet",function(){return r.format("upgrade-to-business-class-to-enable-the-calendar-power-up"),r.text(" "),r.format("you-ll-get-a-calendar-view-of-your-cards-and-an-ical-feed-woo")})}),r.div(".js-cal-enabled.hide",function(){return r.hr(),r.p(".helper",function(){return t?r.format("click-the-calendar-button-in-the-board-header-to-open-the-calendar-to-change-calendar-settings-click-power-ups-in-the-board-menu"):r.format("click-the-calendar-button-in-the-board-header-to-open-the-calendar")})})})},{}],778:[function(e,t,n){var r;r=e(517)("dialog_close_button"),t.exports=function(){return r.a(".icon-lg.icon-close.dialog-close-button.js-close-window",{href:"#"})}},{}],779:[function(e,t,n){var r;r=e(517)("edit_controls"),t.exports=function(){return r.div(".edit-controls.u-clearfix",function(){return r.input(".primary.confirm.mod-submit-edit.js-save-edit",{type:"submit",value:r.l("save")}),r.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-edit",{href:"#"}),r.a(".option.delete.js-delete-item",{href:"#"},function(){return r.format("delete")}),r.a(".option.convert.js-convert-item-to-card",{href:"#"},function(){return r.format("convert-to-card")}),r.a(".option.options-menu.dark-hover.js-open-editing-menu",{href:"#"},function(){return r.span(".icon-lg.icon-overflow-menu-horizontal")})})}},{}],780:[function(e,t,n){var r;r=e(517)(),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d;for(u=e.members,l=[],i=0,a=u.length;a>i;i++)c=u[i],t=c.avatarHash,n=c.fullName,d=c.username,s=c.initials,o=c.icon,l.push(r.span(".edit-in-progress",function(){return r.span(".inline-member",function(){var e;return e=n+" ("+d+")",t?r.img(".inline-member-av",{src:[window.avatarDomain,t,"30.png"].join("/"),alt:e,title:e}):r.span(".quiet.initials",{title:e},function(){return r.text(s)})}),o?r.icon(o,{class:"icon"}):void 0}));return l})},{}],781:[function(e,t,n){var r;r=e(517)("embedly"),t.exports=function(){return r.div({class:"embed embed-"+r.mustacheVar("type")+" embed-provider-"+r.mustacheVar("provider_name")},function(){return r.mustacheBlockInverted("type_photo",function(){return r.mustacheBlock("requireHttps",function(){return r.raw(r.mustacheVar("htmlHttps"))}),r.mustacheBlockInverted("requireHttps",function(){return r.raw(r.mustacheVar("html"))})}),r.mustacheBlock("type_photo",function(){return r.a({href:r.mustacheVar("originalUrl"),target:"_blank"},function(){return r.img({src:r.mustacheVar("url")})})})})}},{}],782:[function(e,t,n){var r;r=e(517)("empty_list"),t.exports=r.renderable(function(e){var t,n,i;return t=e.classes,i=e.style,n=e.message,r.p({class:"empty-list "+t,style:i},function(){return r.text(n)})})},{}],783:[function(e,t,n){var r;r=e(517)("enterprise_detail"),t.exports=r.renderable(function(e){var t,n;return t=e.displayName,n=e.enforcesSso,r.div(".tabbed-pane-header",function(){return r.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return r.a({class:r.classify({"tabbed-pane-header-image":!0,"profile-image":!0}),href:"#"},function(){return r.span(".profile-image-icon.icon-lg.icon-enterprise")}),r.div(".tabbed-pane-header-details",function(){return r.div(".tabbed-pane-header-details-name",function(){return r.h1(".u-inline",function(){return r.text(t)}),r.span(".window-title-extra",function(){return r.icon("enterprise"),r.format("enterprise")}),r.span(".window-title-extra",function(){return n?(r.icon("private"),r.format("sso-enforced")):(r.icon("public"),r.format("not-sso-enforced"))})}),r.div(".tabbed-pane-header-details-content",{dir:"auto"},function(){return r.format("enterprise-admin")})})}),r.div(".tabbed-pane-nav")}),r.div(".tabbed-pane-main-col.u-clearfix",function(){return r.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return r.span(".tabbed-pane-main-col-loading-spinner.spinner")}),r.div({class:r.classify({"tabbed-pane-main-col-wrapper":!0,"js-content":!0,"is-full-width":!0})})})})},{}],784:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(772),i=e("react"),s=e(514)("entity"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.displayName="Entity",t.prototype.render=s.renderable(function(){var e,t,n,r,i,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S,T;switch(y=this.props,c=y.entity,i=y.context,f=y.options,j=c.type,_=c.text,j){case"text":case"list":case"checklist":case"plugin":case"date":return s.span(function(){return s.text(_)});case"card":return S=c.url,s.a(".action-card",{href:S},function(){return s.text(_)});case"board":return S=c.url,s.a({href:S},function(){return s.text(_)});case"organization":return S=c.url,s.a({href:S},function(){return s.text(_||s.l("an-organization"))});case"checkItem":return m=c.nameHtml,m?s.raw(m):s.text(_);case"comment":return k=c.textHtml,t=i.canEdit,x=f.truncateComment,s.div(".comment-container",function(){var e;return e={"action-comment":!0,markeddown:!0,"js-comment":!0,"is-truncated":x},s.div({class:s.classify(e)},function(){return x&&s.div(".action-comment-fade-button.js-expand-comment"),s.div(".current-comment.js-friendly-links.js-open-card",function(){return s.raw(k)}),t?s.div(".comment-box",function(){return s.textarea(".comment-box-input.js-text",{tabindex:"1"},function(){return s.text(_)}),o()}):void 0})});case"label":return r=c.color,n={"card-label":!0},n[r+"-label"]=!0,C=_||r+" label (default)",s.span({class:s.classify(n),title:C},function(){return _?s.text(_):s.raw("&nbsp;")});case"attachment":return h=c.link,S=c.url,p=c.isTrelloAttachment,d=c.isTrello,l=c.id,h?p?s.a(".js-open-attachment-viewer",{href:S,"data-idattachment":l},function(){return s.text(_)}):d?s.a(".js-friendly-links",{href:S},function(){return s.text(_)}):s.a(".js-friendly-links",{href:S,target:"_blank"},function(){return s.text(_)}):s.span(".attachment-deleted",function(){return s.text(_)});case"attachmentPreview":return b=c.previewUrlForRes,g=c.originalUrl,l=c.id,w=f.showCompactAttachmentPreview,b?(n={"js-open-attachment-viewer":!w,"js-open-card":w,"js-friendly-links":!0},v={"attachment-image-preview":!0,"mod-compact-image-preview":w},s.a({class:s.classify(n),href:g,target:"_blank","data-idattachment":l},function(){return s.img({class:s.classify(v),src:b})})):s.raw("&nbsp;");case"member":return l=c.id,e=c.avatarHash,T=c.username,s.span(".inline-member.js-show-mem-menu",{"data-idmember":l},function(){return e&&(C=_+" ("+T+")",s.img(".inline-member-av",{src:[window.avatarDomain,e,"30.png"].join("/"),alt:C,title:C})),s.span(".u-font-weight-bold",function(){return s.text(_)})});case"relDate":return u=c.date,a=c.current,s.span(".rel-date",{dt:u,text:_},function(){return s.text(a)});case"plugin":return s.text(s.mustacheVar("text"))}}),t}(i.Component)},{}],785:[function(e,t,n){var r,i;i=e(517)("entity"),r=e(772),t.exports=i.renderable(function(e,t,n){var o,s,a,u,c,l,d,p,h,m,f,g,v,b,y,w,_,k,C,x,j,S;switch(x=e.type,w=e.text,x){case"text":case"list":case"checklist":case"plugin":case"date":return i.text(w);case"card":return j=e.url,i.a(".action-card",{href:j},function(){return i.text(w)});case"board":return j=e.url,i.a({href:j},function(){return i.text(w)});case"organization":return j=e.url,i.a({href:j},w||i.l("an-organization"));case"checkItem":return f=e.nameHtml,f?i.raw(f):i.text(w);case"comment":return _=e.textHtml,s=t.canEdit,C=n.truncateComment,i.div(".comment-container",function(){var e;return e={"action-comment":!0,markeddown:!0,"js-comment":!0,"is-truncated":C},i.div({class:i.classify(e),dir:"auto"},function(){return C&&i.div(".action-comment-fade-button.js-expand-comment"),i.div(".current-comment.js-friendly-links.js-open-card",function(){return i.raw(_)}),s?i.div(".comment-box",function(){return i.textarea(".comment-box-input.js-text",{tabindex:"1"},function(){return i.text(w)}),r(!0)}):void 0})});case"label":return u=e.color,a={"card-label":!0},a[u+"-label"]=!0,k=w||u+" label (default)",i.span({class:i.classify(a),title:k},function(){return w?i.text(w):i.raw("&nbsp;")});case"attachment":return m=e.link,j=e.url,h=e.isTrelloAttachment,p=e.isTrello,d=e.id,m?h?i.a(".js-open-attachment-viewer",{href:j,"data-idattachment":d},function(){return i.text(w)}):p?i.a(".js-friendly-links",{href:j},function(){return i.text(w)}):i.a(".js-friendly-links",{href:j,target:"_blank"},function(){return i.text(w)}):i.span(".attachment-deleted",function(){return i.text(w)});case"attachmentPreview":return b=e.previewUrlForRes,g=e.originalUrl,d=e.id,y=n.showCompactAttachmentPreview,b?(a={"js-open-attachment-viewer":!y,"js-open-card":y,"js-friendly-links":!0},v={"attachment-image-preview":!0,"mod-compact-image-preview":y},i.a({class:i.classify(a),href:g,target:"_blank","data-idattachment":d},function(){return i.img({class:i.classify(v),src:b})})):i.raw("&nbsp;");case"member":return d=e.id,o=e.avatarHash,S=e.username,i.span(".inline-member.js-show-mem-menu",{idMember:d},function(){return o&&(k=w+" ("+S+")",i.img(".inline-member-av",{src:[window.avatarDomain,o,"30.png"].join("/"),alt:k,title:k})),i.span(".u-font-weight-bold",function(){return i.text(w)})});case"relDate":return l=e.date,c=e.current,i.span(".rel-date",{dt:l,text:w},function(){return i.text(c)});case"plugin":return i.text(i.mustacheVar("text"))}})},{}],786:[function(e,t,n){var r;r=e(517)("error"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d,p;switch(a=e.isLoggedIn,p=e.url,n=e.errorType,u=e.modelType,t=e.email,c=e.nextActionUrl,d=function(e){return r.div(".big-message.with-picture.quiet",function(){return r.img({src:"https://a.trellocdn.com/images/656dc3a1db8d11cde974d7402898fb75/TacoBouncer.png",width:"459",height:"238"}),r.h1(function(){return r.format("roooooo-are-you")}),r.p(function(){return r.format(e)}),r.div(".callout",function(){return r.ol(function(){return r.li(function(){return r.format("check-your-email-at-email",{email:t})}),r.li(function(){return r.format("look-for-an-email-with-the-subject-trello-account-confirmation")}),r.li(function(){return r.format("click-on-the-confirmation-link-done")})})}),r.p(function(){return r.format("dont-see-anything-from-us"),r.raw(" "),r.a(".quiet.js-resend-confirmation-email",{href:"#"},function(){return r.format("resend-confirmation-link")})})})},l=function(e,t,n){return r.div(".big-message.quiet",function(){r.h1(function(){return r.format(e)}),a?r.p(function(){return r.format(n)}):r.p(function(){return r.format(t)})})},s=function(e){return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format(e)}),r.p(function(){return r.format("ask-for-a-new-link")})})},o=function(e,t,n){return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format(e)}),r.p(function(){return r.a(".quiet",{href:n},function(){return r.format(t)})})})},i=function(e){return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format(e)})})},n){case"notFound":return l("page-not-found","this-page-may-be-private-you-may-be-able-to-view-it-by-logging-in","this-page-may-be-private-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"boardNotFound":return l("board-not-found","this-board-may-be-private-you-may-be-able-to-view-it-by-logging-in","this-board-may-be-private-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"cardNotFound":return l("card-not-found","this-card-may-be-on-a-private-board-you-may-be-able-to-view-it-by-logging-in","this-card-may-be-on-a-private-board-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"boardInvitationNotFound":return s("board-invitation-not-valid");case"orgInvitationNotFound":return s("org-invitation-not-valid");case"unconfirmedOrgNotFound":return d("please-confirm-your-email-address-to-view-this-org");case"unconfirmedBoardNotFound":return d("please-confirm-your-email-address-to-view-this-board");default:return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format("page-not-found")})})}})},{}],787:[function(e,t,n){var r;r=e(517)("filter_cards"),t.exports=function(){return r.input(".js-input.js-autofocus",{type:"text",attr:"title",value:r.mustacheVar("title"),style:"margin-bottom: 0;"}),r.div(".js-filter-search-results")}},{}],788:[function(e,t,n){var r;r=e(517)("filter_cards_search_results"),t.exports=function(){return r.mustacheBlock("showHelper",function(){return r.p(".quiet",{style:"padding: 10px 8px 2px; margin-bottom: 0;"},function(){return r.format("type-to-filter-by-term-or-search-for-labels-members-or-due-times")})}),r.mustacheBlock("showLabels",function(){return r.hr(),r.ul({class:"label-list"+r.mustacheBlock("limitLabels",function(){return" limited"})},function(){return r.mustacheBlock("labels",function(){return r.li({class:"label-list-item"+r.mustacheBlock("isActive",function(){return" is-active"})},function(){return r.a(".label-list-item-link.js-toggle-label-filter",{href:"#","data-name":r.mustacheVar("color"),"data-idlabel":r.mustacheVar("id")},function(){return r.div(".label-list-item-link-label",function(){return r.span({class:"card-label mod-square card-label-"+r.mustacheVar("color")})}),r.mustacheBlock("name",function(){return r.span(".label-list-item-link-name",function(){return r.text(r.mustacheVar("name"))})}),r.mustacheBlockInverted("name",function(){return r.span(".label-list-item-link-name.mod-quiet",function(){return r.format("color-label-default",{color:r.mustacheVar("defaultColorName")})})}),r.icon("check",{class:"label-list-item-link-icon"})})})}),r.mustacheBlock("limitLabels",function(){return r.li(".label-list-item.js-show-all-labels-elem",function(){return r.a(".label-list-item-link.js-show-all-labels",{href:"#"},function(){return r.span(".label-list-item-link-name.mod-quiet",function(){return r.format("show-all-labels-remaininglabels-hidden",{remainingLabels:r.mustacheVar("remainingLabels")})})})})})})}),r.mustacheBlock("showMembers",function(){return r.hr(),r.ul({class:"pop-over-member-list checkable js-mem-list"+r.mustacheBlock("limitMembers",function(){return" limited"})},function(){return r.mustacheBlock("members",function(){return r.mustachePartial("select_member")})}),r.mustacheBlock("limitMembers",function(){return r.ul(".pop-over-member-list",function(){
return r.li(".item",function(){return r.a(".name.quiet.js-show-all-members",{href:"#",style:"padding-left: 42px; font-weight: normal; margin-top: 4px;"},function(){return r.format("show-all-members-remainingmembers-hidden",{remainingMembers:r.mustacheVar("remainingMembers")})})})})})}),r.mustacheBlock("showDueTimes",function(){return r.hr(),r.ul(".pop-over-list.checkable.navigable.inset.normal-weight",function(){return r.mustacheBlock("dueOptions",function(){return r.li({class:"item "+r.mustacheBlock("isActive",function(){return" active"})},function(){return r.a(".js-due-filter",{href:"#",time:r.mustacheVar("time"),style:"padding-left: 40px;"},function(){return r.text(r.mustacheVar("desc")),r.icon("check")})})})})}),r.mustacheBlock("showMatchMode",function(){return r.hr(),r.ul(".pop-over-list.checkable.navigable.inset.normal-weight",function(){return r.mustacheBlock("modes",function(){return r.li({class:"item "+r.mustacheBlock("isActive",function(){return" active"})},function(){return r.a(".js-mode-filter",{href:"#",mode:r.mustacheVar("mode"),style:"padding-left: 40px;"},function(){return r.text(r.mustacheVar("desc")),r.icon("check")})})})})}),r.hr(),r.ul(".pop-over-list.inset.normal-weight",function(){return r.li(function(){return r.a({href:"#",class:"js-clear-all"+r.mustacheBlockInverted("isFiltering",function(){return" disabled"}),style:"padding-left: 40px;"},function(){return r.format("clear-filter")})})})}},{}],789:[function(e,t,n){var r;r=e(517)("formatting_help"),t.exports=function(){return r.p(function(){return r.format("trello-uses-markdown-for-formatting-here-are-the-basics-see-the-complete-syntax")}),r.hr(),r.p(".quiet",function(){return r.format("first-level-header")}),r.code(function(){return r.format("making-scrambled-eggs-a-primer"),r.br(),r.text("\n    ===============================\n  ")}),r.hr(),r.p(".quiet",function(){return r.format("second-level-header")}),r.code(function(){return r.format("1-1-preparation"),r.br(),r.text("\n    ----------------\n  ")}),r.hr(),r.p(".quiet",function(){return r.format("paragraphs")}),r.code(function(){return r.format("add-two-new-lines-to-start-a-new-paragraph-crack-two-eggs-into-the-bowl-and-whisk")}),r.hr(),r.p(".quiet",function(){return r.format("bold")}),r.code(function(){return r.format("carefully-crack-the-eggs")}),r.hr(),r.p(".quiet",function(){return r.format("emphasis")}),r.code(function(){return r.format("whisk-the-eggs-vigorously")}),r.hr(),r.p(".quiet",function(){return r.format("lists")}),r.code(function(){return r.format("ingredients"),r.br(),r.br(),r.format("eggs"),r.br(),r.format("oil"),r.br(),r.format("optional-milk")}),r.hr(),r.p(".quiet",function(){return r.format("links")}),r.code(function(){return r.format("to-download-a-pdf-version-of-the-recipe-click-here-https-example-com-scrambled-eggs-pdf")}),r.hr(),r.p(".quiet",function(){return r.format("images")}),r.code(function(){return r.format("the-finished-dish-https-example-com-eggs-png")})}},{}],790:[function(e,t,n){var r;r=e(517)("header_add_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-new-board",{href:"#"},function(){return r.format("create-board"),r.text(" "),r.span(".sub-name",function(){return r.format("a-board-is-made-up-of-cards-ordered-on-lists")})})}),r.li(function(){return r.a(".js-new-org",{href:"#"},function(){return r.format("create-team"),r.text(" "),r.span(".sub-name",function(){return r.format("a-team-is-a-group-of-boards-and-people")})})}),r.li(function(){return r.a(".js-new-bc-org",{href:"#"},function(){return r.format("create-business-team"),r.text(" "),r.span(".sub-name",function(){return r.format("with-business-class-your-team-has-more")})})})})}},{}],791:[function(e,t,n){var r,i,o;o=e(517)("header_announcements"),r=e(704),i=e("locale").social,t.exports=o.renderable(function(e){var t,n,s,a;return e.forEach(r),n=e.length>0&&null!=(s=null!=(a=/^https?:\/\/(?:[-a-z]+\.)?blog\.trello\.com\/([^\/]+)/.exec(e[0].url))?a[1]:void 0)?s:"none",t="?utm_source=inapp&utm_medium=announcement&utm_campaign="+n,o.div(".announcement-elsewhere",function(){return o.p(".quiet",{style:"margin: 0 4px 5px;"},function(){return o.format("for-more-updates-check-out-ellipsis")}),o.a(".announcement-elsewhere-blog.js-blog",{target:"_blank",href:i.blog+t},function(){return o.span(".announcement-elsewhere-blog-icon.icon-lg.icon-board"),o.span(".u-text-underline",function(){return o.format("trello-blog")})}),o.a(".announcement-elsewhere-social.js-t",{target:"_blank",href:i.twitter},function(){return o.span(".icon-lg.icon-twitter")}),o.a(".announcement-elsewhere-social.js-fb",{target:"_blank",href:i.facebook},function(){return o.span(".icon-lg.icon-facebook")}),o.a(".announcement-elsewhere-social.js-g",{target:"_blank",href:i.google},function(){return o.span(".icon-lg.icon-google")})})})},{}],792:[function(e,t,n){var r;r=e(517)("header_back_menu_button"),t.exports=function(){return r.a(".header-btn.js-back-menu",{href:"/","aria-label":r.l("backToHome")},function(){return r.span(".header-btn-icon.icon-lg.icon-board-back-to-home.light")})}},{}],793:[function(e,t,n){var r;r=e(517)("header_boards_menu_button"),t.exports=function(){return r.a(".header-btn.header-boards.js-boards-menu",{href:"#"},function(){return r.span(".header-btn-icon.icon-lg.icon-board.light"),r.span(".header-btn-text",function(){return r.format("boards")})})}},{}],794:[function(e,t,n){var r;r=e(517)("header_channel_picker"),t.exports=function(){return r.mustacheBlock("cookie",function(){return r.p(function(){return r.format("you-have-a-version-cookie-set-this-is-a-feature-intended-for-client-developers-and-testers-and-will-prevent-you-from-changing-channels")}),r.input(".js-remove-cookie.wide.primary",{type:"button",value:r.l("remove-cookie")})}),r.mustacheBlockInverted("cookie",function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("channels",function(){return r.li(function(){return r.a(".js-select",{href:"#",name:r.mustacheVar("name")},function(){return r.text(r.mustacheVar("displayName")),r.mustacheBlock("active",function(){return r.icon("check")})})})}),r.mustacheBlock("dev",function(){return r.hr(),r.li(function(){return r.a(".js-select-dev",{href:"#",name:r.mustacheVar("name")},function(){return r.format("pick-a-version")})}),r.hr(),r.pre({style:"margin-bottom: 0;"},function(){return r.text(r.mustacheVar("version"))})})})})}},{}],795:[function(e,t,n){var r;r=e(517)("header_enterprise_admin_dashboard__menu"),t.exports=r.renderable(function(e){return r.ul(".pop-over-list",function(){var t,n,i,o;for(o=[],t=0,n=e.length;n>t;t++)i=e[t],o.push(r.li(function(){return r.a({href:i.url},function(){return r.text(i.title)})}));return o})})},{}],796:[function(e,t,n){var r,i;i=e(517)("header_info_menu"),r=e("locale").social,t.exports=i.renderable(function(){var e;return i.div(".js-fill-tip"),i.a({class:"next-tip-link js-new-tip",href:"#"},i.l("get-new-tip")),i.hr(),e=function(e,t,n){return i.li(".meta-link-list-item",function(){return i.a({class:"meta-link-list-item-link js-meta-page-link",href:e,"data-metapagename":t,target:"_blank"},i.l(n))})},i.ul(".meta-link-list",function(){return e("/tour","Tour","tour"),e("/pricing","Pricing","pricing"),e("/platforms","Apps","apps"),e(r.blog,"Blog","blog"),i.span(".js-more-menu-button",function(){return i.li(".meta-link-list-item",function(){return i.a({class:"meta-link-list-item-link js-meta-page-more-link",href:"#"},i.l("more"))})}),i.span(".js-more-menu.hide",function(){return e("http://help.trello.com","Help","help"),e("/jobs","Jobs","jobs"),e("https://developers.trello.com","Developers","developers"),e("/about","About","about"),e("/legal","Legal","legal")})})})},{}],797:[function(e,t,n){var r,i,o;o=e(517)("header_invite"),r=window.avatarDomain,i=function(e,t,n){var i;return i=t+" ("+n+")",{src:[r,e,"30.png"].join("/"),alt:i,title:i}},t.exports=o.renderable(function(e){var t,n,r,s,a,u,c,l,d,p,h;return a=e.isInviter,r=e.ghost,l=e.modelName,c=e.memberAdder,t=e.avatarHash,n=e.fullName,h=e.username,d=e.modelType,u=e.isLoggedIn,s=e.isBoard,p=e.signupUrl,o.div(".invited-message",function(){return o.a(".js-ignore-invite.icon-lg.icon-close.dialog-close-button",{href:"#"}),o.h1(function(){return a?o.format("you-invited-ghost-fullname-to-collaborate-on-modelname",{"ghost.fullName":r.fullName,modelName:l}):c?o.format("fullname-has-invited-you-to-collaborate-on-modelname",{fullName:c.fullName,modelName:l}):o.format("youve-been-invited-to-collaborate-on-modelname",{modelName:l})}),u?(a||o.p({style:"min-height: 20px;"},function(){return r.email?(o.format("your-account"),t&&o.img(".inline-member-av",i(t,n,h)),o.text(" "),o.format("fullname-username-hasnt-logged-in-with-ghost-email",{fullName:n,username:h,"ghost.email":r.email})):void 0}),a?o.a(".button.js-create-new-account.primary",{href:p},function(){return o.format("create-new-account-for-ghost-fullname",{"ghost.fullName":r.fullName})}):(o.a(".button.js-join-model.primary",{href:"#"},function(){return s?o.format("add-this-email-to-my-account-and-join-board"):o.format("add-this-email-to-my-account-and-join-org")}),o.a(".button.js-create-new-account",{href:p},function(){return o.format("create-new-account")}))):o.a(".button.primary",{href:p},function(){return s?o.format("join-board"):o.format("join-org")})})})},{}],798:[function(e,t,n){var r;r=e(517)("header_logo"),t.exports=function(){return r.a(".header-logo.js-home-via-logo",{href:"/","aria-label":r.l("trello-home")},function(){return r.span(".header-logo-loading"),r.span(".header-logo-default")})}},{}],799:[function(e,t,n){var r;r=e(517)("header_member_menu"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c;return a=e.hasAccount,c=e.profileUrl,o=e.cardsUrl,n=e.billingUrl,t=e.accountUrl,i=e.canLogOut,s=function(e,t,n){return r.li(function(){var i;return i={class:n,href:e},r.a(i,function(){return r.format(t)})})},u=function(e){return r.ul(".pop-over-list",e)},u(function(){return s(c,"profile","js-profile"),s(o,"cards","js-cards"),a&&s(n,"billing","js-billing"),s(t,"settings","js-account")}),r.hr(),u(function(){return s("/contact","help","js-help"),s("/shortcuts","shortcuts","js-shortcuts"),s("#","change-locale","js-change-locale")}),r.hr(),u(function(){return r.li(function(){return r.a(".js-logout",{href:"#"},function(){r.format("log-out"),i||(r.br(),r.format("you-ll-need-to-set-a-password-first"))})})})})},{}],800:[function(e,t,n){var r;r=e(517)("header_notification_list_menu"),t.exports=function(){return r.mustacheBlockInverted("hasNotifications",function(){return r.p(".empty",{style:"padding: 24px 6px;"},function(){return r.format("no-notifications")})}),r.mustacheBlock("hasNotifications",function(){return r.ul(".pop-over-list.mod-add-top-margin",function(){return r.li(function(){return r.a(".js-view-all-notifications",{href:r.mustacheVar("noteUrl")},function(){return r.mustacheBlock("remainingUnread",function(){return r.format("see-all-notifications-remainingunread-more-unread",{remainingUnread:r.mustacheVar("remainingUnread")})}),r.mustacheBlockInverted("remainingUnread",function(){return r.format("see-all-notifications")})})}),r.li(function(){return r.a(".js-change-email-frequency",{href:"#"},function(){return r.format("change-notification-email-frequency")})}),r.mustacheBlock("canAllowDesktopNotifications",function(){return r.li(function(){return r.a(".js-allow-desktop-notifications",{href:"#"},function(){return r.format("allow-desktop-notifications")})})})})})}},{}],801:[function(e,t,n){var r,i;i=e(517)("header_promo_nav"),r=e("locale").social,t.exports=function(){return i.nav(".promo-nav",function(){return i.a(".promo-nav-button",{href:"/"},function(){return i.format("home")}),i.a(".promo-nav-button",{href:"/tour"},function(){return i.format("tour")}),i.a(".promo-nav-button",{href:r.blog,target:"_blank"},function(){return i.format("blog")})})}},{}],802:[function(e,t,n){var r;r=e(517)("header_public_board"),t.exports=function(){return r.p(".u-bottom",function(){return r.mustacheBlock("interactionText",function(){return r.span(".u-inline-block",function(){return r.text(r.mustacheVar("interactionText"))})}),r.span(".u-inline-block",function(){return r.format("sign-up-for-free-or-learn-more-about-trello",{signupUrl:r.mustacheVar("signupUrl"),tourUrl:r.mustacheVar("tourUrl")})})})}},{}],803:[function(e,t,n){var r;r=e(517)("header_search"),t.exports=function(){return r.a(".header-btn.open-search-btn.js-open-search-page",{href:"/search",title:r.l("search-for-boards-cards-members-and-organizations")},function(){return r.span(".header-btn-icon.icon-lg.icon-search.light")}),r.div(".header-search",function(){return r.input(".header-search-input.js-search-input.js-disable-on-dialog",{type:"text",autocomplete:"off",autocorrect:"off",spellcheck:"false",value:r.mustacheVar("query")}),r.span(".header-search-icon.icon-lg.icon-search.light.js-search-icon"),r.span(".header-search-icon.header-search-icon-close.icon-lg.icon-close.light.hide.js-close-icon.js-search-close"),r.a(".header-search-icon.header-search-icon-open.icon-lg.icon-external-link.light.hide.js-open-button.js-open-search-page",{href:"#"})})}},{}],804:[function(e,t,n){var r;r=e(517)("header_signup_login"),t.exports=function(){return r.a(".header-btn.header-signup",{href:"/signup"+r.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+r.mustacheVar("escapedReturnUrl")})},function(){return r.format("sign-up")}),r.a(".header-btn.header-login.no-right-margin",{href:"/login"+r.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+r.mustacheVar("escapedReturnUrl")})},function(){return r.format("log-in")})}},{}],805:[function(e,t,n){var r;r=e(517)("header_two_factor_backups_banner"),t.exports=function(){return r.p(".u-bottom",function(){return r.format("generate-new-backup-codes")})}},{}],806:[function(e,t,n){var r,i;i=e(517)("header_user"),r=e(85),t.exports=function(){return i.mustacheBlock("__loggedIn",function(){return i.a(".header-btn.js-open-add-menu",{href:"#","aria-label":i.l("create-board-or-org")},function(){return i.span(".header-btn-icon.icon-lg.icon-add.light")}),i.a(".header-btn.js-open-header-info-menu",{href:"#","aria-label":i.l("open-information-menu")},function(){return i.span(".header-btn-icon.icon-lg.icon-information.light")}),i.a(".header-btn.header-notifications.js-open-header-notifications-menu",{href:"#","aria-label":i.l("notifications-menu")},function(){return i.span(".header-btn-icon.icon-lg.icon-notification.light")}),i.mustacheBlock("isEnterpriseAdmin",function(){return i.a(".header-btn.header-enterprise-dashboard.js-open-enterprise-dashboard-menu",{href:"#","aria-label":i.l("enterprise-dashboard")},function(){return i.span(".header-btn-icon.icon-lg.icon-enterprise-dashboard.light")})}),i.mustacheBlock("showChannelPicker",function(){return i.a(".header-btn.header-btn-channel-picker.js-open-channel-picker",{href:"#","aria-label":i.l("switch-channels")},function(){return i.span(".header-btn-icon.icon-lg.icon-gear.light")})}),i.a(".header-btn.header-avatar.js-open-header-member-menu",{href:"#","aria-label":i.l("member-menu")},function(){return i.span({class:"member"+i.mustacheBlock("hasCrown",function(){return" has-crown"})})})}),i.mustacheBlockInverted("__loggedIn",function(){return i.mustachePartial("header_signup_login")})}},{}],807:[function(e,t,n){var r;r=e(517)("header_version_picker"),t.exports=function(){return r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("head")}),r.span(".value",function(){return r.text(r.mustacheVar("active.name"))}),r.label(function(){return r.format("head")}),r.select(".js-select-head",function(){return r.mustacheBlock("heads",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("value")},function(){return r.text(r.mustacheVar("displayName")),r.mustacheBlock("selected",function(){return r.format("current")})})})})}),r.mustacheBlock("versions.2.value",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("version")}),r.span(".value",function(){return r.text(r.mustacheVar("active.version"))}),r.label(function(){return r.format("version")}),r.select(".js-select-version",function(){return r.mustacheBlock("versions",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("value")},function(){return r.text(r.mustacheVar("displayName")),r.mustacheBlockInverted("active",function(){return r.text(" "),r.format("disabled")}),r.mustacheBlock("selected",function(){return r.text(" "),r.format("current")})})})})})})})}},{}],808:[function(e,t,n){var r;r=e(517)("header_warning_account_transfer_required_big"),t.exports=r.renderable(function(e){var t,n,i;return i=e.targetDate,t=e.enterpriseName,n=e.isAdmin,r.div(".centered-banner",function(){return r.div(".sso-notice",function(){return r.p(function(){return r.format("convert-to-enterprise-member",{enterpriseName:t,targetDate:i})}),r.p(function(){return n?r.format("admins-must-convert"):r.format("will-deactivate",{enterpriseName:t})})}),r.p(".u-bottom",function(){return r.button(".primary.wide.js-begin-transfer",{type:"button"},function(){return r.format("start-conversion")}),r.text(" "),r.a(".quiet.js-dismiss-account-transfer",{href:"#"},function(){return r.format("do-later")})})})})},{}],809:[function(e,t,n){var r;r=e(517)("header_warning_account_transfer_required_collapsed"),t.exports=r.renderable(function(e){var t,n,i;return n=e.overdue,i=e.remainingDays,t=e.enterpriseName,r.p(".u-bottom",function(){return r.p(function(){return n?r.format("account-conversion-overdue"):r.format("account-conversion-days-remaining",{remainingDays:i}),r.text(". "),r.a(".quiet",{href:"/enterprise/"+t+"/transfer-account"},function(){return n?r.format("convert-now"):r.format("start-conversion")})})})})},{}],810:[function(e,t,n){var r;r=e(517)("header_warning_account_transfer_required_delayed"),t.exports=r.renderable(function(e){var t;return t=e.enterpriseName,r.p(".u-bottom",function(){return r.p(function(){return r.format("no-converted-admin"),r.text(" "),r.a(".quiet",{href:"/enterprise/"+t+"/transfer-account"},function(){return r.format("convert-now")})})})})},{}],811:[function(e,t,n){var r;r=e(517)("header_warning_account_transfer_required_missed"),t.exports=r.renderable(function(){return r.p(".u-bottom",function(){return r.p(function(){return r.format("missed-transfer-date"),r.text(" "),r.a(".quiet",{href:"/transfer-account/missed-date"},function(){return r.format("convert-now")})})})})},{}],812:[function(e,t,n){var r;r=e(517)("header_warning_banner"),t.exports=function(){return r.p(".u-bottom",function(){return r.mustacheBlock("knownEmailProvider",function(){return r.format("please-confirm-your-email-address-email-check-your-inbox",{email:r.mustacheVar("email"),emailInboxUrl:r.mustacheVar("emailInboxUrl")}),r.a(".header-banner-link-left.quiet.js-resend-confirmation-email",{href:"#"},function(){return r.format("resend-email")})}),r.mustacheBlockInverted("knownEmailProvider",function(){return r.format("please-confirm-your-email-address-email",{email:r.mustacheVar("email")}),r.a(".header-banner-link-left.quiet.js-resend-confirmation-email",{href:"#"},function(){return r.format("resend-email")})})})}},{}],813:[function(e,t,n){var r;r=e(517)("header_warning_password"),t.exports=function(){return r.p(".u-bottom",function(){return r.format("we-ve-automatically-created-an-account-for-email-with-the-username-username",{email:r.mustacheVar("email"),username:r.mustacheVar("username")}),r.a(".quiet.js-change-password",{href:"/my/account"},function(){return r.format("add-a-password")})})}},{}],814:[function(e,t,n){t.exports={actions_empty:e(701),ad_business_class:e(702),ad_business_class_google_apps:e(703),archived_card_options:e(705),archived_cards:e(706),archived_lists:e(707),atMention:e(708),attachment_viewer:e(711),attachment_viewer_frame:e(712),attachment_viewer_frame_details:e(713),avatar_change:e(714),badge:e(715),board:e(717),board_archive:e(718),board_background_options:e(719),board_background_selection:e(720),board_change_background:e(721),board_desc:e(723),board_header:e(724),board_header_permissions:e(725),board_member_profile:e(727),board_menu_activity:e(728),board_menu_commenting:e(729),board_menu_default:e(730),board_menu_invitations:e(732),board_menu_more:e(733),board_menu_more_activity_button:e(734),board_menu_settings:e(735),board_menu_subscribed_state:e(736),board_menu_vis:e(737),board_new:e(738),board_new_vis:e(739),board_observer_count:e(740),board_sidebar:e(741),boards_page_add_org_button:e(742),calendar_day:e(748),calendar_day_list_header:e(749),calendar_month:e(750),calendar_toolbar:e(751),calendar_week:e(752),cant_add_board_to_org:e(753),card_composer_inline:e(755),card_copy:e(756),card_detail_more_menu:e(760),card_menu_meta:e(764),card_title_on_card_front:e(765),change_org_vis:e(766),checklist:e(767),checklist_add_menu:e(768),checklist_item:e(769),closed_boards:e(770),comment_edit_controls:e(771),confirm:e(773),confirm_merge:e(774),connect_failed:e(775),crop_photo:e(776),dialog_close_button:e(778),edit_controls:e(779),embedly:e(781),error:e(786),filter_cards:e(787),filter_cards_search_results:e(788),formatting_help:e(789),header_add_menu:e(790),header_back_menu_button:e(792),header_boards_menu_button:e(793),header_channel_picker:e(794),header_logo:e(798),header_notification_list_menu:e(800),header_promo_nav:e(801),header_public_board:e(802),header_search:e(803),header_signup_login:e(804),header_two_factor_backups_banner:e(805),header_user:e(806),header_version_picker:e(807),header_warning_banner:e(812),header_warning_password:e(813),index:e(814),invitation:e(815),kiln_changeset_preview:e(818),kiln_changeset_thumbnail:e(819),label_edit_component:e(821),list:e(822),list_add:e(823),list_bulk_card_move:e(824),list_copy:e(825),manage_members_select_role:e(828),member_account:e(830),member_application:e(831),member_application_list:e(832),member_billing_org_link:e(834),member_billing_org_link_list:e(835),member_boards_list_ad:e(836),member_cards_card:e(839),member_cards_date:e(840),member_detail_profile_edit:e(845),member_detail_profile_info:e(846),member_gold_earned:e(847),member_inline:e(849),member_list_item_detail:e(851),member_login:e(852),member_on_board_menu:e(853),member_on_card_menu:e(855),member_profile:e(856),member_profile_info:e(857),member_session:e(858),member_session_list:e(859),members_voted:e(860),menu:e(861),menu_base:e(862),move_card_controls:e(864),observer_list:e(865),org_boards_for_member:e(867),org_create:e(868),org_detail_profile_edit:e(870),org_detail_profile_info:e(871),org_export:e(872),org_export_empty:e(873),org_export_item:e(874),org_link_ga_helper:e(875),org_member_activity:e(876),org_pref_restriction:e(877),org_prefs_nonorg_invites:e(878),org_prefs_vis:e(880),org_remove_or_deactivate_member:e(881),organization_list_item:e(883),organization_search_list_item:e(884),plugin_chrome:e(885),pop_over_ad:e(886),popover_add_email:e(887),popover_add_list:e(888),popover_add_to_team:e(889),popover_auto_mentioner:e(890),popover_board_header_org_menu:e(891),popover_card_from_calendar:e(893),popover_change_board_org:e(894),popover_change_labels:e(895),popover_change_roles:e(896),popover_change_set_password:e(897),popover_change_user_info:e(898),popover_confirm_member_delete:e(899),popover_emoji_completer:e(900),popover_emoji_uploader:e(901),popover_filter_pos_results:e(902),popover_helper_new_board_add_org:e(903),popover_insertion_menu:e(904),popover_member_searcher:e(905),popover_move_card:e(906),popover_move_list:e(907),popover_org_logo:e(908),popover_rename_board:e(909),popover_select_members:e(910),popover_selector_menu:e(911),popover_set_email_freq:e(912),popover_share:e(913),power_up_item:e(914),power_up_item_details:e(915),power_ups_about_calendar:e(916),power_ups_about_card_aging:e(917),power_ups_about_voting:e(918),power_ups_detail_navbar:e(921),product_promo_button:e(924),quick_card_editor:e(925),saved_search:e(926),search_instant_results:e(927),search_results_card:e(928),search_suggetion:e(929),search_suggetion_board:e(930),search_suggetion_member:e(931),select_emoji:e(933),select_labels:e(934),select_member:e(935),select_org_to_upgrade:e(936),shortcuts:e(937),sticker_on_card:e(938),sticker_pack_selection_list:e(939),sticker_select:e(940),sticker_select_item:e(941),sticker_select_item_upload:e(942),sync_error:e(943),take_photo:e(944),tooltip_content:e(946),woof_header:e(947)}},{}],815:[function(e,t,n){var r,i;i=e(517)("invitation"),r=e(829),t.exports=function(){return i.div(".phenom.invitation",function(){return i.mustacheBlock("MemberInviter",function(){return i.div(".creator.member.no-menu",function(){return r(i.mustacheVar("MemberInviter"))})}),i.div(".phenom-desc",function(){return i.p(function(){return i.mustacheBlock("MemberInviter",function(){return i.format("fullname-created-an-invitation-to",{fullName:i.mustacheVar("fullName")})}),i.span(".invitee",function(){return i.mustacheBlock("MemberInvited",function(){return i.mustachePartial("member_inline")}),i.mustacheBlockInverted("MemberInvited",function(){return i.text(i.mustacheVar("email")),i.mustacheBlockInverted("email",function(){return i.format("someone-new")})})})})}),i.p(".phenom-meta.quiet",function(){return i.mustacheBlock("dateExpires",function(){return i.span(".expiration-date",function(){return i.format("expires",{dateExpires:i.mustacheVar("dateExpires")})})}),i.mustacheBlock("canRemove",function(){return i.text(" - "),i.a(".u-inline-block.js-remove-invitation",{href:"#"},function(){return i.format("delete-invitation")})})})})}},{}],816:[function(e,t,n){var r;r=e(517)("invite_add_name"),t.exports=r.renderable(function(e){var t,n,i,o;return n=e.email,i=e.fullName,t=e.canAddAsObserver,o=e.modelType,r.p(".quiet",function(){if("Board"===o)return r.format("we dont know that personboard",{email:n});if("Organization"===o)return r.format("we dont know that personteam",{email:n});throw new Error("Expected either Board or Organization as modelType; got "+o)}),r.p(".error.hide.js-name-error",function(){return r.format("full-name-must-be-more-than-4-characters")}),r.form(".js-email-data",function(){return r.label(function(){return r.format("full-name")}),r.input(".js-autofocus.js-full-name",{type:"text",value:i}),r.input(".js-email",{type:"hidden",value:n}),t&&r.span(".check-div.quiet.u-clearfix",{style:r.stylify({"margin-left":"24px","padding-top":"2px","font-size":"12px","line-height":"15px"})},function(){return r.input({type:"checkbox",id:"addAsObserver"}),r.label({for:"addAsObserver"},function(){return r.format("include-this-member-as-a-view-only-observer")})}),r.input(".wide.primary.js-send-email-invite",{type:"submit",value:r.l("send")})})})},{}],817:[function(e,t,n){var r;r=e(517)("manage_members"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d,p,h,m;return n=e.canInviteMembers,i=e.canLinkGoogleApps,m=e.placeholder,o=e.disableAddingExternalMembers,s=e.isBCOrgAdmin,p=e.orgSettingsURL,t=e.canAddMembers,d=e.orgName,u=e.isPerUser,a=e.isMonthly,c=e.isYearly,h=e.perUserPrice,l=e.orgMemsView,null==d&&(d=""),r.div(".org-actions-popover",function(){return n&&r.div(".manage-member-invitation-section",function(){return r.div(".search-with-spinner",{style:"height: auto"},function(){return r.h4(function(){return r.icon("member","enter-email-address-or-name")}),r.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:m}),r.div(".spinner.small.hide.js-loading"),r.p(".u-bottom.quiet.bulk-add-members-copy",function(){return r.format("big-team"),r.a(".js-bulk-add-members.u-bottom.action-link",{href:"#"},function(){return r.format("add-many-people-at-once")})})})}),o&&(r.div(".search-with-spinner",function(){return r.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:m}),r.div(".spinner.small.hide.js-loading")}),r.p(".warning",function(){return s?r.format("only-organization-members-can-be-added-to-this-board-to-change-this-visit-the-organization-settings-page-and-click-inviting-non-org-members-to-boards",{orgSettingsURL:p}):r.format("only-organization-members-can-be-added-to-this-board-check-with-an-organization-admin-to-change-this-setting")})),r.div(".manage-member-section.hide.js-board-members",function(){return r.ul(".pop-over-member-list.options.js-list")}),r.div(".manage-member-section.hide",function(){return r.h4(function(){return r.format("error")}),r.p(".error",function(){return r.format("the-user-or-email-could-not-be-invited-due-to-an-organization-restriction")})}),r.div(".manage-member-section.hide.js-error",function(){return r.p(".error",{style:"margin: 16px 8px 6px;"})}),t&&(r.div(".manage-member-section.hide.js-uninvited-search-results"),r.div(".manage-member-section.hide.js-search-results",function(){return r.h4(function(){return r.format("select-to-add")}),r.ul(".pop-over-member-list.options.js-list")}),r.div(".manage-member-section.hide.js-no-results",function(){return r.p(".quiet.u-text-align-center",{style:"padding: 16px 4px;"},function(){return r.format("no-results")})}),r.div(".manage-member-section.hide.js-org-members",function(){return r.h4(function(){return r.format("orgname-members",{orgName:d})}),r.ul(".pop-over-member-list.options.u-clearfix.js-list",{class:r.classify({collapsed:l}),style:r.stylify({"margin-bottom":l?"8px":void 0})}),r.a(".quiet-button.js-add-all-org-members",{href:"#",style:"margin-top: 8px;"}),r.a(".quiet-button.js-more-org-members.hide",{href:"#",style:"margin-top: 8px;"},function(){return r.format("view-all-members")})})),u&&r.p(".quiet.u-bottom",{style:"padding: 6px;"},function(){return a&&r.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-month",{jpsPrice:h}),c?r.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-year",{jpsPrice:h}):void 0}),n&&r.div(".manage-member-invitation-section",function(){return r.div(".manage-member-invitation-link-header",function(){return r.h4(function(){return r.img(".icon-share-link",{src:"https://a.trellocdn.com/images/17095605578f7696a7029c904b584c00/icon-link.svg"}),r.format("share-team-invite-link")}),r.a(".action-link.js-show-invitation-link",{href:"#"},function(){return r.format("create-link")})}),r.div(".manage-member-invitation-link.hide.js-invitation-link-container",function(){return r.div(".manage-member-invitation-link-actions",function(){return r.input(".js-invitation-link",{type:"text",readonly:"readonly",placeholder:r.l("loading")}),r.button(".button.primary.js-copy-link",function(){return r.format("copy")})}),r.a(".quiet.js-deactivate-link",{href:"#"},function(){return r.format("disable-this-link")})})}),n&&r.div(".js-ad"),i?r.div(".js-link-google-apps",function(){return r.div(".pop-over-ad.business-class-ad",function(){return r.img(".icon-google-g.pop-over-ad-icon",{src:"https://a.trellocdn.com/images/services/2ccbebadc7891e8f0896e1b85961fdf6/google-g-logo.svg"}),r.div(".ad-copy",function(){return r.span(".title",function(){return r.format("using-google-apps")}),r.span(".learn-more",function(){return r.format("link-google-apps-domain")})})})}):void 0})})},{}],818:[function(e,t,n){var r;r=e(517)("kiln_changeset_preview"),t.exports=function(){var e,t;return t=null!=(e=r.mustacheVar("reviews"))?e:[],r.div(".attachment-extra-info-header",function(){var e;return e=0===t.length?"changeset-no-reviews":"changeset",r.format(e,{url:r.mustacheVar("url"),shortHash:r.mustacheVar("shortHash"),author:r.mustacheVar("author")}),r.mustacheBlock("reviews",function(){return r.span(".quiet",function(){return r.a({href:r.mustacheVar("url"),target:"_blank"},function(){return r.text(r.mustacheVar("status"))})})})}),r.div(".attachment-extra-info-details.markeddown",function(){return r.raw(r.mustacheVar("commitMessageHtml"))})}},{}],819:[function(e,t,n){var r;r=e(517)("kiln_changeset_thumbnail"),t.exports=function(){return r.span({title:r.mustacheVar("commitMessage")},function(){return r.text(r.mustacheVar("shortCommitMessage"));
}),r.span(".block.quiet",function(){var e,t,n;return n=null!=(t=r.mustacheVar("reviews"))?t:[],e=r.mustacheVar("date"),0!==n.length||e?0===n.length&&e?r.format("no-reviews-date",{date:e}):n.length>0&&!e?r.format("reviews-no-date"):n.length>0&&e&&r.format("reviews-date",{date:e}):r.format("no-reviews-no-date"),r.mustacheBlock("reviews",function(){return r.span(function(){return r.a({href:r.mustacheVar("url"),target:"_blank"},function(){return r.text(r.mustacheVar("status"))})})})})}},{}],820:[function(e,t,n){var r;r=e(517)("label"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u;if(i=e.color,u=e.name,o=e.extraClasses,n={"card-label":!0},i&&(n["card-label-"+i]=!0),o)for(s=0,a=o.length;a>s;s++)t=o[s],n[t]=!0;return r.span({class:r.classify(n),title:null!=u?u:i+" label (default)"},function(){return u?r.text(u):r.raw("&nbsp;")})})},{}],821:[function(e,t,n){var r;r=e(517)("label_edit_component"),t.exports=function(){return r.label({for:"labelName"},function(){return r.format("name")}),r.input(".js-autofocus.js-label-name",{id:"labelName",type:"text",name:"name",value:r.mustacheVar("label.name")}),r.label(function(){return r.format("select-a-color")}),r.mustacheBlock("colors",function(){return r.span({class:"card-label mod-edit-label mod-clickable card-label-"+r.mustacheVar("color")+" palette-color js-palette-color","data-color":r.mustacheVar("color")},function(){return r.span({class:"card-label-color-select-icon icon-sm icon-check light "+r.mustacheBlockInverted("selected",function(){return"hide"})+" js-palette-select"})})}),r.p(".u-bottom",function(){return r.format("no-color")}),r.p(".u-bottom.quiet",function(){return r.format("this-wont-show-up-on-the-front-of-cards")}),r.div(".u-clearfix",function(){return r.input(".primary.wide.js-submit",{type:"submit",value:r.mustacheVar("submitText")}),r.div(".u-float-right.js-accessory-view-holder")})}},{}],822:[function(e,t,n){var r;r=e(517)("list"),t.exports=r.renderable(function(e){var t,n,i;return n=e.name,i=e.subscribed,t=e.loggedIn,r.div(".list.js-list-content",function(){var e;return e={"list-header":!0,"js-list-header":!0,"u-clearfix":!0,"is-menu-shown":t,"is-subscribe-shown":i},r.div({class:r.classify(e)},function(){var e;return e={"list-header-name":!0,"mod-list-name":!0,"js-list-name-input":!0},r.div(".list-header-target.js-editing-target"),r.h2(".list-header-name-assist.js-list-name-assist",{dir:"auto"},n),r.textarea({class:r.classify(e),"aria-label":n,spellcheck:"false",dir:"auto",maxLength:512},n),r.p(".list-header-num-cards.hide.js-num-cards"),r.div(".list-header-extras",function(){var e;return e={"list-header-extras-subscribe":!0,"js-list-subscribed":!0},i||(e.hide=!0),r.span({class:r.classify(e)},function(){return r.icon("subscribe")}),t?r.a(".list-header-extras-menu.dark-hover.js-open-list-menu",{href:"#"},function(){return r.icon("overflow-menu-horizontal")}):void 0})}),r.a(".open-card-composer.js-open-card-composer",{href:"#"},function(){return r.format("add-a-card-ellipsis")})})})},{}],823:[function(e,t,n){var r;r=e(517)("list_add"),t.exports=function(){return r.form(function(){return r.span(".placeholder.js-open-add-list",function(){return r.format("add-a-list-ellipsis")}),r.input(".list-name-input",{type:"text",name:"name",placeholder:r.l("add-a-list-ellipsis"),autocomplete:"off",dir:"auto",maxLength:512}),r.div(".list-add-controls.u-clearfix",function(){return r.input(".primary.mod-list-add-button.js-save-edit",{type:"submit",value:r.l("save")}),r.a(".icon-lg.icon-close.dark-hover.js-cancel-edit",{href:"#"})})})}},{}],824:[function(e,t,n){var r;r=e(517)("list_bulk_card_move"),t.exports=function(){return r.form(function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("lists",function(){return r.li(function(){return r.a({href:"#",class:"js-select-list highlight-icon "+r.mustacheBlock("current",function(){return" disabled"}),name:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("name")),r.mustacheBlock("current",function(){return r.text(" "),r.format("current")})})})})})})}},{}],825:[function(e,t,n){var r;r=e(517)("list_copy"),t.exports=function(){return r.label(function(){return r.format("name")}),r.textarea(".js-autofocus",{name:"name"},function(){return r.text(r.mustacheVar("name"))}),r.input(".primary.wide.js-submit",{type:"submit",value:r.l("create-list")})}},{}],826:[function(e,t,n){var r;r=e(517)("list_menu"),t.exports=r.renderable(function(e){var t,n,i;return n=e.editable,i=e.subscribed,t=e.canSortByDate,r.ul(".pop-over-list",function(){return n&&(r.li(function(){return r.a(".js-add-card",{href:"#"},function(){return r.format("add-card-ellipsis")})}),r.li(function(){return r.a(".js-copy-list",{href:"#"},function(){return r.format("copy-list-ellipsis")})}),r.li(function(){return r.a(".js-move-list",{href:"#"},function(){return r.format("move-list-ellipsis")})})),r.li(function(){return r.a(".highlight-icon.js-list-subscribe",{href:"#"},function(){return r.check(i,"subscribe")})})}),n?(r.hr(),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-move-cards",{href:"#"},function(){return r.format("move-all-cards-in-this-list-ellipsis")})}),r.li(function(){return r.a(".js-archive-cards",{href:"#"},function(){return r.format("archive-all-cards-in-this-list-ellipsis")})})}),t&&(r.hr(),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-sort-by-date",{href:"#"},function(){return r.format("sort-by-date")})})})),r.hr(),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-close-list",{href:"#"},function(){return r.format("archive-this-list")})})})):void 0})},{}],827:[function(e,t,n){var r;r=e(517)("manage_members"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d,p,h;return n=e.canInviteMembers,h=e.placeholder,i=e.disableAddingExternalMembers,o=e.isBCOrgAdmin,d=e.orgSettingsURL,t=e.canAddMembers,l=e.orgName,a=e.isPerUser,s=e.isMonthly,u=e.isYearly,p=e.perUserPrice,c=e.orgMemsView,null==l&&(l=""),n&&(r.div(".search-with-spinner",function(){return r.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:h}),r.div(".spinner.small.hide.js-loading")}),r.div(".manage-member-section.js-helper",function(){return r.p(".u-bottom.quiet",{style:"padding: 6px;"},function(){return r.format("search-for-a-person-in-trello-by-name-or-email-address-or-enter-an-email-address-to-invite-someone-new")})})),i&&(r.div(".search-with-spinner",function(){return r.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:h}),r.div(".spinner.small.hide.js-loading")}),r.p(".warning",function(){return o?r.format("only-organization-members-can-be-added-to-this-board-to-change-this-visit-the-organization-settings-page-and-click-inviting-non-org-members-to-boards",{orgSettingsURL:d}):r.format("only-organization-members-can-be-added-to-this-board-check-with-an-organization-admin-to-change-this-setting")})),r.div(".manage-member-section.hide.js-board-members",function(){return r.ul(".pop-over-member-list.options.js-list")}),r.div(".manage-member-section.hide",function(){return r.h4(function(){return r.format("error")}),r.p(".error",function(){return r.format("the-user-or-email-could-not-be-invited-due-to-an-organization-restriction")})}),r.div(".manage-member-section.hide.js-error",function(){return r.p(".error",{style:"margin: 16px 8px 6px;"})}),t&&(r.div(".manage-member-section.hide.js-uninvited-search-results"),r.div(".manage-member-section.hide.js-search-results",function(){return r.h4(function(){return r.format("select-to-add")}),r.ul(".pop-over-member-list.options.js-list")}),r.div(".manage-member-section.hide.js-no-results",function(){return r.p(".quiet.u-text-align-center",{style:"padding: 16px 4px;"},function(){return r.format("no-results")})}),r.div(".manage-member-section.hide.js-org-members",function(){return r.h4(function(){return r.format("orgname-members",{orgName:l})}),r.ul(".pop-over-member-list.options.u-clearfix.js-list",{class:r.classify({collapsed:c}),style:r.stylify({"margin-bottom":c?"8px":void 0})}),r.a(".quiet-button.js-add-all-org-members",{href:"#",style:"margin-top: 8px;"}),r.a(".quiet-button.js-more-org-members.hide",{href:"#",style:"margin-top: 8px;"},function(){return r.format("view-all-members")})})),n&&r.div(".js-upgrade-team"),a&&(r.hr(),r.p(".quiet.u-bottom",{style:"padding: 6px;"},function(){return s&&r.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-month",{jpsPrice:p}),u?r.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-year",{jpsPrice:p}):void 0})),n?(r.hr(),r.a(".quiet-button.js-show-invitation-link",{href:"#"},function(){return r.format("you-can-also-invite-people-by-giving-them-a-special-link")}),r.div(".manage-member-invitation-link.hide.js-invitation-link-container",function(){return r.p(function(){return r.format("anyone-you-share-this-link-with-will-be-able-to-join")}),r.input(".js-invitation-link",{type:"text",readonly:"readonly",placeholder:r.l("loading")}),r.a(".quiet-button.js-deactivate-link",{href:"#"},function(){return r.format("disable-this-link")})})):void 0})},{}],828:[function(e,t,n){var r;r=e(517)("manage_members_select_role"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("showAdmin",function(){return r.li(function(){return r.a(".js-invite.js-select-admin",{href:"#"},function(){return r.format("admin-roletext-admin",{roleText_admin:r.mustacheVar("roleText_admin")})})})}),r.li(function(){return r.a(".js-invite.js-select-member",{href:"#"},function(){return r.format("normal-roletext-normal",{roleText_normal:r.mustacheVar("roleText_normal")})})}),r.mustacheBlock("showObserver",function(){return r.li(function(){return r.a(".js-invite.js-select-observer",{href:"#"},function(){return r.format("observer"),r.icon("business-class"),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_observer"))})})})})})}},{}],829:[function(e,t,n){var r,i;i=e(517)("member"),r=window.avatarDomain,t.exports=i.renderable(function(e){var t,n,o,s,a,u,c;return t=e.avatarHash,n=e.fullName,c=e.username,o=e.initials,a=e.isDeactivated,s=e.isBoardAdmin,u=e.isOrganizationAdmin,t?i.img(".member-avatar",{height:"30",width:"30",src:[r,t,"30.png"].join("/"),srcset:[[r,t,"30.png 1x"].join("/"),[r,t,"50.png 2x"].join("/")].join(", "),alt:n+" ("+c+")",title:n+" ("+c+")"}):i.span(".member-initials",{title:n+" ("+c+")"},function(){return i.text(o)}),a||(s&&i.span(".member-type.admin",{title:i.l("this-member-is-an-admin-of-this-board")}),u&&i.span(".member-type.admin",{title:i.l("this-member-is-an-admin-of-this-organization")})),i.span(".member-gold-badge",{title:i.l("this-member-has-trello-gold")})})},{}],830:[function(e,t,n){var r;r=e(517)("member_account"),t.exports=function(){return r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("account-details")})}),r.a(".big-link.js-change-name-and-bio",{href:"#"},function(){return r.span(".text",function(){return r.format("change-name-initials-or-bio")})}),r.a(".big-link.js-change-avatar",{href:"#"},function(){return r.span(".text",function(){return r.format("change-avatar")})}),r.a(".big-link.js-change-password",{href:"#"},function(){return r.span(".text",function(){return r.mustacheBlock("hasPassword",function(){return r.format("change-password")}),r.mustacheBlockInverted("hasPassword",function(){return r.format("set-password")})})}),r.a(".big-link.js-change-email",{href:"#"},function(){return r.span(".text",function(){return r.format("change-email")})}),r.a(".big-link.js-change-locale",{href:"#"},function(){return r.span(".text",function(){return r.format("change-locale")})})}),r.mustacheBlock("showMobileLoginPassword",function(){return r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("mobile-application-sign-in")})}),r.div(".u-gutter",function(){return r.input(".js-mobile-temp-password",{type:"button",value:r.l("generate-mobile-login-password")})})})}),r.div(".window-module.js-credentials-section",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("credentials")})}),r.div(".js-credentials-list.u-gutter",function(){return r.div(".spinner.loading")}),r.div(".u-gutter",function(){return r.input(".js-add-email",{type:"button",value:r.l("add-a-new-email-address")})})}),r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("notifications")})}),r.a(".big-link.js-change-email-freq",{href:"#"},function(){return r.span(".text",function(){return r.format("change-notification-email-frequency")})}),r.mustacheBlock("canAllowDesktopNotifications",function(){return r.a(".big-link.js-allow-desktop-notifications",{href:"#"},function(){return r.span(".text",function(){return r.format("allow-desktop-notifications")})})})}),r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("accessibility")})}),r.a(".big-link.js-toggle-cb-mode",{href:"#"},function(){return r.span(".text",function(){return r.mustacheBlock("cbEnabled",function(){return r.format("disable-color-blind-friendly-mode")}),r.mustacheBlockInverted("cbEnabled",function(){return r.format("enable-color-blind-friendly-mode")})})})}),r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("applications")})}),r.div(".js-member-applications",function(){return r.div(".spinner.loading")})}),r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("sessions")})}),r.div(".js-member-sessions.u-gutter",function(){return r.div(".spinner.loading")})}),r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("two-factor-auth")})}),r.a(".big-link.js-configure-2fa",{href:"/2fa"},function(){return r.span(".text",function(){return r.format("configure-two-factor-authentication")})})}),r.div(".window-module",function(){return r.a(".quiet-button.u-gutter.js-confirm-delete-member",{href:"#",style:"margin-top: 32px;"},function(){return r.format("permanently-delete-your-entire-account-forever")})})}},{}],831:[function(e,t,n){var r;r=e(517)("member_application"),t.exports=function(){return r.div(".member-applications-list-item-details",function(){return r.h5(function(){return r.mustacheBlock("identifier",function(){return r.text(r.mustacheVar("identifier"))}),r.mustacheBlockInverted("identifier",function(){return r.format("unknown-application")})}),r.ul(".quiet",function(){return r.mustacheBlock("permissions",function(){return r.li(function(){return r.text(r.mustacheVar("."))})})}),r.p(".quiet",function(){return r.format("approved-dateapproved",{dateApproved:r.mustacheVar("dateApproved")}),r.br(),r.mustacheBlock("neverExpires",function(){return r.format("never-expires")}),r.mustacheBlockInverted("neverExpires",function(){return r.format("expires-dateexpires",{dateExpires:r.mustacheVar("dateExpires")})})})}),r.div(".member-applications-list-item-button",function(){return r.input(".js-revoke",{type:"button",value:r.l("revoke")})})}},{}],832:[function(e,t,n){var r;r=e(517)("member_application_list"),t.exports=function(){return r.mustacheBlockInverted("hasTokens",function(){return r.p(".big-link.none",function(){return r.format("no-applications-are-using-your-trello-account")})}),r.mustacheBlock("hasTokens",function(){return r.div(".member-applications-list.u-gutter.js-list-member-applications")})}},{}],833:[function(e,t,n){var r;r=e(517)("member"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d;return t=e.avatarHash,d=e.username,o=e.fullName,s=e.initials,u=e.isDeactivated,a=e.isBoardAdmin,c=e.isOrganizationAdmin,l=o+" ("+d+")",t?(n=[window.avatarDomain,t,"30.png"].join("/"),i=[window.avatarDomain,t,"50.png"].join("/"),r.img({class:"member-avatar",height:"30",width:"30",src:n,srcset:n+" 1x, "+i+" 2x",alt:l,title:l})):r.span(".member-initials",{title:l},function(){return r.text(s)}),u||(a&&r.span(".member-type.admin",{title:r.l("this-member-is-an-admin-of-this-board")}),c&&r.span(".member-type.admin",{title:r.l("this-member-is-an-admin-of-this-organization")})),r.span(".member-gold-badge",{title:r.l("this-member-has-trello-gold")})})},{}],834:[function(e,t,n){var r;r=e(517)("member_billing_org_link"),t.exports=function(){return r.li(function(){return r.a({href:r.mustacheVar("billingLink")},function(){return r.format("displayname-billing-page",{displayName:r.mustacheVar("displayName")})})})}},{}],835:[function(e,t,n){var r;r=e(517)("member_billing_org_link_list"),t.exports=function(){return r.div(".u-gutter.markeddown",function(){return r.div({style:"max-width: 450px;"},function(){return r.h3(function(){return r.format("looking-for-your-organization-s-billing-page")}),r.ul(".js-org-link-list"),r.p(".quiet",function(){return r.format("this-is-your-personal-billing-page-you-can-manage-the-billing-for-your-business-class-organizations-on-the-above-pages")})}),r.hr()})}},{}],836:[function(e,t,n){var r;r=e(517)("member_boards_list_ad"),t.exports=function(){return r.text(r.mustacheVar("copyHtml")),r.icon("close",{class:"dark-hover ad-close js-close-ad",href:"#"})}},{}],837:[function(e,t,n){var r;r=e(517)("member_cards_base"),t.exports=r.renderable(function(e){var t;return t=e.showGroup,r.div(".window-module.u-gutter.member-cards-options",function(){return r.a(".quiet-button.mod-with-image.js-toggle-sort",{href:"#"},function(){return r.icon("overflow-menu-horizontal",{class:"quiet-button-icon"}),r.span(".js-sort-text")}),t&&r.a(".quiet-button.mod-with-image.js-set-group",{href:"#"},function(){return r.icon("filter",{class:"quiet-button-icon"}),r.span(".js-group-text")}),r.a(".quiet-button.mod-with-image.js-set-filter",{href:"#"},function(){return r.icon("filter",{class:"quiet-button-icon"}),r.span(".js-filter-text")})}),r.div(".js-cards-content")})},{}],838:[function(e,t,n){var r;r=e(517)("member_cards_board"),t.exports=r.renderable(function(e){var t,n,i,o,s,a;return a=e.url,n=e.name,i=e.org,o=e.permissionLevel,s=e.starred,t=e.lists,r.div(".member-cards-board.js-board",function(){return r.div(".board-header",function(){return r.a(".board-header-btn.no-edit.board-header-btn-name",{href:a},function(){return r.span(".board-header-btn-text",function(){return r.text(n)})}),s&&r.a(".board-header-btn.no-edit",function(){return r.span(".icon-sm.icon-star.board-header-btn-icon")}),null!=i&&r.a(".board-header-btn.board-header-btn-org-name.board-header-btn-without-icon",{href:i.url},function(){return r.span(".board-header-btn-text",function(){return r.text(i.name)})}),r.span(".board-header-btn.perms-btn.no-edit.js-permission-level",function(){return r.span(".icon-sm",{class:r.classify({"icon-organization-visible":"org"===o,"icon-public":"public"===o,"icon-private":"private"===o})})})}),r.div(".member-cards-board-lists.u-fancy-scrollbar",function(){var e,n,i,o;for(o=[],e=0,n=t.length;n>e;e++)i=t[e],o.push(r.div(".list-wrapper",function(){return r.div(".list",function(){return r.div(".list-header.u-clearfix",function(){return r.div(".list-header-name.mod-list-name",function(){return r.text(i.name)})}),r.div(".js-list.list-cards.u-fancy-scrollbar",{"data-idList":i.id})})}));return o})})})},{}],839:[function(e,t,n){var r;r=e(517)("member_cards_card"),t.exports=function(){return r.div(".js-card"),r.p(".list-card-position.quiet",function(){return r.mustacheBlock("showBoard",function(){return r.format("in-listname-on-boardname",{listName:r.mustacheVar("listName"),boardName:r.mustacheVar("boardName")})}),r.mustacheBlockInverted("showBoard",function(){return r.format("in-listname",{listName:r.mustacheVar("listName")})})})}},{}],840:[function(e,t,n){var r;r=e(517)("member_cards_date"),t.exports=function(){return r.div(".window-module-title",function(){return r.span({class:"window-module-title-icon icon-lg icon-"+r.mustacheVar("iconType")}),r.h3(function(){return r.text(r.mustacheVar("header"))})}),r.div(".card-grid.u-gutter.u-clearfix.js-list")}},{}],841:[function(e,t,n){var r,i;i=e(517)("member_cards_filter"),r=["active-day","active-week","active-month","active-year","all"],t.exports=i.renderable(function(e){var t;return t=e.filter,i.ul(".pop-over-list.checkable",function(){return r.forEach(function(e){return i.li({class:i.classify({active:e===t})},function(){return i.a(".highlight-icon.js-set-filter",{href:"#","data-filter":e},function(){return i.check(e===t,["filter-description",e])})})})})})},{}],842:[function(e,t,n){var r;r=e(517)("member_cards_group"),t.exports=r.renderable(function(e){var t,n,i;return t=e.group,n=e.organizations,i=function(e,n){return r.li({class:r.classify({active:t===e})},function(){return r.a(".highlight-icon.js-set-group",{href:"#","data-group":e},function(){return r.text(n),r.text(" "),t===e?(r.icon("check"),r.text(" ")):void 0})})},r.ul(".pop-over-list.checkable",function(){return i("all",r.l("all-boards")),i("personal",r.l("personal-boards")),n.forEach(function(e){return i(e.id,e.name)})})})},{}],843:[function(e,t,n){var r;r=e(517)("member_cards_sort"),t.exports=r.renderable(function(e){var t;return t=e.sort,r.ul(".pop-over-list.checkable",function(){return r.li({class:r.classify({active:"board"===t})},function(){return r.a(".highlight-icon.js-sort-by-board",{href:"#"},function(){return r.check("board"===t,"sort-by-board")})}),r.li({class:r.classify({active:"date"===t})},function(){return r.a(".highlight-icon.js-sort-by-due-date",{href:"#"},function(){return r.check("date"===t,"sort-by-due-date")})})})})},{}],844:[function(e,t,n){var r;r=e(517)("member_detail"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d;return l=e.showOrgs,n=e.avatarHash,o=e.fullName,a=e.hasCrown,i=e.editable,u=e.initials,d=e.username,c=e.isMe,s=e.hasAccount,t=e.accountProblem,r.div(".tabbed-pane-header",function(){return r.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return r.a({class:r.classify({"tabbed-pane-header-image":!0,"profile-image":!0,"is-editable":i,"js-change-avatar-profile":i,"is-gold":a}),href:"#"},function(){return n?r.img(".profile-image-image",{src:[avatarDomain,n,"170.png"].join("/"),alt:o}):r.span(".profile-image-initials",function(){return r.text(u)}),r.span(".profile-image-change-text",function(){return r.format("change-avatar")})}),r.div(".tabbed-pane-header-details",function(){return r.div(".js-current-details"),i?r.form(".js-profile-form.hide"):void 0})})}),r.div(".tabbed-pane-nav.u-clearfix",function(){return r.ul(function(){r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-member-profile",{"data-tab":"profile",href:["",d].join("/")},function(){return r.format("profile")})}),r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-member-cards",{"data-tab":"cards",href:["",d,"cards"].join("/")},function(){return r.format("cards")})}),c&&(r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-member-account",{"data-tab":"settings",href:["",d,"account"].join("/")},function(){return r.format("settings")})}),t?r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"billing-issue",href:["",d,"billing"].join("/")},function(){return r.format("billing-issue")})}):s?r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"billing",href:["",d,"billing"].join("/")},function(){return r.format("billing")})}):r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"trello-gold",href:["",d,"billing"].join("/")},function(){return r.span(".icon-lg.icon-trello-gold.mod-inline.icon-trello-gold-color"),r.text(" "),r.format("trello-gold")})}))})}),r.div(".tabbed-pane-main-col.u-clearfix.mod-wider",function(){return r.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return r.span(".tabbed-pane-main-col-loading-spinner.spinner")}),r.div(".tabbed-pane-main-col-wrapper.js-content")})})},{}],845:[function(e,t,n){var r;r=e(517)("member_detail_profile_edit"),t.exports=function(){return r.p(".error.js-profile-form-error.hide"),r.label(function(){return r.format("full-name")}),r.input({type:"text",name:"fullName",value:r.mustacheVar("fullName"),dir:"auto",maxLength:128}),r.label(function(){return r.format("username")}),r.input({type:"text",name:"username",value:r.mustacheVar("username"),maxLength:100}),r.label(function(){return r.format("initials")}),r.input({type:"text",name:"initials",value:r.mustacheVar("initials"),maxLength:8}),r.label(function(){return r.format("bio-optional")}),r.textarea({name:"bio",dir:"auto",maxLength:16384},function(){return r.text(r.mustacheVar("bio"))}),r.input(".primary.wide.js-submit-profile",{type:"submit",value:r.l("save")}),r.input(".js-cancel-edit-profile",{type:"button",value:r.l("cancel")})}},{}],846:[function(e,t,n){var r;r=e(517)("member_detail_profile_info"),t.exports=function(){return r.div(".tabbed-pane-header-details-name",function(){return r.h1(".u-inline",function(){return r.text(r.mustacheVar("fullName"))}),r.p(".window-title-extra.quiet",function(){return r.format("at-username",{username:r.mustacheVar("username")})}),r.mustacheBlock("hasCrown",function(){return r.span(".member-profile-gold-badge",function(){return r.icon("trello-gold",{class:"member-profile-gold-badge-icon"}),r.mustacheBlock("__ed",function(){return r.format("you-ve-got-trello-gold")}),r.mustacheBlockInverted("__ed",function(){return r.format("has-trello-gold")})})})}),r.div(".tabbed-pane-header-details-content",{dir:"auto"},function(){return r.mustacheBlock("bioHtml",function(){return r.raw(r.mustacheVar("bioHtml"))})}),r.mustacheBlock("__ed",function(){return r.a(".button-link.tabbed-pane-header-details-edit.js-edit-profile",{href:"#"},function(){return r.icon("edit","edit-profile")})})}},{}],847:[function(e,t,n){var r;r=e(517)("member_gold_earned"),t.exports=r.renderable(function(e){var t,n,i,o,s;return n=e.hasInvitations,i=e.joinedNames,o=e.localizedCongratulations,s=e.showClose,t=e.hasGold,r.div(".window-module.gold-earned-modal",function(){return s&&r.a(".icon-lg.icon-close.dark-hover.gold-earned-modal-close.js-close-modal",{href:"#"}),r.img(".gold-earned-modal-image",{src:"https://a.trellocdn.com/images/3cbf48993d46484c5d82cc9c1844a54b/TrelloGoldIcon.png"}),r.h1(function(){return n?r.format("youve-earned-trello-gold"):r.format("youve-got-trello-gold")}),r.p(function(){return r.text(o)}),r.p(function(){return r.format("the-following-people-have-joined-trello-on-your-recommendation-or-invite"),r.ul(function(){return i.forEach(function(e){return r.li(function(){return r.text(e)})})})}),r.p(".gold-earned-modal-learn-more.quiet",function(){return r.a({href:"/gold"},function(){return r.format("learn-more-about-trello-gold")})}),t||r.a(".gold-earned-modal-button.button.primary.js-start-using-gold",{href:"#"},function(){return r.format("start-using-trello-gold")}),s?r.p(".quiet",{style:"margin-top: 16px;"},function(){return r.format("you-can-visit-your-account-settings-page-later-to-redeem-your-credits"),r.a(".js-close-modal",{href:"#"},function(){return r.text(" "),r.format("okay-thanks-close-this-header-thing")})}):void 0})})},{}],848:[function(e,t,n){var r;r=e(517)("member_gold_intro"),t.exports=r.renderable(function(e){var t;return t=e.hasThreePowerups,r.div(".product-intro-modal.gold-intro",function(){var e,n;return n=0,e=function(){return n+=1,r.span(".product-intro-number",function(){return r.text(n.toString())})},r.a(".icon-lg.icon-close.dark-hover.product-intro-close.js-close-intro-helper",{href:"#"}),r.div(".product-intro-header",function(){return r.img(".product-intro-logo",{src:"https://a.trellocdn.com/images/6d243fedef388195ac2dd4bf3f6fcfa5/TrelloGoldLogo.png",alt:"Trello Gold"})}),r.hr(),r.h2(function(){return r.format("yessssss-youve-got-trello-gold")}),r.p(function(){return r.format("here-s-what-you-need-to-know-to-get-started-ellipsis")}),t&&r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("more-power-ups")}),r.p(function(){return r.format("you-can-turn-on-up-to-three-power-ups-on-each-of-your-boards")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("stickers")}),r.p(function(){return r.format("check-out-the-stickers-pane-on-the-menu-of-any-board-you-can-view-and-stick-additional-stickers-and-upload-your-own-from-there")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("board-backgrounds")}),r.p(function(){return r.format("check-out-the-settings-pane-in-the-menu-of-any-board-and-select-change-board-background-from-there-you-can-view-and-use-additional-backgrounds-and-upload-your-own")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("larger-attachments")}),r.p(function(){return r.format("you-can-now-upload-files-up-to-250mb-just-select-a-file-via-attach-file-ellipsis-on-the-back-of-the-card-or-drag-and-drop-from-your-desktop")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("uploading-custom-emoji")}),r.p(function(){return r.format("while-on-a-card-open-the-comment-field-click-the-menu-button-in-the-bottom-right-hand-corner-and-select-upload-emoji-you-can-upload-images-and-name-the-emoji-from-there")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("billing-page")}),r.p(function(){return r.format("check-out-the-billing-tab-for-future-reference-you-can-see-when-your-account-will-renew-update-your-credit-card-info-see-billing-history-and-so-on-if-you-signed-up-via-credits-you-can-check-when-your-credits-expire-and-you-can-enter-a-credit-card-and-sign-up-for-a-subscription")})}),r.p(function(){return r.format("this-will-be-in-the-trello-gold-user-guide-for-future-reference-enjoy-and-thanks-for-upgrading")}),r.p(".product-intro-close-bottom.u-text-align-center.quiet",function(){return r.a(".js-close-intro-helper.dark-hover",{href:"#"},function(){return r.icon("close","got-it-close-this-helper",{class:"dark-hover"})})})})})},{}],849:[function(e,t,n){var r;r=e(517)("member_inline"),t.exports=function(){return r.mustacheBlock("avatarHash",function(){return r.img(".inline-member-av",{src:r.mustacheVar("__avatarDomain")+"/"+r.mustacheVar("avatarHash")+"/30.png",alt:r.mustacheVar("fullName")+" ("+r.mustacheVar("username")+")",title:r.mustacheVar("fullName")+" ("+r.mustacheVar("username")+")"})}),r.span(".u-font-weight-bold",function(){return r.text(r.mustacheVar("fullName"))})}},{}],850:[function(e,t,n){var r;r=e(517)("member_large_avatar"),t.exports=r.renderable(function(e){var t,n,i,o;return t=e.avatarHash,n=e.fullName,o=e.username,i=n+" ("+o+")",r.img({src:[window.avatarDomain,t,"original.png"].join("/"),alt:i,title:i})})},{}],851:[function(e,t,n){var r,i;i=e(517)("member_list_item_detail"),r=e(829),t.exports=function(){return i.div({class:"member member-no-menu"+i.mustacheBlock("isVirtual",function(){return" member-virtual"})+i.mustacheBlock("isDeactivated",function(){return" member-deactivated"})},function(){return r(i.mustacheVar("."))}),i.div(".details",function(){return i.p(".name-line",function(){return i.span(".full-name",function(){return i.text(i.mustacheVar("fullName"))})}),i.p(".u-bottom.quiet",function(){return i.mustacheBlock("username",function(){return i.span(".quiet.u-inline-block",function(){return i.format("at-username",{username:i.mustacheVar("username")})})}),i.mustacheBlock("showGoogleApps",function(){return i.mustacheBlock("gMail",function(){return i.mustacheBlock("username",function(){return i.text("- ")}),i.icon("google"),i.text(i.mustacheVar("gMail"))})})})}),i.div(".options",function(){return i.mustacheBlock("isOrgMember",function(){return i.mustacheBlock("showActivity",function(){return i.a(".option.quiet-button.js-view-activity",{
href:"#"},function(){return i.format("activity")})}),i.mustacheBlock("allowTypeChange",function(){return i.a(".option.button-link.role-button.js-change-role",{href:"#"},function(){return i.text(i.mustacheVar("orgMemberType")),i.icon("overflow-menu-horizontal")})}),i.mustacheBlockInverted("allowTypeChange",function(){return i.p(".option.status.quiet",function(){return i.text(i.mustacheVar("orgMemberType"))})}),i.mustacheBlock("allowReactivate",function(){return i.a(".option.quiet-button.js-reactivate",{href:"#"},function(){return i.format("reactivate")})}),i.mustacheBlock("isMe",function(){return i.a({class:"option button-link remove-button js-remove-or-deactivate "+i.mustacheBlockInverted("canRemove",function(){return"disabled"}),href:"#"},function(){return i.mustacheBlock("orgIsBC",function(){return i.icon("close","leave-ellipsis")}),i.mustacheBlockInverted("orgIsBC",function(){return i.icon("close","leave")})})}),i.mustacheBlockInverted("isMe",function(){return i.mustacheBlock("ownsOrg",function(){return i.a({class:"option button-link remove-button js-remove-or-deactivate "+i.mustacheBlockInverted("canRemove",function(){return"disabled"}),href:"#"},function(){return i.icon("close","remove-ellipsis")})})})}),i.mustacheBlockInverted("isOrgMember",function(){return i.mustacheBlock("showGoogleApps",function(){return i.mustacheBlockInverted("hidden",function(){return i.a(".option.quiet-button.js-hide-member",{href:"#"},function(){return i.format("dismiss")})}),i.mustacheBlock("hidden",function(){return i.a(".option.quiet-button.js-unhide-member",{href:"#"},function(){return i.format("always-show")})}),i.a(".option.button-link.primary.js-invite-to-org",{href:"#"},function(){return i.icon("add","add-member")})})})})}},{}],852:[function(e,t,n){var r;r=e(517)("member_login"),t.exports=function(){return r.p(".member-login-email.u-bottom",function(){return r.text(r.mustacheVar("email"))}),r.mustacheBlock("primary",function(){return r.p(".u-bottom.quiet",function(){return r.format("primary-email")})}),r.mustacheBlockInverted("primary",function(){return r.a(".js-primary.u-bottom.quiet",{href:"#"},function(){return r.format("set-as-primary-email")})}),r.p(".member-login-date-added.u-bottom.quiet",function(){return r.format("added",{dateAdded:r.mustacheVar("dateAdded")})}),r.mustacheBlockInverted("primary",function(){return r.icon("close",{class:"member-login-remove dark-hover js-remove"})})}},{}],853:[function(e,t,n){var r;r=e(517)("member_on_board_menu"),t.exports=function(){return r.li(function(){return r.mustacheVar("canInviteMemberToTeam")&&r.a({class:"js-add-to-team",href:"#"},function(){return r.format("add-to-team")}),r.mustacheBlock("type",function(){return r.a({class:r.mustacheBlock("canChangeRole",function(){return"js-change-role"})+r.mustacheBlockInverted("canChangeRole",function(){return"disabled"}),href:"#"},function(){return r.format("change-permissions-ellipsis-type",{type:r.mustacheVar("type")})})}),r.mustacheBlockInverted("type",function(){return r.a({class:r.mustacheBlock("canChangeRole",function(){return"js-change-role"})+r.mustacheBlockInverted("canChangeRole",function(){return"disabled"}),href:"#"},function(){return r.format("change-permissions-ellipsis")})})}),r.li(function(){return r.a({href:r.mustacheVar("boardProfileUrl")},function(){return r.format("view-member-s-board-activity")})}),r.mustacheBlock("canRemove",function(){return r.li(function(){return r.a(".js-remove-member",function(){return r.mustacheBlock("isMe",function(){return r.format("leave-board-ellipsis")}),r.mustacheBlockInverted("isMe",function(){return r.format("remove-from-board-ellipsis")})})})}),r.mustacheBlockInverted("canRemove",function(){return r.mustacheBlock("isMe",function(){return r.mustacheBlock("isMoreThanOneMember",function(){return r.mustacheBlock("memberIsAdmin",function(){return r.li(function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("you-can-t-leave-because-you-are-the-only-admin-to-make-another-user-an-admin-click-their-avatar-select-change-permissions-ellipsis-and-select-admin")})})})})})}),r.mustacheBlock("isGhost",function(){return r.li(function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("this-user-will-be-able-to-access-this-board-once-they-sign-up-with-trello-and-confirm-their-email-address")})})})}},{}],854:[function(e,t,n){var r,i;i=e(517)("member_on_card"),r=e(829),t.exports=i.renderable(function(e){var t,n,o,s,a,u,c,l,d;return t=e.avatarHash,n=e.fullName,o=e.id,s=e.initials,u=e.isDeactivated,a=e.isBoardAdmin,c=e.isOrganizationAdmin,l=e.isVirtual,d=e.username,i.div(".member.js-member-on-card-menu",{class:i.classify({"member-deactivated":u,"member-virtual":l}),"data-idmem":o},function(){return r({avatarHash:t,fullName:n,initials:s,isDeactivated:u,isBoardAdmin:a,isOrganizationAdmin:c,username:d})})})},{}],855:[function(e,t,n){var r;r=e(517)("member_on_card_menu"),t.exports=function(){return r.mustacheBlock("__ed",function(){return r.li(function(){return r.a(".js-remove-member",function(){return r.format("remove-from-card")})})})}},{}],856:[function(e,t,n){var r;r=e(517)("member_profile"),t.exports=function(){return r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.span(".window-module-title-icon.icon-lg.icon-organization"),r.h3(function(){return r.format("organizations")})}),r.div(".u-gutter.js-list-orgs")}),r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.span(".window-module-title-icon.icon-lg.icon-activity"),r.h3(function(){return r.format("activity")})}),r.div(".list-actions"),r.p(".u-bottom",function(){return r.a(".show-more.js-more-actions",{href:"#"},function(){return r.format("load-more-activity")})})})}},{}],857:[function(e,t,n){var r,i;i=e(517)("member_profile_info"),r=e(829),t.exports=function(){return i.div(".member-profile-info.u-clearfix",{name:i.mustacheVar("username")},function(){return i.div(".member",function(){return r(i.mustacheVar("."))}),i.div(".info",function(){return i.h3(".u-bottom",function(){return i.a(".js-profile",{href:"/"+i.mustacheVar("username")},function(){return i.text(i.mustacheVar("fullName"))})}),i.p(".quiet.u-bottom",function(){return i.format("at-username",{username:i.mustacheVar("username")})}),i.mustacheBlock("bio",function(){return i.p(".member-profile-info-bio.quiet",{title:i.mustacheVar("bio")},function(){return i.raw(i.mustacheVar("bioHtml"))})}),i.p(".quiet.u-bottom",function(){return i.mustacheBlock("showMemberOptions",function(){return i.mustacheBlock("orgCardsUrl",function(){return i.a({href:i.mustacheVar("orgCardsUrl")},function(){return i.format("view-org-cards")})}),i.mustacheBlock("__ed",function(){return i.span(function(){return i.a(".js-remove-mem",{href:"#"},function(){return i.format("remove-from-org")})})})})})})})}},{}],858:[function(e,t,n){var r;r=e(517)("member_session"),t.exports=function(){return r.mustacheBlock("type_support",function(){return r.p(".u-bottom",function(){return r.format("authorization-for-trello-support-ticket-data-ticket",{"data.ticket":r.mustacheVar("data.ticket")}),r.br(),r.span(".quiet",function(){return r.format("expires",{dateExpires:r.mustacheVar("dateExpires")}),r.raw(" "),r.a(".quiet.js-revoke",{href:"#"},function(){return r.format("revoke")})})})}),r.mustacheBlockInverted("type_support",function(){return r.p(".u-bottom",function(){return r.strong(function(){return r.text(r.mustacheVar("ipAddress"))}),r.span(".quiet"),r.br(),r.span(".quiet",function(){return r.mustacheBlock("isRecent",function(){return r.mustacheBlock("isCurrent",function(){return r.format("last-used-less-than-an-hour-ago-current-session")}),r.mustacheBlockInverted("isCurrent",function(){return r.format("last-used-less-than-an-hour-ago")})}),r.mustacheBlockInverted("isRecent",function(){return r.mustacheBlock("isCurrent",function(){return r.format("last-used-current-session",{dateLastUsed:r.mustacheVar("dateLastUsed")})}),r.mustacheBlockInverted("isCurrent",function(){return r.format("last-used",{dateLastUsed:r.mustacheVar("dateLastUsed")})})})})})})}},{}],859:[function(e,t,n){var r;r=e(517)("member_session_list"),t.exports=function(){return r.div(".js-sessions"),r.input(".js-log-out-other",{type:"button",value:r.l("log-out-other-sessions")})}},{}],860:[function(e,t,n){var r,i;i=e(517)("members_voted"),r=e(829),t.exports=function(){return i.mustacheBlock("loading",function(){return i.p(".quiet.u-text-align-center",{style:"margin: 24px 0;"},function(){return i.format("loading-ellipsis")})}),i.mustacheBlockInverted("loading",function(){return i.div({class:"list-voters u-clearfix "+i.mustacheBlock("fewMembers",function(){return"compact"})},function(){return i.mustacheBlock("members",function(){return i.div(".voter",function(){return i.div(".member.member-no-menu",function(){return r(i.mustacheVar("."))}),i.mustacheBlock("fewMembers",function(){return i.p(".title",function(){return i.text(i.mustacheVar("fullName")),i.text(" "),i.span(".quiet",function(){return i.format("username",{username:i.mustacheVar("username")})})})})})})}),i.mustacheBlock("moreMembers",function(){return i.a(".show-more.mod-compact.js-more-members-voted",{href:"#"},function(){return i.format("show-all-voters-lengthdiff-more",{lengthDiff:i.mustacheVar("lengthDiff")})})}),i.mustacheBlock("canVote",function(){return i.hr(),i.mustacheBlock("voted",function(){return i.a(".quiet-button.u-text-align-center.js-unvote",{href:"#"},function(){return i.format("remove-your-vote")})}),i.mustacheBlockInverted("voted",function(){return i.button(".button.primary.full.js-vote",{href:"#"},function(){return i.format("vote")})})})})}},{}],861:[function(e,t,n){var r;r=e(517)("menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.ul(".dynamic-pop-over-list")}),r.mustacheBlock("menu_cards",function(){return r.li(function(){return r.a({class:r.mustacheVar("js_class"),href:r.mustacheBlock("url",function(){return r.mustacheVar("url")})+r.mustacheBlockInverted("url",function(){return"#"})},function(){return r.text(r.mustacheVar("name"))})})})})}},{}],862:[function(e,t,n){var r;r=e(517)("menu_base"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.ul(".boards-pop-over-list")}),r.raw(r.mustacheVar("content"))})}},{}],863:[function(e,t,n){var r;r=e(517)("mini_profile"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c;return t=e.avatarHash,o=e.fullName,c=e.username,s=e.initials,n=e.bio,i=e.email,u=e.showEmail,a=e.isMe,r.div(".mini-profile",function(){return r.div(".mini-profile-member.member-large",function(){var e;return a?r.a(".av-btn.change.js-change-av",{href:"#"},function(){return r.format("change")}):t&&r.a(".av-btn.js-view-large",{href:"#"}),e=o+" ("+c+")",t?r.img(".member-avatar",{height:"50",width:"50",src:[window.avatarDomain,t,"50.png"].join("/"),alt:e,title:e}):r.span(".member-initials",{title:e},function(){return r.text(s)})}),r.div(".mini-profile-info",function(){return r.h3(".mini-profile-info-title",function(){return r.a(".mini-profile-info-title-link.js-profile",{href:"/"+c},function(){return r.text(o)})}),r.p(".quiet.u-bottom",function(){return r.format("at-username",{username:c})}),n&&r.p(".mini-profile-info-bio.quiet",function(){return r.text(n)}),u&&r.p(".u-bottom.quiet",function(){return r.text(i)}),a?r.p(".u-bottom",function(){return r.a(".quiet.js-edit-profile",{href:"#"},function(){return r.format("edit-profile-info")})}):void 0})})})},{}],864:[function(e,t,n){var r;r=e(517)("move_card_controls"),t.exports=function(){return r.mustacheBlockInverted("hideBoard",function(){return r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("board")}),r.span(".value.js-board-value"),r.label(function(){return r.format("board")}),r.select(".js-select-board",function(){return r.mustacheBlock("organizations",function(){return r.optgroup({label:r.mustacheVar("displayName")},function(){return r.mustacheBlock("boards",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("name")),r.mustacheBlock("selected",function(){return r.text(" "),r.format("current")})})})})})})})})}),r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-threequarters",function(){return r.span(".label",function(){return r.format("list")}),r.span(".value.js-list-value"),r.label(function(){return r.format("list")}),r.select(".js-select-list")}),r.div(".button-link.setting.form-grid-child.form-grid-child-quarter",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-position")})})}},{}],865:[function(e,t,n){var r;r=e(517)("observer_list"),t.exports=function(){return r.ul({class:"pop-over-member-list js-list "+r.mustacheBlock("__ed",function(){return"js-list-draggable-board-members"})})}},{}],866:[function(e,t,n){var r;r=e(517)("org_bc_intro"),t.exports=r.renderable(function(e){var t,n,i;return i=e.isEnterprise,t=e.hasCSVExport,n=e.hasGoldMembers,r.div(".product-intro-modal.bc-intro",function(){var e,o;return o=0,e=function(){return o+=1,r.span(".product-intro-number",function(){return r.text(o.toString())})},r.a(".icon-lg.icon-close.dark-hover.product-intro-close.js-close-intro-helper",{href:"#"}),r.div(".product-intro-header",function(){return i?r.img(".product-intro-logo",{src:"https://a.trellocdn.com/images/c44c457cc4c18c2cb7d1cb3b27effeda/trello-enterprise-with-text.png",alt:"Trello Enterprise"}):r.img(".product-intro-logo",{src:"https://a.trellocdn.com/images/65f97b9241872243c0b94f8bfa08a66a/trello-business-class-with-text.png",alt:"Trello Business Class"})}),r.hr(),r.div(".product-intro-section",function(){return r.h2(function(){return i?r.format("welcome-to-enterprise"):r.format("welcome-to-business-class")}),r.p(function(){return r.format("to-get-started")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("visit-the-members-tab-to-manage-members")}),r.p(function(){return r.format("you-can-link-your-google-apps-domain-change-roles-and-deactivate-members-and-view-member-activity-on-the-members-tab-above")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("check-out-the-organization-settings-page")}),r.p(function(){return r.format("to-check-out-organization-and-board-invite-restrictions-and-board-creation-restrictions-click-the-organization-settings-tab-above")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("organize-your-boards-with-collections")}),r.p(function(){return r.format("scroll-down-on-this-page-to-see-your-teams-boards-and-click-create-a-collecction")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("supercharge-your-boards-with-Power-Ups")}),r.p(function(){return r.format("open-the-power-ups-menu-in-the-menu-on-the-right-side-of-your-teams-boards-to-integrate-trello")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("create-bulk-exports-in-one-click")}),r.p(function(){return t?r.format("click-the-export-tab-to-open-the-export-dialog-exports-include-all-of-your-organization-s-data-optionally-including-attachments-exports-will-be-in-csv-and-json-format"):r.format("click-the-export-tab-to-open-the-export-dialog-exports-include-all-of-your-organization-s-data-optionally-including-attachments-exports-will-be-in-json-format")})}),n&&r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("use-board-backgrounds-and-stickers")}),r.p(function(){return r.format("open-the-board-menu-and-select-stickers-or-change-background-you-ll-see-additional-stickers-and-backgrounds-plus-you-can-upload-your-own")})}),i||r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("for-billing-info-ellipsis")}),r.p(function(){return r.format("to-see-billing-history-change-a-credit-card-or-change-the-billing-contact-click-the-billing-tab-above")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("check-the-user-guide")}),r.p({style:"margin-bottom: 0;"},function(){return i?r.format("everything-else-is-outlined-in-the-enterprise-user-guide"):r.format("everything-else-is-outlined-in-the-business-class-user-guide-business-class-features-are-usually-marked-with-this-icon")})}),r.p(".product-intro-close-bottom.u-text-align-center.quiet",function(){return r.a(".js-close-intro-helper.dark-hover",{href:"#"},function(){return r.icon("close","got-it-close-this-helper",{class:"dark-hover"})})})})})},{}],867:[function(e,t,n){var r;r=e(517)("org_boards_for_member"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("boards",function(){return r.li(function(){return r.a({href:r.mustacheVar("url")},function(){return r.text(r.mustacheVar("name")),r.text(" "),r.span(".quiet",function(){return r.format("membertype",{memberType:r.mustacheVar("memberType")})})})})})})}},{}],868:[function(e,t,n){var r;r=e(517)("org_create"),t.exports=function(){return r.form(function(){return r.p(".error",{style:"display:none"}),r.label({for:"org-display-name"},function(){return r.format("name")}),r.input(".js-autofocus.js-display-name",{type:"text",name:"displayName",id:"org-display-name",value:r.mustacheVar("displayName"),dir:"auto",maxLength:100}),r.label({for:"org-desc"},function(){return r.format("description-optional")}),r.textarea({id:"org-desc",name:"desc",dir:"auto"},function(){return r.text(r.mustacheVar("desc"))}),r.input(".primary.wide.js-save",{type:"submit",value:r.l("create")})}),r.hr(),r.p(".quiet",function(){return r.format("an-organization-is-a-group-of-boards-and-people-it-helps-keep-your-company-team-or-family-organized")}),r.p(".quiet.u-bottom",function(){return r.format("business-class-gives-your-organization-more-security-administrative-controls-and-superpowers"),r.text(" "),r.a(".js-business-class",{href:"/business-class",target:"_blank"},function(){return r.format("learn-more")})})}},{}],869:[function(e,t,n){var r;r=e(517)("org_detail"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d,p,h;return p=e.name,n=e.editable,d=e.logoHash,a=e.isEnterprise,h=e.paysWithPurchaseOrder,s=e.isBusinessClassAdmin,c=e.isInOrg,l=e.isOrgAdmin,i=e.hasAccount,t=e.accountProblem,u=e.isFullWidth,o=e.hasUnlimitedPowerUps,r.div(".tabbed-pane-header",function(){return r.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return r.a({class:r.classify({"tabbed-pane-header-image":!0,"profile-image":!0,"is-editable":n,"js-change-org-logo":n}),href:"#"},function(){return d?r.img(".profile-image-image",{src:[logoDomain,d,"170.png"].join("/")}):r.span(".profile-image-icon.icon-lg.icon-organization"),r.span(".profile-image-change-text",function(){return r.format("change-logo")})}),r.div(".tabbed-pane-header-details",function(){return r.div(".js-current-details"),n?r.form(".js-profile-form.hide"):void 0})})}),r.div(".tabbed-pane-nav.u-clearfix",function(){return r.ul(function(){var e;r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-profile",{"data-tab":"boards",href:["",p].join("/")},function(){return r.format("boards")})}),r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-members",{"data-tab":"members",href:["",p,"members"].join("/")},function(){return r.format("members")})}),s&&r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-export",{"data-tab":"export",href:["",p,"export"].join("/")},function(){return r.icon("business-class"),r.format("export")})}),c&&r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-account",{"data-tab":"settings",href:["",p,"account"].join("/")},function(){return r.format("settings")})}),!c||a||h||(e=["",p,"billing"].join("/"),r.li(".tabbed-pane-nav-item",function(){return i?t?r.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"billing-issue",href:e},function(){return r.format("billing-issue")}):r.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"billing",href:e},function(){return r.format("billing")}):o?void 0:r.a(".tabbed-pane-nav-item-button.dark-hover.js-billing",{"data-tab":"business-class",href:e},function(){return r.span(".icon-sm.icon-business-class.mod-inline.icon-business-class-color"),r.text(" "),r.format("business class")})}))})}),r.div(".tabbed-pane-main-col.u-clearfix",function(){return r.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return r.span(".tabbed-pane-main-col-loading-spinner.spinner")}),r.div({class:r.classify({"tabbed-pane-main-col-wrapper":!0,"js-content":!0,"is-full-width":u})})})})},{}],870:[function(e,t,n){var r;r=e(517)("org_detail_profile_edit"),t.exports=function(){return r.p(".error.js-profile-form-error.hide"),r.label(function(){return r.format("name")}),r.input({type:"text",name:"displayName",value:r.mustacheVar("displayName"),dir:"auto"}),r.label(function(){return r.format("short-name")}),r.input({type:"text",name:"name",value:r.mustacheVar("name")}),r.label(function(){return r.format("website")}),r.input({type:"text",name:"website",value:r.mustacheVar("website")}),r.label(function(){return r.format("description-optional")}),r.textarea({name:"desc",dir:"auto"},function(){return r.text(r.mustacheVar("desc"))}),r.input(".primary.wide.js-submit-profile",{type:"submit",value:r.l("save")}),r.input(".js-cancel-edit-profile",{type:"button",value:r.l("cancel")})}},{}],871:[function(e,t,n){var r;r=e(517)("org_detail_profile_info"),t.exports=r.renderable(function(e){var t,n,i,o,s,a,u,c,l,d,p,h;return o=e.displayName,s=e.enterpriseUI,a=e.isBusinessClass,d=e.permissionLevel,c=e.pLevelAltText,l=e.pLevelDisplayText,i=e.descriptionHtml,h=e.websiteHref,p=e.website,t=e.accountProblem,u=e.name,n=e.canEdit,r.div(".tabbed-pane-header-details-name",function(){return r.h1(".u-inline",function(){return r.text(o)}),s?r.span(".window-title-extra",function(){return r.icon("enterprise"),r.format("enterprise")}):a&&r.span(".window-title-extra",function(){return r.icon("business-class"),r.format("business-class")}),r.span(".window-title-extra",function(){return r.icon(d,{title:c}),r.text(l)})}),r.div(".tabbed-pane-header-details-content",{dir:"auto"},function(){return null!=i&&r.raw(i),null!=h&&r.p(function(){return r.a({href:h},function(){return r.text(p)})}),t?r.div({style:"padding: 4px 8px; background-color: orange; margin-bottom: 8px;"},function(){return r.p(".u-bottom",function(){return r.format("oops-there-is-a-problem-with-your-billing-information-visit-billing-to-fix-it",{name:u})})}):void 0}),n?r.a(".button-link.tabbed-pane-header-details-edit.js-edit-profile",{href:"#"},function(){return r.icon("edit","edit-profile")}):void 0})},{}],872:[function(e,t,n){var r;r=e(517)("org_export"),t.exports=function(){return r.div(".window-module.org-export-header",function(){return r.button(".org-export-header-button.primary.js-create-new-export",function(){return r.format("create-new-export")}),r.div(".org-export-header-options.u-clearfix",function(){return r.input({id:"includeAttachments",type:"checkbox"}),r.label(".quiet.u-inline.u-font-weight-normal",{for:"includeAttachments"},function(){return r.format("include-raw-attachments-ellipsis")})}),r.p(".quiet.org-export-header-text",function(){return r.mustacheBlock("hasCSV",function(){return r.format("downloads-will-be-in-a-zip-format-that-includes-members-boards-and-all-other-data-in-csv-and-json-formats-if-you-choose-to-include-raw-attachments-they-will-be-in-their-native-format-otherwise-they-will-include-a-link-to-the-version-in-trello")}),r.mustacheBlockInverted("hasCSV",function(){return r.format("downloads-will-be-in-a-zip-format-that-includes-members-boards-and-all-other-data-in-json-format-if-you-choose-to-include-raw-attachments-they-will-be-in-their-native-format-otherwise-they-will-include-a-link-to-the-version-in-trello")})})}),r.div(".window-module.org-export-list",function(){return r.div(".window-module-title",function(){return r.span(".window-module-title-icon.icon-lg.icon-archive"),r.h3(function(){return r.format("exports")})}),r.div(".u-gutter.u-clearfix.js-list-exports")})}},{}],873:[function(e,t,n){var r;r=e(517)("org_export_empty"),t.exports=function(){return r.p(".quiet",{style:"padding: 7px 0;"},function(){return r.format("no-exports-click-create-new-export-to-generate-a-new-one")})}},{}],874:[function(e,t,n){var r;r=e(517)("org_export_item"),t.exports=function(){return r.div({class:"org-export-list-item u-clearfix"+r.mustacheBlock("generating",function(){return" org-export-list-item-generating"})},function(){return r.mustacheBlock("generating",function(){return r.p(".org-export-list-item-title",function(){return r.mustacheBlock("status",function(){return r.text(r.mustacheVar("stage")),r.mustacheBlock("total",function(){return r.format("progress-of-total",{progress:r.mustacheVar("progress"),total:r.mustacheVar("total")})})}),r.mustacheBlockInverted("status",function(){return r.format("creating-new-export-ellipsis")})})}),r.mustacheBlockInverted("generating",function(){return r.p(".org-export-list-item-title",function(){return r.mustacheBlock("attachments",function(){return r.format("time-size-includes-attachments",{time:r.mustacheVar("time"),size:r.mustacheVar("size")})}),r.mustacheBlockInverted("attachments",function(){return r.format("time-size",{time:r.mustacheVar("time"),size:r.mustacheVar("size")})})}),r.a(".button-link.org-export-list-item-button.js-download-export",{href:r.mustacheVar("exportUrl"),target:"_blank"},function(){return r.format("download")})})})}},{}],875:[function(e,t,n){var r;r=e(517)("org_link_ga_helper"),t.exports=function(){return r.div(".ga-link-helper-section",function(){return r.p(function(){return r.format("1-first-you-must-enable-administrative-api-access-for-your-google-apps-domain-you-can-find-instructions-for-doing-so-here")}),r.p(function(){return r.format("2-next-you-ll-need-to-add-the-trello-business-class-app-from-the-google-apps-marketplace-to-your-domain-the-button-below-will-get-you-there")}),r.p(function(){return r.format("3-when-there-be-sure-you-are-signed-in-to-the-google-account-with-the-correct-domain-you-want-to-use-click-the-integrate-with-google-button-then-follow-the-prompts")}),r.p(function(){return r.format("4-you-ll-see-other-users-from-your-google-apps-domain-on-this-page-when-configured-correctly")})}),r.a(".button.js-link",{style:"width: 100%; padding: 7px 0;",target:"_blank",href:"https://chrome.google.com/webstore/detail/trello-business-class/hmhbhkhihjbjgghmkhhniddhlojffhil"},function(){return r.format("go-to-google-apps-marketplace")})}},{}],876:[function(e,t,n){var r;r=e(517)("org_member_activity"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.mustacheBlock("hasBoards",function(){return r.a(".js-view-org-boards-for-member",{href:"#"},function(){return r.format("on-boardcount",{boardCount:r.mustacheVar("boardCount")})})}),r.mustacheBlockInverted("hasBoards",function(){return r.a(".disabled",{href:"#"},function(){return r.format("on-boardcount",{boardCount:r.mustacheVar("boardCount")})})})}),r.mustacheBlock("orgCardsUrl",function(){return r.li(function(){return r.a(".js-view-member-org-cards",{href:r.mustacheVar("orgCardsUrl")},function(){return r.format("view-members-org-cards")})})})}),r.mustacheBlock("lastActive",function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("fullname-was-last-active-in-this-organization",{fullName:r.mustacheVar("fullName"),lastActive:r.mustacheVar("lastActive")})})})}},{}],877:[function(e,t,n){var r;r=e(517)("org_pref_restriction"),t.exports=function(){return r.li(function(){return r.text(r.mustacheVar("restriction")),r.a(".dark-hover.js-restricted-address",{href:"#","data-pattern":r.mustacheVar("restriction")},function(){return r.icon("close",{class:"option close"})})})}},{}],878:[function(e,t,n){var r;r=e(517)("org_prefs_nonorg_invites"),t.exports=r.renderable(function(e){var t;return t=e.externalMembersDisabled,r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-be-added-to-team-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",function(){return r.li({class:r.classify({active:t})},function(){return r.a({href:"#"},function(){return r.format("only-team-members")})}),r.li({class:r.classify({active:!t})},function(){return r.a({href:"#"},function(){return r.format("anybody")})})})})})},{}],879:[function(e,t,n){var r;r=e(517)("org_prefs_restrict_invites"),t.exports=r.renderable(function(e){var t,n,i;return t=e.hasRestrictions,n=e.hasSlack,i=e.slackSelfJoin,r.div(function(){return r.div(".pop-over-sub-heading",function(){return r.format("email-domain-restrictions")}),r.form(".form-grid.js-form",function(){return r.div(".form-grid-child-threequarters.u-relative",function(){return r.input(".js-input-restricted.js-autofocus",{type:"text",placeholder:r.l("add-a-domain-or-address-ellipsis"),style:"margin-bottom: 6px;"}),r.span(".spinner.small.hide.js-loading",{style:"position: absolute; top: 12px; right: 8px; z-index: 2;"})}),r.div(".form-grid-child-quarter",function(){return r.input(".mod-inline-with-text-input.primary.js-form-submit-input",{type:"submit",value:r.l("add")})})}),r.p(".u-bottom.quiet",{style:"padding: 6px;"},function(){return r.format("choose-which-email-domains-and-addresses-can-be-added-to-the-organization-for-example-if-you-only-wanted-users-with-trello-com-email-addresses-to-be-able-to-be-added-to-the-organization-enter-trello-com")}),r.p(".error.u-bottom.js-errors",{style:"display: none; margin-top: 8px;"}),r.div(".manage-member-section.js-restriction-list",{style:r.stylify({"margin-top":"16px",display:t?"block":"none"})},function(){return r.h4(function(){return r.format("allowed-domains-and-addresses")}),r.ul(".closeable-list.js-list")})})})},{}],880:[function(e,t,n){var r;r=e(517)("org_prefs_vis"),t.exports=function(){return r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-create-public-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"public"},function(){return r.li({class:r.mustacheBlock("boardVisibilityRestrict_public_org",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"org"},function(){return r.format("any-organization-member")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_public_admin",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"admin"},function(){return r.format("only-organization-admins")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_public_none",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"none"},function(){return r.format("nobody")})})})}),r.hr(),r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-create-organization-visible-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"org"},function(){return r.li({class:r.mustacheBlock("boardVisibilityRestrict_org_org",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"org"},function(){return r.format("any-organization-member")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_org_admin",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"admin"},function(){return r.format("only-organization-admins")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_org_none",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"none"},function(){return r.format("nobody")})})})}),r.hr(),r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-create-private-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"private"},function(){
return r.li({class:r.mustacheBlock("boardVisibilityRestrict_private_org",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"org"},function(){return r.format("any-organization-member")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_private_admin",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"admin"},function(){return r.format("only-organization-admins")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_private_none",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"none"},function(){return r.format("nobody")})})})})}},{}],881:[function(e,t,n){var r;r=e(517)("org_remove_or_deactivate_member"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(".u-clearfix",function(){return r.a(".js-soft-remove",{href:"#"},function(){return r.span(".u-clearfix",function(){return r.mustacheBlock("isMe",function(){return r.format("leave-organization")}),r.mustacheBlockInverted("isMe",function(){return r.format("remove-from-organization")})}),r.span(".sub-name",function(){return r.mustacheBlock("isDeactivated",function(){return r.format("remove-all-access-to-the-organization-and-all-boards")}),r.mustacheBlockInverted("isDeactivated",function(){return r.mustacheBlock("orgIsBC",function(){return r.format("remove-all-access-to-the-organization")}),r.mustacheBlockInverted("orgIsBC",function(){return r.format("remove-all-access-to-the-organization-the-member-will-remain-on-all-their-boards-in-this-organization-they-will-receive-a-notification")})})})}),r.mustacheBlock("orgIsBC",function(){return r.mustacheBlockInverted("isDeactivated",function(){return r.mustacheBlockInverted("isMe",function(){return r.span(".check-div.quiet.u-clearfix",{style:"margin-left: 24px; padding-top: 2px; font-size: 12px; line-height: 15px;"},function(){return r.input({type:"checkbox",id:"hardRemove",name:"hard",checked:!0}),r.label({for:"hardRemove"},function(){return r.format("check-this-box-to-remove-the-member-from-all-boards")})})})})})}),r.mustacheBlock("canDeactivate",function(){return r.mustacheBlockInverted("isMe",function(){return r.li(".u-clearfix",function(){return r.a(".js-deactivate",{href:"#"},function(){return r.format("deactivate-disable-members-access-to-organization-boards-but-allow-other-organization-members-to-see-what-the-cards-and-boards-the-member-was-on")})})})})})}},{}],882:[function(e,t,n){var r;r=e(517)("org_slack_restrictions"),t.exports=r.renderable(function(e){var t;return t=e.adminOnly,r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-link-slack-teams")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",function(){return r.li({class:r.classify({active:!t,"js-disable-admin-only":!0})},function(){return r.a({href:"#"},function(){return r.format("any-team-member"),r.span(".icon-sm.icon-check")})}),r.li({class:r.classify({active:t,"js-enable-admin-only":!0})},function(){return r.a({href:"#"},function(){return r.format("only-team-admins"),r.span(".icon-sm.icon-check")})})})})})},{}],883:[function(e,t,n){var r;r=e(517)("organization_list_item"),t.exports=function(){return r.a({href:r.mustacheVar("url")},function(){return r.span(".item-name",function(){return r.text(r.mustacheVar("displayName"))}),r.mustacheBlock("hasBusinessClass",function(){return r.icon("business-class")}),r.span({class:"icon-sm icon-"+r.mustacheVar("visIconClass")})})}},{}],884:[function(e,t,n){var r;r=e(517)("organization_search_list_item"),t.exports=function(){return r.li(function(){return r.a(".link-item",{href:"/"+r.mustacheVar("name")},function(){return r.span(".item-name",function(){return r.text(r.mustacheVar("displayName"))})})})}},{}],885:[function(e,t,n){var r,i,o,s,a;r=e("underscore"),i=e(146),s=e(517)("plugin_chrome"),a=function(e){var t,n,r,i,o;return o=e.match(/[0-9a-f]{2}/gi).map(function(e){var t;return t=parseInt(e,16)/255,.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}),r=o[0],n=o[1],t=o[2],i=.2126*r+.7152*n+.0722*t,.4623475>=i},o=function(e){var t,n;return n=i(e.url)?e.url:"#",t={href:n,target:n,title:e.alt,"data-index":e.index},s.a(".plugin-chrome-header-action",t,function(){return s.span(".plugin-action-icon",{style:"background-image: url('"+e.icon+"');"})})},t.exports=s.renderable(function(e){var t,n,u,c,l,d,p,h,m,f,g,v;return g=e.url,l=e.height,u=e.context,t=e.accentColor,f=e.title,n=e.actions,c=e.fullscreen,"iframe"===e.type?(null!=t&&/^#[a-fA-F0-9]{6}$/.test(t)||(t="#EDEFF0"),v=r.chain(n).filter(function(e){return i(e.icon)}).map(function(e){return r.extend(e,{index:n.indexOf(e)})}).groupBy("position").value(),d=(null!=(p=v.left)?p.slice(0,3):void 0)||[],m=(null!=(h=v.right)?h.slice(0,1):void 0)||[],1===m.length&&(d=d.slice(0,2)),s.div(".plugin-chrome-wrapper",{class:s.classify({fullscreen:c})},function(){return s.div(".plugin-chrome-header",{style:"background-color: "+t+";"},function(){return s.div(".plugin-chrome-header-left-actions",function(){return d.map(o)}),s.span(".plugin-chrome-title",{class:s.classify({light:a(t)})},function(){return s.text(f)}),s.div(".plugin-chrome-header-right-actions",function(){return m.map(o),s.a(".plugin-chrome-close-button.icon-lg.icon-close.js-close-plugin-chrome",{class:s.classify({light:a(t)}),href:"#"})})}),s.div(".plugin-chrome-content",function(){return s.iframe(".plugin-iframe",{src:g,style:s.stylify({height:c?void 0:l+"px"})})})})):void 0})},{}],886:[function(e,t,n){var r;r=e(517)("pop_over_ad"),t.exports=function(){return r.a(".icon-sm.icon-close.dark-hover.ad-close.js-close-ad",{href:"#"}),r.mustacheBlock("iconClass",function(){return r.span({class:"pop-over-ad-icon "+r.mustacheVar("iconClass")})}),r.div(".ad-copy",function(){return r.raw(r.mustacheVar("copyHtml"))})}},{}],887:[function(e,t,n){var r;r=e(517)("popover_add_email"),t.exports=function(){return r.form(function(){return r.p(".error",{id:"account-error"}),r.div(".field",function(){return r.label({for:"email"},function(){return r.format("new-email-address")}),r.input({id:"email",type:"email",name:"email",value:""})}),r.input(".primary.js-save-changes",{type:"submit",value:r.l("send-confirmation-email")})}),r.hr(),r.p(".quiet.u-bottom",function(){return r.format("we-ll-send-an-email-to-the-address-you-enter-click-the-link-in-the-email-to-confirm-the-address")})}},{}],888:[function(e,t,n){var r;r=e(517)("popover_add_list"),t.exports=function(){return r.form(function(){return r.div(".form-grid",function(){return r.div(".form-grid-child.form-grid-child-threequarters",function(){return r.label({for:"list-name"},function(){return r.format("name")}),r.input(".js-list-name.js-autofocus",{type:"text",id:"list-name",value:r.l("default-list-name"),style:"margin-bottom: 0;"})}),r.div(".form-grid-child.form-grid-child-quarter",function(){return r.div(".button-link.setting",{style:"margin-top: 4px;"},function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-list-pos")})})}),r.input(".primary.wide.js-add-list",{type:"submit",value:r.l("add")})})}},{}],889:[function(e,t,n){var r;r=e(517)("popover_add_to_team"),t.exports=r.renderable(function(e){var t;return t=e.teamType,r.p(".u-text-align-center",{style:"padding: 3px 0"},function(){return r.format("add to team-disclaimer",{teamType:t})}),r.button(".button-link.primary.u-width-100.js-add-to-team",function(){return r.format("add to team-confirm")})})},{}],890:[function(e,t,n){var r;r=e(517)("popover_auto_mentioner"),t.exports=function(){return r.mustacheBlock("button",function(){return r.input(".js-filter-mentionables.js-autofocus",{type:"text",placeholder:r.l("search-members-ellipsis")})}),r.p(".quiet.js-empty-list.hide",{style:"padding: 8px 8px 0;"},function(){return r.format("no-matching-members")}),r.ul(".pop-over-member-list.js-available-members"),r.mustacheBlock("button",function(){return r.div(".js-select-multiple-options.hide",function(){return r.hr(),r.ul(".pop-over-list",function(){return r.mustacheBlock("showAllCardMembers",function(){return r.li(function(){return r.a(".js-select-all-card-members",{href:"#"},function(){return r.format("mention-all-card-members")})})}),r.mustacheBlock("showAllBoardMembers",function(){return r.li(function(){return r.a(".js-select-all-board-members",{href:"#"},function(){return r.format("mention-all-board-members")})})}),r.mustacheBlock("showAllCommenters",function(){return r.li(function(){return r.a(".js-select-all-commenters",{href:"#"},function(){return r.format("mention-all-commenters")})})})})})})}},{}],891:[function(e,t,n){var r;r=e(517)("popover_board_header_org_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("canChangeOrg",function(){return r.li(function(){return r.a(".js-change-org",{href:"#"},function(){return r.mustacheBlock("setOrgNull",function(){return r.format("remove-from-organization")}),r.mustacheBlockInverted("setOrgNull",function(){return r.format("change-organization-ellipsis")})})})}),r.li(function(){return r.a(".js-view-org",{href:"/"+r.mustacheVar("name")},function(){return r.format("view-organization-page")})})})}},{}],892:[function(e,t,n){var r;r=e(517)("popover_card_completer"),t.exports=r.renderable(function(e){var t,n;return t=e.button,n=e.hideLoading,t&&r.label(function(){return r.format("card-to-add"),r.input(".js-search.js-autofocus",{type:"text",placeholder:r.l("search-for-a-card-ellipsis")})}),r.div(".js-loading",{class:r.classify({hide:n})},function(){return r.span(".loading.spinner")}),r.div(".js-results",function(){return r.ul(".pop-over-list.navigable.js-card-list")}),r.div(".empty.js-no-results.hide",{style:"padding: 24px 6px"},function(){return r.p(".u-bottom",function(){return r.format("no-results")})})})},{}],893:[function(e,t,n){var r;r=e(517)("popover_card_from_calendar"),t.exports=function(){return r.div(function(){return r.textarea(".js-card-title",function(){return r.text(r.mustacheVar("title"))})}),r.div(".button-link.list-button-link.setting",function(){return r.span(".label",function(){return r.format("list")}),r.span(".value.js-list-value"),r.label(function(){return r.format("list")}),r.select(".js-select-list")}),r.div(".button-link.pos-button-link.setting",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-position")}),r.input(".primary.wide.js-add-card",{type:"submit",value:r.l("add")})}},{}],894:[function(e,t,n){var r;r=e(517)("popover_change_board_org"),t.exports=function(){return r.form(function(){return r.label(function(){return r.format("organization")}),r.select(".js-org",function(){return r.optionSelected(!r.mustacheVar("orgs"),{value:""},function(){return r.format("none")}),r.mustacheBlock("orgs",function(){return r.optionSelected(r.mustacheVar("select"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("displayName"))})})}),r.mustacheBlock("isPrivate",function(){return r.div(".check-div.js-check-div",function(){return r.label(function(){return r.input(".js-make-org-visible",{type:"checkbox",checked:"checked"}),r.format("make-board-visible-to-organization")})})}),r.mustacheBlockInverted("allowsSelfJoin",function(){return r.div(".check-div.js-check-div",function(){return r.label(function(){return r.input(".js-make-org-joinable",{type:"checkbox",checked:"checked"}),r.format("allow-any-org-member-to-join-this-board")})})}),r.input(".js-submit.wide.primary",{type:"submit",value:r.l("change")})})}},{}],895:[function(e,t,n){var r;r=e(517)("popover_change_labels"),t.exports=function(){return r.input(".js-autofocus.js-label-search",{type:"text",placeholder:r.l("search-labels-ellipsis"),value:r.mustacheVar("searchInit"),autocomplete:"off"}),r.ul(".edit-labels-pop-over.js-labels-list"),r.mustacheBlock("__ed",function(){return r.div(function(){return r.a(".quiet-button.full.js-add-label",{href:"#"},function(){return r.format("create-a-new-label")}),r.a(".quiet-button.full.hide.js-show-more",{href:"#"},function(){return r.format("show-more-labels")}),r.hr(),r.a(".quiet-button.full.js-toggle-color-blind-mode",{href:"#"},function(){return r.mustacheBlock("isColorBlindEnabled",function(){return r.format("disable-color-blind-friendly-mode")}),r.mustacheBlockInverted("isColorBlindEnabled",function(){return r.format("enable-color-blind-friendly-mode")})})})})}},{}],896:[function(e,t,n){var r;r=e(517)("popover_change_roles"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a({class:r.mustacheBlock("canMakeAdmin",function(){return"js-make-admin highlight-icon"})+r.mustacheBlockInverted("canMakeAdmin",function(){return" disabled"})},function(){return r.check(r.mustacheVar("memberIsAdmin"),"admin"),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_admin"))})})}),r.li(function(){return r.a({class:r.mustacheBlock("canMakeMember",function(){return"highlight-icon js-make-member "})+r.mustacheBlockInverted("canMakeMember",function(){return" disabled"})},function(){return r.check(r.mustacheVar("memberIsNormal"),"normal"),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_normal"))})})}),r.mustacheBlock("showObserver",function(){return r.li(function(){return r.a({class:r.mustacheBlock("canMakeObserver",function(){return"highlight-icon js-make-observer "})+r.mustacheBlockInverted("canMakeObserver",function(){return" disabled"})},function(){return r.format("observer"),r.icon("business-class"),r.mustacheBlock("memberIsObserver",function(){return r.icon("check")}),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_observer"))})})})})}),r.mustacheBlockInverted("isMoreThanOneAdmin",function(){return r.mustacheBlock("memberIsAdmin",function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("you-can-t-change-roles-because-there-must-be-at-least-one-admin")})})})}},{}],897:[function(e,t,n){var r;r=e(517)("popover_change_set_password"),t.exports=function(){return r.form(function(){return r.mustacheBlock("hasPassword",function(){return r.label({for:"o_password"},function(){return r.format("old-password")}),r.input({id:"o_password",type:"password",name:"oldpassword",value:""})}),r.label({for:"password1"},function(){return r.mustacheBlock("hasPassword",function(){return r.format("new-password")}),r.mustacheBlockInverted("hasPassword",function(){return r.format("password")})}),r.input({id:"password1",type:"password",name:"password",value:""}),r.label({for:"password2"},function(){return r.mustacheBlock("hasPassword",function(){return r.format("new-password-again")}),r.mustacheBlockInverted("hasPassword",function(){return r.format("password-again")})}),r.input({id:"password2",type:"password",name:"password2",value:""}),r.p(".error",{id:"password-error"}),r.input(".primary.js-save-changes",{type:"submit",value:r.l("save")})}),r.mustacheBlockInverted("hasPassword",function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("you-havent-set-a-password-yet-you-can-set-a-password-so-you-can-log-onto-trello-with-just-your-username-or-email-address")})})}},{}],898:[function(e,t,n){var r;r=e(517)("popover_change_user_info"),t.exports=function(){return r.form(function(){return r.p(".error",{id:"account-error"}),r.div(".field",function(){return r.label({for:"fullName"},function(){return r.format("full-name")}),r.input({id:"fullName",type:"text",name:"fullName",value:r.mustacheVar("fullName")})}),r.div(".field",function(){return r.label({for:"initials"},function(){return r.format("initials")}),r.input({id:"initials",type:"text",name:"initials",value:r.mustacheVar("initials")})}),r.div(".field",function(){return r.label({for:"username"},function(){return r.format("username")}),r.input({id:"username",type:"text",name:"username",value:r.mustacheVar("username"),required:!0,autocomplete:"off",autocorrect:"off",spellcheck:"false",autocapitalize:"off"})}),r.div(".field",function(){return r.label({for:"bio"},function(){return r.format("bio")}),r.textarea({id:"bio",type:"text",name:"bio"},function(){return r.text(r.mustacheVar("bio"))})}),r.input(".primary.js-save-changes",{type:"submit",value:r.l("save")})}),r.hr(),r.p(".quiet.u-bottom",function(){return r.format("your-initials-are-used-in-place-of-your-avatar-if-your-avatar-is-not-set-usernames-require-a-minimum-of-3-characters-alphanumeric-only")})}},{}],899:[function(e,t,n){var r;r=e(517)("popover_confirm_member_delete"),t.exports=function(){return r.p(function(){return r.format("deleting-your-member-account-username-will-be-permanent",{username:r.mustacheVar("username")})}),r.p(function(){return r.b(function(){return r.format("you-will-lose-access-to-your-boards-and-organizations")})}),r.p(function(){return r.format("would-you-like-us-to-send-an-email-to-email-that-contains-a-link-that-you-can-use-to-delete-your-account",{email:r.mustacheVar("email")})}),r.input(".js-delete-member",{type:"submit",value:r.l("send-the-email")}),r.input(".js-cancel-delete",{type:"submit",value:r.l("never-mind")})}},{}],900:[function(e,t,n){var r;r=e(517)("popover_emoji_completer"),t.exports=function(){return r.mustacheBlock("button",function(){return r.input(".js-filter-emoji.js-autofocus",{type:"text",placeholder:r.l("search-for-emoji-ellipsis")})}),r.div(".js-results",function(){return r.ul(".pop-over-emoji-list.js-available-emoji"),r.hr(),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-upload-emoji",{href:"#","data-emojiname":""},function(){return r.format("upload-emoji")})})})}),r.div(".js-no-results.hide",function(){return r.p(".u-bottom.js-no-matching-emoji-helper"),r.a(".button.primary.full.js-upload-emoji",{href:"#","data-emojiname":""})})}},{}],901:[function(e,t,n){var r;r=e(517)("popover_emoji_uploader"),t.exports=function(){return r.mustacheBlockInverted("canUpload",function(){return r.div(".warning",function(){return r.mustacheBlockInverted("hasGold",function(){return r.p(function(){return r.format("you-can-upload-custom-emoji-with-trello-gold-learn-more-about-trello-gold")})}),r.mustacheBlockInverted("hasBCGold",function(){return r.p(".u-bottom",function(){return r.format("you-can-get-custom-emoji-for-your-entire-organization-with-business-class-learn-more-about-business-class")})})}),r.hr()}),r.form({action:"/1/member/"+r.mustacheVar("id")+"/customEmoji",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.label({for:"emojiImage"},function(){return r.format("upload-image")}),r.input(".js-upload-emoji-file.upload-emoji",{id:"emojiImage",type:"file",name:"file",tabindex:"-1",accept:"image/*"}),r.label({for:"emojiName"},function(){return r.format("emoji-name")}),r.input(".js-emoji-name",{id:"emojiName",type:"text",name:"name",value:r.mustacheVar("emojiName")}),r.p(".quiet",function(){return r.format("the-name-will-default-to-the-name-of-the-uploaded-file-you-can-change-it-here-though")}),r.p(".warning.hide.js-invalid-name",function(){return r.format("the-emoji-name-can-only-contain-letters-numbers-and-underscores")}),r.div(".js-emoji-preview",{style:"margin-bottom: 12px;"},function(){return r.p({style:"margin-bottom: 4px;"},function(){return r.strong(function(){return r.format("preview")})}),r.span(".js-emoji-preview-name",function(){return r.text(r.mustacheVar("emojiName"))}),r.text("  "),r.img(".js-emoji-preview.emoji")}),r.input(".primary.wide.js-upload-emoji",{type:"submit",value:r.l("create-custom-emoji")}),r.div(".error.hide",function(){return r.format("upload-failed")})}),r.mustacheBlock("canUpload",function(){return r.mustacheBlockInverted("hasBCGold",function(){return r.hr(),r.p(".u-bottom",function(){return r.format("you-can-also-get-custom-emoji-for-your-entire-organization-with-business-class-learn-more-about-business-class")})})})}},{}],902:[function(e,t,n){var r;r=e(517)("popover_filter_pos_results"),t.exports=function(){return r.ul(".pop-over-list.navigable.normal-weight.js-pos-results",function(){var e;return e=[["js-select-pos-keyword",r.mustacheVar("keywordList")],["js-select-pos-pos",r.mustacheVar("indexList")],["js-select-pos-list",r.mustacheVar("listList")]],e.forEach(function(e){var t,n;return t=e[0],n=e[1],n.forEach(function(e){return r.li(function(){return r.a({href:"#",name:e.value,class:t},function(){return r.format("position-in-list",{index:e.indexString,listName:e.listName})})})})})})}},{}],903:[function(e,t,n){var r;r=e(517)("popover_helper_new_board_add_org"),t.exports=function(){return r.p(function(){return r.format("an-organization-is-a-collection-of-members-and-boards-they-make-sharing-and-working-within-a-group-even-easier")}),r.a(".button.js-create-org",{href:"#"},function(){return r.format("create-an-organization")})}},{}],904:[function(e,t,n){var r;r=e(517)("popover_insertion_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-open-emoji-selector",{href:"#"},function(){return r.format("select-emoji-ellipsis")})}),r.li(function(){return r.a(".js-open-mention-selector",{href:"#"},function(){return r.format("mention-member-ellipsis")})})})}},{}],905:[function(e,t,n){var r;r=e(517)("popover_member_searcher"),t.exports=function(){return r.mustacheBlock("showSearch",function(){return r.input(".js-filter-members.js-autofocus",{type:"text",placeholder:r.l("search-members-ellipsis")})}),r.ul(".pop-over-member-list.checkable.js-members-list")}},{}],906:[function(e,t,n){var r;r=e(517)("popover_move_card"),t.exports=function(){return r.mustachePartial("move_card_controls"),r.input(".primary.wide.js-submit",{type:"submit",value:r.l("move")})}},{}],907:[function(e,t,n){var r;r=e(517)("popover_move_list"),t.exports=function(){return r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("board")}),r.span(".value.js-board-value"),r.label(function(){return r.format("board")}),r.select(".js-select-board",function(){return r.mustacheBlock("organizations",function(){return r.optgroup({label:r.mustacheVar("displayName")},function(){return r.mustacheBlock("boards",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("name")),r.mustacheBlock("selected",function(){return r.text(" "),r.format("current")})})})})})})})}),r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-list-pos")})}),r.input(".primary.wide.js-commit-position",{type:"submit",value:r.l("move")})}},{}],908:[function(e,t,n){var r;r=e(517)("popover_org_logo"),t.exports=function(){return r.p(".error.hide.js-error"),r.div(".uploader",function(){return r.form(".realfile",{action:"/1/organization/"+r.mustacheVar("id")+"/logo",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.input(".js-upload-logo",{type:"file",name:"file",style:"margin-bottom: 0;",tabindex:"-1"})}),r.a(".button-link.fakefile",function(){return r.icon("organization","upload-a-new-logo")})}),r.mustacheBlock("logoHash",function(){return r.hr(),r.a(".quiet-button.js-remove-logo",{href:"#"},function(){return r.format("remove-logo")})})}},{}],909:[function(e,t,n){var r;r=e(517)("popover_rename_board"),t.exports=function(){return r.form(function(){return r.label(function(){return r.format("name")}),r.input(".js-board-name.js-autofocus",{type:"text",value:r.mustacheVar("boardName"),dir:"auto"}),r.input(".primary.wide.js-rename-board",{type:"submit",value:r.l("rename")})})}},{}],910:[function(e,t,n){var r;r=e(517)("popover_select_members"),t.exports=r.renderable(function(e){var t,n;return t=e.includeOrgMembers,n=function(e){return t&&r.h4(function(){return r.format(e)}),r.div(".js-loading",function(){return r.p(".empty",{style:"padding: 24px 6px"},function(){return r.format("loading")})}),r.div(".js-no-results.hide",function(){return r.p(".empty",{style:"padding: 24px 6px"},function(){return r.format("no-results")})}),r.ul(".pop-over-member-list.checkable.u-clearfix.js-mem-list")},r.input(".js-search-mem.js-autofocus",{type:"text",placeholder:r.l("search-members")}),r.div(".manage-member-section.js-board-members",function(){return n("board-members")}),t?(r.div(".manage-member-section.js-org-members",function(){return n("team-members")}),r.div(".js-show-org-members",function(){return r.a(".quiet-button",{href:"#",style:"margin-top: 8px;"},function(){return r.format("show-team-members")})})):void 0})},{}],911:[function(e,t,n){var r;r=e(517)("popover_selector_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-mem-selector",{href:"#"},function(){return r.format("members-ellipsis")})}),r.li(function(){return r.a(".js-label-selector",{href:"#"},function(){return r.format("labels-ellipsis")})}),r.li(function(){return r.a(".js-pos-selector",{href:"#"},function(){return r.format("position-ellipsis")})})})}},{}],912:[function(e,t,n){var r;r=e(517)("popover_set_email_freq"),t.exports=function(){return r.ul(".pop-over-list",{name:"minutesBetweenSummaries"},function(){return r.li(function(){return r.a(".highlight-icon",{value:"-1"},function(){return r.check(r.mustacheVar("minutesBetweenSummaries_-1"),"never"),r.span(".sub-name",function(){return r.format("don-t-send-emails")})})}),r.li(function(){return r.a(".highlight-icon",{value:"60"},function(){return r.check(r.mustacheVar("minutesBetweenSummaries_60"),"periodically"),r.span(".sub-name",function(){return r.format("send-emails-about-once-an-hour")})})}),r.li(function(){return r.a(".highlight-icon",{value:"1"},function(){return r.check(r.mustacheVar("minutesBetweenSummaries_1"),"instantly"),r.span(".sub-name",function(){return r.format("send-emails-as-soon-as-possible")})})})})}},{}],913:[function(e,t,n){var r;r=e(517)("popover_share"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-print",{href:"#",title:r.l("print-using-the-browser-s-print-function-you-can-use-file")},function(){return r.format("print-ellipsis")})}),r.mustacheBlock("hasCsvExport",function(){return r.li(function(){return r.a(".js-export-csv",{href:r.mustacheVar("csvURL"),title:r.l("export-the-board-data-in-csv-format")},function(){return r.format("export-csv")})})}),r.li(function(){return r.a(".js-export-json",{href:r.mustacheVar("jsonURL"),title:r.l("export-the-board-data-in-json-format")},function(){return r.format("export-json")})})}),r.mustacheBlockInverted("hasCsvExport",function(){return r.hr(),r.p(".quiet",{style:"margin: 16px 8px 8px;"},function(){return r.mustacheBlock("needsUpgradeForCsv",function(){return r.a({href:r.mustacheVar("upgradeUrl")},function(){return r.format("there-s-an-update-to-business-class-available-with-csv-export")})}),r.mustacheBlockInverted("needsUpgradeForCsv",function(){return r.format("looking-for-csv-export-check-out-business-class")})})})}},{}],914:[function(e,t,n){var r;r=e(517)("power_up_item"),t.exports=function(){return r.div(".power-up-item-icon",function(){return r.img(".power-up-item-icon-image.mod-rounded",{src:r.mustacheVar("iconSrc"),alt:"Power-Up Icon"}),r.icon("check",{class:"power-up-item-enabled-icon"})}),r.div(".power-up-item-details",function(){return r.h4(".power-up-item-details-header.js-show-details",function(){return r.text(r.mustacheVar("displayName")),r.icon("information",{class:"power-up-item-details-info-icon"})})}),r.div(".power-up-item-actions",function(){return r.a(".power-up-item-actions-button.mod-settings.button-link.js-show-settings",{href:"#"},function(){return r.icon("gear")}),r.mustacheBlock("canEnable",function(){return r.mustacheBlock("upgradeUrl",function(){return r.a(".power-up-item-actions-button.mod-upgrade.button-link",{href:r.mustacheVar("upgradeUrl")},function(){return r.format("upgrade")})}),r.mustacheBlockInverted("upgradeUrl",function(){return r.a(".power-up-item-actions-button.mod-upgrade.button-link.js-add-to-team",function(){return r.format("upgrade")})}),r.a(".power-up-item-actions-button.mod-enable.button-link.js-enable",{href:"#"},function(){return r.format("enable")}),r.a(".power-up-item-actions-button.mod-disable.button-link.js-disable",{href:"#"},function(){return r.format("disable")}),r.a(".power-up-item-actions-button.mod-fake-enable.button-link.js-fake-enable",{href:"#"},function(){return r.format("enable")})})})}},{}],915:[function(e,t,n){var r;r=e(517)("power_up_item_details"),t.exports=function(){return r.mustacheVar("isGrandfathered")&&r.p(".power-up-grandfathered",function(){return r.format("power-up-was-enabled-on-this-board-before-some-recent-changes-we-made",{name:r.mustacheVar("displayName")}),r.text(" ")}),r.p(function(){return r.text(r.mustacheVar("about"))}),r.mustacheBlock("showScreenshots",function(){return r.h4(function(){return r.format("screenshots")}),r.mustacheBlock("screenshots",function(){return r.img({src:r.mustacheVar("."),alt:r.mustacheVar("name")+" Screenshot"})})})}},{}],916:[function(e,t,n){var r;r=e(517)("power_ups_about_calendar"),t.exports=function(){return r.format("enable-the-calendar-power-up-to-gain-access-to-the-trello-calendar-view-display-cards-with-due-dates-in-a-weekly-or-monthly-format-for-a-time-based-overview-of-cards-most-useful-for-time-sensitive-projects-and-projects-with-multiple-due-dates")}},{}],917:[function(e,t,n){var r;r=e(517)("power_ups_about_card_aging"),t.exports=function(){return r.format("cards-will-visibly-age-as-time-passes-without-any-activity-regular-mode-will-cause-old-cards-to-become-progressively-more-transparent-pirate-mode-will-cause-old-cards-to-crack-and-tear-like-an-old-treasure-map-once-cards-have-new-activity-on-them-their-age-counter-is-reset-and-they-appear-new-again-age-thresholds-are-1-2-and-4-weeks")}},{}],918:[function(e,t,n){var r;r=e(517)("power_ups_about_voting"),t.exports=function(){return r.format("give-power-to-the-people-and-allow-users-to-vote-on-cards-then-track-card-vote-counts-and-voter-list")}},{}],919:[function(e,t,n){var r;r=e(517)("power_ups_calendar_prefs"),t.exports=r.renderable(function(e){var t,n,i,o;return n=e.isEnabled,i=e.isGenerated,o=e.url,t=e.canChange,r.h4(function(){return r.format("enable-icalendar-feed")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select.js-calendar-pref-feed",{href:"#",class:r.classify({disabled:!t}),name:"enabled"},function(){return r.span(".name",function(){return r.format("enabled")}),n?r.icon("check"):void 0})}),r.li(function(){return r.a(".js-select.js-calendar-pref-feed",{href:"#",class:r.classify({disabled:!t}),name:"disabled"},function(){return r.span(".name",function(){return r.format("disabled")}),n?void 0:r.icon("check")})})}),n?(r.hr(),r.h4(function(){return r.format("your-personal-icalendar-feed")}),r.input(".full.js-calendar-feed-url",{type:"text",value:i?o:r.format("generating")}),r.div(function(){return r.a(".button.js-regen-calendar-url",{href:"#"},function(){return i?r.format("regenerate-your-feed-url"):r.format("generating")})})):void 0})},{}],920:[function(e,t,n){var r;r=e(517)("power_ups_card_aging_prefs"),t.exports=r.renderable(function(e){var t,n;return t=e.agingMode,n=e.canChange,r.h2(function(){return r.format("how-do-you-want-the-aged-cards-to-look")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select",{href:"#",class:r.classify({disabled:!n}),name:"regular"},function(){return r.span(".name",function(){return r.format("regular-mode")}),"regular"===t&&r.icon("check"),r.span(".sub-name",function(){return r.format("older-cards-become-more-transparent");
})})}),r.li(function(){return r.a(".js-select",{href:"#",class:r.classify({disabled:!n}),name:"pirate"},function(){return r.span(".name",function(){return r.format("pirate-mode")}),"pirate"===t&&r.icon("check"),r.span(".sub-name",function(){return r.format("older-cards-crackle-and-tear")})})})})})},{}],921:[function(e,t,n){var r;r=e(517)("power_ups_detail_navbar"),t.exports=function(){return r.a({class:"nav-item js-toolbar-select "+r.mustacheBlock("screenshots",function(){return"active"}),href:"#",name:"screenshots"},function(){return r.format("screenshots")}),r.a({class:"nav-item js-toolbar-select "+r.mustacheBlock("settings",function(){return"active"}),href:"#",name:"settings"},function(){return r.format("settings")})}},{}],922:[function(e,t,n){var r;r=e(517)("board_power_ups"),t.exports=r.renderable(function(e){var t,n,i,o;return i=e.partOfTeam,o=e.upgradeUrl,t=e.hasGold,n=e.onOldBC,r.h4(".power-ups-upgrade-header",function(){return r.format("exceeded-power-ups-limit")}),t?r.p(".power-ups-upgrade-text",function(){return r.format("as-a-gold-member-three-power-ups")}):n?r.p(".power-ups-upgrade-text",function(){return r.format("with-the-legacy-version-of-business-class-you-can-turn-on-one-power-up-per-board")}):i?r.p(".power-ups-upgrade-text",function(){return r.format("business-class-teams-get-unlimited-power-ups")}):r.p(".power-ups-upgrade-text",function(){return r.format("as-a-free-member-one-power-up")}),r.p(".power-ups-upgrade-text",function(){return r.format("power-ups-exceeds-your-limit")}),n?r.p(".power-ups-upgrade-text",function(){return r.format("to-unlock-more-upgrade-your-team-to-the-latest-version-of-business-class-today")}):r.p(".power-ups-upgrade-text",function(){return r.format("continue-using-upgrade-to-bc")}),r.div(".power-ups-upgrade-action",function(){return i?r.a(".button.primary",{href:o},function(){return r.format("lets-do-this")}):r.button(".button.primary.js-upgrade",function(){return r.format("lets-do-this")})}),r.div(".power-ups-upgrade-action",function(){return r.a(".power-ups-upgrade-cancel.js-go-back",{href:"#"},function(){return r.format("no-thanks")})})})},{}],923:[function(e,t,n){var r;r=e(517)("power_ups_voting_prefs"),t.exports=r.renderable(function(e){var t,n,i,o,s;return t=e.canChange,n=e.canSetObservers,i=e.canSetOrganization,o=e.canSetPublic,s=e.votingMode,r.h4(function(){return r.format("who-is-allowed-to-vote-on-cards")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t}),name:"members"},function(){return r.span(".name",function(){return r.format("members")}),"members"===s&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-on-all-boards")})})}),r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t||!n}),name:"observers"},function(){return r.span(".name",function(){return r.format("members-and-observers")}),"observers"===s&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-only-on-boards-with-observers")})})}),r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t||!i}),name:"org"},function(){return r.span(".name",function(){return r.format("organization-members")}),"org"===s&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-only-on-boards-within-an-organization")})})}),r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t||!o}),name:"public"},function(){return r.span(".name",function(){return r.format("public-members")}),"public"===s&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-on-public-boards")})})})})})},{}],924:[function(e,t,n){var r;r=e(517)("product_promo_button"),t.exports=function(){return r.div(".product-promo-button-overlay",function(){return r.span(".product-promo-button",function(){return r.format("get-business-class")})})}},{}],925:[function(e,t,n){var r,i;i=e(517)("quick_card_editor"),r=e(763),t.exports=function(){return i.span(".icon-lg.icon-close.quick-card-editor-close-icon.js-close-editor"),i.div(".quick-card-editor-card",{style:"top: "+i.mustacheVar("top")+"px; left: "+i.mustacheVar("left")+"px; width: "+i.mustacheVar("width")+"px;"},function(){return i.div(".list-card.list-card-quick-edit.js-stop",{style:"width: "+i.mustacheVar("width")+"px;"},function(){return r(i.mustacheVar("."))}),i.input(".primary.wide.js-save-edits",{type:"submit",value:i.l("save")}),i.div({class:"quick-card-editor-buttons"+i.mustacheBlock("leftButtons",function(){return" quick-card-editor-buttons-left"})},function(){return i.a(".quick-card-editor-buttons-item.js-edit-labels",{href:"#"},function(){return i.icon("label",{class:"light"}),i.span(".quick-card-editor-buttons-item-text",function(){return i.format("edit-labels")})}),i.a(".quick-card-editor-buttons-item.js-edit-members",{href:"#"},function(){return i.icon("member",{class:"light"}),i.span(".quick-card-editor-buttons-item-text",function(){return i.format("change-members")})}),i.a(".quick-card-editor-buttons-item.js-move-card",{href:"#"},function(){return i.icon("move",{class:"light"}),i.span(".quick-card-editor-buttons-item-text",function(){return i.format("move")})}),i.a(".quick-card-editor-buttons-item.js-copy-card",{href:"#"},function(){return i.icon("card",{class:"light"}),i.span(".quick-card-editor-buttons-item-text",function(){return i.format("copy")})}),i.a(".quick-card-editor-buttons-item.js-edit-due-date",{href:"#"},function(){return i.icon("clock",{class:"light"}),i.span(".quick-card-editor-buttons-item-text",function(){return i.format("change-due-date")})}),i.mustacheBlockInverted("closed",function(){return i.a(".quick-card-editor-buttons-item.js-archive",{href:"#"},function(){return i.icon("archive",{class:"light"}),i.span(".quick-card-editor-buttons-item-text",function(){return i.format("archive")})})})})})}},{}],926:[function(e,t,n){var r;r=e(517)("saved_search"),t.exports=function(){return r.a(".saved-search-item.js-saved-search-name",{href:"#"},function(){return r.span(".saved-search-item-name",function(){return r.text(r.mustacheVar("name"))}),r.text(" "),r.span(".saved-search-query.quiet.js-saved-search-query",function(){return r.text(r.mustacheVar("query"))})}),r.mustacheBlock("allowDelete",function(){return r.a(".saved-search-delete.dark-hover.quiet.js-delete-saved-search",{href:"#"},function(){return r.icon("close")}),r.span(".saved-search-delete-menu.quiet.hide.js-delete-saved-search-menu",function(){return r.format("are-you-sure-you-want-to-delete"),r.a(".saved-search-delete-menu-item.js-delete-saved-search-confirm",{href:"#"},function(){return r.format("yes-delete")}),r.a(".saved-search-delete-menu-item.js-delete-saved-search-cancel",{href:"#"},function(){return r.format("no-keep-this")})})})}},{}],927:[function(e,t,n){var r;r=e(517)("search_instant_results"),t.exports=function(){var e;return e=function(e){return r.format(e,{archived:"archived",attachments:"attachments",board:"board",checklist:"checklist",comment:"comment",cover:"cover",created:"created",day:"day",description:"description",due:"due",edited:"edited",has:"has",id:"id",is:"is",label:"label",list:"list",member:"member",members:"members",month:"month",name:"name",open:"open",overdue:"overdue",starred:"starred",stickers:"stickers",week:"week"})},r.div(".search-header-options",function(){return r.div(".js-saved-search-links",function(){return r.a(".quiet.dark-hover.search-header-options-option.js-see-all-saved-searches",{href:"#"},function(){return r.icon("back","back-to-saved-searches")}),r.a(".quiet.dark-hover.search-header-options-option.js-save-this-search",{href:"#"},function(){return r.icon("star","save-this-search")}),r.span(".quiet.search-header-options-option.mod-save.js-current-search.hide",{href:"#"},function(){return r.icon("star"),r.span(".js-current-search-name")})})}),r.mustacheBlock("picker",function(){return r.div(".js-search-results.u-clearfix.u-relative.hide",function(){return r.div(".search-results-section.js-card-results.u-clearfix.hide",function(){return r.div(".js-search-results-title.results-title"),r.div(".js-list")})})}),r.mustacheBlockInverted("picker",function(){return r.div(".search-results-section.js-save-this-search-menu.hide",function(){return r.mustacheBlock("savedSearchesEnabled",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("what-would-you-like-to-call-this-search")})}),r.form(".js-save-this-search-form",function(){return r.input(".js-saved-search-name-input",{type:"text",style:"margin-bottom: 4px;"}),r.input(".primary.js-save-this-search-submit",{type:"submit",value:r.l("save")}),r.a(".quiet.js-save-this-search-cancel",{href:"#",style:"margin-left: 6px;"},function(){return r.format("nevermind")})})}),r.mustacheBlockInverted("savedSearchesEnabled",function(){return r.h2(function(){return r.format("upgrade-to-add-new-saved-searches")}),r.p({style:"font-size: 16px; line-height: 1.2;"},function(){return r.format("you-can-add-new-saved-searches-with-trello-gold-or-get-saved-searches-for-your-entire-organization-with-business-class")}),r.p(function(){return r.a(".button.js-gold-link",{target:"_blank",href:"/gold"},function(){return r.format("check-out-trello-gold")}),r.a(".button.js-business-class-link",{target:"_blank",href:"/business-class"},function(){return r.format("check-out-business-class")})}),r.hr()})}),r.div(".search-results-section.js-search-suggestions.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("did-you-mean-ellipsis")})}),r.div(".js-search-suggestions-list")}),r.div(".search-results-section.js-saved-searches.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("saved-searches")})}),r.p(".quiet.hide.js-no-saved-searches",function(){return r.format("you-have-no-saved-searches-to-save-a-search-start-searching-and-click-save-this-search-in-the-upper-corner")}),r.div(".js-saved-searches-list"),r.hr()}),r.div(".js-search-results.u-clearfix.u-relative.hide",function(){return r.div(".search-results-section.js-card-results.u-clearfix.hide",function(){return r.div(".search-results-section-header.u-clearfix",function(){return r.h4(function(){return r.format("cards")})}),r.div(".js-list"),r.span(".search-loading.hide.js-loading-cards",{href:"#"},function(){return r.format("loading-ellipsis")}),r.a(".show-more.hide.js-show-more-cards",{href:"#"},function(){return r.format("show-more-cards-ellipsis")})}),r.div(".search-results-section.js-board-results.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("boards")})}),r.ul(".board-results-list.js-list"),r.a(".show-more.hide.js-show-more-boards",{href:"#"},function(){return r.format("show-more-boards-ellipsis")})}),r.div(".search-results-section.js-member-results.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("members")})}),r.ul(".js-list.pop-over-member-list"),r.a(".show-more.hide.js-show-more-members",{href:"#"},function(){return r.format("show-more-members-ellipsis")})}),r.div(".search-results-section.js-org-results.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("organizations")})}),r.ul(".org-list.js-list"),r.a(".show-more.hide.js-show-more-orgs",{href:"#"},function(){return r.format("show-more-organizations-ellipsis")})})})}),r.div(".search-tips.hide.js-no-input",function(){return r.p(".search-tips-helper.quiet.js-search-tips-helper",function(){return e("refine-your-search-with-operators-like-at-member-label-is-archived-and-has-attachments"),r.text(" "),r.a(".js-show-search-tips",{href:"#"},function(){return r.format("learn-more-ellipsis")})}),r.div(".search-tips-list.js-search-tips-list.hide",function(){return r.p(".quiet",function(){return e("search-operators-help-you-find-specific-cards-and-create-highly-tailored-lists-trello-will-suggest-operators-for-you-as-you-type-but-here-s-a-full-list-to-keep-in-mind-you-can-add-to-any-operator-to-do-a-negative-search-such-as-has-members-to-search-for-cards-without-any-members-assigned")}),r.dl(function(){return r.dt(function(){return r.format("at-name")}),r.dd(function(){return e("returns-cards-assigned-to-a-member-if-you-start-typing-at-trello-will-suggest-members-for-you-member-also-works-at-me-will-include-only-your-cards")}),r.dt(function(){return r.format("label")}),r.dd(function(){return e("returns-labeled-cards-trello-will-suggest-labels-for-you-if-you-start-typing-and-the-label-you-are-looking-for-label-also-works")}),r.dt(function(){return e("board-id")}),r.dd(function(){return e("returns-cards-within-a-specific-board-if-you-start-typing-board-trello-will-suggest-boards-for-you-you-can-search-by-board-name-too-such-as-board-trello-to-search-only-cards-on-boards-with-trello-in-the-board-name")}),r.dt(function(){return e("list-name")}),r.dd(function(){return e("returns-cards-within-the-list-named-name-or-whatever-you-type-besides-name")}),r.dt(function(){return e("has-attachments")}),r.dd(function(){return e("returns-cards-with-attachments-has-description-has-cover-has-members-and-has-stickers-also-work-as-you-would-expect")}),r.dt(function(){return e("due-day")}),r.dd(function(){return e("returns-cards-due-within-24-hours-due-week-due-month-and-due-overdue-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-due-14-to-search-will-include-cards-due-in-the-next-14-days")}),r.dt(function(){return e("created-day")}),r.dd(function(){return e("returns-cards-created-in-the-last-24-hours-created-week-and-created-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-created-14-to-the-search-will-include-cards-created-in-the-last-14-days")}),r.dt(function(){return e("edited-day")}),r.dd(function(){return e("returns-cards-edited-in-the-last-24-hours-edited-week-and-edited-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-edited-21-to-the-search-will-include-cards-edited-in-the-last-21-days")}),r.dt(function(){return e("description-checklist-comment-and-name")}),r.dd(function(){return e("returns-cards-matching-the-text-of-card-descriptions-checklists-comments-or-names-for-example-comment-fix-it-will-return-cards-with-fix-it-in-a-comment")}),r.dt(function(){return e("is-open-and-is-archived")}),r.dd(function(){return r.format("returns-cards-that-are-either-open-or-archived-trello-returns-both-types-by-default")}),r.dt(function(){return e("is-starred")}),r.dd(function(){return r.format("only-include-cards-on-starred-boards")})})})}),r.div(".search-warning.hide.js-no-results",function(){return r.format("no-results")}),r.p(".search-warning.hide.js-searching",function(){return r.format("searching-ellipsis")}),r.p(".search-warning.hide.js-err",function(){return r.format("your-search-produced-an-error")}),r.div(".search-results-section.js-help.u-clearfix",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("looking-for-help-using-trello")})}),r.a(".js-open-help-query.hide",{href:"http://help.trello.com?source=trello-search",target:"help"},function(){return r.format("search-our-help-site-for")}),r.span(".js-open-help",function(){return r.format("visit-our-help-site-or-read-the-guide")})})}},{}],928:[function(e,t,n){var r;r=e(517)("search_results_card"),t.exports=function(){return r.div(".search-result-card-container.js-list-card-container",function(){return r.div(".search-result-card-container-fade")}),r.div(".search-result-card-details",function(){return r.p(".u-bottom",function(){return r.a(".search-result-card-details-name",{href:r.mustacheVar("url")},function(){return r.text(r.mustacheVar("name"))})}),r.p(".u-bottom.quiet",function(){return r.format("in-listname-archived-on-boardname",{listName:r.mustacheVar("listName"),archived:r.mustacheVar("archived"),boardName:r.mustacheVar("boardName"),permLevel:r.mustacheVar("permLevel")})})}),r.a(".search-result-card-hover-target",{href:r.mustacheVar("url")})}},{}],929:[function(e,t,n){var r;r=e(517)("search_suggetion"),t.exports=function(){return r.a(".search-suggestion.js-select-suggestion",{href:"#","data-suggestionphrase":r.mustacheVar("phrase")},function(){return r.span(".search-suggestion-string",function(){return r.text(r.mustacheVar("phrase"))}),r.span(".search-suggestion-desc",function(){return r.text(r.mustacheVar("description"))})})}},{}],930:[function(e,t,n){var r;r=e(517)("search_suggetion_board"),t.exports=function(){return r.a(".search-suggestion.search-suggestion-board.js-select-suggestion",{href:"#","data-suggestionphrase":r.mustacheVar("phrase")},function(){return r.span(".search-suggestion-board-image"),r.span(".search-suggestion-dec",function(){return r.format("cards-on-the-board-name",{name:r.mustacheVar("name")})})})}},{}],931:[function(e,t,n){var r,i;i=e(517)("search_suggetion_member"),r=e(829),t.exports=function(){return i.a(".search-suggestion.search-suggestion-member.js-select-suggestion",{href:"#","data-suggestionphrase":i.mustacheVar("phrase")},function(){return i.span(".member.search-suggestion-member-av",function(){return r(i.mustacheVar("."))}),i.span(function(){return i.format("cards-assigned-to-fullname",{fullName:i.mustacheVar("fullName")})})})}},{}],932:[function(e,t,n){var r;r=e(517)("select_card"),t.exports=r.renderable(function(e){var t,n,i,o;return o=e.name,i=e.id,n=e.closed,t=e.boardName,r.li(".item",function(){return r.a(".name.js-select-card",{href:"#",title:o,"data-id":i},function(){return r.span(".item-name",function(){return r.text(o),n?(r.text(" "),r.span(".quiet",function(){return r.format("archived")})):void 0}),t?r.span(".sub-name",function(){return r.format("in-boardname",{boardName:t})}):void 0})})})},{}],933:[function(e,t,n){var r;r=e(517)("select_emoji"),t.exports=function(){return r.li(".item",function(){return r.a(".name.js-select-emoji",{href:"#",title:r.mustacheVar("name")},function(){return r.img(".emoji",{src:r.mustacheVar("image")}),r.span(".emoji-name",{name:r.mustacheVar("name")},function(){return r.text(r.mustacheVar("name"))})})})}},{}],934:[function(e,t,n){var r;r=e(517)("select_labels"),t.exports=function(){return r.mustacheBlock("labels",function(){return r.li(function(){return r.mustacheBlock("__ed",function(){return r.a(".card-label-edit-button.icon-sm.icon-edit.js-edit-label",{href:"#","data-idlabel":r.mustacheVar("id")})}),r.span({class:"card-label mod-selectable card-label-"+r.mustacheVar("color")+" "+r.mustacheBlock("isActive",function(){return"active"})+" js-select-label","data-idlabel":r.mustacheVar("id"),"data-color":r.mustacheVar("color")},function(){return r.mustacheBlock("name",function(){return r.text(r.mustacheVar("name"))}),r.icon("check",{class:"card-label-selectable-icon light"})})})})}},{}],935:[function(e,t,n){var r,i;i=e(517)("select_member"),r=e(829),t.exports=function(){return i.li({class:"item"+i.mustacheBlock("isActive",function(){return" active"})+i.mustacheBlock("unconfirmed",function(){return" unconfirmed"})+i.mustacheBlock("inactive",function(){return" inactive"})+i.mustacheBlock("isKnownMember",function(){return" js-autoselect"})+" js-member-item"+i.mustacheBlock("disabled",function(){return" disabled"})},function(){return i.a({href:i.mustacheBlock("url",function(){return i.mustacheVar("url")})+i.mustacheBlockInverted("url",function(){return"#"}),class:"name js-select-member "+i.mustacheBlock("extraText",function(){return"multi-line"}),idMember:i.mustacheVar("id"),title:i.mustacheVar("fullName")+i.mustacheBlock("username",function(){return" ("+i.mustacheVar("username")+")"}),autocompleteText:i.mustacheVar("username")},function(){return i.span({class:"member js-member"+i.mustacheBlock("isVirtual",function(){return" virtual"})},function(){return r(i.mustacheVar("."))}),i.span(".full-name",{name:i.mustacheVar("fullName")+i.mustacheBlock("username",function(){return" ("+i.mustacheVar("username")+")"})},function(){return i.text(i.mustacheVar("fullName")),i.text(" "),i.mustacheBlock("username",function(){return i.format("username",{username:i.mustacheVar("username")})})}),i.mustacheBlock("extraText",function(){return i.div(".extra-text.quiet",function(){return i.format("extratext",{extraText:i.mustacheVar("extraText")})})}),i.icon("check",{class:"checked-icon"}),i.icon("forward",{class:"light option js-open-option"}),i.mustacheBlock("inactive",function(){return i.span(".quiet.sub-name",function(){return i.format("inactive-account")})}),i.mustacheBlock("unconfirmed",function(){return i.span(".quiet.sub-name",function(){return i.format("unconfirmed-user")})})})})}},{}],936:[function(e,t,n){var r,i;i=e(517)("select_org_to_upgrade"),r=e(99),t.exports=function(){return i.div(".select-org-to-upgrade",function(){return i.h2(".select-org-to-upgrade-header",function(){return i.format("select-an-organization-to-upgrade-to-business-class")}),i.ul(".select-org-to-upgrade-list",function(){return i.mustacheBlock("orgs",function(){return i.li(".select-org-to-upgrade-list-item",function(){return i.a({href:i.mustacheVar("orgUrl"),class:i.classify({"select-org-to-upgrade-list-item-link":!0,"js-select-org":!i.mustacheVar("isDisabled"),"disabled js-disabled":i.mustacheVar("isDisabled")})},function(){return i.mustacheBlock("logoHash",function(){return i.img(".select-org-to-upgrade-list-item-link-image",{src:i.mustacheVar("__logoDomain")+"/"+i.mustacheVar("logoHash")+"/30.png",alt:i.mustacheVar("displayName")+" logo"})}),i.mustacheBlockInverted("logoHash",function(){return i.span(".icon-lg.icon-organization.select-org-to-upgrade-list-item-link-image")}),i.span(".select-org-to-upgrade-list-item-link-name",function(){return i.text(i.mustacheVar("displayName"))}),i.span(".select-org-to-upgrade-list-item-link-details.quiet",function(){return i.text(r("members",i.mustacheVar("memberCount"))),i.text(". "),i.mustacheBlock("isPremium",function(){return i.mustacheBlockInverted("needsBCUpgrade",function(){return i.format("this-organization-already-has-business-class")}),i.mustacheBlock("needsBCUpgrade",function(){return i.mustacheBlock("isAdmin",function(){return i.format("an-update-is-available")}),i.mustacheBlockInverted("isAdmin",function(){return i.format("an-update-is-available-you-need-to-be-an-admin-to-upgrade")})})})})})})})}),i.mustacheBlockInverted("orgs",function(){return i.p({style:"margin: 24px 0;"},function(){return i.format("you-don-t-have-any-organizations"),i.raw(" "),i.a(".js-create-org",{href:"#"},function(){return i.format("click-here-to-create-one")})})})})}},{}],937:[function(e,t,n){var r,i;i=e(517)("shortcuts"),r=function(e,t,n){return i.div(".shortcut-list-item",function(){return i.h3(".shortcut-list-item-header",function(){return i.format(t)}),i.div(".shortcut-list-item-keys",function(){var t,n,r,o;for(o=[],t=0,r=e.length;r>t;t++)n=e[t],o.push(i.span(".keyboard-key",function(){return i.text(n)}));return o}),i.div(".short-list-item-desc",function(){return n()})})},t.exports=function(){return i.div(".window-main-col",function(){return i.div(".window-header.u-clearfix",function(){return i.span(".window-header-icon.icon-lg.icon-information"),i.h2(".window-title",function(){return i.format("keyboard-shortcuts")})}),i.div(".shortcut-list.markeddown",function(){return i.hr(),r([""," / J"," / K",""],"navigate-cards",function(){return i.p(function(){return i.format("pressing-the-arrow-keys-will-select-adjacent-cards-on-a-board-pressing-j-will-select-the-card-below-the-current-card-pressing-k-will-select-the-card-above-the-current-card")})}),r(["B"],"open-header-boards-menu",function(){return i.p(function(){return i.format("pressing-b-opens-the-boards-menu-in-the-header-you-can-search-for-boards-and-navigate-boards-with-the-up-and-down-arrows-pressing-enter-with-a-board-selected-will-open-it")})}),r(["/"],"focus-search-box",function(){return i.p(function(){return i.format("pressing-puts-the-cursor-in-the-search-box-in-the-header")})}),r(["C"],"archive-card",function(){return i.p(function(){return i.format("pressing-c-will-archive-a-card")})}),r(["D"],"due-date",function(){return i.p(function(){return i.format("pressing-d-will-open-the-due-date-picker-for-a-card")})}),r(["E"],"quick-edit-mode",function(){return i.p(function(){return i.format("if-hovering-over-a-card-pressing-e-will-open-quick-edit-mode-which-lets-you-quickly-edit-the-title-and-other-card-attributes")})}),r(["Esc"],"close-menu-cancel-editing",function(){return i.p(function(){return i.format("pressing-esc-will-close-an-open-dialog-window-or-pop-over-or-cancel-edits-and-comments-you-are-composing")})}),r(["Command/Control","Enter"],"save-text",function(){return i.p(function(){return i.format("meta-enter-copy")})}),r(["Enter"],"open-card",function(){return i.p(function(){return i.format("pressing-enter-will-open-the-currently-selected-card-pressing-shift-enter-while-submitting-a-card-will-open-it-immediately-after-creating-it")})}),r(["F"],"open-card-filter-menu",function(){return i.p(function(){return i.format("use-f-to-open-the-card-filter-menu-the-search-by-title-input-is-automatically-focused")})}),r(["L"],"label",function(){return i.p(function(){return i.format("pressing-l-opens-a-pop-over-of-the-available-labels-clicking-a-label-will-add-or-remove-it-from-the-card")}),i.p(function(){return i.format("pressing-one-of-the-following-number-keys-will-apply-or-remove-that-label")}),i.table(function(){return i.thead(function(){return i.tr(function(){return i.th(function(){return i.format("key")}),i.th(function(){return i.format("label-color")})})}),i.tbody(function(){var e,t;return e=function(e){var t,n,r,o;for(o=[],t=0,r=e.length;r>t;t++)n=e[t],o.push(i.tr(function(){return i.td(function(){return i.text(n[0])}),i.td(function(){return i.format(n[1])})}));return o},t=[["1","green"],["2","yellow"],["3","orange"],["4","red"],["5","purple"],["6","blue"],["7","sky"],["8","lime"],["9","pink"],["0","black"]],e(t)})})}),r([";"],"label-text",function(){return i.p(function(){return i.format("shows-or-hides-label-text")})}),r(["M"],"add-remove-members",function(){return i.p(function(){return i.format("pressing-m-opens-the-add-remove-members-menu-clicking-a-member-s-avatar-will-assign-or-unassign-that-person")})}),r(["N"],"insert-new-card",function(){return i.p(function(){return i.format("pressing-n-opens-a-pop-over-that-allows-you-to-add-a-card-after-the-currently-selected-card")})}),r([",",".","<",">"],"move-card-to-adjacent-list",function(){return i.p(function(){return i.format("pressing-period-or-comma-will-move-a-card-to-the-adjacent-left-or-right-list")})}),r(["Q"],"my-cards-filter",function(){return i.p(function(){return i.format("pressing-the-q-key-toggles-the-cards-assigned-to-me-filter")})}),r(["S"],"subscribe",function(){return i.p(function(){return i.format("pressing-s-will-subscribe-you-to-or-unsubscribe-you-from-a-card-subscribing-to-a-card-will-give-you-notifications-for-most-actions-to-that-card")})}),r(["Space"],"assign-self",function(){return i.p(function(){return i.format("pressing-space-will-assign-or-unassign-yourself-to-a-card")})}),r(["T"],"edit-title",function(){return i.p(function(){return i.format("if-viewing-a-card-pressing-t-will-edit-the-title-if-hovering-over-a-card-pressing-t-will-open-the-card-and-edit-the-title")})}),r(["V"],"vote",function(){return i.p(function(){return i.format("pressing-v-will-add-or-remove-your-vote-on-a-card-if-the-voting-power-up-is-enabled")})}),r(["W"],"toggle-board-menu",function(){return i.p(function(){return i.format("pressing-w-will-collapse-or-expand-the-board-menu-the-sidebar-on-the-right")})}),r(["X"],"clear-all-filters",function(){return i.p(function(){return i.format("use-x-to-clear-all-active-card-filters")})}),r(["?"],"open-shortcuts-page",function(){return i.p(function(){return i.format("pressing-will-open-the-shortcuts-page")})}),r(["@"],"autocomplete-members",function(){return i.p(function(){return i.format("when-writing-a-comment-you-can-type-at-plus-a-member-s-name-username-or-initials-and-get-a-list-of-matching-members-you-can-navigate-that-list-with-the-up-and-down-arrows-pressing-enter-or-tab-with-a-member-selected-will-mention-that-user-in-the-comment-the-mentioned-user-will-get-a-notification-once-submitted")}),i.p(function(){return i.format("when-adding-a-new-card-you-can-use-the-same-method-to-assign-members-to-cards-before-submitting-them")})}),r(["#"],"autocomplete-labels",function(){return i.p(function(){return i.format("when-adding-a-new-card-you-can-type-plus-the-label-s-color-or-title-and-get-a-list-of-matching-labels-you-can-use-the-up-and-down-arrows-to-navigate-the-resulting-list-pressing-enter-or-tab-will-add-the-label-to-the-composed-card-the-labels-will-be-added-to-the-card-when-you-submit")})}),r(["^"],"autocomplete-position",function(){return i.p(function(){return i.format("when-adding-a-new-card-you-can-type-plus-a-list-name-or-position-in-a-list-you-can-also-type-top-or-bottom-to-add-to-the-top-or-bottom-of-the-current-list-you-can-use-the-up-and-down-arrows-to-navigate-the-resulting-list-pressing-enter-or-tab-will-automatically-change-the-position-of-the-composed-card")})})})})}},{}],938:[function(e,t,n){var r;r=e(517)("sticker_on_card"),t.exports=function(){return r.img(".sticker-image",{src:r.mustacheVar("url"),style:"-webkit-transform: rotate("+r.mustacheVar("rotate")+"deg);transform: rotate("+r.mustacheVar("rotate")+"deg);",alt:r.mustacheVar("image")}),r.mustacheBlock("showEditControls",function(){return r.div(".sticker-controls",function(){return r.span(".sticker-control-btn.rotate-btn.js-rotate-sticker",function(){return r.format("rotate")}),r.span(".sticker-control-btn.move-btn.js-move-sticker",function(){return r.format("move")}),r.span(".sticker-control-btn.remove-btn.js-remove-sticker",function(){return r.format("remove")})})})}},{}],939:[function(e,t,n){var r;r=e(517)("sticker_pack_selection_list"),t.exports=function(){return r.h2(function(){return r.text(r.mustacheVar("displayName"))}),r.div(".sticker-list.u-clearfix.js-sticker-list.u-relative")}},{}],940:[function(e,t,n){var r;r=e(517)("sticker_select"),t.exports=function(){return r.div(".sticker-list.u-clearfix.js-standard-sticker-list"),r.div(".js-premium-stickers"),r.h2(function(){return r.format("custom-stickers")}),r.div(".sticker-list.u-clearfix.js-custom-sticker-list")}},{}],941:[function(e,t,n){var r;r=e(517)("sticker_select_item"),t.exports=function(){return r.mustacheBlock("pending",function(){return r.img(".sticker-select-image.sticker-select-pending",{src:r.mustacheVar("url")})}),r.mustacheBlockInverted("pending",function(){return r.img(".sticker-select-image.sticker-select-shadow",{src:r.mustacheVar("url")}),r.img(".sticker-select-image.sticker-select-fixed",{src:r.mustacheVar("url")}),r.img(".sticker-select-image.sticker-select-peel",{src:r.mustacheVar("url")})}),r.mustacheBlock("id",function(){return r.span(".sticker-select-option.sticker-select-option-delete-button.js-delete-sticker",function(){return r.icon("close",{class:"sticker-select-option-icon"}),r.span(".sticker-select-option-text.u-text-underline",function(){return r.format("delete")})})}),r.mustacheBlock("error",function(){return r.span(".sticker-select-option",function(){return r.span(".sticker-select-option-text",function(){return r.text(r.mustacheVar("error"))})})}),r.mustacheBlock("pending",function(){return r.span(".sticker-select-option",function(){return r.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),r.span(".sticker-select-option-text",function(){return r.format("uploading-ellipsis")})})})}},{}],942:[function(e,t,n){var r;r=e(517)("sticker_select_item_upload"),t.exports=function(){return r.form({action:"/1/member/"+r.mustacheVar("id")+"/customStickers",method:"post",enctype:"multipart/form-data"},function(){return r.input({
type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.div(".sticker-select.sticker-select-upload",function(){return r.span(".sticker-select-upload-icon.icon-lg.icon-add"),r.input({type:"file",name:"file",class:"sticker-select-upload-input js-upload-image "+r.mustacheBlockInverted("enabled_customStickers",function(){return" disabled"}),multiple:"multiple",accept:"image/*"})})})}},{}],943:[function(e,t,n){var r;r=e(517)("sync_error"),t.exports=function(){return r.format("you-have-been-disconnected-from-the-trello-server-for-too-long"),r.br(),r.a(".app-alert-item-button",{href:"#",onclick:"window.location.reload();"},function(){return r.format("reload-now")})}},{}],944:[function(e,t,n){var r;r=e(517)("take_photo"),t.exports=function(){return r.video({class:"video"+r.mustacheBlockInverted("connected",function(){return" hide"}),autoplay:!0,style:"width:100%"}),r.mustacheBlock("error",function(){return r.p(".error",function(){return r.text(r.mustacheVar("error"))})}),r.mustacheBlock("connected",function(){return r.button(".primary.wide.js-snap",function(){return r.format("snap-photo")})}),r.mustacheBlockInverted("connected",function(){return r.mustacheBlock("error",function(){return r.p(function(){return r.format("couldnt-find-a-camera-to-connect-to-ellipsis")})}),r.mustacheBlockInverted("error",function(){return r.p(function(){return r.format("trying-to-access-your-computers-camera-ellipsis-check-the-banner-at-the-top-of-the-page")})}),r.p(".u-bottom",function(){return r.a(".quiet-button.js-connect-camera",{href:"#"},function(){return r.format("try-again")})})})}},{}],945:[function(e,t,n){var r;r=e(517)("tips"),t.exports=r.renderable(function(e){var t,n,i,o,s;return n=e.id,i=e.imgUrl1x,o=e.imgUrl2x,t=e.bgcolor,s=e.url,r.a({class:"tip js-tip",href:s,"data-tipid":n,target:"_blank"},function(){return r.div({class:"tip-image",style:"background-color: "+t+";"},function(){return r.img({class:"tip-image-img",src:i,srcset:i+" 1x, "+o+" 2x"})}),r.h3(".tip-text",r.l(n))})})},{}],946:[function(e,t,n){var r;r=e(517)("tooltip_content"),t.exports=function(){var e,t,n;return t=r.mustacheVar("closeable"),n=r.mustacheVar("style"),e=t?[".tooltip-content-closeable"]:[],r.div(e.join("")+".tooltip-content.js-tooltip-content",function(){return t&&r.icon("close",{class:"tooltip-close-button js-tooltip-close-button"}),r.raw(r.mustacheVar("tooltipHtml"))})}},{}],947:[function(e,t,n){var r;r=e(517)("woof_header"),t.exports=function(){return r.a(".header-btn.header-woof",{href:"#"},function(){return r.span(".taco-talk-small-icon"),r.span(".header-btn-text",function(){return r.span(".left-arrow"),r.span(".js-phrase")})})}},{}],948:[function(e,t,n){(function(){var t,r=this,i=r.Backbone,o=[],s=o.push,a=o.slice,u=o.splice;t="undefined"!=typeof n?n:r.Backbone={},t.VERSION="0.9.10";var c=r._;c||"undefined"==typeof e||(c=e("underscore")),t.$=r.jQuery||r.Zepto||r.ender,t.noConflict=function(){return r.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=/\s+/,d=function(e,t,n,r){if(!n)return!0;if("object"==typeof n)for(var i in n)e[t].apply(e,[i,n[i]].concat(r));else{if(!l.test(n))return!0;for(var o=n.split(l),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(r))}},p=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},h=t.Events={on:function(e,t,n){if(!d(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!d(this,"once",e,[t,n])||!t)return this;var r=this,i=c.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n),this},off:function(e,t,n){var r,i,o,s,a,u,l,p;if(!this._events||!d(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:c.keys(this._events),a=0,u=s.length;u>a;a++)if(e=s[a],r=this._events[e]){if(o=[],t||n)for(l=0,p=r.length;p>l;l++)i=r[l],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&o.push(i);this._events[e]=o}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!d(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&p(n,t),r&&p(r,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),i=e._listenerId||(e._listenerId=c.uniqueId("l"));return r[i]=e,e.on(t,"object"==typeof t?this:n,this),this},stopListening:function(e,t,n){var r=this._listeners;if(r){if(e)e.off(t,"object"==typeof t?this:n,this),t||n||delete r[e._listenerId];else{"object"==typeof t&&(n=this);for(var i in r)r[i].off(t,n,this);this._listeners={}}return this}}};h.bind=h.on,h.unbind=h.off,c.extend(t,h);var m=t.Model=function(e,t){var n,r=e||{};this.cid=c.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r,t)||{}),(n=c.result(this,"defaults"))&&(r=c.defaults({},r,n)),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return c.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return c.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,i,o,s,a,u,l,d;if(null==e)return this;if("object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;o=n.unset,a=n.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=c.clone(this.attributes),this.changed={}),d=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],c.isEqual(d[r],t)||s.push(r),c.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,o?delete d[r]:d[r]=t;if(!a){s.length&&(this._pending=!0);for(var p=0,h=s.length;h>p;p++)this.trigger("change:"+s[p],this,d[s[p]],n)}if(u)return this;if(!a)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,c.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,c.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!c.isEmpty(this.changed):c.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?c.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e)c.isEqual(r[i],t=e[i])||((n||(n={}))[i]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(e){e=e?c.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){return e.set(e.parse(n,r),r)?void(t&&t(e,n,r)):!1},this.sync("read",this,e)},save:function(e,t,n){var r,i,o,s,a=this.attributes;return null==e||"object"==typeof e?(r=e,n=t):(r={})[e]=t,!r||n&&n.wait||this.set(r,n)?(n=c.extend({validate:!0},n),this._validate(r,n)?(r&&n.wait&&(this.attributes=c.extend({},a,r)),void 0===n.parse&&(n.parse=!0),i=n.success,n.success=function(e,t,n){e.attributes=a;var o=e.parse(t,n);return n.wait&&(o=c.extend(r||{},o)),c.isObject(o)&&!e.set(o,n)?!1:void(i&&i(e,t,n))},o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=r),s=this.sync(o,this,n),r&&n.wait&&(this.attributes=a),s):!1):!1},destroy:function(e){e=e?c.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(e,t,i){(i.wait||e.isNew())&&r(),n&&n(e,t,i)},this.isNew())return e.success(this,null,e),!1;var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=c.result(this,"urlRoot")||c.result(this.collection,"url")||L();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=c.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,t||{}),!1):!0}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,c.extend({silent:!0},t))};c.extend(f.prototype,h,{model:m,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){e=c.isArray(e)?e.slice():[e],t||(t={});var n,r,i,o,a,l,d,p,h,m;for(d=[],p=t.at,h=this.comparator&&null==p&&0!=t.sort,m=c.isString(this.comparator)?this.comparator:null,n=0,r=e.length;r>n;n++)(i=this._prepareModel(o=e[n],t))?(a=this.get(i))?t.merge&&(a.set(o===i?i.attributes:o,t),h&&!l&&a.hasChanged(m)&&(l=!0)):(d.push(i),i.on("all",this._onModelEvent,this),this._byId[i.cid]=i,null!=i.id&&(this._byId[i.id]=i)):this.trigger("invalid",this,o,t);if(d.length&&(h&&(l=!0),this.length+=d.length,null!=p?u.apply(this.models,[p,0].concat(d)):s.apply(this.models,d)),l&&this.sort({silent:!0}),t.silent)return this;for(n=0,r=d.length;r>n;n++)(i=d[n]).trigger("add",i,this,t);return l&&this.trigger("sort",this,t),this},remove:function(e,t){e=c.isArray(e)?e.slice():[e],t||(t={});var n,r,i,o;for(n=0,r=e.length;r>n;n++)o=this.get(e[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,t.silent||(t.index=i,o.trigger("remove",o,this,t)),this._removeReference(o));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,c.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,c.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e])},at:function(e){return this.models[e]},where:function(e){return c.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return c.invoke(this.models,"get",e)},update:function(e,t){t=c.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var n,r,i,o,s=[],a=[],u={};if(c.isArray(e)||(e=e?[e]:[]),t.add&&!t.remove)return this.add(e,t);for(r=0,i=e.length;i>r;r++)n=e[r],o=this.get(n),t.remove&&o&&(u[o.cid]=!0),(t.add&&!o||t.merge&&o)&&s.push(n);if(t.remove)for(r=0,i=this.models.length;i>r;r++)n=this.models[r],u[n.cid]||a.push(n);return a.length&&this.remove(a,t),s.length&&this.add(s,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,c.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?c.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){var i=r.update?"update":"reset";e[i](n,r),t&&t(e,n,r)},this.sync("read",this,e)},create:function(e,t){if(t=t?c.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof m)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=c.isFunction(t)?t:function(e){return e.get(t)};return c.sortedIndex(this.models,e,r,n)}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];c.each(g,function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),c[e].apply(c,t)}});var v=["groupBy","countBy","sortBy"];c.each(v,function(e){f.prototype[e]=function(t,n){var r=c.isFunction(t)?t:function(e){return e.get(t)};return c[e](this.models,r,n)}});var b=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},y=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,_=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(b.prototype,h,{initialize:function(){},route:function(e,n,r){return c.isRegExp(e)||(e=this._routeToRegExp(e)),r||(r=this[n]),t.history.route(e,c.bind(function(i){var o=this._extractParameters(e,i);r&&r.apply(this,o),this.trigger.apply(this,["route:"+n].concat(o)),this.trigger("route",n,o),t.history.trigger("route",this,n,o)},this)),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes)for(var e,t=c.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(y,"(?:$1)?").replace(w,function(e,t){return t?e:"([^/]+)"}).replace(_,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var C=t.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,S=/msie [\w.]+/,T=/\/$/;C.started=!1,c.extend(C.prototype,h,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(T,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(x,"")},start:function(e){if(C.started)throw new Error("Backbone.history has already been started");C.started=!0,this.options=c.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,i=S.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(j,"/"),i&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),C.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=c.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!C.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new C;var M=t.View=function(e){this.cid=c.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},B=/^(\S+)\s*(.*)$/,O=["model","collection","el","id","attributes","className","tagName","events"];c.extend(M.prototype,h,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=c.result(this,"events"))){this.undelegateEvents();for(var t in e){var n=e[t];if(c.isFunction(n)||(n=this[e[t]]),!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(B),i=r[1],o=r[2];n=c.bind(n,this),i+=".delegateEvents"+this.cid,""===o?this.$el.on(i,n):this.$el.on(i,o,n)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=c.extend({},c.result(this,"options"),e)),c.extend(this,c.pick(e,O)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var e=c.extend({},c.result(this,"attributes"));this.id&&(e.id=c.result(this,"id")),this.className&&(e.class=c.result(this,"className"));var n=t.$("<"+c.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}});var P={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.prepareData=function(e,t,n){return"create"==e||"update"==e||"patch"==e?JSON.stringify(t.toJSON(n)):null},t.sync=function(e,n,r){var i=P[e];c.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:i,dataType:"json"};if(r.url||(o.url=c.result(n,"url")||L()),null==r.data&&n&&(o.contentType="application/json",o.data=t.prepareData(e,n,r)),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){o.type="POST",r.emulateJSON&&(o.data._method=i);var s=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",i),s?s.apply(this,arguments):void 0}}"GET"===o.type||r.emulateJSON||(o.processData=!1);var a=r.success;r.success=function(e){a&&a(n,e,r),n.trigger("sync",n,e,r)};var u=r.error;r.error=function(e){u&&u(n,e,r),n.trigger("error",n,e,r)};var l=r.xhr=t.ajax(c.extend(o,r));return n.trigger("request",n,l,r),l},t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var E=function(e,t){var n,r=this;n=e&&c.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},c.extend(n,r,t);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,e&&c.extend(n.prototype,e),n.__super__=r.prototype,n};m.extend=f.extend=b.extend=M.extend=C.extend=E;var L=function(){throw new Error('A "url" property or function must be specified')}}).call(this)},{}]},{},[54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70]);for(;e.length>0;){var r=e;e=[],r.forEach(function(e){e()})}}();
